(()=>{var hi=Object.create;var Fn=Object.defineProperty;var ui=Object.getOwnPropertyDescriptor;var fi=Object.getOwnPropertyNames;var pi=Object.getPrototypeOf,mi=Object.prototype.hasOwnProperty;var Pn=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var gi=(s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of fi(e))!mi.call(s,a)&&a!==t&&Fn(s,a,{get:()=>e[a],enumerable:!(n=ui(e,a))||n.enumerable});return s};var vi=(s,e,t)=>(t=s!=null?hi(pi(s)):{},gi(e||!s||!s.__esModule?Fn(t,"default",{value:s,enumerable:!0}):t,s));var Wn=Pn((an,ln)=>{(function(s,e){typeof an=="object"&&typeof ln!="undefined"?ln.exports=e():typeof define=="function"&&define.amd?define(e):(s=s||self).Sortable=e()})(an,function(){"use strict";function s(i,o){var r,c=Object.keys(i);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(i),o&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),c.push.apply(c,r)),c}function e(i){for(var o=1;o<arguments.length;o++){var r=arguments[o]!=null?arguments[o]:{};o%2?s(Object(r),!0).forEach(function(c){var l,u;l=i,c=r[u=c],u in l?Object.defineProperty(l,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):l[u]=c}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(r,c))})}return i}function t(i){return(t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}function n(){return(n=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var r,c=arguments[o];for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(i[r]=c[r])}return i}).apply(this,arguments)}function a(i,o){if(i==null)return{};var r,c=function(g,v){if(g==null)return{};for(var b,T={},D=Object.keys(g),A=0;A<D.length;A++)b=D[A],0<=v.indexOf(b)||(T[b]=g[b]);return T}(i,o);if(Object.getOwnPropertySymbols)for(var l=Object.getOwnPropertySymbols(i),u=0;u<l.length;u++)r=l[u],0<=o.indexOf(r)||Object.prototype.propertyIsEnumerable.call(i,r)&&(c[r]=i[r]);return c}function d(i){return function(o){if(Array.isArray(o))return h(o)}(i)||function(o){if(typeof Symbol!="undefined"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(i)||function(o,r){if(o){if(typeof o=="string")return h(o,r);var c=Object.prototype.toString.call(o).slice(8,-1);return(c=c==="Object"&&o.constructor?o.constructor.name:c)==="Map"||c==="Set"?Array.from(o):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?h(o,r):void 0}}(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function h(i,o){(o==null||o>i.length)&&(o=i.length);for(var r=0,c=new Array(o);r<o;r++)c[r]=i[r];return c}function f(i){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(i)}var p=f(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),y=f(/Edge/i),w=f(/firefox/i),x=f(/safari/i)&&!f(/chrome/i)&&!f(/android/i),R=f(/iP(ad|od|hone)/i),ot=f(/chrome/i)&&f(/android/i),I={capture:!1,passive:!1};function C(i,o,r){i.addEventListener(o,r,!p&&I)}function _(i,o,r){i.removeEventListener(o,r,!p&&I)}function P(i,o){if(o&&(o[0]===">"&&(o=o.substring(1)),i))try{if(i.matches)return i.matches(o);if(i.msMatchesSelector)return i.msMatchesSelector(o);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(o)}catch(r){return}}function F(i,o,r,c){if(i){r=r||document;do if(o!=null&&(o[0]!==">"||i.parentNode===r)&&P(i,o)||c&&i===r)return i;while(i!==r&&(i=(l=i).host&&l!==document&&l.host.nodeType?l.host:l.parentNode))}var l;return null}var V,te=/\s+/g;function W(i,o,r){var c;i&&o&&(i.classList?i.classList[r?"add":"remove"](o):(c=(" "+i.className+" ").replace(te," ").replace(" "+o+" "," "),i.className=(c+(r?" "+o:"")).replace(te," ")))}function S(i,o,r){var c=i&&i.style;if(c){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(r=i.currentStyle),o===void 0?r:r[o];c[o=o in c||o.indexOf("webkit")!==-1?o:"-webkit-"+o]=r+(typeof r=="string"?"":"px")}}function k(i,o){var r="";if(typeof i=="string")r=i;else do var c=S(i,"transform");while(c&&c!=="none"&&(r=c+" "+r),!o&&(i=i.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(r)}function se(i,o,r){if(i){var c=i.getElementsByTagName(o),l=0,u=c.length;if(r)for(;l<u;l++)r(c[l],l);return c}return[]}function re(){var i=document.scrollingElement;return i||document.documentElement}function j(i,o,r,c,l){if(i.getBoundingClientRect||i===window){var u,g,v,b,T,D,A=i!==window&&i.parentNode&&i!==re()?(g=(u=i.getBoundingClientRect()).top,v=u.left,b=u.bottom,T=u.right,D=u.height,u.width):(v=g=0,b=window.innerHeight,T=window.innerWidth,D=window.innerHeight,window.innerWidth);if((o||r)&&i!==window&&(l=l||i.parentNode,!p))do if(l&&l.getBoundingClientRect&&(S(l,"transform")!=="none"||r&&S(l,"position")!=="static")){var z=l.getBoundingClientRect();g-=z.top+parseInt(S(l,"border-top-width")),v-=z.left+parseInt(S(l,"border-left-width")),b=g+u.height,T=v+u.width;break}while(l=l.parentNode);return c&&i!==window&&(c=(o=k(l||i))&&o.a,i=o&&o.d,o&&(b=(g/=i)+(D/=i),T=(v/=c)+(A/=c))),{top:g,left:v,bottom:b,right:T,width:A,height:D}}}function ke(i,o,r){for(var c=Ie(i,!0),l=j(i)[o];c;){var u=j(c)[r];if(!(r==="top"||r==="left"?u<=l:l<=u))return c;if(c===re())break;c=Ie(c,!1)}return!1}function Pe(i,o,r,c){for(var l=0,u=0,g=i.children;u<g.length;){if(g[u].style.display!=="none"&&g[u]!==M.ghost&&(c||g[u]!==M.dragged)&&F(g[u],r.draggable,i,!1)){if(l===o)return g[u];l++}u++}return null}function Wt(i,o){for(var r=i.lastElementChild;r&&(r===M.ghost||S(r,"display")==="none"||o&&!P(r,o));)r=r.previousElementSibling;return r||null}function G(i,o){var r=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()==="TEMPLATE"||i===M.clone||o&&!P(i,o)||r++;return r}function Sn(i){var o=0,r=0,c=re();if(i)do var u=k(i),l=u.a,u=u.d;while(o+=i.scrollLeft*l,r+=i.scrollTop*u,i!==c&&(i=i.parentNode));return[o,r]}function Ie(i,o){if(!i||!i.getBoundingClientRect)return re();var r=i,c=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var l=S(r);if(r.clientWidth<r.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return re();if(c||o)return r;c=!0}}while(r=r.parentNode);return re()}function jt(i,o){return Math.round(i.top)===Math.round(o.top)&&Math.round(i.left)===Math.round(o.left)&&Math.round(i.height)===Math.round(o.height)&&Math.round(i.width)===Math.round(o.width)}function xn(i,o){return function(){var r;V||((r=arguments).length===1?i.call(this,r[0]):i.apply(this,r),V=setTimeout(function(){V=void 0},o))}}function En(i,o,r){i.scrollLeft+=o,i.scrollTop+=r}function zt(i){var o=window.Polymer,r=window.jQuery||window.Zepto;return o&&o.dom?o.dom(i).cloneNode(!0):r?r(i).clone(!0)[0]:i.cloneNode(!0)}function Rn(i,o){S(i,"position","absolute"),S(i,"top",o.top),S(i,"left",o.left),S(i,"width",o.width),S(i,"height",o.height)}function Bt(i){S(i,"position",""),S(i,"top",""),S(i,"left",""),S(i,"width",""),S(i,"height","")}var ae="Sortable"+new Date().getTime();function oi(){var i,o=[];return{captureAnimationState:function(){o=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(r){var c,l;S(r,"display")!=="none"&&r!==M.ghost&&(o.push({target:r,rect:j(r)}),c=e({},o[o.length-1].rect),!r.thisAnimationDuration||(l=k(r,!0))&&(c.top-=l.f,c.left-=l.e),r.fromRect=c)})},addAnimationState:function(r){o.push(r)},removeAnimationState:function(r){o.splice(function(c,l){for(var u in c)if(c.hasOwnProperty(u)){for(var g in l)if(l.hasOwnProperty(g)&&l[g]===c[u][g])return Number(u)}return-1}(o,{target:r}),1)},animateAll:function(r){var c=this;if(!this.options.animation)return clearTimeout(i),void(typeof r=="function"&&r());var l=!1,u=0;o.forEach(function(g){var v=0,b=g.target,T=b.fromRect,D=j(b),A=b.prevFromRect,z=b.prevToRect,O=g.rect,K=k(b,!0);K&&(D.top-=K.f,D.left-=K.e),b.toRect=D,b.thisAnimationDuration&&jt(A,D)&&!jt(T,D)&&(O.top-D.top)/(O.left-D.left)==(T.top-D.top)/(T.left-D.left)&&(g=O,K=A,A=z,z=c.options,v=Math.sqrt(Math.pow(K.top-g.top,2)+Math.pow(K.left-g.left,2))/Math.sqrt(Math.pow(K.top-A.top,2)+Math.pow(K.left-A.left,2))*z.animation),jt(D,T)||(b.prevFromRect=T,b.prevToRect=D,v=v||c.options.animation,c.animate(b,O,D,v)),v&&(l=!0,u=Math.max(u,v),clearTimeout(b.animationResetTimer),b.animationResetTimer=setTimeout(function(){b.animationTime=0,b.prevFromRect=null,b.fromRect=null,b.prevToRect=null,b.thisAnimationDuration=null},v),b.thisAnimationDuration=v)}),clearTimeout(i),l?i=setTimeout(function(){typeof r=="function"&&r()},u):typeof r=="function"&&r(),o=[]},animate:function(r,c,l,u){var g,v;u&&(S(r,"transition",""),S(r,"transform",""),g=(v=k(this.el))&&v.a,v=v&&v.d,g=(c.left-l.left)/(g||1),v=(c.top-l.top)/(v||1),r.animatingX=!!g,r.animatingY=!!v,S(r,"transform","translate3d("+g+"px,"+v+"px,0)"),this.forRepaintDummy=r.offsetWidth,S(r,"transition","transform "+u+"ms"+(this.options.easing?" "+this.options.easing:"")),S(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){S(r,"transition",""),S(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},u))}}}var We=[],Vt={initializeByDefault:!0},Ge={mount:function(i){for(var o in Vt)!Vt.hasOwnProperty(o)||o in i||(i[o]=Vt[o]);We.forEach(function(r){if(r.pluginName===i.pluginName)throw"Sortable: Cannot mount plugin ".concat(i.pluginName," more than once")}),We.push(i)},pluginEvent:function(i,o,r){var c=this;this.eventCanceled=!1,r.cancel=function(){c.eventCanceled=!0};var l=i+"Global";We.forEach(function(u){o[u.pluginName]&&(o[u.pluginName][l]&&o[u.pluginName][l](e({sortable:o},r)),o.options[u.pluginName]&&o[u.pluginName][i]&&o[u.pluginName][i](e({sortable:o},r)))})},initializePlugins:function(i,o,r,c){for(var l in We.forEach(function(g){var v=g.pluginName;(i.options[v]||g.initializeByDefault)&&((g=new g(i,o,i.options)).sortable=i,g.options=i.options,i[v]=g,n(r,g.defaults))}),i.options){var u;i.options.hasOwnProperty(l)&&(u=this.modifyOption(i,l,i.options[l]))!==void 0&&(i.options[l]=u)}},getEventProperties:function(i,o){var r={};return We.forEach(function(c){typeof c.eventProperties=="function"&&n(r,c.eventProperties.call(o[c.pluginName],i))}),r},modifyOption:function(i,o,r){var c;return We.forEach(function(l){i[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[o]=="function"&&(c=l.optionListeners[o].call(i[l.pluginName],r))}),c}};function Ze(i){var o=i.sortable,r=i.rootEl,c=i.name,l=i.targetEl,u=i.cloneEl,g=i.toEl,v=i.fromEl,b=i.oldIndex,T=i.newIndex,D=i.oldDraggableIndex,A=i.newDraggableIndex,z=i.originalEvent,O=i.putSortable,K=i.extraEventProperties;if(o=o||r&&r[ae]){var L,Q=o.options,i="on"+c.charAt(0).toUpperCase()+c.substr(1);!window.CustomEvent||p||y?(L=document.createEvent("Event")).initEvent(c,!0,!0):L=new CustomEvent(c,{bubbles:!0,cancelable:!0}),L.to=g||r,L.from=v||r,L.item=l||r,L.clone=u,L.oldIndex=b,L.newIndex=T,L.oldDraggableIndex=D,L.newDraggableIndex=A,L.originalEvent=z,L.pullMode=O?O.lastPutMode:void 0;var me,B=e(e({},K),Ge.getEventProperties(c,o));for(me in B)L[me]=B[me];r&&r.dispatchEvent(L),Q[i]&&Q[i].call(o,L)}}function he(i,o){var r=(c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{}).evt,c=a(c,ri);Ge.pluginEvent.bind(M)(i,o,e({dragEl:E,parentEl:Z,ghostEl:N,rootEl:Y,nextEl:Oe,lastDownEl:vt,cloneEl:J,cloneHidden:De,dragStarted:Qe,putSortable:de,activeSortable:M.active,originalEvent:r,oldIndex:je,oldDraggableIndex:Je,newIndex:fe,newDraggableIndex:$e,hideGhostForTarget:kn,unhideGhostForTarget:On,cloneNowHidden:function(){De=!0},cloneNowShown:function(){De=!1},dispatchSortableEvent:function(l){ce({sortable:o,name:l,originalEvent:r})}},c))}var ri=["evt"];function ce(i){Ze(e({putSortable:de,cloneEl:J,targetEl:E,rootEl:Y,oldIndex:je,oldDraggableIndex:Je,newIndex:fe,newDraggableIndex:$e},i))}var E,Z,N,Y,Oe,vt,J,De,je,fe,Je,$e,wt,de,Ne,be,Xt,Yt,Tn,In,Qe,ze,et,bt,le,Be=!1,_t=!1,yt=[],tt=!1,Ct=!1,qt=[],Kt=!1,St=[],xt=typeof document!="undefined",Et=R,Dn=y||p?"cssFloat":"float",si=xt&&!ot&&!R&&"draggable"in document.createElement("div"),$n=function(){if(xt){if(p)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),Mn=function(T,o){var r=S(T),c=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),l=Pe(T,0,o),u=Pe(T,1,o),g=l&&S(l),v=u&&S(u),b=g&&parseInt(g.marginLeft)+parseInt(g.marginRight)+j(l).width,T=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+j(u).width;return r.display==="flex"?r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal":r.display==="grid"?r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":l&&g.float&&g.float!=="none"?(o=g.float==="left"?"left":"right",!u||v.clear!=="both"&&v.clear!==o?"horizontal":"vertical"):l&&(g.display==="block"||g.display==="flex"||g.display==="table"||g.display==="grid"||c<=b&&r[Dn]==="none"||u&&r[Dn]==="none"&&c<b+T)?"vertical":"horizontal"},Hn=function(i){function o(l,u){return function(g,v,b,T){var D=g.options.group.name&&v.options.group.name&&g.options.group.name===v.options.group.name;return l==null&&(u||D)?!0:l==null||l===!1?!1:u&&l==="clone"?l:typeof l=="function"?o(l(g,v,b,T),u)(g,v,b,T):(v=(u?g:v).options.group.name,l===!0||typeof l=="string"&&l===v||l.join&&-1<l.indexOf(v))}}var r={},c=i.group;c&&t(c)=="object"||(c={name:c}),r.name=c.name,r.checkPull=o(c.pull,!0),r.checkPut=o(c.put),r.revertClone=c.revertClone,i.group=r},kn=function(){!$n&&N&&S(N,"display","none")},On=function(){!$n&&N&&S(N,"display","")};xt&&!ot&&document.addEventListener("click",function(i){if(_t)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),_t=!1},!0);function Ae(i){if(E){i=i.touches?i.touches[0]:i;var o=(l=i.clientX,u=i.clientY,yt.some(function(v){var b=v[ae].options.emptyInsertThreshold;if(b&&!Wt(v)){var T=j(v),D=l>=T.left-b&&l<=T.right+b,b=u>=T.top-b&&u<=T.bottom+b;return D&&b?g=v:void 0}}),g);if(o){var r,c={};for(r in i)i.hasOwnProperty(r)&&(c[r]=i[r]);c.target=c.rootEl=o,c.preventDefault=void 0,c.stopPropagation=void 0,o[ae]._onDragOver(c)}}var l,u,g}function ai(i){E&&E.parentNode[ae]._isOutsideThisEl(i.target)}function M(i,o){if(!i||!i.nodeType||i.nodeType!==1)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=o=n({},o),i[ae]=this;var r,c,l={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Mn(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(u,g){u.setData("Text",g.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:M.supportPointer!==!1&&"PointerEvent"in window&&!x,emptyInsertThreshold:5};for(r in Ge.initializePlugins(this,i,l),l)r in o||(o[r]=l[r]);for(c in Hn(o),this)c.charAt(0)==="_"&&typeof this[c]=="function"&&(this[c]=this[c].bind(this));this.nativeDraggable=!o.forceFallback&&si,this.nativeDraggable&&(this.options.touchStartThreshold=1),o.supportPointer?C(i,"pointerdown",this._onTapStart):(C(i,"mousedown",this._onTapStart),C(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(C(i,"dragover",this),C(i,"dragenter",this)),yt.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[]),n(this,oi())}function Rt(i,o,r,c,l,u,g,v){var b,T,D=i[ae],A=D.options.onMove;return!window.CustomEvent||p||y?(b=document.createEvent("Event")).initEvent("move",!0,!0):b=new CustomEvent("move",{bubbles:!0,cancelable:!0}),b.to=o,b.from=i,b.dragged=r,b.draggedRect=c,b.related=l||o,b.relatedRect=u||j(o),b.willInsertAfter=v,b.originalEvent=g,i.dispatchEvent(b),T=A?A.call(D,b,g):T}function Ut(i){i.draggable=!1}function li(){Kt=!1}function Tt(i){return setTimeout(i,0)}function Gt(i){return clearTimeout(i)}M.prototype={constructor:M,_isOutsideThisEl:function(i){this.el.contains(i)||i===this.el||(ze=null)},_getDirection:function(i,o){return typeof this.options.direction=="function"?this.options.direction.call(this,i,o,E):this.options.direction},_onTapStart:function(i){if(i.cancelable){var o=this,r=this.el,c=this.options,l=c.preventOnFilter,u=i.type,g=i.touches&&i.touches[0]||i.pointerType&&i.pointerType==="touch"&&i,v=(g||i).target,b=i.target.shadowRoot&&(i.path&&i.path[0]||i.composedPath&&i.composedPath()[0])||v,T=c.filter;if(function(D){St.length=0;for(var A=D.getElementsByTagName("input"),z=A.length;z--;){var O=A[z];O.checked&&St.push(O)}}(r),!E&&!(/mousedown|pointerdown/.test(u)&&i.button!==0||c.disabled)&&!b.isContentEditable&&(this.nativeDraggable||!x||!v||v.tagName.toUpperCase()!=="SELECT")&&!((v=F(v,c.draggable,r,!1))&&v.animated||vt===v)){if(je=G(v),Je=G(v,c.draggable),typeof T=="function"){if(T.call(this,i,v,this))return ce({sortable:o,rootEl:b,name:"filter",targetEl:v,toEl:r,fromEl:r}),he("filter",o,{evt:i}),void(l&&i.cancelable&&i.preventDefault())}else if(T=T&&T.split(",").some(function(D){if(D=F(b,D.trim(),r,!1))return ce({sortable:o,rootEl:D,name:"filter",targetEl:v,fromEl:r,toEl:r}),he("filter",o,{evt:i}),!0}))return void(l&&i.cancelable&&i.preventDefault());c.handle&&!F(b,c.handle,r,!1)||this._prepareDragStart(i,g,v)}}},_prepareDragStart:function(i,o,r){var c,l=this,u=l.el,g=l.options,v=u.ownerDocument;r&&!E&&r.parentNode===u&&(c=j(r),Y=u,Z=(E=r).parentNode,Oe=E.nextSibling,vt=r,wt=g.group,Ne={target:M.dragged=E,clientX:(o||i).clientX,clientY:(o||i).clientY},Tn=Ne.clientX-c.left,In=Ne.clientY-c.top,this._lastX=(o||i).clientX,this._lastY=(o||i).clientY,E.style["will-change"]="all",c=function(){he("delayEnded",l,{evt:i}),M.eventCanceled?l._onDrop():(l._disableDelayedDragEvents(),!w&&l.nativeDraggable&&(E.draggable=!0),l._triggerDragStart(i,o),ce({sortable:l,name:"choose",originalEvent:i}),W(E,g.chosenClass,!0))},g.ignore.split(",").forEach(function(b){se(E,b.trim(),Ut)}),C(v,"dragover",Ae),C(v,"mousemove",Ae),C(v,"touchmove",Ae),C(v,"mouseup",l._onDrop),C(v,"touchend",l._onDrop),C(v,"touchcancel",l._onDrop),w&&this.nativeDraggable&&(this.options.touchStartThreshold=4,E.draggable=!0),he("delayStart",this,{evt:i}),!g.delay||g.delayOnTouchOnly&&!o||this.nativeDraggable&&(y||p)?c():M.eventCanceled?this._onDrop():(C(v,"mouseup",l._disableDelayedDrag),C(v,"touchend",l._disableDelayedDrag),C(v,"touchcancel",l._disableDelayedDrag),C(v,"mousemove",l._delayedDragTouchMoveHandler),C(v,"touchmove",l._delayedDragTouchMoveHandler),g.supportPointer&&C(v,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(c,g.delay)))},_delayedDragTouchMoveHandler:function(i){i=i.touches?i.touches[0]:i,Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){E&&Ut(E),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var i=this.el.ownerDocument;_(i,"mouseup",this._disableDelayedDrag),_(i,"touchend",this._disableDelayedDrag),_(i,"touchcancel",this._disableDelayedDrag),_(i,"mousemove",this._delayedDragTouchMoveHandler),_(i,"touchmove",this._delayedDragTouchMoveHandler),_(i,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(i,o){o=o||i.pointerType=="touch"&&i,!this.nativeDraggable||o?this.options.supportPointer?C(document,"pointermove",this._onTouchMove):C(document,o?"touchmove":"mousemove",this._onTouchMove):(C(E,"dragend",this),C(Y,"dragstart",this._onDragStart));try{document.selection?Tt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(r){}},_dragStarted:function(i,o){var r;Be=!1,Y&&E?(he("dragStarted",this,{evt:o}),this.nativeDraggable&&C(document,"dragover",ai),r=this.options,i||W(E,r.dragClass,!1),W(E,r.ghostClass,!0),M.active=this,i&&this._appendGhost(),ce({sortable:this,name:"start",originalEvent:o})):this._nulling()},_emulateDragOver:function(){if(be){this._lastX=be.clientX,this._lastY=be.clientY,kn();for(var i=document.elementFromPoint(be.clientX,be.clientY),o=i;i&&i.shadowRoot&&(i=i.shadowRoot.elementFromPoint(be.clientX,be.clientY))!==o;)o=i;if(E.parentNode[ae]._isOutsideThisEl(i),o)do if(o[ae]&&o[ae]._onDragOver({clientX:be.clientX,clientY:be.clientY,target:i,rootEl:o})&&!this.options.dragoverBubble)break;while(o=(i=o).parentNode);On()}},_onTouchMove:function(i){if(Ne){var u=this.options,o=u.fallbackTolerance,r=u.fallbackOffset,c=i.touches?i.touches[0]:i,l=N&&k(N,!0),g=N&&l&&l.a,v=N&&l&&l.d,u=Et&&le&&Sn(le),g=(c.clientX-Ne.clientX+r.x)/(g||1)+(u?u[0]-qt[0]:0)/(g||1),v=(c.clientY-Ne.clientY+r.y)/(v||1)+(u?u[1]-qt[1]:0)/(v||1);if(!M.active&&!Be){if(o&&Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))<o)return;this._onDragStart(i,!0)}N&&(l?(l.e+=g-(Xt||0),l.f+=v-(Yt||0)):l={a:1,b:0,c:0,d:1,e:g,f:v},l="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")"),S(N,"webkitTransform",l),S(N,"mozTransform",l),S(N,"msTransform",l),S(N,"transform",l),Xt=g,Yt=v,be=c),i.cancelable&&i.preventDefault()}},_appendGhost:function(){if(!N){var i=this.options.fallbackOnBody?document.body:Y,o=j(E,!0,Et,!0,i),r=this.options;if(Et){for(le=i;S(le,"position")==="static"&&S(le,"transform")==="none"&&le!==document;)le=le.parentNode;le!==document.body&&le!==document.documentElement?(le===document&&(le=re()),o.top+=le.scrollTop,o.left+=le.scrollLeft):le=re(),qt=Sn(le)}W(N=E.cloneNode(!0),r.ghostClass,!1),W(N,r.fallbackClass,!0),W(N,r.dragClass,!0),S(N,"transition",""),S(N,"transform",""),S(N,"box-sizing","border-box"),S(N,"margin",0),S(N,"top",o.top),S(N,"left",o.left),S(N,"width",o.width),S(N,"height",o.height),S(N,"opacity","0.8"),S(N,"position",Et?"absolute":"fixed"),S(N,"zIndex","100000"),S(N,"pointerEvents","none"),M.ghost=N,i.appendChild(N),S(N,"transform-origin",Tn/parseInt(N.style.width)*100+"% "+In/parseInt(N.style.height)*100+"%")}},_onDragStart:function(i,o){var r=this,c=i.dataTransfer,l=r.options;he("dragStart",this,{evt:i}),M.eventCanceled?this._onDrop():(he("setupClone",this),M.eventCanceled||((J=zt(E)).removeAttribute("id"),J.draggable=!1,J.style["will-change"]="",this._hideClone(),W(J,this.options.chosenClass,!1),M.clone=J),r.cloneId=Tt(function(){he("clone",r),M.eventCanceled||(r.options.removeCloneOnHide||Y.insertBefore(J,E),r._hideClone(),ce({sortable:r,name:"clone"}))}),o||W(E,l.dragClass,!0),o?(_t=!0,r._loopId=setInterval(r._emulateDragOver,50)):(_(document,"mouseup",r._onDrop),_(document,"touchend",r._onDrop),_(document,"touchcancel",r._onDrop),c&&(c.effectAllowed="move",l.setData&&l.setData.call(r,c,E)),C(document,"drop",r),S(E,"transform","translateZ(0)")),Be=!0,r._dragStartId=Tt(r._dragStarted.bind(r,o,i)),C(document,"selectstart",r),Qe=!0,x&&S(document.body,"user-select","none"))},_onDragOver:function(i){var o,r,c,l,u=this.el,g=i.target,v=this.options,b=v.group,T=M.active,D=wt===b,A=v.sort,z=de||T,O=this,K=!1;if(!Kt){if(i.preventDefault!==void 0&&i.cancelable&&i.preventDefault(),g=F(g,v.draggable,u,!0),oe("dragOver"),M.eventCanceled)return K;if(E.contains(i.target)||g.animated&&g.animatingX&&g.animatingY||O._ignoreWhileAnimating===g)return ve(!1);if(_t=!1,T&&!v.disabled&&(D?A||(r=Z!==Y):de===this||(this.lastPutMode=wt.checkPull(this,T,E,i))&&b.checkPut(this,T,E,i))){if(c=this._getDirection(i,g)==="vertical",o=j(E),oe("dragOverValid"),M.eventCanceled)return K;if(r)return Z=Y,Ee(),this._hideClone(),oe("revert"),M.eventCanceled||(Oe?Y.insertBefore(E,Oe):Y.appendChild(E)),ve(!0);var L=Wt(u,v.draggable);if(!L||function(ne,ct,q){return q=j(Wt(q.el,q.options.draggable)),ct?ne.clientX>q.right+10||ne.clientX<=q.right&&ne.clientY>q.bottom&&ne.clientX>=q.left:ne.clientX>q.right&&ne.clientY>q.top||ne.clientX<=q.right&&ne.clientY>q.bottom+10}(i,c,this)&&!L.animated){if(L===E)return ve(!1);if((g=L&&u===i.target?L:g)&&(ge=j(g)),Rt(Y,u,E,o,g,ge,i,!!g)!==!1)return Ee(),L&&L.nextSibling?u.insertBefore(E,L.nextSibling):u.appendChild(E),Z=u,Le(),ve(!0)}else if(L&&function(ne,ct,q){return q=j(Pe(q.el,0,q.options,!0)),ct?ne.clientX<q.left-10||ne.clientY<q.top&&ne.clientX<q.right:ne.clientY<q.top-10||ne.clientY<q.bottom&&ne.clientX<q.left}(i,c,this)){var Q=Pe(u,0,v,!0);if(Q===E)return ve(!1);if(ge=j(g=Q),Rt(Y,u,E,o,g,ge,i,!1)!==!1)return Ee(),u.insertBefore(E,Q),Z=u,Le(),ve(!0)}else if(g.parentNode===u){var me,B,we,ge=j(g),xe=E.parentNode!==u,U=(U=E.animated&&E.toRect||o,ee=g.animated&&g.toRect||ge,Se=(l=c)?U.left:U.top,b=l?U.right:U.bottom,L=l?U.width:U.height,Q=l?ee.left:ee.top,U=l?ee.right:ee.bottom,ee=l?ee.width:ee.height,!(Se===Q||b===U||Se+L/2===Q+ee/2)),Se=c?"top":"left",L=ke(g,"top","top")||ke(E,"top","top"),Q=L?L.scrollTop:void 0;if(ze!==g&&(B=ge[Se],tt=!1,Ct=!U&&v.invertSwap||xe),(me=function(He,rn,Ce,Te,sn,Ht,Ln,ci){var Re=Te?He.clientY:He.clientX,Me=Te?Ce.height:Ce.width,He=Te?Ce.top:Ce.left,Te=Te?Ce.bottom:Ce.right,Ce=!1;if(!Ln){if(ci&&bt<Me*sn){if(tt=!tt&&(et===1?He+Me*Ht/2<Re:Re<Te-Me*Ht/2)?!0:tt)Ce=!0;else if(et===1?Re<He+bt:Te-bt<Re)return-et}else if(He+Me*(1-sn)/2<Re&&Re<Te-Me*(1-sn)/2)return function(di){return G(E)<G(di)?1:-1}(rn)}return(Ce=Ce||Ln)&&(Re<He+Me*Ht/2||Te-Me*Ht/2<Re)?He+Me/2<Re?1:-1:0}(i,g,ge,c,U?1:v.swapThreshold,v.invertedSwapThreshold==null?v.swapThreshold:v.invertedSwapThreshold,Ct,ze===g))!==0)for(var lt=G(E);(we=Z.children[lt-=me])&&(S(we,"display")==="none"||we===N););if(me===0||we===g)return ve(!1);et=me;var ee=(ze=g).nextElementSibling,xe=!1,U=Rt(Y,u,E,o,g,ge,i,xe=me===1);if(U!==!1)return U!==1&&U!==-1||(xe=U===1),Kt=!0,setTimeout(li,30),Ee(),xe&&!ee?u.appendChild(E):g.parentNode.insertBefore(E,xe?ee:g),L&&En(L,0,Q-L.scrollTop),Z=E.parentNode,B===void 0||Ct||(bt=Math.abs(B-j(g)[Se])),Le(),ve(!0)}if(u.contains(E))return ve(!1)}return!1}function oe(ne,ct){he(ne,O,e({evt:i,isOwner:D,axis:c?"vertical":"horizontal",revert:r,dragRect:o,targetRect:ge,canSort:A,fromSortable:z,target:g,completed:ve,onMove:function(q,rn){return Rt(Y,u,E,o,q,j(q),i,rn)},changed:Le},ct))}function Ee(){oe("dragOverAnimationCapture"),O.captureAnimationState(),O!==z&&z.captureAnimationState()}function ve(ne){return oe("dragOverCompleted",{insertion:ne}),ne&&(D?T._hideClone():T._showClone(O),O!==z&&(W(E,(de||T).options.ghostClass,!1),W(E,v.ghostClass,!0)),de!==O&&O!==M.active?de=O:O===M.active&&de&&(de=null),z===O&&(O._ignoreWhileAnimating=g),O.animateAll(function(){oe("dragOverAnimationComplete"),O._ignoreWhileAnimating=null}),O!==z&&(z.animateAll(),z._ignoreWhileAnimating=null)),(g===E&&!E.animated||g===u&&!g.animated)&&(ze=null),v.dragoverBubble||i.rootEl||g===document||(E.parentNode[ae]._isOutsideThisEl(i.target),ne||Ae(i)),!v.dragoverBubble&&i.stopPropagation&&i.stopPropagation(),K=!0}function Le(){fe=G(E),$e=G(E,v.draggable),ce({sortable:O,name:"change",toEl:u,newIndex:fe,newDraggableIndex:$e,originalEvent:i})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){_(document,"mousemove",this._onTouchMove),_(document,"touchmove",this._onTouchMove),_(document,"pointermove",this._onTouchMove),_(document,"dragover",Ae),_(document,"mousemove",Ae),_(document,"touchmove",Ae)},_offUpEvents:function(){var i=this.el.ownerDocument;_(i,"mouseup",this._onDrop),_(i,"touchend",this._onDrop),_(i,"pointerup",this._onDrop),_(i,"touchcancel",this._onDrop),_(document,"selectstart",this)},_onDrop:function(i){var o=this.el,r=this.options;fe=G(E),$e=G(E,r.draggable),he("drop",this,{evt:i}),Z=E&&E.parentNode,fe=G(E),$e=G(E,r.draggable),M.eventCanceled||(tt=Ct=Be=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Gt(this.cloneId),Gt(this._dragStartId),this.nativeDraggable&&(_(document,"drop",this),_(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),x&&S(document.body,"user-select",""),S(E,"transform",""),i&&(Qe&&(i.cancelable&&i.preventDefault(),r.dropBubble||i.stopPropagation()),N&&N.parentNode&&N.parentNode.removeChild(N),(Y===Z||de&&de.lastPutMode!=="clone")&&J&&J.parentNode&&J.parentNode.removeChild(J),E&&(this.nativeDraggable&&_(E,"dragend",this),Ut(E),E.style["will-change"]="",Qe&&!Be&&W(E,(de||this).options.ghostClass,!1),W(E,this.options.chosenClass,!1),ce({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:i}),Y!==Z?(0<=fe&&(ce({rootEl:Z,name:"add",toEl:Z,fromEl:Y,originalEvent:i}),ce({sortable:this,name:"remove",toEl:Z,originalEvent:i}),ce({rootEl:Z,name:"sort",toEl:Z,fromEl:Y,originalEvent:i}),ce({sortable:this,name:"sort",toEl:Z,originalEvent:i})),de&&de.save()):fe!==je&&0<=fe&&(ce({sortable:this,name:"update",toEl:Z,originalEvent:i}),ce({sortable:this,name:"sort",toEl:Z,originalEvent:i})),M.active&&(fe!=null&&fe!==-1||(fe=je,$e=Je),ce({sortable:this,name:"end",toEl:Z,originalEvent:i}),this.save())))),this._nulling()},_nulling:function(){he("nulling",this),Y=E=Z=N=Oe=J=vt=De=Ne=be=Qe=fe=$e=je=Je=ze=et=de=wt=M.dragged=M.ghost=M.clone=M.active=null,St.forEach(function(i){i.checked=!0}),St.length=Xt=Yt=0},handleEvent:function(i){switch(i.type){case"drop":case"dragend":this._onDrop(i);break;case"dragenter":case"dragover":E&&(this._onDragOver(i),function(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}(i));break;case"selectstart":i.preventDefault()}},toArray:function(){for(var i,o=[],r=this.el.children,c=0,l=r.length,u=this.options;c<l;c++)F(i=r[c],u.draggable,this.el,!1)&&o.push(i.getAttribute(u.dataIdAttr)||function(g){for(var v=g.tagName+g.className+g.src+g.href+g.textContent,b=v.length,T=0;b--;)T+=v.charCodeAt(b);return T.toString(36)}(i));return o},sort:function(i,o){var r={},c=this.el;this.toArray().forEach(function(l,u){u=c.children[u],F(u,this.options.draggable,c,!1)&&(r[l]=u)},this),o&&this.captureAnimationState(),i.forEach(function(l){r[l]&&(c.removeChild(r[l]),c.appendChild(r[l]))}),o&&this.animateAll()},save:function(){var i=this.options.store;i&&i.set&&i.set(this)},closest:function(i,o){return F(i,o||this.options.draggable,this.el,!1)},option:function(i,o){var r=this.options;if(o===void 0)return r[i];var c=Ge.modifyOption(this,i,o);r[i]=c!==void 0?c:o,i==="group"&&Hn(r)},destroy:function(){he("destroy",this);var i=this.el;i[ae]=null,_(i,"mousedown",this._onTapStart),_(i,"touchstart",this._onTapStart),_(i,"pointerdown",this._onTapStart),this.nativeDraggable&&(_(i,"dragover",this),_(i,"dragenter",this)),Array.prototype.forEach.call(i.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),yt.splice(yt.indexOf(this.el),1),this.el=i=null},_hideClone:function(){De||(he("hideClone",this),M.eventCanceled||(S(J,"display","none"),this.options.removeCloneOnHide&&J.parentNode&&J.parentNode.removeChild(J),De=!0))},_showClone:function(i){i.lastPutMode==="clone"?De&&(he("showClone",this),M.eventCanceled||(E.parentNode!=Y||this.options.group.revertClone?Oe?Y.insertBefore(J,Oe):Y.appendChild(J):Y.insertBefore(J,E),this.options.group.revertClone&&this.animate(E,J),S(J,"display",""),De=!1)):this._hideClone()}},xt&&C(document,"touchmove",function(i){(M.active||Be)&&i.cancelable&&i.preventDefault()}),M.utils={on:C,off:_,css:S,find:se,is:function(i,o){return!!F(i,o,i,!1)},extend:function(i,o){if(i&&o)for(var r in o)o.hasOwnProperty(r)&&(i[r]=o[r]);return i},throttle:xn,closest:F,toggleClass:W,clone:zt,index:G,nextTick:Tt,cancelNextTick:Gt,detectDirection:Mn,getChild:Pe},M.get=function(i){return i[ae]},M.mount=function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];(o=o[0].constructor===Array?o[0]:o).forEach(function(c){if(!c.prototype||!c.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(c));c.utils&&(M.utils=e(e({},M.utils),c.utils)),Ge.mount(c)})},M.create=function(i,o){return new M(i,o)};var nt,Zt,Jt,Qt,It,it,ie=[],en=!(M.version="1.15.0");function Dt(){ie.forEach(function(i){clearInterval(i.pid)}),ie=[]}function Nn(){clearInterval(it)}var _e,tn=xn(function(i,o,r,c){if(o.scroll){var l,u=(i.touches?i.touches[0]:i).clientX,g=(i.touches?i.touches[0]:i).clientY,v=o.scrollSensitivity,b=o.scrollSpeed,T=re(),D=!1;Zt!==r&&(Zt=r,Dt(),nt=o.scroll,l=o.scrollFn,nt===!0&&(nt=Ie(r,!0)));var A=0,z=nt;do{var O=z,oe=j(O),K=oe.top,L=oe.bottom,Q=oe.left,me=oe.right,B=oe.width,we=oe.height,ge=void 0,xe=void 0,Se=O.scrollWidth,lt=O.scrollHeight,ee=S(O),U=O.scrollLeft,oe=O.scrollTop,xe=O===T?(ge=B<Se&&(ee.overflowX==="auto"||ee.overflowX==="scroll"||ee.overflowX==="visible"),we<lt&&(ee.overflowY==="auto"||ee.overflowY==="scroll"||ee.overflowY==="visible")):(ge=B<Se&&(ee.overflowX==="auto"||ee.overflowX==="scroll"),we<lt&&(ee.overflowY==="auto"||ee.overflowY==="scroll")),U=ge&&(Math.abs(me-u)<=v&&U+B<Se)-(Math.abs(Q-u)<=v&&!!U),oe=xe&&(Math.abs(L-g)<=v&&oe+we<lt)-(Math.abs(K-g)<=v&&!!oe);if(!ie[A])for(var Ee=0;Ee<=A;Ee++)ie[Ee]||(ie[Ee]={});ie[A].vx==U&&ie[A].vy==oe&&ie[A].el===O||(ie[A].el=O,ie[A].vx=U,ie[A].vy=oe,clearInterval(ie[A].pid),U==0&&oe==0||(D=!0,ie[A].pid=setInterval(function(){c&&this.layer===0&&M.active._onTouchMove(It);var ve=ie[this.layer].vy?ie[this.layer].vy*b:0,Le=ie[this.layer].vx?ie[this.layer].vx*b:0;typeof l=="function"&&l.call(M.dragged.parentNode[ae],Le,ve,i,It,ie[this.layer].el)!=="continue"||En(ie[this.layer].el,Le,ve)}.bind({layer:A}),24))),A++}while(o.bubbleScroll&&z!==T&&(z=Ie(z,!1)));en=D}},30),ot=function(v){var o=v.originalEvent,r=v.putSortable,c=v.dragEl,l=v.activeSortable,u=v.dispatchSortableEvent,g=v.hideGhostForTarget,v=v.unhideGhostForTarget;o&&(l=r||l,g(),o=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,o=document.elementFromPoint(o.clientX,o.clientY),v(),l&&!l.el.contains(o)&&(u("spill"),this.onSpill({dragEl:c,putSortable:r})))};function nn(){}function on(){}nn.prototype={startIndex:null,dragStart:function(i){i=i.oldDraggableIndex,this.startIndex=i},onSpill:function(i){var o=i.dragEl,r=i.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState(),i=Pe(this.sortable.el,this.startIndex,this.options),i?this.sortable.el.insertBefore(o,i):this.sortable.el.appendChild(o),this.sortable.animateAll(),r&&r.animateAll()},drop:ot},n(nn,{pluginName:"revertOnSpill"}),on.prototype={onSpill:function(r){var o=r.dragEl,r=r.putSortable||this.sortable;r.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),r.animateAll()},drop:ot},n(on,{pluginName:"removeOnSpill"});var rt,ye,X,st,$t,H=[],pe=[],at=!1,ue=!1,Ve=!1;function An(i,o){pe.forEach(function(r,c){c=o.children[r.sortableIndex+(i?Number(c):0)],c?o.insertBefore(r,c):o.appendChild(r)})}function Mt(){H.forEach(function(i){i!==X&&i.parentNode&&i.parentNode.removeChild(i)})}return M.mount(new function(){function i(){for(var o in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this))}return i.prototype={dragStarted:function(o){o=o.originalEvent,this.sortable.nativeDraggable?C(document,"dragover",this._handleAutoScroll):this.options.supportPointer?C(document,"pointermove",this._handleFallbackAutoScroll):o.touches?C(document,"touchmove",this._handleFallbackAutoScroll):C(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){o=o.originalEvent,this.options.dragOverBubble||o.rootEl||this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?_(document,"dragover",this._handleAutoScroll):(_(document,"pointermove",this._handleFallbackAutoScroll),_(document,"touchmove",this._handleFallbackAutoScroll),_(document,"mousemove",this._handleFallbackAutoScroll)),Nn(),Dt(),clearTimeout(V),V=void 0},nulling:function(){It=Zt=nt=en=it=Jt=Qt=null,ie.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,r){var c,l=this,u=(o.touches?o.touches[0]:o).clientX,g=(o.touches?o.touches[0]:o).clientY,v=document.elementFromPoint(u,g);It=o,r||this.options.forceAutoScrollFallback||y||p||x?(tn(o,this.options,v,r),c=Ie(v,!0),!en||it&&u===Jt&&g===Qt||(it&&Nn(),it=setInterval(function(){var b=Ie(document.elementFromPoint(u,g),!0);b!==c&&(c=b,Dt()),tn(o,l.options,b,r)},10),Jt=u,Qt=g)):this.options.bubbleScroll&&Ie(v,!0)!==re()?tn(o,this.options,Ie(v,!1),!1):Dt()}},n(i,{pluginName:"scroll",initializeByDefault:!0})}),M.mount(on,nn),M.mount(new function(){function i(){this.defaults={swapClass:"sortable-swap-highlight"}}return i.prototype={dragStart:function(o){o=o.dragEl,_e=o},dragOverValid:function(o){var r=o.completed,c=o.target,l=o.onMove,u=o.activeSortable,g=o.changed,v=o.cancel;u.options.swap&&(o=this.sortable.el,u=this.options,c&&c!==o&&(o=_e,_e=l(c)!==!1?(W(c,u.swapClass,!0),c):null,o&&o!==_e&&W(o,u.swapClass,!1)),g(),r(!0),v())},drop:function(o){var r,c,l=o.activeSortable,u=o.putSortable,g=o.dragEl,v=u||this.sortable,b=this.options;_e&&W(_e,b.swapClass,!1),_e&&(b.swap||u&&u.options.swap)&&g!==_e&&(v.captureAnimationState(),v!==l&&l.captureAnimationState(),c=_e,o=(r=g).parentNode,b=c.parentNode,o&&b&&!o.isEqualNode(c)&&!b.isEqualNode(r)&&(u=G(r),g=G(c),o.isEqualNode(b)&&u<g&&g++,o.insertBefore(c,o.children[u]),b.insertBefore(r,b.children[g])),v.animateAll(),v!==l&&l.animateAll())},nulling:function(){_e=null}},n(i,{pluginName:"swap",eventProperties:function(){return{swapItem:_e}}})}),M.mount(new function(){function i(o){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));o.options.avoidImplicitDeselect||(o.options.supportPointer?C(document,"pointerup",this._deselectMultiDrag):(C(document,"mouseup",this._deselectMultiDrag),C(document,"touchend",this._deselectMultiDrag))),C(document,"keydown",this._checkKeyDown),C(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(c,l){var u="";H.length&&ye===o?H.forEach(function(g,v){u+=(v?", ":"")+g.textContent}):u=l.textContent,c.setData("Text",u)}}}return i.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(o){o=o.dragEl,X=o},delayEnded:function(){this.isMultiDrag=~H.indexOf(X)},setupClone:function(c){var r=c.sortable,c=c.cancel;if(this.isMultiDrag){for(var l=0;l<H.length;l++)pe.push(zt(H[l])),pe[l].sortableIndex=H[l].sortableIndex,pe[l].draggable=!1,pe[l].style["will-change"]="",W(pe[l],this.options.selectedClass,!1),H[l]===X&&W(pe[l],this.options.chosenClass,!1);r._hideClone(),c()}},clone:function(u){var r=u.sortable,c=u.rootEl,l=u.dispatchSortableEvent,u=u.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||H.length&&ye===r&&(An(!0,c),l("clone"),u()))},showClone:function(l){var r=l.cloneNowShown,c=l.rootEl,l=l.cancel;this.isMultiDrag&&(An(!1,c),pe.forEach(function(u){S(u,"display","")}),r(),$t=!1,l())},hideClone:function(l){var r=this,c=(l.sortable,l.cloneNowHidden),l=l.cancel;this.isMultiDrag&&(pe.forEach(function(u){S(u,"display","none"),r.options.removeCloneOnHide&&u.parentNode&&u.parentNode.removeChild(u)}),c(),$t=!0,l())},dragStartGlobal:function(o){o.sortable,!this.isMultiDrag&&ye&&ye.multiDrag._deselectMultiDrag(),H.forEach(function(r){r.sortableIndex=G(r)}),H=H.sort(function(r,c){return r.sortableIndex-c.sortableIndex}),Ve=!0},dragStarted:function(l){var r,c=this,l=l.sortable;this.isMultiDrag&&(this.options.sort&&(l.captureAnimationState(),this.options.animation&&(H.forEach(function(u){u!==X&&S(u,"position","absolute")}),r=j(X,!1,!0,!0),H.forEach(function(u){u!==X&&Rn(u,r)}),at=ue=!0)),l.animateAll(function(){at=ue=!1,c.options.animation&&H.forEach(function(u){Bt(u)}),c.options.sort&&Mt()}))},dragOver:function(l){var r=l.target,c=l.completed,l=l.cancel;ue&&~H.indexOf(r)&&(c(!1),l())},revert:function(o){var r,c,l=o.fromSortable,u=o.rootEl,g=o.sortable,v=o.dragRect;1<H.length&&(H.forEach(function(b){g.addAnimationState({target:b,rect:ue?j(b):v}),Bt(b),b.fromRect=v,l.removeAnimationState(b)}),ue=!1,r=!this.options.removeCloneOnHide,c=u,H.forEach(function(b,T){T=c.children[b.sortableIndex+(r?Number(T):0)],T?c.insertBefore(b,T):c.appendChild(b)}))},dragOverCompleted:function(T){var r,c=T.sortable,l=T.isOwner,u=T.insertion,g=T.activeSortable,v=T.parentEl,b=T.putSortable,T=this.options;u&&(l&&g._hideClone(),at=!1,T.animation&&1<H.length&&(ue||!l&&!g.options.sort&&!b)&&(r=j(X,!1,!0,!0),H.forEach(function(D){D!==X&&(Rn(D,r),v.appendChild(D))}),ue=!0),l||(ue||Mt(),1<H.length?(l=$t,g._showClone(c),g.options.animation&&!$t&&l&&pe.forEach(function(D){g.addAnimationState({target:D,rect:st}),D.fromRect=st,D.thisAnimationDuration=null})):g._showClone(c)))},dragOverAnimationCapture:function(l){var r=l.dragRect,c=l.isOwner,l=l.activeSortable;H.forEach(function(u){u.thisAnimationDuration=null}),l.options.animation&&!c&&l.multiDrag.isMultiDrag&&(st=n({},r),r=k(X,!0),st.top-=r.f,st.left-=r.e)},dragOverAnimationComplete:function(){ue&&(ue=!1,Mt())},drop:function(o){var r=o.originalEvent,c=o.rootEl,l=o.parentEl,u=o.sortable,g=o.dispatchSortableEvent,v=o.oldIndex,b=o.putSortable,T=b||this.sortable;if(r){var D,A,z,O=this.options,K=l.children;if(!Ve)if(O.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),W(X,O.selectedClass,!~H.indexOf(X)),~H.indexOf(X))H.splice(H.indexOf(X),1),rt=null,Ze({sortable:u,rootEl:c,name:"deselect",targetEl:X,originalEvent:r});else{if(H.push(X),Ze({sortable:u,rootEl:c,name:"select",targetEl:X,originalEvent:r}),r.shiftKey&&rt&&u.el.contains(rt)){var L=G(rt),o=G(X);if(~L&&~o&&L!==o)for(var Q,me=L<o?(Q=L,o):(Q=o,L+1);Q<me;Q++)~H.indexOf(K[Q])||(W(K[Q],O.selectedClass,!0),H.push(K[Q]),Ze({sortable:u,rootEl:c,name:"select",targetEl:K[Q],originalEvent:r}))}else rt=X;ye=T}Ve&&this.isMultiDrag&&(ue=!1,(l[ae].options.sort||l!==c)&&1<H.length&&(D=j(X),A=G(X,":not(."+this.options.selectedClass+")"),!at&&O.animation&&(X.thisAnimationDuration=null),T.captureAnimationState(),at||(O.animation&&(X.fromRect=D,H.forEach(function(B){var we;B.thisAnimationDuration=null,B!==X&&(we=ue?j(B):D,B.fromRect=we,T.addAnimationState({target:B,rect:we}))})),Mt(),H.forEach(function(B){K[A]?l.insertBefore(B,K[A]):l.appendChild(B),A++}),v===G(X)&&(z=!1,H.forEach(function(B){B.sortableIndex!==G(B)&&(z=!0)}),z&&g("update"))),H.forEach(function(B){Bt(B)}),T.animateAll()),ye=T),(c===l||b&&b.lastPutMode!=="clone")&&pe.forEach(function(B){B.parentNode&&B.parentNode.removeChild(B)})}},nullingGlobal:function(){this.isMultiDrag=Ve=!1,pe.length=0},destroyGlobal:function(){this._deselectMultiDrag(),_(document,"pointerup",this._deselectMultiDrag),_(document,"mouseup",this._deselectMultiDrag),_(document,"touchend",this._deselectMultiDrag),_(document,"keydown",this._checkKeyDown),_(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(o){if(!(Ve!==void 0&&Ve||ye!==this.sortable||o&&F(o.target,this.options.draggable,this.sortable.el,!1)||o&&o.button!==0))for(;H.length;){var r=H[0];W(r,this.options.selectedClass,!1),H.shift(),Ze({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r,originalEvent:o})}},_checkKeyDown:function(o){o.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(o){o.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},n(i,{pluginName:"multiDrag",utils:{select:function(o){var r=o.parentNode[ae];r&&r.options.multiDrag&&!~H.indexOf(o)&&(ye&&ye!==r&&(ye.multiDrag._deselectMultiDrag(),ye=r),W(o,r.options.selectedClass,!0),H.push(o))},deselect:function(o){var r=o.parentNode[ae],c=H.indexOf(o);r&&r.options.multiDrag&&~c&&(W(o,r.options.selectedClass,!1),H.splice(c,1))}},eventProperties:function(){var o=this,r=[],c=[];return H.forEach(function(l){var u;r.push({multiDragElement:l,index:l.sortableIndex}),u=ue&&l!==X?-1:ue?G(l,":not(."+o.options.selectedClass+")"):G(l),c.push({multiDragElement:l,index:u})}),{items:d(H),clones:[].concat(pe),oldIndicies:r,newIndicies:c}},optionListeners:{multiDragKey:function(o){return(o=o.toLowerCase())==="ctrl"?o="Control":1<o.length&&(o=o.charAt(0).toUpperCase()+o.substr(1)),o}}})}),M})});var ni=Pn((Vs,ti)=>{"use strict";function wi(s){return s&&typeof s=="object"&&"default"in s?s.default:s}var bi=wi(Wn());function m(s,e){return typeof s=="string"?(e||document).querySelector(s):s||null}m.each=(s,e)=>typeof s=="string"?Array.from((e||document).querySelectorAll(s)):s||null;m.create=(s,e)=>{let t=document.createElement(s);for(let n in e){let a=e[n];if(n==="inside")m(a).appendChild(t);else if(n==="around"){let d=m(a);d.parentNode.insertBefore(t,d),t.appendChild(d)}else n==="styles"?typeof a=="object"&&Object.keys(a).map(d=>{t.style[d]=a[d]}):n in t?t[n]=a:t.setAttribute(n,a)}return t};m.on=(s,e,t,n)=>{n?m.delegate(s,e,t,n):(n=t,m.bind(s,e,n))};m.off=(s,e,t)=>{s.removeEventListener(e,t)};m.bind=(s,e,t)=>{e.split(/\s+/).forEach(function(n){s.addEventListener(n,t)})};m.delegate=(s,e,t,n)=>{s.addEventListener(e,function(a){let d=a.target.closest(t);d&&(a.delegatedTarget=d,n.call(this,a,d))})};m.unbind=(s,e)=>{if(s)for(let t in e){let n=e[t];t.split(/\s+/).forEach(function(a){s.removeEventListener(a,n)})}};m.fire=(s,e,t)=>{let n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0);for(let a in t)n[a]=t[a];return s.dispatchEvent(n)};m.data=(s,e)=>{if(!e)return s.dataset;for(let t in e)s.dataset[t]=e[t]};m.style=(s,e)=>{if(typeof e=="string")return m.getStyle(s,e);Array.isArray(s)||(s=[s]),s.map(t=>{for(let n in e)t.style[n]=e[n]})};m.removeStyle=(s,e)=>{Array.isArray(s)||(s=[s]),Array.isArray(e)||(e=[e]),s.map(t=>{for(let n of e)t.style[n]=""})};m.getStyle=(s,e)=>{if(!e)return getComputedStyle(s);let t=getComputedStyle(s)[e];return["width","height"].includes(e)&&(t=parseFloat(t)),t};m.closest=(s,e)=>e?e.matches(s)?e:m.closest(s,e.parentNode):null;m.inViewport=(s,e)=>{let{top:t,left:n,bottom:a,right:d}=s.getBoundingClientRect(),{top:h,left:f,bottom:p,right:y}=e.getBoundingClientRect();return t>=h&&n>=f&&a<=p&&d<=y};m.scrollTop=function(e,t){requestAnimationFrame(()=>{e.scrollTop=t})};m.scrollbarSize=function(){return m.scrollBarSizeValue||(m.scrollBarSizeValue=_i()),m.scrollBarSizeValue};function _i(){let s=document.createElement("div");m.style(s,{width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"}),document.body.appendChild(s);let e=s.offsetWidth-s.clientWidth;return document.body.removeChild(s),e}m.hasVerticalOverflow=function(s){return s.scrollHeight>s.offsetHeight+10};m.hasHorizontalOverflow=function(s){return s.scrollWidth>s.offsetWidth+10};m.measureTextWidth=function(s){let e=document.createElement("div");return e.style.position="absolute",e.style.visibility="hidden",e.style.height="auto",e.style.width="auto",e.style.whiteSpace="nowrap",e.innerText=s,document.body.appendChild(e),e.clientWidth+1};function yi(s){var e=typeof s;return s!=null&&(e=="object"||e=="function")}var Xe=yi,kt=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ot(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function Ci(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Si(s,e){return e={exports:{}},s(e,e.exports),e.exports}var xi=typeof kt=="object"&&kt&&kt.Object===Object&&kt,Ei=xi,Ri=typeof self=="object"&&self&&self.Object===Object&&self,Ti=Ei||Ri||Function("return this")(),gt=Ti,Ii=function(){return gt.Date.now()},cn=Ii,Di=gt.Symbol,Nt=Di,Un=Object.prototype,$i=Un.hasOwnProperty,Mi=Un.toString,dt=Nt?Nt.toStringTag:void 0;function Hi(s){var e=$i.call(s,dt),t=s[dt];try{s[dt]=void 0}catch(a){}var n=Mi.call(s);return e?s[dt]=t:delete s[dt],n}var ki=Hi,Oi=Object.prototype,Ni=Oi.toString;function Ai(s){return Ni.call(s)}var Li=Ai,Fi="[object Null]",Pi="[object Undefined]",jn=Nt?Nt.toStringTag:void 0;function Wi(s){return s==null?s===void 0?Pi:Fi:jn&&jn in Object(s)?ki(s):Li(s)}var Gn=Wi;function ji(s){return s!=null&&typeof s=="object"}var zi=ji,Bi="[object Symbol]";function Vi(s){return typeof s=="symbol"||zi(s)&&Gn(s)==Bi}var Xi=Vi,zn=0/0,Yi=/^\s+|\s+$/g,qi=/^[-+]0x[0-9a-f]+$/i,Ki=/^0b[01]+$/i,Ui=/^0o[0-7]+$/i,Gi=parseInt;function Zi(s){if(typeof s=="number")return s;if(Xi(s))return zn;if(Xe(s)){var e=typeof s.valueOf=="function"?s.valueOf():s;s=Xe(e)?e+"":e}if(typeof s!="string")return s===0?s:+s;s=s.replace(Yi,"");var t=Ki.test(s);return t||Ui.test(s)?Gi(s.slice(2),t?2:8):qi.test(s)?zn:+s}var Bn=Zi,Ji="Expected a function",Qi=Math.max,eo=Math.min;function to(s,e,t){var n,a,d,h,f,p,y=0,w=!1,x=!1,R=!0;if(typeof s!="function")throw new TypeError(Ji);e=Bn(e)||0,Xe(t)&&(w=!!t.leading,x="maxWait"in t,d=x?Qi(Bn(t.maxWait)||0,e):d,R="trailing"in t?!!t.trailing:R);function I(k){var se=n,re=a;return n=a=void 0,y=k,h=s.apply(re,se),h}function C(k){return y=k,f=setTimeout(F,e),w?I(k):h}function _(k){var se=k-p,re=k-y,j=e-se;return x?eo(j,d-re):j}function P(k){var se=k-p,re=k-y;return p===void 0||se>=e||se<0||x&&re>=d}function F(){var k=cn();if(P(k))return V(k);f=setTimeout(F,_(k))}function V(k){return f=void 0,R&&n?I(k):(n=a=void 0,h)}function te(){f!==void 0&&clearTimeout(f),y=0,n=p=a=f=void 0}function W(){return f===void 0?h:V(cn())}function S(){var k=cn(),se=P(k);if(n=arguments,a=this,p=k,se){if(f===void 0)return C(p);if(x)return f=setTimeout(F,e),I(p)}return f===void 0&&(f=setTimeout(F,e)),h}return S.cancel=te,S.flush=W,S}var Zn=to,no="Expected a function";function io(s,e,t){var n=!0,a=!0;if(typeof s!="function")throw new TypeError(no);return Xe(t)&&(n="leading"in t?!!t.leading:n,a="trailing"in t?!!t.trailing:a),Zn(s,e,{leading:n,maxWait:e,trailing:a})}var oo=io,ro="[object AsyncFunction]",so="[object Function]",ao="[object GeneratorFunction]",lo="[object Proxy]";function co(s){if(!Xe(s))return!1;var e=Gn(s);return e==so||e==ao||e==ro||e==lo}var ho=co,uo=gt["__core-js_shared__"],dn=uo,Vn=function(){var s=/[^.]+$/.exec(dn&&dn.keys&&dn.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function fo(s){return!!Vn&&Vn in s}var po=fo,mo=Function.prototype,go=mo.toString;function vo(s){if(s!=null){try{return go.call(s)}catch(e){}try{return s+""}catch(e){}}return""}var wo=vo,bo=/[\\^$.*+?()[\]{}|]/g,_o=/^\[object .+?Constructor\]$/,yo=Function.prototype,Co=Object.prototype,So=yo.toString,xo=Co.hasOwnProperty,Eo=RegExp("^"+So.call(xo).replace(bo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ro(s){if(!Xe(s)||po(s))return!1;var e=ho(s)?Eo:_o;return e.test(wo(s))}var To=Ro;function Io(s,e){return s==null?void 0:s[e]}var Do=Io;function $o(s,e){var t=Do(s,e);return To(t)?t:void 0}var yn=$o,Mo=yn(Object,"create"),mt=Mo;function Ho(){this.__data__=mt?mt(null):{},this.size=0}var ko=Ho;function Oo(s){var e=this.has(s)&&delete this.__data__[s];return this.size-=e?1:0,e}var No=Oo,Ao="__lodash_hash_undefined__",Lo=Object.prototype,Fo=Lo.hasOwnProperty;function Po(s){var e=this.__data__;if(mt){var t=e[s];return t===Ao?void 0:t}return Fo.call(e,s)?e[s]:void 0}var Wo=Po,jo=Object.prototype,zo=jo.hasOwnProperty;function Bo(s){var e=this.__data__;return mt?e[s]!==void 0:zo.call(e,s)}var Vo=Bo,Xo="__lodash_hash_undefined__";function Yo(s,e){var t=this.__data__;return this.size+=this.has(s)?0:1,t[s]=mt&&e===void 0?Xo:e,this}var qo=Yo;function qe(s){var e=-1,t=s==null?0:s.length;for(this.clear();++e<t;){var n=s[e];this.set(n[0],n[1])}}qe.prototype.clear=ko;qe.prototype.delete=No;qe.prototype.get=Wo;qe.prototype.has=Vo;qe.prototype.set=qo;var Xn=qe;function Ko(){this.__data__=[],this.size=0}var Uo=Ko;function Go(s,e){return s===e||s!==s&&e!==e}var Zo=Go;function Jo(s,e){for(var t=s.length;t--;)if(Zo(s[t][0],e))return t;return-1}var Lt=Jo,Qo=Array.prototype,er=Qo.splice;function tr(s){var e=this.__data__,t=Lt(e,s);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():er.call(e,t,1),--this.size,!0}var nr=tr;function ir(s){var e=this.__data__,t=Lt(e,s);return t<0?void 0:e[t][1]}var or=ir;function rr(s){return Lt(this.__data__,s)>-1}var sr=rr;function ar(s,e){var t=this.__data__,n=Lt(t,s);return n<0?(++this.size,t.push([s,e])):t[n][1]=e,this}var lr=ar;function Ke(s){var e=-1,t=s==null?0:s.length;for(this.clear();++e<t;){var n=s[e];this.set(n[0],n[1])}}Ke.prototype.clear=Uo;Ke.prototype.delete=nr;Ke.prototype.get=or;Ke.prototype.has=sr;Ke.prototype.set=lr;var cr=Ke,dr=yn(gt,"Map"),hr=dr;function ur(){this.size=0,this.__data__={hash:new Xn,map:new(hr||cr),string:new Xn}}var fr=ur;function pr(s){var e=typeof s;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?s!=="__proto__":s===null}var mr=pr;function gr(s,e){var t=s.__data__;return mr(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Ft=gr;function vr(s){var e=Ft(this,s).delete(s);return this.size-=e?1:0,e}var wr=vr;function br(s){return Ft(this,s).get(s)}var _r=br;function yr(s){return Ft(this,s).has(s)}var Cr=yr;function Sr(s,e){var t=Ft(this,s),n=t.size;return t.set(s,e),this.size+=t.size==n?0:1,this}var xr=Sr;function Ue(s){var e=-1,t=s==null?0:s.length;for(this.clear();++e<t;){var n=s[e];this.set(n[0],n[1])}}Ue.prototype.clear=fr;Ue.prototype.delete=wr;Ue.prototype.get=_r;Ue.prototype.has=Cr;Ue.prototype.set=xr;var Er=Ue,Rr="__lodash_hash_undefined__";function Tr(s){return this.__data__.set(s,Rr),this}var Ir=Tr;function Dr(s){return this.__data__.has(s)}var $r=Dr;function At(s){var e=-1,t=s==null?0:s.length;for(this.__data__=new Er;++e<t;)this.add(s[e])}At.prototype.add=At.prototype.push=Ir;At.prototype.has=$r;var Mr=At;function Hr(s,e,t,n){for(var a=s.length,d=t+(n?1:-1);n?d--:++d<a;)if(e(s[d],d,s))return d;return-1}var kr=Hr;function Or(s){return s!==s}var Nr=Or;function Ar(s,e,t){for(var n=t-1,a=s.length;++n<a;)if(s[n]===e)return n;return-1}var Lr=Ar;function Fr(s,e,t){return e===e?Lr(s,e,t):kr(s,Nr,t)}var Pr=Fr;function Wr(s,e){var t=s==null?0:s.length;return!!t&&Pr(s,e,0)>-1}var jr=Wr;function zr(s,e,t){for(var n=-1,a=s==null?0:s.length;++n<a;)if(t(e,s[n]))return!0;return!1}var Br=zr;function Vr(s,e){return s.has(e)}var Xr=Vr,Yr=yn(gt,"Set"),hn=Yr;function qr(){}var Kr=qr;function Ur(s){var e=-1,t=Array(s.size);return s.forEach(function(n){t[++e]=n}),t}var Jn=Ur,Gr=1/0,Zr=hn&&1/Jn(new hn([,-0]))[1]==Gr?function(s){return new hn(s)}:Kr,Jr=Zr,Qr=200;function es(s,e,t){var n=-1,a=jr,d=s.length,h=!0,f=[],p=f;if(t)h=!1,a=Br;else if(d>=Qr){var y=e?null:Jr(s);if(y)return Jn(y);h=!1,a=Xr,p=new Mr}else p=e?[]:f;e:for(;++n<d;){var w=s[n],x=e?e(w):w;if(w=t||w!==0?w:0,h&&x===x){for(var R=p.length;R--;)if(p[R]===x)continue e;e&&p.push(x),f.push(w)}else a(p,x,t)||(p!==f&&p.push(x),f.push(w))}return f}var ts=es;function ns(s){return s&&s.length?ts(s):[]}var is=ns;function Qn(s){return s.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`)}function un(s){return Object.keys(s).map(t=>{let n=Qn(t),a=s[t];return a===void 0?"":`data-${n}="${a}" `}).join("").trim()}function Yn(s){var e=document.createElement("textarea");e.style.position="fixed",e.style.top=0,e.style.left=0,e.style.width="2em",e.style.height="2em",e.style.padding=0,e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent",e.value=s,document.body.appendChild(e),e.select();try{document.execCommand("copy")}catch(t){console.log("Oops, unable to copy")}document.body.removeChild(e)}function os(s){return!isNaN(s)}var ei=oo,rs=Zn;function ut(s,e=null){return(...t)=>new Promise(n=>{setTimeout(()=>{let d=s.apply(e,t);n(d)})})}function Pt(s,e,t){let n=t.reduce((a,d)=>(a[d]={get(){return e[d]}},a),{});Object.defineProperties(s,n)}function ss(s){return s!==void 0||s!==null}function as(s){return!ss(s)}function ft(s){return!isNaN(s)}function ls(s){return Array.isArray(s)?s:[s]}function qn(s){return is(s)}function ht(s,e){return s-e}function Kn(s){return s.replace(/<[^>]*>/g,"")}function cs(s,e){return s&&(Object.keys(e).forEach(t=>{let n=new RegExp(`{(${t})}`,"g");s=s.replace(n,e[t])}),s)}function ds(s){if(!s)return"";let e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(s).replace(/[&<>"'`=/]/g,t=>e[t]||t)}var fn=class{constructor(e){this.options=e,this.sortRows=ut(this.sortRows,this),this.switchColumn=ut(this.switchColumn,this),this.removeColumn=ut(this.removeColumn,this),this.options.filterRows=ut(this.options.filterRows,this)}init(e,t){e||(e=this.options.data),t&&(this.options.columns=t),this.data=e,this.rowCount=0,this.columns=[],this.rows=[],this.prepareColumns(),this.validateData(this.data),this.rows=this.prepareRows(this.data),this.prepareTreeRows(),this.prepareRowView(),this.prepareNumericColumns()}get currentSort(){return this.columns.find(t=>t.sortOrder!=="none")||{colIndex:-1,sortOrder:"none"}}prepareColumns(){this.columns=[],this.validateColumns(),this.prepareDefaultColumns(),this.prepareHeader()}prepareDefaultColumns(){if(this.options.checkboxColumn&&!this.hasColumnById("_checkbox")){let e={id:"_checkbox",content:this.getCheckboxHTML(),editable:!1,resizable:!1,sortable:!1,focusable:!1,dropdown:!1,width:32};this.columns.push(e)}if(this.options.serialNoColumn&&!this.hasColumnById("_rowIndex")){let e={id:"_rowIndex",content:"",align:"center",editable:!1,resizable:!1,focusable:!1,dropdown:!1};this.columns.push(e)}}prepareHeader(){let e=this.columns.concat(this.options.columns),t={isHeader:1,editable:!0,sortable:!0,resizable:!0,focusable:!0,dropdown:!0,width:null,format:n=>n==null?"":n+""};this.columns=e.map((n,a)=>this.prepareCell(n,a)).map(n=>Object.assign({},t,n)).map(n=>(n.content=n.content||n.name||"",n.id=n.id||n.content,n))}prepareCell(e,t){let n={content:"",sortOrder:"none",colIndex:t,column:this.columns[t]};return e!==null&&typeof e=="object"?Object.assign(n,e):n.content=e,n}prepareNumericColumns(){let e=this.getRow(0);!e||(this.columns=this.columns.map((t,n)=>{let a=e[n].content;return!t.align&&os(a)&&(t.align="right"),t}))}prepareRows(e){return e.map((t,n)=>{let a=this._getNextRowCount(),d=[],h={rowIndex:a};if(Array.isArray(t))for(this.options.checkboxColumn&&d.push(this.getCheckboxHTML()),this.options.serialNoColumn&&d.push(a+1+""),d=d.concat(t);d.length<this.columns.length;)d.push("");else{for(let f of this.columns)f.id==="_checkbox"?d.push(this.getCheckboxHTML()):f.id==="_rowIndex"?d.push(a+1+""):d.push(t[f.id]);h.indent=t.indent||0}return this.prepareRow(d,h)})}prepareTreeRows(){this.rows.forEach((e,t)=>{if(ft(e.meta.indent)){let n=this.getRow(t+1);e.meta.isLeaf=!n||as(n.meta.indent)||n.meta.indent<=e.meta.indent,e.meta.isTreeNodeClose=!1}})}prepareRowView(){this.rowViewOrder=this.rows.map(e=>e.meta.rowIndex)}prepareRow(e,t){let n={rowIndex:t.rowIndex,indent:t.indent};return e=e.map((a,d)=>this.prepareCell(a,d)).map(a=>Object.assign({},n,a)),e.meta=t,e}validateColumns(){let e=this.options.columns;if(!Array.isArray(e))throw new pt("`columns` must be an array");e.forEach((t,n)=>{if(typeof t!="string"&&typeof t!="object")throw new pt(`column "${n}" must be a string or an object`)})}validateData(e){if(Array.isArray(e)&&(e.length===0||Array.isArray(e[0])||typeof e[0]=="object"))return!0;throw new pt("`data` must be an array of arrays or objects")}appendRows(e){this.validateData(e),this.rows=this.rows.concat(this.prepareRows(e)),this.prepareTreeRows(),this.prepareRowView()}sortRows(e,t="none"){e=+e,this.getColumns().map(n=>{n.colIndex===e?n.sortOrder=t:n.sortOrder="none"}),this._sortRows(e,t)}_sortRows(e,t){if(this.currentSort.colIndex===e&&(this.currentSort.sortOrder==="asc"&&t==="desc"||this.currentSort.sortOrder==="desc"&&t==="asc")){this.reverseArray(this.rowViewOrder),this.currentSort.sortOrder=t;return}if(this.rowViewOrder.sort((n,a)=>{let d=n,h=a,f=this.getCell(e,n).content,p=this.getCell(e,a).content;if(f=f==null?"":f,p=p==null?"":p,t==="none")return d-h;if(t==="asc"){if(f<p)return-1;if(f>p)return 1;if(f===p)return 0}else if(t==="desc"){if(f<p)return 1;if(f>p)return-1;if(f===p)return 0}return 0}),this.hasColumnById("_rowIndex")){let n=this.getColumnIndexById("_rowIndex");this.rows.forEach((a,d)=>{let h=this.rowViewOrder.indexOf(d),f=a[n];f.content=h+1+""})}}reverseArray(e){let t=null,n=null,a=e.length;for(t=0,n=a-1;t<n;t+=1,n-=1){let d=e[t];e[t]=e[n],e[n]=d}}switchColumn(e,t){let n=this.columns[e];this.columns[e]=this.columns[t],this.columns[t]=n,this.columns[e].colIndex=e,this.columns[t].colIndex=t,this.rows.forEach(a=>{let d=Object.assign({},a[e],{colIndex:t}),h=Object.assign({},a[t],{colIndex:e});a[t]=d,a[e]=h})}removeColumn(e){e=+e;let t=a=>a.colIndex!==e,n=(a,d)=>Object.assign({},a,{colIndex:d});this.columns=this.columns.filter(t).map(n),this.rows.forEach(a=>{a.splice(e,1),a.forEach((d,h)=>{d.colIndex=h})})}updateRow(e,t){e.length<this.columns.length&&(this.hasColumnById("_rowIndex")&&(e=[t+1+""].concat(e)),this.hasColumnById("_checkbox")&&(e=['<input type="checkbox" />'].concat(e)));let n=this.prepareRow(e,{rowIndex:t}),a=this.rows.findIndex(d=>d[0].rowIndex===t);return this.rows[a]=n,n}updateCell(e,t,n){let a;typeof e=="object"&&(a=e,e=a.colIndex,t=a.rowIndex,n=a),a=this.getCell(e,t);for(let d in n){let h=n[d];h!==void 0&&(a[d]=h)}return a}updateColumn(e,t){let n=this.getColumn(e);for(let a in t){let d=t[a];d!==void 0&&(n[a]=d)}return n}filterRows(e){return this.options.filterRows(this.rows,e,this).then(t=>(t||(t=this.getAllRowIndices()),t.then||(t=Promise.resolve(t)),t.then(n=>(this._filteredRows=n,{rowsToHide:this.getAllRowIndices().filter(d=>!n.includes(d)),rowsToShow:n}))))}getFilteredRowIndices(){return this._filteredRows||this.getAllRowIndices()}getAllRowIndices(){return this.rows.map(e=>e.meta.rowIndex)}getRowCount(){return this.rowCount}_getNextRowCount(){let e=this.rowCount;return this.rowCount++,e}getRows(e,t){return this.rows.slice(e,t)}getRowsForView(e,t){return this.rowViewOrder.map(a=>this.rows[a]).slice(e,t)}getColumns(e){let t=this.columns;return e&&(t=t.slice(this.getStandardColumnCount())),t}getStandardColumnCount(){return this.options.checkboxColumn&&this.options.serialNoColumn?2:this.options.checkboxColumn||this.options.serialNoColumn?1:0}getColumnCount(e){let t=this.columns.length;return e&&(t=t-this.getStandardColumnCount()),t}getColumn(e){return e=+e,e<0&&(e=this.columns.length+e),this.columns.find(t=>t.colIndex===e)}getColumnById(e){return this.columns.find(t=>t.id===e)}getRow(e){return e=+e,this.rows[e]}getCell(e,t){return t=+t,e=+e,this.getRow(t)[e]}getChildren(e){e=+e;let t=this.getRow(e).meta.indent,n=[];for(let a=e+1;a<this.rowCount;a++){let d=this.getRow(a);if(!isNaN(d.meta.indent)&&(d.meta.indent>t&&n.push(a),d.meta.indent===t))break}return n}getImmediateChildren(e){e=+e;let t=this.getRow(e).meta.indent,n=[],a=t+1;for(let d=e+1;d<this.rowCount;d++){let h=this.getRow(d);if(!(isNaN(h.meta.indent)||h.meta.indent>a)&&(h.meta.indent===a&&n.push(d),h.meta.indent===t))break}return n}get(){return{columns:this.columns,rows:this.rows}}getData(e){return this.data[e]}hasColumn(e){return Boolean(this.columns.find(t=>t.content===e))}hasColumnById(e){return Boolean(this.columns.find(t=>t.id===e))}getColumnIndex(e){return this.columns.findIndex(t=>t.content===e)}getColumnIndexById(e){return this.columns.findIndex(t=>t.id===e)}getCheckboxHTML(){return'<input type="checkbox" />'}},pt=class extends TypeError{},pn={chevronDown:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>',chevronRight:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>'},Ye=class{constructor(e){this.instance=e,Pt(this,this.instance,["wrapper","options","style","header","bodyScrollable","columnmanager","rowmanager","datamanager","keyboard"]),this.bindEvents()}bindEvents(){this.bindFocusCell(),this.bindEditCell(),this.bindKeyboardSelection(),this.bindCopyCellContents(),this.bindMouseEvents(),this.bindTreeEvents()}bindFocusCell(){this.bindKeyboardNav()}bindEditCell(){this.$editingCell=null,m.on(this.bodyScrollable,"dblclick",".dt-cell",(e,t)=>{this.activateEditing(t)}),this.keyboard.on("enter",()=>{this.$focusedCell&&!this.$editingCell?this.activateEditing(this.$focusedCell):this.$editingCell&&this.deactivateEditing()})}bindKeyboardNav(){let e=t=>{if(!this.$focusedCell||this.$editingCell)return!1;let n=this.$focusedCell,{rowIndex:a,colIndex:d}=m.data(n);return t==="left"?n=this.getLeftMostCell$(a):t==="right"?n=this.getRightMostCell$(a):t==="up"?n=this.getTopMostCell$(d):t==="down"&&(n=this.getBottomMostCell$(d)),this.focusCell(n),!0};["left","right","up","down","tab","shift+tab"].map(t=>this.keyboard.on(t,()=>this.focusCellInDirection(t))),["left","right","up","down"].map(t=>this.keyboard.on(`ctrl+${t}`,()=>e(t))),this.keyboard.on("esc",()=>{this.deactivateEditing(!1),this.columnmanager.toggleFilter(!1)}),this.options.inlineFilters&&(this.keyboard.on("ctrl+f",t=>{let n=m.closest(".dt-cell",t.target),{colIndex:a}=m.data(n);return this.activateFilter(a),!0}),m.on(this.header,"focusin",".dt-filter",()=>{this.unfocusCell(this.$focusedCell)}))}bindKeyboardSelection(){let e=t=>{let n=this.getSelectionCursor();return t==="left"?n=this.getLeftCell$(n):t==="right"?n=this.getRightCell$(n):t==="up"?n=this.getAboveCell$(n):t==="down"&&(n=this.getBelowCell$(n)),n};["left","right","up","down"].map(t=>this.keyboard.on(`shift+${t}`,()=>this.selectArea(e(t))))}bindCopyCellContents(){this.keyboard.on("ctrl+c",()=>{let e=this.copyCellContents(this.$focusedCell,this.$selectionCursor),t=this.instance.translate("{count} cells copied",{count:e});e&&this.instance.showToastMessage(t,2)}),this.options.pasteFromClipboard&&this.keyboard.on("ctrl+v",e=>(this.instance.pasteTarget.focus(),setTimeout(()=>{let t=this.instance.pasteTarget.value;this.instance.pasteTarget.value="",this.pasteContentInCell(t)},10),!1))}bindMouseEvents(){let e=null;m.on(this.bodyScrollable,"mousedown",".dt-cell",n=>{e=!0,this.focusCell(m(n.delegatedTarget))}),m.on(this.bodyScrollable,"mouseup",()=>{e=!1});let t=n=>{!e||this.selectArea(m(n.delegatedTarget))};m.on(this.bodyScrollable,"mousemove",".dt-cell",ei(t,50))}bindTreeEvents(){m.on(this.bodyScrollable,"click",".dt-tree-node__toggle",(e,t)=>{let n=m.closest(".dt-cell",t),{rowIndex:a}=m.data(n);n.classList.contains("dt-cell--tree-close")?this.rowmanager.openSingleNode(a):this.rowmanager.closeSingleNode(a)})}focusCell(e,{skipClearSelection:t=0,skipDOMFocus:n=0,skipScrollToCell:a=0}={}){if(!e||e===this.$editingCell)return;let{colIndex:d,isHeader:h}=m.data(e);h||this.columnmanager.getColumn(d).focusable===!1||(a||this.scrollToCell(e),this.deactivateEditing(),t||this.clearSelection(),this.$focusedCell&&this.$focusedCell.classList.remove("dt-cell--focus"),this.$focusedCell=e,e.classList.add("dt-cell--focus"),n||e.focus(),this.highlightRowColumnHeader(e))}unfocusCell(e){!e||(e.classList.remove("dt-cell--focus"),this.$focusedCell=null,this.lastHeaders&&this.lastHeaders.forEach(t=>t&&t.classList.remove("dt-cell--highlight")))}highlightRowColumnHeader(e){let{colIndex:t,rowIndex:n}=m.data(e),a=this.datamanager.getColumnIndexById("_rowIndex"),d=`.dt-cell--header-${t}`,h=`.dt-cell--${a}-${n}`;this.lastHeaders&&this.lastHeaders.forEach(y=>y&&y.classList.remove("dt-cell--highlight"));let f=m(d,this.wrapper),p=m(h,this.wrapper);this.lastHeaders=[f,p],this.lastHeaders.forEach(y=>y&&y.classList.add("dt-cell--highlight"))}selectAreaOnClusterChanged(){if(!(this.$focusedCell&&this.$selectionCursor))return;let{colIndex:e,rowIndex:t}=m.data(this.$selectionCursor),n=this.getCell$(e,t);if(!n||n===this.$selectionCursor)return;let a=m.data(this.$focusedCell);this.$focusedCell=this.getCell$(a.colIndex,a.rowIndex),this.selectArea(n)}focusCellOnClusterChanged(){if(!this.$focusedCell)return;let{colIndex:e,rowIndex:t}=m.data(this.$focusedCell),n=this.getCell$(e,t);!n||this.focusCell(n,{skipClearSelection:1,skipDOMFocus:1,skipScrollToCell:1})}selectArea(e){!this.$focusedCell||this._selectArea(this.$focusedCell,e)&&(this.$selectionCursor=e)}_selectArea(e,t){if(e===t)return!1;let n=this.getCellsInRange(e,t);return n?(this.clearSelection(),this._selectedCells=n.map(a=>this.getCell$(...a)),requestAnimationFrame(()=>{this._selectedCells.map(a=>a.classList.add("dt-cell--highlight"))}),!0):!1}getCellsInRange(e,t){let n,a,d,h;if(typeof e=="number")[n,a,d,h]=arguments;else if(typeof e=="object"){if(!(e&&t))return!1;let x=m.data(e),R=m.data(t);n=+x.colIndex,a=+x.rowIndex,d=+R.colIndex,h=+R.rowIndex}if(a>h&&([a,h]=[h,a]),n>d&&([n,d]=[d,n]),this.isStandardCell(n)||this.isStandardCell(d))return!1;let f=[],p=n,y=a,w=[];for(;y<=h;)w.push(y),y+=1;return w.map(x=>{for(;p<=d;)f.push([p,x]),p++;p=n}),f}clearSelection(){(this._selectedCells||[]).forEach(e=>e.classList.remove("dt-cell--highlight")),this._selectedCells=[],this.$selectionCursor=null}getSelectionCursor(){return this.$selectionCursor||this.$focusedCell}activateEditing(e){this.focusCell(e);let{rowIndex:t,colIndex:n}=m.data(e),a=this.columnmanager.getColumn(n);if(a&&(a.editable===!1||a.focusable===!1))return;let d=this.getCell(n,t);if(d&&d.editable===!1)return;if(this.$editingCell){let{_rowIndex:p,_colIndex:y}=m.data(this.$editingCell);if(t===p&&n===y)return}this.$editingCell=e,e.classList.add("dt-cell--editing");let h=m(".dt-cell__edit",e);h.innerHTML="";let f=this.getEditor(n,t,d.content,h);f&&(this.currentCellEditor=f,f.initValue(d.content,t,a))}deactivateEditing(e=!0){e&&this.submitEditing(),this.$focusedCell&&this.$focusedCell.focus(),this.$editingCell&&(this.$editingCell.classList.remove("dt-cell--editing"),this.$editingCell=null)}getEditor(e,t,n,a){let d=this.datamanager.getColumn(e),h=this.datamanager.getRow(t),f=this.datamanager.getData(t),p=this.options.getEditor?this.options.getEditor(e,t,n,a,d,h,f):this.getDefaultEditor(a);return p===!1?!1:(p===void 0&&(p=this.getDefaultEditor(a)),p)}getDefaultEditor(e){let t=m.create("input",{class:"dt-input",type:"text",inside:e});return{initValue(n){t.focus(),t.value=n},getValue(){return t.value},setValue(n){t.value=n}}}submitEditing(){let e=Promise.resolve();if(!this.$editingCell)return e;let t=this.$editingCell,{rowIndex:n,colIndex:a}=m.data(t),d=this.datamanager.getColumn(a);if(t){let h=this.currentCellEditor;if(h){let f=h.getValue();f.then||(f=Promise.resolve(f)),e=f.then(p=>{let y=this.getCell(a,n).content;if(y===p)return!1;let w=h.setValue(p,n,d);return this.updateCell(a,n,p,!0),t.focus(),w&&w.then&&w.catch(x=>{console.log(x),this.updateCell(a,n,y)}),w})}}return this.currentCellEditor=null,e}copyCellContents(e,t){if(!t&&e){let{colIndex:h,rowIndex:f}=m.data(e),p=this.getCell(h,f);return Yn(p.content),1}let n=this.getCellsInRange(e,t);if(!n)return 0;let a=n.map(h=>this.getCell(...h)).reduce((h,f)=>{let p=f.rowIndex;return h[p]=h[p]||[],h[p].push(f.content),h},[]),d=a.map(h=>h.join("	")).join(`
`);return Yn(d),a.reduce((h,f)=>h+f.length,0)}pasteContentInCell(e){if(!this.$focusedCell)return;let t=e.split(`
`).map(h=>h.split("	")).filter(h=>h.length&&h.every(f=>f)),{colIndex:n,rowIndex:a}=m.data(this.$focusedCell),d={colIndex:+n,rowIndex:+a};t.forEach((h,f)=>{let p=f+d.rowIndex;h.forEach((y,w)=>{let x=w+d.colIndex;this.updateCell(x,p,y,!0)})})}activateFilter(e){this.columnmanager.toggleFilter(),this.columnmanager.focusFilter(e),this.columnmanager.isFilterShown||this.$focusedCell&&this.$focusedCell.focus()}updateCell(e,t,n,a=!1){let d=this.datamanager.updateCell(e,t,{content:n});this.refreshCell(d,a)}refreshCell(e,t=!1){let n=m(this.selector(e.colIndex,e.rowIndex),this.bodyScrollable);n.innerHTML=this.getCellContent(e,t)}toggleTreeButton(e,t){let n=this.columnmanager.getFirstColumnIndex(),a=this.getCell$(n,e);a&&a.classList[t?"remove":"add"]("dt-cell--tree-close")}isStandardCell(e){return e<this.columnmanager.getFirstColumnIndex()}focusCellInDirection(e){if(!this.$focusedCell||this.$editingCell&&["left","right","up","down"].includes(e))return!1;this.$editingCell&&["tab","shift+tab"].includes(e)&&this.deactivateEditing();let t=this.$focusedCell;if(e==="left"||e==="shift+tab"?t=this.getLeftCell$(t):e==="right"||e==="tab"?t=this.getRightCell$(t):e==="up"?t=this.getAboveCell$(t):e==="down"&&(t=this.getBelowCell$(t)),!t)return!1;let{colIndex:n}=m.data(t);if(!this.columnmanager.getColumn(n).focusable){let d=this.$focusedCell;this.unfocusCell(d),this.$focusedCell=t;let h=this.focusCellInDirection(e);return h||this.focusCell(d),h}return this.focusCell(t),!0}getCell$(e,t){return m(this.selector(e,t),this.bodyScrollable)}getAboveCell$(e){let{colIndex:t}=m.data(e),n=e.parentElement.previousElementSibling;for(;n&&n.classList.contains("dt-row--hide");)n=n.previousElementSibling;return n?m(`.dt-cell--col-${t}`,n):e}getBelowCell$(e){let{colIndex:t}=m.data(e),n=e.parentElement.nextElementSibling;for(;n&&n.classList.contains("dt-row--hide");)n=n.nextElementSibling;return n?m(`.dt-cell--col-${t}`,n):e}getLeftCell$(e){return e.previousElementSibling}getRightCell$(e){return e.nextElementSibling}getLeftMostCell$(e){return this.getCell$(this.columnmanager.getFirstColumnIndex(),e)}getRightMostCell$(e){return this.getCell$(this.columnmanager.getLastColumnIndex(),e)}getTopMostCell$(e){return this.getCell$(e,this.rowmanager.getFirstRowIndex())}getBottomMostCell$(e){return this.getCell$(e,this.rowmanager.getLastRowIndex())}getCell(e,t){return this.instance.datamanager.getCell(e,t)}getRowHeight(){return m.style(m(".dt-row",this.bodyScrollable),"height")}scrollToCell(e){if(m.inViewport(e,this.bodyScrollable))return!1;let{rowIndex:t}=m.data(e);return this.rowmanager.scrollToRow(t),!1}getRowCountPerPage(){return Math.ceil(this.instance.getViewportHeight()/this.getRowHeight())}getCellHTML(e){let{rowIndex:t,colIndex:n,isHeader:a,isFilter:d,isTotalRow:h}=e,f=un({rowIndex:t,colIndex:n,isHeader:a,isFilter:d,isTotalRow:h}),p=this.datamanager.getRow(t),y=!(a||d||h);return`
            <div class="${["dt-cell","dt-cell--col-"+n,y?`dt-cell--${n}-${t}`:"",y?"dt-cell--row-"+t:"",a?"dt-cell--header":"",a?`dt-cell--header-${n}`:"",d?"dt-cell--filter":"",y&&p&&p.meta.isTreeNodeClose?"dt-cell--tree-close":""].join(" ")}" ${f} tabindex="0">
                ${this.getCellContent(e)}
            </div>
        `}getCellContent(e,t=!1){let{isHeader:n,isFilter:a,colIndex:d}=e,f=!n&&e.editable!==!1?this.getEditCellHTML(d):"",y=n&&e.sortable!==!1?`<span class="sort-indicator">
                ${this.options.sortIndicator[e.sortOrder]}
            </span>`:"",x=n&&e.resizable!==!1?'<span class="dt-cell__resize-handle"></span>':"",I=n&&e.dropdown!==!1?this.columnmanager.getDropdownHTML():"",C=Ye.getCustomCellFormatter(e),_;if(n||a||!C)_=e.content;else if(!e.html||t){let W=this.datamanager.getRow(e.rowIndex),S=this.datamanager.getData(e.rowIndex);_=C(e.content,W,e.column,S)}else _=e.html;if(e.html=_,this.options.treeView&&!(n||a)&&e.indent!==void 0){let W=this.datamanager.getRow(e.rowIndex+1),S=W&&W.meta.indent>e.indent,k=20,se="px";if(this.datamanager.getColumnIndexById("_rowIndex")+1===e.colIndex){let j=(e.indent||0)*k,ke=S?`<span class="dt-tree-node__toggle" style="left: ${j-k}${se}">
                        <span class="icon-open">${pn.chevronDown}</span>
                        <span class="icon-close">${pn.chevronRight}</span>
                    </span>`:"";_=`<span class="dt-tree-node" style="padding-left: ${j}${se}">
                    ${ke}
                    <span>${_}</span>
                </span>`}}let F=`
            <div class="${["dt-cell__content",n?`dt-cell__content--header-${d}`:`dt-cell__content--col-${d}`].join(" ")}">
                ${_}
                ${y}
                ${x}
                ${I}
            </div>
            ${f}
        `,V=document.createElement("div");V.innerHTML=_;let te=V.textContent;return te=te.replace(/\s+/g," ").trim(),F=F.replace(">",` title="${ds(te)}">`),F}getEditCellHTML(e){return`<div class="dt-cell__edit dt-cell__edit--col-${e}"></div>`}selector(e,t){return`.dt-cell--${e}-${t}`}static getCustomCellFormatter(e){return e.format||e.column&&e.column.format||null}},mn=class{constructor(e){this.instance=e,Pt(this,this.instance,["options","fireEvent","header","datamanager","cellmanager","style","wrapper","rowmanager","bodyScrollable","bodyRenderer"]),this.bindEvents()}renderHeader(){this.header.innerHTML="<div></div>",this.refreshHeader()}refreshHeader(){let e=this.datamanager.getColumns();m("div",this.header).innerHTML=this.getHeaderHTML(e),this.$filterRow=m(".dt-row-filter",this.header),this.$filterRow&&m.style(this.$filterRow,{display:"none"}),this.$columnMap=[],this.bindMoveColumn()}getHeaderHTML(e){let t=this.rowmanager.getRowHTML(e,{isHeader:1});return this.options.inlineFilters&&(t+=this.rowmanager.getRowHTML(e,{isFilter:1})),t}bindEvents(){this.bindDropdown(),this.bindResizeColumn(),this.bindPerfectColumnWidth(),this.bindFilter()}bindDropdown(){let e=".dt-dropdown__toggle",t=".dt-dropdown__list";this.instance.dropdownContainer.innerHTML=this.getDropdownListHTML(),this.$dropdownList=this.instance.dropdownContainer.firstElementChild,m.on(this.header,"click",e,h=>{this.openDropdown(h)});let n=h=>{let f=[e,e+" *",t,t+" *"].join(",");h.target.matches(f)||d()};m.on(document.body,"click",n),document.addEventListener("scroll",d,!0),this.instance.on("onDestroy",()=>{m.off(document.body,"click",n),m.off(document,"scroll",d)}),m.on(this.$dropdownList,"click",".dt-dropdown__list-item",(h,f)=>{if(!this._dropdownActiveColIndex)return;let p=this.options.headerDropdown,{index:y}=m.data(f),w=this._dropdownActiveColIndex,x=p[y].action;x&&x.call(this.instance,this.getColumn(w)),this.hideDropdown()});let a=this;function d(h){a.hideDropdown()}this.hideDropdown()}openDropdown(e){this._dropdownWidth||(m.style(this.$dropdownList,{display:""}),this._dropdownWidth=m.style(this.$dropdownList,"width")),m.style(this.$dropdownList,{display:"",left:e.clientX-this._dropdownWidth+4+"px",top:e.clientY+4+"px"});let t=m.closest(".dt-cell",e.target),{colIndex:n}=m.data(t);this._dropdownActiveColIndex=n}hideDropdown(){m.style(this.$dropdownList,{display:"none"}),this._dropdownActiveColIndex=null}bindResizeColumn(){let e=!1,t,n,a;m.on(this.header,"mousedown",".dt-cell .dt-cell__resize-handle",(f,p)=>{document.body.classList.add("dt-resize"),t=p.parentNode.parentNode;let{colIndex:w}=m.data(t),x=this.getColumn(w);x&&x.resizable===!1||(e=!0,n=m.style(m(".dt-cell__content",t),"width"),a=f.pageX)});let d=f=>{if(document.body.classList.remove("dt-resize"),!t)return;e=!1;let{colIndex:p}=m.data(t);this.setColumnWidth(p),this.style.setBodyStyle(),t=null};m.on(document.body,"mouseup",d),this.instance.on("onDestroy",()=>{m.off(document.body,"mouseup",d)});let h=f=>{if(!e)return;let p=f.pageX-a;this.options.direction==="rtl"&&(p=-1*p);let y=n+p,{colIndex:w}=m.data(t);this.options.minimumColumnWidth>y||(this.datamanager.updateColumn(w,{width:y}),this.setColumnHeaderWidth(w))};m.on(document.body,"mousemove",h),this.instance.on("onDestroy",()=>{m.off(document.body,"mousemove",h)})}bindPerfectColumnWidth(){m.on(this.header,"dblclick",".dt-cell .dt-cell__resize-handle",(e,t)=>{let n=t.parentNode.parentNode,{colIndex:a}=m.data(n),d=this.bodyRenderer.visibleRows.map(_=>_[a]).reduce((_,P)=>_.content.length>P.content.length?_:P),h=this.cellmanager.getCellHTML(d),f=document.createElement("div");f.innerHTML=h;let p=f.querySelector(".dt-cell__content").textContent,{borderLeftWidth:y,borderRightWidth:w,paddingLeft:x,paddingRight:R}=m.getStyle(this.bodyScrollable.querySelector(".dt-cell__content")),I=[y,w,x,R].map(parseFloat).reduce((_,P)=>_+P),C=m.measureTextWidth(p)+I;this.datamanager.updateColumn(a,{width:C}),this.setColumnHeaderWidth(a),this.setColumnWidth(a)})}bindMoveColumn(){if(this.options.disableReorderColumn)return;let e=m(".dt-row",this.header);this.sortable=bi.create(e,{onEnd:t=>{let{oldIndex:n,newIndex:a}=t,d=t.item,{colIndex:h}=m.data(d);+h!==a&&this.switchColumn(n,a)},preventOnFilter:!1,filter:".dt-cell__resize-handle, .dt-dropdown",chosenClass:"dt-cell--dragging",animation:150})}sortColumn(e,t){this.instance.freeze(),this.sortRows(e,t).then(()=>(this.refreshHeader(),this.rowmanager.refreshRows())).then(()=>this.instance.unfreeze()).then(()=>{this.fireEvent("onSortColumn",this.getColumn(e))})}removeColumn(e){let t=this.getColumn(e);this.instance.freeze(),this.datamanager.removeColumn(e).then(()=>(this.refreshHeader(),this.rowmanager.refreshRows())).then(()=>this.instance.unfreeze()).then(()=>{this.fireEvent("onRemoveColumn",t)})}switchColumn(e,t){this.instance.freeze(),this.datamanager.switchColumn(e,t).then(()=>(this.refreshHeader(),this.rowmanager.refreshRows())).then(()=>{this.setColumnWidth(e),this.setColumnWidth(t),this.instance.unfreeze()}).then(()=>{this.fireEvent("onSwitchColumn",this.getColumn(e),this.getColumn(t))})}toggleFilter(e){if(!this.options.inlineFilters)return;let t;e===void 0?t=!this.isFilterShown:t=e,t?m.style(this.$filterRow,{display:""}):m.style(this.$filterRow,{display:"none"}),this.isFilterShown=t,this.style.setBodyStyle()}focusFilter(e){if(!this.isFilterShown)return;m(`.dt-cell--col-${e} .dt-filter`,this.$filterRow).focus()}bindFilter(){if(!this.options.inlineFilters)return;let e=t=>{this.applyFilter(this.getAppliedFilters())};m.on(this.header,"keydown",".dt-filter",rs(e,300))}applyFilter(e){this.datamanager.filterRows(e).then(({rowsToShow:t})=>{this.rowmanager.showRows(t)})}getAppliedFilters(){let e={};return m.each(".dt-filter",this.header).map(t=>{let n=t.value;n&&(e[t.dataset.colIndex]=n)}),e}applyDefaultSortOrder(){let e=this.getColumns().filter(t=>t.sortOrder!=="none");if(e.length===1){let t=e[0];this.sortColumn(t.colIndex,t.sortOrder)}}sortRows(e,t){return this.datamanager.sortRows(e,t)}getColumn(e){return this.datamanager.getColumn(e)}getColumns(){return this.datamanager.getColumns()}setColumnWidth(e,t){e=+e;let n=t||this.getColumn(e).width,a=[`.dt-cell__content--col-${e}`,`.dt-cell__edit--col-${e}`].join(", "),d={width:n+"px"};this.style.setStyle(a,d)}setColumnHeaderWidth(e){e=+e,this.$columnMap=this.$columnMap||[];let t=`.dt-cell__content--header-${e}`,{width:n}=this.getColumn(e),a=this.$columnMap[e];a||(a=this.header.querySelector(t),this.$columnMap[e]=a),a.style.width=n+"px"}getColumnMinWidth(e){return e=+e,this.getColumn(e).minWidth||24}getFirstColumnIndex(){return this.datamanager.getColumnIndexById("_rowIndex")+1}getHeaderCell$(e){return m(`.dt-cell--header-${e}`,this.header)}getLastColumnIndex(){return this.datamanager.getColumnCount()-1}getDropdownHTML(){let{dropdownButton:e}=this.options;return`
            <div class="dt-dropdown">
                <div class="dt-dropdown__toggle">${e}</div>
            </div>
      `}getDropdownListHTML(){let{headerDropdown:e}=this.options;return`
            <div class="dt-dropdown__list">
            ${e.map((t,n)=>`
                <div class="dt-dropdown__list-item" data-index="${n}">${t.label}</div>
            `).join("")}
            </div>
        `}},gn=class{constructor(e){this.instance=e,Pt(this,this.instance,["options","fireEvent","wrapper","bodyScrollable","bodyRenderer","style"]),this.bindEvents(),this.refreshRows=ut(this.refreshRows,this)}get datamanager(){return this.instance.datamanager}get cellmanager(){return this.instance.cellmanager}bindEvents(){this.bindCheckbox()}bindCheckbox(){!this.options.checkboxColumn||(this.checkMap=[],m.on(this.wrapper,"click",'.dt-cell--col-0 [type="checkbox"]',(e,t)=>{let n=t.closest(".dt-cell"),{rowIndex:a,isHeader:d}=m.data(n),h=t.checked;d?this.checkAll(h):this.checkRow(a,h)}))}refreshRows(){this.instance.renderBody(),this.instance.setDimensions()}refreshRow(e,t){this.datamanager.updateRow(e,t).forEach(a=>{this.cellmanager.refreshCell(a,!0)})}getCheckedRows(){if(!this.checkMap)return[];let e=[];for(let t in this.checkMap)this.checkMap[t]===1&&e.push(t);return e}highlightCheckedRows(){this.getCheckedRows().map(e=>this.checkRow(e,!0))}checkRow(e,t){let n=t?1:0,a=d=>`.dt-cell--0-${d} [type="checkbox"]`;this.checkMap[e]=n,m.each(a(e),this.bodyScrollable).map(d=>{d.checked=t}),this.highlightRow(e,t),this.showCheckStatus(),this.fireEvent("onCheckRow",this.datamanager.getRow(e))}checkAll(e){let t=e?1:0;e?this.datamanager._filteredRows?this.datamanager._filteredRows.forEach(n=>{this.checkRow(n,e)}):this.checkMap=Array.from(Array(this.getTotalRows())).map(n=>t):this.checkMap=[],m.each('.dt-cell--col-0 [type="checkbox"]',this.bodyScrollable).map(n=>{n.checked=e}),this.highlightAll(e),this.showCheckStatus(),this.fireEvent("onCheckRow")}showCheckStatus(){if(!this.options.checkedRowStatus)return;let t=this.getCheckedRows().length;if(t>0){let n=this.instance.translate("{count} rows selected",{count:t});this.bodyRenderer.showToastMessage(n)}else this.bodyRenderer.clearToastMessage()}highlightRow(e,t=!0){let n=this.getRow$(e);if(!!n){if(!t&&this.bodyScrollable.classList.contains("dt-scrollable--highlight-all")){n.classList.add("dt-row--unhighlight");return}t&&n.classList.contains("dt-row--unhighlight")&&n.classList.remove("dt-row--unhighlight"),this._highlightedRows=this._highlightedRows||{},t?(n.classList.add("dt-row--highlight"),this._highlightedRows[e]=n):(n.classList.remove("dt-row--highlight"),delete this._highlightedRows[e])}}highlightAll(e=!0){if(e)this.bodyScrollable.classList.add("dt-scrollable--highlight-all");else{this.bodyScrollable.classList.remove("dt-scrollable--highlight-all");for(let t in this._highlightedRows)this._highlightedRows[t].classList.remove("dt-row--highlight");this._highlightedRows={}}}showRows(e){e=ls(e);let t=e.map(n=>this.datamanager.getRow(n));this.bodyRenderer.renderRows(t)}showAllRows(){let e=this.datamanager.getAllRowIndices();this.showRows(e)}getChildrenToShowForNode(e){let t=this.datamanager.getRow(e);return t.meta.isTreeNodeClose=!1,this.datamanager.getImmediateChildren(e)}openSingleNode(e){let t=this.getChildrenToShowForNode(e),n=this.bodyRenderer.visibleRowIndices,a=qn([...t,...n]).sort(ht);this.showRows(a)}getChildrenToHideForNode(e){let t=this.datamanager.getRow(e);t.meta.isTreeNodeClose=!0;let n=this.datamanager.getChildren(e);return n.forEach(a=>{let d=this.datamanager.getRow(a);d.meta.isLeaf||(d.meta.isTreeNodeClose=!0)}),n}closeSingleNode(e){let t=this.getChildrenToHideForNode(e),a=this.bodyRenderer.visibleRowIndices.filter(d=>!t.includes(d)).sort(ht);this.showRows(a)}expandAllNodes(){let n=this.datamanager.getRows().filter(h=>!h.meta.isLeaf).map(h=>this.getChildrenToShowForNode(h.meta.rowIndex)).flat(),a=this.bodyRenderer.visibleRowIndices,d=qn([...n,...a]).sort(ht);this.showRows(d)}collapseAllNodes(){let n=this.datamanager.getRows().filter(h=>h.meta.indent===0).map(h=>this.getChildrenToHideForNode(h.meta.rowIndex)).flat(),d=this.bodyRenderer.visibleRowIndices.filter(h=>!n.includes(h)).sort(ht);this.showRows(d)}setTreeDepth(e){let t=this.datamanager.getRows(),n=t.filter(f=>f.meta.indent<e),a=t.filter(f=>f.meta.indent>=e),d=a.filter(f=>f.meta.indent>e);a.forEach(f=>{f.meta.isLeaf||(f.meta.isTreeNodeClose=!0)}),n.forEach(f=>{f.meta.isLeaf||(f.meta.isTreeNodeClose=!1)});let h=t.filter(f=>!d.includes(f)).map(f=>f.meta.rowIndex).sort(ht);this.showRows(h)}getRow$(e){return m(this.selector(e),this.bodyScrollable)}getTotalRows(){return this.datamanager.getRowCount()}getFirstRowIndex(){return 0}getLastRowIndex(){return this.datamanager.getRowCount()-1}scrollToRow(e){e=+e,this._lastScrollTo=this._lastScrollTo||0;let t=this.getRow$(e);if(m.inViewport(t,this.bodyScrollable))return;let{height:n}=t.getBoundingClientRect(),{top:a,bottom:d}=this.bodyScrollable.getBoundingClientRect(),h=Math.floor((d-a)/n),f=0;e>this._lastScrollTo?f=n*(e+1-h):f=n*(e+1-1),this._lastScrollTo=e,m.scrollTop(this.bodyScrollable,f)}getRowHTML(e,t){let n=un(t),a=t.rowIndex;return t.isFilter&&(e=e.map(d=>Object.assign({},d,{content:this.getFilterInput({colIndex:d.colIndex,name:d.name}),isFilter:1,isHeader:void 0,editable:!1})),a="filter"),t.isHeader&&(a="header"),`
            <div class="dt-row dt-row-${a}" ${n}>
                ${e.map(d=>this.cellmanager.getCellHTML(d)).join("")}
            </div>
        `}getFilterInput(e){let t=`title="Filter based on ${e.name||"Index"}"`;return`<input class="dt-filter dt-input" type="text" ${un(e)} tabindex="1"
            ${e.colIndex===0?"disabled":t} />`}selector(e){return`.dt-row-${e}`}},hs=Si(function(s,e){(function(t){s.exports=t()})(function(){return function t(n,a,d){function h(y,w){if(!a[y]){if(!n[y]){var x=typeof Ot=="function"&&Ot;if(!w&&x)return x(y,!0);if(f)return f(y,!0);var R=new Error("Cannot find module '"+y+"'");throw R.code="MODULE_NOT_FOUND",R}var I=a[y]={exports:{}};n[y][0].call(I.exports,function(C){var _=n[y][1][C];return h(_||C)},I,I.exports,t,n,a,d)}return a[y].exports}for(var f=typeof Ot=="function"&&Ot,p=0;p<d.length;p++)h(d[p]);return h}({1:[function(t,n,a){Object.defineProperty(a,"__esModule",{value:!0});var d=function(){function w(x,R){for(var I=0;I<R.length;I++){var C=R[I];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(x,C.key,C)}}return function(x,R,I){return R&&w(x.prototype,R),I&&w(x,I),x}}();function h(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")}var f={width:"100%",height:"100%"},p=function(x){return Number(x)===Number(x)},y=function(){d(w,null,[{key:"create",value:function(R,I){return new w(R,I)}},{key:"mergeStyle",value:function(R,I){for(var C in I)R.style[C]!==I[C]&&(R.style[C]=I[C])}},{key:"getMaxBrowserHeight",value:function(){var R=document.createElement("div"),I=document.createElement("div");w.mergeStyle(R,{position:"absolute",height:"1px",opacity:0}),w.mergeStyle(I,{height:"1e7px"}),R.appendChild(I),document.body.appendChild(R);var C=I.offsetHeight;return document.body.removeChild(R),C}}]);function w(x,R){var I=this;h(this,w),this._config={},this._lastRepaint=null,this._maxElementHeight=w.getMaxBrowserHeight(),this.refresh(x,R);var C=this._config,_=function P(){var F=I._getScrollPosition(),V=I._lastRepaint;if(I._renderAnimationFrame=window.requestAnimationFrame(P),F!==V&&(!V||Math.abs(F-V)>I._averageHeight)){var te=I._renderChunk();I._lastRepaint=F,te!==!1&&typeof C.afterRender=="function"&&C.afterRender()}};_()}return d(w,[{key:"destroy",value:function(){window.cancelAnimationFrame(this._renderAnimationFrame)}},{key:"refresh",value:function(R,I){var C=this;if(Object.assign(this._config,f,I),!R||R.nodeType!==1)throw new Error("HyperList requires a valid DOM Node container");this._element=R;var _=this._config,P=this._scroller||_.scroller||document.createElement(_.scrollerTagName||"tr");if(typeof _.useFragment!="boolean"&&(this._config.useFragment=!0),!_.generate)throw new Error("Missing required `generate` function");if(!p(_.total))throw new Error("Invalid required `total` value, expected number");if(!Array.isArray(_.itemHeight)&&!p(_.itemHeight))throw new Error("\n        Invalid required `itemHeight` value, expected number or array\n      ".trim());p(_.itemHeight)?this._itemHeights=Array(_.total).fill(_.itemHeight):this._itemHeights=_.itemHeight,Object.keys(f).filter(function(S){return S in _}).forEach(function(S){var k=_[S],se=p(k),re=se?!1:k.slice(-1)==="%";if(k&&typeof k!="string"&&typeof k!="number"){var j="Invalid optional `"+S+"`, expected string or number";throw new Error(j)}else se&&(_[S]=k+"px");if(S==="height"){var ke=se?k:parseInt(k.replace(/px|%/,""),10);re?C._containerHeight=window.innerHeight*ke/100:C._containerHeight=p(k)?k:ke}});var F={width:""+_.width,height:""+_.height,overflow:"auto",position:"relative"};w.mergeStyle(R,F);var V=_.itemHeight*_.total,te=this._maxElementHeight;V>te&&console.warn(["HyperList: The maximum element height",te+"px has","been exceeded; please reduce your item height."].join(" "));var W={opacity:"0",position:"absolute",width:"1px",height:V+"px"};w.mergeStyle(P,W),this._scroller||R.appendChild(P),this._scroller=P,this._scrollHeight=this._computeScrollHeight(),this._itemPositions=this._itemPositions||Array(_.total).fill(0),this._computePositions(0),this._renderChunk(this._lastRepaint!==null),typeof _.afterRender=="function"&&_.afterRender()}},{key:"_getRow",value:function(R){var I=this._config,C=I.generate(R),_=C.height;if(_!==void 0&&p(_)?(C=C.element,_!==this._itemHeights&&(this._itemHeights[R]=_,this._computePositions(R),this._scrollHeight=this._computeScrollHeight(R))):_=this._itemHeights[R],!C||C.nodeType!==1)throw new Error("Generator did not return a DOM Node for index: "+R);var P=C.getAttribute("class")||"";C.setAttribute("class",P+" "+(I.rowClassName||"vrow"));var F=this._itemPositions[R];return w.mergeStyle(C,{position:"absolute",top:F+"px"}),C}},{key:"_getScrollPosition",value:function(){var R=this._config;return typeof R.overrideScrollPosition=="function"?R.overrideScrollPosition():this._element.scrollTop}},{key:"_renderChunk",value:function(R){var I=this._config,C=this._element,_=this._getScrollPosition(),P=I.total,F=I.reverse?this._getReverseFrom(_):this._getFrom(_)-1;if((F<0||F-this._screenItemsLen<0)&&(F=0),!R&&this._lastFrom===F)return!1;this._lastFrom=F;var V=F+this._cachedItemsLen;(V>P||V+this._cachedItemsLen>P)&&(V=P);var te=I.useFragment?document.createDocumentFragment():[],W=this._scroller;te[I.useFragment?"appendChild":"push"](W);for(var S=F;S<V;S++){var k=this._getRow(S);te[I.useFragment?"appendChild":"push"](k)}if(I.applyPatch)return I.applyPatch(C,te);C.innerHTML="",C.appendChild(te)}},{key:"_computePositions",value:function(){var R=arguments.length<=0||arguments[0]===void 0?1:arguments[0],I=this._config,C=I.total,_=I.reverse;R<1&&!_&&(R=1);for(var P=R;P<C;P++)_?P===0?this._itemPositions[0]=this._scrollHeight-this._itemHeights[0]:this._itemPositions[P]=this._itemPositions[P-1]-this._itemHeights[P]:this._itemPositions[P]=this._itemHeights[P-1]+this._itemPositions[P-1]}},{key:"_computeScrollHeight",value:function(){var R=this,I=this._config,C=I.total,_=this._itemHeights.reduce(function(W,S){return W+S},0);w.mergeStyle(this._scroller,{opacity:0,position:"absolute",width:"1px",height:_+"px"});var P=this._itemHeights.slice(0).sort(function(W,S){return W-S}),F=Math.floor(C/2),V=C%2===0?(P[F]+P[F-1])/2:P[F],te=this._element.clientHeight?this._element.clientHeight:this._containerHeight;return this._screenItemsLen=Math.ceil(te/V),this._containerHeight=te,this._cachedItemsLen=Math.max(this._cachedItemsLen||0,this._screenItemsLen*3),this._averageHeight=V,I.reverse&&window.requestAnimationFrame(function(){R._element.scrollTop=_}),_}},{key:"_getFrom",value:function(R){for(var I=0;this._itemPositions[I]<R;)I++;return I}},{key:"_getReverseFrom",value:function(R){for(var I=this._config.total-1;I>0&&this._itemPositions[I]<R+this._containerHeight;)I--;return I}}]),w}();a.default=y,n.exports=a.default},{}]},{},[1])(1)})}),us=Ci(hs),vn=class{constructor(e){this.instance=e,this.options=e.options,this.datamanager=e.datamanager,this.rowmanager=e.rowmanager,this.cellmanager=e.cellmanager,this.bodyScrollable=e.bodyScrollable,this.footer=this.instance.footer,this.log=e.log}renderRows(e){if(this.visibleRows=e,this.visibleRowIndices=e.map(d=>d.meta.rowIndex),e.length===0){this.bodyScrollable.innerHTML=this.getNoDataHTML();return}let t=this.datamanager.rowViewOrder.map(d=>this.visibleRowIndices.includes(d)?d:null).filter(d=>d!==null),n=getComputedStyle(this.bodyScrollable),a={width:n.width,height:n.height,itemHeight:this.options.cellHeight,total:e.length,generate:d=>{let h=document.createElement("div"),f=t[d],p=this.datamanager.getRow(f),y=this.rowmanager.getRowHTML(p,p.meta);return h.innerHTML=y,h.children[0]},afterRender:()=>{this.restoreState()}};this.hyperlist?this.hyperlist.refresh(this.bodyScrollable,a):this.hyperlist=new us(this.bodyScrollable,a),this.renderFooter()}render(){let e=this.datamanager.getRowsForView();this.renderRows(e),this.instance.setDimensions()}renderFooter(){if(!this.options.showTotalRow)return;let e=this.getTotalRow(),t=this.rowmanager.getRowHTML(e,{isTotalRow:1,rowIndex:"totalRow"});this.footer.innerHTML=t}getTotalRow(){return this.datamanager.getColumns().map(a=>{let d=null;return["_rowIndex","_checkbox"].includes(a.id)&&(d=""),{content:d,isTotalRow:1,colIndex:a.colIndex,column:a}}).map((a,d)=>{if(a.content==="")return a;if(this.options.hooks.columnTotal){let h=this.visibleRows.map(p=>p[d].content),f=this.options.hooks.columnTotal.call(this.instance,h,a);if(f!=null)return a.content=f,a}return a.content=this.visibleRows.reduce((h,f)=>{let p=f[d];return typeof p.content=="number"?(h==null&&(h=0),h+p.content):h},a.content),a})}restoreState(){this.rowmanager.highlightCheckedRows(),this.cellmanager.selectAreaOnClusterChanged(),this.cellmanager.focusCellOnClusterChanged()}showToastMessage(e,t){this.instance.toastMessage.innerHTML=this.getToastMessageHTML(e),t&&setTimeout(()=>{this.clearToastMessage()},t*1e3)}clearToastMessage(){this.instance.toastMessage.innerHTML=""}getNoDataHTML(){return`<div class="dt-scrollable__no-data">${this.options.noDataMessage}</div>`}getToastMessageHTML(e){return`<span class="dt-toast__message">${e}</span>`}},wn=class{constructor(e){this.instance=e,Pt(this,this.instance,["options","datamanager","columnmanager","header","footer","bodyScrollable","datatableWrapper","getColumn","bodyRenderer"]),this.scopeClass="dt-instance-"+e.constructor.instances,e.datatableWrapper.classList.add(this.scopeClass);let t=document.createElement("style");e.wrapper.insertBefore(t,e.datatableWrapper),this.styleEl=t,this.bindResizeWindow(),this.bindScrollHeader()}get stylesheet(){return this.styleEl.sheet}bindResizeWindow(){this.onWindowResize=this.onWindowResize.bind(this),this.onWindowResize=ei(this.onWindowResize,300),this.options.layout==="fluid"&&m.on(window,"resize",this.onWindowResize)}bindScrollHeader(){this._settingHeaderPosition=!1,m.on(this.bodyScrollable,"scroll",e=>{this._settingHeaderPosition||(this._settingHeaderPosition=!0,requestAnimationFrame(()=>{let t=-e.target.scrollLeft;m.style(this.header,{transform:`translateX(${t}px)`}),m.style(this.footer,{transform:`translateX(${t}px)`}),this._settingHeaderPosition=!1}))})}onWindowResize(){this.distributeRemainingWidth(),this.refreshColumnWidth(),this.setBodyStyle()}destroy(){this.styleEl.remove(),m.off(window,"resize",this.onWindowResize)}setStyle(e,t){if(e.includes(",")){e.split(",").map(h=>h.trim()).forEach(h=>{this.setStyle(h,t)});return}if(e=e.trim(),!e)return;this._styleRulesMap=this._styleRulesMap||{};let n=this._getPrefixedSelector(e);this._styleRulesMap[n]&&(this.removeStyle(e),t=Object.assign({},this._styleRulesMap[n],t));let a=this._getRuleString(t),d=`${n} { ${a} }`;this._styleRulesMap[n]=t,this.stylesheet.insertRule(d)}removeStyle(e){if(e.includes(",")){e.split(",").map(a=>a.trim()).forEach(a=>{this.removeStyle(a)});return}if(e=e.trim(),!e)return;let t=this._getPrefixedSelector(e),n=Array.from(this.stylesheet.cssRules).findIndex(a=>a.selectorText===t);n!==-1&&this.stylesheet.deleteRule(n)}_getPrefixedSelector(e){return`.${this.scopeClass} ${e}`}_getRuleString(e){return Object.keys(e).map(t=>{let n=t;return t.includes("-")||(n=Qn(t)),`${n}:${e[t]};`}).join("")}setDimensions(){this.setCellHeight(),this.setupMinWidth(),this.setupNaturalColumnWidth(),this.setupColumnWidth(),this.distributeRemainingWidth(),this.setColumnStyle(),this.setBodyStyle()}setCellHeight(){this.setStyle(".dt-cell",{height:this.options.cellHeight+"px"})}setupMinWidth(){m.each(".dt-cell--header",this.header).map(e=>{let{colIndex:t}=m.data(e),n=this.getColumn(t);if(!n.minWidth){let a=m.style(m(".dt-cell__content",e),"width");n.minWidth=a}})}setupNaturalColumnWidth(){!m(".dt-row")||(m.each(".dt-row-header .dt-cell",this.header).map(e=>{let{colIndex:t}=m.data(e),n=this.datamanager.getColumn(t),a=m.style(m(".dt-cell__content",e),"width");typeof a=="number"&&a>=this.options.minimumColumnWidth?n.naturalWidth=a:n.naturalWidth=this.options.minimumColumnWidth}),m.each(".dt-row-0 .dt-cell",this.bodyScrollable).map(e=>{let{colIndex:t}=m.data(e),n=this.datamanager.getColumn(t),a=m.style(m(".dt-cell__content",e),"width");typeof a=="number"&&a>=n.naturalWidth?n.naturalWidth=a:n.naturalWidth=n.naturalWidth}))}setupColumnWidth(){if(this.options.layout==="ratio"){let e=m.style(this.datatableWrapper,"width");if(this.options.serialNoColumn){let a=this.datamanager.getColumnById("_rowIndex");e=e-a.width-1}if(this.options.checkboxColumn){let a=this.datamanager.getColumnById("_checkbox");e=e-a.width-1}let t=this.datamanager.getColumns().map(a=>a.id==="_rowIndex"||a.id==="_checkbox"?0:(a.width||(a.width=1),a.ratioWidth=parseInt(a.width,10),a.ratioWidth)).reduce((a,d)=>a+d),n=e/t;this.datamanager.getColumns().map(a=>{a.id==="_rowIndex"||a.id==="_checkbox"||(a.width=Math.floor(n*a.ratioWidth)-1)})}else this.datamanager.getColumns().map(e=>{e.width||(e.width=e.naturalWidth),e.id==="_rowIndex"&&(e.width=this.getRowIndexColumnWidth()),e.width<this.options.minimumColumnWidth&&(e.width=this.options.minimumColumnWidth)})}distributeRemainingWidth(){if(this.options.layout!=="fluid")return;let e=m.style(this.instance.datatableWrapper,"width"),t=m(".dt-row",this.bodyScrollable),n=e;if(t)n=m.style(t,"width");else{let h=m(".dt-row",this.instance.header);n=Array.from(h.children).map(p=>p.offsetWidth).reduce((p,y)=>p+y,0)}let a=this.datamanager.getColumns().filter(h=>h.resizable),d=(e-n)/a.length;a.map(h=>{let f=m.style(this.getColumnHeaderElement(h.colIndex),"width"),p=Math.floor(f+d)-2;this.datamanager.updateColumn(h.colIndex,{width:p})})}setColumnStyle(){this.datamanager.getColumns().map(e=>{e.align||(e.align="left"),["left","center","right"].includes(e.align)||(e.align="left"),this.setStyle(`.dt-cell--col-${e.colIndex}`,{"text-align":e.align}),this.columnmanager.setColumnHeaderWidth(e.colIndex),this.columnmanager.setColumnWidth(e.colIndex)})}refreshColumnWidth(){this.datamanager.getColumns().map(e=>{this.columnmanager.setColumnHeaderWidth(e.colIndex),this.columnmanager.setColumnWidth(e.colIndex)})}setBodyStyle(){let e=m.style(this.datatableWrapper,"width"),t=m(".dt-row",this.bodyScrollable);if(!t)return;let n=m.style(t,"width"),a=e>n?n+10:e;m.style(this.bodyScrollable,{width:a+"px"}),m.removeStyle(this.bodyScrollable,"height");let d=m.getStyle(this.bodyScrollable,"height"),h=(this.bodyRenderer.hyperlist||{})._scrollHeight||1/0,f=m.hasHorizontalOverflow(this.bodyScrollable),p;h<d&&(p=h,f&&(p+=m.scrollbarSize()),m.style(this.bodyScrollable,{height:p+"px"})),this.bodyScrollable.scrollHeight-this.bodyScrollable.offsetHeight<m.scrollbarSize()&&m.style(this.bodyScrollable,{overflowY:"hidden"}),this.options.layout==="fluid"&&m.style(this.bodyScrollable,{overflowX:"hidden"})}getColumnHeaderElement(e){return e=+e,e<0?null:m(`.dt-cell--col-${e}`,this.header)}getRowIndexColumnWidth(){let e=this.datamanager.getRowCount(),t=22;return m.measureTextWidth(e+"")+t}},fs={13:"enter",91:"meta",16:"shift",17:"ctrl",18:"alt",37:"left",38:"up",39:"right",40:"down",9:"tab",27:"esc",67:"c",70:"f",86:"v"},bn=class{constructor(e){this.listeners={},m.on(e,"keydown",this.handler.bind(this))}handler(e){let t=fs[e.keyCode];e.shiftKey&&t!=="shift"&&(t="shift+"+t),(e.ctrlKey&&t!=="ctrl"||e.metaKey&&t!=="meta")&&(t="ctrl+"+t);let n=this.listeners[t];if(n&&n.length>0)for(let a of n){let d=a(e);(d===void 0||d===!0)&&e.preventDefault()}}on(e,t){e.split(",").map(a=>a.trim()).map(a=>{this.listeners[a]=this.listeners[a]||[],this.listeners[a].push(t)})}},ps={"Sort Ascending":"Sort Ascending","Sort Descending":"Sort Descending","Reset sorting":"Reset sorting","Remove column":"Remove column","No Data":"No Data","{count} cells copied":{1:"{count} cell copied",default:"{count} cells copied"},"{count} rows selected":{1:"{count} row selected",default:"{count} rows selected"}},ms={"Sort Ascending":"Aufsteigend sortieren","Sort Descending":"Absteigend sortieren","Reset sorting":"Sortierung zur\xFCcksetzen","Remove column":"Spalte entfernen","No Data":"Keine Daten","{count} cells copied":{1:"{count} Zelle kopiert",default:"{count} Zellen kopiert"},"{count} rows selected":{1:"{count} Zeile ausgew\xE4hlt",default:"{count} Zeilen ausgew\xE4hlt"}},gs={"Sort Ascending":"Trier par ordre croissant","Sort Descending":"Trier par ordre d\xE9croissant","Reset sorting":"R\xE9initialiser le tri","Remove column":"Supprimer colonne","No Data":"Pas de donn\xE9es","{count} cells copied":{1:"{count} cellule copi\xE9e",default:"{count} cellules copi\xE9es"},"{count} rows selected":{1:"{count} ligne s\xE9lectionn\xE9e",default:"{count} lignes s\xE9lectionn\xE9es"}},vs={"Sort Ascending":"Ordinamento ascendente","Sort Descending":"Ordinamento decrescente","Reset sorting":"Azzeramento ordinamento","Remove column":"Rimuovi colonna","No Data":"Nessun dato","{count} cells copied":{1:"Copiato {count} cella",default:"{count} celle copiate"},"{count} rows selected":{1:"{count} linea selezionata",default:"{count} linee selezionate"}};function ws(){return{en:ps,de:ms,fr:gs,it:vs}}var _n=class{constructor(e){this.language=e,this.translations=ws()}addTranslations(e){this.translations=Object.assign(this.translations,e)}translate(e,t){let n=this.translations[this.language]&&this.translations[this.language][e]||e;return typeof n=="object"&&(n=t&&t.count?this.getPluralizedTranslation(n,t.count):e),cs(n,t||{})}getPluralizedTranslation(e,t){return e[t]||e.default}};function bs(s,e,t){let n=[];if(Object.keys(e).length===0)return s.map(a=>a.meta.rowIndex);for(let a in e){let d=e[a],f=(n.length?n.map(w=>s[w]):s).map(w=>w[a]),p=ys(d),y=_s(s,t,p);y?n=y(p.text,f):n=f.map(w=>w.rowIndex)}return n}function _s(s,e,t){let n=p=>{let y=Ye.getCustomCellFormatter(p),w=s[p.rowIndex];return e&&e.data&&e.data.length&&(w=e.data[p.rowIndex]),y&&p.content?(p.html=y(p.content,s[p.rowIndex],p.column,w,t),Kn(p.html)):p.content||""},a=p=>String(Kn(p.html||"")||n(p)).toLowerCase(),d=p=>parseFloat(p.content),h=(p,y)=>{if(p.column.compareValue){let x=p.column.compareValue(p,y);if(x&&Array.isArray(x))return x}let w=d(p);return isNaN(w)?[a(p),y]:[w,y]};return{contains(p,y){return y.filter(w=>{let x=a(w),R=(p||"").toLowerCase();return!R||x.includes(R)}).map(w=>w.rowIndex)},greaterThan(p,y){return y.filter(w=>{let[x,R]=h(w,p);return x>R}).map(w=>w.rowIndex)},lessThan(p,y){return y.filter(w=>{let[x,R]=h(w,p);return x<R}).map(w=>w.rowIndex)},equals(p,y){return y.filter(w=>parseFloat(w.content)===p).map(w=>w.rowIndex)},notEquals(p,y){return y.filter(w=>parseFloat(w.content)!==p).map(w=>w.rowIndex)},range(p,y){return y.filter(w=>{let x=h(w,p[0]),R=h(w,p[1]),I=x[0];return I>=x[1]&&I<=R[1]}).map(w=>w.rowIndex)},containsNumber(p,y){return y.filter(w=>{let x=parseFloat(p,10),R=p,I=d(w),C=a(w);return x===I||C.includes(R)}).map(w=>w.rowIndex)}}[t.type]}function ys(s=""){if(s.length===0)return{};let e=s;return[">","<","="].includes(e[0])?e=s.slice(1):e.startsWith("!=")&&(e=s.slice(2)),s.startsWith(">")&&e?{type:"greaterThan",text:e.trim()}:s.startsWith("<")&&e?{type:"lessThan",text:e.trim()}:s.startsWith("=")&&ft(e)?{type:"equals",text:Number(s.slice(1).trim())}:ft(e)?{type:"containsNumber",text:e}:s.startsWith("!=")&&ft(e)?{type:"notEquals",text:Number(s.slice(2).trim())}:s.split(":").length===2&&s.split(":").every(t=>ft(t.trim()))?(e=s.split(":"),{type:"range",text:e.map(t=>t.trim())}):{type:"contains",text:e.toLowerCase()}}function Cs(s){return{columns:[],data:[],dropdownButton:pn.chevronDown,headerDropdown:[{label:s.translate("Sort Ascending"),action:function(e){this.sortColumn(e.colIndex,"asc")}},{label:s.translate("Sort Descending"),action:function(e){this.sortColumn(e.colIndex,"desc")}},{label:s.translate("Reset sorting"),action:function(e){this.sortColumn(e.colIndex,"none")}},{label:s.translate("Remove column"),action:function(e){this.removeColumn(e.colIndex)}}],events:{onRemoveColumn(e){},onSwitchColumn(e,t){},onSortColumn(e){},onCheckRow(e){},onDestroy(){}},hooks:{columnTotal:null},sortIndicator:{asc:"\u2191",desc:"\u2193",none:""},overrideComponents:{},filterRows:bs,freezeMessage:"",getEditor:null,serialNoColumn:!0,checkboxColumn:!1,clusterize:!0,logs:!1,layout:"fixed",noDataMessage:s.translate("No Data"),cellHeight:40,minimumColumnWidth:30,inlineFilters:!1,treeView:!1,checkedRowStatus:!0,dynamicRowHeight:!1,pasteFromClipboard:!1,showTotalRow:!1,direction:"ltr",disableReorderColumn:!1}}var Ss={DataManager:fn,CellManager:Ye,ColumnManager:mn,RowManager:gn,BodyRenderer:vn,Style:wn,Keyboard:bn},Fe=class{constructor(e,t){if(Fe.instances++,typeof e=="string"&&(e=document.querySelector(e)),this.wrapper=e,!(this.wrapper instanceof HTMLElement))throw new Error("Invalid argument given for `wrapper`");this.initializeTranslations(t),this.setDefaultOptions(),this.buildOptions(t),this.prepare(),this.initializeComponents(),this.options.data&&(this.refresh(),this.columnmanager.applyDefaultSortOrder())}initializeTranslations(e){this.language=e.language||"en",this.translationManager=new _n(this.language),e.translations&&this.translationManager.addTranslations(e.translations)}setDefaultOptions(){this.DEFAULT_OPTIONS=Cs(this)}buildOptions(e){this.options=this.options||{},this.options=Object.assign({},this.DEFAULT_OPTIONS,this.options||{},e),e.headerDropdown=e.headerDropdown||[],this.options.headerDropdown=[...this.DEFAULT_OPTIONS.headerDropdown,...e.headerDropdown],this.events=Object.assign({},this.DEFAULT_OPTIONS.events,this.options.events||{},e.events||{}),this.fireEvent=this.fireEvent.bind(this)}prepare(){this.prepareDom(),this.unfreeze()}initializeComponents(){let e=Object.assign({},Ss,this.options.overrideComponents),{Style:t,Keyboard:n,DataManager:a,RowManager:d,ColumnManager:h,CellManager:f,BodyRenderer:p}=e;this.style=new t(this),this.keyboard=new n(this.wrapper),this.datamanager=new a(this.options),this.rowmanager=new d(this),this.columnmanager=new h(this),this.cellmanager=new f(this),this.bodyRenderer=new p(this)}prepareDom(){this.wrapper.innerHTML=`
            <div class="datatable" dir="${this.options.direction}">
                <div class="dt-header"></div>
                <div class="dt-scrollable"></div>
                <div class="dt-footer"></div>
                <div class="dt-freeze">
                    <span class="dt-freeze__message">
                        ${this.options.freezeMessage}
                    </span>
                </div>
                <div class="dt-toast"></div>
                <div class="dt-dropdown-container"></div>
                <textarea class="dt-paste-target"></textarea>
            </div>
        `,this.datatableWrapper=m(".datatable",this.wrapper),this.header=m(".dt-header",this.wrapper),this.footer=m(".dt-footer",this.wrapper),this.bodyScrollable=m(".dt-scrollable",this.wrapper),this.freezeContainer=m(".dt-freeze",this.wrapper),this.toastMessage=m(".dt-toast",this.wrapper),this.pasteTarget=m(".dt-paste-target",this.wrapper),this.dropdownContainer=m(".dt-dropdown-container",this.wrapper)}refresh(e,t){this.datamanager.init(e,t),this.render(),this.setDimensions()}destroy(){this.wrapper.innerHTML="",this.style.destroy(),this.fireEvent("onDestroy")}appendRows(e){this.datamanager.appendRows(e),this.rowmanager.refreshRows()}refreshRow(e,t){this.rowmanager.refreshRow(e,t)}render(){this.renderHeader(),this.renderBody()}renderHeader(){this.columnmanager.renderHeader()}renderBody(){this.bodyRenderer.render()}setDimensions(){this.style.setDimensions()}showToastMessage(e,t){this.bodyRenderer.showToastMessage(e,t)}clearToastMessage(){this.bodyRenderer.clearToastMessage()}getColumn(e){return this.datamanager.getColumn(e)}getColumns(){return this.datamanager.getColumns()}getRows(){return this.datamanager.getRows()}getCell(e,t){return this.datamanager.getCell(e,t)}getColumnHeaderElement(e){return this.columnmanager.getColumnHeaderElement(e)}getViewportHeight(){return this.viewportHeight||(this.viewportHeight=m.style(this.bodyScrollable,"height")),this.viewportHeight}sortColumn(e,t){this.columnmanager.sortColumn(e,t)}removeColumn(e){this.columnmanager.removeColumn(e)}scrollToLastColumn(){this.datatableWrapper.scrollLeft=9999}freeze(){m.style(this.freezeContainer,{display:""})}unfreeze(){m.style(this.freezeContainer,{display:"none"})}updateOptions(e){this.buildOptions(e)}fireEvent(e,...t){let n=[...this._internalEventHandlers[e]||[],this.events[e]].filter(Boolean);for(let a of n)a.apply(this,t)}on(e,t){this._internalEventHandlers=this._internalEventHandlers||{},this._internalEventHandlers[e]=this._internalEventHandlers[e]||[],this._internalEventHandlers[e].push(t)}log(){this.options.logs&&console.log.apply(console,arguments)}translate(e,t){return this.translationManager.translate(e,t)}};Fe.instances=0;var xs="frappe-datatable",Es="0.0.0-development",Rs="A modern datatable library for the web",Ts="dist/frappe-datatable.cjs.js",Is="dist/frappe-datatable.min.js",Ds="dist/frappe-datatable.min.js",$s={start:"yarn run dev",build:"rollup -c && NODE_ENV=production rollup -c",dev:"rollup -c -w","cy:server":"http-server -p 8989","cy:open":"cypress open","cy:run":"cypress run",test:"start-server-and-test cy:server http://localhost:8989 cy:run","test-local":"start-server-and-test cy:server http://localhost:8989 cy:open","travis-deploy-once":"travis-deploy-once","semantic-release":"semantic-release",lint:"eslint src","lint-and-build":"yarn lint && yarn build",commit:"npx git-cz"},Ms=["dist","src"],Hs={autoprefixer:"^9.0.0",chai:"3.5.0",cypress:"^9.2.0","cz-conventional-changelog":"^2.1.0",deepmerge:"^2.0.1",eslint:"^5.0.1","eslint-config-airbnb":"^16.1.0","eslint-config-airbnb-base":"^12.1.0","eslint-plugin-import":"^2.11.0","http-server":"^0.11.1",mocha:"3.3.0","postcss-custom-properties":"^7.0.0","postcss-nested":"^3.0.0",rollup:"^0.59.4","rollup-plugin-commonjs":"^8.3.0","rollup-plugin-eslint":"^4.0.0","rollup-plugin-json":"^2.3.0","rollup-plugin-node-resolve":"^3.0.3","rollup-plugin-postcss":"^1.2.8","rollup-plugin-uglify-es":"^0.0.1","semantic-release":"^17.1.1","start-server-and-test":"^1.4.1","travis-deploy-once":"^5.0.1"},ks={type:"git",url:"https://github.com/frappe/datatable.git"},Os=["datatable","data","grid","table"],Ns="Faris Ansari",As="MIT",Ls={url:"https://github.com/frappe/datatable/issues"},Fs="https://frappe.io/datatable",Ps={hyperlist:"^1.0.0-beta",lodash:"^4.17.5",sortablejs:"^1.7.0"},Ws={commitizen:{path:"cz-conventional-changelog"}},js={name:xs,version:Es,description:Rs,main:Ts,unpkg:Is,jsdelivr:Ds,scripts:$s,files:Ms,devDependencies:Hs,repository:ks,keywords:Os,author:Ns,license:As,bugs:Ls,homepage:Fs,dependencies:Ps,config:Ws};Fe.__version__=js.version;ti.exports=Fe});var ii=vi(ni());frappe.provide("frappe.data_import");frappe.data_import.DataExporter=class{constructor(e,t){this.doctype=e,this.exporting_for=t,frappe.model.with_doctype(e,()=>{this.make_dialog()})}make_dialog(){this.dialog=new frappe.ui.Dialog({title:__("Export Data"),fields:[{fieldtype:"Select",fieldname:"file_type",label:__("File Type"),options:["Excel","CSV"],default:"CSV"},{fieldtype:"Select",fieldname:"export_records",label:__("Export Type"),options:[{label:__("All Records"),value:"all"},{label:__("Filtered Records"),value:"by_filter"},{label:__("5 Records"),value:"5_records"},{label:__("Blank Template"),value:"blank_template"}],default:this.exporting_for==="Insert New Records"?"blank_template":"all",change:()=>{this.update_record_count_message()}},{fieldtype:"HTML",fieldname:"filter_area",depends_on:e=>e.export_records==="by_filter"},{fieldtype:"Section Break"},{fieldtype:"HTML",fieldname:"select_all_buttons"},{label:__(this.doctype),fieldname:this.doctype,fieldtype:"MultiCheck",columns:2,on_change:()=>this.update_primary_action(),options:this.get_multicheck_options(this.doctype)},...frappe.meta.get_table_fields(this.doctype).map(e=>{let t=e.options,n=e.fieldname;return{label:e.reqd?__("{0} ({1}) (1 row mandatory)",[__(e.label||e.fieldname),__(t)]):__("{0} ({1})",[__(e.label||e.fieldname),__(t)]),fieldname:n,fieldtype:"MultiCheck",columns:2,on_change:()=>this.update_primary_action(),options:this.get_multicheck_options(t,n)}})],primary_action_label:__("Export"),primary_action:e=>this.export_records(e),on_page_show:()=>this.select_mandatory()}),this.make_filter_area(),this.make_select_all_buttons(),this.update_record_count_message(),this.dialog.show()}export_records(){let e="/api/method/frappe.core.doctype.data_import.data_import.download_template",t=this.dialog.fields.filter(h=>h.fieldtype==="MultiCheck").map(h=>h.fieldname),n=this.dialog.get_values(),a=Object.assign({},n);for(let h in a)t.includes(h)||delete a[h];let d=null;n.export_records==="by_filter"&&(d=this.get_filters()),open_url_post(e,{doctype:this.doctype,file_type:n.file_type,export_records:n.export_records,export_fields:a,export_filters:d})}make_filter_area(){this.filter_group=new frappe.ui.FilterGroup({parent:this.dialog.get_field("filter_area").$wrapper,doctype:this.doctype,on_change:()=>{this.update_record_count_message()}})}make_select_all_buttons(){let e=this.exporting_for==="Insert New Records",t=e?__("Select Fields To Insert"):__("Select Fields To Update"),n=$(`
			<div class="mb-3">
				<h6 class="form-section-heading uppercase">${t}</h6>
				<button class="btn btn-default btn-xs" data-action="select_all">
					${__("Select All")}
				</button>
				${e?`<button class="btn btn-default btn-xs" data-action="select_mandatory">
					${__("Select Mandatory")}
				</button>`:""}
				<button class="btn btn-default btn-xs" data-action="unselect_all">
					${__("Unselect All")}
				</button>
			</div>
		`);frappe.utils.bind_actions_with_object(n,this),this.dialog.get_field("select_all_buttons").$wrapper.html(n)}select_all(){this.dialog.$wrapper.find(":checkbox").prop("checked",!0).trigger("change")}select_mandatory(){let e=frappe.meta.get_table_fields(this.doctype).filter(a=>a.reqd).map(a=>a.fieldname);e.push(this.doctype);let t=this.dialog.fields.filter(a=>a.fieldtype==="MultiCheck").map(a=>a.fieldname).filter(a=>e.includes(a)),n=[].concat(...t.map(a=>this.dialog.get_field(a).options.filter(h=>h.danger).map(h=>h.$checkbox.find("input").get(0))));this.unselect_all(),$(n).prop("checked",!0).trigger("change")}unselect_all(){let e=this.dialog.get_value("exporting_for")=="Update Existing Records";this.dialog.$wrapper.find(`:checkbox${e?":not([data-unit=name])":""}`).prop("checked",!1).trigger("change")}update_record_count_message(){let e=this.dialog.get_value("export_records");({all:()=>frappe.db.count(this.doctype),by_filter:()=>frappe.db.count(this.doctype,{filters:this.get_filters()}),blank_template:()=>Promise.resolve(0),"5_records":()=>Promise.resolve(5)})[e]().then(n=>{let a="";n=parseInt(n,10),n===0?a=__("No records will be exported"):n===1?a=__("1 record will be exported"):a=__("{0} records will be exported",[n]),this.dialog.set_df_property("export_records","description",a),this.update_primary_action(n)})}update_primary_action(e){let t=this.dialog.get_primary_btn();if(e!=null){let n="";e===0?n=__("Export"):e===1?n=__("Export 1 record"):n=__("Export {0} records",[e]),t.html(n)}else{let n=this.dialog.get_value(this.doctype);t.prop("disabled",n.length===0)}}get_filters(){return this.filter_group.get_filters().map(e=>e.slice(0,4))}get_multicheck_options(e,t=null){this.column_map||(this.column_map=Cn(this.doctype));let n=null,a=frappe.get_meta(e);if(a.autoname&&a.autoname.startsWith("field:")){let f=a.autoname.slice(6);n=frappe.meta.get_field(e,f)}let d=t?this.column_map[t]:this.column_map[e],h=f=>!!(f.reqd&&this.exporting_for=="Insert New Records"||n&&f.fieldname==n.fieldname||f.fieldname==="name");return d.filter(f=>!(n&&f.fieldname==="name")).map(f=>({label:__(f.label),value:f.fieldname,danger:h(f),checked:!1,description:`${f.fieldname} ${f.reqd?__("(Mandatory)"):""}`}))}};function Cn(s){let e={},t=d=>{let h=!0;return frappe.model.no_value_type.includes(d.fieldtype)&&(h=!1),["lft","rgt"].includes(d.fieldname)&&(h=!1),d.is_virtual&&(h=!1),h},n=frappe.meta.get_docfields(s).filter(t);return e[s]=[{label:__("ID"),fieldname:"name",fieldtype:"Data",reqd:1}].concat(n),frappe.meta.get_table_fields(s).forEach(d=>{let h=d.options,f=frappe.meta.get_docfields(h).filter(t);e[d.fieldname]=[{label:__("ID"),fieldname:"name",fieldtype:"Data",reqd:1}].concat(f)}),e}frappe.provide("frappe.data_import");frappe.data_import.ImportPreview=class{constructor({wrapper:e,doctype:t,preview_data:n,frm:a,import_log:d,events:h={}}){this.wrapper=e,this.doctype=t,this.preview_data=n,this.events=h,this.import_log=d,this.frm=a,frappe.model.with_doctype(t,()=>{this.refresh()})}refresh(){this.data=this.preview_data.data,this.make_wrapper(),this.prepare_columns(),this.prepare_data(),this.render_datatable(),this.setup_styles(),this.add_actions()}make_wrapper(){this.wrapper.html(`
			<div>
				<div class="row">
					<div class="col-sm-12">
						<div class="table-actions margin-bottom">
						</div>
						<div class="table-preview border"></div>
						<div class="table-message"></div>
					</div>
				</div>
			</div>
		`),frappe.utils.bind_actions_with_object(this.wrapper,this),this.$table_preview=this.wrapper.find(".table-preview")}prepare_columns(){this.columns=this.preview_data.columns.map((e,t)=>{let n=e.df,a=120;if(e.header_title==="Sr. No")return{id:"srno",name:"Sr. No",content:"Sr. No",editable:!1,focusable:!1,align:"left",width:60};if(e.skip_import){let f=`<button class="btn btn-xs" data-action="show_column_warning" data-col="${t}">
					<i class="octicon octicon-stop"></i></button>`;e.df||(a+=50);let p=`<span class="indicator red">
					${e.header_title||`<i>${__("Untitled Column")}</i>`}
					${e.df?"":f}
				</span>`;return{id:frappe.utils.get_random(6),name:e.header_title||(n?n.label:"Untitled Column"),content:p,skip_import:!0,editable:!1,focusable:!1,align:"left",width:a,format:y=>`<div class="text-muted">${y}</div>`}}let d=e.date_format?e.date_format.replace("%Y","yyyy").replace("%y","yy").replace("%m","mm").replace("%d","dd").replace("%H","HH").replace("%M","mm").replace("%S","ss").replace("%b","Mon"):null,h=`<span class="indicator green">
				${e.header_title||n.label}
				${d?`(${d})`:""}
			</span>`;return{id:n.fieldname,name:e.header_title,content:h,df:n,editable:!1,align:"left",width:a}})}prepare_data(){this.data=this.data.map(e=>e.map(t=>t==null?"":t))}render_datatable(){this.datatable&&this.datatable.destroy(),this.datatable=new ii.default(this.$table_preview.get(0),{data:this.data,columns:this.columns,layout:this.columns.length<10?"fluid":"fixed",cellHeight:35,language:frappe.boot.lang,translations:frappe.utils.datatable.get_translations(),serialNoColumn:!1,checkboxColumn:!1,noDataMessage:__("No Data"),disableReorderColumn:!0});let{max_rows_exceeded:e,max_rows_in_preview:t,total_number_of_rows:n}=this.preview_data;if(e){let a=[t,n];this.wrapper.find(".table-message").html(`
				<div class="text-muted margin-top text-medium">
				${__("Showing only first {0} rows out of {1}",a)}
				</div>
			`)}this.data.length===0&&this.datatable.style.setStyle(".dt-scrollable",{height:"auto"}),this.datatable.style.setStyle(".dt-dropdown",{display:"none"})}setup_styles(){this.datatable.style.setStyle("svg.import-success",{width:"16px",fill:frappe.ui.color.get_color_shade("green","dark")});let e=this.datatable.getRows().filter(t=>this.is_row_imported(t)).map(t=>t.meta.rowIndex).map(t=>`.dt-row-${t} .dt-cell`).join(",");this.datatable.style.setStyle(e,{pointerEvents:"none",backgroundColor:frappe.ui.color.get_color_shade("gray","extra-light"),color:frappe.ui.color.get_color_shade("gray","dark")})}add_actions(){let t=[{label:__("Map Columns"),handler:"show_column_mapper",condition:this.frm.doc.status!=="Success"},{label:__("Export Errored Rows"),handler:"export_errored_rows",condition:this.import_log.filter(n=>!n.success).length>0},{label:__("Show Warnings"),handler:"show_warnings",condition:this.preview_data.warnings.length>0}].filter(n=>n.condition).map(n=>`<button class="btn btn-sm btn-default" data-action="${n.handler}">
					${n.label}
				</button>
			`);this.wrapper.find(".table-actions").html(t)}export_errored_rows(){this.frm.trigger("export_errored_rows")}show_warnings(){this.frm.scroll_to_field("import_warnings")}show_column_warning(e,t){let n=this.frm.get_field("import_warnings").$wrapper.find(`[data-col=${t.data("col")}]`);frappe.utils.scroll_to(n,!0,30)}show_column_mapper(){let e=Cn(this.doctype),t=[],n=this.preview_data.columns.map((f,p)=>{let y=f.df;if(f.header_title==="Sr. No")return[];let w;return y?f.map_to_field?w=f.map_to_field:f.is_child_table_field?w=`${f.child_table_df.fieldname}.${y.fieldname}`:w=y.fieldname:w=null,[{label:"",fieldtype:"Data",default:f.header_title,fieldname:`Column ${p}`,read_only:1},{fieldtype:"Column Break"},{fieldtype:"Autocomplete",fieldname:p,label:"",max_items:1/0,options:[{label:__("Don't Import"),value:"Don't Import"}].concat(zs(this.doctype,e)),default:w||"Don't Import",change(){t.push(p)}},{fieldtype:"Section Break"}]});n=n.reduce((f,p)=>[...f,...p]);let d=[(this.frm.doc.import_file||"").split("/").pop().bold(),this.doctype.bold()];n=[{fieldtype:"HTML",fieldname:"heading",options:`
					<div class="margin-top text-muted">
					${__("Map columns from {0} to fields in {1}",d)}
					</div>
				`},{fieldtype:"Section Break"}].concat(n);let h=new frappe.ui.Dialog({title:__("Map Columns"),fields:n,primary_action:f=>{let p={};t.map(y=>{let w=y-1;p[w]=f[y]}),t.length>0&&this.events.remap_column(p),h.hide()}});h.$body.addClass("map-columns"),h.show()}is_row_imported(e){let t=e[0].content;return this.import_log.find(n=>n.success&&JSON.parse(n.row_indexes||"[]").includes(t))}};function zs(s,e){let t=[s];return frappe.meta.get_table_fields(s).forEach(n=>{t.push(n.fieldname)}),[].concat(...t.map(n=>e[n].map(a=>{let d=__(a.label),h=a.fieldname;if(s!==n){let f=frappe.meta.get_docfield(s,n);d=`${__(a.label)} (${__(f.label)})`,h=`${f.fieldname}.${a.fieldname}`}return{label:d,value:h,description:h}})))}})();
/*! Sortable 1.15.0 - MIT | git://github.com/SortableJS/Sortable.git */
//# sourceMappingURL=data_import_tools.bundle.QAPQCLPV.js.map

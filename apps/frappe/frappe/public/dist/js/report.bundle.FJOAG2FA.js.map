{
  "version": 3,
  "sources": ["../../../../../apps/frappe/node_modules/sortablejs/Sortable.min.js", "../../../../../apps/frappe/node_modules/frappe-datatable/dist/frappe-datatable.cjs.js", "../../../../../apps/frappe/frappe/public/js/frappe/views/reports/report_factory.js", "../../../../../apps/frappe/frappe/public/js/frappe/views/reports/report_view.js", "../../../../../apps/frappe/frappe/public/js/frappe/views/reports/query_report.js", "frappe-html:/home/kiranmai/Hilltop/frappe-bench/apps/frappe/frappe/public/js/frappe/views/reports/print_grid.html", "frappe-html:/home/kiranmai/Hilltop/frappe-bench/apps/frappe/frappe/public/js/frappe/views/reports/print_tree.html", "frappe-html:/home/kiranmai/Hilltop/frappe-bench/apps/frappe/frappe/public/js/frappe/ui/group_by/group_by.html", "../../../../../apps/frappe/frappe/public/js/frappe/ui/group_by/group_by.js", "../../../../../apps/frappe/frappe/public/js/frappe/views/reports/report_utils.js"],
  "sourcesContent": ["/*! Sortable 1.15.0 - MIT | git://github.com/SortableJS/Sortable.git */\n!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=t||self).Sortable=e()}(this,function(){\"use strict\";function e(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function M(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?e(Object(i),!0).forEach(function(t){var e,n;e=o,t=i[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))})}return o}function o(t){return(o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,o=arguments[e];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function i(t,e){if(null==t)return{};var n,o=function(t,e){if(null==t)return{};for(var n,o={},i=Object.keys(t),r=0;r<i.length;r++)n=i[r],0<=e.indexOf(n)||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),r=0;r<i.length;r++)n=i[r],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n]);return o}function r(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if(\"undefined\"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t[\"@@iterator\"])return Array.from(t)}(t)||function(t,e){if(t){if(\"string\"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Map\"===(n=\"Object\"===n&&t.constructor?t.constructor.name:n)||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function t(t){if(\"undefined\"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var y=t(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i),w=t(/Edge/i),s=t(/firefox/i),u=t(/safari/i)&&!t(/chrome/i)&&!t(/android/i),n=t(/iP(ad|od|hone)/i),c=t(/chrome/i)&&t(/android/i),d={capture:!1,passive:!1};function h(t,e,n){t.addEventListener(e,n,!y&&d)}function f(t,e,n){t.removeEventListener(e,n,!y&&d)}function p(t,e){if(e&&(\">\"===e[0]&&(e=e.substring(1)),t))try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return}}function N(t,e,n,o){if(t){n=n||document;do{if(null!=e&&(\">\"!==e[0]||t.parentNode===n)&&p(t,e)||o&&t===n)return t}while(t!==n&&(t=(i=t).host&&i!==document&&i.host.nodeType?i.host:i.parentNode))}var i;return null}var g,m=/\\s+/g;function I(t,e,n){var o;t&&e&&(t.classList?t.classList[n?\"add\":\"remove\"](e):(o=(\" \"+t.className+\" \").replace(m,\" \").replace(\" \"+e+\" \",\" \"),t.className=(o+(n?\" \"+e:\"\")).replace(m,\" \")))}function P(t,e,n){var o=t&&t.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,\"\"):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];o[e=!(e in o||-1!==e.indexOf(\"webkit\"))?\"-webkit-\"+e:e]=n+(\"string\"==typeof n?\"\":\"px\")}}function v(t,e){var n=\"\";if(\"string\"==typeof t)n=t;else do{var o=P(t,\"transform\")}while(o&&\"none\"!==o&&(n=o+\" \"+n),!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function b(t,e,n){if(t){var o=t.getElementsByTagName(e),i=0,r=o.length;if(n)for(;i<r;i++)n(o[i],i);return o}return[]}function O(){var t=document.scrollingElement;return t||document.documentElement}function k(t,e,n,o,i){if(t.getBoundingClientRect||t===window){var r,a,l,s,c,u,d=t!==window&&t.parentNode&&t!==O()?(a=(r=t.getBoundingClientRect()).top,l=r.left,s=r.bottom,c=r.right,u=r.height,r.width):(l=a=0,s=window.innerHeight,c=window.innerWidth,u=window.innerHeight,window.innerWidth);if((e||n)&&t!==window&&(i=i||t.parentNode,!y))do{if(i&&i.getBoundingClientRect&&(\"none\"!==P(i,\"transform\")||n&&\"static\"!==P(i,\"position\"))){var h=i.getBoundingClientRect();a-=h.top+parseInt(P(i,\"border-top-width\")),l-=h.left+parseInt(P(i,\"border-left-width\")),s=a+r.height,c=l+r.width;break}}while(i=i.parentNode);return o&&t!==window&&(o=(e=v(i||t))&&e.a,t=e&&e.d,e&&(s=(a/=t)+(u/=t),c=(l/=o)+(d/=o))),{top:a,left:l,bottom:s,right:c,width:d,height:u}}}function R(t,e,n){for(var o=A(t,!0),i=k(t)[e];o;){var r=k(o)[n];if(!(\"top\"===n||\"left\"===n?r<=i:i<=r))return o;if(o===O())break;o=A(o,!1)}return!1}function X(t,e,n,o){for(var i=0,r=0,a=t.children;r<a.length;){if(\"none\"!==a[r].style.display&&a[r]!==Bt.ghost&&(o||a[r]!==Bt.dragged)&&N(a[r],n.draggable,t,!1)){if(i===e)return a[r];i++}r++}return null}function Y(t,e){for(var n=t.lastElementChild;n&&(n===Bt.ghost||\"none\"===P(n,\"display\")||e&&!p(n,e));)n=n.previousElementSibling;return n||null}function B(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)\"TEMPLATE\"===t.nodeName.toUpperCase()||t===Bt.clone||e&&!p(t,e)||n++;return n}function E(t){var e=0,n=0,o=O();if(t)do{var i=v(t),r=i.a,i=i.d}while(e+=t.scrollLeft*r,n+=t.scrollTop*i,t!==o&&(t=t.parentNode));return[e,n]}function A(t,e){if(!t||!t.getBoundingClientRect)return O();var n=t,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=P(n);if(n.clientWidth<n.scrollWidth&&(\"auto\"==i.overflowX||\"scroll\"==i.overflowX)||n.clientHeight<n.scrollHeight&&(\"auto\"==i.overflowY||\"scroll\"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return O();if(o||e)return n;o=!0}}}while(n=n.parentNode);return O()}function D(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function S(e,n){return function(){var t;g||(1===(t=arguments).length?e.call(this,t[0]):e.apply(this,t),g=setTimeout(function(){g=void 0},n))}}function F(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function _(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function C(t,e){P(t,\"position\",\"absolute\"),P(t,\"top\",e.top),P(t,\"left\",e.left),P(t,\"width\",e.width),P(t,\"height\",e.height)}function T(t){P(t,\"position\",\"\"),P(t,\"top\",\"\"),P(t,\"left\",\"\"),P(t,\"width\",\"\"),P(t,\"height\",\"\")}var j=\"Sortable\"+(new Date).getTime();function x(){var e,o=[];return{captureAnimationState:function(){o=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){var e,n;\"none\"!==P(t,\"display\")&&t!==Bt.ghost&&(o.push({target:t,rect:k(t)}),e=M({},o[o.length-1].rect),!t.thisAnimationDuration||(n=v(t,!0))&&(e.top-=n.f,e.left-=n.e),t.fromRect=e)})},addAnimationState:function(t){o.push(t)},removeAnimationState:function(t){o.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n);return-1}(o,{target:t}),1)},animateAll:function(t){var c=this;if(!this.options.animation)return clearTimeout(e),void(\"function\"==typeof t&&t());var u=!1,d=0;o.forEach(function(t){var e=0,n=t.target,o=n.fromRect,i=k(n),r=n.prevFromRect,a=n.prevToRect,l=t.rect,s=v(n,!0);s&&(i.top-=s.f,i.left-=s.e),n.toRect=i,n.thisAnimationDuration&&D(r,i)&&!D(o,i)&&(l.top-i.top)/(l.left-i.left)==(o.top-i.top)/(o.left-i.left)&&(t=l,s=r,r=a,a=c.options,e=Math.sqrt(Math.pow(s.top-t.top,2)+Math.pow(s.left-t.left,2))/Math.sqrt(Math.pow(s.top-r.top,2)+Math.pow(s.left-r.left,2))*a.animation),D(i,o)||(n.prevFromRect=o,n.prevToRect=i,e=e||c.options.animation,c.animate(n,l,i,e)),e&&(u=!0,d=Math.max(d,e),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},e),n.thisAnimationDuration=e)}),clearTimeout(e),u?e=setTimeout(function(){\"function\"==typeof t&&t()},d):\"function\"==typeof t&&t(),o=[]},animate:function(t,e,n,o){var i,r;o&&(P(t,\"transition\",\"\"),P(t,\"transform\",\"\"),i=(r=v(this.el))&&r.a,r=r&&r.d,i=(e.left-n.left)/(i||1),r=(e.top-n.top)/(r||1),t.animatingX=!!i,t.animatingY=!!r,P(t,\"transform\",\"translate3d(\"+i+\"px,\"+r+\"px,0)\"),this.forRepaintDummy=t.offsetWidth,P(t,\"transition\",\"transform \"+o+\"ms\"+(this.options.easing?\" \"+this.options.easing:\"\")),P(t,\"transform\",\"translate3d(0,0,0)\"),\"number\"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout(function(){P(t,\"transition\",\"\"),P(t,\"transform\",\"\"),t.animated=!1,t.animatingX=!1,t.animatingY=!1},o))}}}var H=[],L={initializeByDefault:!0},K={mount:function(e){for(var t in L)!L.hasOwnProperty(t)||t in e||(e[t]=L[t]);H.forEach(function(t){if(t.pluginName===e.pluginName)throw\"Sortable: Cannot mount plugin \".concat(e.pluginName,\" more than once\")}),H.push(e)},pluginEvent:function(e,n,o){var t=this;this.eventCanceled=!1,o.cancel=function(){t.eventCanceled=!0};var i=e+\"Global\";H.forEach(function(t){n[t.pluginName]&&(n[t.pluginName][i]&&n[t.pluginName][i](M({sortable:n},o)),n.options[t.pluginName]&&n[t.pluginName][e]&&n[t.pluginName][e](M({sortable:n},o)))})},initializePlugins:function(n,o,i,t){for(var e in H.forEach(function(t){var e=t.pluginName;(n.options[e]||t.initializeByDefault)&&((t=new t(n,o,n.options)).sortable=n,t.options=n.options,n[e]=t,a(i,t.defaults))}),n.options){var r;n.options.hasOwnProperty(e)&&(void 0!==(r=this.modifyOption(n,e,n.options[e]))&&(n.options[e]=r))}},getEventProperties:function(e,n){var o={};return H.forEach(function(t){\"function\"==typeof t.eventProperties&&a(o,t.eventProperties.call(n[t.pluginName],e))}),o},modifyOption:function(e,n,o){var i;return H.forEach(function(t){e[t.pluginName]&&t.optionListeners&&\"function\"==typeof t.optionListeners[n]&&(i=t.optionListeners[n].call(e[t.pluginName],o))}),i}};function W(t){var e=t.sortable,n=t.rootEl,o=t.name,i=t.targetEl,r=t.cloneEl,a=t.toEl,l=t.fromEl,s=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[j]){var g,m=e.options,t=\"on\"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||y||w?(g=document.createEvent(\"Event\")).initEvent(o,!0,!0):g=new CustomEvent(o,{bubbles:!0,cancelable:!0}),g.to=a||n,g.from=l||n,g.item=i||n,g.clone=r,g.oldIndex=s,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=d,g.originalEvent=h,g.pullMode=f?f.lastPutMode:void 0;var v,b=M(M({},p),K.getEventProperties(o,e));for(v in b)g[v]=b[v];n&&n.dispatchEvent(g),m[t]&&m[t].call(e,g)}}function z(t,e){var n=(o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).evt,o=i(o,G);K.pluginEvent.bind(Bt)(t,e,M({dragEl:q,parentEl:V,ghostEl:Z,rootEl:$,nextEl:Q,lastDownEl:J,cloneEl:tt,cloneHidden:et,dragStarted:pt,putSortable:lt,activeSortable:Bt.active,originalEvent:n,oldIndex:nt,oldDraggableIndex:it,newIndex:ot,newDraggableIndex:rt,hideGhostForTarget:kt,unhideGhostForTarget:Rt,cloneNowHidden:function(){et=!0},cloneNowShown:function(){et=!1},dispatchSortableEvent:function(t){U({sortable:e,name:t,originalEvent:n})}},o))}var G=[\"evt\"];function U(t){W(M({putSortable:lt,cloneEl:tt,targetEl:q,rootEl:$,oldIndex:nt,oldDraggableIndex:it,newIndex:ot,newDraggableIndex:rt},t))}var q,V,Z,$,Q,J,tt,et,nt,ot,it,rt,at,lt,st,ct,ut,dt,ht,ft,pt,gt,mt,vt,bt,yt=!1,wt=!1,Et=[],Dt=!1,St=!1,_t=[],Ct=!1,Tt=[],xt=\"undefined\"!=typeof document,Ot=n,At=w||y?\"cssFloat\":\"float\",Mt=xt&&!c&&!n&&\"draggable\"in document.createElement(\"div\"),Nt=function(){if(xt){if(y)return!1;var t=document.createElement(\"x\");return t.style.cssText=\"pointer-events:auto\",\"auto\"===t.style.pointerEvents}}(),It=function(t,e){var n=P(t),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=X(t,0,e),r=X(t,1,e),a=i&&P(i),l=r&&P(r),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+k(i).width,t=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+k(r).width;if(\"flex\"===n.display)return\"column\"===n.flexDirection||\"column-reverse\"===n.flexDirection?\"vertical\":\"horizontal\";if(\"grid\"===n.display)return n.gridTemplateColumns.split(\" \").length<=1?\"vertical\":\"horizontal\";if(i&&a.float&&\"none\"!==a.float){e=\"left\"===a.float?\"left\":\"right\";return!r||\"both\"!==l.clear&&l.clear!==e?\"horizontal\":\"vertical\"}return i&&(\"block\"===a.display||\"flex\"===a.display||\"table\"===a.display||\"grid\"===a.display||o<=s&&\"none\"===n[At]||r&&\"none\"===n[At]&&o<s+t)?\"vertical\":\"horizontal\"},Pt=function(t){function l(r,a){return function(t,e,n,o){var i=t.options.group.name&&e.options.group.name&&t.options.group.name===e.options.group.name;if(null==r&&(a||i))return!0;if(null==r||!1===r)return!1;if(a&&\"clone\"===r)return r;if(\"function\"==typeof r)return l(r(t,e,n,o),a)(t,e,n,o);e=(a?t:e).options.group.name;return!0===r||\"string\"==typeof r&&r===e||r.join&&-1<r.indexOf(e)}}var e={},n=t.group;n&&\"object\"==o(n)||(n={name:n}),e.name=n.name,e.checkPull=l(n.pull,!0),e.checkPut=l(n.put),e.revertClone=n.revertClone,t.group=e},kt=function(){!Nt&&Z&&P(Z,\"display\",\"none\")},Rt=function(){!Nt&&Z&&P(Z,\"display\",\"\")};xt&&!c&&document.addEventListener(\"click\",function(t){if(wt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),wt=!1},!0);function Xt(t){if(q){t=t.touches?t.touches[0]:t;var e=(i=t.clientX,r=t.clientY,Et.some(function(t){var e=t[j].options.emptyInsertThreshold;if(e&&!Y(t)){var n=k(t),o=i>=n.left-e&&i<=n.right+e,e=r>=n.top-e&&r<=n.bottom+e;return o&&e?a=t:void 0}}),a);if(e){var n,o={};for(n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);o.target=o.rootEl=e,o.preventDefault=void 0,o.stopPropagation=void 0,e[j]._onDragOver(o)}}var i,r,a}function Yt(t){q&&q.parentNode[j]._isOutsideThisEl(t.target)}function Bt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw\"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(t));this.el=t,this.options=e=a({},e),t[j]=this;var n,o,i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?\">li\":\">*\",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return It(t,this.options)},ghostClass:\"sortable-ghost\",chosenClass:\"sortable-chosen\",dragClass:\"sortable-drag\",ignore:\"a, img\",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData(\"Text\",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:\"data-id\",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:\"sortable-fallback\",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Bt.supportPointer&&\"PointerEvent\"in window&&!u,emptyInsertThreshold:5};for(n in K.initializePlugins(this,t,i),i)n in e||(e[n]=i[n]);for(o in Pt(e),this)\"_\"===o.charAt(0)&&\"function\"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&Mt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?h(t,\"pointerdown\",this._onTapStart):(h(t,\"mousedown\",this._onTapStart),h(t,\"touchstart\",this._onTapStart)),this.nativeDraggable&&(h(t,\"dragover\",this),h(t,\"dragenter\",this)),Et.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),a(this,x())}function Ft(t,e,n,o,i,r,a,l){var s,c,u=t[j],d=u.options.onMove;return!window.CustomEvent||y||w?(s=document.createEvent(\"Event\")).initEvent(\"move\",!0,!0):s=new CustomEvent(\"move\",{bubbles:!0,cancelable:!0}),s.to=e,s.from=t,s.dragged=n,s.draggedRect=o,s.related=i||e,s.relatedRect=r||k(e),s.willInsertAfter=l,s.originalEvent=a,t.dispatchEvent(s),c=d?d.call(u,s,a):c}function jt(t){t.draggable=!1}function Ht(){Ct=!1}function Lt(t){return setTimeout(t,0)}function Kt(t){return clearTimeout(t)}Bt.prototype={constructor:Bt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(gt=null)},_getDirection:function(t,e){return\"function\"==typeof this.options.direction?this.options.direction.call(this,t,e,q):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,o=this.el,t=this.options,i=t.preventOnFilter,r=e.type,a=e.touches&&e.touches[0]||e.pointerType&&\"touch\"===e.pointerType&&e,l=(a||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=t.filter;if(!function(t){Tt.length=0;var e=t.getElementsByTagName(\"input\"),n=e.length;for(;n--;){var o=e[n];o.checked&&Tt.push(o)}}(o),!q&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||t.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!u||!l||\"SELECT\"!==l.tagName.toUpperCase())&&!((l=N(l,t.draggable,o,!1))&&l.animated||J===l)){if(nt=B(l),it=B(l,t.draggable),\"function\"==typeof c){if(c.call(this,e,l,this))return U({sortable:n,rootEl:s,name:\"filter\",targetEl:l,toEl:o,fromEl:o}),z(\"filter\",n,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c=c&&c.split(\",\").some(function(t){if(t=N(s,t.trim(),o,!1))return U({sortable:n,rootEl:t,name:\"filter\",targetEl:l,fromEl:o,toEl:o}),z(\"filter\",n,{evt:e}),!0}))return void(i&&e.cancelable&&e.preventDefault());t.handle&&!N(s,t.handle,o,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(t,e,n){var o,i=this,r=i.el,a=i.options,l=r.ownerDocument;n&&!q&&n.parentNode===r&&(o=k(n),$=r,V=(q=n).parentNode,Q=q.nextSibling,J=n,at=a.group,st={target:Bt.dragged=q,clientX:(e||t).clientX,clientY:(e||t).clientY},ht=st.clientX-o.left,ft=st.clientY-o.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,q.style[\"will-change\"]=\"all\",o=function(){z(\"delayEnded\",i,{evt:t}),Bt.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!s&&i.nativeDraggable&&(q.draggable=!0),i._triggerDragStart(t,e),U({sortable:i,name:\"choose\",originalEvent:t}),I(q,a.chosenClass,!0))},a.ignore.split(\",\").forEach(function(t){b(q,t.trim(),jt)}),h(l,\"dragover\",Xt),h(l,\"mousemove\",Xt),h(l,\"touchmove\",Xt),h(l,\"mouseup\",i._onDrop),h(l,\"touchend\",i._onDrop),h(l,\"touchcancel\",i._onDrop),s&&this.nativeDraggable&&(this.options.touchStartThreshold=4,q.draggable=!0),z(\"delayStart\",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(w||y)?o():Bt.eventCanceled?this._onDrop():(h(l,\"mouseup\",i._disableDelayedDrag),h(l,\"touchend\",i._disableDelayedDrag),h(l,\"touchcancel\",i._disableDelayedDrag),h(l,\"mousemove\",i._delayedDragTouchMoveHandler),h(l,\"touchmove\",i._delayedDragTouchMoveHandler),a.supportPointer&&h(l,\"pointermove\",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(o,a.delay)))},_delayedDragTouchMoveHandler:function(t){t=t.touches?t.touches[0]:t;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){q&&jt(q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;f(t,\"mouseup\",this._disableDelayedDrag),f(t,\"touchend\",this._disableDelayedDrag),f(t,\"touchcancel\",this._disableDelayedDrag),f(t,\"mousemove\",this._delayedDragTouchMoveHandler),f(t,\"touchmove\",this._delayedDragTouchMoveHandler),f(t,\"pointermove\",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||\"touch\"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?h(document,\"pointermove\",this._onTouchMove):h(document,e?\"touchmove\":\"mousemove\",this._onTouchMove):(h(q,\"dragend\",this),h($,\"dragstart\",this._onDragStart));try{document.selection?Lt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){var n;yt=!1,$&&q?(z(\"dragStarted\",this,{evt:e}),this.nativeDraggable&&h(document,\"dragover\",Yt),n=this.options,t||I(q,n.dragClass,!1),I(q,n.ghostClass,!0),Bt.active=this,t&&this._appendGhost(),U({sortable:this,name:\"start\",originalEvent:e})):this._nulling()},_emulateDragOver:function(){if(ct){this._lastX=ct.clientX,this._lastY=ct.clientY,kt();for(var t=document.elementFromPoint(ct.clientX,ct.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(ct.clientX,ct.clientY))!==e;)e=t;if(q.parentNode[j]._isOutsideThisEl(t),e)do{if(e[j])if(e[j]._onDragOver({clientX:ct.clientX,clientY:ct.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}while(e=(t=e).parentNode);Rt()}},_onTouchMove:function(t){if(st){var e=this.options,n=e.fallbackTolerance,o=e.fallbackOffset,i=t.touches?t.touches[0]:t,r=Z&&v(Z,!0),a=Z&&r&&r.a,l=Z&&r&&r.d,e=Ot&&bt&&E(bt),a=(i.clientX-st.clientX+o.x)/(a||1)+(e?e[0]-_t[0]:0)/(a||1),l=(i.clientY-st.clientY+o.y)/(l||1)+(e?e[1]-_t[1]:0)/(l||1);if(!Bt.active&&!yt){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}Z&&(r?(r.e+=a-(ut||0),r.f+=l-(dt||0)):r={a:1,b:0,c:0,d:1,e:a,f:l},r=\"matrix(\".concat(r.a,\",\").concat(r.b,\",\").concat(r.c,\",\").concat(r.d,\",\").concat(r.e,\",\").concat(r.f,\")\"),P(Z,\"webkitTransform\",r),P(Z,\"mozTransform\",r),P(Z,\"msTransform\",r),P(Z,\"transform\",r),ut=a,dt=l,ct=i),t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Z){var t=this.options.fallbackOnBody?document.body:$,e=k(q,!0,Ot,!0,t),n=this.options;if(Ot){for(bt=t;\"static\"===P(bt,\"position\")&&\"none\"===P(bt,\"transform\")&&bt!==document;)bt=bt.parentNode;bt!==document.body&&bt!==document.documentElement?(bt===document&&(bt=O()),e.top+=bt.scrollTop,e.left+=bt.scrollLeft):bt=O(),_t=E(bt)}I(Z=q.cloneNode(!0),n.ghostClass,!1),I(Z,n.fallbackClass,!0),I(Z,n.dragClass,!0),P(Z,\"transition\",\"\"),P(Z,\"transform\",\"\"),P(Z,\"box-sizing\",\"border-box\"),P(Z,\"margin\",0),P(Z,\"top\",e.top),P(Z,\"left\",e.left),P(Z,\"width\",e.width),P(Z,\"height\",e.height),P(Z,\"opacity\",\"0.8\"),P(Z,\"position\",Ot?\"absolute\":\"fixed\"),P(Z,\"zIndex\",\"100000\"),P(Z,\"pointerEvents\",\"none\"),Bt.ghost=Z,t.appendChild(Z),P(Z,\"transform-origin\",ht/parseInt(Z.style.width)*100+\"% \"+ft/parseInt(Z.style.height)*100+\"%\")}},_onDragStart:function(t,e){var n=this,o=t.dataTransfer,i=n.options;z(\"dragStart\",this,{evt:t}),Bt.eventCanceled?this._onDrop():(z(\"setupClone\",this),Bt.eventCanceled||((tt=_(q)).removeAttribute(\"id\"),tt.draggable=!1,tt.style[\"will-change\"]=\"\",this._hideClone(),I(tt,this.options.chosenClass,!1),Bt.clone=tt),n.cloneId=Lt(function(){z(\"clone\",n),Bt.eventCanceled||(n.options.removeCloneOnHide||$.insertBefore(tt,q),n._hideClone(),U({sortable:n,name:\"clone\"}))}),e||I(q,i.dragClass,!0),e?(wt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(f(document,\"mouseup\",n._onDrop),f(document,\"touchend\",n._onDrop),f(document,\"touchcancel\",n._onDrop),o&&(o.effectAllowed=\"move\",i.setData&&i.setData.call(n,o,q)),h(document,\"drop\",n),P(q,\"transform\",\"translateZ(0)\")),yt=!0,n._dragStartId=Lt(n._dragStarted.bind(n,e,t)),h(document,\"selectstart\",n),pt=!0,u&&P(document.body,\"user-select\",\"none\"))},_onDragOver:function(n){var o,i,r,t,a=this.el,l=n.target,e=this.options,s=e.group,c=Bt.active,u=at===s,d=e.sort,h=lt||c,f=this,p=!1;if(!Ct){if(void 0!==n.preventDefault&&n.cancelable&&n.preventDefault(),l=N(l,e.draggable,a,!0),T(\"dragOver\"),Bt.eventCanceled)return p;if(q.contains(n.target)||l.animated&&l.animatingX&&l.animatingY||f._ignoreWhileAnimating===l)return O(!1);if(wt=!1,c&&!e.disabled&&(u?d||(i=V!==$):lt===this||(this.lastPutMode=at.checkPull(this,c,q,n))&&s.checkPut(this,c,q,n))){if(r=\"vertical\"===this._getDirection(n,l),o=k(q),T(\"dragOverValid\"),Bt.eventCanceled)return p;if(i)return V=$,x(),this._hideClone(),T(\"revert\"),Bt.eventCanceled||(Q?$.insertBefore(q,Q):$.appendChild(q)),O(!0);var g=Y(a,e.draggable);if(!g||function(t,e,n){n=k(Y(n.el,n.options.draggable));return e?t.clientX>n.right+10||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+10}(n,r,this)&&!g.animated){if(g===q)return O(!1);if((l=g&&a===n.target?g:l)&&(w=k(l)),!1!==Ft($,a,q,o,l,w,n,!!l))return x(),g&&g.nextSibling?a.insertBefore(q,g.nextSibling):a.appendChild(q),V=a,A(),O(!0)}else if(g&&function(t,e,n){n=k(X(n.el,0,n.options,!0));return e?t.clientX<n.left-10||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-10||t.clientY<n.bottom&&t.clientX<n.left}(n,r,this)){var m=X(a,0,e,!0);if(m===q)return O(!1);if(w=k(l=m),!1!==Ft($,a,q,o,l,w,n,!1))return x(),a.insertBefore(q,m),V=a,A(),O(!0)}else if(l.parentNode===a){var v,b,y,w=k(l),E=q.parentNode!==a,D=(D=q.animated&&q.toRect||o,C=l.animated&&l.toRect||w,S=(t=r)?D.left:D.top,s=t?D.right:D.bottom,g=t?D.width:D.height,m=t?C.left:C.top,D=t?C.right:C.bottom,C=t?C.width:C.height,!(S===m||s===D||S+g/2===m+C/2)),S=r?\"top\":\"left\",g=R(l,\"top\",\"top\")||R(q,\"top\",\"top\"),m=g?g.scrollTop:void 0;if(gt!==l&&(b=w[S],Dt=!1,St=!D&&e.invertSwap||E),0!==(v=function(t,e,n,o,i,r,a,l){var s=o?t.clientY:t.clientX,c=o?n.height:n.width,t=o?n.top:n.left,o=o?n.bottom:n.right,n=!1;if(!a)if(l&&vt<c*i){if(Dt=!Dt&&(1===mt?t+c*r/2<s:s<o-c*r/2)?!0:Dt)n=!0;else if(1===mt?s<t+vt:o-vt<s)return-mt}else if(t+c*(1-i)/2<s&&s<o-c*(1-i)/2)return function(t){return B(q)<B(t)?1:-1}(e);if((n=n||a)&&(s<t+c*r/2||o-c*r/2<s))return t+c/2<s?1:-1;return 0}(n,l,w,r,D?1:e.swapThreshold,null==e.invertedSwapThreshold?e.swapThreshold:e.invertedSwapThreshold,St,gt===l)))for(var _=B(q);(y=V.children[_-=v])&&(\"none\"===P(y,\"display\")||y===Z););if(0===v||y===l)return O(!1);mt=v;var C=(gt=l).nextElementSibling,E=!1,D=Ft($,a,q,o,l,w,n,E=1===v);if(!1!==D)return 1!==D&&-1!==D||(E=1===D),Ct=!0,setTimeout(Ht,30),x(),E&&!C?a.appendChild(q):l.parentNode.insertBefore(q,E?C:l),g&&F(g,0,m-g.scrollTop),V=q.parentNode,void 0===b||St||(vt=Math.abs(b-k(l)[S])),A(),O(!0)}if(a.contains(q))return O(!1)}return!1}function T(t,e){z(t,f,M({evt:n,isOwner:u,axis:r?\"vertical\":\"horizontal\",revert:i,dragRect:o,targetRect:w,canSort:d,fromSortable:h,target:l,completed:O,onMove:function(t,e){return Ft($,a,q,o,t,k(t),n,e)},changed:A},e))}function x(){T(\"dragOverAnimationCapture\"),f.captureAnimationState(),f!==h&&h.captureAnimationState()}function O(t){return T(\"dragOverCompleted\",{insertion:t}),t&&(u?c._hideClone():c._showClone(f),f!==h&&(I(q,(lt||c).options.ghostClass,!1),I(q,e.ghostClass,!0)),lt!==f&&f!==Bt.active?lt=f:f===Bt.active&&lt&&(lt=null),h===f&&(f._ignoreWhileAnimating=l),f.animateAll(function(){T(\"dragOverAnimationComplete\"),f._ignoreWhileAnimating=null}),f!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(l===q&&!q.animated||l===a&&!l.animated)&&(gt=null),e.dragoverBubble||n.rootEl||l===document||(q.parentNode[j]._isOutsideThisEl(n.target),t||Xt(n)),!e.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),p=!0}function A(){ot=B(q),rt=B(q,e.draggable),U({sortable:f,name:\"change\",toEl:a,newIndex:ot,newDraggableIndex:rt,originalEvent:n})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){f(document,\"mousemove\",this._onTouchMove),f(document,\"touchmove\",this._onTouchMove),f(document,\"pointermove\",this._onTouchMove),f(document,\"dragover\",Xt),f(document,\"mousemove\",Xt),f(document,\"touchmove\",Xt)},_offUpEvents:function(){var t=this.el.ownerDocument;f(t,\"mouseup\",this._onDrop),f(t,\"touchend\",this._onDrop),f(t,\"pointerup\",this._onDrop),f(t,\"touchcancel\",this._onDrop),f(document,\"selectstart\",this)},_onDrop:function(t){var e=this.el,n=this.options;ot=B(q),rt=B(q,n.draggable),z(\"drop\",this,{evt:t}),V=q&&q.parentNode,ot=B(q),rt=B(q,n.draggable),Bt.eventCanceled||(Dt=St=yt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Kt(this.cloneId),Kt(this._dragStartId),this.nativeDraggable&&(f(document,\"drop\",this),f(e,\"dragstart\",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),u&&P(document.body,\"user-select\",\"\"),P(q,\"transform\",\"\"),t&&(pt&&(t.cancelable&&t.preventDefault(),n.dropBubble||t.stopPropagation()),Z&&Z.parentNode&&Z.parentNode.removeChild(Z),($===V||lt&&\"clone\"!==lt.lastPutMode)&&tt&&tt.parentNode&&tt.parentNode.removeChild(tt),q&&(this.nativeDraggable&&f(q,\"dragend\",this),jt(q),q.style[\"will-change\"]=\"\",pt&&!yt&&I(q,(lt||this).options.ghostClass,!1),I(q,this.options.chosenClass,!1),U({sortable:this,name:\"unchoose\",toEl:V,newIndex:null,newDraggableIndex:null,originalEvent:t}),$!==V?(0<=ot&&(U({rootEl:V,name:\"add\",toEl:V,fromEl:$,originalEvent:t}),U({sortable:this,name:\"remove\",toEl:V,originalEvent:t}),U({rootEl:V,name:\"sort\",toEl:V,fromEl:$,originalEvent:t}),U({sortable:this,name:\"sort\",toEl:V,originalEvent:t})),lt&&lt.save()):ot!==nt&&0<=ot&&(U({sortable:this,name:\"update\",toEl:V,originalEvent:t}),U({sortable:this,name:\"sort\",toEl:V,originalEvent:t})),Bt.active&&(null!=ot&&-1!==ot||(ot=nt,rt=it),U({sortable:this,name:\"end\",toEl:V,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){z(\"nulling\",this),$=q=V=Z=Q=tt=J=et=st=ct=pt=ot=rt=nt=it=gt=mt=lt=at=Bt.dragged=Bt.ghost=Bt.clone=Bt.active=null,Tt.forEach(function(t){t.checked=!0}),Tt.length=ut=dt=0},handleEvent:function(t){switch(t.type){case\"drop\":case\"dragend\":this._onDrop(t);break;case\"dragenter\":case\"dragover\":q&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect=\"move\");t.cancelable&&t.preventDefault()}(t));break;case\"selectstart\":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,o=0,i=n.length,r=this.options;o<i;o++)N(t=n[o],r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||function(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;for(;n--;)o+=e.charCodeAt(n);return o.toString(36)}(t));return e},sort:function(t,e){var n={},o=this.el;this.toArray().forEach(function(t,e){e=o.children[e];N(e,this.options.draggable,o,!1)&&(n[t]=e)},this),e&&this.captureAnimationState(),t.forEach(function(t){n[t]&&(o.removeChild(n[t]),o.appendChild(n[t]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return N(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var o=K.modifyOption(this,t,e);n[t]=void 0!==o?o:e,\"group\"===t&&Pt(n)},destroy:function(){z(\"destroy\",this);var t=this.el;t[j]=null,f(t,\"mousedown\",this._onTapStart),f(t,\"touchstart\",this._onTapStart),f(t,\"pointerdown\",this._onTapStart),this.nativeDraggable&&(f(t,\"dragover\",this),f(t,\"dragenter\",this)),Array.prototype.forEach.call(t.querySelectorAll(\"[draggable]\"),function(t){t.removeAttribute(\"draggable\")}),this._onDrop(),this._disableDelayedDragEvents(),Et.splice(Et.indexOf(this.el),1),this.el=t=null},_hideClone:function(){et||(z(\"hideClone\",this),Bt.eventCanceled||(P(tt,\"display\",\"none\"),this.options.removeCloneOnHide&&tt.parentNode&&tt.parentNode.removeChild(tt),et=!0))},_showClone:function(t){\"clone\"===t.lastPutMode?et&&(z(\"showClone\",this),Bt.eventCanceled||(q.parentNode!=$||this.options.group.revertClone?Q?$.insertBefore(tt,Q):$.appendChild(tt):$.insertBefore(tt,q),this.options.group.revertClone&&this.animate(q,tt),P(tt,\"display\",\"\"),et=!1)):this._hideClone()}},xt&&h(document,\"touchmove\",function(t){(Bt.active||yt)&&t.cancelable&&t.preventDefault()}),Bt.utils={on:h,off:f,css:P,find:b,is:function(t,e){return!!N(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:S,closest:N,toggleClass:I,clone:_,index:B,nextTick:Lt,cancelNextTick:Kt,detectDirection:It,getChild:X},Bt.get=function(t){return t[j]},Bt.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];(e=e[0].constructor===Array?e[0]:e).forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw\"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(t));t.utils&&(Bt.utils=M(M({},Bt.utils),t.utils)),K.mount(t)})},Bt.create=function(t,e){return new Bt(t,e)};var Wt,zt,Gt,Ut,qt,Vt,Zt=[],$t=!(Bt.version=\"1.15.0\");function Qt(){Zt.forEach(function(t){clearInterval(t.pid)}),Zt=[]}function Jt(){clearInterval(Vt)}var te,ee=S(function(n,t,e,o){if(t.scroll){var i,r=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=O(),u=!1;zt!==e&&(zt=e,Qt(),Wt=t.scroll,i=t.scrollFn,!0===Wt&&(Wt=A(e,!0)));var d=0,h=Wt;do{var f=h,p=k(f),g=p.top,m=p.bottom,v=p.left,b=p.right,y=p.width,w=p.height,E=void 0,D=void 0,S=f.scrollWidth,_=f.scrollHeight,C=P(f),T=f.scrollLeft,p=f.scrollTop,D=f===c?(E=y<S&&(\"auto\"===C.overflowX||\"scroll\"===C.overflowX||\"visible\"===C.overflowX),w<_&&(\"auto\"===C.overflowY||\"scroll\"===C.overflowY||\"visible\"===C.overflowY)):(E=y<S&&(\"auto\"===C.overflowX||\"scroll\"===C.overflowX),w<_&&(\"auto\"===C.overflowY||\"scroll\"===C.overflowY)),T=E&&(Math.abs(b-r)<=l&&T+y<S)-(Math.abs(v-r)<=l&&!!T),p=D&&(Math.abs(m-a)<=l&&p+w<_)-(Math.abs(g-a)<=l&&!!p);if(!Zt[d])for(var x=0;x<=d;x++)Zt[x]||(Zt[x]={});Zt[d].vx==T&&Zt[d].vy==p&&Zt[d].el===f||(Zt[d].el=f,Zt[d].vx=T,Zt[d].vy=p,clearInterval(Zt[d].pid),0==T&&0==p||(u=!0,Zt[d].pid=setInterval(function(){o&&0===this.layer&&Bt.active._onTouchMove(qt);var t=Zt[this.layer].vy?Zt[this.layer].vy*s:0,e=Zt[this.layer].vx?Zt[this.layer].vx*s:0;\"function\"==typeof i&&\"continue\"!==i.call(Bt.dragged.parentNode[j],e,t,n,qt,Zt[this.layer].el)||F(Zt[this.layer].el,e,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=A(h,!1)));$t=u}},30),c=function(t){var e=t.originalEvent,n=t.putSortable,o=t.dragEl,i=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget,t=t.unhideGhostForTarget;e&&(i=n||i,a(),e=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,e=document.elementFromPoint(e.clientX,e.clientY),t(),i&&!i.el.contains(e)&&(r(\"spill\"),this.onSpill({dragEl:o,putSortable:n})))};function ne(){}function oe(){}ne.prototype={startIndex:null,dragStart:function(t){t=t.oldDraggableIndex;this.startIndex=t},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();t=X(this.sortable.el,this.startIndex,this.options);t?this.sortable.el.insertBefore(e,t):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:c},a(ne,{pluginName:\"revertOnSpill\"}),oe.prototype={onSpill:function(t){var e=t.dragEl,t=t.putSortable||this.sortable;t.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),t.animateAll()},drop:c},a(oe,{pluginName:\"removeOnSpill\"});var ie,re,ae,le,se,ce=[],ue=[],de=!1,he=!1,fe=!1;function pe(n,o){ue.forEach(function(t,e){e=o.children[t.sortableIndex+(n?Number(e):0)];e?o.insertBefore(t,e):o.appendChild(t)})}function ge(){ce.forEach(function(t){t!==ae&&t.parentNode&&t.parentNode.removeChild(t)})}return Bt.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)\"_\"===t.charAt(0)&&\"function\"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){t=t.originalEvent;this.sortable.nativeDraggable?h(document,\"dragover\",this._handleAutoScroll):this.options.supportPointer?h(document,\"pointermove\",this._handleFallbackAutoScroll):t.touches?h(document,\"touchmove\",this._handleFallbackAutoScroll):h(document,\"mousemove\",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){t=t.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?f(document,\"dragover\",this._handleAutoScroll):(f(document,\"pointermove\",this._handleFallbackAutoScroll),f(document,\"touchmove\",this._handleFallbackAutoScroll),f(document,\"mousemove\",this._handleFallbackAutoScroll)),Jt(),Qt(),clearTimeout(g),g=void 0},nulling:function(){qt=zt=Wt=$t=Vt=Gt=Ut=null,Zt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(e,n){var o,i=this,r=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,t=document.elementFromPoint(r,a);qt=e,n||this.options.forceAutoScrollFallback||w||y||u?(ee(e,this.options,t,n),o=A(t,!0),!$t||Vt&&r===Gt&&a===Ut||(Vt&&Jt(),Vt=setInterval(function(){var t=A(document.elementFromPoint(r,a),!0);t!==o&&(o=t,Qt()),ee(e,i.options,t,n)},10),Gt=r,Ut=a)):this.options.bubbleScroll&&A(t,!0)!==O()?ee(e,this.options,A(t,!1),!1):Qt()}},a(t,{pluginName:\"scroll\",initializeByDefault:!0})}),Bt.mount(oe,ne),Bt.mount(new function(){function t(){this.defaults={swapClass:\"sortable-swap-highlight\"}}return t.prototype={dragStart:function(t){t=t.dragEl;te=t},dragOverValid:function(t){var e=t.completed,n=t.target,o=t.onMove,i=t.activeSortable,r=t.changed,a=t.cancel;i.options.swap&&(t=this.sortable.el,i=this.options,n&&n!==t&&(t=te,te=!1!==o(n)?(I(n,i.swapClass,!0),n):null,t&&t!==te&&I(t,i.swapClass,!1)),r(),e(!0),a())},drop:function(t){var e,n,o=t.activeSortable,i=t.putSortable,r=t.dragEl,a=i||this.sortable,l=this.options;te&&I(te,l.swapClass,!1),te&&(l.swap||i&&i.options.swap)&&r!==te&&(a.captureAnimationState(),a!==o&&o.captureAnimationState(),n=te,t=(e=r).parentNode,l=n.parentNode,t&&l&&!t.isEqualNode(n)&&!l.isEqualNode(e)&&(i=B(e),r=B(n),t.isEqualNode(l)&&i<r&&r++,t.insertBefore(n,t.children[i]),l.insertBefore(e,l.children[r])),a.animateAll(),a!==o&&o.animateAll())},nulling:function(){te=null}},a(t,{pluginName:\"swap\",eventProperties:function(){return{swapItem:te}}})}),Bt.mount(new function(){function t(o){for(var t in this)\"_\"===t.charAt(0)&&\"function\"==typeof this[t]&&(this[t]=this[t].bind(this));o.options.avoidImplicitDeselect||(o.options.supportPointer?h(document,\"pointerup\",this._deselectMultiDrag):(h(document,\"mouseup\",this._deselectMultiDrag),h(document,\"touchend\",this._deselectMultiDrag))),h(document,\"keydown\",this._checkKeyDown),h(document,\"keyup\",this._checkKeyUp),this.defaults={selectedClass:\"sortable-selected\",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(t,e){var n=\"\";ce.length&&re===o?ce.forEach(function(t,e){n+=(e?\", \":\"\")+t.textContent}):n=e.textContent,t.setData(\"Text\",n)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){t=t.dragEl;ae=t},delayEnded:function(){this.isMultiDrag=~ce.indexOf(ae)},setupClone:function(t){var e=t.sortable,t=t.cancel;if(this.isMultiDrag){for(var n=0;n<ce.length;n++)ue.push(_(ce[n])),ue[n].sortableIndex=ce[n].sortableIndex,ue[n].draggable=!1,ue[n].style[\"will-change\"]=\"\",I(ue[n],this.options.selectedClass,!1),ce[n]===ae&&I(ue[n],this.options.chosenClass,!1);e._hideClone(),t()}},clone:function(t){var e=t.sortable,n=t.rootEl,o=t.dispatchSortableEvent,t=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ce.length&&re===e&&(pe(!0,n),o(\"clone\"),t()))},showClone:function(t){var e=t.cloneNowShown,n=t.rootEl,t=t.cancel;this.isMultiDrag&&(pe(!1,n),ue.forEach(function(t){P(t,\"display\",\"\")}),e(),se=!1,t())},hideClone:function(t){var e=this,n=(t.sortable,t.cloneNowHidden),t=t.cancel;this.isMultiDrag&&(ue.forEach(function(t){P(t,\"display\",\"none\"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)}),n(),se=!0,t())},dragStartGlobal:function(t){t.sortable;!this.isMultiDrag&&re&&re.multiDrag._deselectMultiDrag(),ce.forEach(function(t){t.sortableIndex=B(t)}),ce=ce.sort(function(t,e){return t.sortableIndex-e.sortableIndex}),fe=!0},dragStarted:function(t){var e,n=this,t=t.sortable;this.isMultiDrag&&(this.options.sort&&(t.captureAnimationState(),this.options.animation&&(ce.forEach(function(t){t!==ae&&P(t,\"position\",\"absolute\")}),e=k(ae,!1,!0,!0),ce.forEach(function(t){t!==ae&&C(t,e)}),de=he=!0)),t.animateAll(function(){de=he=!1,n.options.animation&&ce.forEach(function(t){T(t)}),n.options.sort&&ge()}))},dragOver:function(t){var e=t.target,n=t.completed,t=t.cancel;he&&~ce.indexOf(e)&&(n(!1),t())},revert:function(t){var n,o,e=t.fromSortable,i=t.rootEl,r=t.sortable,a=t.dragRect;1<ce.length&&(ce.forEach(function(t){r.addAnimationState({target:t,rect:he?k(t):a}),T(t),t.fromRect=a,e.removeAnimationState(t)}),he=!1,n=!this.options.removeCloneOnHide,o=i,ce.forEach(function(t,e){e=o.children[t.sortableIndex+(n?Number(e):0)];e?o.insertBefore(t,e):o.appendChild(t)}))},dragOverCompleted:function(t){var e,n=t.sortable,o=t.isOwner,i=t.insertion,r=t.activeSortable,a=t.parentEl,l=t.putSortable,t=this.options;i&&(o&&r._hideClone(),de=!1,t.animation&&1<ce.length&&(he||!o&&!r.options.sort&&!l)&&(e=k(ae,!1,!0,!0),ce.forEach(function(t){t!==ae&&(C(t,e),a.appendChild(t))}),he=!0),o||(he||ge(),1<ce.length?(o=se,r._showClone(n),r.options.animation&&!se&&o&&ue.forEach(function(t){r.addAnimationState({target:t,rect:le}),t.fromRect=le,t.thisAnimationDuration=null})):r._showClone(n)))},dragOverAnimationCapture:function(t){var e=t.dragRect,n=t.isOwner,t=t.activeSortable;ce.forEach(function(t){t.thisAnimationDuration=null}),t.options.animation&&!n&&t.multiDrag.isMultiDrag&&(le=a({},e),e=v(ae,!0),le.top-=e.f,le.left-=e.e)},dragOverAnimationComplete:function(){he&&(he=!1,ge())},drop:function(t){var e=t.originalEvent,n=t.rootEl,o=t.parentEl,i=t.sortable,r=t.dispatchSortableEvent,a=t.oldIndex,l=t.putSortable,s=l||this.sortable;if(e){var c,u,d,h=this.options,f=o.children;if(!fe)if(h.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),I(ae,h.selectedClass,!~ce.indexOf(ae)),~ce.indexOf(ae))ce.splice(ce.indexOf(ae),1),ie=null,W({sortable:i,rootEl:n,name:\"deselect\",targetEl:ae,originalEvent:e});else{if(ce.push(ae),W({sortable:i,rootEl:n,name:\"select\",targetEl:ae,originalEvent:e}),e.shiftKey&&ie&&i.el.contains(ie)){var p=B(ie),t=B(ae);if(~p&&~t&&p!==t)for(var g,m=p<t?(g=p,t):(g=t,p+1);g<m;g++)~ce.indexOf(f[g])||(I(f[g],h.selectedClass,!0),ce.push(f[g]),W({sortable:i,rootEl:n,name:\"select\",targetEl:f[g],originalEvent:e}))}else ie=ae;re=s}fe&&this.isMultiDrag&&(he=!1,(o[j].options.sort||o!==n)&&1<ce.length&&(c=k(ae),u=B(ae,\":not(.\"+this.options.selectedClass+\")\"),!de&&h.animation&&(ae.thisAnimationDuration=null),s.captureAnimationState(),de||(h.animation&&(ae.fromRect=c,ce.forEach(function(t){var e;t.thisAnimationDuration=null,t!==ae&&(e=he?k(t):c,t.fromRect=e,s.addAnimationState({target:t,rect:e}))})),ge(),ce.forEach(function(t){f[u]?o.insertBefore(t,f[u]):o.appendChild(t),u++}),a===B(ae)&&(d=!1,ce.forEach(function(t){t.sortableIndex!==B(t)&&(d=!0)}),d&&r(\"update\"))),ce.forEach(function(t){T(t)}),s.animateAll()),re=s),(n===o||l&&\"clone\"!==l.lastPutMode)&&ue.forEach(function(t){t.parentNode&&t.parentNode.removeChild(t)})}},nullingGlobal:function(){this.isMultiDrag=fe=!1,ue.length=0},destroyGlobal:function(){this._deselectMultiDrag(),f(document,\"pointerup\",this._deselectMultiDrag),f(document,\"mouseup\",this._deselectMultiDrag),f(document,\"touchend\",this._deselectMultiDrag),f(document,\"keydown\",this._checkKeyDown),f(document,\"keyup\",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==fe&&fe||re!==this.sortable||t&&N(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;ce.length;){var e=ce[0];I(e,this.options.selectedClass,!1),ce.shift(),W({sortable:this.sortable,rootEl:this.sortable.el,name:\"deselect\",targetEl:e,originalEvent:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},a(t,{pluginName:\"multiDrag\",utils:{select:function(t){var e=t.parentNode[j];e&&e.options.multiDrag&&!~ce.indexOf(t)&&(re&&re!==e&&(re.multiDrag._deselectMultiDrag(),re=e),I(t,e.options.selectedClass,!0),ce.push(t))},deselect:function(t){var e=t.parentNode[j],n=ce.indexOf(t);e&&e.options.multiDrag&&~n&&(I(t,e.options.selectedClass,!1),ce.splice(n,1))}},eventProperties:function(){var n=this,o=[],i=[];return ce.forEach(function(t){var e;o.push({multiDragElement:t,index:t.sortableIndex}),e=he&&t!==ae?-1:he?B(t,\":not(.\"+n.options.selectedClass+\")\"):B(t),i.push({multiDragElement:t,index:e})}),{items:r(ce),clones:[].concat(ue),oldIndicies:o,newIndicies:i}},optionListeners:{multiDragKey:function(t){return\"ctrl\"===(t=t.toLowerCase())?t=\"Control\":1<t.length&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}),Bt});", "'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar Sortable = _interopDefault(require('sortablejs'));\n\nfunction $(expr, con) {\n    return typeof expr === 'string' ?\n        (con || document).querySelector(expr) :\n        expr || null;\n}\n\n$.each = (expr, con) => {\n    return typeof expr === 'string' ?\n        Array.from((con || document).querySelectorAll(expr)) :\n        expr || null;\n};\n\n$.create = (tag, o) => {\n    let element = document.createElement(tag);\n\n    for (let i in o) {\n        let val = o[i];\n\n        if (i === 'inside') {\n            $(val).appendChild(element);\n        } else\n        if (i === 'around') {\n            let ref = $(val);\n            ref.parentNode.insertBefore(element, ref);\n            element.appendChild(ref);\n        } else\n        if (i === 'styles') {\n            if (typeof val === 'object') {\n                Object.keys(val).map(prop => {\n                    element.style[prop] = val[prop];\n                });\n            }\n        } else\n        if (i in element) {\n            element[i] = val;\n        } else {\n            element.setAttribute(i, val);\n        }\n    }\n\n    return element;\n};\n\n$.on = (element, event, selector, callback) => {\n    if (!callback) {\n        callback = selector;\n        $.bind(element, event, callback);\n    } else {\n        $.delegate(element, event, selector, callback);\n    }\n};\n\n$.off = (element, event, handler) => {\n    element.removeEventListener(event, handler);\n};\n\n$.bind = (element, event, callback) => {\n    event.split(/\\s+/).forEach(function (event) {\n        element.addEventListener(event, callback);\n    });\n};\n\n$.delegate = (element, event, selector, callback) => {\n    element.addEventListener(event, function (e) {\n        const delegatedTarget = e.target.closest(selector);\n        if (delegatedTarget) {\n            e.delegatedTarget = delegatedTarget;\n            callback.call(this, e, delegatedTarget);\n        }\n    });\n};\n\n$.unbind = (element, o) => {\n    if (element) {\n        for (let event in o) {\n            let callback = o[event];\n\n            event.split(/\\s+/).forEach(function (event) {\n                element.removeEventListener(event, callback);\n            });\n        }\n    }\n};\n\n$.fire = (target, type, properties) => {\n    let evt = document.createEvent('HTMLEvents');\n\n    evt.initEvent(type, true, true);\n\n    for (let j in properties) {\n        evt[j] = properties[j];\n    }\n\n    return target.dispatchEvent(evt);\n};\n\n$.data = (element, attrs) => { // eslint-disable-line\n    if (!attrs) {\n        return element.dataset;\n    }\n\n    for (const attr in attrs) {\n        element.dataset[attr] = attrs[attr];\n    }\n};\n\n$.style = (elements, styleMap) => { // eslint-disable-line\n\n    if (typeof styleMap === 'string') {\n        return $.getStyle(elements, styleMap);\n    }\n\n    if (!Array.isArray(elements)) {\n        elements = [elements];\n    }\n\n    elements.map(element => {\n        for (const prop in styleMap) {\n            element.style[prop] = styleMap[prop];\n        }\n    });\n};\n\n$.removeStyle = (elements, styleProps) => {\n    if (!Array.isArray(elements)) {\n        elements = [elements];\n    }\n\n    if (!Array.isArray(styleProps)) {\n        styleProps = [styleProps];\n    }\n\n    elements.map(element => {\n        for (const prop of styleProps) {\n            element.style[prop] = '';\n        }\n    });\n};\n\n$.getStyle = (element, prop) => {\n    if (!prop) {\n        return getComputedStyle(element);\n    }\n\n    let val = getComputedStyle(element)[prop];\n\n    if (['width', 'height'].includes(prop)) {\n        val = parseFloat(val);\n    }\n\n    return val;\n};\n\n$.closest = (selector, element) => {\n    if (!element) return null;\n\n    if (element.matches(selector)) {\n        return element;\n    }\n\n    return $.closest(selector, element.parentNode);\n};\n\n$.inViewport = (el, parentEl) => {\n    const {\n        top,\n        left,\n        bottom,\n        right\n    } = el.getBoundingClientRect();\n    const {\n        top: pTop,\n        left: pLeft,\n        bottom: pBottom,\n        right: pRight\n    } = parentEl.getBoundingClientRect();\n\n    return top >= pTop && left >= pLeft && bottom <= pBottom && right <= pRight;\n};\n\n$.scrollTop = function scrollTop(element, pixels) {\n    requestAnimationFrame(() => {\n        element.scrollTop = pixels;\n    });\n};\n\n$.scrollbarSize = function scrollbarSize() {\n    if (!$.scrollBarSizeValue) {\n        $.scrollBarSizeValue = getScrollBarSize();\n    }\n    return $.scrollBarSizeValue;\n};\n\nfunction getScrollBarSize() {\n    // assume scrollbar width and height would be the same\n\n    // Create the measurement node\n    const scrollDiv = document.createElement('div');\n    $.style(scrollDiv, {\n        width: '100px',\n        height: '100px',\n        overflow: 'scroll',\n        position: 'absolute',\n        top: '-9999px'\n    });\n    document.body.appendChild(scrollDiv);\n\n    // Get the scrollbar width\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n\n    // Delete the DIV\n    document.body.removeChild(scrollDiv);\n\n    return scrollbarWidth;\n}\n\n$.hasVerticalOverflow = function (element) {\n    return element.scrollHeight > element.offsetHeight + 10;\n};\n\n$.hasHorizontalOverflow = function (element) {\n    return element.scrollWidth > element.offsetWidth + 10;\n};\n\n$.measureTextWidth = function (text) {\n    const div = document.createElement('div');\n    div.style.position = 'absolute';\n    div.style.visibility = 'hidden';\n    div.style.height = 'auto';\n    div.style.width = 'auto';\n    div.style.whiteSpace = 'nowrap';\n    div.innerText = text;\n    document.body.appendChild(div);\n    return div.clientWidth + 1;\n};\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nvar isObject_1 = isObject;\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction commonjsRequire () {\n\tthrow new Error('Dynamic requires are not currently supported by rollup-plugin-commonjs');\n}\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n\nvar _freeGlobal = freeGlobal;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = _freeGlobal || freeSelf || Function('return this')();\n\nvar _root = root;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return _root.Date.now();\n};\n\nvar now_1 = now;\n\n/** Built-in value references. */\nvar Symbol = _root.Symbol;\n\nvar _Symbol = Symbol;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nvar _getRawTag = getRawTag;\n\n/** Used for built-in method references. */\nvar objectProto$1 = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString$1 = objectProto$1.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString$1.call(value);\n}\n\nvar _objectToString = objectToString;\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag$1 = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag$1 && symToStringTag$1 in Object(value))\n    ? _getRawTag(value)\n    : _objectToString(value);\n}\n\nvar _baseGetTag = baseGetTag;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nvar isObjectLike_1 = isObjectLike;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike_1(value) && _baseGetTag(value) == symbolTag);\n}\n\nvar isSymbol_1 = isSymbol;\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol_1(value)) {\n    return NAN;\n  }\n  if (isObject_1(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject_1(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nvar toNumber_1 = toNumber;\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber_1(wait) || 0;\n  if (isObject_1(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber_1(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now_1();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now_1());\n  }\n\n  function debounced() {\n    var time = now_1(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nvar debounce_1 = debounce;\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT$1 = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT$1);\n  }\n  if (isObject_1(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce_1(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nvar throttle_1 = throttle;\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject_1(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = _baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nvar isFunction_1 = isFunction;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = _root['__core-js_shared__'];\n\nvar _coreJsData = coreJsData;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(_coreJsData && _coreJsData.keys && _coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nvar _isMasked = isMasked;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nvar _toSource = toSource;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto$1 = Function.prototype,\n    objectProto$2 = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString$1 = funcProto$1.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$1 = objectProto$2.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject_1(value) || _isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction_1(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(_toSource(value));\n}\n\nvar _baseIsNative = baseIsNative;\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nvar _getValue = getValue;\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = _getValue(object, key);\n  return _baseIsNative(value) ? value : undefined;\n}\n\nvar _getNative = getNative;\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = _getNative(Object, 'create');\n\nvar _nativeCreate = nativeCreate;\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = _nativeCreate ? _nativeCreate(null) : {};\n  this.size = 0;\n}\n\nvar _hashClear = hashClear;\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nvar _hashDelete = hashDelete;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto$3 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$2 = objectProto$3.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (_nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty$2.call(data, key) ? data[key] : undefined;\n}\n\nvar _hashGet = hashGet;\n\n/** Used for built-in method references. */\nvar objectProto$4 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$3 = objectProto$4.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return _nativeCreate ? (data[key] !== undefined) : hasOwnProperty$3.call(data, key);\n}\n\nvar _hashHas = hashHas;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED$1 = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (_nativeCreate && value === undefined) ? HASH_UNDEFINED$1 : value;\n  return this;\n}\n\nvar _hashSet = hashSet;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = _hashClear;\nHash.prototype['delete'] = _hashDelete;\nHash.prototype.get = _hashGet;\nHash.prototype.has = _hashHas;\nHash.prototype.set = _hashSet;\n\nvar _Hash = Hash;\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nvar _listCacheClear = listCacheClear;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nvar eq_1 = eq;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq_1(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nvar _assocIndexOf = assocIndexOf;\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nvar _listCacheDelete = listCacheDelete;\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nvar _listCacheGet = listCacheGet;\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return _assocIndexOf(this.__data__, key) > -1;\n}\n\nvar _listCacheHas = listCacheHas;\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nvar _listCacheSet = listCacheSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = _listCacheClear;\nListCache.prototype['delete'] = _listCacheDelete;\nListCache.prototype.get = _listCacheGet;\nListCache.prototype.has = _listCacheHas;\nListCache.prototype.set = _listCacheSet;\n\nvar _ListCache = ListCache;\n\n/* Built-in method references that are verified to be native. */\nvar Map = _getNative(_root, 'Map');\n\nvar _Map = Map;\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new _Hash,\n    'map': new (_Map || _ListCache),\n    'string': new _Hash\n  };\n}\n\nvar _mapCacheClear = mapCacheClear;\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nvar _isKeyable = isKeyable;\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return _isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nvar _getMapData = getMapData;\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = _getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nvar _mapCacheDelete = mapCacheDelete;\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return _getMapData(this, key).get(key);\n}\n\nvar _mapCacheGet = mapCacheGet;\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return _getMapData(this, key).has(key);\n}\n\nvar _mapCacheHas = mapCacheHas;\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = _getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nvar _mapCacheSet = mapCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = _mapCacheClear;\nMapCache.prototype['delete'] = _mapCacheDelete;\nMapCache.prototype.get = _mapCacheGet;\nMapCache.prototype.has = _mapCacheHas;\nMapCache.prototype.set = _mapCacheSet;\n\nvar _MapCache = MapCache;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED$2 = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED$2);\n  return this;\n}\n\nvar _setCacheAdd = setCacheAdd;\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nvar _setCacheHas = setCacheHas;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new _MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = _setCacheAdd;\nSetCache.prototype.has = _setCacheHas;\n\nvar _SetCache = SetCache;\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nvar _baseFindIndex = baseFindIndex;\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nvar _baseIsNaN = baseIsNaN;\n\n/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nvar _strictIndexOf = strictIndexOf;\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? _strictIndexOf(array, value, fromIndex)\n    : _baseFindIndex(array, _baseIsNaN, fromIndex);\n}\n\nvar _baseIndexOf = baseIndexOf;\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && _baseIndexOf(array, value, 0) > -1;\n}\n\nvar _arrayIncludes = arrayIncludes;\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nvar _arrayIncludesWith = arrayIncludesWith;\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nvar _cacheHas = cacheHas;\n\n/* Built-in method references that are verified to be native. */\nvar Set = _getNative(_root, 'Set');\n\nvar _Set = Set;\n\n/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nvar noop_1 = noop;\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nvar _setToArray = setToArray;\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(_Set && (1 / _setToArray(new _Set([,-0]))[1]) == INFINITY) ? noop_1 : function(values) {\n  return new _Set(values);\n};\n\nvar _createSet = createSet;\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = _arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = _arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : _createSet(array);\n    if (set) {\n      return _setToArray(set);\n    }\n    isCommon = false;\n    includes = _cacheHas;\n    seen = new _SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nvar _baseUniq = baseUniq;\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? _baseUniq(array) : [];\n}\n\nvar uniq_1 = uniq;\n\nfunction camelCaseToDash(str) {\n    return str.replace(/([A-Z])/g, (g) => `-${g[0].toLowerCase()}`);\n}\n\nfunction makeDataAttributeString(props) {\n    const keys = Object.keys(props);\n\n    return keys\n        .map((key) => {\n            const _key = camelCaseToDash(key);\n            const val = props[key];\n\n            if (val === undefined) return '';\n            return `data-${_key}=\"${val}\" `;\n        })\n        .join('')\n        .trim();\n}\n\nfunction copyTextToClipboard(text) {\n    // https://stackoverflow.com/a/30810322/5353542\n    var textArea = document.createElement('textarea');\n\n    //\n    // *** This styling is an extra step which is likely not required. ***\n    //\n    // Why is it here? To ensure:\n    // 1. the element is able to have focus and selection.\n    // 2. if element was to flash render it has minimal visual impact.\n    // 3. less flakyness with selection and copying which **might** occur if\n    //    the textarea element is not visible.\n    //\n    // The likelihood is the element won't even render, not even a flash,\n    // so some of these are just precautions. However in IE the element\n    // is visible whilst the popup box asking the user for permission for\n    // the web page to copy to the clipboard.\n    //\n\n    // Place in top-left corner of screen regardless of scroll position.\n    textArea.style.position = 'fixed';\n    textArea.style.top = 0;\n    textArea.style.left = 0;\n\n    // Ensure it has a small width and height. Setting to 1px / 1em\n    // doesn't work as this gives a negative w/h on some browsers.\n    textArea.style.width = '2em';\n    textArea.style.height = '2em';\n\n    // We don't need padding, reducing the size if it does flash render.\n    textArea.style.padding = 0;\n\n    // Clean up any borders.\n    textArea.style.border = 'none';\n    textArea.style.outline = 'none';\n    textArea.style.boxShadow = 'none';\n\n    // Avoid flash of white box if rendered for any reason.\n    textArea.style.background = 'transparent';\n\n    textArea.value = text;\n\n    document.body.appendChild(textArea);\n\n    textArea.select();\n\n    try {\n        document.execCommand('copy');\n    } catch (err) {\n        console.log('Oops, unable to copy');\n    }\n\n    document.body.removeChild(textArea);\n}\n\nfunction isNumeric(val) {\n    return !isNaN(val);\n}\n\nlet throttle$1 = throttle_1;\n\nlet debounce$1 = debounce_1;\n\nfunction nextTick(fn, context = null) {\n    return (...args) => {\n        return new Promise(resolve => {\n            const execute = () => {\n                const out = fn.apply(context, args);\n                resolve(out);\n            };\n            setTimeout(execute);\n        });\n    };\n}\nfunction linkProperties(target, source, properties) {\n    const props = properties.reduce((acc, prop) => {\n        acc[prop] = {\n            get() {\n                return source[prop];\n            }\n        };\n        return acc;\n    }, {});\n    Object.defineProperties(target, props);\n}\nfunction isSet(val) {\n    return val !== undefined || val !== null;\n}\n\nfunction notSet(val) {\n    return !isSet(val);\n}\n\nfunction isNumber(val) {\n    return !isNaN(val);\n}\n\nfunction ensureArray(val) {\n    if (!Array.isArray(val)) {\n        return [val];\n    }\n    return val;\n}\n\nfunction uniq$1(arr) {\n    return uniq_1(arr);\n}\n\nfunction numberSortAsc(a, b) {\n    return a - b;\n}\nfunction stripHTML(html) {\n    return html.replace(/<[^>]*>/g, '');\n}\nfunction format(str, args) {\n    if (!str) return str;\n\n    Object.keys(args).forEach(arg => {\n        let regex = new RegExp(`{(${arg})}`, 'g');\n        str = str.replace(regex, args[arg]);\n    });\n\n    return str;\n}\nfunction escapeHTML(txt) {\n    if (!txt) return '';\n    let escapeHtmlMapping = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#39;',\n        '/': '&#x2F;',\n        '`': '&#x60;',\n        '=': '&#x3D;',\n    };\n\n    return String(txt).replace(/[&<>\"'`=/]/g, (char) => escapeHtmlMapping[char] || char);\n}\n\nclass DataManager {\n    constructor(options) {\n        this.options = options;\n        this.sortRows = nextTick(this.sortRows, this);\n        this.switchColumn = nextTick(this.switchColumn, this);\n        this.removeColumn = nextTick(this.removeColumn, this);\n        this.options.filterRows = nextTick(this.options.filterRows, this);\n    }\n\n    init(data, columns) {\n        if (!data) {\n            data = this.options.data;\n        }\n        if (columns) {\n            this.options.columns = columns;\n        }\n\n        this.data = data;\n\n        this.rowCount = 0;\n        this.columns = [];\n        this.rows = [];\n\n        this.prepareColumns();\n        this.validateData(this.data);\n        this.rows = this.prepareRows(this.data);\n        this.prepareTreeRows();\n        this.prepareRowView();\n        this.prepareNumericColumns();\n    }\n\n    // computed property\n    get currentSort() {\n        const col = this.columns.find(col => col.sortOrder !== 'none');\n        return col || {\n            colIndex: -1,\n            sortOrder: 'none'\n        };\n    }\n\n    prepareColumns() {\n        this.columns = [];\n        this.validateColumns();\n        this.prepareDefaultColumns();\n        this.prepareHeader();\n    }\n\n    prepareDefaultColumns() {\n        if (this.options.checkboxColumn && !this.hasColumnById('_checkbox')) {\n            const cell = {\n                id: '_checkbox',\n                content: this.getCheckboxHTML(),\n                editable: false,\n                resizable: false,\n                sortable: false,\n                focusable: false,\n                dropdown: false,\n                width: 32\n            };\n            this.columns.push(cell);\n        }\n\n        if (this.options.serialNoColumn && !this.hasColumnById('_rowIndex')) {\n            let cell = {\n                id: '_rowIndex',\n                content: '',\n                align: 'center',\n                editable: false,\n                resizable: false,\n                focusable: false,\n                dropdown: false\n            };\n\n            this.columns.push(cell);\n        }\n    }\n\n    prepareHeader() {\n        let columns = this.columns.concat(this.options.columns);\n        const baseCell = {\n            isHeader: 1,\n            editable: true,\n            sortable: true,\n            resizable: true,\n            focusable: true,\n            dropdown: true,\n            width: null,\n            format: (value) => {\n                if (value === null || value === undefined) {\n                    return '';\n                }\n                return value + '';\n            }\n        };\n\n        this.columns = columns\n            .map((cell, i) => this.prepareCell(cell, i))\n            .map(col => Object.assign({}, baseCell, col))\n            .map(col => {\n                col.content = col.content || col.name || '';\n                col.id = col.id || col.content;\n                return col;\n            });\n    }\n\n    prepareCell(content, i) {\n        const cell = {\n            content: '',\n            sortOrder: 'none',\n            colIndex: i,\n            column: this.columns[i]\n        };\n\n        if (content !== null && typeof content === 'object') {\n            // passed as column/header\n            Object.assign(cell, content);\n        } else {\n            cell.content = content;\n        }\n\n        return cell;\n    }\n\n    prepareNumericColumns() {\n        const row0 = this.getRow(0);\n        if (!row0) return;\n        this.columns = this.columns.map((column, i) => {\n\n            const cellValue = row0[i].content;\n            if (!column.align && isNumeric(cellValue)) {\n                column.align = 'right';\n            }\n\n            return column;\n        });\n    }\n\n    prepareRows(data) {\n        return data.map((d, i) => {\n            const index = this._getNextRowCount();\n\n            let row = [];\n            let meta = {\n                rowIndex: index\n            };\n\n            if (Array.isArray(d)) {\n                // row is an array\n                if (this.options.checkboxColumn) {\n                    row.push(this.getCheckboxHTML());\n                }\n                if (this.options.serialNoColumn) {\n                    row.push((index + 1) + '');\n                }\n                row = row.concat(d);\n\n                while (row.length < this.columns.length) {\n                    row.push('');\n                }\n\n            } else {\n                // row is an object\n                for (let col of this.columns) {\n                    if (col.id === '_checkbox') {\n                        row.push(this.getCheckboxHTML());\n                    } else if (col.id === '_rowIndex') {\n                        row.push((index + 1) + '');\n                    } else {\n                        row.push(d[col.id]);\n                    }\n                }\n\n                meta.indent = d.indent || 0;\n            }\n\n            return this.prepareRow(row, meta);\n        });\n    }\n\n    prepareTreeRows() {\n        this.rows.forEach((row, i) => {\n            if (isNumber(row.meta.indent)) {\n                // if (i === 36) debugger;\n                const nextRow = this.getRow(i + 1);\n                row.meta.isLeaf = !nextRow ||\n                    notSet(nextRow.meta.indent) ||\n                    nextRow.meta.indent <= row.meta.indent;\n                row.meta.isTreeNodeClose = false;\n            }\n        });\n    }\n\n    prepareRowView() {\n        // This is order in which rows will be rendered in the table.\n        // When sorting happens, only this.rowViewOrder will change\n        // and not the original this.rows\n        this.rowViewOrder = this.rows.map(row => row.meta.rowIndex);\n    }\n\n    prepareRow(row, meta) {\n        const baseRowCell = {\n            rowIndex: meta.rowIndex,\n            indent: meta.indent\n        };\n\n        row = row\n            .map((cell, i) => this.prepareCell(cell, i))\n            .map(cell => Object.assign({}, baseRowCell, cell));\n\n        // monkey patched in array object\n        row.meta = meta;\n        return row;\n    }\n\n    validateColumns() {\n        const columns = this.options.columns;\n        if (!Array.isArray(columns)) {\n            throw new DataError('`columns` must be an array');\n        }\n\n        columns.forEach((column, i) => {\n            if (typeof column !== 'string' && typeof column !== 'object') {\n                throw new DataError(`column \"${i}\" must be a string or an object`);\n            }\n        });\n    }\n\n    validateData(data) {\n        if (Array.isArray(data) &&\n            (data.length === 0 || Array.isArray(data[0]) || typeof data[0] === 'object')) {\n            return true;\n        }\n        throw new DataError('`data` must be an array of arrays or objects');\n    }\n\n    appendRows(rows) {\n        this.validateData(rows);\n        this.rows = this.rows.concat(this.prepareRows(rows));\n        this.prepareTreeRows();\n        this.prepareRowView();\n    }\n\n    sortRows(colIndex, sortOrder = 'none') {\n        colIndex = +colIndex;\n\n        // reset sortOrder and update for colIndex\n        this.getColumns()\n            .map(col => {\n                if (col.colIndex === colIndex) {\n                    col.sortOrder = sortOrder;\n                } else {\n                    col.sortOrder = 'none';\n                }\n            });\n\n        this._sortRows(colIndex, sortOrder);\n    }\n\n    _sortRows(colIndex, sortOrder) {\n\n        if (this.currentSort.colIndex === colIndex) {\n            // reverse the array if only sortOrder changed\n            if (\n                (this.currentSort.sortOrder === 'asc' && sortOrder === 'desc') ||\n                (this.currentSort.sortOrder === 'desc' && sortOrder === 'asc')\n            ) {\n                this.reverseArray(this.rowViewOrder);\n                this.currentSort.sortOrder = sortOrder;\n                return;\n            }\n        }\n\n        this.rowViewOrder.sort((a, b) => {\n            const aIndex = a;\n            const bIndex = b;\n\n            let aContent = this.getCell(colIndex, a).content;\n            let bContent = this.getCell(colIndex, b).content;\n            aContent = aContent == null ? '' : aContent;\n            bContent = bContent == null ? '' : bContent;\n\n            if (sortOrder === 'none') {\n                return aIndex - bIndex;\n            } else if (sortOrder === 'asc') {\n                if (aContent < bContent) return -1;\n                if (aContent > bContent) return 1;\n                if (aContent === bContent) return 0;\n            } else if (sortOrder === 'desc') {\n                if (aContent < bContent) return 1;\n                if (aContent > bContent) return -1;\n                if (aContent === bContent) return 0;\n            }\n            return 0;\n        });\n\n        if (this.hasColumnById('_rowIndex')) {\n            // update row index\n            const srNoColIndex = this.getColumnIndexById('_rowIndex');\n            this.rows.forEach((row, index) => {\n                const viewIndex = this.rowViewOrder.indexOf(index);\n                const cell = row[srNoColIndex];\n                cell.content = (viewIndex + 1) + '';\n            });\n        }\n    }\n\n    reverseArray(array) {\n        let left = null;\n        let right = null;\n        let length = array.length;\n\n        for (left = 0, right = length - 1; left < right; left += 1, right -= 1) {\n            const temporary = array[left];\n\n            array[left] = array[right];\n            array[right] = temporary;\n        }\n    }\n\n    switchColumn(index1, index2) {\n        // update columns\n        const temp = this.columns[index1];\n        this.columns[index1] = this.columns[index2];\n        this.columns[index2] = temp;\n\n        this.columns[index1].colIndex = index1;\n        this.columns[index2].colIndex = index2;\n\n        // update rows\n        this.rows.forEach(row => {\n            const newCell1 = Object.assign({}, row[index1], {\n                colIndex: index2\n            });\n            const newCell2 = Object.assign({}, row[index2], {\n                colIndex: index1\n            });\n\n            row[index2] = newCell1;\n            row[index1] = newCell2;\n        });\n    }\n\n    removeColumn(index) {\n        index = +index;\n        const filter = cell => cell.colIndex !== index;\n        const map = (cell, i) => Object.assign({}, cell, {\n            colIndex: i\n        });\n        // update columns\n        this.columns = this.columns\n            .filter(filter)\n            .map(map);\n\n        // update rows\n        this.rows.forEach(row => {\n            // remove cell\n            row.splice(index, 1);\n            // update colIndex\n            row.forEach((cell, i) => {\n                cell.colIndex = i;\n            });\n        });\n    }\n\n    updateRow(row, rowIndex) {\n        if (row.length < this.columns.length) {\n            if (this.hasColumnById('_rowIndex')) {\n                const val = (rowIndex + 1) + '';\n\n                row = [val].concat(row);\n            }\n\n            if (this.hasColumnById('_checkbox')) {\n                const val = '<input type=\"checkbox\" />';\n\n                row = [val].concat(row);\n            }\n        }\n\n        const _row = this.prepareRow(row, {rowIndex});\n        const index = this.rows.findIndex(row => row[0].rowIndex === rowIndex);\n        this.rows[index] = _row;\n\n        return _row;\n    }\n\n    updateCell(colIndex, rowIndex, options) {\n        let cell;\n        if (typeof colIndex === 'object') {\n            // cell object was passed,\n            // must have colIndex, rowIndex\n            cell = colIndex;\n            colIndex = cell.colIndex;\n            rowIndex = cell.rowIndex;\n            // the object passed must be merged with original cell\n            options = cell;\n        }\n        cell = this.getCell(colIndex, rowIndex);\n\n        // mutate object directly\n        for (let key in options) {\n            const newVal = options[key];\n            if (newVal !== undefined) {\n                cell[key] = newVal;\n            }\n        }\n\n        return cell;\n    }\n\n    updateColumn(colIndex, keyValPairs) {\n        const column = this.getColumn(colIndex);\n        for (let key in keyValPairs) {\n            const newVal = keyValPairs[key];\n            if (newVal !== undefined) {\n                column[key] = newVal;\n            }\n        }\n        return column;\n    }\n\n    filterRows(filters) {\n        return this.options.filterRows(this.rows, filters, this)\n            .then(result => {\n                if (!result) {\n                    result = this.getAllRowIndices();\n                }\n\n                if (!result.then) {\n                    result = Promise.resolve(result);\n                }\n\n                return result.then(rowsToShow => {\n                    this._filteredRows = rowsToShow;\n\n                    const rowsToHide = this.getAllRowIndices()\n                        .filter(index => !rowsToShow.includes(index));\n\n                    return {\n                        rowsToHide,\n                        rowsToShow\n                    };\n                });\n            });\n    }\n\n    getFilteredRowIndices() {\n        return this._filteredRows || this.getAllRowIndices();\n    }\n\n    getAllRowIndices() {\n        return this.rows.map(row => row.meta.rowIndex);\n    }\n\n    getRowCount() {\n        return this.rowCount;\n    }\n\n    _getNextRowCount() {\n        const val = this.rowCount;\n\n        this.rowCount++;\n        return val;\n    }\n\n    getRows(start, end) {\n        return this.rows.slice(start, end);\n    }\n\n    getRowsForView(start, end) {\n        const rows = this.rowViewOrder.map(i => this.rows[i]);\n        return rows.slice(start, end);\n    }\n\n    getColumns(skipStandardColumns) {\n        let columns = this.columns;\n\n        if (skipStandardColumns) {\n            columns = columns.slice(this.getStandardColumnCount());\n        }\n\n        return columns;\n    }\n\n    getStandardColumnCount() {\n        if (this.options.checkboxColumn && this.options.serialNoColumn) {\n            return 2;\n        }\n\n        if (this.options.checkboxColumn || this.options.serialNoColumn) {\n            return 1;\n        }\n\n        return 0;\n    }\n\n    getColumnCount(skipStandardColumns) {\n        let val = this.columns.length;\n\n        if (skipStandardColumns) {\n            val = val - this.getStandardColumnCount();\n        }\n\n        return val;\n    }\n\n    getColumn(colIndex) {\n        colIndex = +colIndex;\n\n        if (colIndex < 0) {\n            // negative indexes\n            colIndex = this.columns.length + colIndex;\n        }\n\n        return this.columns.find(col => col.colIndex === colIndex);\n    }\n\n    getColumnById(id) {\n        return this.columns.find(col => col.id === id);\n    }\n\n    getRow(rowIndex) {\n        rowIndex = +rowIndex;\n        return this.rows[rowIndex];\n    }\n\n    getCell(colIndex, rowIndex) {\n        rowIndex = +rowIndex;\n        colIndex = +colIndex;\n        return this.getRow(rowIndex)[colIndex];\n    }\n\n    getChildren(parentRowIndex) {\n        parentRowIndex = +parentRowIndex;\n        const parentIndent = this.getRow(parentRowIndex).meta.indent;\n        const out = [];\n\n        for (let i = parentRowIndex + 1; i < this.rowCount; i++) {\n            const row = this.getRow(i);\n            if (isNaN(row.meta.indent)) continue;\n\n            if (row.meta.indent > parentIndent) {\n                out.push(i);\n            }\n\n            if (row.meta.indent === parentIndent) {\n                break;\n            }\n        }\n\n        return out;\n    }\n\n    getImmediateChildren(parentRowIndex) {\n        parentRowIndex = +parentRowIndex;\n        const parentIndent = this.getRow(parentRowIndex).meta.indent;\n        const out = [];\n        const childIndent = parentIndent + 1;\n\n        for (let i = parentRowIndex + 1; i < this.rowCount; i++) {\n            const row = this.getRow(i);\n            if (isNaN(row.meta.indent) || row.meta.indent > childIndent) continue;\n\n            if (row.meta.indent === childIndent) {\n                out.push(i);\n            }\n\n            if (row.meta.indent === parentIndent) {\n                break;\n            }\n        }\n\n        return out;\n    }\n\n    get() {\n        return {\n            columns: this.columns,\n            rows: this.rows\n        };\n    }\n\n    /**\n     * Returns the original data which was passed\n     * based on rowIndex\n     * @param {Number} rowIndex\n     * @returns Array|Object\n     * @memberof DataManager\n     */\n    getData(rowIndex) {\n        return this.data[rowIndex];\n    }\n\n    hasColumn(name) {\n        return Boolean(this.columns.find(col => col.content === name));\n    }\n\n    hasColumnById(id) {\n        return Boolean(this.columns.find(col => col.id === id));\n    }\n\n    getColumnIndex(name) {\n        return this.columns.findIndex(col => col.content === name);\n    }\n\n    getColumnIndexById(id) {\n        return this.columns.findIndex(col => col.id === id);\n    }\n\n    getCheckboxHTML() {\n        return '<input type=\"checkbox\" />';\n    }\n}\n\n// Custom Errors\nclass DataError extends TypeError {}\n\n/* eslint-disable max-len */\n\n// Icons from https://feathericons.com/\n\nlet icons = {\n    chevronDown: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-chevron-down\"><polyline points=\"6 9 12 15 18 9\"></polyline></svg>',\n    chevronRight: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-chevron-right\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>'\n};\n\nclass CellManager {\n    constructor(instance) {\n        this.instance = instance;\n        linkProperties(this, this.instance, [\n            'wrapper',\n            'options',\n            'style',\n            'header',\n            'bodyScrollable',\n            'columnmanager',\n            'rowmanager',\n            'datamanager',\n            'keyboard'\n        ]);\n\n        this.bindEvents();\n    }\n\n    bindEvents() {\n        this.bindFocusCell();\n        this.bindEditCell();\n        this.bindKeyboardSelection();\n        this.bindCopyCellContents();\n        this.bindMouseEvents();\n        this.bindTreeEvents();\n    }\n\n    bindFocusCell() {\n        this.bindKeyboardNav();\n    }\n\n    bindEditCell() {\n        this.$editingCell = null;\n\n        $.on(this.bodyScrollable, 'dblclick', '.dt-cell', (e, cell) => {\n            this.activateEditing(cell);\n        });\n\n        this.keyboard.on('enter', () => {\n            if (this.$focusedCell && !this.$editingCell) {\n                // enter keypress on focused cell\n                this.activateEditing(this.$focusedCell);\n            } else if (this.$editingCell) {\n                // enter keypress on editing cell\n                this.deactivateEditing();\n            }\n        });\n    }\n\n    bindKeyboardNav() {\n        const focusLastCell = (direction) => {\n            if (!this.$focusedCell || this.$editingCell) {\n                return false;\n            }\n\n            let $cell = this.$focusedCell;\n            const {\n                rowIndex,\n                colIndex\n            } = $.data($cell);\n\n            if (direction === 'left') {\n                $cell = this.getLeftMostCell$(rowIndex);\n            } else if (direction === 'right') {\n                $cell = this.getRightMostCell$(rowIndex);\n            } else if (direction === 'up') {\n                $cell = this.getTopMostCell$(colIndex);\n            } else if (direction === 'down') {\n                $cell = this.getBottomMostCell$(colIndex);\n            }\n\n            this.focusCell($cell);\n            return true;\n        };\n\n        ['left', 'right', 'up', 'down', 'tab', 'shift+tab']\n            .map(direction => this.keyboard.on(direction, () => this.focusCellInDirection(direction)));\n\n        ['left', 'right', 'up', 'down']\n            .map(direction => this.keyboard.on(`ctrl+${direction}`, () => focusLastCell(direction)));\n\n        this.keyboard.on('esc', () => {\n            this.deactivateEditing(false);\n            this.columnmanager.toggleFilter(false);\n        });\n\n        if (this.options.inlineFilters) {\n            this.keyboard.on('ctrl+f', (e) => {\n                const $cell = $.closest('.dt-cell', e.target);\n                const { colIndex } = $.data($cell);\n\n                this.activateFilter(colIndex);\n                return true;\n            });\n\n            $.on(this.header, 'focusin', '.dt-filter', () => {\n                this.unfocusCell(this.$focusedCell);\n            });\n        }\n    }\n\n    bindKeyboardSelection() {\n        const getNextSelectionCursor = (direction) => {\n            let $selectionCursor = this.getSelectionCursor();\n\n            if (direction === 'left') {\n                $selectionCursor = this.getLeftCell$($selectionCursor);\n            } else if (direction === 'right') {\n                $selectionCursor = this.getRightCell$($selectionCursor);\n            } else if (direction === 'up') {\n                $selectionCursor = this.getAboveCell$($selectionCursor);\n            } else if (direction === 'down') {\n                $selectionCursor = this.getBelowCell$($selectionCursor);\n            }\n\n            return $selectionCursor;\n        };\n\n        ['left', 'right', 'up', 'down']\n            .map(direction =>\n                this.keyboard.on(`shift+${direction}`, () => this.selectArea(getNextSelectionCursor(direction))));\n    }\n\n    bindCopyCellContents() {\n        this.keyboard.on('ctrl+c', () => {\n            const noOfCellsCopied = this.copyCellContents(this.$focusedCell, this.$selectionCursor);\n            const message = this.instance.translate('{count} cells copied', {\n                count: noOfCellsCopied\n            });\n\n            if (noOfCellsCopied) {\n                this.instance.showToastMessage(message, 2);\n            }\n        });\n\n        if (this.options.pasteFromClipboard) {\n            this.keyboard.on('ctrl+v', (e) => {\n                // hack\n                // https://stackoverflow.com/a/2177059/5353542\n                this.instance.pasteTarget.focus();\n\n                setTimeout(() => {\n                    const data = this.instance.pasteTarget.value;\n                    this.instance.pasteTarget.value = '';\n                    this.pasteContentInCell(data);\n                }, 10);\n\n                return false;\n            });\n        }\n    }\n\n    bindMouseEvents() {\n        let mouseDown = null;\n\n        $.on(this.bodyScrollable, 'mousedown', '.dt-cell', (e) => {\n            mouseDown = true;\n            this.focusCell($(e.delegatedTarget));\n        });\n\n        $.on(this.bodyScrollable, 'mouseup', () => {\n            mouseDown = false;\n        });\n\n        const selectArea = (e) => {\n            if (!mouseDown) return;\n            this.selectArea($(e.delegatedTarget));\n        };\n\n        $.on(this.bodyScrollable, 'mousemove', '.dt-cell', throttle$1(selectArea, 50));\n    }\n\n    bindTreeEvents() {\n        $.on(this.bodyScrollable, 'click', '.dt-tree-node__toggle', (e, $toggle) => {\n            const $cell = $.closest('.dt-cell', $toggle);\n            const { rowIndex } = $.data($cell);\n\n            if ($cell.classList.contains('dt-cell--tree-close')) {\n                this.rowmanager.openSingleNode(rowIndex);\n            } else {\n                this.rowmanager.closeSingleNode(rowIndex);\n            }\n        });\n    }\n\n    focusCell($cell, {\n        skipClearSelection = 0,\n        skipDOMFocus = 0,\n        skipScrollToCell = 0\n    } = {}) {\n        if (!$cell) return;\n\n        // don't focus if already editing cell\n        if ($cell === this.$editingCell) return;\n\n        const {\n            colIndex,\n            isHeader\n        } = $.data($cell);\n        if (isHeader) {\n            return;\n        }\n\n        const column = this.columnmanager.getColumn(colIndex);\n        if (column.focusable === false) {\n            return;\n        }\n\n        if (!skipScrollToCell) {\n            this.scrollToCell($cell);\n        }\n\n        this.deactivateEditing();\n        if (!skipClearSelection) {\n            this.clearSelection();\n        }\n\n        if (this.$focusedCell) {\n            this.$focusedCell.classList.remove('dt-cell--focus');\n        }\n\n        this.$focusedCell = $cell;\n        $cell.classList.add('dt-cell--focus');\n\n        if (!skipDOMFocus) {\n            // so that keyboard nav works\n            $cell.focus();\n        }\n\n        this.highlightRowColumnHeader($cell);\n    }\n\n    unfocusCell($cell) {\n        if (!$cell) return;\n\n        // remove cell border\n        $cell.classList.remove('dt-cell--focus');\n        this.$focusedCell = null;\n\n        // reset header background\n        if (this.lastHeaders) {\n            this.lastHeaders.forEach(header => header && header.classList.remove('dt-cell--highlight'));\n        }\n    }\n\n    highlightRowColumnHeader($cell) {\n        const {\n            colIndex,\n            rowIndex\n        } = $.data($cell);\n\n        const srNoColIndex = this.datamanager.getColumnIndexById('_rowIndex');\n        const colHeaderSelector = `.dt-cell--header-${colIndex}`;\n        const rowHeaderSelector = `.dt-cell--${srNoColIndex}-${rowIndex}`;\n\n        if (this.lastHeaders) {\n            this.lastHeaders.forEach(header => header && header.classList.remove('dt-cell--highlight'));\n        }\n\n        const colHeader = $(colHeaderSelector, this.wrapper);\n        const rowHeader = $(rowHeaderSelector, this.wrapper);\n\n        this.lastHeaders = [colHeader, rowHeader];\n        this.lastHeaders.forEach(header => header && header.classList.add('dt-cell--highlight'));\n    }\n\n    selectAreaOnClusterChanged() {\n        if (!(this.$focusedCell && this.$selectionCursor)) return;\n        const {\n            colIndex,\n            rowIndex\n        } = $.data(this.$selectionCursor);\n        const $cell = this.getCell$(colIndex, rowIndex);\n\n        if (!$cell || $cell === this.$selectionCursor) return;\n\n        // selectArea needs $focusedCell\n        const fCell = $.data(this.$focusedCell);\n        this.$focusedCell = this.getCell$(fCell.colIndex, fCell.rowIndex);\n\n        this.selectArea($cell);\n    }\n\n    focusCellOnClusterChanged() {\n        if (!this.$focusedCell) return;\n\n        const {\n            colIndex,\n            rowIndex\n        } = $.data(this.$focusedCell);\n        const $cell = this.getCell$(colIndex, rowIndex);\n\n        if (!$cell) return;\n        // this function is called after hyperlist renders the rows after scroll,\n        // focusCell calls clearSelection which resets the area selection\n        // so a flag to skip it\n        // we also skip DOM focus and scroll to cell\n        // because it fights with the user scroll\n        this.focusCell($cell, {\n            skipClearSelection: 1,\n            skipDOMFocus: 1,\n            skipScrollToCell: 1\n        });\n    }\n\n    selectArea($selectionCursor) {\n        if (!this.$focusedCell) return;\n\n        if (this._selectArea(this.$focusedCell, $selectionCursor)) {\n            // valid selection\n            this.$selectionCursor = $selectionCursor;\n        }\n    }\n\n    _selectArea($cell1, $cell2) {\n        if ($cell1 === $cell2) return false;\n\n        const cells = this.getCellsInRange($cell1, $cell2);\n        if (!cells) return false;\n\n        this.clearSelection();\n        this._selectedCells = cells.map(index => this.getCell$(...index));\n        requestAnimationFrame(() => {\n            this._selectedCells.map($cell => $cell.classList.add('dt-cell--highlight'));\n        });\n        return true;\n    }\n\n    getCellsInRange($cell1, $cell2) {\n        let colIndex1, rowIndex1, colIndex2, rowIndex2;\n\n        if (typeof $cell1 === 'number') {\n            [colIndex1, rowIndex1, colIndex2, rowIndex2] = arguments;\n        } else\n        if (typeof $cell1 === 'object') {\n            if (!($cell1 && $cell2)) {\n                return false;\n            }\n\n            const cell1 = $.data($cell1);\n            const cell2 = $.data($cell2);\n\n            colIndex1 = +cell1.colIndex;\n            rowIndex1 = +cell1.rowIndex;\n            colIndex2 = +cell2.colIndex;\n            rowIndex2 = +cell2.rowIndex;\n        }\n\n        if (rowIndex1 > rowIndex2) {\n            [rowIndex1, rowIndex2] = [rowIndex2, rowIndex1];\n        }\n\n        if (colIndex1 > colIndex2) {\n            [colIndex1, colIndex2] = [colIndex2, colIndex1];\n        }\n\n        if (this.isStandardCell(colIndex1) || this.isStandardCell(colIndex2)) {\n            return false;\n        }\n\n        const cells = [];\n        let colIndex = colIndex1;\n        let rowIndex = rowIndex1;\n        const rowIndices = [];\n\n        while (rowIndex <= rowIndex2) {\n            rowIndices.push(rowIndex);\n            rowIndex += 1;\n        }\n\n        rowIndices.map((rowIndex) => {\n            while (colIndex <= colIndex2) {\n                cells.push([colIndex, rowIndex]);\n                colIndex++;\n            }\n            colIndex = colIndex1;\n        });\n\n        return cells;\n    }\n\n    clearSelection() {\n        (this._selectedCells || [])\n            .forEach($cell => $cell.classList.remove('dt-cell--highlight'));\n\n        this._selectedCells = [];\n        this.$selectionCursor = null;\n    }\n\n    getSelectionCursor() {\n        return this.$selectionCursor || this.$focusedCell;\n    }\n\n    activateEditing($cell) {\n        this.focusCell($cell);\n        const {\n            rowIndex,\n            colIndex\n        } = $.data($cell);\n\n        const col = this.columnmanager.getColumn(colIndex);\n        if (col && (col.editable === false || col.focusable === false)) {\n            return;\n        }\n\n        const cell = this.getCell(colIndex, rowIndex);\n        if (cell && cell.editable === false) {\n            return;\n        }\n\n        if (this.$editingCell) {\n            const {\n                _rowIndex,\n                _colIndex\n            } = $.data(this.$editingCell);\n\n            if (rowIndex === _rowIndex && colIndex === _colIndex) {\n                // editing the same cell\n                return;\n            }\n        }\n\n        this.$editingCell = $cell;\n        $cell.classList.add('dt-cell--editing');\n\n        const $editCell = $('.dt-cell__edit', $cell);\n        $editCell.innerHTML = '';\n\n        const editor = this.getEditor(colIndex, rowIndex, cell.content, $editCell);\n\n        if (editor) {\n            this.currentCellEditor = editor;\n            // initialize editing input with cell value\n            editor.initValue(cell.content, rowIndex, col);\n        }\n    }\n\n    deactivateEditing(submitValue = true) {\n        if (submitValue) {\n            this.submitEditing();\n        }\n        // keep focus on the cell so that keyboard navigation works\n        if (this.$focusedCell) this.$focusedCell.focus();\n\n        if (!this.$editingCell) return;\n        this.$editingCell.classList.remove('dt-cell--editing');\n        this.$editingCell = null;\n    }\n\n    getEditor(colIndex, rowIndex, value, parent) {\n        const column = this.datamanager.getColumn(colIndex);\n        const row = this.datamanager.getRow(rowIndex);\n        const data = this.datamanager.getData(rowIndex);\n        let editor = this.options.getEditor ?\n            this.options.getEditor(colIndex, rowIndex, value, parent, column, row, data) :\n            this.getDefaultEditor(parent);\n\n        if (editor === false) {\n            // explicitly returned false\n            return false;\n        }\n        if (editor === undefined) {\n            // didn't return editor, fallback to default\n            editor = this.getDefaultEditor(parent);\n        }\n\n        return editor;\n    }\n\n    getDefaultEditor(parent) {\n        const $input = $.create('input', {\n            class: 'dt-input',\n            type: 'text',\n            inside: parent\n        });\n\n        return {\n            initValue(value) {\n                $input.focus();\n                $input.value = value;\n            },\n            getValue() {\n                return $input.value;\n            },\n            setValue(value) {\n                $input.value = value;\n            }\n        };\n    }\n\n    submitEditing() {\n        let promise = Promise.resolve();\n        if (!this.$editingCell) return promise;\n\n        const $cell = this.$editingCell;\n        const {\n            rowIndex,\n            colIndex\n        } = $.data($cell);\n        const col = this.datamanager.getColumn(colIndex);\n\n        if ($cell) {\n            const editor = this.currentCellEditor;\n\n            if (editor) {\n                let valuePromise = editor.getValue();\n\n                // convert to stubbed Promise\n                if (!valuePromise.then) {\n                    valuePromise = Promise.resolve(valuePromise);\n                }\n\n                promise = valuePromise.then((value) => {\n                    const oldValue = this.getCell(colIndex, rowIndex).content;\n\n                    if (oldValue === value) return false;\n\n                    const done = editor.setValue(value, rowIndex, col);\n\n                    // update cell immediately\n                    this.updateCell(colIndex, rowIndex, value, true);\n                    $cell.focus();\n\n                    if (done && done.then) {\n                        // revert to oldValue if promise fails\n                        done.catch((e) => {\n                            console.log(e);\n                            this.updateCell(colIndex, rowIndex, oldValue);\n                        });\n                    }\n                    return done;\n                });\n            }\n        }\n\n        this.currentCellEditor = null;\n        return promise;\n    }\n\n    copyCellContents($cell1, $cell2) {\n        if (!$cell2 && $cell1) {\n            // copy only focusedCell\n            const {\n                colIndex,\n                rowIndex\n            } = $.data($cell1);\n            const cell = this.getCell(colIndex, rowIndex);\n            copyTextToClipboard(cell.content);\n            return 1;\n        }\n        const cells = this.getCellsInRange($cell1, $cell2);\n\n        if (!cells) return 0;\n\n        const rows = cells\n            // get cell objects\n            .map(index => this.getCell(...index))\n            // convert to array of rows\n            .reduce((acc, curr) => {\n                const rowIndex = curr.rowIndex;\n\n                acc[rowIndex] = acc[rowIndex] || [];\n                acc[rowIndex].push(curr.content);\n\n                return acc;\n            }, []);\n\n        const values = rows\n            // join values by tab\n            .map(row => row.join('\\t'))\n            // join rows by newline\n            .join('\\n');\n\n        copyTextToClipboard(values);\n\n        // return no of cells copied\n        return rows.reduce((total, row) => total + row.length, 0);\n    }\n\n    pasteContentInCell(data) {\n        if (!this.$focusedCell) return;\n\n        const matrix = data\n            .split('\\n')\n            .map(row => row.split('\\t'))\n            .filter(row => row.length && row.every(it => it));\n\n        let { colIndex, rowIndex } = $.data(this.$focusedCell);\n\n        let focusedCell = {\n            colIndex: +colIndex,\n            rowIndex: +rowIndex\n        };\n\n        matrix.forEach((row, i) => {\n            let rowIndex = i + focusedCell.rowIndex;\n            row.forEach((cell, j) => {\n                let colIndex = j + focusedCell.colIndex;\n                this.updateCell(colIndex, rowIndex, cell, true);\n            });\n        });\n    }\n\n    activateFilter(colIndex) {\n        this.columnmanager.toggleFilter();\n        this.columnmanager.focusFilter(colIndex);\n\n        if (!this.columnmanager.isFilterShown) {\n            // put focus back on cell\n            this.$focusedCell && this.$focusedCell.focus();\n        }\n    }\n\n    updateCell(colIndex, rowIndex, value, refreshHtml = false) {\n        const cell = this.datamanager.updateCell(colIndex, rowIndex, {\n            content: value\n        });\n        this.refreshCell(cell, refreshHtml);\n    }\n\n    refreshCell(cell, refreshHtml = false) {\n        const $cell = $(this.selector(cell.colIndex, cell.rowIndex), this.bodyScrollable);\n        $cell.innerHTML = this.getCellContent(cell, refreshHtml);\n    }\n\n    toggleTreeButton(rowIndex, flag) {\n        const colIndex = this.columnmanager.getFirstColumnIndex();\n        const $cell = this.getCell$(colIndex, rowIndex);\n        if ($cell) {\n            $cell.classList[flag ? 'remove' : 'add']('dt-cell--tree-close');\n        }\n    }\n\n    isStandardCell(colIndex) {\n        // Standard cells are in Sr. No and Checkbox column\n        return colIndex < this.columnmanager.getFirstColumnIndex();\n    }\n\n    focusCellInDirection(direction) {\n        if (!this.$focusedCell || (this.$editingCell && ['left', 'right', 'up', 'down'].includes(direction))) {\n            return false;\n        } else if (this.$editingCell && ['tab', 'shift+tab'].includes(direction)) {\n            this.deactivateEditing();\n        }\n\n        let $cell = this.$focusedCell;\n\n        if (direction === 'left' || direction === 'shift+tab') {\n            $cell = this.getLeftCell$($cell);\n        } else if (direction === 'right' || direction === 'tab') {\n            $cell = this.getRightCell$($cell);\n        } else if (direction === 'up') {\n            $cell = this.getAboveCell$($cell);\n        } else if (direction === 'down') {\n            $cell = this.getBelowCell$($cell);\n        }\n\n        if (!$cell) {\n            return false;\n        }\n\n        const {\n            colIndex\n        } = $.data($cell);\n        const column = this.columnmanager.getColumn(colIndex);\n\n        if (!column.focusable) {\n            let $prevFocusedCell = this.$focusedCell;\n            this.unfocusCell($prevFocusedCell);\n            this.$focusedCell = $cell;\n            let ret = this.focusCellInDirection(direction);\n            if (!ret) {\n                this.focusCell($prevFocusedCell);\n            }\n            return ret;\n        }\n\n        this.focusCell($cell);\n        return true;\n    }\n\n    getCell$(colIndex, rowIndex) {\n        return $(this.selector(colIndex, rowIndex), this.bodyScrollable);\n    }\n\n    getAboveCell$($cell) {\n        const {\n            colIndex\n        } = $.data($cell);\n\n        let $aboveRow = $cell.parentElement.previousElementSibling;\n        while ($aboveRow && $aboveRow.classList.contains('dt-row--hide')) {\n            $aboveRow = $aboveRow.previousElementSibling;\n        }\n\n        if (!$aboveRow) return $cell;\n        return $(`.dt-cell--col-${colIndex}`, $aboveRow);\n    }\n\n    getBelowCell$($cell) {\n        const {\n            colIndex\n        } = $.data($cell);\n\n        let $belowRow = $cell.parentElement.nextElementSibling;\n        while ($belowRow && $belowRow.classList.contains('dt-row--hide')) {\n            $belowRow = $belowRow.nextElementSibling;\n        }\n\n        if (!$belowRow) return $cell;\n        return $(`.dt-cell--col-${colIndex}`, $belowRow);\n    }\n\n    getLeftCell$($cell) {\n        return $cell.previousElementSibling;\n    }\n\n    getRightCell$($cell) {\n        return $cell.nextElementSibling;\n    }\n\n    getLeftMostCell$(rowIndex) {\n        return this.getCell$(this.columnmanager.getFirstColumnIndex(), rowIndex);\n    }\n\n    getRightMostCell$(rowIndex) {\n        return this.getCell$(this.columnmanager.getLastColumnIndex(), rowIndex);\n    }\n\n    getTopMostCell$(colIndex) {\n        return this.getCell$(colIndex, this.rowmanager.getFirstRowIndex());\n    }\n\n    getBottomMostCell$(colIndex) {\n        return this.getCell$(colIndex, this.rowmanager.getLastRowIndex());\n    }\n\n    getCell(colIndex, rowIndex) {\n        return this.instance.datamanager.getCell(colIndex, rowIndex);\n    }\n\n    getRowHeight() {\n        return $.style($('.dt-row', this.bodyScrollable), 'height');\n    }\n\n    scrollToCell($cell) {\n        if ($.inViewport($cell, this.bodyScrollable)) return false;\n\n        const {\n            rowIndex\n        } = $.data($cell);\n        this.rowmanager.scrollToRow(rowIndex);\n        return false;\n    }\n\n    getRowCountPerPage() {\n        return Math.ceil(this.instance.getViewportHeight() / this.getRowHeight());\n    }\n\n    getCellHTML(cell) {\n        const {\n            rowIndex,\n            colIndex,\n            isHeader,\n            isFilter,\n            isTotalRow\n        } = cell;\n        const dataAttr = makeDataAttributeString({\n            rowIndex,\n            colIndex,\n            isHeader,\n            isFilter,\n            isTotalRow\n        });\n\n        const row = this.datamanager.getRow(rowIndex);\n\n        const isBodyCell = !(isHeader || isFilter || isTotalRow);\n\n        const className = [\n            'dt-cell',\n            'dt-cell--col-' + colIndex,\n            isBodyCell ? `dt-cell--${colIndex}-${rowIndex}` : '',\n            isBodyCell ? 'dt-cell--row-' + rowIndex : '',\n            isHeader ? 'dt-cell--header' : '',\n            isHeader ? `dt-cell--header-${colIndex}` : '',\n            isFilter ? 'dt-cell--filter' : '',\n            isBodyCell && (row && row.meta.isTreeNodeClose) ? 'dt-cell--tree-close' : ''\n        ].join(' ');\n\n        return `\n            <div class=\"${className}\" ${dataAttr} tabindex=\"0\">\n                ${this.getCellContent(cell)}\n            </div>\n        `;\n    }\n\n    getCellContent(cell, refreshHtml = false) {\n        const {\n            isHeader,\n            isFilter,\n            colIndex\n        } = cell;\n\n        const editable = !isHeader && cell.editable !== false;\n        const editCellHTML = editable ? this.getEditCellHTML(colIndex) : '';\n\n        const sortable = isHeader && cell.sortable !== false;\n        const sortIndicator = sortable ?\n            `<span class=\"sort-indicator\">\n                ${this.options.sortIndicator[cell.sortOrder]}\n            </span>` :\n            '';\n\n        const resizable = isHeader && cell.resizable !== false;\n        const resizeColumn = resizable ? '<span class=\"dt-cell__resize-handle\"></span>' : '';\n\n        const hasDropdown = isHeader && cell.dropdown !== false;\n        const dropdown = hasDropdown ? this.columnmanager.getDropdownHTML() : '';\n\n        let customFormatter = CellManager.getCustomCellFormatter(cell);\n        let contentHTML;\n        if (isHeader || isFilter || !customFormatter) {\n            contentHTML = cell.content;\n        } else {\n            if (!cell.html || refreshHtml) {\n                const row = this.datamanager.getRow(cell.rowIndex);\n                const data = this.datamanager.getData(cell.rowIndex);\n                contentHTML = customFormatter(cell.content, row, cell.column, data);\n            } else {\n                contentHTML = cell.html;\n            }\n        }\n\n        cell.html = contentHTML;\n\n        if (this.options.treeView && !(isHeader || isFilter) && cell.indent !== undefined) {\n            const nextRow = this.datamanager.getRow(cell.rowIndex + 1);\n            const addToggle = nextRow && nextRow.meta.indent > cell.indent;\n            const leftPadding = 20;\n            const unit = 'px';\n\n            // Add toggle and indent in the first column\n            const firstColumnIndex = this.datamanager.getColumnIndexById('_rowIndex') + 1;\n            if (firstColumnIndex === cell.colIndex) {\n                const padding = ((cell.indent || 0)) * leftPadding;\n                const toggleHTML = addToggle ?\n                    `<span class=\"dt-tree-node__toggle\" style=\"left: ${padding - leftPadding}${unit}\">\n                        <span class=\"icon-open\">${icons.chevronDown}</span>\n                        <span class=\"icon-close\">${icons.chevronRight}</span>\n                    </span>` : '';\n                contentHTML = `<span class=\"dt-tree-node\" style=\"padding-left: ${padding}${unit}\">\n                    ${toggleHTML}\n                    <span>${contentHTML}</span>\n                </span>`;\n            }\n        }\n\n        const className = [\n            'dt-cell__content',\n            isHeader ? `dt-cell__content--header-${colIndex}` : `dt-cell__content--col-${colIndex}`\n        ].join(' ');\n\n        let cellContentHTML = `\n            <div class=\"${className}\">\n                ${contentHTML}\n                ${sortIndicator}\n                ${resizeColumn}\n                ${dropdown}\n            </div>\n            ${editCellHTML}\n        `;\n\n        let div = document.createElement('div');\n        div.innerHTML = contentHTML;\n\n        let textContent = div.textContent;\n        textContent = textContent.replace(/\\s+/g, ' ').trim();\n\n        cellContentHTML = cellContentHTML.replace('>', ` title=\"${escapeHTML(textContent)}\">`);\n\n        return cellContentHTML;\n    }\n\n    getEditCellHTML(colIndex) {\n        return `<div class=\"dt-cell__edit dt-cell__edit--col-${colIndex}\"></div>`;\n    }\n\n    selector(colIndex, rowIndex) {\n        return `.dt-cell--${colIndex}-${rowIndex}`;\n    }\n\n    static getCustomCellFormatter(cell) {\n        return cell.format || (cell.column && cell.column.format) || null;\n    }\n}\n\nclass ColumnManager {\n    constructor(instance) {\n        this.instance = instance;\n\n        linkProperties(this, this.instance, [\n            'options',\n            'fireEvent',\n            'header',\n            'datamanager',\n            'cellmanager',\n            'style',\n            'wrapper',\n            'rowmanager',\n            'bodyScrollable',\n            'bodyRenderer'\n        ]);\n\n        this.bindEvents();\n    }\n\n    renderHeader() {\n        this.header.innerHTML = '<div></div>';\n        this.refreshHeader();\n    }\n\n    refreshHeader() {\n        const columns = this.datamanager.getColumns();\n\n        // refresh html\n        $('div', this.header).innerHTML = this.getHeaderHTML(columns);\n\n        this.$filterRow = $('.dt-row-filter', this.header);\n        if (this.$filterRow) {\n            $.style(this.$filterRow, { display: 'none' });\n        }\n        // reset columnMap\n        this.$columnMap = [];\n        this.bindMoveColumn();\n    }\n\n    getHeaderHTML(columns) {\n        let html = this.rowmanager.getRowHTML(columns, {\n            isHeader: 1\n        });\n        if (this.options.inlineFilters) {\n            html += this.rowmanager.getRowHTML(columns, {\n                isFilter: 1\n            });\n        }\n        return html;\n    }\n\n    bindEvents() {\n        this.bindDropdown();\n        this.bindResizeColumn();\n        this.bindPerfectColumnWidth();\n        this.bindFilter();\n    }\n\n    bindDropdown() {\n        let toggleClass = '.dt-dropdown__toggle';\n        let dropdownClass = '.dt-dropdown__list';\n\n        // attach the dropdown list to container\n        this.instance.dropdownContainer.innerHTML = this.getDropdownListHTML();\n        this.$dropdownList = this.instance.dropdownContainer.firstElementChild;\n\n        $.on(this.header, 'click', toggleClass, e => {\n            this.openDropdown(e);\n        });\n\n        const deactivateDropdownOnBodyClick = (e) => {\n            const selector = [\n                toggleClass, toggleClass + ' *',\n                dropdownClass, dropdownClass + ' *'\n            ].join(',');\n            if (e.target.matches(selector)) return;\n            deactivateDropdown();\n        };\n        $.on(document.body, 'click', deactivateDropdownOnBodyClick);\n        document.addEventListener('scroll', deactivateDropdown, true);\n\n        this.instance.on('onDestroy', () => {\n            $.off(document.body, 'click', deactivateDropdownOnBodyClick);\n            $.off(document, 'scroll', deactivateDropdown);\n        });\n\n        $.on(this.$dropdownList, 'click', '.dt-dropdown__list-item', (e, $item) => {\n            if (!this._dropdownActiveColIndex) return;\n            const dropdownItems = this.options.headerDropdown;\n            const { index } = $.data($item);\n            const colIndex = this._dropdownActiveColIndex;\n            let callback = dropdownItems[index].action;\n\n            callback && callback.call(this.instance, this.getColumn(colIndex));\n            this.hideDropdown();\n        });\n\n        const _this = this;\n        function deactivateDropdown(e) {\n            _this.hideDropdown();\n        }\n\n        this.hideDropdown();\n    }\n\n    openDropdown(e) {\n        if (!this._dropdownWidth) {\n            $.style(this.$dropdownList, { display: '' });\n            this._dropdownWidth = $.style(this.$dropdownList, 'width');\n        }\n        $.style(this.$dropdownList, {\n            display: '',\n            left: (e.clientX - this._dropdownWidth + 4) + 'px',\n            top: (e.clientY + 4) + 'px'\n        });\n        const $cell = $.closest('.dt-cell', e.target);\n        const { colIndex } = $.data($cell);\n        this._dropdownActiveColIndex = colIndex;\n    }\n\n    hideDropdown() {\n        $.style(this.$dropdownList, {\n            display: 'none'\n        });\n        this._dropdownActiveColIndex = null;\n    }\n\n    bindResizeColumn() {\n        let isDragging = false;\n        let $resizingCell, startWidth, startX;\n\n        $.on(this.header, 'mousedown', '.dt-cell .dt-cell__resize-handle', (e, $handle) => {\n            document.body.classList.add('dt-resize');\n            const $cell = $handle.parentNode.parentNode;\n            $resizingCell = $cell;\n            const {\n                colIndex\n            } = $.data($resizingCell);\n            const col = this.getColumn(colIndex);\n\n            if (col && col.resizable === false) {\n                return;\n            }\n\n            isDragging = true;\n            startWidth = $.style($('.dt-cell__content', $resizingCell), 'width');\n            startX = e.pageX;\n        });\n\n        const onMouseup = (e) => {\n            document.body.classList.remove('dt-resize');\n            if (!$resizingCell) return;\n            isDragging = false;\n\n            const {\n                colIndex\n            } = $.data($resizingCell);\n            this.setColumnWidth(colIndex);\n            this.style.setBodyStyle();\n            $resizingCell = null;\n        };\n        $.on(document.body, 'mouseup', onMouseup);\n        this.instance.on('onDestroy', () => {\n            $.off(document.body, 'mouseup', onMouseup);\n        });\n\n        const onMouseMove = (e) => {\n            if (!isDragging) return;\n            let delta = e.pageX - startX;\n            if (this.options.direction === 'rtl') {\n                delta = -1 * delta;\n            }\n            const finalWidth = startWidth + delta;\n            const {\n                colIndex\n            } = $.data($resizingCell);\n\n            let columnMinWidth = this.options.minimumColumnWidth;\n            if (columnMinWidth > finalWidth) {\n                // don't resize past 30 pixels\n                return;\n            }\n            this.datamanager.updateColumn(colIndex, {\n                width: finalWidth\n            });\n            this.setColumnHeaderWidth(colIndex);\n        };\n        $.on(document.body, 'mousemove', onMouseMove);\n        this.instance.on('onDestroy', () => {\n            $.off(document.body, 'mousemove', onMouseMove);\n        });\n    }\n\n    bindPerfectColumnWidth() {\n        $.on(this.header, 'dblclick', '.dt-cell .dt-cell__resize-handle', (e, $handle) => {\n            const $cell = $handle.parentNode.parentNode;\n            const { colIndex } = $.data($cell);\n\n            let longestCell = this.bodyRenderer.visibleRows\n                .map(d => d[colIndex])\n                .reduce((acc, curr) => acc.content.length > curr.content.length ? acc : curr);\n\n            let $longestCellHTML = this.cellmanager.getCellHTML(longestCell);\n            let $div = document.createElement('div');\n            $div.innerHTML = $longestCellHTML;\n            let cellText = $div.querySelector('.dt-cell__content').textContent;\n\n            let {\n                borderLeftWidth,\n                borderRightWidth,\n                paddingLeft,\n                paddingRight\n            } = $.getStyle(this.bodyScrollable.querySelector('.dt-cell__content'));\n\n            let padding = [borderLeftWidth, borderRightWidth, paddingLeft, paddingRight]\n                .map(parseFloat)\n                .reduce((sum, val) => sum + val);\n\n            let width = $.measureTextWidth(cellText) + padding;\n            this.datamanager.updateColumn(colIndex, { width });\n            this.setColumnHeaderWidth(colIndex);\n            this.setColumnWidth(colIndex);\n        });\n    }\n\n    bindMoveColumn() {\n        if (this.options.disableReorderColumn) return;\n\n        const $parent = $('.dt-row', this.header);\n\n        this.sortable = Sortable.create($parent, {\n            onEnd: (e) => {\n                const {\n                    oldIndex,\n                    newIndex\n                } = e;\n                const $draggedCell = e.item;\n                const {\n                    colIndex\n                } = $.data($draggedCell);\n                if (+colIndex === newIndex) return;\n\n                this.switchColumn(oldIndex, newIndex);\n            },\n            preventOnFilter: false,\n            filter: '.dt-cell__resize-handle, .dt-dropdown',\n            chosenClass: 'dt-cell--dragging',\n            animation: 150\n        });\n    }\n\n    sortColumn(colIndex, nextSortOrder) {\n        this.instance.freeze();\n        this.sortRows(colIndex, nextSortOrder)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => this.instance.unfreeze())\n            .then(() => {\n                this.fireEvent('onSortColumn', this.getColumn(colIndex));\n            });\n    }\n\n    removeColumn(colIndex) {\n        const removedCol = this.getColumn(colIndex);\n        this.instance.freeze();\n        this.datamanager.removeColumn(colIndex)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => this.instance.unfreeze())\n            .then(() => {\n                this.fireEvent('onRemoveColumn', removedCol);\n            });\n    }\n\n    switchColumn(oldIndex, newIndex) {\n        this.instance.freeze();\n        this.datamanager.switchColumn(oldIndex, newIndex)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => {\n                this.setColumnWidth(oldIndex);\n                this.setColumnWidth(newIndex);\n                this.instance.unfreeze();\n            })\n            .then(() => {\n                this.fireEvent('onSwitchColumn',\n                    this.getColumn(oldIndex), this.getColumn(newIndex)\n                );\n            });\n    }\n\n    toggleFilter(flag) {\n        if (!this.options.inlineFilters) return;\n\n        let showFilter;\n        if (flag === undefined) {\n            showFilter = !this.isFilterShown;\n        } else {\n            showFilter = flag;\n        }\n\n        if (showFilter) {\n            $.style(this.$filterRow, { display: '' });\n        } else {\n            $.style(this.$filterRow, { display: 'none' });\n        }\n\n        this.isFilterShown = showFilter;\n        this.style.setBodyStyle();\n    }\n\n    focusFilter(colIndex) {\n        if (!this.isFilterShown) return;\n\n        const $filterInput = $(`.dt-cell--col-${colIndex} .dt-filter`, this.$filterRow);\n        $filterInput.focus();\n    }\n\n    bindFilter() {\n        if (!this.options.inlineFilters) return;\n        const handler = e => {\n            this.applyFilter(this.getAppliedFilters());\n        };\n        $.on(this.header, 'keydown', '.dt-filter', debounce$1(handler, 300));\n    }\n\n    applyFilter(filters) {\n        this.datamanager.filterRows(filters)\n            .then(({\n                rowsToShow\n            }) => {\n                this.rowmanager.showRows(rowsToShow);\n            });\n    }\n\n    getAppliedFilters() {\n        const filters = {};\n        $.each('.dt-filter', this.header).map((input) => {\n            const value = input.value;\n            if (value) {\n                filters[input.dataset.colIndex] = value;\n            }\n        });\n        return filters;\n    }\n\n    applyDefaultSortOrder() {\n        // sort rows if any 1 column has a default sortOrder set\n        const columnsToSort = this.getColumns().filter(col => col.sortOrder !== 'none');\n\n        if (columnsToSort.length === 1) {\n            const column = columnsToSort[0];\n            this.sortColumn(column.colIndex, column.sortOrder);\n        }\n    }\n\n    sortRows(colIndex, sortOrder) {\n        return this.datamanager.sortRows(colIndex, sortOrder);\n    }\n\n    getColumn(colIndex) {\n        return this.datamanager.getColumn(colIndex);\n    }\n\n    getColumns() {\n        return this.datamanager.getColumns();\n    }\n\n    setColumnWidth(colIndex, width) {\n        colIndex = +colIndex;\n\n        let columnWidth = width || this.getColumn(colIndex).width;\n\n        const selector = [\n            `.dt-cell__content--col-${colIndex}`,\n            `.dt-cell__edit--col-${colIndex}`\n        ].join(', ');\n\n        const styles = {\n            width: columnWidth + 'px'\n        };\n\n        this.style.setStyle(selector, styles);\n    }\n\n    setColumnHeaderWidth(colIndex) {\n        colIndex = +colIndex;\n        this.$columnMap = this.$columnMap || [];\n        const selector = `.dt-cell__content--header-${colIndex}`;\n        const {\n            width\n        } = this.getColumn(colIndex);\n\n        let $column = this.$columnMap[colIndex];\n        if (!$column) {\n            $column = this.header.querySelector(selector);\n            this.$columnMap[colIndex] = $column;\n        }\n\n        $column.style.width = width + 'px';\n    }\n\n    getColumnMinWidth(colIndex) {\n        colIndex = +colIndex;\n        return this.getColumn(colIndex).minWidth || 24;\n    }\n\n    getFirstColumnIndex() {\n        return this.datamanager.getColumnIndexById('_rowIndex') + 1;\n    }\n\n    getHeaderCell$(colIndex) {\n        return $(`.dt-cell--header-${colIndex}`, this.header);\n    }\n\n    getLastColumnIndex() {\n        return this.datamanager.getColumnCount() - 1;\n    }\n\n    getDropdownHTML() {\n        const { dropdownButton } = this.options;\n\n        return `\n            <div class=\"dt-dropdown\">\n                <div class=\"dt-dropdown__toggle\">${dropdownButton}</div>\n            </div>\n      `;\n    }\n\n    getDropdownListHTML() {\n        const { headerDropdown: dropdownItems } = this.options;\n\n        return `\n            <div class=\"dt-dropdown__list\">\n            ${dropdownItems.map((d, i) => `\n                <div class=\"dt-dropdown__list-item\" data-index=\"${i}\">${d.label}</div>\n            `).join('')}\n            </div>\n        `;\n    }\n}\n\nclass RowManager {\n    constructor(instance) {\n        this.instance = instance;\n        linkProperties(this, this.instance, [\n            'options',\n            'fireEvent',\n            'wrapper',\n            'bodyScrollable',\n            'bodyRenderer',\n            'style'\n        ]);\n\n        this.bindEvents();\n        this.refreshRows = nextTick(this.refreshRows, this);\n    }\n\n    get datamanager() {\n        return this.instance.datamanager;\n    }\n\n    get cellmanager() {\n        return this.instance.cellmanager;\n    }\n\n    bindEvents() {\n        this.bindCheckbox();\n    }\n\n    bindCheckbox() {\n        if (!this.options.checkboxColumn) return;\n\n        // map of checked rows\n        this.checkMap = [];\n\n        $.on(this.wrapper, 'click', '.dt-cell--col-0 [type=\"checkbox\"]', (e, $checkbox) => {\n            const $cell = $checkbox.closest('.dt-cell');\n            const {\n                rowIndex,\n                isHeader\n            } = $.data($cell);\n            const checked = $checkbox.checked;\n\n            if (isHeader) {\n                this.checkAll(checked);\n            } else {\n                this.checkRow(rowIndex, checked);\n            }\n        });\n    }\n\n    refreshRows() {\n        this.instance.renderBody();\n        this.instance.setDimensions();\n    }\n\n    refreshRow(row, rowIndex) {\n        const _row = this.datamanager.updateRow(row, rowIndex);\n\n        _row.forEach(cell => {\n            this.cellmanager.refreshCell(cell, true);\n        });\n    }\n\n    getCheckedRows() {\n        if (!this.checkMap) {\n            return [];\n        }\n\n        let out = [];\n        for (let rowIndex in this.checkMap) {\n            const checked = this.checkMap[rowIndex];\n            if (checked === 1) {\n                out.push(rowIndex);\n            }\n        }\n\n        return out;\n    }\n\n    highlightCheckedRows() {\n        this.getCheckedRows()\n            .map(rowIndex => this.checkRow(rowIndex, true));\n    }\n\n    checkRow(rowIndex, toggle) {\n        const value = toggle ? 1 : 0;\n        const selector = rowIndex => `.dt-cell--0-${rowIndex} [type=\"checkbox\"]`;\n        // update internal map\n        this.checkMap[rowIndex] = value;\n        // set checkbox value explicitly\n        $.each(selector(rowIndex), this.bodyScrollable)\n            .map(input => {\n                input.checked = toggle;\n            });\n        // highlight row\n        this.highlightRow(rowIndex, toggle);\n        this.showCheckStatus();\n        this.fireEvent('onCheckRow', this.datamanager.getRow(rowIndex));\n    }\n\n    checkAll(toggle) {\n        const value = toggle ? 1 : 0;\n\n        // update internal map\n        if (toggle) {\n            if (this.datamanager._filteredRows) {\n                this.datamanager._filteredRows.forEach(f => {\n                    this.checkRow(f, toggle);\n                });\n            } else {\n                this.checkMap = Array.from(Array(this.getTotalRows())).map(c => value);\n            }\n        } else {\n            this.checkMap = [];\n        }\n        // set checkbox value\n        $.each('.dt-cell--col-0 [type=\"checkbox\"]', this.bodyScrollable)\n            .map(input => {\n                input.checked = toggle;\n            });\n        // highlight all\n        this.highlightAll(toggle);\n        this.showCheckStatus();\n        this.fireEvent('onCheckRow');\n    }\n\n    showCheckStatus() {\n        if (!this.options.checkedRowStatus) return;\n        const checkedRows = this.getCheckedRows();\n        const count = checkedRows.length;\n        if (count > 0) {\n            let message = this.instance.translate('{count} rows selected', {\n                count: count\n            });\n            this.bodyRenderer.showToastMessage(message);\n        } else {\n            this.bodyRenderer.clearToastMessage();\n        }\n    }\n\n    highlightRow(rowIndex, toggle = true) {\n        const $row = this.getRow$(rowIndex);\n        if (!$row) return;\n\n        if (!toggle && this.bodyScrollable.classList.contains('dt-scrollable--highlight-all')) {\n            $row.classList.add('dt-row--unhighlight');\n            return;\n        }\n\n        if (toggle && $row.classList.contains('dt-row--unhighlight')) {\n            $row.classList.remove('dt-row--unhighlight');\n        }\n\n        this._highlightedRows = this._highlightedRows || {};\n\n        if (toggle) {\n            $row.classList.add('dt-row--highlight');\n            this._highlightedRows[rowIndex] = $row;\n        } else {\n            $row.classList.remove('dt-row--highlight');\n            delete this._highlightedRows[rowIndex];\n        }\n    }\n\n    highlightAll(toggle = true) {\n        if (toggle) {\n            this.bodyScrollable.classList.add('dt-scrollable--highlight-all');\n        } else {\n            this.bodyScrollable.classList.remove('dt-scrollable--highlight-all');\n            for (const rowIndex in this._highlightedRows) {\n                const $row = this._highlightedRows[rowIndex];\n                $row.classList.remove('dt-row--highlight');\n            }\n            this._highlightedRows = {};\n        }\n    }\n\n    showRows(rowIndices) {\n        rowIndices = ensureArray(rowIndices);\n        const rows = rowIndices.map(rowIndex => this.datamanager.getRow(rowIndex));\n        this.bodyRenderer.renderRows(rows);\n    }\n\n    showAllRows() {\n        const rowIndices = this.datamanager.getAllRowIndices();\n        this.showRows(rowIndices);\n    }\n\n    getChildrenToShowForNode(rowIndex) {\n        const row = this.datamanager.getRow(rowIndex);\n        row.meta.isTreeNodeClose = false;\n\n        return this.datamanager.getImmediateChildren(rowIndex);\n    }\n\n    openSingleNode(rowIndex) {\n        const childrenToShow = this.getChildrenToShowForNode(rowIndex);\n        const visibleRowIndices = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = uniq$1([...childrenToShow, ...visibleRowIndices]).sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    getChildrenToHideForNode(rowIndex) {\n        const row = this.datamanager.getRow(rowIndex);\n        row.meta.isTreeNodeClose = true;\n\n        const rowsToHide = this.datamanager.getChildren(rowIndex);\n        rowsToHide.forEach(rowIndex => {\n            const row = this.datamanager.getRow(rowIndex);\n            if (!row.meta.isLeaf) {\n                row.meta.isTreeNodeClose = true;\n            }\n        });\n\n        return rowsToHide;\n    }\n\n    closeSingleNode(rowIndex) {\n        const rowsToHide = this.getChildrenToHideForNode(rowIndex);\n        const visibleRows = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = visibleRows\n            .filter(rowIndex => !rowsToHide.includes(rowIndex))\n            .sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    expandAllNodes() {\n        let rows = this.datamanager.getRows();\n        let rootNodes = rows.filter(row => !row.meta.isLeaf);\n\n        const childrenToShow = rootNodes.map(row => this.getChildrenToShowForNode(row.meta.rowIndex)).flat();\n        const visibleRowIndices = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = uniq$1([...childrenToShow, ...visibleRowIndices]).sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    collapseAllNodes() {\n        let rows = this.datamanager.getRows();\n        let rootNodes = rows.filter(row => row.meta.indent === 0);\n\n        const rowsToHide = rootNodes.map(row => this.getChildrenToHideForNode(row.meta.rowIndex)).flat();\n        const visibleRows = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = visibleRows\n            .filter(rowIndex => !rowsToHide.includes(rowIndex))\n            .sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    setTreeDepth(depth) {\n        let rows = this.datamanager.getRows();\n\n        const rowsToOpen = rows.filter(row => row.meta.indent < depth);\n        const rowsToClose = rows.filter(row => row.meta.indent >= depth);\n        const rowsToHide = rowsToClose.filter(row => row.meta.indent > depth);\n\n        rowsToClose.forEach(row => {\n            if (!row.meta.isLeaf) {\n                row.meta.isTreeNodeClose = true;\n            }\n        });\n        rowsToOpen.forEach(row => {\n            if (!row.meta.isLeaf) {\n                row.meta.isTreeNodeClose = false;\n            }\n        });\n\n        const rowsToShow = rows\n            .filter(row => !rowsToHide.includes(row))\n            .map(row => row.meta.rowIndex)\n            .sort(numberSortAsc);\n        this.showRows(rowsToShow);\n    }\n\n    getRow$(rowIndex) {\n        return $(this.selector(rowIndex), this.bodyScrollable);\n    }\n\n    getTotalRows() {\n        return this.datamanager.getRowCount();\n    }\n\n    getFirstRowIndex() {\n        return 0;\n    }\n\n    getLastRowIndex() {\n        return this.datamanager.getRowCount() - 1;\n    }\n\n    scrollToRow(rowIndex) {\n        rowIndex = +rowIndex;\n        this._lastScrollTo = this._lastScrollTo || 0;\n        const $row = this.getRow$(rowIndex);\n        if ($.inViewport($row, this.bodyScrollable)) return;\n\n        const {\n            height\n        } = $row.getBoundingClientRect();\n        const {\n            top,\n            bottom\n        } = this.bodyScrollable.getBoundingClientRect();\n        const rowsInView = Math.floor((bottom - top) / height);\n\n        let offset = 0;\n        if (rowIndex > this._lastScrollTo) {\n            offset = height * ((rowIndex + 1) - rowsInView);\n        } else {\n            offset = height * ((rowIndex + 1) - 1);\n        }\n\n        this._lastScrollTo = rowIndex;\n        $.scrollTop(this.bodyScrollable, offset);\n    }\n\n    getRowHTML(row, props) {\n        const dataAttr = makeDataAttributeString(props);\n        let rowIdentifier = props.rowIndex;\n\n        if (props.isFilter) {\n            row = row.map(cell => (Object.assign({}, cell, {\n                content: this.getFilterInput({\n                    colIndex: cell.colIndex,\n                    name: cell.name\n                }),\n                isFilter: 1,\n                isHeader: undefined,\n                editable: false\n            })));\n\n            rowIdentifier = 'filter';\n        }\n\n        if (props.isHeader) {\n            rowIdentifier = 'header';\n        }\n\n        return `\n            <div class=\"dt-row dt-row-${rowIdentifier}\" ${dataAttr}>\n                ${row.map(cell => this.cellmanager.getCellHTML(cell)).join('')}\n            </div>\n        `;\n    }\n\n    getFilterInput(props) {\n        let title = `title=\"Filter based on ${props.name || 'Index'}\"`;\n        const dataAttr = makeDataAttributeString(props);\n        return `<input class=\"dt-filter dt-input\" type=\"text\" ${dataAttr} tabindex=\"1\"\n            ${props.colIndex === 0 ? 'disabled' : title} />`;\n    }\n\n    selector(rowIndex) {\n        return `.dt-row-${rowIndex}`;\n    }\n}\n\nvar hyperlist = createCommonjsModule(function (module, exports) {\n(function(f){{module.exports=f();}})(function(){return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof commonjsRequire==\"function\"&&commonjsRequire;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r);}return n[o].exports}var i=typeof commonjsRequire==\"function\"&&commonjsRequire;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\n// Default configuration.\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultConfig = {\n  width: '100%',\n  height: '100%'\n};\n\n// Check for valid number.\nvar isNumber = function isNumber(input) {\n  return Number(input) === Number(input);\n};\n\n/**\n * Creates a HyperList instance that virtually scrolls very large amounts of\n * data effortlessly.\n */\n\nvar HyperList = function () {\n  _createClass(HyperList, null, [{\n    key: 'create',\n    value: function create(element, userProvidedConfig) {\n      return new HyperList(element, userProvidedConfig);\n    }\n\n    /**\n     * Merge given css style on an element\n     * @param {DOMElement} element\n     * @param {Object} style\n     */\n\n  }, {\n    key: 'mergeStyle',\n    value: function mergeStyle(element, style) {\n      for (var i in style) {\n        if (element.style[i] !== style[i]) {\n          element.style[i] = style[i];\n        }\n      }\n    }\n  }, {\n    key: 'getMaxBrowserHeight',\n    value: function getMaxBrowserHeight() {\n      // Create two elements, the wrapper is `1px` tall and is transparent and\n      // positioned at the top of the page. Inside that is an element that gets\n      // set to 1 billion pixels. Then reads the max height the browser can\n      // calculate.\n      var wrapper = document.createElement('div');\n      var fixture = document.createElement('div');\n\n      // As said above, these values get set to put the fixture elements into the\n      // right visual state.\n      HyperList.mergeStyle(wrapper, { position: 'absolute', height: '1px', opacity: 0 });\n      HyperList.mergeStyle(fixture, { height: '1e7px' });\n\n      // Add the fixture into the wrapper element.\n      wrapper.appendChild(fixture);\n\n      // Apply to the page, the values won't kick in unless this is attached.\n      document.body.appendChild(wrapper);\n\n      // Get the maximum element height in pixels.\n      var maxElementHeight = fixture.offsetHeight;\n\n      // Remove the element immediately after reading the value.\n      document.body.removeChild(wrapper);\n\n      return maxElementHeight;\n    }\n  }]);\n\n  function HyperList(element, userProvidedConfig) {\n    var _this = this;\n\n    _classCallCheck(this, HyperList);\n\n    this._config = {};\n    this._lastRepaint = null;\n    this._maxElementHeight = HyperList.getMaxBrowserHeight();\n\n    this.refresh(element, userProvidedConfig);\n\n    var config = this._config;\n\n    // Create internal render loop.\n    var render = function render() {\n      var scrollTop = _this._getScrollPosition();\n      var lastRepaint = _this._lastRepaint;\n\n      _this._renderAnimationFrame = window.requestAnimationFrame(render);\n\n      if (scrollTop === lastRepaint) {\n        return;\n      }\n\n      if (!lastRepaint || Math.abs(scrollTop - lastRepaint) > _this._averageHeight) {\n        var rendered = _this._renderChunk();\n\n        _this._lastRepaint = scrollTop;\n\n        if (rendered !== false && typeof config.afterRender === 'function') {\n          config.afterRender();\n        }\n      }\n    };\n\n    render();\n  }\n\n  _createClass(HyperList, [{\n    key: 'destroy',\n    value: function destroy() {\n      window.cancelAnimationFrame(this._renderAnimationFrame);\n    }\n  }, {\n    key: 'refresh',\n    value: function refresh(element, userProvidedConfig) {\n      var _this2 = this;\n\n      Object.assign(this._config, defaultConfig, userProvidedConfig);\n\n      if (!element || element.nodeType !== 1) {\n        throw new Error('HyperList requires a valid DOM Node container');\n      }\n\n      this._element = element;\n\n      var config = this._config;\n\n      var scroller = this._scroller || config.scroller || document.createElement(config.scrollerTagName || 'tr');\n\n      // Default configuration option `useFragment` to `true`.\n      if (typeof config.useFragment !== 'boolean') {\n        this._config.useFragment = true;\n      }\n\n      if (!config.generate) {\n        throw new Error('Missing required `generate` function');\n      }\n\n      if (!isNumber(config.total)) {\n        throw new Error('Invalid required `total` value, expected number');\n      }\n\n      if (!Array.isArray(config.itemHeight) && !isNumber(config.itemHeight)) {\n        throw new Error('\\n        Invalid required `itemHeight` value, expected number or array\\n      '.trim());\n      } else if (isNumber(config.itemHeight)) {\n        this._itemHeights = Array(config.total).fill(config.itemHeight);\n      } else {\n        this._itemHeights = config.itemHeight;\n      }\n\n      // Width and height should be coerced to string representations. Either in\n      // `%` or `px`.\n      Object.keys(defaultConfig).filter(function (prop) {\n        return prop in config;\n      }).forEach(function (prop) {\n        var value = config[prop];\n        var isValueNumber = isNumber(value);\n        var isValuePercent = isValueNumber ? false : value.slice(-1) === '%';\n\n        if (value && typeof value !== 'string' && typeof value !== 'number') {\n          var msg = 'Invalid optional `' + prop + '`, expected string or number';\n          throw new Error(msg);\n        } else if (isValueNumber) {\n          config[prop] = value + 'px';\n        }\n\n        if (prop !== 'height') {\n          return;\n        }\n\n        // Compute the containerHeight as number\n        var numberValue = isValueNumber ? value : parseInt(value.replace(/px|%/, ''), 10);\n\n        if (isValuePercent) {\n          _this2._containerHeight = window.innerHeight * numberValue / 100;\n        } else {\n          _this2._containerHeight = isNumber(value) ? value : numberValue;\n        }\n      });\n\n      // Decorate the container element with styles that will match\n      // the user supplied configuration.\n      var elementStyle = {\n        width: '' + config.width,\n        height: '' + config.height,\n        overflow: 'auto',\n        position: 'relative'\n      };\n\n      HyperList.mergeStyle(element, elementStyle);\n\n      var scrollerHeight = config.itemHeight * config.total;\n      var maxElementHeight = this._maxElementHeight;\n\n      if (scrollerHeight > maxElementHeight) {\n        console.warn(['HyperList: The maximum element height', maxElementHeight + 'px has', 'been exceeded; please reduce your item height.'].join(' '));\n      }\n\n      var scrollerStyle = {\n        opacity: '0',\n        position: 'absolute',\n        width: '1px',\n        height: scrollerHeight + 'px'\n      };\n\n      HyperList.mergeStyle(scroller, scrollerStyle);\n\n      // Only append the scroller element once.\n      if (!this._scroller) {\n        element.appendChild(scroller);\n      }\n\n      // Set the scroller instance.\n      this._scroller = scroller;\n      this._scrollHeight = this._computeScrollHeight();\n\n      // Reuse the item positions if refreshed, otherwise set to empty array.\n      this._itemPositions = this._itemPositions || Array(config.total).fill(0);\n\n      // Each index in the array should represent the position in the DOM.\n      this._computePositions(0);\n\n      // Render after refreshing. Force render if we're calling refresh manually.\n      this._renderChunk(this._lastRepaint !== null);\n\n      if (typeof config.afterRender === 'function') {\n        config.afterRender();\n      }\n    }\n  }, {\n    key: '_getRow',\n    value: function _getRow(i) {\n      var config = this._config;\n      var item = config.generate(i);\n      var height = item.height;\n\n      if (height !== undefined && isNumber(height)) {\n        item = item.element;\n\n        // The height isn't the same as predicted, compute positions again\n        if (height !== this._itemHeights) {\n          this._itemHeights[i] = height;\n          this._computePositions(i);\n          this._scrollHeight = this._computeScrollHeight(i);\n        }\n      } else {\n        height = this._itemHeights[i];\n      }\n\n      if (!item || item.nodeType !== 1) {\n        throw new Error('Generator did not return a DOM Node for index: ' + i);\n      }\n\n      var oldClass = item.getAttribute('class') || '';\n      item.setAttribute('class', oldClass + ' ' + (config.rowClassName || 'vrow'));\n\n      var top = this._itemPositions[i];\n\n      HyperList.mergeStyle(item, {\n        position: 'absolute',\n        top: top + 'px'\n      });\n\n      return item;\n    }\n  }, {\n    key: '_getScrollPosition',\n    value: function _getScrollPosition() {\n      var config = this._config;\n\n      if (typeof config.overrideScrollPosition === 'function') {\n        return config.overrideScrollPosition();\n      }\n\n      return this._element.scrollTop;\n    }\n  }, {\n    key: '_renderChunk',\n    value: function _renderChunk(force) {\n      var config = this._config;\n      var element = this._element;\n      var scrollTop = this._getScrollPosition();\n      var total = config.total;\n\n      var from = config.reverse ? this._getReverseFrom(scrollTop) : this._getFrom(scrollTop) - 1;\n\n      if (from < 0 || from - this._screenItemsLen < 0) {\n        from = 0;\n      }\n\n      if (!force && this._lastFrom === from) {\n        return false;\n      }\n\n      this._lastFrom = from;\n\n      var to = from + this._cachedItemsLen;\n\n      if (to > total || to + this._cachedItemsLen > total) {\n        to = total;\n      }\n\n      // Append all the new rows in a document fragment that we will later append\n      // to the parent node\n      var fragment = config.useFragment ? document.createDocumentFragment() : []\n      // Sometimes you'll pass fake elements to this tool and Fragments require\n      // real elements.\n\n\n      // The element that forces the container to scroll.\n      ;var scroller = this._scroller;\n\n      // Keep the scroller in the list of children.\n      fragment[config.useFragment ? 'appendChild' : 'push'](scroller);\n\n      for (var i = from; i < to; i++) {\n        var row = this._getRow(i);\n\n        fragment[config.useFragment ? 'appendChild' : 'push'](row);\n      }\n\n      if (config.applyPatch) {\n        return config.applyPatch(element, fragment);\n      }\n\n      element.innerHTML = '';\n      element.appendChild(fragment);\n    }\n  }, {\n    key: '_computePositions',\n    value: function _computePositions() {\n      var from = arguments.length <= 0 || arguments[0] === undefined ? 1 : arguments[0];\n\n      var config = this._config;\n      var total = config.total;\n      var reverse = config.reverse;\n\n      if (from < 1 && !reverse) {\n        from = 1;\n      }\n\n      for (var i = from; i < total; i++) {\n        if (reverse) {\n          if (i === 0) {\n            this._itemPositions[0] = this._scrollHeight - this._itemHeights[0];\n          } else {\n            this._itemPositions[i] = this._itemPositions[i - 1] - this._itemHeights[i];\n          }\n        } else {\n          this._itemPositions[i] = this._itemHeights[i - 1] + this._itemPositions[i - 1];\n        }\n      }\n    }\n  }, {\n    key: '_computeScrollHeight',\n    value: function _computeScrollHeight() {\n      var _this3 = this;\n\n      var config = this._config;\n      var total = config.total;\n      var scrollHeight = this._itemHeights.reduce(function (a, b) {\n        return a + b;\n      }, 0);\n\n      HyperList.mergeStyle(this._scroller, {\n        opacity: 0,\n        position: 'absolute',\n        width: '1px',\n        height: scrollHeight + 'px'\n      });\n\n      // Calculate the height median\n      var sortedItemHeights = this._itemHeights.slice(0).sort(function (a, b) {\n        return a - b;\n      });\n      var middle = Math.floor(total / 2);\n      var averageHeight = total % 2 === 0 ? (sortedItemHeights[middle] + sortedItemHeights[middle - 1]) / 2 : sortedItemHeights[middle];\n\n      var containerHeight = this._element.clientHeight ? this._element.clientHeight : this._containerHeight;\n      this._screenItemsLen = Math.ceil(containerHeight / averageHeight);\n      this._containerHeight = containerHeight;\n\n      // Cache 3 times the number of items that fit in the container viewport.\n      this._cachedItemsLen = Math.max(this._cachedItemsLen || 0, this._screenItemsLen * 3);\n      this._averageHeight = averageHeight;\n\n      if (config.reverse) {\n        window.requestAnimationFrame(function () {\n          _this3._element.scrollTop = scrollHeight;\n        });\n      }\n\n      return scrollHeight;\n    }\n  }, {\n    key: '_getFrom',\n    value: function _getFrom(scrollTop) {\n      var i = 0;\n\n      while (this._itemPositions[i] < scrollTop) {\n        i++;\n      }\n\n      return i;\n    }\n  }, {\n    key: '_getReverseFrom',\n    value: function _getReverseFrom(scrollTop) {\n      var i = this._config.total - 1;\n\n      while (i > 0 && this._itemPositions[i] < scrollTop + this._containerHeight) {\n        i--;\n      }\n\n      return i;\n    }\n  }]);\n\n  return HyperList;\n}();\n\nexports.default = HyperList;\nmodule.exports = exports['default'];\n\n},{}]},{},[1])(1)\n});\n});\n\nvar HyperList = unwrapExports(hyperlist);\n\nclass BodyRenderer {\n    constructor(instance) {\n        this.instance = instance;\n        this.options = instance.options;\n        this.datamanager = instance.datamanager;\n        this.rowmanager = instance.rowmanager;\n        this.cellmanager = instance.cellmanager;\n        this.bodyScrollable = instance.bodyScrollable;\n        this.footer = this.instance.footer;\n        this.log = instance.log;\n    }\n\n    renderRows(rows) {\n        this.visibleRows = rows;\n        this.visibleRowIndices = rows.map(row => row.meta.rowIndex);\n\n        if (rows.length === 0) {\n            this.bodyScrollable.innerHTML = this.getNoDataHTML();\n            return;\n        }\n\n        const rowViewOrder = this.datamanager.rowViewOrder.map(index => {\n            if (this.visibleRowIndices.includes(index)) {\n                return index;\n            }\n            return null;\n        }).filter(index => index !== null);\n\n        const computedStyle = getComputedStyle(this.bodyScrollable);\n\n        let config = {\n            width: computedStyle.width,\n            height: computedStyle.height,\n            itemHeight: this.options.cellHeight,\n            total: rows.length,\n            generate: (index) => {\n                const el = document.createElement('div');\n                const rowIndex = rowViewOrder[index];\n                const row = this.datamanager.getRow(rowIndex);\n                const rowHTML = this.rowmanager.getRowHTML(row, row.meta);\n                el.innerHTML = rowHTML;\n                return el.children[0];\n            },\n            afterRender: () => {\n                this.restoreState();\n            }\n        };\n\n        if (!this.hyperlist) {\n            this.hyperlist = new HyperList(this.bodyScrollable, config);\n        } else {\n            this.hyperlist.refresh(this.bodyScrollable, config);\n        }\n\n        this.renderFooter();\n    }\n\n    render() {\n        const rows = this.datamanager.getRowsForView();\n        this.renderRows(rows);\n        // setDimensions requires atleast 1 row to exist in dom\n        this.instance.setDimensions();\n    }\n\n    renderFooter() {\n        if (!this.options.showTotalRow) return;\n\n        const totalRow = this.getTotalRow();\n        let html = this.rowmanager.getRowHTML(totalRow, { isTotalRow: 1, rowIndex: 'totalRow' });\n\n        this.footer.innerHTML = html;\n    }\n\n    getTotalRow() {\n        const columns = this.datamanager.getColumns();\n        const totalRowTemplate = columns.map(col => {\n            let content = null;\n            if (['_rowIndex', '_checkbox'].includes(col.id)) {\n                content = '';\n            }\n            return {\n                content,\n                isTotalRow: 1,\n                colIndex: col.colIndex,\n                column: col\n            };\n        });\n\n        const totalRow = totalRowTemplate.map((cell, i) => {\n            if (cell.content === '') return cell;\n\n            if (this.options.hooks.columnTotal) {\n                const columnValues = this.visibleRows.map(row => row[i].content);\n                const result = this.options.hooks.columnTotal.call(this.instance, columnValues, cell);\n                if (result != null) {\n                    cell.content = result;\n                    return cell;\n                }\n            }\n\n            cell.content = this.visibleRows.reduce((acc, prevRow) => {\n                const prevCell = prevRow[i];\n                if (typeof prevCell.content === 'number') {\n                    if (acc == null) acc = 0;\n                    return acc + prevCell.content;\n                }\n                return acc;\n            }, cell.content);\n\n            return cell;\n        });\n\n        return totalRow;\n    }\n\n    restoreState() {\n        this.rowmanager.highlightCheckedRows();\n        this.cellmanager.selectAreaOnClusterChanged();\n        this.cellmanager.focusCellOnClusterChanged();\n    }\n\n    showToastMessage(message, hideAfter) {\n        this.instance.toastMessage.innerHTML = this.getToastMessageHTML(message);\n\n        if (hideAfter) {\n            setTimeout(() => {\n                this.clearToastMessage();\n            }, hideAfter * 1000);\n        }\n    }\n\n    clearToastMessage() {\n        this.instance.toastMessage.innerHTML = '';\n    }\n\n    getNoDataHTML() {\n        return `<div class=\"dt-scrollable__no-data\">${this.options.noDataMessage}</div>`;\n    }\n\n    getToastMessageHTML(message) {\n        return `<span class=\"dt-toast__message\">${message}</span>`;\n    }\n}\n\nclass Style {\n    constructor(instance) {\n        this.instance = instance;\n\n        linkProperties(this, this.instance, [\n            'options', 'datamanager', 'columnmanager',\n            'header', 'footer', 'bodyScrollable', 'datatableWrapper',\n            'getColumn', 'bodyRenderer'\n        ]);\n\n        this.scopeClass = 'dt-instance-' + instance.constructor.instances;\n        instance.datatableWrapper.classList.add(this.scopeClass);\n\n        const styleEl = document.createElement('style');\n        instance.wrapper.insertBefore(styleEl, instance.datatableWrapper);\n        this.styleEl = styleEl;\n\n        this.bindResizeWindow();\n        this.bindScrollHeader();\n    }\n\n    get stylesheet() {\n        return this.styleEl.sheet;\n    }\n\n    bindResizeWindow() {\n        this.onWindowResize = this.onWindowResize.bind(this);\n        this.onWindowResize = throttle$1(this.onWindowResize, 300);\n\n        if (this.options.layout === 'fluid') {\n            $.on(window, 'resize', this.onWindowResize);\n        }\n    }\n\n    bindScrollHeader() {\n        this._settingHeaderPosition = false;\n\n        $.on(this.bodyScrollable, 'scroll', (e) => {\n            if (this._settingHeaderPosition) return;\n\n            this._settingHeaderPosition = true;\n\n            requestAnimationFrame(() => {\n                const left = -e.target.scrollLeft;\n\n                $.style(this.header, {\n                    transform: `translateX(${left}px)`\n                });\n                $.style(this.footer, {\n                    transform: `translateX(${left}px)`\n                });\n                this._settingHeaderPosition = false;\n            });\n        });\n    }\n\n    onWindowResize() {\n        this.distributeRemainingWidth();\n        this.refreshColumnWidth();\n        this.setBodyStyle();\n    }\n\n    destroy() {\n        this.styleEl.remove();\n        $.off(window, 'resize', this.onWindowResize);\n    }\n\n    setStyle(selector, styleObject) {\n        if (selector.includes(',')) {\n            selector.split(',')\n                .map(s => s.trim())\n                .forEach(selector => {\n                    this.setStyle(selector, styleObject);\n                });\n            return;\n        }\n\n        selector = selector.trim();\n        if (!selector) return;\n\n        this._styleRulesMap = this._styleRulesMap || {};\n        const prefixedSelector = this._getPrefixedSelector(selector);\n\n        if (this._styleRulesMap[prefixedSelector]) {\n            this.removeStyle(selector);\n\n            // merge with old styleobject\n            styleObject = Object.assign({}, this._styleRulesMap[prefixedSelector], styleObject);\n        }\n\n        const styleString = this._getRuleString(styleObject);\n        const ruleString = `${prefixedSelector} { ${styleString} }`;\n\n        this._styleRulesMap[prefixedSelector] = styleObject;\n        this.stylesheet.insertRule(ruleString);\n    }\n\n    removeStyle(selector) {\n        if (selector.includes(',')) {\n            selector.split(',')\n                .map(s => s.trim())\n                .forEach(selector => {\n                    this.removeStyle(selector);\n                });\n            return;\n        }\n\n        selector = selector.trim();\n        if (!selector) return;\n\n        // find and remove\n        const prefixedSelector = this._getPrefixedSelector(selector);\n        const index = Array.from(this.stylesheet.cssRules)\n            .findIndex(rule => rule.selectorText === prefixedSelector);\n\n        if (index === -1) return;\n        this.stylesheet.deleteRule(index);\n    }\n\n    _getPrefixedSelector(selector) {\n        return `.${this.scopeClass} ${selector}`;\n    }\n\n    _getRuleString(styleObject) {\n        return Object.keys(styleObject)\n            .map(prop => {\n                let dashed = prop;\n                if (!prop.includes('-')) {\n                    dashed = camelCaseToDash(prop);\n                }\n                return `${dashed}:${styleObject[prop]};`;\n            })\n            .join('');\n    }\n\n    setDimensions() {\n        this.setCellHeight();\n        this.setupMinWidth();\n        this.setupNaturalColumnWidth();\n        this.setupColumnWidth();\n        this.distributeRemainingWidth();\n        this.setColumnStyle();\n        this.setBodyStyle();\n    }\n\n    setCellHeight() {\n        this.setStyle('.dt-cell', {\n            height: this.options.cellHeight + 'px'\n        });\n    }\n\n    setupMinWidth() {\n        $.each('.dt-cell--header', this.header).map(col => {\n            const { colIndex } = $.data(col);\n            const column = this.getColumn(colIndex);\n\n            if (!column.minWidth) {\n                const width = $.style($('.dt-cell__content', col), 'width');\n                // only set this once\n                column.minWidth = width;\n            }\n        });\n    }\n\n    setupNaturalColumnWidth() {\n        if (!$('.dt-row')) return;\n\n        $.each('.dt-row-header .dt-cell', this.header).map($headerCell => {\n            const { colIndex } = $.data($headerCell);\n            const column = this.datamanager.getColumn(colIndex);\n            let width = $.style($('.dt-cell__content', $headerCell), 'width');\n            if (typeof width === 'number' && width >= this.options.minimumColumnWidth) {\n                column.naturalWidth = width;\n            } else {\n                column.naturalWidth = this.options.minimumColumnWidth;\n            }\n        });\n\n        // set initial width as naturally calculated by table's first row\n        $.each('.dt-row-0 .dt-cell', this.bodyScrollable).map($cell => {\n            const {\n                colIndex\n            } = $.data($cell);\n            const column = this.datamanager.getColumn(colIndex);\n\n            let naturalWidth = $.style($('.dt-cell__content', $cell), 'width');\n\n            if (typeof naturalWidth === 'number' && naturalWidth >= column.naturalWidth) {\n                column.naturalWidth = naturalWidth;\n            } else {\n                column.naturalWidth = column.naturalWidth;\n            }\n        });\n    }\n\n    setupColumnWidth() {\n        if (this.options.layout === 'ratio') {\n            let totalWidth = $.style(this.datatableWrapper, 'width');\n\n            if (this.options.serialNoColumn) {\n                const rowIndexColumn = this.datamanager.getColumnById('_rowIndex');\n                totalWidth = totalWidth - rowIndexColumn.width - 1;\n            }\n\n            if (this.options.checkboxColumn) {\n                const rowIndexColumn = this.datamanager.getColumnById('_checkbox');\n                totalWidth = totalWidth - rowIndexColumn.width - 1;\n            }\n\n            const totalParts = this.datamanager.getColumns()\n                .map(column => {\n                    if (column.id === '_rowIndex' || column.id === '_checkbox') {\n                        return 0;\n                    }\n                    if (!column.width) {\n                        column.width = 1;\n                    }\n                    column.ratioWidth = parseInt(column.width, 10);\n                    return column.ratioWidth;\n                })\n                .reduce((a, c) => a + c);\n\n            const onePart = totalWidth / totalParts;\n\n            this.datamanager.getColumns()\n                .map(column => {\n                    if (column.id === '_rowIndex' || column.id === '_checkbox') return;\n                    column.width = Math.floor(onePart * column.ratioWidth) - 1;\n                });\n        } else {\n            this.datamanager.getColumns()\n                .map(column => {\n                    if (!column.width) {\n                        column.width = column.naturalWidth;\n                    }\n                    if (column.id === '_rowIndex') {\n                        column.width = this.getRowIndexColumnWidth();\n                    }\n                    if (column.width < this.options.minimumColumnWidth) {\n                        column.width = this.options.minimumColumnWidth;\n                    }\n                });\n        }\n    }\n\n    distributeRemainingWidth() {\n        if (this.options.layout !== 'fluid') return;\n\n        const wrapperWidth = $.style(this.instance.datatableWrapper, 'width');\n        let firstRow = $('.dt-row', this.bodyScrollable);\n        let firstRowWidth = wrapperWidth;\n        if (!firstRow) {\n            let headerRow = $('.dt-row', this.instance.header);\n            let cellWidths = Array.from(headerRow.children)\n                .map(cell => cell.offsetWidth);\n            firstRowWidth = cellWidths.reduce((sum, a) => sum + a, 0);\n        } else {\n            firstRowWidth = $.style(firstRow, 'width');\n        }\n        const resizableColumns = this.datamanager.getColumns().filter(col => col.resizable);\n        const deltaWidth = (wrapperWidth - firstRowWidth) / resizableColumns.length;\n\n        resizableColumns.map(col => {\n            const width = $.style(this.getColumnHeaderElement(col.colIndex), 'width');\n            let finalWidth = Math.floor(width + deltaWidth) - 2;\n\n            this.datamanager.updateColumn(col.colIndex, {\n                width: finalWidth\n            });\n        });\n    }\n\n    setColumnStyle() {\n        // align columns\n        this.datamanager.getColumns()\n            .map(column => {\n                // alignment\n                if (!column.align) {\n                    column.align = 'left';\n                }\n                if (!['left', 'center', 'right'].includes(column.align)) {\n                    column.align = 'left';\n                }\n                this.setStyle(`.dt-cell--col-${column.colIndex}`, {\n                    'text-align': column.align\n                });\n\n                // width\n                this.columnmanager.setColumnHeaderWidth(column.colIndex);\n                this.columnmanager.setColumnWidth(column.colIndex);\n            });\n    }\n\n    refreshColumnWidth() {\n        this.datamanager.getColumns()\n            .map(column => {\n                this.columnmanager.setColumnHeaderWidth(column.colIndex);\n                this.columnmanager.setColumnWidth(column.colIndex);\n            });\n    }\n\n    setBodyStyle() {\n        const bodyWidth = $.style(this.datatableWrapper, 'width');\n        const firstRow = $('.dt-row', this.bodyScrollable);\n        if (!firstRow) return;\n        const rowWidth = $.style(firstRow, 'width');\n\n        let width = bodyWidth > rowWidth ? rowWidth + 10 : bodyWidth;\n        $.style(this.bodyScrollable, {\n            width: width + 'px'\n        });\n\n        // remove the body height, so that it resets to it's original\n        $.removeStyle(this.bodyScrollable, 'height');\n\n        // when there are less rows than the container\n        // adapt the container height\n        let bodyHeight = $.getStyle(this.bodyScrollable, 'height');\n        const scrollHeight = (this.bodyRenderer.hyperlist || {})._scrollHeight || Infinity;\n        const hasHorizontalOverflow = $.hasHorizontalOverflow(this.bodyScrollable);\n\n        let height;\n\n        if (scrollHeight < bodyHeight) {\n            height = scrollHeight;\n\n            // account for scrollbar size when\n            // there is horizontal overflow\n            if (hasHorizontalOverflow) {\n                height += $.scrollbarSize();\n            }\n\n            $.style(this.bodyScrollable, {\n                height: height + 'px'\n            });\n        }\n\n        const verticalOverflow = this.bodyScrollable.scrollHeight - this.bodyScrollable.offsetHeight;\n        if (verticalOverflow < $.scrollbarSize()) {\n            // if verticalOverflow is less than scrollbar size\n            // then most likely scrollbar is causing the scroll\n            // which is not needed\n            $.style(this.bodyScrollable, {\n                overflowY: 'hidden'\n            });\n        }\n\n        if (this.options.layout === 'fluid') {\n            $.style(this.bodyScrollable, {\n                overflowX: 'hidden'\n            });\n        }\n    }\n\n    getColumnHeaderElement(colIndex) {\n        colIndex = +colIndex;\n        if (colIndex < 0) return null;\n        return $(`.dt-cell--col-${colIndex}`, this.header);\n    }\n\n    getRowIndexColumnWidth() {\n        const rowCount = this.datamanager.getRowCount();\n        const padding = 22;\n        return $.measureTextWidth(rowCount + '') + padding;\n    }\n}\n\nconst KEYCODES = {\n    13: 'enter',\n    91: 'meta',\n    16: 'shift',\n    17: 'ctrl',\n    18: 'alt',\n    37: 'left',\n    38: 'up',\n    39: 'right',\n    40: 'down',\n    9: 'tab',\n    27: 'esc',\n    67: 'c',\n    70: 'f',\n    86: 'v'\n};\n\nclass Keyboard {\n    constructor(element) {\n        this.listeners = {};\n        $.on(element, 'keydown', this.handler.bind(this));\n    }\n\n    handler(e) {\n        let key = KEYCODES[e.keyCode];\n\n        if (e.shiftKey && key !== 'shift') {\n            key = 'shift+' + key;\n        }\n\n        if ((e.ctrlKey && key !== 'ctrl') || (e.metaKey && key !== 'meta')) {\n            key = 'ctrl+' + key;\n        }\n\n        const listeners = this.listeners[key];\n\n        if (listeners && listeners.length > 0) {\n            for (let listener of listeners) {\n                const preventBubbling = listener(e);\n                if (preventBubbling === undefined || preventBubbling === true) {\n                    e.preventDefault();\n                }\n            }\n        }\n    }\n\n    on(key, listener) {\n        const keys = key.split(',').map(k => k.trim());\n\n        keys.map(key => {\n            this.listeners[key] = this.listeners[key] || [];\n            this.listeners[key].push(listener);\n        });\n    }\n}\n\nvar en = {\n\t\"Sort Ascending\": \"Sort Ascending\",\n\t\"Sort Descending\": \"Sort Descending\",\n\t\"Reset sorting\": \"Reset sorting\",\n\t\"Remove column\": \"Remove column\",\n\t\"No Data\": \"No Data\",\n\t\"{count} cells copied\": {\"1\":\"{count} cell copied\",\"default\":\"{count} cells copied\"},\n\t\"{count} rows selected\": {\"1\":\"{count} row selected\",\"default\":\"{count} rows selected\"}\n};\n\nvar de = {\n\t\"Sort Ascending\": \"Aufsteigend sortieren\",\n\t\"Sort Descending\": \"Absteigend sortieren\",\n\t\"Reset sorting\": \"Sortierung zur\u00FCcksetzen\",\n\t\"Remove column\": \"Spalte entfernen\",\n\t\"No Data\": \"Keine Daten\",\n\t\"{count} cells copied\": {\"1\":\"{count} Zelle kopiert\",\"default\":\"{count} Zellen kopiert\"},\n\t\"{count} rows selected\": {\"1\":\"{count} Zeile ausgew\u00E4hlt\",\"default\":\"{count} Zeilen ausgew\u00E4hlt\"}\n};\n\nvar fr = {\n\t\"Sort Ascending\": \"Trier par ordre croissant\",\n\t\"Sort Descending\": \"Trier par ordre d\u00E9croissant\",\n\t\"Reset sorting\": \"R\u00E9initialiser le tri\",\n\t\"Remove column\": \"Supprimer colonne\",\n\t\"No Data\": \"Pas de donn\u00E9es\",\n\t\"{count} cells copied\": {\"1\":\"{count} cellule copi\u00E9e\",\"default\":\"{count} cellules copi\u00E9es\"},\n\t\"{count} rows selected\": {\"1\":\"{count} ligne s\u00E9lectionn\u00E9e\",\"default\":\"{count} lignes s\u00E9lectionn\u00E9es\"}\n};\n\nvar it = {\n\t\"Sort Ascending\": \"Ordinamento ascendente\",\n\t\"Sort Descending\": \"Ordinamento decrescente\",\n\t\"Reset sorting\": \"Azzeramento ordinamento\",\n\t\"Remove column\": \"Rimuovi colonna\",\n\t\"No Data\": \"Nessun dato\",\n\t\"{count} cells copied\": {\"1\":\"Copiato {count} cella\",\"default\":\"{count} celle copiate\"},\n\t\"{count} rows selected\": {\"1\":\"{count} linea selezionata\",\"default\":\"{count} linee selezionate\"}\n};\n\nfunction getTranslations() {\n    return {\n        en,\n        de,\n        fr,\n        it,\n    };\n}\n\nclass TranslationManager {\n    constructor(language) {\n        this.language = language;\n        this.translations = getTranslations();\n    }\n\n    addTranslations(translations) {\n        this.translations = Object.assign(this.translations, translations);\n    }\n\n    translate(sourceText, args) {\n        let translation = (this.translations[this.language] &&\n            this.translations[this.language][sourceText]) || sourceText;\n\n        if (typeof translation === 'object') {\n            translation = args && args.count ?\n                this.getPluralizedTranslation(translation, args.count) :\n                sourceText;\n        }\n\n        return format(translation, args || {});\n    }\n\n    getPluralizedTranslation(translations, count) {\n        return translations[count] || translations['default'];\n    }\n}\n\nfunction filterRows(rows, filters, data) {\n    let filteredRowIndices = [];\n\n    if (Object.keys(filters).length === 0) {\n        return rows.map(row => row.meta.rowIndex);\n    }\n\n    for (let colIndex in filters) {\n        const keyword = filters[colIndex];\n\n        const filteredRows = filteredRowIndices.length ?\n            filteredRowIndices.map(i => rows[i]) :\n            rows;\n\n        const cells = filteredRows.map(row => row[colIndex]);\n\n        let filter = guessFilter(keyword);\n        let filterMethod = getFilterMethod(rows, data, filter);\n\n        if (filterMethod) {\n            filteredRowIndices = filterMethod(filter.text, cells);\n        } else {\n            filteredRowIndices = cells.map(cell => cell.rowIndex);\n        }\n    }\n\n    return filteredRowIndices;\n}\nfunction getFilterMethod(rows, allData, filter) {\n    const getFormattedValue = cell => {\n        let formatter = CellManager.getCustomCellFormatter(cell);\n        let rowData = rows[cell.rowIndex];\n        if (allData && allData.data && allData.data.length) {\n            rowData = allData.data[cell.rowIndex];\n        }\n        if (formatter && cell.content) {\n            cell.html = formatter(cell.content, rows[cell.rowIndex], cell.column, rowData, filter);\n            return stripHTML(cell.html);\n        }\n        return cell.content || '';\n    };\n\n    const stringCompareValue = cell =>\n        String(stripHTML(cell.html || '') || getFormattedValue(cell)).toLowerCase();\n\n    const numberCompareValue = cell => parseFloat(cell.content);\n\n    const getCompareValues = (cell, keyword) => {\n        if (cell.column.compareValue) {\n            const compareValues = cell.column.compareValue(cell, keyword);\n            if (compareValues && Array.isArray(compareValues)) return compareValues;\n        }\n\n        // check if it can be converted to number\n        const float = numberCompareValue(cell);\n        if (!isNaN(float)) {\n            return [float, keyword];\n        }\n\n        return [stringCompareValue(cell), keyword];\n    };\n\n    let filterMethodMap = {\n        contains(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const hay = stringCompareValue(cell);\n                    const needle = (keyword || '').toLowerCase();\n                    return !needle || hay.includes(needle);\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        greaterThan(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const [compareValue, keywordValue] = getCompareValues(cell, keyword);\n                    return compareValue > keywordValue;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        lessThan(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const [compareValue, keywordValue] = getCompareValues(cell, keyword);\n                    return compareValue < keywordValue;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        equals(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const value = parseFloat(cell.content);\n                    return value === keyword;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        notEquals(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const value = parseFloat(cell.content);\n                    return value !== keyword;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        range(rangeValues, cells) {\n            return cells\n                .filter(cell => {\n                    const values1 = getCompareValues(cell, rangeValues[0]);\n                    const values2 = getCompareValues(cell, rangeValues[1]);\n                    const value = values1[0];\n                    return value >= values1[1] && value <= values2[1];\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        containsNumber(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    let number = parseFloat(keyword, 10);\n                    let string = keyword;\n                    let hayNumber = numberCompareValue(cell);\n                    let hayString = stringCompareValue(cell);\n\n                    return number === hayNumber || hayString.includes(string);\n                })\n                .map(cell => cell.rowIndex);\n        }\n    };\n\n    return filterMethodMap[filter.type];\n}\n\nfunction guessFilter(keyword = '') {\n    if (keyword.length === 0) return {};\n\n    let compareString = keyword;\n\n    if (['>', '<', '='].includes(compareString[0])) {\n        compareString = keyword.slice(1);\n    } else if (compareString.startsWith('!=')) {\n        compareString = keyword.slice(2);\n    }\n\n    if (keyword.startsWith('>')) {\n        if (compareString) {\n            return {\n                type: 'greaterThan',\n                text: compareString.trim()\n            };\n        }\n    }\n\n    if (keyword.startsWith('<')) {\n        if (compareString) {\n            return {\n                type: 'lessThan',\n                text: compareString.trim()\n            };\n        }\n    }\n\n    if (keyword.startsWith('=')) {\n        if (isNumber(compareString)) {\n            return {\n                type: 'equals',\n                text: Number(keyword.slice(1).trim())\n            };\n        }\n    }\n\n    if (isNumber(compareString)) {\n        return {\n            type: 'containsNumber',\n            text: compareString\n        };\n    }\n\n    if (keyword.startsWith('!=')) {\n        if (isNumber(compareString)) {\n            return {\n                type: 'notEquals',\n                text: Number(keyword.slice(2).trim())\n            };\n        }\n    }\n\n    if (keyword.split(':').length === 2 && keyword.split(':').every(v => isNumber(v.trim()))) {\n        compareString = keyword.split(':');\n        return {\n            type: 'range',\n            text: compareString.map(v => v.trim())\n        };\n    }\n\n    return {\n        type: 'contains',\n        text: compareString.toLowerCase()\n    };\n}\n\nfunction getDefaultOptions(instance) {\n    return {\n        columns: [],\n        data: [],\n        dropdownButton: icons.chevronDown,\n        headerDropdown: [\n            {\n                label: instance.translate('Sort Ascending'),\n                action: function (column) {\n                    this.sortColumn(column.colIndex, 'asc');\n                }\n            },\n            {\n                label: instance.translate('Sort Descending'),\n                action: function (column) {\n                    this.sortColumn(column.colIndex, 'desc');\n                }\n            },\n            {\n                label: instance.translate('Reset sorting'),\n                action: function (column) {\n                    this.sortColumn(column.colIndex, 'none');\n                }\n            },\n            {\n                label: instance.translate('Remove column'),\n                action: function (column) {\n                    this.removeColumn(column.colIndex);\n                }\n            }\n        ],\n        events: {\n            onRemoveColumn(column) {},\n            onSwitchColumn(column1, column2) {},\n            onSortColumn(column) {},\n            onCheckRow(row) {},\n            onDestroy() {}\n        },\n        hooks: {\n            columnTotal: null\n        },\n        sortIndicator: {\n            asc: '\u2191',\n            desc: '\u2193',\n            none: ''\n        },\n        overrideComponents: {\n            // ColumnManager: CustomColumnManager\n        },\n        filterRows: filterRows,\n        freezeMessage: '',\n        getEditor: null,\n        serialNoColumn: true,\n        checkboxColumn: false,\n        clusterize: true,\n        logs: false,\n        layout: 'fixed', // fixed, fluid, ratio\n        noDataMessage: instance.translate('No Data'),\n        cellHeight: 40,\n        minimumColumnWidth: 30,\n        inlineFilters: false,\n        treeView: false,\n        checkedRowStatus: true,\n        dynamicRowHeight: false,\n        pasteFromClipboard: false,\n        showTotalRow: false,\n        direction: 'ltr',\n        disableReorderColumn: false\n    };\n}\n\nlet defaultComponents = {\n    DataManager,\n    CellManager,\n    ColumnManager,\n    RowManager,\n    BodyRenderer,\n    Style,\n    Keyboard\n};\n\nclass DataTable {\n    constructor(wrapper, options) {\n        DataTable.instances++;\n\n        if (typeof wrapper === 'string') {\n            // css selector\n            wrapper = document.querySelector(wrapper);\n        }\n        this.wrapper = wrapper;\n        if (!(this.wrapper instanceof HTMLElement)) {\n            throw new Error('Invalid argument given for `wrapper`');\n        }\n\n        this.initializeTranslations(options);\n        this.setDefaultOptions();\n        this.buildOptions(options);\n        this.prepare();\n        this.initializeComponents();\n\n        if (this.options.data) {\n            this.refresh();\n            this.columnmanager.applyDefaultSortOrder();\n        }\n    }\n\n    initializeTranslations(options) {\n        this.language = options.language || 'en';\n        this.translationManager = new TranslationManager(this.language);\n\n        if (options.translations) {\n            this.translationManager.addTranslations(options.translations);\n        }\n    }\n\n    setDefaultOptions() {\n        this.DEFAULT_OPTIONS = getDefaultOptions(this);\n    }\n\n    buildOptions(options) {\n        this.options = this.options || {};\n\n        this.options = Object.assign(\n            {}, this.DEFAULT_OPTIONS,\n            this.options || {}, options\n        );\n\n        options.headerDropdown = options.headerDropdown || [];\n        this.options.headerDropdown = [\n            ...this.DEFAULT_OPTIONS.headerDropdown,\n            ...options.headerDropdown\n        ];\n\n        // custom user events\n        this.events = Object.assign(\n            {}, this.DEFAULT_OPTIONS.events,\n            this.options.events || {},\n            options.events || {}\n        );\n        this.fireEvent = this.fireEvent.bind(this);\n    }\n\n    prepare() {\n        this.prepareDom();\n        this.unfreeze();\n    }\n\n    initializeComponents() {\n        let components = Object.assign({}, defaultComponents, this.options.overrideComponents);\n        let {\n            Style: Style$$1,\n            Keyboard: Keyboard$$1,\n            DataManager: DataManager$$1,\n            RowManager: RowManager$$1,\n            ColumnManager: ColumnManager$$1,\n            CellManager: CellManager$$1,\n            BodyRenderer: BodyRenderer$$1\n        } = components;\n\n        this.style = new Style$$1(this);\n        this.keyboard = new Keyboard$$1(this.wrapper);\n        this.datamanager = new DataManager$$1(this.options);\n        this.rowmanager = new RowManager$$1(this);\n        this.columnmanager = new ColumnManager$$1(this);\n        this.cellmanager = new CellManager$$1(this);\n        this.bodyRenderer = new BodyRenderer$$1(this);\n    }\n\n    prepareDom() {\n        this.wrapper.innerHTML = `\n            <div class=\"datatable\" dir=\"${this.options.direction}\">\n                <div class=\"dt-header\"></div>\n                <div class=\"dt-scrollable\"></div>\n                <div class=\"dt-footer\"></div>\n                <div class=\"dt-freeze\">\n                    <span class=\"dt-freeze__message\">\n                        ${this.options.freezeMessage}\n                    </span>\n                </div>\n                <div class=\"dt-toast\"></div>\n                <div class=\"dt-dropdown-container\"></div>\n                <textarea class=\"dt-paste-target\"></textarea>\n            </div>\n        `;\n\n        this.datatableWrapper = $('.datatable', this.wrapper);\n        this.header = $('.dt-header', this.wrapper);\n        this.footer = $('.dt-footer', this.wrapper);\n        this.bodyScrollable = $('.dt-scrollable', this.wrapper);\n        this.freezeContainer = $('.dt-freeze', this.wrapper);\n        this.toastMessage = $('.dt-toast', this.wrapper);\n        this.pasteTarget = $('.dt-paste-target', this.wrapper);\n        this.dropdownContainer = $('.dt-dropdown-container', this.wrapper);\n    }\n\n    refresh(data, columns) {\n        this.datamanager.init(data, columns);\n        this.render();\n        this.setDimensions();\n    }\n\n    destroy() {\n        this.wrapper.innerHTML = '';\n        this.style.destroy();\n        this.fireEvent('onDestroy');\n    }\n\n    appendRows(rows) {\n        this.datamanager.appendRows(rows);\n        this.rowmanager.refreshRows();\n    }\n\n    refreshRow(row, rowIndex) {\n        this.rowmanager.refreshRow(row, rowIndex);\n    }\n\n    render() {\n        this.renderHeader();\n        this.renderBody();\n    }\n\n    renderHeader() {\n        this.columnmanager.renderHeader();\n    }\n\n    renderBody() {\n        this.bodyRenderer.render();\n    }\n\n    setDimensions() {\n        this.style.setDimensions();\n    }\n\n    showToastMessage(message, hideAfter) {\n        this.bodyRenderer.showToastMessage(message, hideAfter);\n    }\n\n    clearToastMessage() {\n        this.bodyRenderer.clearToastMessage();\n    }\n\n    getColumn(colIndex) {\n        return this.datamanager.getColumn(colIndex);\n    }\n\n    getColumns() {\n        return this.datamanager.getColumns();\n    }\n\n    getRows() {\n        return this.datamanager.getRows();\n    }\n\n    getCell(colIndex, rowIndex) {\n        return this.datamanager.getCell(colIndex, rowIndex);\n    }\n\n    getColumnHeaderElement(colIndex) {\n        return this.columnmanager.getColumnHeaderElement(colIndex);\n    }\n\n    getViewportHeight() {\n        if (!this.viewportHeight) {\n            this.viewportHeight = $.style(this.bodyScrollable, 'height');\n        }\n\n        return this.viewportHeight;\n    }\n\n    sortColumn(colIndex, sortOrder) {\n        this.columnmanager.sortColumn(colIndex, sortOrder);\n    }\n\n    removeColumn(colIndex) {\n        this.columnmanager.removeColumn(colIndex);\n    }\n\n    scrollToLastColumn() {\n        this.datatableWrapper.scrollLeft = 9999;\n    }\n\n    freeze() {\n        $.style(this.freezeContainer, {\n            display: ''\n        });\n    }\n\n    unfreeze() {\n        $.style(this.freezeContainer, {\n            display: 'none'\n        });\n    }\n\n    updateOptions(options) {\n        this.buildOptions(options);\n    }\n\n    fireEvent(eventName, ...args) {\n        // fire internalEventHandlers if any\n        // and then user events\n        const handlers = [\n            ...(this._internalEventHandlers[eventName] || []),\n            this.events[eventName]\n        ].filter(Boolean);\n\n        for (let handler of handlers) {\n            handler.apply(this, args);\n        }\n    }\n\n    on(event, handler) {\n        this._internalEventHandlers = this._internalEventHandlers || {};\n        this._internalEventHandlers[event] = this._internalEventHandlers[event] || [];\n        this._internalEventHandlers[event].push(handler);\n    }\n\n    log() {\n        if (this.options.logs) {\n            console.log.apply(console, arguments);\n        }\n    }\n\n    translate(str, args) {\n        return this.translationManager.translate(str, args);\n    }\n}\n\nDataTable.instances = 0;\n\nvar name = \"frappe-datatable\";\nvar version = \"0.0.0-development\";\nvar description = \"A modern datatable library for the web\";\nvar main = \"dist/frappe-datatable.cjs.js\";\nvar unpkg = \"dist/frappe-datatable.min.js\";\nvar jsdelivr = \"dist/frappe-datatable.min.js\";\nvar scripts = {\"start\":\"yarn run dev\",\"build\":\"rollup -c && NODE_ENV=production rollup -c\",\"dev\":\"rollup -c -w\",\"cy:server\":\"http-server -p 8989\",\"cy:open\":\"cypress open\",\"cy:run\":\"cypress run\",\"test\":\"start-server-and-test cy:server http://localhost:8989 cy:run\",\"test-local\":\"start-server-and-test cy:server http://localhost:8989 cy:open\",\"travis-deploy-once\":\"travis-deploy-once\",\"semantic-release\":\"semantic-release\",\"lint\":\"eslint src\",\"lint-and-build\":\"yarn lint && yarn build\",\"commit\":\"npx git-cz\"};\nvar files = [\"dist\",\"src\"];\nvar devDependencies = {\"autoprefixer\":\"^9.0.0\",\"chai\":\"3.5.0\",\"cypress\":\"^9.2.0\",\"cz-conventional-changelog\":\"^2.1.0\",\"deepmerge\":\"^2.0.1\",\"eslint\":\"^5.0.1\",\"eslint-config-airbnb\":\"^16.1.0\",\"eslint-config-airbnb-base\":\"^12.1.0\",\"eslint-plugin-import\":\"^2.11.0\",\"http-server\":\"^0.11.1\",\"mocha\":\"3.3.0\",\"postcss-custom-properties\":\"^7.0.0\",\"postcss-nested\":\"^3.0.0\",\"rollup\":\"^0.59.4\",\"rollup-plugin-commonjs\":\"^8.3.0\",\"rollup-plugin-eslint\":\"^4.0.0\",\"rollup-plugin-json\":\"^2.3.0\",\"rollup-plugin-node-resolve\":\"^3.0.3\",\"rollup-plugin-postcss\":\"^1.2.8\",\"rollup-plugin-uglify-es\":\"^0.0.1\",\"semantic-release\":\"^17.1.1\",\"start-server-and-test\":\"^1.4.1\",\"travis-deploy-once\":\"^5.0.1\"};\nvar repository = {\"type\":\"git\",\"url\":\"https://github.com/frappe/datatable.git\"};\nvar keywords = [\"datatable\",\"data\",\"grid\",\"table\"];\nvar author = \"Faris Ansari\";\nvar license = \"MIT\";\nvar bugs = {\"url\":\"https://github.com/frappe/datatable/issues\"};\nvar homepage = \"https://frappe.io/datatable\";\nvar dependencies = {\"hyperlist\":\"^1.0.0-beta\",\"lodash\":\"^4.17.5\",\"sortablejs\":\"^1.7.0\"};\nvar config = {\"commitizen\":{\"path\":\"cz-conventional-changelog\"}};\nvar packageJson = {\n\tname: name,\n\tversion: version,\n\tdescription: description,\n\tmain: main,\n\tunpkg: unpkg,\n\tjsdelivr: jsdelivr,\n\tscripts: scripts,\n\tfiles: files,\n\tdevDependencies: devDependencies,\n\trepository: repository,\n\tkeywords: keywords,\n\tauthor: author,\n\tlicense: license,\n\tbugs: bugs,\n\thomepage: homepage,\n\tdependencies: dependencies,\n\tconfig: config\n};\n\nDataTable.__version__ = packageJson.version;\n\nmodule.exports = DataTable;\n", "// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.views.ReportFactory = class ReportFactory extends frappe.views.Factory {\n\tmake(route) {\n\t\tconst _route = [\"List\", route[1], \"Report\"];\n\n\t\tif (route[2]) {\n\t\t\t// custom report\n\t\t\t_route.push(route[2]);\n\t\t}\n\n\t\tfrappe.set_route(_route);\n\t}\n};\n", "/**\n * frappe.views.ReportView\n */\nimport DataTable from \"frappe-datatable\";\n\nwindow.DataTable = DataTable;\nfrappe.provide(\"frappe.views\");\n\nfrappe.views.ReportView = class ReportView extends frappe.views.ListView {\n\tget view_name() {\n\t\treturn \"Report\";\n\t}\n\n\trender_header() {\n\t\t// Override List View Header\n\t}\n\n\tsetup_defaults() {\n\t\tsuper.setup_defaults();\n\t\tthis.page_title = __(\"Report:\") + \" \" + this.page_title;\n\t\tthis.view = \"Report\";\n\n\t\tconst route = frappe.get_route();\n\t\tif (route.length === 4) {\n\t\t\tthis.report_name = route[3];\n\t\t}\n\n\t\tif (this.report_name) {\n\t\t\treturn this.get_report_doc().then((doc) => {\n\t\t\t\tthis.report_doc = doc;\n\t\t\t\tthis.report_doc.json = JSON.parse(this.report_doc.json);\n\n\t\t\t\tthis.filters = this.report_doc.json.filters;\n\t\t\t\tthis.order_by = this.report_doc.json.order_by;\n\t\t\t\tthis.add_totals_row = this.report_doc.json.add_totals_row;\n\t\t\t\tthis.page_title = __(this.report_name);\n\t\t\t\tthis.page_length = this.report_doc.json.page_length || 20;\n\t\t\t\tthis.order_by = this.report_doc.json.order_by || \"modified desc\";\n\t\t\t\tthis.chart_args = this.report_doc.json.chart_args;\n\t\t\t});\n\t\t} else {\n\t\t\tthis.add_totals_row = this.view_user_settings.add_totals_row || 0;\n\t\t\tthis.chart_args = this.view_user_settings.chart_args;\n\t\t}\n\t\treturn this.get_list_view_settings();\n\t}\n\n\tsetup_view() {\n\t\tthis.setup_columns();\n\t\tsuper.setup_new_doc_event();\n\t\tthis.setup_events();\n\t\tthis.page.main.addClass(\"report-view\");\n\t}\n\n\tsetup_events() {\n\t\tif (this.list_view_settings?.disable_auto_refresh) {\n\t\t\treturn;\n\t\t}\n\t\tfrappe.realtime.doctype_subscribe(this.doctype);\n\t\tfrappe.realtime.on(\"list_update\", (data) => this.on_update(data));\n\t}\n\n\tsetup_page() {\n\t\tthis.menu_items = this.report_menu_items();\n\t\tsuper.setup_page();\n\t}\n\n\ttoggle_side_bar() {\n\t\tsuper.toggle_side_bar();\n\t\t// refresh datatable when sidebar is toggled to accomodate extra space\n\t\tthis.render(true);\n\t}\n\n\tsetup_result_area() {\n\t\tsuper.setup_result_area();\n\t\tthis.setup_charts_area();\n\t\tthis.$datatable_wrapper = $('<div class=\"datatable-wrapper\">');\n\t\tthis.$result.append(this.$datatable_wrapper);\n\t\tthis.settings.onload && this.settings.onload(this);\n\t}\n\n\tsetup_charts_area() {\n\t\tthis.$charts_wrapper = $(`<div class=\"charts-wrapper hidden\">\n\t\t\t<div class=\"text-right\"><button class=\"btn btn-default btn-xs btn-chart-configure\"\n\t\t\t\tstyle=\"margin-right: 15px; margin-top: 15px\">Configure</button></div>\n\t\t\t<div class=\"charts-inner-wrapper\"></div>\n\t\t</div>`);\n\t\tthis.$result.append(this.$charts_wrapper);\n\t\tthis.$charts_wrapper.find(\".btn-chart-configure\").on(\"click\", () => {\n\t\t\tthis.setup_charts();\n\t\t});\n\t}\n\n\tsetup_paging_area() {\n\t\tsuper.setup_paging_area();\n\t\tconst message = __(\n\t\t\t\"For comparison, use >5, <10 or =324. For ranges, use 5:10 (for values between 5 & 10).\"\n\t\t);\n\t\tthis.$paging_area\n\t\t\t.find(\".level-left\")\n\t\t\t.append(`<span class=\"comparison-message text-muted\">${message}</span>`);\n\t}\n\n\tsetup_sort_selector() {\n\t\tthis.sort_selector = new frappe.ui.SortSelector({\n\t\t\tparent: this.filter_area.$filter_list_wrapper,\n\t\t\tdoctype: this.doctype,\n\t\t\targs: this.order_by,\n\t\t\tonchange: this.on_sort_change.bind(this),\n\t\t});\n\n\t\t//Setup groupby for reports\n\t\tthis.group_by_control = new frappe.ui.GroupBy(this);\n\t\tif (this.report_doc && this.report_doc.json.group_by) {\n\t\t\tthis.group_by_control.apply_settings(this.report_doc.json.group_by);\n\t\t}\n\t\tif (this.view_user_settings && this.view_user_settings.group_by) {\n\t\t\tthis.group_by_control.apply_settings(this.view_user_settings.group_by);\n\t\t}\n\t}\n\n\tget_args() {\n\t\tconst args = super.get_args();\n\t\tdelete args.group_by;\n\t\tthis.group_by_control.set_args(args);\n\n\t\treturn args;\n\t}\n\n\tbefore_refresh() {\n\t\tif (this.report_doc) {\n\t\t\t// don't parse frappe.route_options if this is a Custom Report\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\treturn super.before_refresh();\n\t}\n\n\tafter_render() {\n\t\tif (!this.report_doc) {\n\t\t\tthis.save_report_settings();\n\t\t} else if (!$.isEmptyObject(this.report_doc.json)) {\n\t\t\tthis.set_dirty_state_for_custom_report();\n\t\t}\n\n\t\tif (!this.group_by) {\n\t\t\tthis.init_chart();\n\t\t}\n\t}\n\n\tset_dirty_state_for_custom_report() {\n\t\tlet current_settings = {\n\t\t\tfilters: this.filter_area.get(),\n\t\t\tfields: this.fields,\n\t\t\torder_by: this.sort_selector.get_sql_string(),\n\t\t\tadd_totals_row: this.add_totals_row,\n\t\t\tpage_length: this.page_length,\n\t\t\tcolumn_widths: this.get_column_widths(),\n\t\t\tgroup_by: this.group_by_control.get_settings(),\n\t\t\tchart_args: this.get_chart_settings(),\n\t\t};\n\n\t\tlet report_settings = {\n\t\t\tfilters: this.report_doc.json.filters,\n\t\t\tfields: this.report_doc.json.fields,\n\t\t\torder_by: this.report_doc.json.order_by,\n\t\t\tadd_totals_row: this.report_doc.json.add_totals_row,\n\t\t\tpage_length: this.report_doc.json.page_length,\n\t\t\tcolumn_widths: this.report_doc.json.column_widths,\n\t\t\tgroup_by: this.report_doc.json.group_by,\n\t\t\tchart_args: this.report_doc.json.chart_args,\n\t\t};\n\n\t\tif (!frappe.utils.deep_equal(current_settings, report_settings)) {\n\t\t\tthis.page.set_indicator(__(\"Not Saved\"), \"orange\");\n\t\t} else {\n\t\t\tthis.page.clear_indicator();\n\t\t}\n\t}\n\n\tsave_report_settings() {\n\t\tfrappe.model.user_settings.save(this.doctype, \"last_view\", this.view_name);\n\n\t\tif (!this.report_name) {\n\t\t\tthis.save_view_user_settings({\n\t\t\t\tfields: this.fields,\n\t\t\t\tfilters: this.filter_area.get(),\n\t\t\t\torder_by: this.sort_selector.get_sql_string(),\n\t\t\t\tgroup_by: this.group_by_control.get_settings(),\n\t\t\t\tchart_args: this.get_chart_settings(),\n\t\t\t\tadd_totals_row: this.add_totals_row,\n\t\t\t});\n\t\t}\n\t}\n\n\tprepare_data(r) {\n\t\tlet data = r.message || {};\n\t\tdata = frappe.utils.dict(data.keys, data.values);\n\n\t\tif (this.start === 0) {\n\t\t\tthis.data = data;\n\t\t} else {\n\t\t\tthis.data = this.data.concat(data);\n\t\t}\n\t}\n\n\trender(force) {\n\t\tif (this.data.length === 0) return;\n\t\tthis.render_count();\n\t\tthis.setup_columns();\n\n\t\tif (this.group_by) {\n\t\t\tthis.$charts_wrapper.addClass(\"hidden\");\n\t\t} else if (this.chart) {\n\t\t\tthis.refresh_charts();\n\t\t}\n\n\t\tif (this.datatable && !force) {\n\t\t\tthis.datatable.refresh(this.get_data(this.data), this.columns);\n\t\t\treturn;\n\t\t}\n\t\tthis.setup_datatable(this.data);\n\t}\n\n\trender_count() {\n\t\tif (this.list_view_settings?.disable_count) {\n\t\t\treturn;\n\t\t}\n\t\tlet $list_count = this.$paging_area.find(\".list-count\");\n\t\tif (!$list_count.length) {\n\t\t\t$list_count = $(\"<span>\")\n\t\t\t\t.addClass(\"text-muted list-count\")\n\t\t\t\t.prependTo(this.$paging_area.find(\".level-right\"));\n\t\t}\n\t\tthis.get_count_str().then((str) => {\n\t\t\t$list_count.text(str);\n\t\t});\n\t}\n\n\ton_update(data) {\n\t\tif (this.doctype === data.doctype && data.name) {\n\t\t\t// flash row when doc is updated by some other user\n\t\t\tconst flash_row = data.user !== frappe.session.user;\n\t\t\tif (this.data.find((d) => d.name === data.name)) {\n\t\t\t\t// update existing\n\t\t\t\tfrappe.db\n\t\t\t\t\t.get_doc(data.doctype, data.name)\n\t\t\t\t\t.then((doc) => this.update_row(doc, flash_row));\n\t\t\t} else {\n\t\t\t\t// refresh\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate_row(doc, flash_row) {\n\t\tconst to_refresh = [];\n\n\t\tthis.data = this.data.map((d, i) => {\n\t\t\tif (d.name === doc.name) {\n\t\t\t\tfor (let fieldname in d) {\n\t\t\t\t\tif (fieldname.includes(\":\")) {\n\t\t\t\t\t\t// child table field\n\t\t\t\t\t\tconst [cdt, _field] = fieldname.split(\":\");\n\t\t\t\t\t\tconst cdt_row = Object.keys(doc)\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(key) =>\n\t\t\t\t\t\t\t\t\tArray.isArray(doc[key]) &&\n\t\t\t\t\t\t\t\t\tdoc[key].length &&\n\t\t\t\t\t\t\t\t\tdoc[key][0].doctype === cdt\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((key) => doc[key])\n\t\t\t\t\t\t\t.map((a) => a[0])\n\t\t\t\t\t\t\t.filter((cdoc) => cdoc.name === d[cdt + \":name\"])[0];\n\t\t\t\t\t\tif (cdt_row) {\n\t\t\t\t\t\t\td[fieldname] = cdt_row[_field];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\td[fieldname] = doc[fieldname];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tto_refresh.push([d, i]);\n\t\t\t}\n\t\t\treturn d;\n\t\t});\n\n\t\t// indicate row update\n\t\tconst _flash_row = (rowIndex) => {\n\t\t\tif (!flash_row) return;\n\t\t\tconst $row = this.$result.find(`.dt-row[data-row-index=\"${rowIndex}\"]`);\n\t\t\t$row.addClass(\"row-update\");\n\t\t\tsetTimeout(() => $row.removeClass(\"row-update\"), 500);\n\t\t};\n\n\t\tto_refresh.forEach(([data, rowIndex]) => {\n\t\t\tconst new_row = this.build_row(data);\n\t\t\tthis.datatable.refreshRow(new_row, rowIndex);\n\t\t\t_flash_row(rowIndex);\n\t\t});\n\t}\n\n\tsetup_datatable(values) {\n\t\tthis.$datatable_wrapper.empty();\n\t\tthis.datatable = new DataTable(this.$datatable_wrapper[0], {\n\t\t\tcolumns: this.columns,\n\t\t\tdata: this.get_data(values),\n\t\t\tgetEditor: this.get_editing_object.bind(this),\n\t\t\tlanguage: frappe.boot.lang,\n\t\t\ttranslations: frappe.utils.datatable.get_translations(),\n\t\t\tcheckboxColumn: true,\n\t\t\tinlineFilters: true,\n\t\t\tcellHeight: 35,\n\t\t\tdirection: frappe.utils.is_rtl() ? \"rtl\" : \"ltr\",\n\t\t\tevents: {\n\t\t\t\tonRemoveColumn: (column) => {\n\t\t\t\t\tthis.remove_column_from_datatable(column);\n\t\t\t\t},\n\t\t\t\tonSwitchColumn: (column1, column2) => {\n\t\t\t\t\tthis.switch_column(column1, column2);\n\t\t\t\t},\n\t\t\t\tonCheckRow: () => {\n\t\t\t\t\tconst checked_items = this.get_checked_items();\n\t\t\t\t\tthis.toggle_actions_menu_button(checked_items.length > 0);\n\t\t\t\t},\n\t\t\t},\n\t\t\thooks: {\n\t\t\t\tcolumnTotal: frappe.utils.report_column_total,\n\t\t\t},\n\t\t\theaderDropdown: [\n\t\t\t\t{\n\t\t\t\t\tlabel: __(\"Add Column\"),\n\t\t\t\t\taction: (datatabe_col) => {\n\t\t\t\t\t\tlet columns_in_picker = [];\n\t\t\t\t\t\tconst columns = this.get_columns_for_picker();\n\n\t\t\t\t\t\tcolumns_in_picker = columns[this.doctype]\n\t\t\t\t\t\t\t.filter((df) => !this.is_column_added(df))\n\t\t\t\t\t\t\t.map((df) => ({\n\t\t\t\t\t\t\t\tlabel: __(df.label),\n\t\t\t\t\t\t\t\tvalue: df.fieldname,\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tdelete columns[this.doctype];\n\n\t\t\t\t\t\tfor (let cdt in columns) {\n\t\t\t\t\t\t\tcolumns[cdt]\n\t\t\t\t\t\t\t\t.filter((df) => !this.is_column_added(df))\n\t\t\t\t\t\t\t\t.map((df) => ({\n\t\t\t\t\t\t\t\t\tlabel: __(df.label) + ` (${cdt})`,\n\t\t\t\t\t\t\t\t\tvalue: df.fieldname + \",\" + cdt,\n\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t.forEach((df) => columns_in_picker.push(df));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\t\t\t\ttitle: __(\"Add Column\"),\n\t\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __(\"Select Column\"),\n\t\t\t\t\t\t\t\t\tfieldname: \"column\",\n\t\t\t\t\t\t\t\t\tfieldtype: \"Autocomplete\",\n\t\t\t\t\t\t\t\t\toptions: columns_in_picker,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __(\"Insert Column Before {0}\", [\n\t\t\t\t\t\t\t\t\t\t__(datatabe_col.docfield.label).bold(),\n\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\tfieldname: \"insert_before\",\n\t\t\t\t\t\t\t\t\tfieldtype: \"Check\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tprimary_action: ({ column, insert_before }) => {\n\t\t\t\t\t\t\t\tif (!columns_in_picker.map((col) => col.value).includes(column)) {\n\t\t\t\t\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\t\t\t\t\tmessage: __(\"Invalid column\"),\n\t\t\t\t\t\t\t\t\t\tindicator: \"orange\",\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlet doctype = this.doctype;\n\t\t\t\t\t\t\t\tif (column.includes(\",\")) {\n\t\t\t\t\t\t\t\t\t[column, doctype] = column.split(\",\");\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlet index = datatabe_col.colIndex;\n\t\t\t\t\t\t\t\tif (insert_before) {\n\t\t\t\t\t\t\t\t\tindex = index - 1;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthis.add_column_to_datatable(column, doctype, index);\n\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\td.show();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\ttoggle_charts() {\n\t\t// add\n\t\tif (!this.chart) {\n\t\t\tthis.setup_charts();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.$charts_wrapper.hasClass(\"hidden\")) {\n\t\t\t// reload chart\n\t\t\tthis.$charts_wrapper.removeClass(\"hidden\");\n\t\t\tthis.refresh_charts();\n\t\t} else {\n\t\t\t// remove chart\n\t\t\tthis.$charts_wrapper.addClass(\"hidden\");\n\t\t\tthis.save_view_user_settings({ chart_args: null });\n\t\t\tthis.chart_args = null;\n\t\t}\n\t}\n\n\tinit_chart() {\n\t\t// show chart if saved via report or user settings\n\t\tif (!this.chart) {\n\t\t\tif (this.chart_args) {\n\t\t\t\tthis.build_chart_args(\n\t\t\t\t\tthis.chart_args.x_axis,\n\t\t\t\t\tthis.chart_args.y_axes,\n\t\t\t\t\tthis.chart_args.chart_type\n\t\t\t\t);\n\n\t\t\t\tthis.make_chart();\n\t\t\t}\n\t\t}\n\t}\n\n\tsetup_charts() {\n\t\t// get fields from columns\n\t\tlet x_fields = [],\n\t\t\ty_fields = [];\n\t\tfor (let col of this.columns) {\n\t\t\t// all options in x\n\t\t\tx_fields.push({\n\t\t\t\tlabel: col.content,\n\t\t\t\tfieldname: col.id,\n\t\t\t\tvalue: col.id,\n\t\t\t});\n\n\t\t\t// numeric values in y\n\t\t\tif (col.docfield && frappe.model.numeric_fieldtypes.includes(col.docfield.fieldtype)) {\n\t\t\t\ty_fields.push({\n\t\t\t\t\tlabel: col.content,\n\t\t\t\t\tfieldname: col.id,\n\t\t\t\t\tvalue: col.id,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tconst defaults = this.chart_args || {};\n\n\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Configure Chart\"),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tlabel: __(\"X Axis Field\"),\n\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t\tfieldname: \"x_axis\",\n\t\t\t\t\toptions: x_fields,\n\t\t\t\t\tdefault: defaults.x_axis,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __(\"Y Axis Fields\"),\n\t\t\t\t\tfieldtype: \"MultiSelect\",\n\t\t\t\t\tfieldname: \"y_axes\",\n\t\t\t\t\toptions: y_fields,\n\t\t\t\t\tdescription: __(\"Showing only Numeric fields from Report\"),\n\t\t\t\t\tdefault: defaults.y_axes ? defaults.y_axes.join(\", \") : null,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: __(\"Chart Type\"),\n\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t\toptions: [\"Bar\", \"Line\", \"Pie\", \"Percentage\", \"Donut\"],\n\t\t\t\t\tfieldname: \"chart_type\",\n\t\t\t\t\tdefault: defaults.chart_type\n\t\t\t\t\t\t? frappe.utils.to_title_case(defaults.chart_type)\n\t\t\t\t\t\t: \"Bar\",\n\t\t\t\t},\n\t\t\t],\n\t\t\tprimary_action: (data) => {\n\t\t\t\tdata.y_axes = data.y_axes\n\t\t\t\t\t.split(\",\")\n\t\t\t\t\t.map((d) => d.trim())\n\t\t\t\t\t.filter(Boolean);\n\n\t\t\t\tthis.build_chart_args(data.x_axis, data.y_axes, data.chart_type);\n\t\t\t\tthis.make_chart();\n\t\t\t\tdialog.hide();\n\t\t\t},\n\t\t});\n\n\t\tdialog.show();\n\t}\n\n\tbuild_chart_args(x_axis, y_axes, chart_type) {\n\t\tlet datasets = y_axes.map((y_axis) => ({\n\t\t\tname: this.columns_map[y_axis].content,\n\t\t\tvalues: this.data.map((d) => d[y_axis]),\n\t\t}));\n\n\t\tthis.chart_args = {\n\t\t\tchart_type: chart_type.toLowerCase(),\n\t\t\tx_axis: x_axis,\n\t\t\ty_axes: y_axes,\n\t\t\tlabels: this.data.map((d) => d[x_axis]),\n\t\t\tdatasets: datasets,\n\t\t};\n\n\t\tthis.save_view_user_settings({ chart_args: this.get_chart_settings() });\n\t}\n\n\tget_chart_settings() {\n\t\tif (this.chart_args) {\n\t\t\treturn {\n\t\t\t\tchart_type: this.chart_args.chart_type,\n\t\t\t\tx_axis: this.chart_args.x_axis,\n\t\t\t\ty_axes: this.chart_args.y_axes,\n\t\t\t};\n\t\t}\n\t}\n\n\tmake_chart() {\n\t\tconst args = this.chart_args;\n\t\tlet data = {\n\t\t\tlabels: args.labels,\n\t\t\tdatasets: args.datasets,\n\t\t};\n\n\t\tthis.last_chart_type = args.chart_type;\n\n\t\tconst get_df = (field) => this.columns_map[field].docfield;\n\n\t\tthis.$charts_wrapper.removeClass(\"hidden\");\n\n\t\tthis.chart = new frappe.Chart(this.$charts_wrapper.find(\".charts-inner-wrapper\")[0], {\n\t\t\ttitle: __(\"{0} Chart\", [this.doctype]),\n\t\t\tdata: data,\n\t\t\ttype: args.chart_type,\n\t\t\ttruncateLegends: 1,\n\t\t\tcolors: [\"#70E078\", \"light-blue\", \"orange\", \"red\"],\n\t\t\taxisOptions: {\n\t\t\t\tshortenYAxisNumbers: 1,\n\t\t\t\tnumberFormatter: frappe.utils.format_chart_axis_number,\n\t\t\t},\n\t\t\ttooltipOptions: {\n\t\t\t\tformatTooltipY: (value) => {\n\t\t\t\t\treturn frappe.format(value, get_df(this.chart_args.y_axes[0]), {\n\t\t\t\t\t\talways_show_decimals: true,\n\t\t\t\t\t\tinline: true,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\trefresh_charts() {\n\t\tif (!this.chart || !this.chart_args) return;\n\t\tthis.$charts_wrapper.removeClass(\"hidden\");\n\t\tconst { x_axis, y_axes, chart_type } = this.chart_args;\n\t\tthis.build_chart_args(x_axis, y_axes, chart_type);\n\t\tthis.chart.update(this.chart_args);\n\t}\n\n\tget_editing_object(colIndex, rowIndex, value, parent) {\n\t\tconst control = this.render_editing_input(colIndex, value, parent);\n\t\tif (!control) return false;\n\n\t\tcontrol.df.change = () => control.set_focus();\n\n\t\treturn {\n\t\t\tinitValue: (value) => {\n\t\t\t\treturn control.set_value(value);\n\t\t\t},\n\t\t\tsetValue: (value) => {\n\t\t\t\tconst cell = this.datatable.getCell(colIndex, rowIndex);\n\t\t\t\tlet fieldname = this.datatable.getColumn(colIndex).docfield.fieldname;\n\t\t\t\tlet docname = cell.name;\n\t\t\t\tlet doctype = cell.doctype;\n\n\t\t\t\tcontrol.set_value(value);\n\t\t\t\treturn this.set_control_value(doctype, docname, fieldname, value)\n\t\t\t\t\t.then((updated_doc) => {\n\t\t\t\t\t\tconst _data = this.data\n\t\t\t\t\t\t\t.filter((b) => b.name === updated_doc.name)\n\t\t\t\t\t\t\t.find(\n\t\t\t\t\t\t\t\t(a) =>\n\t\t\t\t\t\t\t\t\t// child table cell\n\t\t\t\t\t\t\t\t\t(doctype != updated_doc.doctype &&\n\t\t\t\t\t\t\t\t\t\ta[doctype + \":name\"] == docname) ||\n\t\t\t\t\t\t\t\t\tdoctype == updated_doc.doctype\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\tfor (let field in _data) {\n\t\t\t\t\t\t\tif (field.includes(\":\")) {\n\t\t\t\t\t\t\t\t// child table field\n\t\t\t\t\t\t\t\tconst [cdt, _field] = field.split(\":\");\n\t\t\t\t\t\t\t\tconst cdt_row = Object.keys(updated_doc)\n\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t(key) =>\n\t\t\t\t\t\t\t\t\t\t\tArray.isArray(updated_doc[key]) &&\n\t\t\t\t\t\t\t\t\t\t\tupdated_doc[key].length &&\n\t\t\t\t\t\t\t\t\t\t\tupdated_doc[key][0].doctype === cdt\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.map((key) => updated_doc[key])[0]\n\t\t\t\t\t\t\t\t\t.filter((cdoc) => cdoc.name === _data[cdt + \":name\"])[0];\n\t\t\t\t\t\t\t\tif (cdt_row) {\n\t\t\t\t\t\t\t\t\t_data[field] = cdt_row[_field];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_data[field] = updated_doc[field];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => this.refresh_charts());\n\t\t\t},\n\t\t\tgetValue: () => {\n\t\t\t\treturn control.get_value();\n\t\t\t},\n\t\t};\n\t}\n\n\tset_control_value(doctype, docname, fieldname, value) {\n\t\tthis.last_updated_doc = docname;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tfrappe.db\n\t\t\t\t.set_value(doctype, docname, { [fieldname]: value })\n\t\t\t\t.then((r) => {\n\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\tresolve(r.message);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(reject);\n\t\t});\n\t}\n\n\trender_editing_input(colIndex, value, parent) {\n\t\tconst col = this.datatable.getColumn(colIndex);\n\t\tlet control = null;\n\n\t\tif (col.docfield.fieldtype === \"Text Editor\") {\n\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __(\"Edit {0}\", [col.docfield.label]),\n\t\t\t\tfields: [col.docfield],\n\t\t\t\tprimary_action: () => {\n\t\t\t\t\tthis.datatable.cellmanager.deactivateEditing();\n\t\t\t\t\td.hide();\n\t\t\t\t},\n\t\t\t\ton_hide: () => {\n\t\t\t\t\tthis.datatable.cellmanager.deactivateEditing(false);\n\t\t\t\t},\n\t\t\t});\n\t\t\td.show();\n\t\t\tcontrol = d.fields_dict[col.docfield.fieldname];\n\t\t} else {\n\t\t\t// make control\n\t\t\tcontrol = frappe.ui.form.make_control({\n\t\t\t\tdf: col.docfield,\n\t\t\t\tparent: parent,\n\t\t\t\trender_input: true,\n\t\t\t});\n\t\t\tcontrol.set_value(value);\n\t\t\tcontrol.toggle_label(false);\n\t\t\tcontrol.toggle_description(false);\n\t\t}\n\n\t\treturn control;\n\t}\n\n\tis_editable(df, data) {\n\t\tif (\n\t\t\tdf &&\n\t\t\tfrappe.model.can_write(this.doctype) &&\n\t\t\t// not a submitted doc or field is allowed to edit after submit\n\t\t\t(data.docstatus !== 1 || df.allow_on_submit) &&\n\t\t\t// not a cancelled doc\n\t\t\tdata.docstatus !== 2 &&\n\t\t\t!df.read_only &&\n\t\t\t!df.is_virtual &&\n\t\t\t!df.hidden &&\n\t\t\t// not a standard field i.e., owner, modified_by, etc.\n\t\t\tfrappe.model.is_non_std_field(df.fieldname)\n\t\t)\n\t\t\treturn true;\n\t\treturn false;\n\t}\n\n\tget_data(values) {\n\t\treturn this.build_rows(values);\n\t}\n\n\tset_fields() {\n\t\t// default fields\n\t\t[\"name\", \"docstatus\"].map((f) => this._add_field(f));\n\n\t\tif (this.report_name && this.report_doc.json.fields) {\n\t\t\tlet fields = this.report_doc.json.fields.slice();\n\t\t\tfields.forEach((f) => this._add_field(f[0], f[1]));\n\t\t\treturn;\n\t\t} else if (this.view_user_settings.fields) {\n\t\t\t// get from user_settings\n\t\t\tlet fields = this.view_user_settings.fields;\n\t\t\tfields.forEach((f) => this._add_field(f[0], f[1]));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.set_default_fields();\n\t}\n\n\tset_default_fields() {\n\t\t// get fields from meta\n\t\tthis.fields = this.fields || [];\n\t\tconst add_field = (f) => this._add_field(f);\n\n\t\t// default fields\n\t\t[this.meta.title_field, this.meta.image_field].map(add_field);\n\n\t\t// fields in_list_view or in_standard_filter\n\t\tconst fields = this.meta.fields.filter((df) => {\n\t\t\treturn (\n\t\t\t\t(df.in_list_view || df.in_standard_filter) &&\n\t\t\t\tfrappe.perm.has_perm(this.doctype, df.permlevel, \"read\") &&\n\t\t\t\tfrappe.model.is_value_type(df.fieldtype) &&\n\t\t\t\t!df.report_hide\n\t\t\t);\n\t\t});\n\n\t\tfields.map(add_field);\n\n\t\t// currency fields\n\t\tfields\n\t\t\t.filter((df) => df.fieldtype === \"Currency\" && df.options)\n\t\t\t.map((df) => {\n\t\t\t\tif (df.options.includes(\":\")) {\n\t\t\t\t\tadd_field(df.options.split(\":\")[1]);\n\t\t\t\t} else {\n\t\t\t\t\tadd_field(df.options);\n\t\t\t\t}\n\t\t\t});\n\n\t\t// fields in listview_settings\n\t\t(this.settings.add_fields || []).map(add_field);\n\t}\n\n\tbuild_fields() {\n\t\tsuper.build_fields();\n\t}\n\n\treorder_fields() {\n\t\t// generate table fields in the required format [\"name\", \"DocType\"]\n\t\t// these are fields in the column before adding new fields\n\t\tlet table_fields = this.columns.map((df) => [df.field, df.docfield.parent]);\n\n\t\t// filter fields that are already in table\n\t\t// iterate over table_fields to preserve the existing order of fields\n\t\t// The filter will ensure the unchecked fields are removed\n\t\tlet fields_already_in_table = table_fields.filter((df) => {\n\t\t\treturn this.fields.find((field) => {\n\t\t\t\treturn df[0] == field[0] && df[1] == field[1];\n\t\t\t});\n\t\t});\n\n\t\t// find new fields that didn't already exists\n\t\t// This will be appended to the end of the table\n\t\tlet fields_to_add = this.fields.filter((df) => {\n\t\t\treturn !table_fields.find((field) => {\n\t\t\t\treturn df[0] == field[0] && df[1] == field[1];\n\t\t\t});\n\t\t});\n\n\t\t// rebuild fields\n\t\tthis.fields = [...fields_already_in_table, ...fields_to_add];\n\t}\n\n\tget_fields() {\n\t\tlet fields = this.fields.map((f) => {\n\t\t\tlet column_name = frappe.model.get_full_column_name(f[0], f[1]);\n\t\t\tif (f[1] !== this.doctype) {\n\t\t\t\t// child table field\n\t\t\t\tcolumn_name = column_name + \" as \" + `'${f[1]}:${f[0]}'`;\n\t\t\t}\n\t\t\treturn column_name;\n\t\t});\n\t\tconst cdt_name_fields = this.get_unique_cdt_in_view().map(\n\t\t\t(cdt) => frappe.model.get_full_column_name(\"name\", cdt) + \" as \" + `'${cdt}:name'`\n\t\t);\n\t\tfields = fields.concat(cdt_name_fields);\n\n\t\treturn fields;\n\t}\n\n\tget_unique_cdt_in_view() {\n\t\treturn this.fields\n\t\t\t.filter((f) => f[1] !== this.doctype)\n\t\t\t.map((f) => f[1])\n\t\t\t.uniqBy((d) => d);\n\t}\n\n\tadd_column_to_datatable(fieldname, doctype, col_index) {\n\t\tconst field = [fieldname, doctype];\n\t\tthis.fields.splice(col_index, 0, field);\n\n\t\tthis.add_currency_column(fieldname, doctype, col_index);\n\n\t\tthis.build_fields();\n\t\tthis.setup_columns();\n\n\t\tif (this.datatable) this.datatable.destroy();\n\t\tthis.datatable = null;\n\t\tthis.refresh();\n\t}\n\n\tadd_currency_column(fieldname, doctype, col_index) {\n\t\t// Adds dependent currency field if required\n\t\tconst df = frappe.meta.get_docfield(doctype, fieldname);\n\t\tif (\n\t\t\tdf &&\n\t\t\tdf.fieldtype === \"Currency\" &&\n\t\t\tdf.options &&\n\t\t\t!df.options.includes(\":\") &&\n\t\t\tfrappe.meta.has_field(doctype, df.options)\n\t\t) {\n\t\t\tconst field = [df.options, doctype];\n\t\t\tif (col_index === undefined) {\n\t\t\t\tthis.fields.push(field);\n\t\t\t} else {\n\t\t\t\tthis.fields.splice(col_index, 0, field);\n\t\t\t}\n\t\t\tconst field_label = frappe.meta.get_label(doctype, field[0]);\n\t\t\tfrappe.show_alert(\n\t\t\t\t__(\"Also adding the dependent currency field {0}\", [__(field_label).bold()])\n\t\t\t);\n\t\t}\n\t}\n\n\tadd_status_dependency_column(col, doctype) {\n\t\t// Adds dependent column from which status is derived if required\n\t\tif (col && !this.fields.find((f) => f[0] === col)) {\n\t\t\tconst field = [col, doctype];\n\t\t\tthis.fields.push(field);\n\t\t\tthis.refresh();\n\t\t\tconst field_label = frappe.meta.get_label(doctype, field[0]);\n\t\t\tfrappe.show_alert(\n\t\t\t\t__(\"Also adding the status dependency field {0}\", [__(field_label).bold()])\n\t\t\t);\n\t\t}\n\t}\n\n\tremove_column_from_datatable(column) {\n\t\tconst index = this.fields.findIndex((f) => column.field === f[0]);\n\t\tif (index === -1) return;\n\t\tconst field = this.fields[index];\n\n\t\tif (field[0] === \"name\") {\n\t\t\tthis.refresh();\n\t\t\tfrappe.throw(__(\"Cannot remove ID field\"));\n\t\t}\n\n\t\tthis.fields.splice(index, 1);\n\t\tthis.build_fields();\n\t\tthis.setup_columns();\n\t\tthis.refresh();\n\t}\n\n\tswitch_column(col1, col2) {\n\t\tconst index1 = this.fields.findIndex((f) => col1.field === f[0]);\n\t\tconst index2 = this.fields.findIndex((f) => col2.field === f[0]);\n\t\tconst _fields = this.fields.slice();\n\n\t\tlet temp = _fields[index1];\n\t\t_fields[index1] = _fields[index2];\n\t\t_fields[index2] = temp;\n\n\t\tthis.fields = _fields;\n\t\tthis.build_fields();\n\t\tthis.setup_columns();\n\t\tthis.refresh();\n\t}\n\n\tget_columns_for_picker() {\n\t\tlet out = {};\n\n\t\tconst standard_fields_filter = (df) => !frappe.model.no_value_type.includes(df.fieldtype);\n\n\t\tlet doctype_fields = frappe.meta\n\t\t\t.get_docfields(this.doctype)\n\t\t\t.filter(standard_fields_filter);\n\n\t\t// filter out docstatus field from picker\n\t\tlet std_fields = frappe.model.std_fields.filter((df) => df.fieldname !== \"docstatus\");\n\n\t\t// add status field derived from docstatus, if status is not a standard field\n\t\tlet has_status_values = false;\n\n\t\tif (this.data) {\n\t\t\thas_status_values = frappe.get_indicator(this.data[0], this.doctype);\n\t\t}\n\n\t\tif (!frappe.meta.has_field(this.doctype, \"status\") && has_status_values) {\n\t\t\tdoctype_fields = [\n\t\t\t\t{\n\t\t\t\t\tlabel: __(\"Status\"),\n\t\t\t\t\tfieldname: \"docstatus\",\n\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t},\n\t\t\t].concat(doctype_fields);\n\t\t}\n\n\t\tdoctype_fields = [\n\t\t\t{\n\t\t\t\tlabel: __(\"ID\", null, \"Label of name column in report\"),\n\t\t\t\tfieldname: \"name\",\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\treqd: 1,\n\t\t\t},\n\t\t].concat(doctype_fields, std_fields);\n\n\t\tout[this.doctype] = doctype_fields;\n\n\t\tconst table_fields = frappe.meta.get_table_fields(this.doctype);\n\n\t\ttable_fields.forEach((df) => {\n\t\t\tconst cdt = df.options;\n\t\t\tconst child_table_fields = frappe.meta\n\t\t\t\t.get_docfields(cdt)\n\t\t\t\t.filter(standard_fields_filter);\n\n\t\t\tout[cdt] = child_table_fields;\n\n\t\t\t// add index column for child tables\n\t\t\tout[cdt].push({\n\t\t\t\tlabel: __(\"Index\"),\n\t\t\t\tfieldname: \"idx\",\n\t\t\t\tfieldtype: \"Int\",\n\t\t\t\tparent: cdt,\n\t\t\t});\n\t\t});\n\t\treturn out;\n\t}\n\n\tget_dialog_fields() {\n\t\tconst dialog_fields = [];\n\t\tconst columns = this.get_columns_for_picker();\n\n\t\tdialog_fields.push({\n\t\t\tlabel: __(this.doctype),\n\t\t\tfieldname: this.doctype,\n\t\t\tfieldtype: \"MultiCheck\",\n\t\t\tcolumns: 2,\n\t\t\toptions: columns[this.doctype]\n\t\t\t\t.filter((df) => {\n\t\t\t\t\treturn !df.hidden && df.fieldname !== \"name\";\n\t\t\t\t})\n\t\t\t\t.map((df) => ({\n\t\t\t\t\tlabel: __(df.label),\n\t\t\t\t\tvalue: df.fieldname,\n\t\t\t\t\tchecked: this.fields.find(\n\t\t\t\t\t\t(f) => f[0] === df.fieldname && f[1] === this.doctype\n\t\t\t\t\t),\n\t\t\t\t})),\n\t\t});\n\n\t\tdelete columns[this.doctype];\n\n\t\tconst table_fields = frappe.meta.get_table_fields(this.doctype).filter((df) => !df.hidden);\n\n\t\ttable_fields.forEach((df) => {\n\t\t\tconst cdt = df.options;\n\n\t\t\tdialog_fields.push({\n\t\t\t\tlabel: __(df.label) + ` (${__(cdt)})`,\n\t\t\t\tfieldname: df.options,\n\t\t\t\tfieldtype: \"MultiCheck\",\n\t\t\t\tcolumns: 2,\n\t\t\t\toptions: columns[cdt]\n\t\t\t\t\t.filter((df) => {\n\t\t\t\t\t\treturn !df.hidden;\n\t\t\t\t\t})\n\t\t\t\t\t.map((df) => ({\n\t\t\t\t\t\tlabel: __(df.label),\n\t\t\t\t\t\tvalue: df.fieldname,\n\t\t\t\t\t\tchecked: this.fields.find((f) => f[0] === df.fieldname && f[1] === cdt),\n\t\t\t\t\t})),\n\t\t\t});\n\t\t});\n\n\t\treturn dialog_fields;\n\t}\n\n\tis_column_added(df) {\n\t\treturn Boolean(this.fields.find((f) => f[0] === df.fieldname && df.parent === f[1]));\n\t}\n\n\tsetup_columns() {\n\t\t// apply previous column width\n\t\tlet column_widths = null;\n\t\tif (this.columns) {\n\t\t\tcolumn_widths = this.get_column_widths();\n\t\t}\n\n\t\tthis.columns = [];\n\t\tthis.columns_map = {};\n\n\t\tfor (let f of this.fields) {\n\t\t\tlet column;\n\t\t\tif (f[0] !== \"docstatus\") {\n\t\t\t\tcolumn = this.build_column(f);\n\t\t\t} else {\n\t\t\t\t// if status is not in fields append status column derived from docstatus\n\t\t\t\tif (\n\t\t\t\t\t!this.fields.includes([\"status\", this.doctype]) &&\n\t\t\t\t\t!frappe.meta.has_field(this.doctype, \"status\")\n\t\t\t\t) {\n\t\t\t\t\tcolumn = this.build_column([\"docstatus\", this.doctype]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (column) {\n\t\t\t\tif (column_widths) {\n\t\t\t\t\tcolumn.width = column_widths[column.id] || column.width || 120;\n\t\t\t\t}\n\t\t\t\tthis.columns.push(column);\n\t\t\t\tthis.columns_map[column.id] = column;\n\t\t\t}\n\t\t}\n\t}\n\n\tbuild_column(c) {\n\t\tlet [fieldname, doctype] = c;\n\t\tlet docfield = frappe.meta.docfield_map[doctype || this.doctype][fieldname];\n\n\t\t// group by column\n\t\tif (fieldname === \"_aggregate_column\") {\n\t\t\tdocfield = this.group_by_control.get_group_by_docfield();\n\t\t}\n\n\t\t// child table index column\n\t\tif (fieldname === \"idx\" && doctype !== this.doctype) {\n\t\t\tdocfield = {\n\t\t\t\tlabel: \"Index\",\n\t\t\t\tfieldtype: \"Int\",\n\t\t\t\tparent: doctype,\n\t\t\t};\n\t\t}\n\n\t\tif (!docfield) {\n\t\t\tdocfield = frappe.model.get_std_field(fieldname, true);\n\n\t\t\tif (docfield) {\n\t\t\t\tif (!docfield.label) {\n\t\t\t\t\tdocfield.label = toTitle(fieldname);\n\t\t\t\t\tif (docfield.label.includes(\"_\")) {\n\t\t\t\t\t\tdocfield.label = docfield.label.replace(\"_\", \" \");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdocfield.parent = this.doctype;\n\t\t\t\tif (fieldname == \"name\") {\n\t\t\t\t\tdocfield.options = this.doctype;\n\t\t\t\t}\n\t\t\t\tif (fieldname == \"docstatus\" && !frappe.meta.has_field(this.doctype, \"status\")) {\n\t\t\t\t\tdocfield.label = \"Status\";\n\t\t\t\t\tdocfield.fieldtype = \"Data\";\n\t\t\t\t\tdocfield.name = \"status\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!docfield || docfield.report_hide) return;\n\n\t\tlet title = __(docfield.label);\n\t\tif (doctype !== this.doctype) {\n\t\t\ttitle += ` (${__(doctype)})`;\n\t\t}\n\n\t\tconst editable =\n\t\t\tfrappe.model.is_non_std_field(fieldname) &&\n\t\t\t!docfield.read_only &&\n\t\t\t!docfield.is_virtual;\n\n\t\tconst align = (() => {\n\t\t\tconst is_numeric = frappe.model.is_numeric_field(docfield);\n\t\t\tif (is_numeric) {\n\t\t\t\treturn \"right\";\n\t\t\t}\n\t\t\treturn docfield.fieldtype === \"Date\" ? \"right\" : \"left\";\n\t\t})();\n\n\t\tlet id = fieldname;\n\n\t\t// child table column\n\t\tif (doctype !== this.doctype && fieldname !== \"_aggregate_column\") {\n\t\t\tid = `${doctype}:${fieldname}`;\n\t\t}\n\n\t\tlet width = (docfield ? cint(docfield.width) : null) || null;\n\t\tif (this.report_doc) {\n\t\t\t// load the user saved column width\n\t\t\tlet saved_column_widths = this.report_doc.json.column_widths || {};\n\t\t\twidth = saved_column_widths[id] || width;\n\t\t}\n\n\t\tlet compareFn = null;\n\t\tif (docfield.fieldtype === \"Date\") {\n\t\t\tcompareFn = (cell, keyword) => {\n\t\t\t\tif (!cell.content) return null;\n\t\t\t\tif (keyword.length !== \"YYYY-MM-DD\".length) return null;\n\n\t\t\t\tconst keywordValue = frappe.datetime.user_to_obj(keyword);\n\t\t\t\tconst cellValue = frappe.datetime.str_to_obj(cell.content);\n\t\t\t\treturn [+cellValue, +keywordValue];\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tid: id,\n\t\t\tfield: fieldname,\n\t\t\tname: title,\n\t\t\tcontent: title,\n\t\t\tdocfield,\n\t\t\twidth,\n\t\t\teditable,\n\t\t\talign,\n\t\t\tcompareValue: compareFn,\n\t\t\tformat: (value, row, column, data) => {\n\t\t\t\tlet doc = null;\n\t\t\t\tif (Array.isArray(row)) {\n\t\t\t\t\tdoc = row.reduce((acc, curr) => {\n\t\t\t\t\t\tif (!curr.column.docfield) return acc;\n\t\t\t\t\t\tacc[curr.column.docfield.fieldname] = curr.content;\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t}, {});\n\t\t\t\t} else {\n\t\t\t\t\tdoc = row;\n\t\t\t\t}\n\n\t\t\t\treturn frappe.format(value, column.docfield, { always_show_decimals: true }, doc);\n\t\t\t},\n\t\t};\n\t}\n\n\tbuild_rows(data) {\n\t\tconst out = data.map((d) => this.build_row(d));\n\n\t\tif (this.add_totals_row) {\n\t\t\tconst totals = this.get_columns_totals(data);\n\t\t\tconst totals_row = this.columns.map((col, i) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: __(\"Totals Row\"),\n\t\t\t\t\tcontent: totals[col.id],\n\t\t\t\t\tformat: (value) => {\n\t\t\t\t\t\tlet formatted_value = frappe.format(\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tcol.docfield,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\talways_show_decimals: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdata[0]\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\t\treturn this.format_total_cell(formatted_value, col);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn formatted_value;\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tout.push(totals_row);\n\t\t}\n\t\treturn out;\n\t}\n\n\tformat_total_cell(formatted_value, df) {\n\t\tlet cell_value = __(\"Totals\").bold();\n\t\tif (frappe.model.is_numeric_field(df.docfield)) {\n\t\t\tcell_value = `<span class=\"flex justify-between\">\n\t\t\t\t${cell_value} ${$(formatted_value).text()}\n\t\t\t</span>`;\n\t\t}\n\t\treturn cell_value;\n\t}\n\n\tbuild_row(d) {\n\t\treturn this.columns.map((col) => {\n\t\t\tif (col.docfield.parent !== this.doctype) {\n\t\t\t\t// child table field\n\t\t\t\tconst cdt_field = (f) => `${col.docfield.parent}:${f}`;\n\t\t\t\tconst name = d[cdt_field(\"name\")];\n\n\t\t\t\treturn {\n\t\t\t\t\tname: name,\n\t\t\t\t\tdoctype: col.docfield.parent,\n\t\t\t\t\tcontent: d[cdt_field(col.field)] || d[col.field],\n\t\t\t\t\teditable: Boolean(name && this.is_editable(col.docfield, d)),\n\t\t\t\t\tformat: (value) => {\n\t\t\t\t\t\treturn frappe.format(\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tcol.docfield,\n\t\t\t\t\t\t\t{ always_show_decimals: true },\n\t\t\t\t\t\t\td\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (col.field === \"docstatus\" && !frappe.meta.has_field(this.doctype, \"status\")) {\n\t\t\t\t// get status from docstatus\n\t\t\t\tlet status = frappe.get_indicator(d, this.doctype);\n\t\t\t\tif (status) {\n\t\t\t\t\t// get_indicator returns the dependent field's condition as the 3rd parameter\n\t\t\t\t\tlet dependent_col = status[2]?.split(\",\")[0];\n\t\t\t\t\t// add status dependency column\n\t\t\t\t\tthis.add_status_dependency_column(dependent_col, this.doctype);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: d.name,\n\t\t\t\t\t\tdoctype: col.docfield.parent,\n\t\t\t\t\t\tcontent: status[0],\n\t\t\t\t\t\teditable: false,\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\t// no status values found\n\t\t\t\t\tthis.remove_column_from_datatable(col);\n\t\t\t\t}\n\t\t\t} else if (col.field in d) {\n\t\t\t\tconst value = d[col.field];\n\t\t\t\treturn {\n\t\t\t\t\tname: d.name,\n\t\t\t\t\tdoctype: col.docfield.parent,\n\t\t\t\t\tcontent: value,\n\t\t\t\t\teditable: this.is_editable(col.docfield, d),\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tcontent: \"\",\n\t\t\t};\n\t\t});\n\t}\n\n\tget_checked_items(only_docnames) {\n\t\tconst indexes = this.datatable.rowmanager.getCheckedRows();\n\t\tconst items = indexes.map((i) => this.data[i]).filter((i) => i != undefined);\n\n\t\tif (only_docnames) {\n\t\t\treturn items.map((d) => d.name);\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tclear_checked_items() {\n\t\tthis.datatable.rowmanager.checkAll(false);\n\t}\n\n\tsave_report(save_type) {\n\t\tconst _save_report = (name) => {\n\t\t\t// callback\n\t\t\tconst report_settings = {\n\t\t\t\tfilters: this.filter_area.get(),\n\t\t\t\tfields: this.fields,\n\t\t\t\torder_by: this.sort_selector.get_sql_string(),\n\t\t\t\tadd_totals_row: this.add_totals_row,\n\t\t\t\tpage_length: this.page_length,\n\t\t\t\tcolumn_widths: this.get_column_widths(),\n\t\t\t\tgroup_by: this.group_by_control.get_settings(),\n\t\t\t\tchart_args: this.get_chart_settings(),\n\t\t\t};\n\n\t\t\treturn frappe.call({\n\t\t\t\tmethod: \"frappe.desk.reportview.save_report\",\n\t\t\t\targs: {\n\t\t\t\t\tname: name,\n\t\t\t\t\tdoctype: this.doctype,\n\t\t\t\t\treport_settings: JSON.stringify(report_settings),\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tif (r.exc) {\n\t\t\t\t\t\tfrappe.msgprint(__(\"Report was not saved (there were errors)\"));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (r.message != this.report_name) {\n\t\t\t\t\t\t// Rerender the reports dropdown,\n\t\t\t\t\t\t// so that this report is included in the dropdown as well.\n\t\t\t\t\t\tfrappe.boot.user.all_reports[r.message] = {\n\t\t\t\t\t\t\tref_doctype: this.doctype,\n\t\t\t\t\t\t\treport_type: \"Report Builder\",\n\t\t\t\t\t\t\ttitle: r.message,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tfrappe.set_route(\"List\", this.doctype, \"Report\", r.message);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// update state\n\t\t\t\t\tthis.report_doc.json = report_settings;\n\t\t\t\t\tthis.set_dirty_state_for_custom_report();\n\t\t\t\t},\n\t\t\t});\n\t\t};\n\n\t\tif (this.report_name && save_type == \"save\") {\n\t\t\t_save_report(this.report_name);\n\t\t} else {\n\t\t\tfrappe.prompt(\n\t\t\t\t{ fieldname: \"name\", label: __(\"New Report name\"), reqd: 1, fieldtype: \"Data\" },\n\t\t\t\t(data) => {\n\t\t\t\t\t_save_report(data.name);\n\t\t\t\t},\n\t\t\t\t__(\"Save As\")\n\t\t\t);\n\t\t}\n\t}\n\n\tdelete_report() {\n\t\treturn frappe.call({\n\t\t\tmethod: \"frappe.desk.reportview.delete_report\",\n\t\t\targs: { name: this.report_name },\n\t\t\tcallback(response) {\n\t\t\t\tif (response.exc) return;\n\t\t\t\twindow.history.back();\n\t\t\t},\n\t\t});\n\t}\n\n\tget_column_widths() {\n\t\tif (this.datatable) {\n\t\t\treturn this.datatable.datamanager.getColumns(true).reduce((acc, curr) => {\n\t\t\t\tacc[curr.id] = parseInt(curr.width);\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t\t}\n\n\t\treturn {};\n\t}\n\n\tget_report_doc() {\n\t\treturn new Promise((resolve) => {\n\t\t\tfrappe.model.with_doc(\"Report\", this.report_name, () => {\n\t\t\t\tresolve(frappe.get_doc(\"Report\", this.report_name));\n\t\t\t});\n\t\t});\n\t}\n\n\tget_filters_html_for_print() {\n\t\tconst filters = this.filter_area.get();\n\n\t\treturn (\n\t\t\t`<h5>${__(\"Filters:\")}</h5>` +\n\t\t\tfilters\n\t\t\t\t.map((f) => {\n\t\t\t\t\tconst [doctype, fieldname, condition, value] = f;\n\t\t\t\t\tconst docfield = frappe.meta.get_docfield(doctype, fieldname);\n\t\t\t\t\tconst label = `<b>${__(frappe.meta.get_label(doctype, fieldname))}</b>`;\n\t\t\t\t\tswitch (condition) {\n\t\t\t\t\t\tcase \"=\":\n\t\t\t\t\t\t\treturn __(\"{0} is equal to {1}\", [\n\t\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t\t\tfrappe.format(value, docfield),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\tcase \"!=\":\n\t\t\t\t\t\t\treturn __(\"{0} is not equal to {1}\", [\n\t\t\t\t\t\t\t\t__(label),\n\t\t\t\t\t\t\t\tfrappe.format(value, docfield),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\tcase \">\":\n\t\t\t\t\t\t\treturn __(\"{0} is greater than {1}\", [\n\t\t\t\t\t\t\t\t__(label),\n\t\t\t\t\t\t\t\tfrappe.format(value, docfield),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\tcase \"<\":\n\t\t\t\t\t\t\treturn __(\"{0} is less than {1}\", [\n\t\t\t\t\t\t\t\t__(label),\n\t\t\t\t\t\t\t\tfrappe.format(value, docfield),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\tcase \">=\":\n\t\t\t\t\t\t\treturn __(\"{0} is greater than or equal to {1}\", [\n\t\t\t\t\t\t\t\t__(label),\n\t\t\t\t\t\t\t\tfrappe.format(value, docfield),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\tcase \"<=\":\n\t\t\t\t\t\t\treturn __(\"{0} is less than or equal to {1}\", [\n\t\t\t\t\t\t\t\t__(label),\n\t\t\t\t\t\t\t\tfrappe.format(value, docfield),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\tcase \"Between\":\n\t\t\t\t\t\t\treturn __(\"{0} is between {1} and {2}\", [\n\t\t\t\t\t\t\t\t__(label),\n\t\t\t\t\t\t\t\tfrappe.format(value[0], docfield),\n\t\t\t\t\t\t\t\tfrappe.format(value[1], docfield),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\tcase \"Timespan\":\n\t\t\t\t\t\t\treturn __(\"{0} is within {1}\", [__(label), __(value)]);\n\t\t\t\t\t\tcase \"in\":\n\t\t\t\t\t\t\treturn __(\"{0} is one of {1}\", [\n\t\t\t\t\t\t\t\t__(label),\n\t\t\t\t\t\t\t\tfrappe.utils.comma_or(\n\t\t\t\t\t\t\t\t\tvalue.map((v) => frappe.format(v, docfield))\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\tcase \"not in\":\n\t\t\t\t\t\t\treturn __(\"{0} is not one of {1}\", [\n\t\t\t\t\t\t\t\t__(label),\n\t\t\t\t\t\t\t\tfrappe.utils.comma_or(\n\t\t\t\t\t\t\t\t\tvalue.map((v) => frappe.format(v, docfield))\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\tcase \"like\":\n\t\t\t\t\t\t\treturn __(\"{0} is like {1}\", [__(label), value]);\n\t\t\t\t\t\tcase \"not like\":\n\t\t\t\t\t\t\treturn __(\"{0} is not like {1}\", [__(label), value]);\n\t\t\t\t\t\tcase \"is\":\n\t\t\t\t\t\t\treturn value === \"set\"\n\t\t\t\t\t\t\t\t? __(\"{0} is set\", [__(label)])\n\t\t\t\t\t\t\t\t: __(\"{0} is not set\", [__(label)]);\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.filter(Boolean)\n\t\t\t\t.join(\"<br>\")\n\t\t);\n\t}\n\n\tget_columns_totals(data) {\n\t\tif (!this.add_totals_row) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst row_totals = {};\n\n\t\tthis.columns.forEach((col, i) => {\n\t\t\tconst totals = data.reduce((totals, d) => {\n\t\t\t\tif (col.id in d && frappe.model.is_numeric_field(col.docfield)) {\n\t\t\t\t\ttotals += flt(d[col.id]);\n\t\t\t\t\treturn totals;\n\t\t\t\t}\n\t\t\t}, 0);\n\n\t\t\trow_totals[col.id] = totals;\n\t\t});\n\n\t\treturn row_totals;\n\t}\n\n\treport_menu_items() {\n\t\tlet items = [\n\t\t\t{\n\t\t\t\tlabel: __(\"Show Totals\"),\n\t\t\t\taction: () => {\n\t\t\t\t\tthis.add_totals_row = !this.add_totals_row;\n\t\t\t\t\tthis.save_view_user_settings({\n\t\t\t\t\t\tadd_totals_row: this.add_totals_row,\n\t\t\t\t\t});\n\t\t\t\t\tthis.datatable.refresh(this.get_data(this.data));\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Print\"),\n\t\t\t\taction: () => {\n\t\t\t\t\t// prepare rows in their current state, sorted and filtered\n\t\t\t\t\tconst rows_in_order = this.datatable.datamanager.rowViewOrder\n\t\t\t\t\t\t.map((index) => {\n\t\t\t\t\t\t\tif (this.datatable.bodyRenderer.visibleRowIndices.includes(index)) {\n\t\t\t\t\t\t\t\treturn this.data[index];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.filter(Boolean);\n\n\t\t\t\t\tif (this.add_totals_row) {\n\t\t\t\t\t\tconst total_data = this.get_columns_totals(this.data);\n\n\t\t\t\t\t\ttotal_data[\"name\"] = __(\"Totals\").bold();\n\t\t\t\t\t\trows_in_order.push(total_data);\n\t\t\t\t\t}\n\n\t\t\t\t\tfrappe.ui.get_print_settings(false, (print_settings) => {\n\t\t\t\t\t\tvar title = this.report_name || __(this.doctype);\n\t\t\t\t\t\tfrappe.render_grid({\n\t\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\t\tsubtitle: this.get_filters_html_for_print(),\n\t\t\t\t\t\t\tprint_settings: print_settings,\n\t\t\t\t\t\t\tcolumns: this.columns,\n\t\t\t\t\t\t\tdata: rows_in_order,\n\t\t\t\t\t\t\tcan_use_smaller_font: 1,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Toggle Chart\"),\n\t\t\t\taction: () => this.toggle_charts(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Toggle Sidebar\"),\n\t\t\t\taction: () => this.toggle_side_bar(),\n\t\t\t\tshortcut: \"Ctrl+K\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Pick Columns\"),\n\t\t\t\taction: () => {\n\t\t\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\t\t\ttitle: __(\"Pick Columns\"),\n\t\t\t\t\t\tfields: this.get_dialog_fields(),\n\t\t\t\t\t\tprimary_action: (values) => {\n\t\t\t\t\t\t\t// doctype fields\n\t\t\t\t\t\t\tlet fields = values[this.doctype].map((f) => [f, this.doctype]);\n\t\t\t\t\t\t\tdelete values[this.doctype];\n\n\t\t\t\t\t\t\t// child table fields\n\t\t\t\t\t\t\tfor (let cdt in values) {\n\t\t\t\t\t\t\t\tfields = fields.concat(values[cdt].map((f) => [f, cdt]));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// always keep name (ID) column\n\t\t\t\t\t\t\tthis.fields = [[\"name\", this.doctype], ...fields];\n\n\t\t\t\t\t\t\tthis.fields.map((f) => this.add_currency_column(f[0], f[1]));\n\n\t\t\t\t\t\t\tthis.reorder_fields();\n\t\t\t\t\t\t\tthis.build_fields();\n\t\t\t\t\t\t\tthis.setup_columns();\n\n\t\t\t\t\t\t\tthis.datatable.destroy();\n\t\t\t\t\t\t\tthis.datatable = null;\n\t\t\t\t\t\t\tthis.refresh();\n\n\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\td.$body.prepend(`\n\t\t\t\t\t\t<div class=\"columns-search\">\n\t\t\t\t\t\t\t<input type=\"text\" placeholder=\"${__(\n\t\t\t\t\t\t\t\t\"Search\"\n\t\t\t\t\t\t\t)}\" data-element=\"search\" class=\"form-control input-xs\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`);\n\n\t\t\t\t\tfrappe.utils.setup_search(d.$body, \".unit-checkbox\", \".label-area\");\n\t\t\t\t\td.show();\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\tif (frappe.model.can_export(this.doctype)) {\n\t\t\titems.push({\n\t\t\t\tlabel: __(\"Export\"),\n\t\t\t\taction: () => {\n\t\t\t\t\tconst args = this.get_args();\n\t\t\t\t\tconst selected_items = this.get_checked_items(true);\n\n\t\t\t\t\tlet extra_fields = null;\n\t\t\t\t\tif (this.total_count > (this.count_without_children || args.page_length)) {\n\t\t\t\t\t\textra_fields = [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfieldtype: \"Check\",\n\t\t\t\t\t\t\t\tfieldname: \"export_all_rows\",\n\t\t\t\t\t\t\t\tlabel: __(\"Export All {0} rows?\", [`<b>${this.total_count}</b>`]),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\n\t\t\t\t\tconst d = frappe.report_utils.get_export_dialog(\n\t\t\t\t\t\t__(this.doctype),\n\t\t\t\t\t\textra_fields,\n\t\t\t\t\t\t(data) => {\n\t\t\t\t\t\t\targs.cmd = \"frappe.desk.reportview.export_query\";\n\t\t\t\t\t\t\targs.file_format_type = data.file_format;\n\t\t\t\t\t\t\targs.title = this.report_name || this.doctype;\n\n\t\t\t\t\t\t\tif (data.file_format == \"CSV\") {\n\t\t\t\t\t\t\t\targs.csv_delimiter = data.csv_delimiter;\n\t\t\t\t\t\t\t\targs.csv_quoting = data.csv_quoting;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (this.add_totals_row) {\n\t\t\t\t\t\t\t\targs.add_totals_row = 1;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (selected_items.length > 0) {\n\t\t\t\t\t\t\t\targs.selected_items = selected_items;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!data.export_all_rows) {\n\t\t\t\t\t\t\t\targs.start = 0;\n\t\t\t\t\t\t\t\targs.page_length = this.data.length;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdelete args.start;\n\t\t\t\t\t\t\t\tdelete args.page_length;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\topen_url_post(frappe.request.url, args);\n\n\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t\td.show();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\titems.push({\n\t\t\tlabel: __(\"Setup Auto Email\"),\n\t\t\taction: () => {\n\t\t\t\tif (this.report_name) {\n\t\t\t\t\tfrappe.set_route(\"List\", \"Auto Email Report\", { report: this.report_name });\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.msgprint(__(\"Please save the report first\"));\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tconst can_edit_or_delete = (action) => {\n\t\t\tconst method = action == \"delete\" ? \"can_delete\" : \"can_write\";\n\t\t\treturn (\n\t\t\t\tthis.report_doc &&\n\t\t\t\tthis.report_doc.is_standard !== \"Yes\" &&\n\t\t\t\t(frappe.model[method](\"Report\") || this.report_doc.owner === frappe.session.user)\n\t\t\t);\n\t\t};\n\n\t\t// A user with role Report Manager or Report Owner can save\n\t\tif (can_edit_or_delete()) {\n\t\t\titems.push({\n\t\t\t\tlabel: __(\"Save\"),\n\t\t\t\taction: () => this.save_report(\"save\"),\n\t\t\t});\n\t\t}\n\n\t\t// anyone can save as\n\t\titems.push({\n\t\t\tlabel: __(\"Save As\"),\n\t\t\taction: () => this.save_report(\"save_as\"),\n\t\t});\n\n\t\t// A user with role Report Manager or Report Owner can delete\n\t\tif (can_edit_or_delete(\"delete\")) {\n\t\t\titems.push({\n\t\t\t\tlabel: __(\"Delete\"),\n\t\t\t\taction: () =>\n\t\t\t\t\tfrappe.confirm(\"Are you sure you want to delete this report?\", () =>\n\t\t\t\t\t\tthis.delete_report()\n\t\t\t\t\t),\n\t\t\t\tshortcut: \"Shift+Ctrl+D\",\n\t\t\t});\n\t\t}\n\n\t\t// user permissions\n\t\tif (this.report_name && frappe.user.has_role(\"System Manager\")) {\n\t\t\titems.push({\n\t\t\t\tlabel: __(\"User Permissions\"),\n\t\t\t\taction: () => {\n\t\t\t\t\tconst args = {\n\t\t\t\t\t\tdoctype: \"Report\",\n\t\t\t\t\t\tname: this.report_name,\n\t\t\t\t\t};\n\t\t\t\t\tfrappe.set_route(\"List\", \"User Permission\", args);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (frappe.user.has_role(\"System Manager\")) {\n\t\t\tif (this.get_view_settings) {\n\t\t\t\titems.push(this.get_view_settings());\n\t\t\t}\n\t\t}\n\n\t\treturn items.map((i) => Object.assign(i, { standard: true }));\n\t}\n\n\tget_search_params() {\n\t\tlet search_params = super.get_search_params();\n\t\tlet config = this.group_by_control.get_settings();\n\t\tif (config) {\n\t\t\tsearch_params.append(\n\t\t\t\t\"_group_by\",\n\t\t\t\tJSON.stringify([config.group_by, config.aggregate_on, config.aggregate_function])\n\t\t\t);\n\t\t}\n\t\treturn search_params;\n\t}\n\n\tparse_filters_from_route_options() {\n\t\tif (frappe.route_options?._group_by) {\n\t\t\ttry {\n\t\t\t\tlet config = JSON.parse(frappe.route_options._group_by);\n\t\t\t\tthis.group_by_control.apply_settings({\n\t\t\t\t\tgroup_by: config[0],\n\t\t\t\t\taggregate_on: config[1],\n\t\t\t\t\taggregate_function: config[2],\n\t\t\t\t});\n\t\t\t\tdelete frappe.route_options[\"_group_by\"];\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn(\"Failed to parse group by from URL\", e);\n\t\t\t}\n\t\t}\n\n\t\treturn super.parse_filters_from_route_options();\n\t}\n};\n", "// Copyright (c) 2018, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\nimport DataTable from \"frappe-datatable\";\n\n// Expose DataTable globally to allow customizations.\nwindow.DataTable = DataTable;\n\nfrappe.provide(\"frappe.widget.utils\");\nfrappe.provide(\"frappe.views\");\nfrappe.provide(\"frappe.query_reports\");\n\nfrappe.standard_pages[\"query-report\"] = function () {\n\tvar wrapper = frappe.container.add_page(\"query-report\");\n\n\tfrappe.ui.make_app_page({\n\t\tparent: wrapper,\n\t\ttitle: __(\"Query Report\"),\n\t\tsingle_column: true,\n\t});\n\n\tfrappe.query_report = new frappe.views.QueryReport({\n\t\tparent: wrapper,\n\t});\n\n\t$(wrapper).bind(\"show\", function () {\n\t\tfrappe.query_report.show();\n\t});\n};\n\nfrappe.views.QueryReport = class QueryReport extends frappe.views.BaseList {\n\tshow() {\n\t\tthis.init().then(() => this.load());\n\t}\n\n\tinit() {\n\t\tif (this.init_promise) {\n\t\t\treturn this.init_promise;\n\t\t}\n\n\t\tlet tasks = [\n\t\t\tthis.setup_defaults,\n\t\t\tthis.setup_page,\n\t\t\tthis.setup_report_wrapper,\n\t\t\tthis.setup_events,\n\t\t].map((fn) => fn.bind(this));\n\t\tthis.init_promise = frappe.run_serially(tasks);\n\t\treturn this.init_promise;\n\t}\n\n\tsetup_defaults() {\n\t\tthis.route = frappe.get_route();\n\t\tthis.page_name = frappe.get_route_str();\n\n\t\t// Setup buttons\n\t\tthis.primary_action = null;\n\n\t\t// throttle refresh for 300ms\n\t\tthis.refresh = frappe.utils.throttle(this.refresh, 300);\n\n\t\tthis.ignore_prepared_report = false;\n\t\tthis.menu_items = [];\n\t}\n\n\tupdate_url_with_filters() {\n\t\tif (frappe.get_route_str() == this.page_name) {\n\t\t\twindow.history.replaceState(null, null, this.get_url_with_filters());\n\t\t}\n\t}\n\n\tget_url_with_filters() {\n\t\tconst query_params = Object.entries(this.get_filter_values())\n\t\t\t.map(([field, value], _idx) => {\n\t\t\t\t// multiselects\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tif (!value.length) return \"\";\n\t\t\t\t\tvalue = JSON.stringify(value);\n\t\t\t\t}\n\t\t\t\treturn `${field}=${encodeURIComponent(value)}`;\n\t\t\t})\n\t\t\t.filter(Boolean)\n\t\t\t.join(\"&\");\n\n\t\tlet full_url = window.location.href.replace(window.location.search, \"\");\n\t\tif (query_params) {\n\t\t\tfull_url += \"?\" + query_params;\n\t\t}\n\t\treturn full_url;\n\t}\n\n\tset_default_secondary_action() {\n\t\tthis.refresh_button && this.refresh_button.remove();\n\t\tthis.refresh_button = this.page.add_action_icon(\n\t\t\t\"es-line-reload\",\n\t\t\t() => {\n\t\t\t\tthis.setup_progress_bar();\n\t\t\t\tthis.refresh();\n\t\t\t},\n\t\t\t\"\",\n\t\t\t__(\"Reload Report\")\n\t\t);\n\t}\n\n\tget_no_result_message() {\n\t\treturn `<div class=\"msg-box no-border\">\n\t\t\t<div>\n\t\t\t\t<img src=\"/assets/frappe/images/ui-states/list-empty-state.svg\" alt=\"Generic Empty State\" class=\"null-state\">\n\t\t\t</div>\n\t\t\t<p>${__(\"Nothing to show\")}</p>\n\t\t</div>`;\n\t}\n\n\tsetup_events() {\n\t\tfrappe.realtime.on(\"report_generated\", (data) => {\n\t\t\tthis.toggle_primary_button_disabled(false);\n\t\t\tif (data.report_name) {\n\t\t\t\tthis.prepared_report_action = \"Rebuild\";\n\t\t\t\t// If generated report and currently active Prepared Report has same fiters\n\t\t\t\t// then refresh the Prepared Report\n\t\t\t\t// Otherwise show alert with the link to the Prepared Report\n\t\t\t\tif (data.name == this.prepared_report_doc_name) {\n\t\t\t\t\tthis.refresh();\n\t\t\t\t} else {\n\t\t\t\t\tlet alert_message = `Report ${this.report_name} generated.\n\t\t\t\t\t\t<a href=\"#query-report/${this.report_name}/?prepared_report_name=${data.name}\">View</a>`;\n\t\t\t\t\tfrappe.show_alert({ message: alert_message, indicator: \"orange\" });\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.page.wrapper.on(\"click\", \"[data-action]\", (e) => {\n\t\t\tlet action_name = $(e.currentTarget).data(\"action\");\n\t\t\tlet action = this[action_name];\n\t\t\tif (action.call) {\n\t\t\t\taction.call(this, e);\n\t\t\t}\n\t\t});\n\t}\n\n\tload() {\n\t\tif (frappe.get_route().length < 2) {\n\t\t\tthis.toggle_nothing_to_show(true);\n\t\t\treturn;\n\t\t}\n\n\t\tlet route_options = {};\n\t\troute_options = Object.assign(route_options, frappe.route_options);\n\n\t\tif (this.report_name !== frappe.get_route()[1]) {\n\t\t\t// different report\n\t\t\tthis.load_report(route_options);\n\t\t} else if (frappe.has_route_options()) {\n\t\t\t// filters passed through routes\n\t\t\t// so refresh report again\n\t\t\tthis.refresh_report(route_options);\n\t\t} else {\n\t\t\t// same report\n\t\t\t// don't do anything to preserve state\n\t\t\t// like filters and datatable column widths\n\t\t}\n\t}\n\n\tload_report(route_options) {\n\t\tthis.page.clear_inner_toolbar();\n\t\tthis.route = frappe.get_route();\n\t\tthis.page_name = frappe.get_route_str();\n\t\tthis.report_name = this.route[1];\n\t\tthis.page_title = __(this.report_name);\n\t\tthis.show_save = false;\n\t\tthis.menu_items = this.get_menu_items();\n\t\tthis.datatable = null;\n\t\tthis.prepared_report_action = \"New\";\n\n\t\tfrappe.run_serially([\n\t\t\t() => this.get_report_doc(),\n\t\t\t() => this.get_report_settings(),\n\t\t\t() => this.setup_progress_bar(),\n\t\t\t() => this.setup_page_head(),\n\t\t\t() => this.refresh_report(route_options),\n\t\t\t() => this.add_chart_buttons_to_toolbar(true),\n\t\t\t() => this.add_card_button_to_toolbar(true),\n\t\t]);\n\t}\n\n\tadd_card_button_to_toolbar() {\n\t\tif (!frappe.model.can_create(\"Number Card\")) return;\n\t\tthis.page.add_inner_button(\n\t\t\t__(\"Create Card\"),\n\t\t\t() => {\n\t\t\t\tthis.add_card_to_dashboard();\n\t\t\t},\n\t\t\t__(\"Actions\")\n\t\t);\n\t}\n\n\tadd_chart_buttons_to_toolbar(show) {\n\t\tif (!frappe.model.can_create(\"Dashboard Chart\")) return;\n\t\tif (show) {\n\t\t\tthis.create_chart_button && this.create_chart_button.remove();\n\t\t\tthis.create_chart_button = this.page.add_inner_button(\n\t\t\t\t__(\"Set Chart\"),\n\t\t\t\t() => {\n\t\t\t\t\tthis.open_create_chart_dialog();\n\t\t\t\t},\n\t\t\t\t__(\"Actions\")\n\t\t\t);\n\n\t\t\tif (this.chart_fields || this.chart_options) {\n\t\t\t\tthis.add_to_dashboard_button && this.add_to_dashboard_button.remove();\n\t\t\t\tthis.add_to_dashboard_button = this.page.add_inner_button(\n\t\t\t\t\t__(\"Add Chart to Dashboard\"),\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis.add_chart_to_dashboard();\n\t\t\t\t\t},\n\t\t\t\t\t__(\"Actions\")\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.create_chart_button && this.create_chart_button.remove();\n\t\t\tthis.add_to_dashboard_button && this.add_to_dashboard_button.remove();\n\t\t}\n\t}\n\n\tadd_card_to_dashboard() {\n\t\tlet field_options = frappe.report_utils.get_field_options_from_report(\n\t\t\tthis.columns,\n\t\t\tthis.raw_data\n\t\t);\n\t\tconst dashboard_field = frappe.dashboard_utils.get_dashboard_link_field();\n\t\tconst set_standard = frappe.boot.developer_mode;\n\n\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Create Card\"),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"report_field\",\n\t\t\t\t\tlabel: __(\"Field\"),\n\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t\toptions: field_options.numeric_fields,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"cb_1\",\n\t\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"report_function\",\n\t\t\t\t\tlabel: __(\"Function\"),\n\t\t\t\t\toptions: [\"Sum\", \"Average\", \"Minimum\", \"Maximum\"],\n\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"sb_1\",\n\t\t\t\t\tlabel: __(\"Add to Dashboard\"),\n\t\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\t},\n\t\t\t\tdashboard_field,\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"cb_2\",\n\t\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"label\",\n\t\t\t\t\tlabel: __(\"Card Label\"),\n\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t},\n\t\t\t],\n\t\t\tprimary_action_label: __(\"Add\"),\n\t\t\tprimary_action: (values) => {\n\t\t\t\tif (!values.label) {\n\t\t\t\t\tvalues.label = `${values.report_function} of ${toTitle(values.report_field)}`;\n\t\t\t\t}\n\t\t\t\tthis.create_number_card(values, values.dashboard, values.label, set_standard);\n\t\t\t\tdialog.hide();\n\t\t\t},\n\t\t});\n\n\t\tdialog.show();\n\t}\n\n\tadd_chart_to_dashboard() {\n\t\tif (this.chart_fields || this.chart_options) {\n\t\t\tconst dashboard_field = frappe.dashboard_utils.get_dashboard_link_field();\n\t\t\tconst set_standard = frappe.boot.developer_mode;\n\n\t\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: __(\"Create Chart\"),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldname: \"dashboard_chart_name\",\n\t\t\t\t\t\tlabel: \"Chart Name\",\n\t\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\t},\n\t\t\t\t\tdashboard_field,\n\t\t\t\t],\n\t\t\t\tprimary_action_label: __(\"Add\"),\n\t\t\t\tprimary_action: (values) => {\n\t\t\t\t\tthis.create_dashboard_chart(\n\t\t\t\t\t\tthis.chart_fields || this.chart_options,\n\t\t\t\t\t\tvalues.dashboard,\n\t\t\t\t\t\tvalues.dashboard_chart_name,\n\t\t\t\t\t\tset_standard\n\t\t\t\t\t);\n\t\t\t\t\tdialog.hide();\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tdialog.show();\n\t\t} else {\n\t\t\tfrappe.msgprint(__(\"Please Set Chart\"));\n\t\t}\n\t}\n\n\tcreate_number_card(values, dashboard_name, card_name, set_standard) {\n\t\tlet args = {\n\t\t\tdashboard: dashboard_name || null,\n\t\t\ttype: \"Report\",\n\t\t\treport_name: this.report_name,\n\t\t\tfilters_json: JSON.stringify(this.get_filter_values()),\n\t\t\tset_standard: set_standard,\n\t\t};\n\t\tObject.assign(args, values);\n\n\t\tthis.add_to_dashboard(\n\t\t\t\"frappe.desk.doctype.number_card.number_card.create_report_number_card\",\n\t\t\targs,\n\t\t\tdashboard_name,\n\t\t\tcard_name,\n\t\t\t\"Number Card\"\n\t\t);\n\t}\n\n\tcreate_dashboard_chart(chart_args, dashboard_name, chart_name, set_standard) {\n\t\tlet args = {\n\t\t\tdashboard: dashboard_name || null,\n\t\t\tchart_type: \"Report\",\n\t\t\treport_name: this.report_name,\n\t\t\ttype: chart_args.chart_type || frappe.model.unscrub(chart_args.type),\n\t\t\tcolor: chart_args.color,\n\t\t\tfilters_json: JSON.stringify(this.get_filter_values()),\n\t\t\tcustom_options: {},\n\t\t\tset_standard: set_standard,\n\t\t};\n\n\t\tfor (let key in chart_args) {\n\t\t\tif (key != \"data\") {\n\t\t\t\targs[\"custom_options\"][key] = chart_args[key];\n\t\t\t}\n\t\t}\n\n\t\tif (this.chart_fields) {\n\t\t\tlet x_field_title = toTitle(chart_args.x_field);\n\t\t\tlet y_field_title = toTitle(chart_args.y_fields[0]);\n\t\t\tchart_name = chart_name || `${this.report_name}: ${x_field_title} vs ${y_field_title}`;\n\n\t\t\tObject.assign(args, {\n\t\t\t\tchart_name: chart_name,\n\t\t\t\tx_field: chart_args.x_field,\n\t\t\t\ty_axis: chart_args.y_axis_fields.map((f) => {\n\t\t\t\t\treturn { y_field: f.y_field, color: f.color };\n\t\t\t\t}),\n\t\t\t\tuse_report_chart: 0,\n\t\t\t});\n\t\t} else {\n\t\t\tchart_name = chart_name || this.report_name;\n\t\t\tObject.assign(args, {\n\t\t\t\tchart_name: chart_name,\n\t\t\t\tuse_report_chart: 1,\n\t\t\t});\n\t\t}\n\n\t\tthis.add_to_dashboard(\n\t\t\t\"frappe.desk.doctype.dashboard_chart.dashboard_chart.create_report_chart\",\n\t\t\targs,\n\t\t\tdashboard_name,\n\t\t\tchart_name,\n\t\t\t\"Dashboard Chart\"\n\t\t);\n\t}\n\n\tadd_to_dashboard(method, args, dashboard_name, name, doctype) {\n\t\tfrappe.xcall(method, { args: args }).then(() => {\n\t\t\tlet message;\n\t\t\tif (dashboard_name) {\n\t\t\t\tlet dashboard_route_html = `<a href=\"/app/dashboard-view/${dashboard_name}\">${dashboard_name}</a>`;\n\t\t\t\tmessage = __(\"New {0} {1} added to Dashboard {2}\", [\n\t\t\t\t\t__(doctype),\n\t\t\t\t\tname,\n\t\t\t\t\tdashboard_route_html,\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tmessage = __(\"New {0} {1} created\", [__(doctype), name]);\n\t\t\t}\n\n\t\t\tfrappe.msgprint(message, __(\"New {0} Created\", [__(doctype)]));\n\t\t});\n\t}\n\n\trefresh_report(route_options) {\n\t\tthis.toggle_message(true);\n\t\tthis.toggle_report(false);\n\n\t\treturn frappe.run_serially([\n\t\t\t() => this.setup_filters(),\n\t\t\t() => this.set_route_filters(route_options),\n\t\t\t() => this.page.clear_custom_actions(),\n\t\t\t() => this.report_settings.onload && this.report_settings.onload(this),\n\t\t\t() => this.refresh(),\n\t\t]);\n\t}\n\n\tget_report_doc() {\n\t\treturn frappe.model\n\t\t\t.with_doc(\"Report\", this.report_name)\n\t\t\t.then((doc) => {\n\t\t\t\tthis.report_doc = doc;\n\t\t\t})\n\t\t\t.then(() => frappe.model.with_doctype(this.report_doc.ref_doctype));\n\t}\n\n\tget_report_settings() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (frappe.query_reports[this.report_name]) {\n\t\t\t\tthis.report_settings = frappe.query_reports[this.report_name];\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\tfrappe\n\t\t\t\t\t.xcall(\"frappe.desk.query_report.get_script\", {\n\t\t\t\t\t\treport_name: this.report_name,\n\t\t\t\t\t})\n\t\t\t\t\t.then((settings) => {\n\t\t\t\t\t\tfrappe.dom.eval(settings.script || \"\");\n\t\t\t\t\t\tfrappe.after_ajax(() => {\n\t\t\t\t\t\t\tthis.report_settings = this.get_local_report_settings(\n\t\t\t\t\t\t\t\tsettings.custom_report_name\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.report_settings.html_format = settings.html_format;\n\t\t\t\t\t\t\tthis.report_settings.execution_time = settings.execution_time || 0;\n\t\t\t\t\t\t\tfrappe.query_reports[this.report_name] = this.report_settings;\n\n\t\t\t\t\t\t\tif (this.report_doc.filters && !this.report_settings.filters) {\n\t\t\t\t\t\t\t\t// add configured filters\n\t\t\t\t\t\t\t\tthis.report_settings.filters = this.report_doc.filters;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.catch(reject);\n\t\t\t}\n\t\t});\n\t}\n\n\tget_local_report_settings(custom_report_name) {\n\t\tlet report_script_name =\n\t\t\tthis.report_doc.report_type === \"Custom Report\"\n\t\t\t\t? custom_report_name\n\t\t\t\t\t? custom_report_name\n\t\t\t\t\t: this.report_doc.reference_report\n\t\t\t\t: this.report_name;\n\t\treturn frappe.query_reports[report_script_name] || {};\n\t}\n\n\tsetup_progress_bar() {\n\t\tlet seconds_elapsed = 0;\n\t\tconst execution_time = this.report_settings.execution_time || 0;\n\n\t\tif (execution_time < 5) return;\n\n\t\tthis.interval = setInterval(function () {\n\t\t\tseconds_elapsed += 1;\n\t\t\tfrappe.show_progress(__(\"Preparing Report\"), seconds_elapsed, execution_time);\n\t\t}, 1000);\n\t}\n\n\trefresh_filters_dependency() {\n\t\tthis.filters.forEach((filter) => {\n\t\t\tfilter.guardian_has_value = true;\n\n\t\t\tif (filter.df.depends_on) {\n\t\t\t\tfilter.guardian_has_value = this.evaluate_depends_on_value(\n\t\t\t\t\tfilter.df.depends_on,\n\t\t\t\t\tfilter.df.label\n\t\t\t\t);\n\n\t\t\t\tif (filter.guardian_has_value) {\n\t\t\t\t\tif (filter.df.hidden_due_to_dependency) {\n\t\t\t\t\t\tfilter.df.hidden_due_to_dependency = false;\n\t\t\t\t\t\tthis.toggle_filter_display(filter.df.fieldname, false);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!filter.df.hidden_due_to_dependency) {\n\t\t\t\t\t\tfilter.df.hidden_due_to_dependency = true;\n\t\t\t\t\t\tthis.toggle_filter_display(filter.df.fieldname, true);\n\t\t\t\t\t\tfilter.set_value(filter.df.default || null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tevaluate_depends_on_value(expression, filter_label) {\n\t\tlet out = null;\n\t\tlet doc = this.get_filter_values();\n\t\tif (doc) {\n\t\t\tif (typeof expression === \"boolean\") {\n\t\t\t\tout = expression;\n\t\t\t} else if (expression.substr(0, 5) == \"eval:\") {\n\t\t\t\ttry {\n\t\t\t\t\tout = frappe.utils.eval(expression.substr(5), { doc });\n\t\t\t\t} catch (e) {\n\t\t\t\t\tfrappe.throw(\n\t\t\t\t\t\t__('Invalid \"depends_on\" expression set in filter {0}', [filter_label])\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar value = doc[expression];\n\t\t\t\tif ($.isArray(value)) {\n\t\t\t\t\tout = !!value.length;\n\t\t\t\t} else {\n\t\t\t\t\tout = !!value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn out;\n\t}\n\n\tsetup_filters() {\n\t\tthis.clear_filters();\n\t\tconst { filters = [] } = this.report_settings;\n\n\t\tlet filter_area = this.page.page_form;\n\n\t\tthis.filters = filters\n\t\t\t.map((df) => {\n\t\t\t\tif (df.fieldtype === \"Break\") return;\n\n\t\t\t\tlet f = this.page.add_field(df, filter_area);\n\n\t\t\t\tif (df.default) {\n\t\t\t\t\tf.set_input(df.default);\n\t\t\t\t}\n\n\t\t\t\tif (df.get_query) f.get_query = df.get_query;\n\t\t\t\tif (df.on_change) f.on_change = df.on_change;\n\n\t\t\t\tdf.onchange = () => {\n\t\t\t\t\tthis.refresh_filters_dependency();\n\n\t\t\t\t\tlet current_filters = this.get_filter_values();\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.previous_filters &&\n\t\t\t\t\t\tJSON.stringify(this.previous_filters) === JSON.stringify(current_filters)\n\t\t\t\t\t) {\n\t\t\t\t\t\t// filter values have not changed\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// clear previous_filters after 10 seconds, to allow refresh for new data\n\t\t\t\t\tthis.previous_filters = current_filters;\n\t\t\t\t\tsetTimeout(() => (this.previous_filters = null), 10000);\n\n\t\t\t\t\tif (f.on_change) {\n\t\t\t\t\t\tf.on_change(this);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this.prepared_report) {\n\t\t\t\t\t\t\tthis.reset_report_view();\n\t\t\t\t\t\t} else if (!this._no_refresh) {\n\t\t\t\t\t\t\tthis.refresh(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tf = Object.assign(f, df);\n\n\t\t\t\treturn f;\n\t\t\t})\n\t\t\t.filter(Boolean);\n\n\t\tthis.refresh_filters_dependency();\n\t\tif (this.filters.length === 0) {\n\t\t\t// hide page form if no filters\n\t\t\tthis.page.hide_form();\n\t\t} else {\n\t\t\tthis.page.show_form();\n\t\t}\n\t}\n\n\tset_filters(filters) {\n\t\tthis.filters.map((f) => {\n\t\t\tf.set_input(filters[f.fieldname]);\n\t\t});\n\t}\n\n\tset_route_filters(route_options) {\n\t\tif (!route_options) route_options = frappe.route_options;\n\n\t\tif (route_options) {\n\t\t\tconst fields = Object.keys(route_options);\n\n\t\t\tconst filters_to_set = this.filters.filter((f) => fields.includes(f.df.fieldname));\n\n\t\t\tconst promises = filters_to_set.map((f) => {\n\t\t\t\treturn () => {\n\t\t\t\t\tlet value = route_options[f.df.fieldname];\n\t\t\t\t\tif (typeof value === \"string\" && value[0] === \"[\") {\n\t\t\t\t\t\t// multiselect array\n\t\t\t\t\t\tvalue = JSON.parse(value);\n\t\t\t\t\t}\n\t\t\t\t\tf.set_value(value);\n\t\t\t\t};\n\t\t\t});\n\t\t\tpromises.push(() => {\n\t\t\t\tfrappe.route_options = null;\n\t\t\t});\n\n\t\t\tthis.ignore_prepared_report = route_options[\"ignore_prepared_report\"] || false;\n\n\t\t\treturn frappe.run_serially(promises);\n\t\t}\n\t}\n\n\tclear_filters() {\n\t\tthis.page.clear_fields();\n\t}\n\n\trefresh(have_filters_changed) {\n\t\tthis.toggle_message(true);\n\t\tthis.toggle_report(false);\n\t\tlet filters = this.get_filter_values(true);\n\n\t\t// for custom reports,\n\t\t// are_default_filters is true if the filters haven't been modified and for all filters,\n\t\t// the filter value is the default value or there's no default value for the filter and the current value is empty.\n\t\t// are_default_filters is false otherwise.\n\n\t\tlet are_default_filters = this.filters\n\t\t\t.map((filter) => {\n\t\t\t\treturn (\n\t\t\t\t\t!have_filters_changed &&\n\t\t\t\t\t(filter.default === filter.value || (!filter.default && !filter.value))\n\t\t\t\t);\n\t\t\t})\n\t\t\t.every((res) => res === true);\n\n\t\tthis.show_loading_screen();\n\n\t\t// only one refresh at a time\n\t\tif (this.last_ajax) {\n\t\t\tthis.last_ajax.abort();\n\t\t}\n\n\t\tconst query_params = this.get_query_params();\n\n\t\tif (query_params.prepared_report_name) {\n\t\t\tfilters.prepared_report_name = query_params.prepared_report_name;\n\t\t}\n\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.last_ajax = frappe.call({\n\t\t\t\tmethod: \"frappe.desk.query_report.run\",\n\t\t\t\ttype: \"GET\",\n\t\t\t\targs: {\n\t\t\t\t\treport_name: this.report_name,\n\t\t\t\t\tfilters: filters,\n\t\t\t\t\tignore_prepared_report: this.ignore_prepared_report,\n\t\t\t\t\tis_tree: this.report_settings.tree,\n\t\t\t\t\tparent_field: this.report_settings.parent_field,\n\t\t\t\t\tare_default_filters: are_default_filters,\n\t\t\t\t},\n\t\t\t\tcallback: resolve,\n\t\t\t\talways: () => this.page.btn_secondary.prop(\"disabled\", false),\n\t\t\t});\n\t\t})\n\t\t\t.then((r) => {\n\t\t\t\tlet data = r.message;\n\t\t\t\tthis.hide_status();\n\t\t\t\tclearInterval(this.interval);\n\n\t\t\t\tthis.execution_time = data.execution_time || 0.1;\n\n\t\t\t\tif (data.custom_filters) {\n\t\t\t\t\tthis.set_filters(data.custom_filters);\n\t\t\t\t\tthis.previous_filters = data.custom_filters;\n\t\t\t\t}\n\n\t\t\t\tif (data.prepared_report) {\n\t\t\t\t\tthis.prepared_report = true;\n\t\t\t\t\tthis.prepared_report_document = data.doc;\n\t\t\t\t\t// If query_string contains prepared_report_name then set filters\n\t\t\t\t\t// to match the mentioned prepared report doc and disable editing\n\t\t\t\t\tif (query_params.prepared_report_name) {\n\t\t\t\t\t\tthis.prepared_report_action = \"Edit\";\n\t\t\t\t\t\tconst filters_from_report = JSON.parse(data.doc.filters);\n\t\t\t\t\t\tObject.values(this.filters).forEach(function (field) {\n\t\t\t\t\t\t\tif (filters_from_report[field.fieldname]) {\n\t\t\t\t\t\t\t\tfield.set_input(filters_from_report[field.fieldname]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (field.input) {\n\t\t\t\t\t\t\t\tfield.input.disabled = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tthis.add_prepared_report_buttons(data.doc);\n\t\t\t\t}\n\n\t\t\t\tif (data.report_summary) {\n\t\t\t\t\tthis.$summary.empty();\n\t\t\t\t\tthis.render_summary(data.report_summary);\n\t\t\t\t}\n\n\t\t\t\tif (data.message && !data.prepared_report) this.show_status(data.message);\n\n\t\t\t\tthis.toggle_message(false);\n\t\t\t\tif (data.result && data.result.length) {\n\t\t\t\t\tthis.prepare_report_data(data);\n\t\t\t\t\tthis.chart_options = this.get_chart_options(data);\n\n\t\t\t\t\tthis.$chart.empty();\n\t\t\t\t\tif (this.chart_options) {\n\t\t\t\t\t\tthis.render_chart(this.chart_options);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$chart.empty();\n\t\t\t\t\t\tif (this.chart_fields) {\n\t\t\t\t\t\t\tthis.chart_options = frappe.report_utils.make_chart_options(\n\t\t\t\t\t\t\t\tthis.columns,\n\t\t\t\t\t\t\t\tthis.raw_data,\n\t\t\t\t\t\t\t\tthis.chart_fields\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.chart_options && this.render_chart(this.chart_options);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.render_datatable();\n\t\t\t\t\tthis.add_chart_buttons_to_toolbar(true);\n\t\t\t\t\tthis.add_card_button_to_toolbar();\n\t\t\t\t\tthis.$report.show();\n\t\t\t\t} else {\n\t\t\t\t\tthis.data = [];\n\t\t\t\t\tthis.toggle_nothing_to_show(true);\n\t\t\t\t\tthis.add_chart_buttons_to_toolbar(false);\n\t\t\t\t}\n\n\t\t\t\tthis.show_footer_message();\n\t\t\t\tfrappe.hide_progress();\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tthis.hide_loading_screen();\n\t\t\t\tthis.update_url_with_filters();\n\t\t\t});\n\t}\n\n\trender_summary(data) {\n\t\tdata.forEach((summary) => {\n\t\t\tfrappe.utils.build_summary_item(summary).appendTo(this.$summary);\n\t\t});\n\n\t\tthis.$summary.show();\n\t}\n\n\tget_query_params() {\n\t\tconst query_string = frappe.utils.get_query_string(frappe.get_route_str());\n\t\treturn frappe.utils.get_query_params(query_string);\n\t}\n\n\tadd_prepared_report_buttons(doc) {\n\t\tif (doc) {\n\t\t\tthis.page.add_inner_button(__(\"Download Report\"), function () {\n\t\t\t\twindow.open(\n\t\t\t\t\tfrappe.urllib.get_full_url(\n\t\t\t\t\t\t\"/api/method/frappe.core.doctype.prepared_report.prepared_report.download_attachment?\" +\n\t\t\t\t\t\t\t\"dn=\" +\n\t\t\t\t\t\t\tencodeURIComponent(doc.name)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tlet pretty_diff = frappe.datetime.comment_when(doc.report_end_time);\n\t\t\tconst days_old = frappe.datetime.get_day_diff(\n\t\t\t\tfrappe.datetime.now_datetime(),\n\t\t\t\tdoc.report_end_time\n\t\t\t);\n\t\t\tif (days_old > 1) {\n\t\t\t\tpretty_diff = `<span style=\"color:var(--red-600)\">${pretty_diff}</span>`;\n\t\t\t}\n\t\t\tconst part1 = __(\"This report was generated {0}.\", [pretty_diff]);\n\t\t\tconst part2 = __(\"To get the updated report, click on {0}.\", [__(\"Rebuild\")]);\n\t\t\tconst part3 = __(\"See all past reports.\");\n\n\t\t\tthis.show_status(`\n\t\t\t\t<div class=\"indicator orange\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t${part1}\n\t\t\t\t\t\t${part2}\n\t\t\t\t\t\t<a href=\"/app/List/Prepared%20Report?report_name=${this.report_name}\"> ${part3}</a>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`);\n\t\t}\n\n\t\t// Three cases\n\t\t// 1. First time with given filters, no data.\n\t\t// 2. Showing data from specific report\n\t\t// 3. Showing data from an old report without specific report name\n\t\tthis.primary_action_map = {\n\t\t\tNew: {\n\t\t\t\tlabel: __(\"Generate New Report\"),\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.show_warning_or_generate_report();\n\t\t\t\t},\n\t\t\t},\n\t\t\tEdit: {\n\t\t\t\tlabel: __(\"Edit\"),\n\t\t\t\tclick: () => {\n\t\t\t\t\tfrappe.set_route(frappe.get_route());\n\t\t\t\t},\n\t\t\t},\n\t\t\tRebuild: {\n\t\t\t\tlabel: __(\"Rebuild\"),\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.show_warning_or_generate_report();\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tlet primary_action = this.primary_action_map[this.prepared_report_action];\n\n\t\tif (!this.primary_button || this.primary_button.text() !== primary_action.label) {\n\t\t\tthis.primary_button = this.page.set_primary_action(\n\t\t\t\tprimary_action.label,\n\t\t\t\tprimary_action.click\n\t\t\t);\n\t\t}\n\t}\n\n\ttoggle_primary_button_disabled(disable) {\n\t\tthis.primary_button.prop(\"disabled\", disable);\n\t}\n\n\tshow_warning_or_generate_report() {\n\t\tfrappe\n\t\t\t.xcall(\n\t\t\t\t\"frappe.core.doctype.prepared_report.prepared_report.get_reports_in_queued_state\",\n\t\t\t\t{\n\t\t\t\t\tfilters: this.get_filter_values(),\n\t\t\t\t\treport_name: this.report_name,\n\t\t\t\t}\n\t\t\t)\n\t\t\t.then((reports) => {\n\t\t\t\tthis.queued_prepared_reports = reports;\n\n\t\t\t\tif (reports.length) {\n\t\t\t\t\tconst message = this.get_queued_prepared_reports_warning_message(reports);\n\t\t\t\t\tthis.prepared_report_dialog = frappe.warn(\n\t\t\t\t\t\t__(\"Reports already in Queue\"),\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t() => this.generate_background_report(),\n\t\t\t\t\t\t__(\"Proceed Anyway\"),\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\n\t\t\t\t\tthis.prepared_report_dialog.footer.prepend(`\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-default pull-left\" data-action=\"delete_old_queued_reports\">\n\t\t\t\t\t\t${__(\"Delete and Generate New\")}\n\t\t\t\t\t</button>`);\n\n\t\t\t\t\tfrappe.utils.bind_actions_with_object(\n\t\t\t\t\t\tthis.prepared_report_dialog.wrapper,\n\t\t\t\t\t\tthis\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.generate_background_report();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tget_queued_prepared_reports_warning_message(reports) {\n\t\tconst route = `/app/List/Prepared Report/List?status=Queued&report_name=${this.report_name}`;\n\t\tconst report_link_html =\n\t\t\treports.length == 1\n\t\t\t\t? `<a class=\"underline\" href=\"${route}\">${__(\"1 Report\")}</a>`\n\t\t\t\t: `<a class=\"underline\" href=\"${route}\">${__(\"{0} Reports\", [\n\t\t\t\t\t\treports.length,\n\t\t\t\t  ])}</a>`;\n\n\t\tconst no_of_reports_html =\n\t\t\treports.length == 1\n\t\t\t\t? `${__(\"There is {0} with the same filters already in the queue:\", [\n\t\t\t\t\t\treport_link_html,\n\t\t\t\t  ])}`\n\t\t\t\t: `${__(\"There are {0} with the same filters already in the queue:\", [\n\t\t\t\t\t\treport_link_html,\n\t\t\t\t  ])}`;\n\n\t\tlet warning_message = `\n\t\t\t<p>\n\t\t\t\t${__(\"Are you sure you want to generate a new report?\")}\n\t\t\t\t${no_of_reports_html}\n\t\t\t</p>`;\n\n\t\tlet get_item_html = (item) =>\n\t\t\t`<a class=\"underline\" href=\"/app/prepared-report/${item.name}\">${item.name}</a>`;\n\n\t\twarning_message += reports.map(get_item_html).join(\", \");\n\n\t\treturn warning_message;\n\t}\n\n\tdelete_old_queued_reports() {\n\t\tthis.prepared_report_dialog.hide();\n\t\tfrappe\n\t\t\t.xcall(\"frappe.core.doctype.prepared_report.prepared_report.delete_prepared_reports\", {\n\t\t\t\treports: this.queued_prepared_reports,\n\t\t\t})\n\t\t\t.then(() => this.generate_background_report());\n\t}\n\n\tgenerate_background_report() {\n\t\tthis.toggle_primary_button_disabled(true);\n\t\tlet mandatory = this.filters.filter((f) => f.df.reqd);\n\t\tlet missing_mandatory = mandatory.filter((f) => !f.get_value());\n\t\tif (!missing_mandatory.length) {\n\t\t\tlet filters = this.get_filter_values(true);\n\t\t\treturn new Promise((resolve) =>\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"frappe.core.doctype.prepared_report.prepared_report.make_prepared_report\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\treport_name: this.report_name,\n\t\t\t\t\t\tfilters: filters,\n\t\t\t\t\t},\n\t\t\t\t\tcallback: resolve,\n\t\t\t\t})\n\t\t\t).then((r) => {\n\t\t\t\tconst data = r.message;\n\t\t\t\t// Rememeber the name of Prepared Report doc\n\t\t\t\tthis.prepared_report_doc_name = data.name;\n\t\t\t\tlet alert_message =\n\t\t\t\t\t`<a href='/app/prepared-report/${data.name}'>` +\n\t\t\t\t\t__(\"Report initiated, click to view status\") +\n\t\t\t\t\t`</a>`;\n\t\t\t\tfrappe.show_alert({ message: alert_message, indicator: \"orange\" }, 10);\n\t\t\t\tthis.toggle_nothing_to_show(true);\n\t\t\t});\n\t\t}\n\t}\n\n\tprepare_report_data(data) {\n\t\tthis.raw_data = data;\n\t\tthis.columns = this.prepare_columns(data.columns);\n\t\tthis.custom_columns = [];\n\t\tthis.data = this.prepare_data(data.result);\n\t\tthis.linked_doctypes = this.get_linked_doctypes();\n\t\tthis.tree_report = this.data.some((d) => \"indent\" in d);\n\t}\n\n\trender_datatable() {\n\t\tlet data = this.data;\n\t\tlet columns = this.columns.filter((col) => !col.hidden);\n\n\t\tif (this.raw_data.add_total_row && !this.report_settings.tree) {\n\t\t\tdata = data.slice();\n\t\t\tdata.splice(-1, 1);\n\t\t}\n\n\t\tthis.$report.show();\n\t\tif (\n\t\t\tthis.datatable &&\n\t\t\tthis.datatable.options &&\n\t\t\tthis.datatable.options.showTotalRow === this.raw_data.add_total_row\n\t\t) {\n\t\t\tthis.datatable.options.treeView = this.tree_report;\n\t\t\tthis.datatable.refresh(data, columns);\n\t\t} else {\n\t\t\tlet datatable_options = {\n\t\t\t\tcolumns: columns,\n\t\t\t\tdata: data,\n\t\t\t\tinlineFilters: true,\n\t\t\t\tlanguage: frappe.boot.lang,\n\t\t\t\ttranslations: frappe.utils.datatable.get_translations(),\n\t\t\t\ttreeView: this.tree_report,\n\t\t\t\tlayout: \"fixed\",\n\t\t\t\tcellHeight: 33,\n\t\t\t\tshowTotalRow: this.raw_data.add_total_row && !this.report_settings.tree,\n\t\t\t\tdirection: frappe.utils.is_rtl() ? \"rtl\" : \"ltr\",\n\t\t\t\thooks: {\n\t\t\t\t\tcolumnTotal: frappe.utils.report_column_total,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tif (this.report_settings.get_datatable_options) {\n\t\t\t\tdatatable_options = this.report_settings.get_datatable_options(datatable_options);\n\t\t\t}\n\t\t\tthis.datatable = new window.DataTable(this.$report[0], datatable_options);\n\t\t}\n\n\t\tif (typeof this.report_settings.initial_depth == \"number\") {\n\t\t\tthis.datatable.rowmanager.setTreeDepth(this.report_settings.initial_depth);\n\t\t}\n\t\tif (this.report_settings.after_datatable_render) {\n\t\t\tthis.report_settings.after_datatable_render(this.datatable);\n\t\t}\n\t}\n\n\tshow_loading_screen() {\n\t\tconst loading_state = `<div class=\"msg-box no-border\">\n\t\t\t<div>\n\t\t\t\t<img src=\"/assets/frappe/images/ui-states/list-empty-state.svg\" alt=\"Generic Empty State\" class=\"null-state\">\n\t\t\t</div>\n\t\t\t<p>${__(\"Loading\")}...</p>\n\t\t</div>`;\n\n\t\tthis.$loading.find(\"div\").html(loading_state);\n\t\tthis.$report.hide();\n\t\tthis.$loading.show();\n\t}\n\n\thide_loading_screen() {\n\t\tthis.$loading.hide();\n\t}\n\n\tget_chart_options(data) {\n\t\tlet options = this.report_settings.get_chart_data\n\t\t\t? this.report_settings.get_chart_data(data.columns, data.result)\n\t\t\t: data.chart\n\t\t\t? data.chart\n\t\t\t: undefined;\n\n\t\tif (!(options && options.data && options.data.labels && options.data.labels.length > 0))\n\t\t\treturn;\n\n\t\tif (options.fieldtype) {\n\t\t\toptions.tooltipOptions = {\n\t\t\t\tformatTooltipY: (d) =>\n\t\t\t\t\tfrappe.format(d, {\n\t\t\t\t\t\tfieldtype: options.fieldtype,\n\t\t\t\t\t\toptions: options.options,\n\t\t\t\t\t}),\n\t\t\t};\n\t\t}\n\t\toptions.axisOptions = {\n\t\t\tshortenYAxisNumbers: 1,\n\t\t\tnumberFormatter: frappe.utils.format_chart_axis_number,\n\t\t};\n\t\toptions.height = 280;\n\t\treturn options;\n\t}\n\n\trender_chart(options) {\n\t\tthis.$chart.empty();\n\t\tthis.$chart.show();\n\t\tthis.chart = new frappe.Chart(this.$chart[0], options);\n\t}\n\n\topen_create_chart_dialog() {\n\t\tconst me = this;\n\t\tlet field_options = frappe.report_utils.get_field_options_from_report(\n\t\t\tthis.columns,\n\t\t\tthis.raw_data\n\t\t);\n\n\t\tfunction set_chart_values(values) {\n\t\t\tvalues.y_fields = [];\n\t\t\tvalues.colors = [];\n\t\t\tif (values.y_axis_fields) {\n\t\t\t\tvalues.y_axis_fields.map((f) => {\n\t\t\t\t\tvalues.y_fields.push(f.y_field);\n\t\t\t\t\tvalues.colors.push(f.color);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvalues.y_fields = values.y_fields.map((d) => d.trim()).filter(Boolean);\n\n\t\t\treturn values;\n\t\t}\n\n\t\tfunction preview_chart() {\n\t\t\tconst wrapper = $(dialog.fields_dict[\"chart_preview\"].wrapper);\n\t\t\tlet values = dialog.get_values(true);\n\t\t\tvalues = set_chart_values(values);\n\n\t\t\tif (values.x_field && values.y_fields.length) {\n\t\t\t\tlet options = frappe.report_utils.make_chart_options(\n\t\t\t\t\tme.columns,\n\t\t\t\t\tme.raw_data,\n\t\t\t\t\tvalues\n\t\t\t\t);\n\t\t\t\tme.chart_fields = values;\n\t\t\t\twrapper.empty();\n\t\t\t\tnew frappe.Chart(wrapper[0], options);\n\t\t\t\twrapper.find(\".chart-container .title, .chart-container .sub-title\").hide();\n\t\t\t\twrapper.show();\n\n\t\t\t\tdialog.fields_dict[\"create_dashoard_chart\"].df.hidden = 0;\n\t\t\t\tdialog.refresh();\n\t\t\t} else {\n\t\t\t\twrapper[0].innerHTML = `<div class=\"flex justify-center align-center text-muted\" style=\"height: 120px; display: flex;\">\n\t\t\t\t\t<div>${__(\"Please select X and Y fields\")}</div>\n\t\t\t\t</div>`;\n\t\t\t}\n\t\t}\n\n\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Create Chart\"),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"x_field\",\n\t\t\t\t\tlabel: \"X Field\",\n\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t\tdefault: me.chart_fields ? me.chart_fields.x_field : null,\n\t\t\t\t\toptions: field_options.non_numeric_fields,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"cb_1\",\n\t\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"chart_type\",\n\t\t\t\t\tlabel: \"Type of Chart\",\n\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t\toptions: [\"Bar\", \"Line\", \"Percentage\", \"Pie\", \"Donut\"],\n\t\t\t\t\tdefault: me.chart_fields ? me.chart_fields.chart_type : \"Bar\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"sb_1\",\n\t\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\t\tlabel: \"Y Axis\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"y_axis_fields\",\n\t\t\t\t\tfieldtype: \"Table\",\n\t\t\t\t\tfields: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t\t\t\tfieldname: \"y_field\",\n\t\t\t\t\t\t\tname: \"y_field\",\n\t\t\t\t\t\t\tlabel: __(\"Y Field\"),\n\t\t\t\t\t\t\toptions: field_options.numeric_fields,\n\t\t\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfieldtype: \"Color\",\n\t\t\t\t\t\t\tfieldname: \"color\",\n\t\t\t\t\t\t\tname: \"color\",\n\t\t\t\t\t\t\tlabel: __(\"Color\"),\n\t\t\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"preview_chart_button\",\n\t\t\t\t\tfieldtype: \"Button\",\n\t\t\t\t\tlabel: \"Preview Chart\",\n\t\t\t\t\tclick: preview_chart,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"sb_2\",\n\t\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\t\tlabel: \"Chart Preview\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"chart_preview\",\n\t\t\t\t\tlabel: \"Chart Preview\",\n\t\t\t\t\tfieldtype: \"HTML\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"create_dashoard_chart\",\n\t\t\t\t\tlabel: \"Add Chart to Dashboard\",\n\t\t\t\t\tfieldtype: \"Button\",\n\t\t\t\t\thidden: 1,\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tdialog.hide();\n\t\t\t\t\t\tthis.add_chart_to_dashboard();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\tprimary_action_label: __(\"Create\"),\n\t\t\tprimary_action: (values) => {\n\t\t\t\tvalues = set_chart_values(values);\n\n\t\t\t\tlet options = frappe.report_utils.make_chart_options(\n\t\t\t\t\tthis.columns,\n\t\t\t\t\tthis.raw_data,\n\t\t\t\t\tvalues\n\t\t\t\t);\n\t\t\t\tme.chart_fields = values;\n\n\t\t\t\tlet x_field_label = field_options.numeric_fields.filter(\n\t\t\t\t\t(field) => field.value == values.y_fields[0]\n\t\t\t\t)[0].label;\n\t\t\t\tlet y_field_label = field_options.non_numeric_fields.filter(\n\t\t\t\t\t(field) => field.value == values.x_field\n\t\t\t\t)[0].label;\n\n\t\t\t\toptions.title = __(\"{0}: {1} vs {2}\", [\n\t\t\t\t\tthis.report_name,\n\t\t\t\t\tx_field_label,\n\t\t\t\t\ty_field_label,\n\t\t\t\t]);\n\n\t\t\t\tthis.render_chart(options);\n\t\t\t\tthis.add_chart_buttons_to_toolbar(true);\n\n\t\t\t\tdialog.hide();\n\t\t\t},\n\t\t});\n\n\t\tdialog.show();\n\n\t\t// load preview after dialog animation\n\t\tsetTimeout(preview_chart, 500);\n\t}\n\n\tprepare_columns(columns) {\n\t\treturn columns.map((column) => {\n\t\t\tcolumn = frappe.report_utils.prepare_field_from_column(column);\n\n\t\t\tconst format_cell = (value, row, column, data) => {\n\t\t\t\tif (column.isHeader && !data && this.data) {\n\t\t\t\t\t// totalRow doesn't have a data object\n\t\t\t\t\t// proxy it using the first data object\n\t\t\t\t\t// applied to Float, Currency fields, needed only for currency formatting.\n\t\t\t\t\t// make first data column have value 'Total'\n\t\t\t\t\tlet index = 1;\n\n\t\t\t\t\tif (this.report_settings.get_datatable_options) {\n\t\t\t\t\t\tlet datatable = this.report_settings.get_datatable_options({});\n\t\t\t\t\t\tif (datatable && datatable.checkboxColumn) index = 2;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (column.colIndex === index && !value) {\n\t\t\t\t\t\tvalue = \"Total\";\n\t\t\t\t\t\tcolumn = { fieldtype: \"Data\" }; // avoid type issues for value if Date column\n\t\t\t\t\t} else if ([\"Currency\", \"Float\"].includes(column.fieldtype)) {\n\t\t\t\t\t\t// proxy for currency and float\n\t\t\t\t\t\tdata = this.data[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn frappe.format(\n\t\t\t\t\tvalue,\n\t\t\t\t\tcolumn,\n\t\t\t\t\t{ for_print: false, always_show_decimals: true },\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tlet compareFn = null;\n\t\t\tif (column.fieldtype === \"Date\") {\n\t\t\t\tcompareFn = (cell, keyword) => {\n\t\t\t\t\tif (!cell.content) return null;\n\t\t\t\t\tif (keyword.length !== \"YYYY-MM-DD\".length) return null;\n\n\t\t\t\t\tconst keywordValue = frappe.datetime.user_to_obj(keyword);\n\t\t\t\t\tconst cellValue = frappe.datetime.str_to_obj(cell.content);\n\t\t\t\t\treturn [+cellValue, +keywordValue];\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn Object.assign(column, {\n\t\t\t\tid: column.fieldname,\n\t\t\t\t// The column label should have already been translated in the\n\t\t\t\t// backend. Translating it again would cause unexpected behaviour.\n\t\t\t\tname: column.label,\n\t\t\t\twidth: parseInt(column.width) || null,\n\t\t\t\teditable: false,\n\t\t\t\tcompareValue: compareFn,\n\t\t\t\tformat: (value, row, column, data, filter) => {\n\t\t\t\t\tif (this.report_settings.formatter) {\n\t\t\t\t\t\treturn this.report_settings.formatter(\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\trow,\n\t\t\t\t\t\t\tcolumn,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\tformat_cell,\n\t\t\t\t\t\t\tfilter\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn format_cell(value, row, column, data);\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tprepare_data(data) {\n\t\treturn data.map((row) => {\n\t\t\tlet row_obj = {};\n\t\t\tif (Array.isArray(row)) {\n\t\t\t\tthis.columns.forEach((column, i) => {\n\t\t\t\t\trow_obj[column.id] = row[i];\n\t\t\t\t});\n\n\t\t\t\treturn row_obj;\n\t\t\t}\n\t\t\treturn row;\n\t\t});\n\t}\n\n\tget_visible_columns() {\n\t\tconst visible_column_ids = this.datatable.datamanager\n\t\t\t.getColumns(true)\n\t\t\t.map((col) => col.id);\n\n\t\treturn visible_column_ids\n\t\t\t.map((id) => this.columns.find((col) => col.id === id))\n\t\t\t.filter(Boolean);\n\t}\n\n\tget_filter_values(raise) {\n\t\t// check for mandatory property for filters added via UI\n\t\tconst mandatory = this.filters.filter((f) => f.df.reqd || f.df.mandatory);\n\t\tconst missing_mandatory = mandatory.filter((f) => !f.get_value());\n\t\tif (raise && missing_mandatory.length > 0) {\n\t\t\tlet message = __(\"Please set filters\");\n\t\t\tthis.hide_loading_screen();\n\t\t\tthis.toggle_message(raise, message);\n\t\t\tthrow \"Filter missing\";\n\t\t}\n\n\t\traise && this.toggle_message(false);\n\n\t\treturn this.filters\n\t\t\t.filter((f) => f.get_value())\n\t\t\t.map((f) => {\n\t\t\t\tvar v = f.get_value();\n\t\t\t\t// hidden fields dont have $input\n\t\t\t\tif (f.df.hidden) v = f.value;\n\t\t\t\tif (v === \"%\") v = null;\n\t\t\t\tif (f.df.wildcard_filter) {\n\t\t\t\t\tv = `%${v}%`;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\t[f.df.fieldname]: v,\n\t\t\t\t};\n\t\t\t})\n\t\t\t.reduce((acc, f) => {\n\t\t\t\tObject.assign(acc, f);\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t}\n\n\tget_filter(fieldname) {\n\t\tconst field = (this.filters || []).find((f) => f.df.fieldname === fieldname);\n\t\tif (!field) {\n\t\t\tconsole.warn(`[Query Report] Invalid filter: ${fieldname}`);\n\t\t}\n\t\treturn field;\n\t}\n\n\tget_filter_value(fieldname) {\n\t\tconst field = this.get_filter(fieldname);\n\t\treturn field ? field.get_value() : null;\n\t}\n\n\tset_filter_value(fieldname, value) {\n\t\tlet field_value_map = {};\n\t\tif (typeof fieldname === \"string\") {\n\t\t\tfield_value_map[fieldname] = value;\n\t\t} else {\n\t\t\tfield_value_map = fieldname;\n\t\t}\n\n\t\tthis._no_refresh = true;\n\t\tObject.keys(field_value_map).forEach((fieldname, i, arr) => {\n\t\t\tconst value = field_value_map[fieldname];\n\n\t\t\tif (i === arr.length - 1) {\n\t\t\t\tthis._no_refresh = false;\n\t\t\t}\n\n\t\t\tthis.get_filter(fieldname).set_value(value);\n\t\t});\n\t}\n\n\tset_breadcrumbs() {\n\t\tif (!this.report_doc || !this.report_doc.ref_doctype) return;\n\t\tconst ref_doctype = frappe.get_meta(this.report_doc.ref_doctype);\n\t\tfrappe.breadcrumbs.add(ref_doctype.module);\n\t}\n\n\tmake_access_log(method, file_format) {\n\t\tfrappe.call(\"frappe.core.doctype.access_log.access_log.make_access_log\", {\n\t\t\tdoctype: this.doctype || \"\",\n\t\t\treport_name: this.report_name,\n\t\t\tfilters: this.get_filter_values(),\n\t\t\tfile_type: file_format,\n\t\t\tmethod: method,\n\t\t});\n\t}\n\n\tprint_report(print_settings) {\n\t\tconst custom_format = this.report_settings.html_format || null;\n\t\tconst filters_html = this.get_filters_html_for_print();\n\t\tconst landscape = print_settings.orientation == \"Landscape\";\n\n\t\tthis.make_access_log(\"Print\", \"PDF\");\n\t\tfrappe.render_grid({\n\t\t\ttemplate: print_settings.columns ? \"print_grid\" : custom_format,\n\t\t\ttitle: __(this.report_name),\n\t\t\tsubtitle: filters_html,\n\t\t\tprint_settings: print_settings,\n\t\t\tlandscape: landscape,\n\t\t\tfilters: this.get_filter_values(),\n\t\t\tdata: this.get_data_for_print(),\n\t\t\tcolumns: this.get_columns_for_print(print_settings, custom_format),\n\t\t\toriginal_data: this.data,\n\t\t\treport: this,\n\t\t\tcan_use_smaller_font: this.report_doc.is_standard === \"Yes\" && custom_format ? 0 : 1,\n\t\t});\n\t}\n\n\tpdf_report(print_settings) {\n\t\tconst base_url = frappe.urllib.get_base_url();\n\t\tconst print_css = frappe.boot.print_css;\n\t\tconst landscape = print_settings.orientation == \"Landscape\";\n\n\t\tconst custom_format = this.report_settings.html_format || null;\n\t\tconst columns = this.get_columns_for_print(print_settings, custom_format);\n\t\tconst data = this.get_data_for_print();\n\t\tconst applied_filters = this.get_filter_values();\n\n\t\tconst filters_html = this.get_filters_html_for_print();\n\t\tconst template = print_settings.columns || !custom_format ? \"print_grid\" : custom_format;\n\t\tconst content = frappe.render_template(template, {\n\t\t\ttitle: __(this.report_name),\n\t\t\tsubtitle: filters_html,\n\t\t\tfilters: applied_filters,\n\t\t\tdata: data,\n\t\t\toriginal_data: this.data,\n\t\t\tcolumns: columns,\n\t\t\treport: this,\n\t\t});\n\n\t\t// Render Report in HTML\n\t\tconst html = frappe.render_template(\"print_template\", {\n\t\t\ttitle: __(this.report_name),\n\t\t\tcontent: content,\n\t\t\tbase_url: base_url,\n\t\t\tprint_css: print_css,\n\t\t\tprint_settings: print_settings,\n\t\t\tlandscape: landscape,\n\t\t\tcolumns: columns,\n\t\t\tlang: frappe.boot.lang,\n\t\t\tlayout_direction: frappe.utils.is_rtl() ? \"rtl\" : \"ltr\",\n\t\t\tcan_use_smaller_font: this.report_doc.is_standard === \"Yes\" && custom_format ? 0 : 1,\n\t\t});\n\n\t\tlet filter_values = [],\n\t\t\tname_len = 0;\n\t\tfor (var key of Object.keys(applied_filters)) {\n\t\t\tname_len = name_len + applied_filters[key].toString().length;\n\t\t\tif (name_len > 200) break;\n\t\t\tfilter_values.push(applied_filters[key]);\n\t\t}\n\n\t\tif (filter_values.length) {\n\t\t\tprint_settings.report_name = `${__(this.report_name)}_${filter_values.join(\"_\")}.pdf`;\n\t\t} else {\n\t\t\tprint_settings.report_name = `${__(this.report_name)}.pdf`;\n\t\t}\n\t\tfrappe.render_pdf(html, print_settings);\n\t}\n\n\tget_filters_html_for_print() {\n\t\tconst applied_filters = this.get_filter_values();\n\t\treturn Object.keys(applied_filters)\n\t\t\t.map((fieldname) => {\n\t\t\t\tconst docfield = frappe.query_report.get_filter(fieldname).df;\n\t\t\t\tconst value = applied_filters[fieldname];\n\t\t\t\treturn `<h6>${__(docfield.label)}: ${frappe.format(value, docfield)}</h6>`;\n\t\t\t})\n\t\t\t.join(\"\");\n\t}\n\n\texport_report() {\n\t\tif (this.export_dialog) {\n\t\t\tthis.export_dialog.clear();\n\t\t\tthis.export_dialog.show();\n\t\t\treturn;\n\t\t}\n\n\t\tlet extra_fields = [];\n\n\t\tif (this.tree_report) {\n\t\t\textra_fields.push({\n\t\t\t\tlabel: __(\"Include indentation\"),\n\t\t\t\tfieldname: \"include_indentation\",\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t});\n\t\t}\n\n\t\tif (this.filters.length > 0) {\n\t\t\textra_fields.push({\n\t\t\t\tlabel: __(\"Include filters\"),\n\t\t\t\tfieldname: \"include_filters\",\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t});\n\t\t}\n\n\t\tthis.export_dialog = frappe.report_utils.get_export_dialog(\n\t\t\t__(this.report_name),\n\t\t\textra_fields,\n\t\t\t({\n\t\t\t\tfile_format,\n\t\t\t\tinclude_indentation,\n\t\t\t\tinclude_filters,\n\t\t\t\tcsv_delimiter,\n\t\t\t\tcsv_quoting,\n\t\t\t}) => {\n\t\t\t\tthis.make_access_log(\"Export\", file_format);\n\n\t\t\t\tlet filters = this.get_filter_values(true);\n\t\t\t\tif (frappe.urllib.get_dict(\"prepared_report_name\")) {\n\t\t\t\t\tfilters = Object.assign(\n\t\t\t\t\t\tfrappe.urllib.get_dict(\"prepared_report_name\"),\n\t\t\t\t\t\tfilters\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tlet boolean_labels = { 1: __(\"Yes\"), 0: __(\"No\") };\n\t\t\t\tlet applied_filters = Object.fromEntries(\n\t\t\t\t\tObject.entries(filters).map(([key, value]) => [\n\t\t\t\t\t\tfrappe.query_report.get_filter(key).df.label,\n\t\t\t\t\t\tfrappe.query_report.get_filter(key).df.fieldtype == \"Check\"\n\t\t\t\t\t\t\t? boolean_labels[value]\n\t\t\t\t\t\t\t: value,\n\t\t\t\t\t])\n\t\t\t\t);\n\n\t\t\t\tconst visible_idx = this.datatable.bodyRenderer.visibleRowIndices;\n\t\t\t\tif (visible_idx.length + 1 === this.data.length) {\n\t\t\t\t\tvisible_idx.push(visible_idx.length);\n\t\t\t\t}\n\n\t\t\t\tconst args = {\n\t\t\t\t\tcmd: \"frappe.desk.query_report.export_query\",\n\t\t\t\t\treport_name: this.report_name,\n\t\t\t\t\tcustom_columns: this.custom_columns.length ? this.custom_columns : [],\n\t\t\t\t\tfile_format_type: file_format,\n\t\t\t\t\tfilters: filters,\n\t\t\t\t\tapplied_filters: applied_filters,\n\t\t\t\t\tvisible_idx,\n\t\t\t\t\tcsv_delimiter,\n\t\t\t\t\tcsv_quoting,\n\t\t\t\t\tinclude_indentation,\n\t\t\t\t\tinclude_filters,\n\t\t\t\t};\n\n\t\t\t\topen_url_post(frappe.request.url, args);\n\n\t\t\t\tthis.export_dialog.hide();\n\t\t\t}\n\t\t);\n\n\t\tthis.export_dialog.show();\n\t}\n\n\tget_data_for_csv(include_indentation) {\n\t\tconst rows = this.datatable.bodyRenderer.visibleRows;\n\t\tif (this.raw_data.add_total_row) {\n\t\t\trows.push(this.datatable.bodyRenderer.getTotalRow());\n\t\t}\n\t\treturn rows.map((row) => {\n\t\t\tconst standard_column_count = this.datatable.datamanager.getStandardColumnCount();\n\t\t\treturn row.slice(standard_column_count).map((cell, i) => {\n\t\t\t\tif (cell.column.fieldtype === \"Duration\") {\n\t\t\t\t\tcell.content = frappe.utils.get_formatted_duration(cell.content);\n\t\t\t\t}\n\t\t\t\tif (include_indentation && i === 0) {\n\t\t\t\t\tcell.content = \"   \".repeat(row.meta.indent) + (cell.content ?? \"\");\n\t\t\t\t}\n\t\t\t\treturn cell.content ?? \"\";\n\t\t\t});\n\t\t});\n\t}\n\n\tget_data_for_print() {\n\t\tif (!this.data.length) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst rows = this.datatable.datamanager.rowViewOrder\n\t\t\t.map((index) => {\n\t\t\t\tif (this.datatable.bodyRenderer.visibleRowIndices.includes(index)) {\n\t\t\t\t\treturn this.data[index];\n\t\t\t\t}\n\t\t\t})\n\t\t\t.filter(Boolean);\n\n\t\tif (this.raw_data.add_total_row && !this.report_settings.tree) {\n\t\t\tlet totalRow = this.datatable.bodyRenderer.getTotalRow().reduce((row, cell) => {\n\t\t\t\trow[cell.column.id] = cell.content;\n\t\t\t\trow.is_total_row = true;\n\t\t\t\treturn row;\n\t\t\t}, {});\n\n\t\t\trows.push(totalRow);\n\t\t}\n\t\treturn rows;\n\t}\n\n\tget_columns_for_print(print_settings, custom_format) {\n\t\tlet columns = [];\n\n\t\tif (print_settings && print_settings.columns) {\n\t\t\tcolumns = this.get_visible_columns().filter((column) =>\n\t\t\t\tprint_settings.columns.includes(column.fieldname)\n\t\t\t);\n\t\t} else {\n\t\t\tcolumns = custom_format ? this.columns : this.get_visible_columns();\n\t\t}\n\n\t\treturn columns;\n\t}\n\n\tget_menu_items() {\n\t\tlet items = [\n\t\t\t{\n\t\t\t\tlabel: __(\"Refresh\"),\n\t\t\t\taction: () => this.refresh(),\n\t\t\t\tclass: \"visible-xs\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Edit\"),\n\t\t\t\taction: () => frappe.set_route(\"Form\", \"Report\", this.report_name),\n\t\t\t\tcondition: () => frappe.user.is_report_manager(),\n\t\t\t\tstandard: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Print\"),\n\t\t\t\taction: () => {\n\t\t\t\t\tlet dialog = frappe.ui.get_print_settings(\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t(print_settings) => this.print_report(print_settings),\n\t\t\t\t\t\tthis.report_doc.letter_head,\n\t\t\t\t\t\tthis.get_visible_columns()\n\t\t\t\t\t);\n\t\t\t\t\tthis.add_portrait_warning(dialog);\n\t\t\t\t},\n\t\t\t\tcondition: () => frappe.model.can_print(this.report_doc.ref_doctype),\n\t\t\t\tstandard: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"PDF\"),\n\t\t\t\taction: () => {\n\t\t\t\t\tlet dialog = frappe.ui.get_print_settings(\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t(print_settings) => this.pdf_report(print_settings),\n\t\t\t\t\t\tthis.report_doc.letter_head,\n\t\t\t\t\t\tthis.get_visible_columns()\n\t\t\t\t\t);\n\n\t\t\t\t\tthis.add_portrait_warning(dialog);\n\t\t\t\t},\n\t\t\t\tcondition: () => frappe.model.can_print(this.report_doc.ref_doctype),\n\t\t\t\tstandard: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Export\"),\n\t\t\t\taction: () => this.export_report(),\n\t\t\t\tcondition: () => frappe.model.can_export(this.report_doc.ref_doctype),\n\t\t\t\tstandard: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Setup Auto Email\"),\n\t\t\t\taction: () =>\n\t\t\t\t\tfrappe.set_route(\"List\", \"Auto Email Report\", { report: this.report_name }),\n\t\t\t\tstandard: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Add Column\"),\n\t\t\t\taction: () => {\n\t\t\t\t\tlet d = new frappe.ui.Dialog({\n\t\t\t\t\t\ttitle: __(\"Add Column\"),\n\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t\t\t\t\tfieldname: \"doctype\",\n\t\t\t\t\t\t\t\tlabel: __(\"From Document Type\"),\n\t\t\t\t\t\t\t\toptions: this.linked_doctypes.map((df) => ({\n\t\t\t\t\t\t\t\t\tlabel: df.doctype,\n\t\t\t\t\t\t\t\t\tvalue: df.doctype,\n\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\tchange: () => {\n\t\t\t\t\t\t\t\t\tlet doctype = d.get_value(\"doctype\");\n\t\t\t\t\t\t\t\t\tfrappe.model.with_doctype(doctype, () => {\n\t\t\t\t\t\t\t\t\t\tlet options = frappe.meta\n\t\t\t\t\t\t\t\t\t\t\t.get_docfields(doctype)\n\t\t\t\t\t\t\t\t\t\t\t.filter(frappe.model.is_value_type)\n\t\t\t\t\t\t\t\t\t\t\t.map((df) => ({\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: df.label,\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: df.fieldname,\n\t\t\t\t\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t\t\t\t\td.set_df_property(\n\t\t\t\t\t\t\t\t\t\t\t\"field\",\n\t\t\t\t\t\t\t\t\t\t\t\"options\",\n\t\t\t\t\t\t\t\t\t\t\toptions.sort(function (a, b) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (a.label < b.label) {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tif (a.label > b.label) {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t\t\t\t\tlabel: __(\"Field\"),\n\t\t\t\t\t\t\t\tfieldname: \"field\",\n\t\t\t\t\t\t\t\toptions: [],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t\t\t\t\tlabel: __(\"Insert After\"),\n\t\t\t\t\t\t\t\tfieldname: \"insert_after\",\n\t\t\t\t\t\t\t\toptions: this.columns.map((df) => df.label),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t\tprimary_action: (values) => {\n\t\t\t\t\t\t\tconst custom_columns = [];\n\t\t\t\t\t\t\tlet df = frappe.meta.get_docfield(values.doctype, values.field);\n\t\t\t\t\t\t\tconst insert_after_index = this.columns.findIndex(\n\t\t\t\t\t\t\t\t(column) => column.label === values.insert_after\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tcustom_columns.push({\n\t\t\t\t\t\t\t\tfieldname: this.columns\n\t\t\t\t\t\t\t\t\t.map((column) => column.fieldname)\n\t\t\t\t\t\t\t\t\t.includes(df.fieldname)\n\t\t\t\t\t\t\t\t\t? df.fieldname + \"-\" + frappe.scrub(values.doctype)\n\t\t\t\t\t\t\t\t\t: df.fieldname,\n\t\t\t\t\t\t\t\tfieldtype: df.fieldtype,\n\t\t\t\t\t\t\t\tlabel: df.label,\n\t\t\t\t\t\t\t\tinsert_after_index: insert_after_index,\n\t\t\t\t\t\t\t\tlink_field: this.doctype_field_map[values.doctype],\n\t\t\t\t\t\t\t\tdoctype: values.doctype,\n\t\t\t\t\t\t\t\toptions: df.options,\n\t\t\t\t\t\t\t\twidth: 100,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.custom_columns = this.custom_columns.concat(custom_columns);\n\t\t\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\t\tmethod: \"frappe.desk.query_report.get_data_for_custom_field\",\n\t\t\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\t\t\tfield: values.field,\n\t\t\t\t\t\t\t\t\tdoctype: values.doctype,\n\t\t\t\t\t\t\t\t\tnames: Array.from(\n\t\t\t\t\t\t\t\t\t\tthis.doctype_field_map[values.doctype].names\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\t\t\t\tconst custom_data = r.message;\n\t\t\t\t\t\t\t\t\tconst link_field =\n\t\t\t\t\t\t\t\t\t\tthis.doctype_field_map[values.doctype].fieldname;\n\t\t\t\t\t\t\t\t\tthis.add_custom_column(\n\t\t\t\t\t\t\t\t\t\tcustom_columns,\n\t\t\t\t\t\t\t\t\t\tcustom_data,\n\t\t\t\t\t\t\t\t\t\tlink_field,\n\t\t\t\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\t\t\t\tinsert_after_index\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.set_menu_items();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\td.show();\n\t\t\t\t},\n\t\t\t\tstandard: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"User Permissions\"),\n\t\t\t\taction: () =>\n\t\t\t\t\tfrappe.set_route(\"List\", \"User Permission\", {\n\t\t\t\t\t\tdoctype: \"Report\",\n\t\t\t\t\t\tname: this.report_name,\n\t\t\t\t\t}),\n\t\t\t\tcondition: () => frappe.user.has_role(\"System Manager\"),\n\t\t\t\tstandard: true,\n\t\t\t},\n\t\t];\n\n\t\tif (frappe.user.is_report_manager()) {\n\t\t\titems.push({\n\t\t\t\tlabel: __(\"Save\"),\n\t\t\t\taction: () => {\n\t\t\t\t\tlet d = new frappe.ui.Dialog({\n\t\t\t\t\t\ttitle: __(\"Save Report\"),\n\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\t\t\t\tfieldname: \"report_name\",\n\t\t\t\t\t\t\t\tlabel: __(\"Report Name\"),\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tthis.report_doc.is_standard == \"No\" ? this.report_name : \"\",\n\t\t\t\t\t\t\t\treqd: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t\tprimary_action: (values) => {\n\t\t\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\t\tmethod: \"frappe.desk.query_report.save_report\",\n\t\t\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\t\t\treference_report: this.report_name,\n\t\t\t\t\t\t\t\t\treport_name: values.report_name,\n\t\t\t\t\t\t\t\t\tcolumns: this.get_visible_columns(),\n\t\t\t\t\t\t\t\t\tfilters: this.get_filter_values(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcallback: function (r) {\n\t\t\t\t\t\t\t\t\tthis.show_save = false;\n\t\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t\t\tfrappe.set_route(\"query-report\", r.message);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\td.show();\n\t\t\t\t},\n\t\t\t\tstandard: true,\n\t\t\t});\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tadd_portrait_warning(dialog) {\n\t\tif (this.columns.length > 10) {\n\t\t\tdialog.set_df_property(\"orientation\", \"change\", () => {\n\t\t\t\tlet value = dialog.get_value(\"orientation\");\n\t\t\t\tlet description =\n\t\t\t\t\tvalue === \"Portrait\"\n\t\t\t\t\t\t? __(\"Report with more than 10 columns looks better in Landscape mode.\")\n\t\t\t\t\t\t: \"\";\n\t\t\t\tdialog.set_df_property(\"orientation\", \"description\", description);\n\t\t\t});\n\t\t}\n\t}\n\n\tadd_custom_column(\n\t\tcustom_column,\n\t\tcustom_data,\n\t\tlink_field,\n\t\tnew_column_data,\n\t\tinsert_after_index\n\t) {\n\t\tconst column = this.prepare_columns(custom_column);\n\t\tconst column_field = new_column_data.field;\n\n\t\tthis.columns.splice(insert_after_index + 1, 0, column[0]);\n\n\t\tthis.data.forEach((row) => {\n\t\t\tif (column[0].fieldname.includes(\"-\")) {\n\t\t\t\trow[column_field + \"-\" + frappe.scrub(new_column_data.doctype)] =\n\t\t\t\t\tcustom_data[row[link_field]];\n\t\t\t} else {\n\t\t\t\trow[column_field] = custom_data[row[link_field]];\n\t\t\t}\n\t\t});\n\n\t\tthis.render_datatable();\n\t}\n\n\tget_linked_doctypes() {\n\t\tlet doctypes = [];\n\t\tlet dynamic_links = [];\n\t\tlet dynamic_doctypes = new Set();\n\t\tthis.doctype_field_map = {};\n\n\t\tthis.columns.forEach((df) => {\n\t\t\tif (df.fieldtype == \"Link\" && df.options && df.options != \"Currency\") {\n\t\t\t\tdoctypes.push({\n\t\t\t\t\tdoctype: df.options,\n\t\t\t\t\tfieldname: df.fieldname,\n\t\t\t\t});\n\t\t\t} else if (df.fieldtype == \"Dynamic Link\" && df.options) {\n\t\t\t\tdynamic_links.push({\n\t\t\t\t\tlink_name: df.options,\n\t\t\t\t\tfieldname: df.fieldname,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.data.forEach((row) => {\n\t\t\tdynamic_links.forEach((field) => {\n\t\t\t\tif (row[field.link_name]) {\n\t\t\t\t\tdynamic_doctypes.add(row[field.link_name] + \":\" + field.fieldname);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tdoctypes = doctypes.concat(\n\t\t\tArray.from(dynamic_doctypes).map((d) => {\n\t\t\t\tconst doc_field_pair = d.split(\":\");\n\t\t\t\treturn {\n\t\t\t\t\tdoctype: doc_field_pair[0],\n\t\t\t\t\tfieldname: doc_field_pair[1],\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\n\t\tdoctypes.forEach((doc) => {\n\t\t\tthis.doctype_field_map[doc.doctype] = { fieldname: doc.fieldname, names: new Set() };\n\t\t});\n\n\t\tthis.data.forEach((row) => {\n\t\t\tdoctypes.forEach((doc) => {\n\t\t\t\tthis.doctype_field_map[doc.doctype].names.add(row[doc.fieldname]);\n\t\t\t});\n\t\t});\n\n\t\treturn doctypes;\n\t}\n\n\tsetup_report_wrapper() {\n\t\tif (this.$report) return;\n\n\t\t// Remove border from\n\t\t$(\".page-head-content\").removeClass(\"border-bottom\");\n\n\t\tlet page_form = this.page.main.find(\".page-form\");\n\t\tthis.$status = $(`<div class=\"form-message text-muted small\"></div>`)\n\t\t\t.hide()\n\t\t\t.insertAfter(page_form);\n\n\t\tthis.$summary = $(`<div class=\"report-summary\"></div>`).hide().appendTo(this.page.main);\n\n\t\tthis.$chart = $('<div class=\"chart-wrapper\">').hide().appendTo(this.page.main);\n\n\t\tthis.$loading = $(this.message_div(\"\")).hide().appendTo(this.page.main);\n\t\tthis.$report = $('<div class=\"report-wrapper\">').appendTo(this.page.main);\n\t\tthis.$message = $(this.message_div(\"\")).hide().appendTo(this.page.main);\n\t}\n\n\tshow_status(status_message) {\n\t\tthis.$status.html(status_message).show();\n\t}\n\n\thide_status() {\n\t\tthis.$status.hide();\n\t}\n\n\tshow_footer_message() {\n\t\tthis.$report_footer && this.$report_footer.remove();\n\t\tthis.$report_footer = $(`<div class=\"report-footer text-muted\"></div>`).appendTo(\n\t\t\tthis.page.main\n\t\t);\n\t\tif (this.tree_report) {\n\t\t\tthis.$tree_footer = $(`<div class=\"tree-footer col-md-6\">\n\t\t\t\t<button class=\"btn btn-xs btn-default\" data-action=\"expand_all_rows\">\n\t\t\t\t\t${__(\"Expand All\")}</button>\n\t\t\t\t<button class=\"btn btn-xs btn-default\" data-action=\"collapse_all_rows\">\n\t\t\t\t\t${__(\"Collapse All\")}</button>\n\t\t\t</div>`);\n\t\t\t$(this.$report_footer).append(this.$tree_footer);\n\t\t\tthis.$tree_footer.find(\"[data-action=collapse_all_rows]\").show();\n\t\t\tthis.$tree_footer.find(\"[data-action=expand_all_rows]\").hide();\n\t\t}\n\n\t\tconst message = __(\n\t\t\t\"For comparison, use >5, <10 or =324. For ranges, use 5:10 (for values between 5 & 10).\"\n\t\t);\n\t\tconst execution_time_msg = __(\"Execution Time: {0} sec\", [this.execution_time || 0.1]);\n\n\t\tthis.$report_footer.append(`<div class=\"col-md-12\">\n\t\t\t<span\">${message}</span><span class=\"pull-right\">${execution_time_msg}</span>\n\t\t</div>`);\n\t}\n\n\texpand_all_rows() {\n\t\tthis.$tree_footer.find(\"[data-action=expand_all_rows]\").hide();\n\t\tthis.datatable.rowmanager.expandAllNodes();\n\t\tthis.$tree_footer.find(\"[data-action=collapse_all_rows]\").show();\n\t}\n\n\tcollapse_all_rows() {\n\t\tthis.$tree_footer.find(\"[data-action=collapse_all_rows]\").hide();\n\t\tthis.datatable.rowmanager.collapseAllNodes();\n\t\tthis.$tree_footer.find(\"[data-action=expand_all_rows]\").show();\n\t}\n\n\tmessage_div(message) {\n\t\treturn `<div class='flex justify-center align-center text-muted' style='height: 50vh;'>\n\t\t\t<div>${message}</div>\n\t\t</div>`;\n\t}\n\n\treset_report_view() {\n\t\tthis.hide_status();\n\t\tthis.toggle_nothing_to_show(true);\n\t\tthis.refresh();\n\t}\n\n\ttoggle_nothing_to_show(flag) {\n\t\tlet message =\n\t\t\tthis.prepared_report && !this.prepared_report_document\n\t\t\t\t? __(\n\t\t\t\t\t\t\"This is a background report. Please set the appropriate filters and then generate a new one.\"\n\t\t\t\t  )\n\t\t\t\t: this.get_no_result_message();\n\n\t\tthis.toggle_message(flag, message);\n\n\t\tif (flag && this.prepared_report) {\n\t\t\tthis.prepared_report_action = \"New\";\n\t\t\tif (!this.primary_button.is(\":visible\")) {\n\t\t\t\tthis.add_prepared_report_buttons();\n\t\t\t}\n\t\t}\n\t}\n\n\ttoggle_message(flag, message) {\n\t\tif (flag) {\n\t\t\tthis.$message.find(\"div\").html(message);\n\t\t\tthis.$message.show();\n\t\t} else {\n\t\t\tthis.$message.hide();\n\t\t}\n\t}\n\n\ttoggle_filter_display(fieldname, flag) {\n\t\tthis.$page.find(`div[data-fieldname=${fieldname}]`).toggleClass(\"hide-control\", flag);\n\t}\n\n\ttoggle_report(flag) {\n\t\tthis.$report.toggle(flag);\n\t\tthis.$chart.toggle(flag);\n\t\tthis.$summary.toggle(flag);\n\t}\n\n\tget_checked_items(only_docnames) {\n\t\tconst indexes = this.datatable.rowmanager.getCheckedRows();\n\n\t\treturn indexes.reduce((items, i) => {\n\t\t\tif (i === undefined) return items;\n\n\t\t\tconst item = this.data[i];\n\t\t\titems.push(only_docnames ? item.name : item);\n\t\t\treturn items;\n\t\t}, []);\n\t}\n\n\t// backward compatibility\n\tget get_values() {\n\t\treturn this.get_filter_values;\n\t}\n};\n", "\n\tfrappe.templates['print_grid'] = `<!-- title -->\n{% if title %}\n<h2>{{ __(title) }}</h2>\n<hr>\n{% endif %}\n{% if subtitle %}\n{{ subtitle }}\n<hr>\n{% endif %}\n<table class=\"table table-bordered\">\n\t<!-- heading -->\n\t<thead>\n\t\t<tr>\n\t\t<th> # </th>\n\t\t{% for col in columns %}\n\t\t\t{% if col.name && col._id !== \"_check\" %}\n\t\t\t<th\n\t\t\t\t{% if col.minWidth %}\n\t\t\t\t\tstyle=\"min-width: {{ col.minWidth }}px\"\n\t\t\t\t{% endif %}\n\t\t\t\t{% if col.docfield && frappe.model.is_numeric_field(col.docfield) %}\n\t\t\t\t\tclass=\"text-right\"\n\t\t\t\t{% endif %}\n\t\t\t>\n\t\t\t\t{{ __(col.name) }}</th>\n\t\t\t{% endif %}\n\t\t{% endfor %}\n\t\t</tr>\n\t</thead>\n\t<!-- body -->\n\t<tbody>\n\t\t{% for row in data %}\n\t\t\t<tr style=\"height: 30px\">\n\t\t\t<td {% if row.bold == 1 %} style=\"font-weight: bold\" {% endif %}>\n\t\t\t\t<span> {{ row._index + 1 }} </span>\n\t\t\t</td>\n\t\t\t{% for col in columns %}\n\t\t\t\t{% if col.name && col._id !== \"_check\" %}\n\t\t\t\t\t{% var value = col.fieldname ? row[col.fieldname] : row[col.id] %}\n\t\t\t\t\t{% var longest_word = cstr(value).split(' ').reduce((longest, word) => word.length > longest.length ? word : longest, ''); %}\n\t\t\t\t\t<td {% if row.bold == 1 %} style=\"font-weight: bold\" {% endif %} {% if longest_word.length > 45 %} class=\"overflow-wrap-anywhere\" {% endif %}>\n\t\t\t\t\t\t<span {% if col._index == 0 %} style=\"padding-left: {%= cint(row.indent) * 2 %}em\" {% endif %}>\n\t\t\t\t\t\t\t{% format_data = row.is_total_row && [\"Currency\", \"Float\"].includes(col.fieldtype) ? data[0] : row %}\n\t\t\t\t\t\t\t{% if (row.is_total_row && col._index == 0) { %}\n\t\t\t\t\t\t\t\t{{ __(\"Total\") }}\n\t\t\t\t\t\t\t{% } else { %}\n\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\tcol.formatter\n\t\t\t\t\t\t\t\t\t\t? col.formatter(row._index, col._index, value, col, format_data, true)\n\t\t\t\t\t\t\t\t\t\t: col.format\n\t\t\t\t\t\t\t\t\t\t\t? col.format(value, row, col, format_data)\n\t\t\t\t\t\t\t\t\t\t\t: col.docfield\n\t\t\t\t\t\t\t\t\t\t\t\t? frappe.format(value, col.docfield)\n\t\t\t\t\t\t\t\t\t\t\t\t: value\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t{% } %}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</td>\n\t\t\t\t{% endif %}\n\t\t\t{% endfor %}\n\t\t\t</tr>\n\t\t{% endfor %}\n\t</tbody>\n</table>\n`;\n", "\n\tfrappe.templates['print_tree'] = `<!DOCTYPE html>\n<html lang=\"en\">\n\t<head>\n\t\t<meta charset=\"utf-8\">\n\t\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\t\t<meta name=\"description\" content=\"\">\n\t\t<meta name=\"author\" content=\"\">\n\t\t<title>{{ title }}</title>\n\t\t<link href=\"{{ base_url }}/assets/frappe/css/bootstrap.css\" rel=\"stylesheet\">\n\t\t<link type=\"text/css\" rel=\"stylesheet\"\n\t\t\thref=\"{{ base_url }}/assets/frappe/css/fonts/fontawesome/font-awesome.min.css\">\n\t\t<link rel=\"stylesheet\" type=\"text/css\" href=\"{{ base_url }}/assets/frappe/css/tree.css\">\n\t\t<link rel=\"stylesheet\" type=\"text/css\" href=\"{{ base_url }}{{ print_format_css_path }}\">\n\t\t<style>\n\t\t\t{{ print_css }}\n\t\t</style>\n\t\t<style>\n\t\t\t.tree.opened::before,\n\t\t\t.tree-node.opened::before,\n\t\t\t.tree:last-child::after,\n\t\t\t.tree-node:last-child::after {\n\t\t\t\tz-index: 1;\n\t\t\t\tborder-left: 1px solid #d1d8dd;\n\t\t\t\tbackground: none;\n\t\t\t}\n\t\t\t.tree a,\n\t\t\t.tree-link {\n\t\t\t\ttext-decoration: none;\n\t\t\t\tcursor: default;\n\t\t\t}\n\t\t\t.tree.opened > .tree-children > .tree-node > .tree-link::before,\n\t\t\t.tree-node.opened > .tree-children > .tree-node > .tree-link::before {\n\t\t\t\tborder-top: 1px solid #d1d8dd;\n\t\t\t\tz-index: 1;\n\t\t\t\tbackground: none;\n\t\t\t}\n\t\t\ti.fa.fa-fw.fa-folder {\n\t\t\t\tz-index: 2;\n\t\t\t\tposition: relative;\n\t\t\t}\n\t\t\t.tree:last-child::after, .tree-node:last-child::after {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.tree-node-toolbar {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\ti.octicon.octicon-primitive-dot.text-extra-muted {\n\t\t\t\twidth: 7px;\n\t\t\t\theight: 7px;\n\t\t\t\tborder-radius: 50%;\n\t\t\t\tbackground: #d1d8dd;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tposition: relative;\n\t\t\t\tz-index: 2;\n\t\t\t}\n\n\t\t\t@media (max-width: 767px) {\n\t\t\t\tul.tree-children {\n\t\t\t\t\tpadding-left: 20px;\n\t\t\t\t}\n\t\t\t}\n\t\t</style>\n  \t</head>\n\t<body>\n\t\t<svg id=\"frappe-symbols\" aria-hidden=\"true\" style=\"position: absolute; width: 0; height: 0; overflow: hidden;\" class=\"d-block\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<symbol viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\" id=\"icon-primitive-dot\">\n\t\t\t\t<path d=\"M9.5 6a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z\"></path>\n\t\t\t</symbol>\n\n\t\t\t<symbol viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\" id=\"icon-folder-open\">\n\t\t\t\t<path d=\"M8.024 6.5H3a.5.5 0 0 0-.5.5v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V9.5A.5.5 0 0 0 17 9h-6.783a.5.5 0 0 1-.417-.224L8.441 6.724a.5.5 0 0 0-.417-.224z\" stroke=\"var(--icon-stroke)\" stroke-miterlimit=\"10\" stroke-linecap=\"square\"></path>\n\t\t\t\t<path d=\"M3.88 4.5v-1a.5.5 0 0 1 .5-.5h11.24a.5.5 0 0 1 .5.5V7\" stroke=\"var(--icon-stroke)\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n\t\t\t</symbol>\n\n\t\t\t<symbol viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\" id=\"icon-folder-normal\">\n\t\t\t\t<path d=\"M2.5 4v10a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V6.5a1 1 0 0 0-1-1h-6.283a.5.5 0 0 1-.417-.224L8.441 3.224A.5.5 0 0 0 8.024 3H3.5a1 1 0 0 0-1 1z\" stroke=\"var(--icon-stroke)\" stroke-miterlimit=\"10\" stroke-linecap=\"square\"></path>\n\t\t\t</symbol>\n\t\t</svg>\n\t\t<div class=\"print-format-gutter\">\n\t\t\t{% if print_settings.repeat_header_footer %}\n\t\t\t\t<div id=\"footer-html\" class=\"visible-pdf\">\n\t\t\t\t\t{% if print_settings.letter_head && print_settings.letter_head.footer %}\n\t\t\t\t\t\t<div class=\"letter-head-footer\">\n\t\t\t\t\t\t\t{{ print_settings.letter_head.footer }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{% endif %}\n\t\t\t\t\t<p class=\"text-center small page-number visible-pdf\">\n\t\t\t\t\t\t{{ __(\"Page {0} of {1}\", [\\`<span class=\"page\"></span>\\`, \\`<span class=\"topage\"></span>\\`]) }}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t{% endif %}\n\n\t\t\t<div class=\"print-format {% if landscape %} landscape {% endif %}\">\n\t\t\t\t{% if print_settings.letter_head %}\n\t\t\t\t<div {% if print_settings.repeat_header_footer %} id=\"header-html\" class=\"hidden-pdf\" {% endif %}>\n\t\t\t\t\t<div class=\"letter-head\">{{ print_settings.letter_head.header }}</div>\n\t\t\t\t</div>\n\t\t\t\t\t{% endif %}\n\t\t\t\t\t<div class=\"tree opened\">\n\t\t\t\t\t\t{{ tree }}\n\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</body>\n</html>\n`;\n", "\n\tfrappe.templates['group_by'] = `<div class=\"group-by-box\">\n\t<div class=\"visible-xs flex justify-flex-end\">\n\t\t<span class=\"remove-group-by\">\n\t\t\t{{ __(\"Remove\") }}\n\t\t</span>\n\t</div>\n\t<div class=\"list_groupby row\">\n\t\t<div class=\"col-sm-8 form-group\">\n\t\t\t<select class=\"group-by form-control input-xs\">\n\t\t\t\t<option value=\"\" disabled selected>{{ __(\"Select Group By...\") }}</option>\n\t\t\t\t{% for (var parent_doctype in group_by_conditions) { %}\n\t\t\t\t\t{% for (var val in group_by_conditions[parent_doctype]) { %}\n\t\t\t\t\t\t<option\n\t\t\t\t\t\t\tdata-doctype=\"{{parent_doctype}}\"\n\t\t\t\t\t\t\tvalue=\"{{group_by_conditions[parent_doctype][val].fieldname}}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ __(group_by_conditions[parent_doctype][val].label || group_by_conditions[parent_doctype][val].fieldname) }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t{% } %}\n\t\t\t\t{% } %}\n\t\t\t</select>\n\t\t</div>\n\t\t<div class=\"col-sm-3 form-group\">\n\t\t\t<select class=\"aggregate-function form-control input-xs\">\n\t\t\t\t{% for condition in aggregate_function_conditions %}\n\t\t\t\t<option value=\"{{condition.name}}\">{{ __(condition.label) }}</option>\n\t\t\t\t{% endfor %}\n\t\t\t</select>\n\t\t</div>\n\t\t<div class=\"col-sm-4 col-xs-12\" style=\"display: none\">\n\t\t\t<select class=\"aggregate-on form-control input-xs\">\n\t\t\t\t<option value=\"\" disabled selected>{{ __(\"Select Field...\") }}</option>\n\t\t\t</select>\n\t\t</div>\n\t\t<div class=\"groupby-actions pull-left col-sm-1 hidden-xs\">\n\t\t\t<span class=\"remove-group-by\">\n\t\t\t\t<svg class=\"icon icon-sm\">\n\t\t\t\t\t<use href=\"#icon-close\"></use>\n\t\t\t\t</svg>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>\n`;\n", "frappe.provide(\"frappe.views\");\n\nfrappe.ui.GroupBy = class {\n\tconstructor(report_view) {\n\t\tthis.report_view = report_view;\n\t\tthis.page = report_view.page;\n\t\tthis.doctype = report_view.doctype;\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tthis.make_group_by_button();\n\t\tthis.init_group_by_popover();\n\t\tthis.set_popover_events();\n\t}\n\n\tinit_group_by_popover() {\n\t\tconst sql_aggregate_functions = [\n\t\t\t{ name: \"count\", label: __(\"Count\") },\n\t\t\t{ name: \"sum\", label: __(\"Sum\") },\n\t\t\t{ name: \"avg\", label: __(\"Average\") },\n\t\t];\n\n\t\tconst group_by_template = $(\n\t\t\tfrappe.render_template(\"group_by\", {\n\t\t\t\tdoctype: this.doctype,\n\t\t\t\tgroup_by_conditions: this.get_group_by_fields(),\n\t\t\t\taggregate_function_conditions: sql_aggregate_functions,\n\t\t\t})\n\t\t);\n\n\t\tthis.group_by_button.popover({\n\t\t\tcontent: group_by_template,\n\t\t\ttemplate: `\n\t\t\t\t<div class=\"group-by-popover popover\">\n\t\t\t\t\t<div class=\"arrow\"></div>\n\t\t\t\t\t<div class=\"popover-body popover-content\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\thtml: true,\n\t\t\ttrigger: \"manual\",\n\t\t\tcontainer: \"body\",\n\t\t\tplacement: \"bottom\",\n\t\t\toffset: \"-100px, 0\",\n\t\t});\n\t}\n\n\t// TODO: make common with filter popover\n\tset_popover_events() {\n\t\t$(document.body).on(\"click\", (e) => {\n\t\t\tif (this.wrapper && this.wrapper.is(\":visible\")) {\n\t\t\t\tif (\n\t\t\t\t\t$(e.target).parents(\".group-by-popover\").length === 0 &&\n\t\t\t\t\t$(e.target).parents(\".group-by-box\").length === 0 &&\n\t\t\t\t\t$(e.target).parents(\".group-by-button\").length === 0 &&\n\t\t\t\t\t!$(e.target).is(this.group_by_button)\n\t\t\t\t) {\n\t\t\t\t\tthis.wrapper && this.group_by_button.popover(\"hide\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.group_by_button.on(\"click\", () => {\n\t\t\tthis.group_by_button.popover(\"toggle\");\n\t\t});\n\n\t\tthis.group_by_button.on(\"shown.bs.popover\", () => {\n\t\t\tif (!this.wrapper) {\n\t\t\t\tthis.wrapper = $(\".group-by-popover\");\n\t\t\t\tthis.setup_group_by_area();\n\t\t\t}\n\t\t});\n\n\t\tthis.group_by_button.on(\"hidden.bs.popover\", () => {\n\t\t\tthis.update_group_by_button();\n\t\t});\n\n\t\tfrappe.router.on(\"change\", () => {\n\t\t\tthis.group_by_button.popover(\"hide\");\n\t\t});\n\t}\n\n\tsetup_group_by_area() {\n\t\tthis.aggregate_on_html = ``;\n\t\tthis.group_by_select = this.wrapper.find(\"select.group-by\");\n\t\tthis.group_by_field && this.group_by_select.val(this.group_by_field);\n\t\tthis.aggregate_function_select = this.wrapper.find(\"select.aggregate-function\");\n\t\tthis.aggregate_on_select = this.wrapper.find(\"select.aggregate-on\");\n\t\tthis.remove_group_by_button = this.wrapper.find(\".remove-group-by\");\n\n\t\tif (this.aggregate_function) {\n\t\t\tthis.aggregate_function_select.val(this.aggregate_function);\n\t\t} else {\n\t\t\t// set default to count\n\t\t\tthis.aggregate_function_select.val(\"count\");\n\t\t\tthis.aggregate_function = \"count\";\n\t\t}\n\n\t\tthis.toggle_aggregate_on_field();\n\t\tthis.aggregate_on && this.aggregate_on_select.val(this.aggregate_on_field);\n\n\t\tthis.set_group_by_events();\n\t}\n\n\tset_group_by_events() {\n\t\t// try running on change\n\t\tthis.group_by_select.on(\"change\", () => {\n\t\t\tthis.group_by_field = this.group_by_select.val();\n\t\t\tthis.group_by_doctype = this.group_by_select.find(\":selected\").attr(\"data-doctype\");\n\t\t\tthis.apply_group_by_and_refresh();\n\t\t});\n\n\t\tthis.aggregate_function_select.on(\"change\", () => {\n\t\t\t//Set aggregate on options as numeric fields if function is sum or average\n\t\t\tthis.toggle_aggregate_on_field();\n\t\t\tthis.aggregate_function = this.aggregate_function_select.val();\n\t\t\tthis.apply_group_by_and_refresh();\n\t\t});\n\n\t\tthis.aggregate_on_select.on(\"change\", () => {\n\t\t\tthis.aggregate_on_field = this.aggregate_on_select.val();\n\t\t\tthis.aggregate_on_doctype = this.aggregate_on_select\n\t\t\t\t.find(\":selected\")\n\t\t\t\t.attr(\"data-doctype\");\n\t\t\tthis.apply_group_by_and_refresh();\n\t\t});\n\n\t\tthis.remove_group_by_button.on(\"click\", () => {\n\t\t\tif (this.group_by) {\n\t\t\t\tthis.remove_group_by();\n\t\t\t\tthis.toggle_aggregate_on_field_display(false);\n\t\t\t}\n\t\t});\n\t}\n\n\ttoggle_aggregate_on_field() {\n\t\tlet fn = this.aggregate_function_select.val();\n\t\tif (fn === \"sum\" || fn === \"avg\") {\n\t\t\tif (!this.aggregate_on_html.length) {\n\t\t\t\tthis.aggregate_on_html = `<option value=\"\" disabled selected>\n\t\t\t\t\t\t${__(\"Select Field...\")}\n\t\t\t\t\t</option>`;\n\n\t\t\t\tfor (let doctype in this.all_fields) {\n\t\t\t\t\tconst doctype_fields = this.all_fields[doctype];\n\t\t\t\t\tdoctype_fields.forEach((field) => {\n\t\t\t\t\t\t// pick numeric fields for sum / avg\n\t\t\t\t\t\tif (frappe.model.is_numeric_field(field.fieldtype)) {\n\t\t\t\t\t\t\tlet field_label = field.label\n\t\t\t\t\t\t\t\t? field.label\n\t\t\t\t\t\t\t\t: frappe.model.unscrub(field.fieldname);\n\t\t\t\t\t\t\tlet option_text =\n\t\t\t\t\t\t\t\tdoctype == this.doctype\n\t\t\t\t\t\t\t\t\t? field_label\n\t\t\t\t\t\t\t\t\t: `${__(field_label)} (${__(doctype)})`;\n\t\t\t\t\t\t\tthis.aggregate_on_html += `<option data-doctype=\"${doctype}\"\n\t\t\t\t\t\t\t\tvalue=\"${field.fieldname}\">${__(option_text)}</option>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.aggregate_on_select.html(this.aggregate_on_html);\n\t\t\tthis.toggle_aggregate_on_field_display(true);\n\t\t} else {\n\t\t\t// count, so no aggregate function\n\t\t\tthis.toggle_aggregate_on_field_display(false);\n\t\t}\n\t}\n\n\t//TODO: Fix this\n\ttoggle_aggregate_on_field_display(show) {\n\t\tthis.group_by_select.parent().toggleClass(\"col-sm-5\", show);\n\t\tthis.group_by_select.parent().toggleClass(\"col-sm-8\", !show);\n\t\tthis.aggregate_function_select.parent().toggleClass(\"col-sm-2\", show);\n\t\tthis.aggregate_function_select.parent().toggleClass(\"col-sm-3\", !show);\n\t\tthis.aggregate_on_select.parent().toggle(show);\n\t}\n\n\tget_settings() {\n\t\tif (this.group_by) {\n\t\t\treturn {\n\t\t\t\tgroup_by: this.group_by,\n\t\t\t\taggregate_function: this.aggregate_function,\n\t\t\t\taggregate_on: this.aggregate_on,\n\t\t\t};\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tapply_settings(settings) {\n\t\tlet get_fieldname = (name) => name.split(\".\")[1].replace(/`/g, \"\");\n\t\tlet get_doctype = (name) => name.split(\".\")[0].replace(/`/g, \"\").replace(\"tab\", \"\");\n\n\t\tif (!settings.group_by.startsWith(\"`tab\")) {\n\t\t\tsettings.group_by = \"`tab\" + this.doctype + \"`.`\" + settings.group_by + \"`\";\n\t\t}\n\n\t\tif (settings.aggregate_on && !settings.aggregate_on.startsWith(\"`tab\")) {\n\t\t\tconst aggregate_on_doctype = this.get_aggregate_on_doctype(settings);\n\t\t\tsettings.aggregate_on =\n\t\t\t\t\"`tab\" + aggregate_on_doctype + \"`.`\" + settings.aggregate_on + \"`\";\n\t\t}\n\n\t\t// Extract fieldname from `tabdoctype`.`fieldname`\n\t\tthis.group_by_field = get_fieldname(settings.group_by);\n\t\tthis.group_by_doctype = get_doctype(settings.group_by);\n\n\t\tthis.aggregate_function = settings.aggregate_function;\n\n\t\tif (settings.aggregate_on) {\n\t\t\tthis.aggregate_on_field = get_fieldname(settings.aggregate_on);\n\t\t\tthis.aggregate_on_doctype = get_doctype(settings.aggregate_on);\n\t\t}\n\n\t\tthis.apply_group_by();\n\t\tthis.update_group_by_button();\n\t}\n\n\tget_aggregate_on_doctype(settings) {\n\t\tfor (let doctype of Object.keys(this.all_fields)) {\n\t\t\tconst dt_fields = this.all_fields[doctype];\n\t\t\tif (dt_fields.find((field) => field.fieldname == settings.aggregate_on)) {\n\t\t\t\treturn doctype;\n\t\t\t}\n\t\t}\n\t}\n\n\tmake_group_by_button() {\n\t\tthis.page.wrapper.find(\".sort-selector\").before(\n\t\t\t$(`<div class=\"group-by-selector\">\n\t\t\t\t<button class=\"btn btn-default btn-sm group-by-button ellipsis\">\n\t\t\t\t\t<span class=\"group-by-icon\">\n\t\t\t\t\t\t${frappe.utils.icon(\"es-line-folder-alt\")}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"button-label hidden-xs\">\n\t\t\t\t\t\t${__(\"Add Group\")}\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t</div>`)\n\t\t);\n\n\t\tthis.group_by_button = this.page.wrapper.find(\".group-by-button\");\n\t}\n\n\tapply_group_by() {\n\t\tthis.group_by = \"`tab\" + this.group_by_doctype + \"`.`\" + this.group_by_field + \"`\";\n\n\t\tif (this.aggregate_function === \"count\") {\n\t\t\tthis.aggregate_on_field = null;\n\t\t\tthis.aggregate_on_doctype = null;\n\t\t} else {\n\t\t\tthis.aggregate_on =\n\t\t\t\t\"`tab\" + this.aggregate_on_doctype + \"`.`\" + this.aggregate_on_field + \"`\";\n\t\t}\n\n\t\t//All necessary fields must be set before applying group by\n\t\tif (\n\t\t\t!this.group_by ||\n\t\t\t!this.aggregate_function ||\n\t\t\t(!this.aggregate_on_field && this.aggregate_function !== \"count\")\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tapply_group_by_and_refresh() {\n\t\tif (this.apply_group_by()) {\n\t\t\tthis.report_view.refresh();\n\t\t}\n\t}\n\n\tset_args(args) {\n\t\tif (this.aggregate_function && this.group_by) {\n\t\t\tthis.report_view.group_by = this.group_by;\n\t\t\tthis.report_view.sort_by = \"_aggregate_column\";\n\t\t\tthis.report_view.sort_order = \"desc\";\n\n\t\t\t// save original fields\n\t\t\tif (!this.report_view.fields.map((f) => f[0]).includes(\"_aggregate_column\")) {\n\t\t\t\tthis.original_fields = this.report_view.fields.map((f) => f);\n\t\t\t}\n\n\t\t\tthis.report_view.fields = [[this.group_by_field, this.group_by_doctype]];\n\n\t\t\t// rebuild fields for group by\n\t\t\targs.fields = this.report_view.get_fields();\n\n\t\t\t// add aggregate column in both query args and report views\n\t\t\tthis.report_view.fields.push([\n\t\t\t\t\"_aggregate_column\",\n\t\t\t\tthis.aggregate_on_doctype || this.doctype,\n\t\t\t]);\n\n\t\t\t// setup columns in datatable\n\t\t\tthis.report_view.setup_columns();\n\n\t\t\tObject.assign(args, {\n\t\t\t\twith_comment_count: false,\n\t\t\t\taggregate_on_field: this.aggregate_on_field || \"name\",\n\t\t\t\taggregate_on_doctype: this.aggregate_on_doctype || this.doctype,\n\t\t\t\taggregate_function: this.aggregate_function || \"count\",\n\t\t\t\tgroup_by: this.report_view.group_by || null,\n\t\t\t\torder_by: \"_aggregate_column desc\",\n\t\t\t});\n\t\t}\n\t}\n\n\tget_group_by_docfield() {\n\t\t// called from build_column\n\t\tlet docfield = {};\n\t\tif (this.aggregate_function === \"count\") {\n\t\t\tdocfield = {\n\t\t\t\tfieldtype: \"Int\",\n\t\t\t\tlabel: __(\"Count\"),\n\t\t\t\tparent: this.doctype,\n\t\t\t\twidth: 200,\n\t\t\t};\n\t\t} else {\n\t\t\t// get properties of \"aggregate_on\", for example Net Total\n\t\t\tdocfield = Object.assign(\n\t\t\t\t{},\n\t\t\t\tfrappe.meta.docfield_map[this.aggregate_on_doctype][this.aggregate_on_field]\n\t\t\t);\n\n\t\t\tif (this.aggregate_function === \"sum\") {\n\t\t\t\tdocfield.label = __(\"Sum of {0}\", [__(docfield.label)]);\n\t\t\t} else {\n\t\t\t\tdocfield.label = __(\"Average of {0}\", [__(docfield.label)]);\n\t\t\t}\n\t\t}\n\n\t\tdocfield.fieldname = \"_aggregate_column\";\n\t\treturn docfield;\n\t}\n\n\tremove_group_by() {\n\t\tthis.order_by = \"\";\n\t\tthis.group_by = null;\n\t\tthis.group_by_field = null;\n\t\tthis.report_view.group_by = null;\n\t\tthis.aggregate_function = \"count\";\n\t\tthis.aggregate_on = null;\n\t\tthis.aggregate_on_field = null;\n\t\tthis.group_by_select.val(\"\");\n\t\tthis.aggregate_function_select.val(\"count\");\n\t\tthis.aggregate_on_select.empty().val(\"\");\n\t\tthis.aggregate_on_select.parent().hide();\n\n\t\t// restore original fields\n\t\tif (this.original_fields) {\n\t\t\tthis.report_view.fields = this.original_fields;\n\t\t} else {\n\t\t\tthis.report_view.set_default_fields();\n\t\t}\n\n\t\tthis.report_view.setup_columns();\n\t\tthis.original_fields = null;\n\t\tthis.report_view.refresh();\n\t}\n\n\tget_group_by_fields() {\n\t\tthis.group_by_fields = {};\n\t\tthis.all_fields = {};\n\n\t\tlet excluded_fields = [\"_liked_by\", \"idx\", \"name\"];\n\t\tconst standard_fields = frappe.model.std_fields.filter(\n\t\t\t(df) => !excluded_fields.includes(df.fieldname)\n\t\t);\n\n\t\tconst fields = this.report_view.meta.fields\n\t\t\t.concat(standard_fields)\n\t\t\t.filter((f) =>\n\t\t\t\t[\n\t\t\t\t\t\"Select\",\n\t\t\t\t\t\"Link\",\n\t\t\t\t\t\"Data\",\n\t\t\t\t\t\"Int\",\n\t\t\t\t\t\"Check\",\n\t\t\t\t\t\"Dynamic Link\",\n\t\t\t\t\t\"Autocomplete\",\n\t\t\t\t\t\"Date\",\n\t\t\t\t].includes(f.fieldtype)\n\t\t\t);\n\t\tthis.group_by_fields[this.doctype] = fields.sort((a, b) =>\n\t\t\t__(cstr(a.label)).localeCompare(cstr(__(b.label)))\n\t\t);\n\t\tthis.all_fields[this.doctype] = this.report_view.meta.fields;\n\n\t\tconst standard_fields_filter = (df) =>\n\t\t\t!frappe.model.no_value_type.includes(df.fieldtype) && !df.report_hide;\n\n\t\tconst table_fields = frappe.meta.get_table_fields(this.doctype).filter((df) => !df.hidden);\n\n\t\ttable_fields.forEach((df) => {\n\t\t\tconst cdt = df.options;\n\t\t\tconst child_table_fields = frappe.meta\n\t\t\t\t.get_docfields(cdt)\n\t\t\t\t.filter(standard_fields_filter)\n\t\t\t\t.sort((a, b) => __(cstr(a.label)).localeCompare(__(cstr(b.label))));\n\t\t\tthis.group_by_fields[cdt] = child_table_fields;\n\t\t\tthis.all_fields[cdt] = child_table_fields;\n\t\t});\n\n\t\treturn this.group_by_fields;\n\t}\n\n\tupdate_group_by_button() {\n\t\tconst group_by_applied = Boolean(this.group_by_field);\n\t\tconst button_label = group_by_applied\n\t\t\t? __(\"Grouped by <span style='font-weight:600;'>{0}</b>\", [\n\t\t\t\t\tthis.get_group_by_field_label(),\n\t\t\t  ])\n\t\t\t: __(\"Add Group\");\n\n\t\tthis.group_by_button\n\t\t\t.toggleClass(\"btn-default\", !group_by_applied)\n\t\t\t.toggleClass(\"btn-primary-light\", group_by_applied);\n\n\t\tthis.group_by_button.find(\".group-by-icon\").toggleClass(\"active\", group_by_applied);\n\n\t\tthis.group_by_button.find(\".button-label\").html(button_label);\n\t\tthis.group_by_button.attr(\n\t\t\t\"title\",\n\t\t\t`Results are Grouped by ${this.get_group_by_field_label()}`\n\t\t);\n\t}\n\n\tget_group_by_field_label() {\n\t\tlet field = this.group_by_fields[this.group_by_doctype]?.find(\n\t\t\t(field) => field.fieldname == this.group_by_field\n\t\t);\n\t\treturn field?.label || field?.fieldname;\n\t}\n};\n", "frappe.provide(\"frappe.report_utils\");\n\nfrappe.report_utils = {\n\tmake_chart_options: function (\n\t\tcolumns,\n\t\traw_data,\n\t\t{ y_fields, x_field, chart_type, colors, height }\n\t) {\n\t\tconst type = chart_type.toLowerCase();\n\n\t\tlet rows = raw_data.result.filter((value) => Object.keys(value).length);\n\n\t\tlet labels = get_column_values(x_field);\n\t\tlet datasets = y_fields.map((y_field) => ({\n\t\t\tname: frappe.model.unscrub(y_field),\n\t\t\tvalues: get_column_values(y_field).map((d) => Number(d)),\n\t\t}));\n\n\t\tif (raw_data.add_total_row) {\n\t\t\tlabels = labels.slice(0, -1);\n\t\t\tdatasets.forEach((dataset) => {\n\t\t\t\tdataset.values = dataset.values.slice(0, -1);\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\tlabels: labels.length ? labels : null,\n\t\t\t\tdatasets: datasets,\n\t\t\t},\n\t\t\ttruncateLegends: 1,\n\t\t\ttype: type,\n\t\t\theight: height ? height : 280,\n\t\t\tcolors: colors,\n\t\t\taxisOptions: {\n\t\t\t\tshortenYAxisNumbers: 1,\n\t\t\t\txAxisMode: \"tick\",\n\t\t\t\tnumberFormatter: frappe.utils.format_chart_axis_number,\n\t\t\t},\n\t\t};\n\n\t\tfunction get_column_values(column_name) {\n\t\t\tif (Array.isArray(rows[0])) {\n\t\t\t\tlet column_index = columns.findIndex((column) => column.fieldname == column_name);\n\t\t\t\treturn rows.map((row) => row[column_index]);\n\t\t\t} else {\n\t\t\t\treturn rows.map((row) => row[column_name]);\n\t\t\t}\n\t\t}\n\t},\n\n\tget_field_options_from_report: function (columns, data) {\n\t\tconst rows = data.result.filter((value) => Object.keys(value).length);\n\t\tconst first_row = Array.isArray(rows[0])\n\t\t\t? rows[0]\n\t\t\t: columns.map((col) => rows[0][col.fieldname]);\n\n\t\tconst indices = first_row.reduce((accumulator, current_value, current_index) => {\n\t\t\tif (Number.isFinite(current_value)) {\n\t\t\t\taccumulator.push(current_index);\n\t\t\t}\n\t\t\treturn accumulator;\n\t\t}, []);\n\n\t\tfunction get_options(fields) {\n\t\t\treturn fields.map((field) => {\n\t\t\t\tif (field.fieldname) {\n\t\t\t\t\treturn { label: field.label, value: field.fieldname };\n\t\t\t\t} else {\n\t\t\t\t\tfield = frappe.report_utils.prepare_field_from_column(field);\n\t\t\t\t\treturn { label: field.label, value: field.fieldname };\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst numeric_fields = columns.filter((col, i) => indices.includes(i));\n\t\tconst non_numeric_fields = columns.filter((col, i) => !indices.includes(i));\n\n\t\tlet numeric_field_options = get_options(numeric_fields);\n\t\tlet non_numeric_field_options = get_options(non_numeric_fields);\n\n\t\treturn {\n\t\t\tnumeric_fields: numeric_field_options,\n\t\t\tnon_numeric_fields: non_numeric_field_options,\n\t\t};\n\t},\n\n\tprepare_field_from_column: function (column) {\n\t\tif (typeof column === \"string\") {\n\t\t\tif (column.includes(\":\")) {\n\t\t\t\tlet [label, fieldtype, width] = column.split(\":\");\n\t\t\t\tlet options;\n\n\t\t\t\tif (fieldtype.includes(\"/\")) {\n\t\t\t\t\t[fieldtype, options] = fieldtype.split(\"/\");\n\t\t\t\t}\n\n\t\t\t\tcolumn = {\n\t\t\t\t\tlabel,\n\t\t\t\t\tfieldname: label,\n\t\t\t\t\tfieldtype,\n\t\t\t\t\twidth,\n\t\t\t\t\toptions,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tcolumn = {\n\t\t\t\t\tlabel: column,\n\t\t\t\t\tfieldname: column,\n\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn column;\n\t},\n\n\tget_report_filters: function (report_name) {\n\t\tif (frappe.query_reports[report_name]) {\n\t\t\tlet filters = frappe.query_reports[report_name].filters;\n\t\t\treturn Promise.resolve(filters);\n\t\t}\n\n\t\treturn frappe\n\t\t\t.xcall(\"frappe.desk.query_report.get_script\", {\n\t\t\t\treport_name: report_name,\n\t\t\t})\n\t\t\t.then((r) => {\n\t\t\t\tfrappe.dom.eval(r.script || \"\");\n\t\t\t\treturn frappe.after_ajax(() => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tfrappe.query_reports[report_name] &&\n\t\t\t\t\t\t!frappe.query_reports[report_name].filters &&\n\t\t\t\t\t\tr.filters\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn (frappe.query_reports[report_name].filters = r.filters);\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\tfrappe.query_reports[report_name] &&\n\t\t\t\t\t\tfrappe.query_reports[report_name].filters\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\n\t},\n\n\tget_filter_values(filters) {\n\t\treturn filters\n\t\t\t.map((f) => {\n\t\t\t\tvar v = f.default;\n\t\t\t\treturn {\n\t\t\t\t\t[f.fieldname]: v,\n\t\t\t\t};\n\t\t\t})\n\t\t\t.reduce((acc, f) => {\n\t\t\t\tObject.assign(acc, f);\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t},\n\n\tget_result_of_fn(fn, values) {\n\t\tconst get_result = {\n\t\t\tMinimum: (values) => values.reduce((min, val) => Math.min(min, val), values[0]),\n\t\t\tMaximum: (values) => values.reduce((min, val) => Math.max(min, val), values[0]),\n\t\t\tAverage: (values) => values.reduce((a, b) => a + b, 0) / values.length,\n\t\t\tSum: (values) => values.reduce((a, b) => a + b, 0),\n\t\t};\n\t\treturn get_result[fn](values);\n\t},\n\n\tget_export_dialog(report_name, extra_fields, callback) {\n\t\tconst fields = [\n\t\t\t{\n\t\t\t\tlabel: \"File Format\",\n\t\t\t\tfieldname: \"file_format\",\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\toptions: [\"Excel\", \"CSV\"],\n\t\t\t\tdefault: \"Excel\",\n\t\t\t\treqd: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"csv_settings\",\n\t\t\t\tlabel: \"Settings\",\n\t\t\t\tcollapsible: 1,\n\t\t\t\tdepends_on: \"eval:doc.file_format=='CSV'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tlabel: \"CSV Delimiter\",\n\t\t\t\tfieldname: \"csv_delimiter\",\n\t\t\t\tdefault: \",\",\n\t\t\t\tlength: 1,\n\t\t\t\tdepends_on: \"eval:doc.file_format=='CSV'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\tlabel: \"CSV Quoting\",\n\t\t\t\tfieldname: \"csv_quoting\",\n\t\t\t\toptions: [\n\t\t\t\t\t{ value: 0, label: \"Minimal\" },\n\t\t\t\t\t{ value: 1, label: \"All\" },\n\t\t\t\t\t{ value: 2, label: \"Non-numeric\" },\n\t\t\t\t\t{ value: 3, label: \"None\" },\n\t\t\t\t],\n\t\t\t\tdefault: 2,\n\t\t\t\tdepends_on: \"eval:doc.file_format=='CSV'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Small Text\",\n\t\t\t\tlabel: \"CSV Preview\",\n\t\t\t\tfieldname: \"csv_preview\",\n\t\t\t\tread_only: 1,\n\t\t\t\tdepends_on: \"eval:doc.file_format=='CSV'\",\n\t\t\t},\n\t\t];\n\n\t\tif (extra_fields) {\n\t\t\tfields.push(\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\t\tfieldname: \"extra_fields\",\n\t\t\t\t\tcollapsible: 0,\n\t\t\t\t},\n\t\t\t\t...extra_fields\n\t\t\t);\n\t\t}\n\n\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Export Report: {0}\", [report_name], \"Export report\"),\n\t\t\tfields: fields,\n\t\t\tprimary_action_label: __(\"Download\", null, \"Export report\"),\n\t\t\tprimary_action: callback,\n\t\t});\n\n\t\tfunction update_csv_preview(dialog) {\n\t\t\tconst is_query_report = frappe.get_route()[0] === \"query-report\";\n\t\t\tconst report = is_query_report ? frappe.query_report : cur_list;\n\t\t\tconst columns = report.columns.filter((col) => col.hidden !== 1);\n\t\t\tlet PREVIEW_DATA = [\n\t\t\t\tcolumns.map((col) => __(is_query_report ? col.label : col.name)),\n\t\t\t\t...report.data\n\t\t\t\t\t.slice(0, 3)\n\t\t\t\t\t.map((row) =>\n\t\t\t\t\t\tcolumns.map((col) => row[is_query_report ? col.fieldname : col.field])\n\t\t\t\t\t),\n\t\t\t];\n\n\t\t\tdialog.set_value(\n\t\t\t\t\"csv_preview\",\n\t\t\t\tfrappe.report_utils.get_csv_preview(\n\t\t\t\t\tPREVIEW_DATA,\n\t\t\t\t\tdialog.get_value(\"csv_quoting\"),\n\t\t\t\t\tdialog.get_value(\"csv_delimiter\")\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\tdialog.fields_dict[\"file_format\"].df.onchange = () => update_csv_preview(dialog);\n\t\tdialog.fields_dict[\"csv_quoting\"].df.onchange = () => update_csv_preview(dialog);\n\t\tdialog.fields_dict[\"csv_delimiter\"].df.onchange = () => update_csv_preview(dialog);\n\n\t\treturn dialog;\n\t},\n\n\tget_csv_preview(data, quoting, delimiter) {\n\t\t// data: array of arrays\n\t\t// quoting: 0 - minimal, 1 - all, 2 - non-numeric, 3 - none\n\t\t// delimiter: any single character\n\t\tquoting = cint(quoting);\n\t\tconst QUOTING = {\n\t\t\tMinimal: 0,\n\t\t\tAll: 1,\n\t\t\tNonNumeric: 2,\n\t\t\tNone: 3,\n\t\t};\n\n\t\tif (delimiter.length > 1) {\n\t\t\tfrappe.throw(__(\"Delimiter must be a single character\"));\n\t\t}\n\n\t\tif (0 > quoting || quoting > 3) {\n\t\t\tfrappe.throw(__(\"Quoting must be between 0 and 3\"));\n\t\t}\n\n\t\treturn data\n\t\t\t.map((row) => {\n\t\t\t\treturn row\n\t\t\t\t\t.map((col) => {\n\t\t\t\t\t\tif (typeof col == \"string\" && col.includes('\"')) {\n\t\t\t\t\t\t\tcol = col.replace(/\"/g, '\"\"');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tswitch (quoting) {\n\t\t\t\t\t\t\tcase QUOTING.Minimal:\n\t\t\t\t\t\t\t\treturn typeof col === \"string\" && col.includes(delimiter)\n\t\t\t\t\t\t\t\t\t? `\"${col}\"`\n\t\t\t\t\t\t\t\t\t: `${col}`;\n\t\t\t\t\t\t\tcase QUOTING.All:\n\t\t\t\t\t\t\t\treturn `\"${col}\"`;\n\t\t\t\t\t\t\tcase QUOTING.NonNumeric:\n\t\t\t\t\t\t\t\treturn isNaN(col) ? `\"${col}\"` : `${col}`;\n\t\t\t\t\t\t\tcase QUOTING.None:\n\t\t\t\t\t\t\t\treturn `${col}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.join(delimiter);\n\t\t\t})\n\t\t\t.join(\"\\n\");\n\t},\n};\n"],
  "mappings": "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",
  "names": ["require_Sortable_min", "__commonJSMin", "exports", "module", "t", "e", "n", "o", "M", "i", "a", "r", "l", "y", "w", "s", "u", "c", "d", "h", "f", "p", "N", "g", "m", "I", "P", "v", "b", "O", "k", "R", "A", "X", "Bt", "Y", "B", "E", "D", "S", "F", "_", "C", "T", "j", "x", "H", "L", "K", "W", "z", "G", "q", "V", "Z", "$", "Q", "J", "tt", "et", "pt", "lt", "nt", "it", "ot", "rt", "kt", "Rt", "U", "at", "st", "ct", "ut", "dt", "ht", "ft", "gt", "mt", "vt", "bt", "yt", "wt", "Et", "Dt", "St", "_t", "Ct", "Tt", "xt", "Ot", "At", "Mt", "Nt", "It", "Pt", "Xt", "Yt", "Ft", "jt", "Ht", "Lt", "Wt", "zt", "Gt", "Ut", "qt", "Vt", "Zt", "$t", "Qt", "Jt", "te", "ee", "ne", "oe", "ie", "re", "ae", "le", "se", "ce", "ue", "de", "he", "fe", "pe", "ge", "require_frappe_datatable_cjs", "__commonJSMin", "exports", "module", "_interopDefault", "ex", "Sortable", "$", "expr", "con", "tag", "o", "element", "val", "ref", "prop", "event", "selector", "callback", "handler", "e", "delegatedTarget", "target", "type", "properties", "evt", "j", "attrs", "attr", "elements", "styleMap", "styleProps", "el", "parentEl", "top", "left", "bottom", "right", "pTop", "pLeft", "pBottom", "pRight", "pixels", "getScrollBarSize", "scrollDiv", "scrollbarWidth", "text", "div", "isObject", "value", "isObject_1", "commonjsGlobal", "commonjsRequire", "unwrapExports", "x", "createCommonjsModule", "fn", "freeGlobal", "_freeGlobal", "freeSelf", "root", "_root", "now", "now_1", "Symbol", "_Symbol", "objectProto", "hasOwnProperty", "nativeObjectToString", "symToStringTag", "getRawTag", "isOwn", "result", "_getRawTag", "objectProto$1", "nativeObjectToString$1", "objectToString", "_objectToString", "nullTag", "undefinedTag", "symToStringTag$1", "baseGetTag", "_baseGetTag", "isObjectLike", "isObjectLike_1", "symbolTag", "isSymbol", "isSymbol_1", "NAN", "reTrim", "reIsBadHex", "reIsBinary", "reIsOctal", "freeParseInt", "toNumber", "other", "isBinary", "toNumber_1", "FUNC_ERROR_TEXT", "nativeMax", "nativeMin", "debounce", "func", "wait", "options", "lastArgs", "lastThis", "maxWait", "timerId", "lastCallTime", "lastInvokeTime", "leading", "maxing", "trailing", "invokeFunc", "time", "args", "thisArg", "leadingEdge", "timerExpired", "remainingWait", "timeSinceLastCall", "timeSinceLastInvoke", "timeWaiting", "shouldInvoke", "trailingEdge", "cancel", "flush", "debounced", "isInvoking", "debounce_1", "FUNC_ERROR_TEXT$1", "throttle", "throttle_1", "asyncTag", "funcTag", "genTag", "proxyTag", "isFunction", "isFunction_1", "coreJsData", "_coreJsData", "maskSrcKey", "uid", "isMasked", "_isMasked", "funcProto", "funcToString", "toSource", "_toSource", "reRegExpChar", "reIsHostCtor", "funcProto$1", "objectProto$2", "funcToString$1", "hasOwnProperty$1", "reIsNative", "baseIsNative", "pattern", "_baseIsNative", "getValue", "object", "key", "_getValue", "getNative", "_getNative", "nativeCreate", "_nativeCreate", "hashClear", "_hashClear", "hashDelete", "_hashDelete", "HASH_UNDEFINED", "objectProto$3", "hasOwnProperty$2", "hashGet", "data", "_hashGet", "objectProto$4", "hasOwnProperty$3", "hashHas", "_hashHas", "HASH_UNDEFINED$1", "hashSet", "_hashSet", "Hash", "entries", "index", "length", "entry", "_Hash", "listCacheClear", "_listCacheClear", "eq", "eq_1", "assocIndexOf", "array", "_assocIndexOf", "arrayProto", "splice", "listCacheDelete", "lastIndex", "_listCacheDelete", "listCacheGet", "_listCacheGet", "listCacheHas", "_listCacheHas", "listCacheSet", "_listCacheSet", "ListCache", "_ListCache", "Map", "_Map", "mapCacheClear", "_mapCacheClear", "isKeyable", "_isKeyable", "getMapData", "map", "_getMapData", "mapCacheDelete", "_mapCacheDelete", "mapCacheGet", "_mapCacheGet", "mapCacheHas", "_mapCacheHas", "mapCacheSet", "size", "_mapCacheSet", "MapCache", "_MapCache", "HASH_UNDEFINED$2", "setCacheAdd", "_setCacheAdd", "setCacheHas", "_setCacheHas", "SetCache", "values", "_SetCache", "baseFindIndex", "predicate", "fromIndex", "fromRight", "_baseFindIndex", "baseIsNaN", "_baseIsNaN", "strictIndexOf", "_strictIndexOf", "baseIndexOf", "_baseIndexOf", "arrayIncludes", "_arrayIncludes", "arrayIncludesWith", "comparator", "_arrayIncludesWith", "cacheHas", "cache", "_cacheHas", "Set", "_Set", "noop", "noop_1", "setToArray", "set", "_setToArray", "INFINITY", "createSet", "_createSet", "LARGE_ARRAY_SIZE", "baseUniq", "iteratee", "includes", "isCommon", "seen", "outer", "computed", "seenIndex", "_baseUniq", "uniq", "uniq_1", "camelCaseToDash", "str", "g", "makeDataAttributeString", "props", "_key", "copyTextToClipboard", "textArea", "err", "isNumeric", "throttle$1", "debounce$1", "nextTick", "context", "resolve", "out", "linkProperties", "source", "acc", "isSet", "notSet", "isNumber", "ensureArray", "uniq$1", "arr", "numberSortAsc", "a", "b", "stripHTML", "html", "format", "arg", "regex", "escapeHTML", "txt", "escapeHtmlMapping", "char", "DataManager", "columns", "col", "cell", "baseCell", "i", "content", "row0", "column", "cellValue", "d", "row", "meta", "nextRow", "baseRowCell", "DataError", "rows", "colIndex", "sortOrder", "aIndex", "bIndex", "aContent", "bContent", "srNoColIndex", "viewIndex", "temporary", "index1", "index2", "temp", "newCell1", "newCell2", "filter", "rowIndex", "_row", "newVal", "keyValPairs", "filters", "rowsToShow", "start", "end", "skipStandardColumns", "id", "parentRowIndex", "parentIndent", "childIndent", "name", "icons", "CellManager", "instance", "focusLastCell", "direction", "$cell", "getNextSelectionCursor", "$selectionCursor", "noOfCellsCopied", "message", "mouseDown", "selectArea", "$toggle", "skipClearSelection", "skipDOMFocus", "skipScrollToCell", "isHeader", "header", "colHeaderSelector", "rowHeaderSelector", "colHeader", "rowHeader", "fCell", "$cell1", "$cell2", "cells", "colIndex1", "rowIndex1", "colIndex2", "rowIndex2", "cell1", "cell2", "rowIndices", "_rowIndex", "_colIndex", "$editCell", "editor", "submitValue", "parent", "$input", "promise", "valuePromise", "oldValue", "done", "curr", "total", "matrix", "it", "focusedCell", "refreshHtml", "flag", "$prevFocusedCell", "ret", "$aboveRow", "$belowRow", "isFilter", "isTotalRow", "dataAttr", "isBodyCell", "editCellHTML", "sortIndicator", "resizeColumn", "dropdown", "customFormatter", "contentHTML", "addToggle", "leftPadding", "unit", "padding", "toggleHTML", "cellContentHTML", "textContent", "ColumnManager", "toggleClass", "dropdownClass", "deactivateDropdownOnBodyClick", "deactivateDropdown", "$item", "dropdownItems", "_this", "isDragging", "$resizingCell", "startWidth", "startX", "$handle", "onMouseup", "onMouseMove", "delta", "finalWidth", "longestCell", "$longestCellHTML", "$div", "cellText", "borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight", "sum", "width", "$parent", "oldIndex", "newIndex", "$draggedCell", "nextSortOrder", "removedCol", "showFilter", "input", "columnsToSort", "columnWidth", "styles", "$column", "dropdownButton", "RowManager", "$checkbox", "checked", "toggle", "f", "c", "count", "$row", "childrenToShow", "visibleRowIndices", "rowsToHide", "depth", "rowsToOpen", "rowsToClose", "height", "rowsInView", "offset", "rowIdentifier", "title", "hyperlist", "t", "n", "r", "s", "u", "l", "_dereq_", "_createClass", "defineProperties", "descriptor", "Constructor", "protoProps", "staticProps", "_classCallCheck", "defaultConfig", "HyperList", "userProvidedConfig", "style", "wrapper", "fixture", "maxElementHeight", "config", "render", "scrollTop", "lastRepaint", "rendered", "_this2", "scroller", "isValueNumber", "isValuePercent", "msg", "numberValue", "elementStyle", "scrollerHeight", "scrollerStyle", "item", "oldClass", "force", "from", "to", "fragment", "reverse", "_this3", "scrollHeight", "sortedItemHeights", "middle", "averageHeight", "containerHeight", "BodyRenderer", "rowViewOrder", "computedStyle", "rowHTML", "totalRow", "columnValues", "prevRow", "prevCell", "hideAfter", "Style", "styleEl", "styleObject", "prefixedSelector", "styleString", "ruleString", "rule", "dashed", "$headerCell", "naturalWidth", "totalWidth", "rowIndexColumn", "totalParts", "onePart", "wrapperWidth", "firstRow", "firstRowWidth", "headerRow", "resizableColumns", "deltaWidth", "bodyWidth", "rowWidth", "bodyHeight", "hasHorizontalOverflow", "rowCount", "KEYCODES", "Keyboard", "listeners", "listener", "preventBubbling", "k", "en", "de", "fr", "getTranslations", "TranslationManager", "language", "translations", "sourceText", "translation", "filterRows", "filteredRowIndices", "keyword", "guessFilter", "filterMethod", "getFilterMethod", "allData", "getFormattedValue", "formatter", "rowData", "stringCompareValue", "numberCompareValue", "getCompareValues", "compareValues", "float", "hay", "needle", "compareValue", "keywordValue", "rangeValues", "values1", "values2", "number", "string", "hayNumber", "hayString", "compareString", "v", "getDefaultOptions", "column1", "column2", "defaultComponents", "DataTable", "components", "Style$$1", "Keyboard$$1", "DataManager$$1", "RowManager$$1", "ColumnManager$$1", "CellManager$$1", "BodyRenderer$$1", "eventName", "handlers", "version", "description", "main", "unpkg", "jsdelivr", "scripts", "files", "devDependencies", "repository", "keywords", "author", "license", "bugs", "homepage", "dependencies", "packageJson", "route", "_route", "import_frappe_datatable", "DataTable", "route", "doc", "_a", "data", "message", "args", "current_settings", "report_settings", "r", "force", "$list_count", "str", "flash_row", "d", "to_refresh", "i", "fieldname", "cdt", "_field", "cdt_row", "key", "a", "cdoc", "_flash_row", "rowIndex", "$row", "new_row", "values", "column", "column1", "column2", "checked_items", "datatabe_col", "columns_in_picker", "columns", "df", "insert_before", "col", "doctype", "index", "x_fields", "y_fields", "defaults", "dialog", "x_axis", "y_axes", "chart_type", "datasets", "y_axis", "get_df", "field", "value", "colIndex", "parent", "control", "cell", "docname", "updated_doc", "_data", "b", "resolve", "reject", "f", "add_field", "fields", "table_fields", "fields_already_in_table", "fields_to_add", "column_name", "cdt_name_fields", "col_index", "field_label", "col1", "col2", "index1", "index2", "_fields", "temp", "out", "standard_fields_filter", "doctype_fields", "std_fields", "has_status_values", "child_table_fields", "dialog_fields", "column_widths", "c", "docfield", "title", "editable", "align", "id", "width", "compareFn", "keyword", "keywordValue", "row", "acc", "curr", "totals", "totals_row", "formatted_value", "cell_value", "cdt_field", "name", "status", "dependent_col", "only_docnames", "items", "save_type", "_save_report", "response", "filters", "condition", "label", "row_totals", "rows_in_order", "total_data", "print_settings", "selected_items", "extra_fields", "can_edit_or_delete", "action", "method", "search_params", "config", "e", "import_frappe_datatable", "DataTable", "wrapper", "tasks", "fn", "query_params", "field", "value", "_idx", "full_url", "data", "alert_message", "action_name", "action", "route_options", "show", "field_options", "dashboard_field", "set_standard", "dialog", "values", "dashboard_name", "card_name", "args", "chart_args", "chart_name", "key", "x_field_title", "y_field_title", "f", "method", "name", "doctype", "message", "dashboard_route_html", "doc", "resolve", "reject", "settings", "custom_report_name", "report_script_name", "seconds_elapsed", "execution_time", "filter", "expression", "filter_label", "out", "e", "filters", "filter_area", "df", "current_filters", "fields", "promises", "have_filters_changed", "are_default_filters", "res", "r", "filters_from_report", "summary", "query_string", "pretty_diff", "part1", "part2", "part3", "primary_action", "disable", "reports", "route", "report_link_html", "no_of_reports_html", "warning_message", "get_item_html", "item", "d", "columns", "col", "datatable_options", "loading_state", "options", "me", "set_chart_values", "preview_chart", "x_field_label", "y_field_label", "column", "format_cell", "row", "index", "datatable", "compareFn", "cell", "keyword", "keywordValue", "row_obj", "i", "id", "raise", "missing_mandatory", "v", "acc", "fieldname", "field_value_map", "arr", "ref_doctype", "file_format", "print_settings", "custom_format", "filters_html", "landscape", "base_url", "print_css", "applied_filters", "template", "content", "html", "filter_values", "name_len", "docfield", "extra_fields", "include_indentation", "include_filters", "csv_delimiter", "csv_quoting", "boolean_labels", "visible_idx", "rows", "standard_column_count", "_a", "_b", "totalRow", "items", "a", "b", "custom_columns", "insert_after_index", "custom_data", "link_field", "description", "custom_column", "new_column_data", "column_field", "doctypes", "dynamic_links", "dynamic_doctypes", "doc_field_pair", "page_form", "status_message", "execution_time_msg", "flag", "only_docnames", "report_view", "sql_aggregate_functions", "group_by_template", "e", "fn", "doctype", "field", "field_label", "option_text", "show", "settings", "get_fieldname", "name", "get_doctype", "aggregate_on_doctype", "args", "f", "docfield", "excluded_fields", "standard_fields", "df", "fields", "a", "b", "standard_fields_filter", "cdt", "child_table_fields", "group_by_applied", "button_label", "_a", "columns", "raw_data", "y_fields", "x_field", "chart_type", "colors", "height", "type", "rows", "value", "labels", "get_column_values", "datasets", "y_field", "d", "dataset", "column_name", "column_index", "column", "row", "data", "indices", "col", "accumulator", "current_value", "current_index", "get_options", "fields", "field", "numeric_fields", "i", "non_numeric_fields", "numeric_field_options", "non_numeric_field_options", "label", "fieldtype", "width", "options", "report_name", "filters", "r", "f", "v", "acc", "fn", "values", "min", "val", "a", "b", "extra_fields", "callback", "dialog", "update_csv_preview", "is_query_report", "report", "PREVIEW_DATA", "quoting", "delimiter", "QUOTING"]
}

(()=>{var tp=Object.create;var mn=Object.defineProperty,rp=Object.defineProperties,ip=Object.getOwnPropertyDescriptor,np=Object.getOwnPropertyDescriptors,op=Object.getOwnPropertyNames,qs=Object.getOwnPropertySymbols,sp=Object.getPrototypeOf,Us=Object.prototype.hasOwnProperty,ap=Object.prototype.propertyIsEnumerable;var Ws=(r,t,e)=>t in r?mn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Ue=(r,t)=>{for(var e in t||(t={}))Us.call(t,e)&&Ws(r,e,t[e]);if(qs)for(var e of qs(t))ap.call(t,e)&&Ws(r,e,t[e]);return r},mt=(r,t)=>rp(r,np(t));var di=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(t,e)=>(typeof require!="undefined"?require:t)[e]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var _e=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),lp=(r,t)=>{for(var e in t)mn(r,e,{get:t[e],enumerable:!0})},cp=(r,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of op(t))!Us.call(r,n)&&n!==e&&mn(r,n,{get:()=>t[n],enumerable:!(i=ip(t,n))||i.enumerable});return r};var Gt=(r,t,e)=>(e=r!=null?tp(sp(r)):{},cp(t||!r||!r.__esModule?mn(e,"default",{value:r,enumerable:!0}):e,r));var La=_e(($3,$a)=>{"use strict";var Oa=Array.isArray,Ma=Object.keys,Ip=Object.prototype.hasOwnProperty;$a.exports=function r(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var i=Oa(t),n=Oa(e),o,s,a;if(i&&n){if(s=t.length,s!=e.length)return!1;for(o=s;o--!==0;)if(!r(t[o],e[o]))return!1;return!0}if(i!=n)return!1;var l=t instanceof Date,u=e instanceof Date;if(l!=u)return!1;if(l&&u)return t.getTime()==e.getTime();var d=t instanceof RegExp,p=e instanceof RegExp;if(d!=p)return!1;if(d&&p)return t.toString()==e.toString();var g=Ma(t);if(s=g.length,s!==Ma(e).length)return!1;for(o=s;o--!==0;)if(!Ip.call(e,g[o]))return!1;for(o=s;o--!==0;)if(a=g[o],!r(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}});var Aa=_e((B3,Ba)=>{function Pp(){this.__data__=[],this.size=0}Ba.exports=Pp});var So=_e((A3,Ia)=>{function Rp(r,t){return r===t||r!==r&&t!==t}Ia.exports=Rp});var Si=_e((I3,Pa)=>{var jp=So();function Np(r,t){for(var e=r.length;e--;)if(jp(r[e][0],t))return e;return-1}Pa.exports=Np});var ja=_e((P3,Ra)=>{var Dp=Si(),Fp=Array.prototype,zp=Fp.splice;function Hp(r){var t=this.__data__,e=Dp(t,r);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():zp.call(t,e,1),--this.size,!0}Ra.exports=Hp});var Da=_e((R3,Na)=>{var qp=Si();function Wp(r){var t=this.__data__,e=qp(t,r);return e<0?void 0:t[e][1]}Na.exports=Wp});var za=_e((j3,Fa)=>{var Up=Si();function Vp(r){return Up(this.__data__,r)>-1}Fa.exports=Vp});var qa=_e((N3,Ha)=>{var Yp=Si();function Gp(r,t){var e=this.__data__,i=Yp(e,r);return i<0?(++this.size,e.push([r,t])):e[i][1]=t,this}Ha.exports=Gp});var Ti=_e((D3,Wa)=>{var Kp=Aa(),Xp=ja(),Jp=Da(),Zp=za(),Qp=qa();function Wr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}Wr.prototype.clear=Kp;Wr.prototype.delete=Xp;Wr.prototype.get=Jp;Wr.prototype.has=Zp;Wr.prototype.set=Qp;Wa.exports=Wr});var Va=_e((F3,Ua)=>{var eh=Ti();function th(){this.__data__=new eh,this.size=0}Ua.exports=th});var Ga=_e((z3,Ya)=>{function rh(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}Ya.exports=rh});var Xa=_e((H3,Ka)=>{function ih(r){return this.__data__.get(r)}Ka.exports=ih});var Za=_e((q3,Ja)=>{function nh(r){return this.__data__.has(r)}Ja.exports=nh});var To=_e((W3,Qa)=>{var oh=typeof global=="object"&&global&&global.Object===Object&&global;Qa.exports=oh});var Xt=_e((U3,el)=>{var sh=To(),ah=typeof self=="object"&&self&&self.Object===Object&&self,lh=sh||ah||Function("return this")();el.exports=lh});var $n=_e((V3,tl)=>{var ch=Xt(),uh=ch.Symbol;tl.exports=uh});var ol=_e((Y3,nl)=>{var rl=$n(),il=Object.prototype,dh=il.hasOwnProperty,fh=il.toString,Ei=rl?rl.toStringTag:void 0;function ph(r){var t=dh.call(r,Ei),e=r[Ei];try{r[Ei]=void 0;var i=!0}catch(o){}var n=fh.call(r);return i&&(t?r[Ei]=e:delete r[Ei]),n}nl.exports=ph});var al=_e((G3,sl)=>{var hh=Object.prototype,_h=hh.toString;function gh(r){return _h.call(r)}sl.exports=gh});var Oi=_e((K3,ul)=>{var ll=$n(),mh=ol(),vh=al(),bh="[object Null]",yh="[object Undefined]",cl=ll?ll.toStringTag:void 0;function wh(r){return r==null?r===void 0?yh:bh:cl&&cl in Object(r)?mh(r):vh(r)}ul.exports=wh});var Ur=_e((X3,dl)=>{function kh(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}dl.exports=kh});var Eo=_e((J3,fl)=>{var xh=Oi(),Ch=Ur(),Sh="[object AsyncFunction]",Th="[object Function]",Eh="[object GeneratorFunction]",Oh="[object Proxy]";function Mh(r){if(!Ch(r))return!1;var t=xh(r);return t==Th||t==Eh||t==Sh||t==Oh}fl.exports=Mh});var hl=_e((Z3,pl)=>{var $h=Xt(),Lh=$h["__core-js_shared__"];pl.exports=Lh});var ml=_e((Q3,gl)=>{var Oo=hl(),_l=function(){var r=/[^.]+$/.exec(Oo&&Oo.keys&&Oo.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function Bh(r){return!!_l&&_l in r}gl.exports=Bh});var Mo=_e((eC,vl)=>{var Ah=Function.prototype,Ih=Ah.toString;function Ph(r){if(r!=null){try{return Ih.call(r)}catch(t){}try{return r+""}catch(t){}}return""}vl.exports=Ph});var yl=_e((tC,bl)=>{var Rh=Eo(),jh=ml(),Nh=Ur(),Dh=Mo(),Fh=/[\\^$.*+?()[\]{}|]/g,zh=/^\[object .+?Constructor\]$/,Hh=Function.prototype,qh=Object.prototype,Wh=Hh.toString,Uh=qh.hasOwnProperty,Vh=RegExp("^"+Wh.call(Uh).replace(Fh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Yh(r){if(!Nh(r)||jh(r))return!1;var t=Rh(r)?Vh:zh;return t.test(Dh(r))}bl.exports=Yh});var kl=_e((rC,wl)=>{function Gh(r,t){return r==null?void 0:r[t]}wl.exports=Gh});var xr=_e((iC,xl)=>{var Kh=yl(),Xh=kl();function Jh(r,t){var e=Xh(r,t);return Kh(e)?e:void 0}xl.exports=Jh});var Ln=_e((nC,Cl)=>{var Zh=xr(),Qh=Xt(),e_=Zh(Qh,"Map");Cl.exports=e_});var Mi=_e((oC,Sl)=>{var t_=xr(),r_=t_(Object,"create");Sl.exports=r_});var Ol=_e((sC,El)=>{var Tl=Mi();function i_(){this.__data__=Tl?Tl(null):{},this.size=0}El.exports=i_});var $l=_e((aC,Ml)=>{function n_(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}Ml.exports=n_});var Bl=_e((lC,Ll)=>{var o_=Mi(),s_="__lodash_hash_undefined__",a_=Object.prototype,l_=a_.hasOwnProperty;function c_(r){var t=this.__data__;if(o_){var e=t[r];return e===s_?void 0:e}return l_.call(t,r)?t[r]:void 0}Ll.exports=c_});var Il=_e((cC,Al)=>{var u_=Mi(),d_=Object.prototype,f_=d_.hasOwnProperty;function p_(r){var t=this.__data__;return u_?t[r]!==void 0:f_.call(t,r)}Al.exports=p_});var Rl=_e((uC,Pl)=>{var h_=Mi(),g_="__lodash_hash_undefined__";function m_(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=h_&&t===void 0?g_:t,this}Pl.exports=m_});var Nl=_e((dC,jl)=>{var v_=Ol(),b_=$l(),y_=Bl(),w_=Il(),k_=Rl();function Vr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}Vr.prototype.clear=v_;Vr.prototype.delete=b_;Vr.prototype.get=y_;Vr.prototype.has=w_;Vr.prototype.set=k_;jl.exports=Vr});var zl=_e((fC,Fl)=>{var Dl=Nl(),x_=Ti(),C_=Ln();function S_(){this.size=0,this.__data__={hash:new Dl,map:new(C_||x_),string:new Dl}}Fl.exports=S_});var ql=_e((pC,Hl)=>{function T_(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}Hl.exports=T_});var $i=_e((hC,Wl)=>{var E_=ql();function O_(r,t){var e=r.__data__;return E_(t)?e[typeof t=="string"?"string":"hash"]:e.map}Wl.exports=O_});var Vl=_e((_C,Ul)=>{var M_=$i();function $_(r){var t=M_(this,r).delete(r);return this.size-=t?1:0,t}Ul.exports=$_});var Gl=_e((gC,Yl)=>{var L_=$i();function B_(r){return L_(this,r).get(r)}Yl.exports=B_});var Xl=_e((mC,Kl)=>{var A_=$i();function I_(r){return A_(this,r).has(r)}Kl.exports=I_});var Zl=_e((vC,Jl)=>{var P_=$i();function R_(r,t){var e=P_(this,r),i=e.size;return e.set(r,t),this.size+=e.size==i?0:1,this}Jl.exports=R_});var ec=_e((bC,Ql)=>{var j_=zl(),N_=Vl(),D_=Gl(),F_=Xl(),z_=Zl();function Yr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}Yr.prototype.clear=j_;Yr.prototype.delete=N_;Yr.prototype.get=D_;Yr.prototype.has=F_;Yr.prototype.set=z_;Ql.exports=Yr});var rc=_e((yC,tc)=>{var H_=Ti(),q_=Ln(),W_=ec(),U_=200;function V_(r,t){var e=this.__data__;if(e instanceof H_){var i=e.__data__;if(!q_||i.length<U_-1)return i.push([r,t]),this.size=++e.size,this;e=this.__data__=new W_(i)}return e.set(r,t),this.size=e.size,this}tc.exports=V_});var nc=_e((wC,ic)=>{var Y_=Ti(),G_=Va(),K_=Ga(),X_=Xa(),J_=Za(),Z_=rc();function Gr(r){var t=this.__data__=new Y_(r);this.size=t.size}Gr.prototype.clear=G_;Gr.prototype.delete=K_;Gr.prototype.get=X_;Gr.prototype.has=J_;Gr.prototype.set=Z_;ic.exports=Gr});var sc=_e((kC,oc)=>{function Q_(r,t){for(var e=-1,i=r==null?0:r.length;++e<i&&t(r[e],e,r)!==!1;);return r}oc.exports=Q_});var lc=_e((xC,ac)=>{var eg=xr(),tg=function(){try{var r=eg(Object,"defineProperty");return r({},"",{}),r}catch(t){}}();ac.exports=tg});var $o=_e((CC,uc)=>{var cc=lc();function rg(r,t,e){t=="__proto__"&&cc?cc(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}uc.exports=rg});var Lo=_e((SC,dc)=>{var ig=$o(),ng=So(),og=Object.prototype,sg=og.hasOwnProperty;function ag(r,t,e){var i=r[t];(!(sg.call(r,t)&&ng(i,e))||e===void 0&&!(t in r))&&ig(r,t,e)}dc.exports=ag});var Li=_e((TC,fc)=>{var lg=Lo(),cg=$o();function ug(r,t,e,i){var n=!e;e||(e={});for(var o=-1,s=t.length;++o<s;){var a=t[o],l=i?i(e[a],r[a],a,e,r):void 0;l===void 0&&(l=r[a]),n?cg(e,a,l):lg(e,a,l)}return e}fc.exports=ug});var hc=_e((EC,pc)=>{function dg(r,t){for(var e=-1,i=Array(r);++e<r;)i[e]=t(e);return i}pc.exports=dg});var Kr=_e((OC,_c)=>{function fg(r){return r!=null&&typeof r=="object"}_c.exports=fg});var mc=_e((MC,gc)=>{var pg=Oi(),hg=Kr(),_g="[object Arguments]";function gg(r){return hg(r)&&pg(r)==_g}gc.exports=gg});var wc=_e(($C,yc)=>{var vc=mc(),mg=Kr(),bc=Object.prototype,vg=bc.hasOwnProperty,bg=bc.propertyIsEnumerable,yg=vc(function(){return arguments}())?vc:function(r){return mg(r)&&vg.call(r,"callee")&&!bg.call(r,"callee")};yc.exports=yg});var Bn=_e((LC,kc)=>{var wg=Array.isArray;kc.exports=wg});var Cc=_e((BC,xc)=>{function kg(){return!1}xc.exports=kg});var Bo=_e((Bi,Xr)=>{var xg=Xt(),Cg=Cc(),Ec=typeof Bi=="object"&&Bi&&!Bi.nodeType&&Bi,Sc=Ec&&typeof Xr=="object"&&Xr&&!Xr.nodeType&&Xr,Sg=Sc&&Sc.exports===Ec,Tc=Sg?xg.Buffer:void 0,Tg=Tc?Tc.isBuffer:void 0,Eg=Tg||Cg;Xr.exports=Eg});var Mc=_e((AC,Oc)=>{var Og=9007199254740991,Mg=/^(?:0|[1-9]\d*)$/;function $g(r,t){var e=typeof r;return t=t==null?Og:t,!!t&&(e=="number"||e!="symbol"&&Mg.test(r))&&r>-1&&r%1==0&&r<t}Oc.exports=$g});var Ao=_e((IC,$c)=>{var Lg=9007199254740991;function Bg(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Lg}$c.exports=Bg});var Bc=_e((PC,Lc)=>{var Ag=Oi(),Ig=Ao(),Pg=Kr(),Rg="[object Arguments]",jg="[object Array]",Ng="[object Boolean]",Dg="[object Date]",Fg="[object Error]",zg="[object Function]",Hg="[object Map]",qg="[object Number]",Wg="[object Object]",Ug="[object RegExp]",Vg="[object Set]",Yg="[object String]",Gg="[object WeakMap]",Kg="[object ArrayBuffer]",Xg="[object DataView]",Jg="[object Float32Array]",Zg="[object Float64Array]",Qg="[object Int8Array]",em="[object Int16Array]",tm="[object Int32Array]",rm="[object Uint8Array]",im="[object Uint8ClampedArray]",nm="[object Uint16Array]",om="[object Uint32Array]",it={};it[Jg]=it[Zg]=it[Qg]=it[em]=it[tm]=it[rm]=it[im]=it[nm]=it[om]=!0;it[Rg]=it[jg]=it[Kg]=it[Ng]=it[Xg]=it[Dg]=it[Fg]=it[zg]=it[Hg]=it[qg]=it[Wg]=it[Ug]=it[Vg]=it[Yg]=it[Gg]=!1;function sm(r){return Pg(r)&&Ig(r.length)&&!!it[Ag(r)]}Lc.exports=sm});var An=_e((RC,Ac)=>{function am(r){return function(t){return r(t)}}Ac.exports=am});var In=_e((Ai,Jr)=>{var lm=To(),Ic=typeof Ai=="object"&&Ai&&!Ai.nodeType&&Ai,Ii=Ic&&typeof Jr=="object"&&Jr&&!Jr.nodeType&&Jr,cm=Ii&&Ii.exports===Ic,Io=cm&&lm.process,um=function(){try{var r=Ii&&Ii.require&&Ii.require("util").types;return r||Io&&Io.binding&&Io.binding("util")}catch(t){}}();Jr.exports=um});var Nc=_e((jC,jc)=>{var dm=Bc(),fm=An(),Pc=In(),Rc=Pc&&Pc.isTypedArray,pm=Rc?fm(Rc):dm;jc.exports=pm});var Po=_e((NC,Dc)=>{var hm=hc(),_m=wc(),gm=Bn(),mm=Bo(),vm=Mc(),bm=Nc(),ym=Object.prototype,wm=ym.hasOwnProperty;function km(r,t){var e=gm(r),i=!e&&_m(r),n=!e&&!i&&mm(r),o=!e&&!i&&!n&&bm(r),s=e||i||n||o,a=s?hm(r.length,String):[],l=a.length;for(var u in r)(t||wm.call(r,u))&&!(s&&(u=="length"||n&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||vm(u,l)))&&a.push(u);return a}Dc.exports=km});var Pn=_e((DC,Fc)=>{var xm=Object.prototype;function Cm(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||xm;return r===e}Fc.exports=Cm});var Ro=_e((FC,zc)=>{function Sm(r,t){return function(e){return r(t(e))}}zc.exports=Sm});var qc=_e((zC,Hc)=>{var Tm=Ro(),Em=Tm(Object.keys,Object);Hc.exports=Em});var Uc=_e((HC,Wc)=>{var Om=Pn(),Mm=qc(),$m=Object.prototype,Lm=$m.hasOwnProperty;function Bm(r){if(!Om(r))return Mm(r);var t=[];for(var e in Object(r))Lm.call(r,e)&&e!="constructor"&&t.push(e);return t}Wc.exports=Bm});var jo=_e((qC,Vc)=>{var Am=Eo(),Im=Ao();function Pm(r){return r!=null&&Im(r.length)&&!Am(r)}Vc.exports=Pm});var Rn=_e((WC,Yc)=>{var Rm=Po(),jm=Uc(),Nm=jo();function Dm(r){return Nm(r)?Rm(r):jm(r)}Yc.exports=Dm});var Kc=_e((UC,Gc)=>{var Fm=Li(),zm=Rn();function Hm(r,t){return r&&Fm(t,zm(t),r)}Gc.exports=Hm});var Jc=_e((VC,Xc)=>{function qm(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}Xc.exports=qm});var Qc=_e((YC,Zc)=>{var Wm=Ur(),Um=Pn(),Vm=Jc(),Ym=Object.prototype,Gm=Ym.hasOwnProperty;function Km(r){if(!Wm(r))return Vm(r);var t=Um(r),e=[];for(var i in r)i=="constructor"&&(t||!Gm.call(r,i))||e.push(i);return e}Zc.exports=Km});var jn=_e((GC,eu)=>{var Xm=Po(),Jm=Qc(),Zm=jo();function Qm(r){return Zm(r)?Xm(r,!0):Jm(r)}eu.exports=Qm});var ru=_e((KC,tu)=>{var ev=Li(),tv=jn();function rv(r,t){return r&&ev(t,tv(t),r)}tu.exports=rv});var au=_e((Pi,Zr)=>{var iv=Xt(),su=typeof Pi=="object"&&Pi&&!Pi.nodeType&&Pi,iu=su&&typeof Zr=="object"&&Zr&&!Zr.nodeType&&Zr,nv=iu&&iu.exports===su,nu=nv?iv.Buffer:void 0,ou=nu?nu.allocUnsafe:void 0;function ov(r,t){if(t)return r.slice();var e=r.length,i=ou?ou(e):new r.constructor(e);return r.copy(i),i}Zr.exports=ov});var cu=_e((XC,lu)=>{function sv(r,t){var e=-1,i=r.length;for(t||(t=Array(i));++e<i;)t[e]=r[e];return t}lu.exports=sv});var du=_e((JC,uu)=>{function av(r,t){for(var e=-1,i=r==null?0:r.length,n=0,o=[];++e<i;){var s=r[e];t(s,e,r)&&(o[n++]=s)}return o}uu.exports=av});var No=_e((ZC,fu)=>{function lv(){return[]}fu.exports=lv});var Nn=_e((QC,hu)=>{var cv=du(),uv=No(),dv=Object.prototype,fv=dv.propertyIsEnumerable,pu=Object.getOwnPropertySymbols,pv=pu?function(r){return r==null?[]:(r=Object(r),cv(pu(r),function(t){return fv.call(r,t)}))}:uv;hu.exports=pv});var gu=_e((e8,_u)=>{var hv=Li(),_v=Nn();function gv(r,t){return hv(r,_v(r),t)}_u.exports=gv});var Do=_e((t8,mu)=>{function mv(r,t){for(var e=-1,i=t.length,n=r.length;++e<i;)r[n+e]=t[e];return r}mu.exports=mv});var Fo=_e((r8,vu)=>{var vv=Ro(),bv=vv(Object.getPrototypeOf,Object);vu.exports=bv});var zo=_e((i8,bu)=>{var yv=Do(),wv=Fo(),kv=Nn(),xv=No(),Cv=Object.getOwnPropertySymbols,Sv=Cv?function(r){for(var t=[];r;)yv(t,kv(r)),r=wv(r);return t}:xv;bu.exports=Sv});var wu=_e((n8,yu)=>{var Tv=Li(),Ev=zo();function Ov(r,t){return Tv(r,Ev(r),t)}yu.exports=Ov});var Ho=_e((o8,ku)=>{var Mv=Do(),$v=Bn();function Lv(r,t,e){var i=t(r);return $v(r)?i:Mv(i,e(r))}ku.exports=Lv});var Cu=_e((s8,xu)=>{var Bv=Ho(),Av=Nn(),Iv=Rn();function Pv(r){return Bv(r,Iv,Av)}xu.exports=Pv});var Tu=_e((a8,Su)=>{var Rv=Ho(),jv=zo(),Nv=jn();function Dv(r){return Rv(r,Nv,jv)}Su.exports=Dv});var Ou=_e((l8,Eu)=>{var Fv=xr(),zv=Xt(),Hv=Fv(zv,"DataView");Eu.exports=Hv});var $u=_e((c8,Mu)=>{var qv=xr(),Wv=Xt(),Uv=qv(Wv,"Promise");Mu.exports=Uv});var Bu=_e((u8,Lu)=>{var Vv=xr(),Yv=Xt(),Gv=Vv(Yv,"Set");Lu.exports=Gv});var Iu=_e((d8,Au)=>{var Kv=xr(),Xv=Xt(),Jv=Kv(Xv,"WeakMap");Au.exports=Jv});var Dn=_e((f8,zu)=>{var qo=Ou(),Wo=Ln(),Uo=$u(),Vo=Bu(),Yo=Iu(),Fu=Oi(),Qr=Mo(),Pu="[object Map]",Zv="[object Object]",Ru="[object Promise]",ju="[object Set]",Nu="[object WeakMap]",Du="[object DataView]",Qv=Qr(qo),eb=Qr(Wo),tb=Qr(Uo),rb=Qr(Vo),ib=Qr(Yo),Lr=Fu;(qo&&Lr(new qo(new ArrayBuffer(1)))!=Du||Wo&&Lr(new Wo)!=Pu||Uo&&Lr(Uo.resolve())!=Ru||Vo&&Lr(new Vo)!=ju||Yo&&Lr(new Yo)!=Nu)&&(Lr=function(r){var t=Fu(r),e=t==Zv?r.constructor:void 0,i=e?Qr(e):"";if(i)switch(i){case Qv:return Du;case eb:return Pu;case tb:return Ru;case rb:return ju;case ib:return Nu}return t});zu.exports=Lr});var qu=_e((p8,Hu)=>{var nb=Object.prototype,ob=nb.hasOwnProperty;function sb(r){var t=r.length,e=new r.constructor(t);return t&&typeof r[0]=="string"&&ob.call(r,"index")&&(e.index=r.index,e.input=r.input),e}Hu.exports=sb});var Uu=_e((h8,Wu)=>{var ab=Xt(),lb=ab.Uint8Array;Wu.exports=lb});var Fn=_e((_8,Yu)=>{var Vu=Uu();function cb(r){var t=new r.constructor(r.byteLength);return new Vu(t).set(new Vu(r)),t}Yu.exports=cb});var Ku=_e((g8,Gu)=>{var ub=Fn();function db(r,t){var e=t?ub(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}Gu.exports=db});var Ju=_e((m8,Xu)=>{var fb=/\w*$/;function pb(r){var t=new r.constructor(r.source,fb.exec(r));return t.lastIndex=r.lastIndex,t}Xu.exports=pb});var rd=_e((v8,td)=>{var Zu=$n(),Qu=Zu?Zu.prototype:void 0,ed=Qu?Qu.valueOf:void 0;function hb(r){return ed?Object(ed.call(r)):{}}td.exports=hb});var nd=_e((b8,id)=>{var _b=Fn();function gb(r,t){var e=t?_b(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}id.exports=gb});var sd=_e((y8,od)=>{var mb=Fn(),vb=Ku(),bb=Ju(),yb=rd(),wb=nd(),kb="[object Boolean]",xb="[object Date]",Cb="[object Map]",Sb="[object Number]",Tb="[object RegExp]",Eb="[object Set]",Ob="[object String]",Mb="[object Symbol]",$b="[object ArrayBuffer]",Lb="[object DataView]",Bb="[object Float32Array]",Ab="[object Float64Array]",Ib="[object Int8Array]",Pb="[object Int16Array]",Rb="[object Int32Array]",jb="[object Uint8Array]",Nb="[object Uint8ClampedArray]",Db="[object Uint16Array]",Fb="[object Uint32Array]";function zb(r,t,e){var i=r.constructor;switch(t){case $b:return mb(r);case kb:case xb:return new i(+r);case Lb:return vb(r,e);case Bb:case Ab:case Ib:case Pb:case Rb:case jb:case Nb:case Db:case Fb:return wb(r,e);case Cb:return new i;case Sb:case Ob:return new i(r);case Tb:return bb(r);case Eb:return new i;case Mb:return yb(r)}}od.exports=zb});var cd=_e((w8,ld)=>{var Hb=Ur(),ad=Object.create,qb=function(){function r(){}return function(t){if(!Hb(t))return{};if(ad)return ad(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}();ld.exports=qb});var dd=_e((k8,ud)=>{var Wb=cd(),Ub=Fo(),Vb=Pn();function Yb(r){return typeof r.constructor=="function"&&!Vb(r)?Wb(Ub(r)):{}}ud.exports=Yb});var pd=_e((x8,fd)=>{var Gb=Dn(),Kb=Kr(),Xb="[object Map]";function Jb(r){return Kb(r)&&Gb(r)==Xb}fd.exports=Jb});var md=_e((C8,gd)=>{var Zb=pd(),Qb=An(),hd=In(),_d=hd&&hd.isMap,ey=_d?Qb(_d):Zb;gd.exports=ey});var bd=_e((S8,vd)=>{var ty=Dn(),ry=Kr(),iy="[object Set]";function ny(r){return ry(r)&&ty(r)==iy}vd.exports=ny});var xd=_e((T8,kd)=>{var oy=bd(),sy=An(),yd=In(),wd=yd&&yd.isSet,ay=wd?sy(wd):oy;kd.exports=ay});var Od=_e((E8,Ed)=>{var ly=nc(),cy=sc(),uy=Lo(),dy=Kc(),fy=ru(),py=au(),hy=cu(),_y=gu(),gy=wu(),my=Cu(),vy=Tu(),by=Dn(),yy=qu(),wy=sd(),ky=dd(),xy=Bn(),Cy=Bo(),Sy=md(),Ty=Ur(),Ey=xd(),Oy=Rn(),My=jn(),$y=1,Ly=2,By=4,Cd="[object Arguments]",Ay="[object Array]",Iy="[object Boolean]",Py="[object Date]",Ry="[object Error]",Sd="[object Function]",jy="[object GeneratorFunction]",Ny="[object Map]",Dy="[object Number]",Td="[object Object]",Fy="[object RegExp]",zy="[object Set]",Hy="[object String]",qy="[object Symbol]",Wy="[object WeakMap]",Uy="[object ArrayBuffer]",Vy="[object DataView]",Yy="[object Float32Array]",Gy="[object Float64Array]",Ky="[object Int8Array]",Xy="[object Int16Array]",Jy="[object Int32Array]",Zy="[object Uint8Array]",Qy="[object Uint8ClampedArray]",e0="[object Uint16Array]",t0="[object Uint32Array]",rt={};rt[Cd]=rt[Ay]=rt[Uy]=rt[Vy]=rt[Iy]=rt[Py]=rt[Yy]=rt[Gy]=rt[Ky]=rt[Xy]=rt[Jy]=rt[Ny]=rt[Dy]=rt[Td]=rt[Fy]=rt[zy]=rt[Hy]=rt[qy]=rt[Zy]=rt[Qy]=rt[e0]=rt[t0]=!0;rt[Ry]=rt[Sd]=rt[Wy]=!1;function zn(r,t,e,i,n,o){var s,a=t&$y,l=t&Ly,u=t&By;if(e&&(s=n?e(r,i,n,o):e(r)),s!==void 0)return s;if(!Ty(r))return r;var d=xy(r);if(d){if(s=yy(r),!a)return hy(r,s)}else{var p=by(r),g=p==Sd||p==jy;if(Cy(r))return py(r,a);if(p==Td||p==Cd||g&&!n){if(s=l||g?{}:ky(r),!a)return l?gy(r,fy(s,r)):_y(r,dy(s,r))}else{if(!rt[p])return n?r:{};s=wy(r,p,a)}}o||(o=new ly);var m=o.get(r);if(m)return m;o.set(r,s),Ey(r)?r.forEach(function(v){s.add(zn(v,t,e,v,r,o))}):Sy(r)&&r.forEach(function(v,x){s.set(x,zn(v,t,e,x,r,o))});var k=u?l?vy:my:l?My:Oy,y=d?void 0:k(r);return cy(y||r,function(v,x){y&&(x=v,v=r[x]),uy(s,x,zn(v,t,e,x,r,o))}),s}Ed.exports=zn});var $d=_e((O8,Md)=>{var r0=Od(),i0=1,n0=4;function o0(r,t){return t=typeof t=="function"?t:void 0,r0(r,i0|n0,t)}Md.exports=o0});var Id=_e((z8,Ad)=>{(function(){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(e,i){return e<<i|e>>>32-i},rotr:function(e,i){return e<<32-i|e>>>i},endian:function(e){if(e.constructor==Number)return t.rotl(e,8)&16711935|t.rotl(e,24)&4278255360;for(var i=0;i<e.length;i++)e[i]=t.endian(e[i]);return e},randomBytes:function(e){for(var i=[];e>0;e--)i.push(Math.floor(Math.random()*256));return i},bytesToWords:function(e){for(var i=[],n=0,o=0;n<e.length;n++,o+=8)i[o>>>5]|=e[n]<<24-o%32;return i},wordsToBytes:function(e){for(var i=[],n=0;n<e.length*32;n+=8)i.push(e[n>>>5]>>>24-n%32&255);return i},bytesToHex:function(e){for(var i=[],n=0;n<e.length;n++)i.push((e[n]>>>4).toString(16)),i.push((e[n]&15).toString(16));return i.join("")},hexToBytes:function(e){for(var i=[],n=0;n<e.length;n+=2)i.push(parseInt(e.substr(n,2),16));return i},bytesToBase64:function(e){for(var i=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],s=0;s<4;s++)n*8+s*6<=e.length*8?i.push(r.charAt(o>>>6*(3-s)&63)):i.push("=");return i.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/ig,"");for(var i=[],n=0,o=0;n<e.length;o=++n%4)o!=0&&i.push((r.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<o*2|r.indexOf(e.charAt(n))>>>6-o*2);return i}};Ad.exports=t})()});var Ko=_e((H8,Pd)=>{var Go={utf8:{stringToBytes:function(r){return Go.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(Go.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var t=[],e=0;e<r.length;e++)t.push(r.charCodeAt(e)&255);return t},bytesToString:function(r){for(var t=[],e=0;e<r.length;e++)t.push(String.fromCharCode(r[e]));return t.join("")}}};Pd.exports=Go});var Nd=_e((q8,jd)=>{jd.exports=function(r){return r!=null&&(Rd(r)||f0(r)||!!r._isBuffer)};function Rd(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function f0(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Rd(r.slice(0,0))}});var Fd=_e((W8,Dd)=>{(function(){var r=Id(),t=Ko().utf8,e=Nd(),i=Ko().bin,n=function(o,s){o.constructor==String?s&&s.encoding==="binary"?o=i.stringToBytes(o):o=t.stringToBytes(o):e(o)?o=Array.prototype.slice.call(o,0):!Array.isArray(o)&&o.constructor!==Uint8Array&&(o=o.toString());for(var a=r.bytesToWords(o),l=o.length*8,u=1732584193,d=-271733879,p=-1732584194,g=271733878,m=0;m<a.length;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360;a[l>>>5]|=128<<l%32,a[(l+64>>>9<<4)+14]=l;for(var k=n._ff,y=n._gg,v=n._hh,x=n._ii,m=0;m<a.length;m+=16){var C=u,c=d,_=p,h=g;u=k(u,d,p,g,a[m+0],7,-680876936),g=k(g,u,d,p,a[m+1],12,-389564586),p=k(p,g,u,d,a[m+2],17,606105819),d=k(d,p,g,u,a[m+3],22,-1044525330),u=k(u,d,p,g,a[m+4],7,-176418897),g=k(g,u,d,p,a[m+5],12,1200080426),p=k(p,g,u,d,a[m+6],17,-1473231341),d=k(d,p,g,u,a[m+7],22,-45705983),u=k(u,d,p,g,a[m+8],7,1770035416),g=k(g,u,d,p,a[m+9],12,-1958414417),p=k(p,g,u,d,a[m+10],17,-42063),d=k(d,p,g,u,a[m+11],22,-1990404162),u=k(u,d,p,g,a[m+12],7,1804603682),g=k(g,u,d,p,a[m+13],12,-40341101),p=k(p,g,u,d,a[m+14],17,-1502002290),d=k(d,p,g,u,a[m+15],22,1236535329),u=y(u,d,p,g,a[m+1],5,-165796510),g=y(g,u,d,p,a[m+6],9,-1069501632),p=y(p,g,u,d,a[m+11],14,643717713),d=y(d,p,g,u,a[m+0],20,-373897302),u=y(u,d,p,g,a[m+5],5,-701558691),g=y(g,u,d,p,a[m+10],9,38016083),p=y(p,g,u,d,a[m+15],14,-660478335),d=y(d,p,g,u,a[m+4],20,-405537848),u=y(u,d,p,g,a[m+9],5,568446438),g=y(g,u,d,p,a[m+14],9,-1019803690),p=y(p,g,u,d,a[m+3],14,-187363961),d=y(d,p,g,u,a[m+8],20,1163531501),u=y(u,d,p,g,a[m+13],5,-1444681467),g=y(g,u,d,p,a[m+2],9,-51403784),p=y(p,g,u,d,a[m+7],14,1735328473),d=y(d,p,g,u,a[m+12],20,-1926607734),u=v(u,d,p,g,a[m+5],4,-378558),g=v(g,u,d,p,a[m+8],11,-2022574463),p=v(p,g,u,d,a[m+11],16,1839030562),d=v(d,p,g,u,a[m+14],23,-35309556),u=v(u,d,p,g,a[m+1],4,-1530992060),g=v(g,u,d,p,a[m+4],11,1272893353),p=v(p,g,u,d,a[m+7],16,-155497632),d=v(d,p,g,u,a[m+10],23,-1094730640),u=v(u,d,p,g,a[m+13],4,681279174),g=v(g,u,d,p,a[m+0],11,-358537222),p=v(p,g,u,d,a[m+3],16,-722521979),d=v(d,p,g,u,a[m+6],23,76029189),u=v(u,d,p,g,a[m+9],4,-640364487),g=v(g,u,d,p,a[m+12],11,-421815835),p=v(p,g,u,d,a[m+15],16,530742520),d=v(d,p,g,u,a[m+2],23,-995338651),u=x(u,d,p,g,a[m+0],6,-198630844),g=x(g,u,d,p,a[m+7],10,1126891415),p=x(p,g,u,d,a[m+14],15,-1416354905),d=x(d,p,g,u,a[m+5],21,-57434055),u=x(u,d,p,g,a[m+12],6,1700485571),g=x(g,u,d,p,a[m+3],10,-1894986606),p=x(p,g,u,d,a[m+10],15,-1051523),d=x(d,p,g,u,a[m+1],21,-2054922799),u=x(u,d,p,g,a[m+8],6,1873313359),g=x(g,u,d,p,a[m+15],10,-30611744),p=x(p,g,u,d,a[m+6],15,-1560198380),d=x(d,p,g,u,a[m+13],21,1309151649),u=x(u,d,p,g,a[m+4],6,-145523070),g=x(g,u,d,p,a[m+11],10,-1120210379),p=x(p,g,u,d,a[m+2],15,718787259),d=x(d,p,g,u,a[m+9],21,-343485551),u=u+C>>>0,d=d+c>>>0,p=p+_>>>0,g=g+h>>>0}return r.endian([u,d,p,g])};n._ff=function(o,s,a,l,u,d,p){var g=o+(s&a|~s&l)+(u>>>0)+p;return(g<<d|g>>>32-d)+s},n._gg=function(o,s,a,l,u,d,p){var g=o+(s&l|a&~l)+(u>>>0)+p;return(g<<d|g>>>32-d)+s},n._hh=function(o,s,a,l,u,d,p){var g=o+(s^a^l)+(u>>>0)+p;return(g<<d|g>>>32-d)+s},n._ii=function(o,s,a,l,u,d,p){var g=o+(a^(s|~l))+(u>>>0)+p;return(g<<d|g>>>32-d)+s},n._blocksize=16,n._digestsize=16,Dd.exports=function(o,s){if(o==null)throw new Error("Illegal argument "+o);var a=r.wordsToBytes(n(o,s));return s&&s.asBytes?a:s&&s.asString?i.bytesToString(a):r.bytesToHex(a)}})()});var Hd=_e((zd,Hn)=>{(function(){function r(c){"use strict";var _={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `\xAB\xAB\xAB` and `\xBB\xBB\xBB` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(c===!1)return JSON.parse(JSON.stringify(_));var h={};for(var b in _)_.hasOwnProperty(b)&&(h[b]=_[b].defaultValue);return h}function t(){"use strict";var c=r(!0),_={};for(var h in c)c.hasOwnProperty(h)&&(_[h]=!0);return _}var e={},i={},n={},o=r(!0),s="vanilla",a={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:r(!0),allOn:t()};e.helper={},e.extensions={},e.setOption=function(c,_){"use strict";return o[c]=_,this},e.getOption=function(c){"use strict";return o[c]},e.getOptions=function(){"use strict";return o},e.resetOptions=function(){"use strict";o=r(!0)},e.setFlavor=function(c){"use strict";if(!a.hasOwnProperty(c))throw Error(c+" flavor was not found");e.resetOptions();var _=a[c];s=c;for(var h in _)_.hasOwnProperty(h)&&(o[h]=_[h])},e.getFlavor=function(){"use strict";return s},e.getFlavorOptions=function(c){"use strict";if(a.hasOwnProperty(c))return a[c]},e.getDefaultOptions=function(c){"use strict";return r(c)},e.subParser=function(c,_){"use strict";if(e.helper.isString(c))if(typeof _!="undefined")i[c]=_;else{if(i.hasOwnProperty(c))return i[c];throw Error("SubParser named "+c+" not registered!")}},e.extension=function(c,_){"use strict";if(!e.helper.isString(c))throw Error("Extension 'name' must be a string");if(c=e.helper.stdExtName(c),e.helper.isUndefined(_)){if(!n.hasOwnProperty(c))throw Error("Extension named "+c+" is not registered!");return n[c]}else{typeof _=="function"&&(_=_()),e.helper.isArray(_)||(_=[_]);var h=l(_,c);if(h.valid)n[c]=_;else throw Error(h.error)}},e.getAllExtensions=function(){"use strict";return n},e.removeExtension=function(c){"use strict";delete n[c]},e.resetExtensions=function(){"use strict";n={}};function l(c,_){"use strict";var h=_?"Error in "+_+" extension->":"Error in unnamed extension",b={valid:!0,error:""};e.helper.isArray(c)||(c=[c]);for(var M=0;M<c.length;++M){var E=h+" sub-extension "+M+": ",w=c[M];if(typeof w!="object")return b.valid=!1,b.error=E+"must be an object, but "+typeof w+" given",b;if(!e.helper.isString(w.type))return b.valid=!1,b.error=E+'property "type" must be a string, but '+typeof w.type+" given",b;var S=w.type=w.type.toLowerCase();if(S==="language"&&(S=w.type="lang"),S==="html"&&(S=w.type="output"),S!=="lang"&&S!=="output"&&S!=="listener")return b.valid=!1,b.error=E+"type "+S+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',b;if(S==="listener"){if(e.helper.isUndefined(w.listeners))return b.valid=!1,b.error=E+'. Extensions of type "listener" must have a property called "listeners"',b}else if(e.helper.isUndefined(w.filter)&&e.helper.isUndefined(w.regex))return b.valid=!1,b.error=E+S+' extensions must define either a "regex" property or a "filter" method',b;if(w.listeners){if(typeof w.listeners!="object")return b.valid=!1,b.error=E+'"listeners" property must be an object but '+typeof w.listeners+" given",b;for(var O in w.listeners)if(w.listeners.hasOwnProperty(O)&&typeof w.listeners[O]!="function")return b.valid=!1,b.error=E+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+O+" must be a function but "+typeof w.listeners[O]+" given",b}if(w.filter){if(typeof w.filter!="function")return b.valid=!1,b.error=E+'"filter" must be a function, but '+typeof w.filter+" given",b}else if(w.regex){if(e.helper.isString(w.regex)&&(w.regex=new RegExp(w.regex,"g")),!(w.regex instanceof RegExp))return b.valid=!1,b.error=E+'"regex" property must either be a string or a RegExp object, but '+typeof w.regex+" given",b;if(e.helper.isUndefined(w.replace))return b.valid=!1,b.error=E+'"regex" extensions must implement a replace string or function',b}}return b}e.validateExtension=function(c){"use strict";var _=l(c,null);return _.valid?!0:(console.warn(_.error),!1)},e.hasOwnProperty("helper")||(e.helper={}),e.helper.isString=function(c){"use strict";return typeof c=="string"||c instanceof String},e.helper.isFunction=function(c){"use strict";var _={};return c&&_.toString.call(c)==="[object Function]"},e.helper.isArray=function(c){"use strict";return Array.isArray(c)},e.helper.isUndefined=function(c){"use strict";return typeof c=="undefined"},e.helper.forEach=function(c,_){"use strict";if(e.helper.isUndefined(c))throw new Error("obj param is required");if(e.helper.isUndefined(_))throw new Error("callback param is required");if(!e.helper.isFunction(_))throw new Error("callback param must be a function/closure");if(typeof c.forEach=="function")c.forEach(_);else if(e.helper.isArray(c))for(var h=0;h<c.length;h++)_(c[h],h,c);else if(typeof c=="object")for(var b in c)c.hasOwnProperty(b)&&_(c[b],b,c);else throw new Error("obj does not seem to be an array or an iterable object")},e.helper.stdExtName=function(c){"use strict";return c.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function u(c,_){"use strict";var h=_.charCodeAt(0);return"\xA8E"+h+"E"}e.helper.escapeCharactersCallback=u,e.helper.escapeCharacters=function(c,_,h){"use strict";var b="(["+_.replace(/([\[\]\\])/g,"\\$1")+"])";h&&(b="\\\\"+b);var M=new RegExp(b,"g");return c=c.replace(M,u),c},e.helper.unescapeHTMLEntities=function(c){"use strict";return c.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var d=function(c,_,h,b){"use strict";var M=b||"",E=M.indexOf("g")>-1,w=new RegExp(_+"|"+h,"g"+M.replace(/g/g,"")),S=new RegExp(_,M.replace(/g/g,"")),O=[],B,A,R,T,L;do for(B=0;R=w.exec(c);)if(S.test(R[0]))B++||(A=w.lastIndex,T=A-R[0].length);else if(B&&!--B){L=R.index+R[0].length;var P={left:{start:T,end:A},match:{start:A,end:R.index},right:{start:R.index,end:L},wholeMatch:{start:T,end:L}};if(O.push(P),!E)return O}while(B&&(w.lastIndex=A));return O};e.helper.matchRecursiveRegExp=function(c,_,h,b){"use strict";for(var M=d(c,_,h,b),E=[],w=0;w<M.length;++w)E.push([c.slice(M[w].wholeMatch.start,M[w].wholeMatch.end),c.slice(M[w].match.start,M[w].match.end),c.slice(M[w].left.start,M[w].left.end),c.slice(M[w].right.start,M[w].right.end)]);return E},e.helper.replaceRecursiveRegExp=function(c,_,h,b,M){"use strict";if(!e.helper.isFunction(_)){var E=_;_=function(){return E}}var w=d(c,h,b,M),S=c,O=w.length;if(O>0){var B=[];w[0].wholeMatch.start!==0&&B.push(c.slice(0,w[0].wholeMatch.start));for(var A=0;A<O;++A)B.push(_(c.slice(w[A].wholeMatch.start,w[A].wholeMatch.end),c.slice(w[A].match.start,w[A].match.end),c.slice(w[A].left.start,w[A].left.end),c.slice(w[A].right.start,w[A].right.end))),A<O-1&&B.push(c.slice(w[A].wholeMatch.end,w[A+1].wholeMatch.start));w[O-1].wholeMatch.end<c.length&&B.push(c.slice(w[O-1].wholeMatch.end)),S=B.join("")}return S},e.helper.regexIndexOf=function(c,_,h){"use strict";if(!e.helper.isString(c))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(_ instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var b=c.substring(h||0).search(_);return b>=0?b+(h||0):b},e.helper.splitAtIndex=function(c,_){"use strict";if(!e.helper.isString(c))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[c.substring(0,_),c.substring(_)]},e.helper.encodeEmailAddress=function(c){"use strict";var _=[function(h){return"&#"+h.charCodeAt(0)+";"},function(h){return"&#x"+h.charCodeAt(0).toString(16)+";"},function(h){return h}];return c=c.replace(/./g,function(h){if(h==="@")h=_[Math.floor(Math.random()*2)](h);else{var b=Math.random();h=b>.9?_[2](h):b>.45?_[1](h):_[0](h)}return h}),c},e.helper.padEnd=function(_,h,b){"use strict";return h=h>>0,b=String(b||" "),_.length>h?String(_):(h=h-_.length,h>b.length&&(b+=b.repeat(h/b.length)),String(_)+b.slice(0,h))},typeof console=="undefined"&&(console={warn:function(c){"use strict";alert(c)},log:function(c){"use strict";alert(c)},error:function(c){"use strict";throw c}}),e.helper.regexes={asteriskDashAndColon:/([*_:~])/g},e.helper.emojis={"+1":"\u{1F44D}","-1":"\u{1F44E}",100:"\u{1F4AF}",1234:"\u{1F522}","1st_place_medal":"\u{1F947}","2nd_place_medal":"\u{1F948}","3rd_place_medal":"\u{1F949}","8ball":"\u{1F3B1}",a:"\u{1F170}\uFE0F",ab:"\u{1F18E}",abc:"\u{1F524}",abcd:"\u{1F521}",accept:"\u{1F251}",aerial_tramway:"\u{1F6A1}",airplane:"\u2708\uFE0F",alarm_clock:"\u23F0",alembic:"\u2697\uFE0F",alien:"\u{1F47D}",ambulance:"\u{1F691}",amphora:"\u{1F3FA}",anchor:"\u2693\uFE0F",angel:"\u{1F47C}",anger:"\u{1F4A2}",angry:"\u{1F620}",anguished:"\u{1F627}",ant:"\u{1F41C}",apple:"\u{1F34E}",aquarius:"\u2652\uFE0F",aries:"\u2648\uFE0F",arrow_backward:"\u25C0\uFE0F",arrow_double_down:"\u23EC",arrow_double_up:"\u23EB",arrow_down:"\u2B07\uFE0F",arrow_down_small:"\u{1F53D}",arrow_forward:"\u25B6\uFE0F",arrow_heading_down:"\u2935\uFE0F",arrow_heading_up:"\u2934\uFE0F",arrow_left:"\u2B05\uFE0F",arrow_lower_left:"\u2199\uFE0F",arrow_lower_right:"\u2198\uFE0F",arrow_right:"\u27A1\uFE0F",arrow_right_hook:"\u21AA\uFE0F",arrow_up:"\u2B06\uFE0F",arrow_up_down:"\u2195\uFE0F",arrow_up_small:"\u{1F53C}",arrow_upper_left:"\u2196\uFE0F",arrow_upper_right:"\u2197\uFE0F",arrows_clockwise:"\u{1F503}",arrows_counterclockwise:"\u{1F504}",art:"\u{1F3A8}",articulated_lorry:"\u{1F69B}",artificial_satellite:"\u{1F6F0}",astonished:"\u{1F632}",athletic_shoe:"\u{1F45F}",atm:"\u{1F3E7}",atom_symbol:"\u269B\uFE0F",avocado:"\u{1F951}",b:"\u{1F171}\uFE0F",baby:"\u{1F476}",baby_bottle:"\u{1F37C}",baby_chick:"\u{1F424}",baby_symbol:"\u{1F6BC}",back:"\u{1F519}",bacon:"\u{1F953}",badminton:"\u{1F3F8}",baggage_claim:"\u{1F6C4}",baguette_bread:"\u{1F956}",balance_scale:"\u2696\uFE0F",balloon:"\u{1F388}",ballot_box:"\u{1F5F3}",ballot_box_with_check:"\u2611\uFE0F",bamboo:"\u{1F38D}",banana:"\u{1F34C}",bangbang:"\u203C\uFE0F",bank:"\u{1F3E6}",bar_chart:"\u{1F4CA}",barber:"\u{1F488}",baseball:"\u26BE\uFE0F",basketball:"\u{1F3C0}",basketball_man:"\u26F9\uFE0F",basketball_woman:"\u26F9\uFE0F&zwj;\u2640\uFE0F",bat:"\u{1F987}",bath:"\u{1F6C0}",bathtub:"\u{1F6C1}",battery:"\u{1F50B}",beach_umbrella:"\u{1F3D6}",bear:"\u{1F43B}",bed:"\u{1F6CF}",bee:"\u{1F41D}",beer:"\u{1F37A}",beers:"\u{1F37B}",beetle:"\u{1F41E}",beginner:"\u{1F530}",bell:"\u{1F514}",bellhop_bell:"\u{1F6CE}",bento:"\u{1F371}",biking_man:"\u{1F6B4}",bike:"\u{1F6B2}",biking_woman:"\u{1F6B4}&zwj;\u2640\uFE0F",bikini:"\u{1F459}",biohazard:"\u2623\uFE0F",bird:"\u{1F426}",birthday:"\u{1F382}",black_circle:"\u26AB\uFE0F",black_flag:"\u{1F3F4}",black_heart:"\u{1F5A4}",black_joker:"\u{1F0CF}",black_large_square:"\u2B1B\uFE0F",black_medium_small_square:"\u25FE\uFE0F",black_medium_square:"\u25FC\uFE0F",black_nib:"\u2712\uFE0F",black_small_square:"\u25AA\uFE0F",black_square_button:"\u{1F532}",blonde_man:"\u{1F471}",blonde_woman:"\u{1F471}&zwj;\u2640\uFE0F",blossom:"\u{1F33C}",blowfish:"\u{1F421}",blue_book:"\u{1F4D8}",blue_car:"\u{1F699}",blue_heart:"\u{1F499}",blush:"\u{1F60A}",boar:"\u{1F417}",boat:"\u26F5\uFE0F",bomb:"\u{1F4A3}",book:"\u{1F4D6}",bookmark:"\u{1F516}",bookmark_tabs:"\u{1F4D1}",books:"\u{1F4DA}",boom:"\u{1F4A5}",boot:"\u{1F462}",bouquet:"\u{1F490}",bowing_man:"\u{1F647}",bow_and_arrow:"\u{1F3F9}",bowing_woman:"\u{1F647}&zwj;\u2640\uFE0F",bowling:"\u{1F3B3}",boxing_glove:"\u{1F94A}",boy:"\u{1F466}",bread:"\u{1F35E}",bride_with_veil:"\u{1F470}",bridge_at_night:"\u{1F309}",briefcase:"\u{1F4BC}",broken_heart:"\u{1F494}",bug:"\u{1F41B}",building_construction:"\u{1F3D7}",bulb:"\u{1F4A1}",bullettrain_front:"\u{1F685}",bullettrain_side:"\u{1F684}",burrito:"\u{1F32F}",bus:"\u{1F68C}",business_suit_levitating:"\u{1F574}",busstop:"\u{1F68F}",bust_in_silhouette:"\u{1F464}",busts_in_silhouette:"\u{1F465}",butterfly:"\u{1F98B}",cactus:"\u{1F335}",cake:"\u{1F370}",calendar:"\u{1F4C6}",call_me_hand:"\u{1F919}",calling:"\u{1F4F2}",camel:"\u{1F42B}",camera:"\u{1F4F7}",camera_flash:"\u{1F4F8}",camping:"\u{1F3D5}",cancer:"\u264B\uFE0F",candle:"\u{1F56F}",candy:"\u{1F36C}",canoe:"\u{1F6F6}",capital_abcd:"\u{1F520}",capricorn:"\u2651\uFE0F",car:"\u{1F697}",card_file_box:"\u{1F5C3}",card_index:"\u{1F4C7}",card_index_dividers:"\u{1F5C2}",carousel_horse:"\u{1F3A0}",carrot:"\u{1F955}",cat:"\u{1F431}",cat2:"\u{1F408}",cd:"\u{1F4BF}",chains:"\u26D3",champagne:"\u{1F37E}",chart:"\u{1F4B9}",chart_with_downwards_trend:"\u{1F4C9}",chart_with_upwards_trend:"\u{1F4C8}",checkered_flag:"\u{1F3C1}",cheese:"\u{1F9C0}",cherries:"\u{1F352}",cherry_blossom:"\u{1F338}",chestnut:"\u{1F330}",chicken:"\u{1F414}",children_crossing:"\u{1F6B8}",chipmunk:"\u{1F43F}",chocolate_bar:"\u{1F36B}",christmas_tree:"\u{1F384}",church:"\u26EA\uFE0F",cinema:"\u{1F3A6}",circus_tent:"\u{1F3AA}",city_sunrise:"\u{1F307}",city_sunset:"\u{1F306}",cityscape:"\u{1F3D9}",cl:"\u{1F191}",clamp:"\u{1F5DC}",clap:"\u{1F44F}",clapper:"\u{1F3AC}",classical_building:"\u{1F3DB}",clinking_glasses:"\u{1F942}",clipboard:"\u{1F4CB}",clock1:"\u{1F550}",clock10:"\u{1F559}",clock1030:"\u{1F565}",clock11:"\u{1F55A}",clock1130:"\u{1F566}",clock12:"\u{1F55B}",clock1230:"\u{1F567}",clock130:"\u{1F55C}",clock2:"\u{1F551}",clock230:"\u{1F55D}",clock3:"\u{1F552}",clock330:"\u{1F55E}",clock4:"\u{1F553}",clock430:"\u{1F55F}",clock5:"\u{1F554}",clock530:"\u{1F560}",clock6:"\u{1F555}",clock630:"\u{1F561}",clock7:"\u{1F556}",clock730:"\u{1F562}",clock8:"\u{1F557}",clock830:"\u{1F563}",clock9:"\u{1F558}",clock930:"\u{1F564}",closed_book:"\u{1F4D5}",closed_lock_with_key:"\u{1F510}",closed_umbrella:"\u{1F302}",cloud:"\u2601\uFE0F",cloud_with_lightning:"\u{1F329}",cloud_with_lightning_and_rain:"\u26C8",cloud_with_rain:"\u{1F327}",cloud_with_snow:"\u{1F328}",clown_face:"\u{1F921}",clubs:"\u2663\uFE0F",cocktail:"\u{1F378}",coffee:"\u2615\uFE0F",coffin:"\u26B0\uFE0F",cold_sweat:"\u{1F630}",comet:"\u2604\uFE0F",computer:"\u{1F4BB}",computer_mouse:"\u{1F5B1}",confetti_ball:"\u{1F38A}",confounded:"\u{1F616}",confused:"\u{1F615}",congratulations:"\u3297\uFE0F",construction:"\u{1F6A7}",construction_worker_man:"\u{1F477}",construction_worker_woman:"\u{1F477}&zwj;\u2640\uFE0F",control_knobs:"\u{1F39B}",convenience_store:"\u{1F3EA}",cookie:"\u{1F36A}",cool:"\u{1F192}",policeman:"\u{1F46E}",copyright:"\xA9\uFE0F",corn:"\u{1F33D}",couch_and_lamp:"\u{1F6CB}",couple:"\u{1F46B}",couple_with_heart_woman_man:"\u{1F491}",couple_with_heart_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F468}",couple_with_heart_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F469}",couplekiss_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F468}",couplekiss_man_woman:"\u{1F48F}",couplekiss_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F469}",cow:"\u{1F42E}",cow2:"\u{1F404}",cowboy_hat_face:"\u{1F920}",crab:"\u{1F980}",crayon:"\u{1F58D}",credit_card:"\u{1F4B3}",crescent_moon:"\u{1F319}",cricket:"\u{1F3CF}",crocodile:"\u{1F40A}",croissant:"\u{1F950}",crossed_fingers:"\u{1F91E}",crossed_flags:"\u{1F38C}",crossed_swords:"\u2694\uFE0F",crown:"\u{1F451}",cry:"\u{1F622}",crying_cat_face:"\u{1F63F}",crystal_ball:"\u{1F52E}",cucumber:"\u{1F952}",cupid:"\u{1F498}",curly_loop:"\u27B0",currency_exchange:"\u{1F4B1}",curry:"\u{1F35B}",custard:"\u{1F36E}",customs:"\u{1F6C3}",cyclone:"\u{1F300}",dagger:"\u{1F5E1}",dancer:"\u{1F483}",dancing_women:"\u{1F46F}",dancing_men:"\u{1F46F}&zwj;\u2642\uFE0F",dango:"\u{1F361}",dark_sunglasses:"\u{1F576}",dart:"\u{1F3AF}",dash:"\u{1F4A8}",date:"\u{1F4C5}",deciduous_tree:"\u{1F333}",deer:"\u{1F98C}",department_store:"\u{1F3EC}",derelict_house:"\u{1F3DA}",desert:"\u{1F3DC}",desert_island:"\u{1F3DD}",desktop_computer:"\u{1F5A5}",male_detective:"\u{1F575}\uFE0F",diamond_shape_with_a_dot_inside:"\u{1F4A0}",diamonds:"\u2666\uFE0F",disappointed:"\u{1F61E}",disappointed_relieved:"\u{1F625}",dizzy:"\u{1F4AB}",dizzy_face:"\u{1F635}",do_not_litter:"\u{1F6AF}",dog:"\u{1F436}",dog2:"\u{1F415}",dollar:"\u{1F4B5}",dolls:"\u{1F38E}",dolphin:"\u{1F42C}",door:"\u{1F6AA}",doughnut:"\u{1F369}",dove:"\u{1F54A}",dragon:"\u{1F409}",dragon_face:"\u{1F432}",dress:"\u{1F457}",dromedary_camel:"\u{1F42A}",drooling_face:"\u{1F924}",droplet:"\u{1F4A7}",drum:"\u{1F941}",duck:"\u{1F986}",dvd:"\u{1F4C0}","e-mail":"\u{1F4E7}",eagle:"\u{1F985}",ear:"\u{1F442}",ear_of_rice:"\u{1F33E}",earth_africa:"\u{1F30D}",earth_americas:"\u{1F30E}",earth_asia:"\u{1F30F}",egg:"\u{1F95A}",eggplant:"\u{1F346}",eight_pointed_black_star:"\u2734\uFE0F",eight_spoked_asterisk:"\u2733\uFE0F",electric_plug:"\u{1F50C}",elephant:"\u{1F418}",email:"\u2709\uFE0F",end:"\u{1F51A}",envelope_with_arrow:"\u{1F4E9}",euro:"\u{1F4B6}",european_castle:"\u{1F3F0}",european_post_office:"\u{1F3E4}",evergreen_tree:"\u{1F332}",exclamation:"\u2757\uFE0F",expressionless:"\u{1F611}",eye:"\u{1F441}",eye_speech_bubble:"\u{1F441}&zwj;\u{1F5E8}",eyeglasses:"\u{1F453}",eyes:"\u{1F440}",face_with_head_bandage:"\u{1F915}",face_with_thermometer:"\u{1F912}",fist_oncoming:"\u{1F44A}",factory:"\u{1F3ED}",fallen_leaf:"\u{1F342}",family_man_woman_boy:"\u{1F46A}",family_man_boy:"\u{1F468}&zwj;\u{1F466}",family_man_boy_boy:"\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_girl:"\u{1F468}&zwj;\u{1F467}",family_man_girl_boy:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_girl_girl:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_man_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}",family_man_man_boy_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_man_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}",family_man_man_girl_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_man_girl_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_woman_boy_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_woman_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}",family_man_woman_girl_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_woman_girl_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_boy:"\u{1F469}&zwj;\u{1F466}",family_woman_boy_boy:"\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_girl:"\u{1F469}&zwj;\u{1F467}",family_woman_girl_boy:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_girl_girl:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_woman_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}",family_woman_woman_boy_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_woman_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}",family_woman_woman_girl_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_woman_girl_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",fast_forward:"\u23E9",fax:"\u{1F4E0}",fearful:"\u{1F628}",feet:"\u{1F43E}",female_detective:"\u{1F575}\uFE0F&zwj;\u2640\uFE0F",ferris_wheel:"\u{1F3A1}",ferry:"\u26F4",field_hockey:"\u{1F3D1}",file_cabinet:"\u{1F5C4}",file_folder:"\u{1F4C1}",film_projector:"\u{1F4FD}",film_strip:"\u{1F39E}",fire:"\u{1F525}",fire_engine:"\u{1F692}",fireworks:"\u{1F386}",first_quarter_moon:"\u{1F313}",first_quarter_moon_with_face:"\u{1F31B}",fish:"\u{1F41F}",fish_cake:"\u{1F365}",fishing_pole_and_fish:"\u{1F3A3}",fist_raised:"\u270A",fist_left:"\u{1F91B}",fist_right:"\u{1F91C}",flags:"\u{1F38F}",flashlight:"\u{1F526}",fleur_de_lis:"\u269C\uFE0F",flight_arrival:"\u{1F6EC}",flight_departure:"\u{1F6EB}",floppy_disk:"\u{1F4BE}",flower_playing_cards:"\u{1F3B4}",flushed:"\u{1F633}",fog:"\u{1F32B}",foggy:"\u{1F301}",football:"\u{1F3C8}",footprints:"\u{1F463}",fork_and_knife:"\u{1F374}",fountain:"\u26F2\uFE0F",fountain_pen:"\u{1F58B}",four_leaf_clover:"\u{1F340}",fox_face:"\u{1F98A}",framed_picture:"\u{1F5BC}",free:"\u{1F193}",fried_egg:"\u{1F373}",fried_shrimp:"\u{1F364}",fries:"\u{1F35F}",frog:"\u{1F438}",frowning:"\u{1F626}",frowning_face:"\u2639\uFE0F",frowning_man:"\u{1F64D}&zwj;\u2642\uFE0F",frowning_woman:"\u{1F64D}",middle_finger:"\u{1F595}",fuelpump:"\u26FD\uFE0F",full_moon:"\u{1F315}",full_moon_with_face:"\u{1F31D}",funeral_urn:"\u26B1\uFE0F",game_die:"\u{1F3B2}",gear:"\u2699\uFE0F",gem:"\u{1F48E}",gemini:"\u264A\uFE0F",ghost:"\u{1F47B}",gift:"\u{1F381}",gift_heart:"\u{1F49D}",girl:"\u{1F467}",globe_with_meridians:"\u{1F310}",goal_net:"\u{1F945}",goat:"\u{1F410}",golf:"\u26F3\uFE0F",golfing_man:"\u{1F3CC}\uFE0F",golfing_woman:"\u{1F3CC}\uFE0F&zwj;\u2640\uFE0F",gorilla:"\u{1F98D}",grapes:"\u{1F347}",green_apple:"\u{1F34F}",green_book:"\u{1F4D7}",green_heart:"\u{1F49A}",green_salad:"\u{1F957}",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\u{1F62C}",grin:"\u{1F601}",grinning:"\u{1F600}",guardsman:"\u{1F482}",guardswoman:"\u{1F482}&zwj;\u2640\uFE0F",guitar:"\u{1F3B8}",gun:"\u{1F52B}",haircut_woman:"\u{1F487}",haircut_man:"\u{1F487}&zwj;\u2642\uFE0F",hamburger:"\u{1F354}",hammer:"\u{1F528}",hammer_and_pick:"\u2692",hammer_and_wrench:"\u{1F6E0}",hamster:"\u{1F439}",hand:"\u270B",handbag:"\u{1F45C}",handshake:"\u{1F91D}",hankey:"\u{1F4A9}",hatched_chick:"\u{1F425}",hatching_chick:"\u{1F423}",headphones:"\u{1F3A7}",hear_no_evil:"\u{1F649}",heart:"\u2764\uFE0F",heart_decoration:"\u{1F49F}",heart_eyes:"\u{1F60D}",heart_eyes_cat:"\u{1F63B}",heartbeat:"\u{1F493}",heartpulse:"\u{1F497}",hearts:"\u2665\uFE0F",heavy_check_mark:"\u2714\uFE0F",heavy_division_sign:"\u2797",heavy_dollar_sign:"\u{1F4B2}",heavy_heart_exclamation:"\u2763\uFE0F",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716\uFE0F",heavy_plus_sign:"\u2795",helicopter:"\u{1F681}",herb:"\u{1F33F}",hibiscus:"\u{1F33A}",high_brightness:"\u{1F506}",high_heel:"\u{1F460}",hocho:"\u{1F52A}",hole:"\u{1F573}",honey_pot:"\u{1F36F}",horse:"\u{1F434}",horse_racing:"\u{1F3C7}",hospital:"\u{1F3E5}",hot_pepper:"\u{1F336}",hotdog:"\u{1F32D}",hotel:"\u{1F3E8}",hotsprings:"\u2668\uFE0F",hourglass:"\u231B\uFE0F",hourglass_flowing_sand:"\u23F3",house:"\u{1F3E0}",house_with_garden:"\u{1F3E1}",houses:"\u{1F3D8}",hugs:"\u{1F917}",hushed:"\u{1F62F}",ice_cream:"\u{1F368}",ice_hockey:"\u{1F3D2}",ice_skate:"\u26F8",icecream:"\u{1F366}",id:"\u{1F194}",ideograph_advantage:"\u{1F250}",imp:"\u{1F47F}",inbox_tray:"\u{1F4E5}",incoming_envelope:"\u{1F4E8}",tipping_hand_woman:"\u{1F481}",information_source:"\u2139\uFE0F",innocent:"\u{1F607}",interrobang:"\u2049\uFE0F",iphone:"\u{1F4F1}",izakaya_lantern:"\u{1F3EE}",jack_o_lantern:"\u{1F383}",japan:"\u{1F5FE}",japanese_castle:"\u{1F3EF}",japanese_goblin:"\u{1F47A}",japanese_ogre:"\u{1F479}",jeans:"\u{1F456}",joy:"\u{1F602}",joy_cat:"\u{1F639}",joystick:"\u{1F579}",kaaba:"\u{1F54B}",key:"\u{1F511}",keyboard:"\u2328\uFE0F",keycap_ten:"\u{1F51F}",kick_scooter:"\u{1F6F4}",kimono:"\u{1F458}",kiss:"\u{1F48B}",kissing:"\u{1F617}",kissing_cat:"\u{1F63D}",kissing_closed_eyes:"\u{1F61A}",kissing_heart:"\u{1F618}",kissing_smiling_eyes:"\u{1F619}",kiwi_fruit:"\u{1F95D}",koala:"\u{1F428}",koko:"\u{1F201}",label:"\u{1F3F7}",large_blue_circle:"\u{1F535}",large_blue_diamond:"\u{1F537}",large_orange_diamond:"\u{1F536}",last_quarter_moon:"\u{1F317}",last_quarter_moon_with_face:"\u{1F31C}",latin_cross:"\u271D\uFE0F",laughing:"\u{1F606}",leaves:"\u{1F343}",ledger:"\u{1F4D2}",left_luggage:"\u{1F6C5}",left_right_arrow:"\u2194\uFE0F",leftwards_arrow_with_hook:"\u21A9\uFE0F",lemon:"\u{1F34B}",leo:"\u264C\uFE0F",leopard:"\u{1F406}",level_slider:"\u{1F39A}",libra:"\u264E\uFE0F",light_rail:"\u{1F688}",link:"\u{1F517}",lion:"\u{1F981}",lips:"\u{1F444}",lipstick:"\u{1F484}",lizard:"\u{1F98E}",lock:"\u{1F512}",lock_with_ink_pen:"\u{1F50F}",lollipop:"\u{1F36D}",loop:"\u27BF",loud_sound:"\u{1F50A}",loudspeaker:"\u{1F4E2}",love_hotel:"\u{1F3E9}",love_letter:"\u{1F48C}",low_brightness:"\u{1F505}",lying_face:"\u{1F925}",m:"\u24C2\uFE0F",mag:"\u{1F50D}",mag_right:"\u{1F50E}",mahjong:"\u{1F004}\uFE0F",mailbox:"\u{1F4EB}",mailbox_closed:"\u{1F4EA}",mailbox_with_mail:"\u{1F4EC}",mailbox_with_no_mail:"\u{1F4ED}",man:"\u{1F468}",man_artist:"\u{1F468}&zwj;\u{1F3A8}",man_astronaut:"\u{1F468}&zwj;\u{1F680}",man_cartwheeling:"\u{1F938}&zwj;\u2642\uFE0F",man_cook:"\u{1F468}&zwj;\u{1F373}",man_dancing:"\u{1F57A}",man_facepalming:"\u{1F926}&zwj;\u2642\uFE0F",man_factory_worker:"\u{1F468}&zwj;\u{1F3ED}",man_farmer:"\u{1F468}&zwj;\u{1F33E}",man_firefighter:"\u{1F468}&zwj;\u{1F692}",man_health_worker:"\u{1F468}&zwj;\u2695\uFE0F",man_in_tuxedo:"\u{1F935}",man_judge:"\u{1F468}&zwj;\u2696\uFE0F",man_juggling:"\u{1F939}&zwj;\u2642\uFE0F",man_mechanic:"\u{1F468}&zwj;\u{1F527}",man_office_worker:"\u{1F468}&zwj;\u{1F4BC}",man_pilot:"\u{1F468}&zwj;\u2708\uFE0F",man_playing_handball:"\u{1F93E}&zwj;\u2642\uFE0F",man_playing_water_polo:"\u{1F93D}&zwj;\u2642\uFE0F",man_scientist:"\u{1F468}&zwj;\u{1F52C}",man_shrugging:"\u{1F937}&zwj;\u2642\uFE0F",man_singer:"\u{1F468}&zwj;\u{1F3A4}",man_student:"\u{1F468}&zwj;\u{1F393}",man_teacher:"\u{1F468}&zwj;\u{1F3EB}",man_technologist:"\u{1F468}&zwj;\u{1F4BB}",man_with_gua_pi_mao:"\u{1F472}",man_with_turban:"\u{1F473}",tangerine:"\u{1F34A}",mans_shoe:"\u{1F45E}",mantelpiece_clock:"\u{1F570}",maple_leaf:"\u{1F341}",martial_arts_uniform:"\u{1F94B}",mask:"\u{1F637}",massage_woman:"\u{1F486}",massage_man:"\u{1F486}&zwj;\u2642\uFE0F",meat_on_bone:"\u{1F356}",medal_military:"\u{1F396}",medal_sports:"\u{1F3C5}",mega:"\u{1F4E3}",melon:"\u{1F348}",memo:"\u{1F4DD}",men_wrestling:"\u{1F93C}&zwj;\u2642\uFE0F",menorah:"\u{1F54E}",mens:"\u{1F6B9}",metal:"\u{1F918}",metro:"\u{1F687}",microphone:"\u{1F3A4}",microscope:"\u{1F52C}",milk_glass:"\u{1F95B}",milky_way:"\u{1F30C}",minibus:"\u{1F690}",minidisc:"\u{1F4BD}",mobile_phone_off:"\u{1F4F4}",money_mouth_face:"\u{1F911}",money_with_wings:"\u{1F4B8}",moneybag:"\u{1F4B0}",monkey:"\u{1F412}",monkey_face:"\u{1F435}",monorail:"\u{1F69D}",moon:"\u{1F314}",mortar_board:"\u{1F393}",mosque:"\u{1F54C}",motor_boat:"\u{1F6E5}",motor_scooter:"\u{1F6F5}",motorcycle:"\u{1F3CD}",motorway:"\u{1F6E3}",mount_fuji:"\u{1F5FB}",mountain:"\u26F0",mountain_biking_man:"\u{1F6B5}",mountain_biking_woman:"\u{1F6B5}&zwj;\u2640\uFE0F",mountain_cableway:"\u{1F6A0}",mountain_railway:"\u{1F69E}",mountain_snow:"\u{1F3D4}",mouse:"\u{1F42D}",mouse2:"\u{1F401}",movie_camera:"\u{1F3A5}",moyai:"\u{1F5FF}",mrs_claus:"\u{1F936}",muscle:"\u{1F4AA}",mushroom:"\u{1F344}",musical_keyboard:"\u{1F3B9}",musical_note:"\u{1F3B5}",musical_score:"\u{1F3BC}",mute:"\u{1F507}",nail_care:"\u{1F485}",name_badge:"\u{1F4DB}",national_park:"\u{1F3DE}",nauseated_face:"\u{1F922}",necktie:"\u{1F454}",negative_squared_cross_mark:"\u274E",nerd_face:"\u{1F913}",neutral_face:"\u{1F610}",new:"\u{1F195}",new_moon:"\u{1F311}",new_moon_with_face:"\u{1F31A}",newspaper:"\u{1F4F0}",newspaper_roll:"\u{1F5DE}",next_track_button:"\u23ED",ng:"\u{1F196}",no_good_man:"\u{1F645}&zwj;\u2642\uFE0F",no_good_woman:"\u{1F645}",night_with_stars:"\u{1F303}",no_bell:"\u{1F515}",no_bicycles:"\u{1F6B3}",no_entry:"\u26D4\uFE0F",no_entry_sign:"\u{1F6AB}",no_mobile_phones:"\u{1F4F5}",no_mouth:"\u{1F636}",no_pedestrians:"\u{1F6B7}",no_smoking:"\u{1F6AD}","non-potable_water":"\u{1F6B1}",nose:"\u{1F443}",notebook:"\u{1F4D3}",notebook_with_decorative_cover:"\u{1F4D4}",notes:"\u{1F3B6}",nut_and_bolt:"\u{1F529}",o:"\u2B55\uFE0F",o2:"\u{1F17E}\uFE0F",ocean:"\u{1F30A}",octopus:"\u{1F419}",oden:"\u{1F362}",office:"\u{1F3E2}",oil_drum:"\u{1F6E2}",ok:"\u{1F197}",ok_hand:"\u{1F44C}",ok_man:"\u{1F646}&zwj;\u2642\uFE0F",ok_woman:"\u{1F646}",old_key:"\u{1F5DD}",older_man:"\u{1F474}",older_woman:"\u{1F475}",om:"\u{1F549}",on:"\u{1F51B}",oncoming_automobile:"\u{1F698}",oncoming_bus:"\u{1F68D}",oncoming_police_car:"\u{1F694}",oncoming_taxi:"\u{1F696}",open_file_folder:"\u{1F4C2}",open_hands:"\u{1F450}",open_mouth:"\u{1F62E}",open_umbrella:"\u2602\uFE0F",ophiuchus:"\u26CE",orange_book:"\u{1F4D9}",orthodox_cross:"\u2626\uFE0F",outbox_tray:"\u{1F4E4}",owl:"\u{1F989}",ox:"\u{1F402}",package:"\u{1F4E6}",page_facing_up:"\u{1F4C4}",page_with_curl:"\u{1F4C3}",pager:"\u{1F4DF}",paintbrush:"\u{1F58C}",palm_tree:"\u{1F334}",pancakes:"\u{1F95E}",panda_face:"\u{1F43C}",paperclip:"\u{1F4CE}",paperclips:"\u{1F587}",parasol_on_ground:"\u26F1",parking:"\u{1F17F}\uFE0F",part_alternation_mark:"\u303D\uFE0F",partly_sunny:"\u26C5\uFE0F",passenger_ship:"\u{1F6F3}",passport_control:"\u{1F6C2}",pause_button:"\u23F8",peace_symbol:"\u262E\uFE0F",peach:"\u{1F351}",peanuts:"\u{1F95C}",pear:"\u{1F350}",pen:"\u{1F58A}",pencil2:"\u270F\uFE0F",penguin:"\u{1F427}",pensive:"\u{1F614}",performing_arts:"\u{1F3AD}",persevere:"\u{1F623}",person_fencing:"\u{1F93A}",pouting_woman:"\u{1F64E}",phone:"\u260E\uFE0F",pick:"\u26CF",pig:"\u{1F437}",pig2:"\u{1F416}",pig_nose:"\u{1F43D}",pill:"\u{1F48A}",pineapple:"\u{1F34D}",ping_pong:"\u{1F3D3}",pisces:"\u2653\uFE0F",pizza:"\u{1F355}",place_of_worship:"\u{1F6D0}",plate_with_cutlery:"\u{1F37D}",play_or_pause_button:"\u23EF",point_down:"\u{1F447}",point_left:"\u{1F448}",point_right:"\u{1F449}",point_up:"\u261D\uFE0F",point_up_2:"\u{1F446}",police_car:"\u{1F693}",policewoman:"\u{1F46E}&zwj;\u2640\uFE0F",poodle:"\u{1F429}",popcorn:"\u{1F37F}",post_office:"\u{1F3E3}",postal_horn:"\u{1F4EF}",postbox:"\u{1F4EE}",potable_water:"\u{1F6B0}",potato:"\u{1F954}",pouch:"\u{1F45D}",poultry_leg:"\u{1F357}",pound:"\u{1F4B7}",rage:"\u{1F621}",pouting_cat:"\u{1F63E}",pouting_man:"\u{1F64E}&zwj;\u2642\uFE0F",pray:"\u{1F64F}",prayer_beads:"\u{1F4FF}",pregnant_woman:"\u{1F930}",previous_track_button:"\u23EE",prince:"\u{1F934}",princess:"\u{1F478}",printer:"\u{1F5A8}",purple_heart:"\u{1F49C}",purse:"\u{1F45B}",pushpin:"\u{1F4CC}",put_litter_in_its_place:"\u{1F6AE}",question:"\u2753",rabbit:"\u{1F430}",rabbit2:"\u{1F407}",racehorse:"\u{1F40E}",racing_car:"\u{1F3CE}",radio:"\u{1F4FB}",radio_button:"\u{1F518}",radioactive:"\u2622\uFE0F",railway_car:"\u{1F683}",railway_track:"\u{1F6E4}",rainbow:"\u{1F308}",rainbow_flag:"\u{1F3F3}\uFE0F&zwj;\u{1F308}",raised_back_of_hand:"\u{1F91A}",raised_hand_with_fingers_splayed:"\u{1F590}",raised_hands:"\u{1F64C}",raising_hand_woman:"\u{1F64B}",raising_hand_man:"\u{1F64B}&zwj;\u2642\uFE0F",ram:"\u{1F40F}",ramen:"\u{1F35C}",rat:"\u{1F400}",record_button:"\u23FA",recycle:"\u267B\uFE0F",red_circle:"\u{1F534}",registered:"\xAE\uFE0F",relaxed:"\u263A\uFE0F",relieved:"\u{1F60C}",reminder_ribbon:"\u{1F397}",repeat:"\u{1F501}",repeat_one:"\u{1F502}",rescue_worker_helmet:"\u26D1",restroom:"\u{1F6BB}",revolving_hearts:"\u{1F49E}",rewind:"\u23EA",rhinoceros:"\u{1F98F}",ribbon:"\u{1F380}",rice:"\u{1F35A}",rice_ball:"\u{1F359}",rice_cracker:"\u{1F358}",rice_scene:"\u{1F391}",right_anger_bubble:"\u{1F5EF}",ring:"\u{1F48D}",robot:"\u{1F916}",rocket:"\u{1F680}",rofl:"\u{1F923}",roll_eyes:"\u{1F644}",roller_coaster:"\u{1F3A2}",rooster:"\u{1F413}",rose:"\u{1F339}",rosette:"\u{1F3F5}",rotating_light:"\u{1F6A8}",round_pushpin:"\u{1F4CD}",rowing_man:"\u{1F6A3}",rowing_woman:"\u{1F6A3}&zwj;\u2640\uFE0F",rugby_football:"\u{1F3C9}",running_man:"\u{1F3C3}",running_shirt_with_sash:"\u{1F3BD}",running_woman:"\u{1F3C3}&zwj;\u2640\uFE0F",sa:"\u{1F202}\uFE0F",sagittarius:"\u2650\uFE0F",sake:"\u{1F376}",sandal:"\u{1F461}",santa:"\u{1F385}",satellite:"\u{1F4E1}",saxophone:"\u{1F3B7}",school:"\u{1F3EB}",school_satchel:"\u{1F392}",scissors:"\u2702\uFE0F",scorpion:"\u{1F982}",scorpius:"\u264F\uFE0F",scream:"\u{1F631}",scream_cat:"\u{1F640}",scroll:"\u{1F4DC}",seat:"\u{1F4BA}",secret:"\u3299\uFE0F",see_no_evil:"\u{1F648}",seedling:"\u{1F331}",selfie:"\u{1F933}",shallow_pan_of_food:"\u{1F958}",shamrock:"\u2618\uFE0F",shark:"\u{1F988}",shaved_ice:"\u{1F367}",sheep:"\u{1F411}",shell:"\u{1F41A}",shield:"\u{1F6E1}",shinto_shrine:"\u26E9",ship:"\u{1F6A2}",shirt:"\u{1F455}",shopping:"\u{1F6CD}",shopping_cart:"\u{1F6D2}",shower:"\u{1F6BF}",shrimp:"\u{1F990}",signal_strength:"\u{1F4F6}",six_pointed_star:"\u{1F52F}",ski:"\u{1F3BF}",skier:"\u26F7",skull:"\u{1F480}",skull_and_crossbones:"\u2620\uFE0F",sleeping:"\u{1F634}",sleeping_bed:"\u{1F6CC}",sleepy:"\u{1F62A}",slightly_frowning_face:"\u{1F641}",slightly_smiling_face:"\u{1F642}",slot_machine:"\u{1F3B0}",small_airplane:"\u{1F6E9}",small_blue_diamond:"\u{1F539}",small_orange_diamond:"\u{1F538}",small_red_triangle:"\u{1F53A}",small_red_triangle_down:"\u{1F53B}",smile:"\u{1F604}",smile_cat:"\u{1F638}",smiley:"\u{1F603}",smiley_cat:"\u{1F63A}",smiling_imp:"\u{1F608}",smirk:"\u{1F60F}",smirk_cat:"\u{1F63C}",smoking:"\u{1F6AC}",snail:"\u{1F40C}",snake:"\u{1F40D}",sneezing_face:"\u{1F927}",snowboarder:"\u{1F3C2}",snowflake:"\u2744\uFE0F",snowman:"\u26C4\uFE0F",snowman_with_snow:"\u2603\uFE0F",sob:"\u{1F62D}",soccer:"\u26BD\uFE0F",soon:"\u{1F51C}",sos:"\u{1F198}",sound:"\u{1F509}",space_invader:"\u{1F47E}",spades:"\u2660\uFE0F",spaghetti:"\u{1F35D}",sparkle:"\u2747\uFE0F",sparkler:"\u{1F387}",sparkles:"\u2728",sparkling_heart:"\u{1F496}",speak_no_evil:"\u{1F64A}",speaker:"\u{1F508}",speaking_head:"\u{1F5E3}",speech_balloon:"\u{1F4AC}",speedboat:"\u{1F6A4}",spider:"\u{1F577}",spider_web:"\u{1F578}",spiral_calendar:"\u{1F5D3}",spiral_notepad:"\u{1F5D2}",spoon:"\u{1F944}",squid:"\u{1F991}",stadium:"\u{1F3DF}",star:"\u2B50\uFE0F",star2:"\u{1F31F}",star_and_crescent:"\u262A\uFE0F",star_of_david:"\u2721\uFE0F",stars:"\u{1F320}",station:"\u{1F689}",statue_of_liberty:"\u{1F5FD}",steam_locomotive:"\u{1F682}",stew:"\u{1F372}",stop_button:"\u23F9",stop_sign:"\u{1F6D1}",stopwatch:"\u23F1",straight_ruler:"\u{1F4CF}",strawberry:"\u{1F353}",stuck_out_tongue:"\u{1F61B}",stuck_out_tongue_closed_eyes:"\u{1F61D}",stuck_out_tongue_winking_eye:"\u{1F61C}",studio_microphone:"\u{1F399}",stuffed_flatbread:"\u{1F959}",sun_behind_large_cloud:"\u{1F325}",sun_behind_rain_cloud:"\u{1F326}",sun_behind_small_cloud:"\u{1F324}",sun_with_face:"\u{1F31E}",sunflower:"\u{1F33B}",sunglasses:"\u{1F60E}",sunny:"\u2600\uFE0F",sunrise:"\u{1F305}",sunrise_over_mountains:"\u{1F304}",surfing_man:"\u{1F3C4}",surfing_woman:"\u{1F3C4}&zwj;\u2640\uFE0F",sushi:"\u{1F363}",suspension_railway:"\u{1F69F}",sweat:"\u{1F613}",sweat_drops:"\u{1F4A6}",sweat_smile:"\u{1F605}",sweet_potato:"\u{1F360}",swimming_man:"\u{1F3CA}",swimming_woman:"\u{1F3CA}&zwj;\u2640\uFE0F",symbols:"\u{1F523}",synagogue:"\u{1F54D}",syringe:"\u{1F489}",taco:"\u{1F32E}",tada:"\u{1F389}",tanabata_tree:"\u{1F38B}",taurus:"\u2649\uFE0F",taxi:"\u{1F695}",tea:"\u{1F375}",telephone_receiver:"\u{1F4DE}",telescope:"\u{1F52D}",tennis:"\u{1F3BE}",tent:"\u26FA\uFE0F",thermometer:"\u{1F321}",thinking:"\u{1F914}",thought_balloon:"\u{1F4AD}",ticket:"\u{1F3AB}",tickets:"\u{1F39F}",tiger:"\u{1F42F}",tiger2:"\u{1F405}",timer_clock:"\u23F2",tipping_hand_man:"\u{1F481}&zwj;\u2642\uFE0F",tired_face:"\u{1F62B}",tm:"\u2122\uFE0F",toilet:"\u{1F6BD}",tokyo_tower:"\u{1F5FC}",tomato:"\u{1F345}",tongue:"\u{1F445}",top:"\u{1F51D}",tophat:"\u{1F3A9}",tornado:"\u{1F32A}",trackball:"\u{1F5B2}",tractor:"\u{1F69C}",traffic_light:"\u{1F6A5}",train:"\u{1F68B}",train2:"\u{1F686}",tram:"\u{1F68A}",triangular_flag_on_post:"\u{1F6A9}",triangular_ruler:"\u{1F4D0}",trident:"\u{1F531}",triumph:"\u{1F624}",trolleybus:"\u{1F68E}",trophy:"\u{1F3C6}",tropical_drink:"\u{1F379}",tropical_fish:"\u{1F420}",truck:"\u{1F69A}",trumpet:"\u{1F3BA}",tulip:"\u{1F337}",tumbler_glass:"\u{1F943}",turkey:"\u{1F983}",turtle:"\u{1F422}",tv:"\u{1F4FA}",twisted_rightwards_arrows:"\u{1F500}",two_hearts:"\u{1F495}",two_men_holding_hands:"\u{1F46C}",two_women_holding_hands:"\u{1F46D}",u5272:"\u{1F239}",u5408:"\u{1F234}",u55b6:"\u{1F23A}",u6307:"\u{1F22F}\uFE0F",u6708:"\u{1F237}\uFE0F",u6709:"\u{1F236}",u6e80:"\u{1F235}",u7121:"\u{1F21A}\uFE0F",u7533:"\u{1F238}",u7981:"\u{1F232}",u7a7a:"\u{1F233}",umbrella:"\u2614\uFE0F",unamused:"\u{1F612}",underage:"\u{1F51E}",unicorn:"\u{1F984}",unlock:"\u{1F513}",up:"\u{1F199}",upside_down_face:"\u{1F643}",v:"\u270C\uFE0F",vertical_traffic_light:"\u{1F6A6}",vhs:"\u{1F4FC}",vibration_mode:"\u{1F4F3}",video_camera:"\u{1F4F9}",video_game:"\u{1F3AE}",violin:"\u{1F3BB}",virgo:"\u264D\uFE0F",volcano:"\u{1F30B}",volleyball:"\u{1F3D0}",vs:"\u{1F19A}",vulcan_salute:"\u{1F596}",walking_man:"\u{1F6B6}",walking_woman:"\u{1F6B6}&zwj;\u2640\uFE0F",waning_crescent_moon:"\u{1F318}",waning_gibbous_moon:"\u{1F316}",warning:"\u26A0\uFE0F",wastebasket:"\u{1F5D1}",watch:"\u231A\uFE0F",water_buffalo:"\u{1F403}",watermelon:"\u{1F349}",wave:"\u{1F44B}",wavy_dash:"\u3030\uFE0F",waxing_crescent_moon:"\u{1F312}",wc:"\u{1F6BE}",weary:"\u{1F629}",wedding:"\u{1F492}",weight_lifting_man:"\u{1F3CB}\uFE0F",weight_lifting_woman:"\u{1F3CB}\uFE0F&zwj;\u2640\uFE0F",whale:"\u{1F433}",whale2:"\u{1F40B}",wheel_of_dharma:"\u2638\uFE0F",wheelchair:"\u267F\uFE0F",white_check_mark:"\u2705",white_circle:"\u26AA\uFE0F",white_flag:"\u{1F3F3}\uFE0F",white_flower:"\u{1F4AE}",white_large_square:"\u2B1C\uFE0F",white_medium_small_square:"\u25FD\uFE0F",white_medium_square:"\u25FB\uFE0F",white_small_square:"\u25AB\uFE0F",white_square_button:"\u{1F533}",wilted_flower:"\u{1F940}",wind_chime:"\u{1F390}",wind_face:"\u{1F32C}",wine_glass:"\u{1F377}",wink:"\u{1F609}",wolf:"\u{1F43A}",woman:"\u{1F469}",woman_artist:"\u{1F469}&zwj;\u{1F3A8}",woman_astronaut:"\u{1F469}&zwj;\u{1F680}",woman_cartwheeling:"\u{1F938}&zwj;\u2640\uFE0F",woman_cook:"\u{1F469}&zwj;\u{1F373}",woman_facepalming:"\u{1F926}&zwj;\u2640\uFE0F",woman_factory_worker:"\u{1F469}&zwj;\u{1F3ED}",woman_farmer:"\u{1F469}&zwj;\u{1F33E}",woman_firefighter:"\u{1F469}&zwj;\u{1F692}",woman_health_worker:"\u{1F469}&zwj;\u2695\uFE0F",woman_judge:"\u{1F469}&zwj;\u2696\uFE0F",woman_juggling:"\u{1F939}&zwj;\u2640\uFE0F",woman_mechanic:"\u{1F469}&zwj;\u{1F527}",woman_office_worker:"\u{1F469}&zwj;\u{1F4BC}",woman_pilot:"\u{1F469}&zwj;\u2708\uFE0F",woman_playing_handball:"\u{1F93E}&zwj;\u2640\uFE0F",woman_playing_water_polo:"\u{1F93D}&zwj;\u2640\uFE0F",woman_scientist:"\u{1F469}&zwj;\u{1F52C}",woman_shrugging:"\u{1F937}&zwj;\u2640\uFE0F",woman_singer:"\u{1F469}&zwj;\u{1F3A4}",woman_student:"\u{1F469}&zwj;\u{1F393}",woman_teacher:"\u{1F469}&zwj;\u{1F3EB}",woman_technologist:"\u{1F469}&zwj;\u{1F4BB}",woman_with_turban:"\u{1F473}&zwj;\u2640\uFE0F",womans_clothes:"\u{1F45A}",womans_hat:"\u{1F452}",women_wrestling:"\u{1F93C}&zwj;\u2640\uFE0F",womens:"\u{1F6BA}",world_map:"\u{1F5FA}",worried:"\u{1F61F}",wrench:"\u{1F527}",writing_hand:"\u270D\uFE0F",x:"\u274C",yellow_heart:"\u{1F49B}",yen:"\u{1F4B4}",yin_yang:"\u262F\uFE0F",yum:"\u{1F60B}",zap:"\u26A1\uFE0F",zipper_mouth_face:"\u{1F910}",zzz:"\u{1F4A4}",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},e.Converter=function(c){"use strict";var _={},h=[],b=[],M={},E=s,w={parsed:{},raw:"",format:""};S();function S(){c=c||{};for(var T in o)o.hasOwnProperty(T)&&(_[T]=o[T]);if(typeof c=="object")for(var L in c)c.hasOwnProperty(L)&&(_[L]=c[L]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof c+" was passed instead.");_.extensions&&e.helper.forEach(_.extensions,O)}function O(T,L){if(L=L||null,e.helper.isString(T))if(T=e.helper.stdExtName(T),L=T,e.extensions[T]){console.warn("DEPRECATION WARNING: "+T+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),B(e.extensions[T],T);return}else if(!e.helper.isUndefined(n[T]))T=n[T];else throw Error('Extension "'+T+'" could not be loaded. It was either not found or is not a valid extension.');typeof T=="function"&&(T=T()),e.helper.isArray(T)||(T=[T]);var P=l(T,L);if(!P.valid)throw Error(P.error);for(var D=0;D<T.length;++D){switch(T[D].type){case"lang":h.push(T[D]);break;case"output":b.push(T[D]);break}if(T[D].hasOwnProperty("listeners"))for(var H in T[D].listeners)T[D].listeners.hasOwnProperty(H)&&A(H,T[D].listeners[H])}}function B(T,L){typeof T=="function"&&(T=T(new e.Converter)),e.helper.isArray(T)||(T=[T]);var P=l(T,L);if(!P.valid)throw Error(P.error);for(var D=0;D<T.length;++D)switch(T[D].type){case"lang":h.push(T[D]);break;case"output":b.push(T[D]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function A(T,L){if(!e.helper.isString(T))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof T+" given");if(typeof L!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof L+" given");M.hasOwnProperty(T)||(M[T]=[]),M[T].push(L)}function R(T){var L=T.match(/^\s*/)[0].length,P=new RegExp("^\\s{0,"+L+"}","gm");return T.replace(P,"")}this._dispatch=function(L,P,D,H){if(M.hasOwnProperty(L))for(var j=0;j<M[L].length;++j){var F=M[L][j](L,P,this,D,H);F&&typeof F!="undefined"&&(P=F)}return P},this.listen=function(T,L){return A(T,L),this},this.makeHtml=function(T){if(!T)return T;var L={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:h,outputModifiers:b,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return T=T.replace(//g,"\xA8T"),T=T.replace(/\$/g,"\xA8D"),T=T.replace(/\r\n/g,`
`),T=T.replace(/\r/g,`
`),T=T.replace(/\u00A0/g,"&nbsp;"),_.smartIndentationFix&&(T=R(T)),T=`

`+T+`

`,T=e.subParser("detab")(T,_,L),T=T.replace(/^[ \t]+$/mg,""),e.helper.forEach(h,function(P){T=e.subParser("runExtension")(P,T,_,L)}),T=e.subParser("metadata")(T,_,L),T=e.subParser("hashPreCodeTags")(T,_,L),T=e.subParser("githubCodeBlocks")(T,_,L),T=e.subParser("hashHTMLBlocks")(T,_,L),T=e.subParser("hashCodeTags")(T,_,L),T=e.subParser("stripLinkDefinitions")(T,_,L),T=e.subParser("blockGamut")(T,_,L),T=e.subParser("unhashHTMLSpans")(T,_,L),T=e.subParser("unescapeSpecialChars")(T,_,L),T=T.replace(/D/g,"$$"),T=T.replace(/T/g,"\xA8"),T=e.subParser("completeHTMLDocument")(T,_,L),e.helper.forEach(b,function(P){T=e.subParser("runExtension")(P,T,_,L)}),w=L.metadata,T},this.makeMarkdown=this.makeMd=function(T,L){if(T=T.replace(/\r\n/g,`
`),T=T.replace(/\r/g,`
`),T=T.replace(/>[ \t]+</,">\xA8NBSP;<"),!L)if(window&&window.document)L=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var P=L.createElement("div");P.innerHTML=T;var D={preList:q(P)};K(P);for(var H=P.childNodes,j="",F=0;F<H.length;F++)j+=e.subParser("makeMarkdown.node")(H[F],D);function K(W){for(var Y=0;Y<W.childNodes.length;++Y){var Z=W.childNodes[Y];Z.nodeType===3?!/\S/.test(Z.nodeValue)&&!/^[ ]+$/.test(Z.nodeValue)?(W.removeChild(Z),--Y):(Z.nodeValue=Z.nodeValue.split(`
`).join(" "),Z.nodeValue=Z.nodeValue.replace(/(\s)+/g,"$1")):Z.nodeType===1&&K(Z)}}function q(W){for(var Y=W.querySelectorAll("pre"),Z=[],X=0;X<Y.length;++X)if(Y[X].childElementCount===1&&Y[X].firstChild.tagName.toLowerCase()==="code"){var Q=Y[X].firstChild.innerHTML.trim(),ue=Y[X].firstChild.getAttribute("data-language")||"";if(ue==="")for(var ce=Y[X].firstChild.className.split(" "),ne=0;ne<ce.length;++ne){var ge=ce[ne].match(/^language-(.+)$/);if(ge!==null){ue=ge[1];break}}Q=e.helper.unescapeHTMLEntities(Q),Z.push(Q),Y[X].outerHTML='<precode language="'+ue+'" precodenum="'+X.toString()+'"></precode>'}else Z.push(Y[X].innerHTML),Y[X].innerHTML="",Y[X].setAttribute("prenum",X.toString());return Z}return j},this.setOption=function(T,L){_[T]=L},this.getOption=function(T){return _[T]},this.getOptions=function(){return _},this.addExtension=function(T,L){L=L||null,O(T,L)},this.useExtension=function(T){O(T)},this.setFlavor=function(T){if(!a.hasOwnProperty(T))throw Error(T+" flavor was not found");var L=a[T];E=T;for(var P in L)L.hasOwnProperty(P)&&(_[P]=L[P])},this.getFlavor=function(){return E},this.removeExtension=function(T){e.helper.isArray(T)||(T=[T]);for(var L=0;L<T.length;++L){for(var P=T[L],D=0;D<h.length;++D)h[D]===P&&h.splice(D,1);for(var H=0;H<b.length;++H)b[H]===P&&b.splice(H,1)}},this.getAllExtensions=function(){return{language:h,output:b}},this.getMetadata=function(T){return T?w.raw:w.parsed},this.getMetadataFormat=function(){return w.format},this._setMetadataPair=function(T,L){w.parsed[T]=L},this._setMetadataFormat=function(T){w.format=T},this._setMetadataRaw=function(T){w.raw=T}},e.subParser("anchors",function(c,_,h){"use strict";c=h.converter._dispatch("anchors.before",c,_,h);var b=function(M,E,w,S,O,B,A){if(e.helper.isUndefined(A)&&(A=""),w=w.toLowerCase(),M.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)S="";else if(!S)if(w||(w=E.toLowerCase().replace(/ ?\n/g," ")),S="#"+w,!e.helper.isUndefined(h.gUrls[w]))S=h.gUrls[w],e.helper.isUndefined(h.gTitles[w])||(A=h.gTitles[w]);else return M;S=S.replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback);var R='<a href="'+S+'"';return A!==""&&A!==null&&(A=A.replace(/"/g,"&quot;"),A=A.replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback),R+=' title="'+A+'"'),_.openLinksInNewWindow&&!/^#/.test(S)&&(R+=' rel="noopener noreferrer" target="\xA8E95Eblank"'),R+=">"+E+"</a>",R};return c=c.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,b),c=c.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,b),c=c.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,b),c=c.replace(/\[([^\[\]]+)]()()()()()/g,b),_.ghMentions&&(c=c.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(M,E,w,S,O){if(w==="\\")return E+S;if(!e.helper.isString(_.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var B=_.ghMentionsLink.replace(/\{u}/g,O),A="";return _.openLinksInNewWindow&&(A=' rel="noopener noreferrer" target="\xA8E95Eblank"'),E+'<a href="'+B+'"'+A+">"+S+"</a>"})),c=h.converter._dispatch("anchors.after",c,_,h),c});var p=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,g=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,m=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,k=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,y=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,v=function(c){"use strict";return function(_,h,b,M,E,w,S){b=b.replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback);var O=b,B="",A="",R=h||"",T=S||"";return/^www\./i.test(b)&&(b=b.replace(/^www\./i,"http://www.")),c.excludeTrailingPunctuationFromURLs&&w&&(B=w),c.openLinksInNewWindow&&(A=' rel="noopener noreferrer" target="\xA8E95Eblank"'),R+'<a href="'+b+'"'+A+">"+O+"</a>"+B+T}},x=function(c,_){"use strict";return function(h,b,M){var E="mailto:";return b=b||"",M=e.subParser("unescapeSpecialChars")(M,c,_),c.encodeEmails?(E=e.helper.encodeEmailAddress(E+M),M=e.helper.encodeEmailAddress(M)):E=E+M,b+'<a href="'+E+'">'+M+"</a>"}};e.subParser("autoLinks",function(c,_,h){"use strict";return c=h.converter._dispatch("autoLinks.before",c,_,h),c=c.replace(m,v(_)),c=c.replace(y,x(_,h)),c=h.converter._dispatch("autoLinks.after",c,_,h),c}),e.subParser("simplifiedAutoLinks",function(c,_,h){"use strict";return _.simplifiedAutoLink&&(c=h.converter._dispatch("simplifiedAutoLinks.before",c,_,h),_.excludeTrailingPunctuationFromURLs?c=c.replace(g,v(_)):c=c.replace(p,v(_)),c=c.replace(k,x(_,h)),c=h.converter._dispatch("simplifiedAutoLinks.after",c,_,h)),c}),e.subParser("blockGamut",function(c,_,h){"use strict";return c=h.converter._dispatch("blockGamut.before",c,_,h),c=e.subParser("blockQuotes")(c,_,h),c=e.subParser("headers")(c,_,h),c=e.subParser("horizontalRule")(c,_,h),c=e.subParser("lists")(c,_,h),c=e.subParser("codeBlocks")(c,_,h),c=e.subParser("tables")(c,_,h),c=e.subParser("hashHTMLBlocks")(c,_,h),c=e.subParser("paragraphs")(c,_,h),c=h.converter._dispatch("blockGamut.after",c,_,h),c}),e.subParser("blockQuotes",function(c,_,h){"use strict";c=h.converter._dispatch("blockQuotes.before",c,_,h),c=c+`

`;var b=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return _.splitAdjacentBlockquotes&&(b=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),c=c.replace(b,function(M){return M=M.replace(/^[ \t]*>[ \t]?/gm,""),M=M.replace(/0/g,""),M=M.replace(/^[ \t]+$/gm,""),M=e.subParser("githubCodeBlocks")(M,_,h),M=e.subParser("blockGamut")(M,_,h),M=M.replace(/(^|\n)/g,"$1  "),M=M.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(E,w){var S=w;return S=S.replace(/^  /mg,"\xA80"),S=S.replace(/0/g,""),S}),e.subParser("hashBlock")(`<blockquote>
`+M+`
</blockquote>`,_,h)}),c=h.converter._dispatch("blockQuotes.after",c,_,h),c}),e.subParser("codeBlocks",function(c,_,h){"use strict";c=h.converter._dispatch("codeBlocks.before",c,_,h),c+="\xA80";var b=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return c=c.replace(b,function(M,E,w){var S=E,O=w,B=`
`;return S=e.subParser("outdent")(S,_,h),S=e.subParser("encodeCode")(S,_,h),S=e.subParser("detab")(S,_,h),S=S.replace(/^\n+/g,""),S=S.replace(/\n+$/g,""),_.omitExtraWLInCodeBlocks&&(B=""),S="<pre><code>"+S+B+"</code></pre>",e.subParser("hashBlock")(S,_,h)+O}),c=c.replace(/0/,""),c=h.converter._dispatch("codeBlocks.after",c,_,h),c}),e.subParser("codeSpans",function(c,_,h){"use strict";return c=h.converter._dispatch("codeSpans.before",c,_,h),typeof c=="undefined"&&(c=""),c=c.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(b,M,E,w){var S=w;return S=S.replace(/^([ \t]*)/g,""),S=S.replace(/[ \t]*$/g,""),S=e.subParser("encodeCode")(S,_,h),S=M+"<code>"+S+"</code>",S=e.subParser("hashHTMLSpans")(S,_,h),S}),c=h.converter._dispatch("codeSpans.after",c,_,h),c}),e.subParser("completeHTMLDocument",function(c,_,h){"use strict";if(!_.completeHTMLDocument)return c;c=h.converter._dispatch("completeHTMLDocument.before",c,_,h);var b="html",M=`<!DOCTYPE HTML>
`,E="",w=`<meta charset="utf-8">
`,S="",O="";typeof h.metadata.parsed.doctype!="undefined"&&(M="<!DOCTYPE "+h.metadata.parsed.doctype+`>
`,b=h.metadata.parsed.doctype.toString().toLowerCase(),(b==="html"||b==="html5")&&(w='<meta charset="utf-8">'));for(var B in h.metadata.parsed)if(h.metadata.parsed.hasOwnProperty(B))switch(B.toLowerCase()){case"doctype":break;case"title":E="<title>"+h.metadata.parsed.title+`</title>
`;break;case"charset":b==="html"||b==="html5"?w='<meta charset="'+h.metadata.parsed.charset+`">
`:w='<meta name="charset" content="'+h.metadata.parsed.charset+`">
`;break;case"language":case"lang":S=' lang="'+h.metadata.parsed[B]+'"',O+='<meta name="'+B+'" content="'+h.metadata.parsed[B]+`">
`;break;default:O+='<meta name="'+B+'" content="'+h.metadata.parsed[B]+`">
`}return c=M+"<html"+S+`>
<head>
`+E+w+O+`</head>
<body>
`+c.trim()+`
</body>
</html>`,c=h.converter._dispatch("completeHTMLDocument.after",c,_,h),c}),e.subParser("detab",function(c,_,h){"use strict";return c=h.converter._dispatch("detab.before",c,_,h),c=c.replace(/\t(?=\t)/g,"    "),c=c.replace(/\t/g,"\xA8A\xA8B"),c=c.replace(/B(.+?)A/g,function(b,M){for(var E=M,w=4-E.length%4,S=0;S<w;S++)E+=" ";return E}),c=c.replace(/A/g,"    "),c=c.replace(/B/g,""),c=h.converter._dispatch("detab.after",c,_,h),c}),e.subParser("ellipsis",function(c,_,h){"use strict";return _.ellipsis&&(c=h.converter._dispatch("ellipsis.before",c,_,h),c=c.replace(/\.\.\./g,"\u2026"),c=h.converter._dispatch("ellipsis.after",c,_,h)),c}),e.subParser("emoji",function(c,_,h){"use strict";if(!_.emoji)return c;c=h.converter._dispatch("emoji.before",c,_,h);var b=/:([\S]+?):/g;return c=c.replace(b,function(M,E){return e.helper.emojis.hasOwnProperty(E)?e.helper.emojis[E]:M}),c=h.converter._dispatch("emoji.after",c,_,h),c}),e.subParser("encodeAmpsAndAngles",function(c,_,h){"use strict";return c=h.converter._dispatch("encodeAmpsAndAngles.before",c,_,h),c=c.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),c=c.replace(/<(?![a-z\/?$!])/gi,"&lt;"),c=c.replace(/</g,"&lt;"),c=c.replace(/>/g,"&gt;"),c=h.converter._dispatch("encodeAmpsAndAngles.after",c,_,h),c}),e.subParser("encodeBackslashEscapes",function(c,_,h){"use strict";return c=h.converter._dispatch("encodeBackslashEscapes.before",c,_,h),c=c.replace(/\\(\\)/g,e.helper.escapeCharactersCallback),c=c.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,e.helper.escapeCharactersCallback),c=h.converter._dispatch("encodeBackslashEscapes.after",c,_,h),c}),e.subParser("encodeCode",function(c,_,h){"use strict";return c=h.converter._dispatch("encodeCode.before",c,_,h),c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,e.helper.escapeCharactersCallback),c=h.converter._dispatch("encodeCode.after",c,_,h),c}),e.subParser("escapeSpecialCharsWithinTagAttributes",function(c,_,h){"use strict";c=h.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",c,_,h);var b=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,M=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return c=c.replace(b,function(E){return E.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,e.helper.escapeCharactersCallback)}),c=c.replace(M,function(E){return E.replace(/([\\`*_~=|])/g,e.helper.escapeCharactersCallback)}),c=h.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",c,_,h),c}),e.subParser("githubCodeBlocks",function(c,_,h){"use strict";return _.ghCodeBlocks?(c=h.converter._dispatch("githubCodeBlocks.before",c,_,h),c+="\xA80",c=c.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(b,M,E,w){var S=_.omitExtraWLInCodeBlocks?"":`
`;return w=e.subParser("encodeCode")(w,_,h),w=e.subParser("detab")(w,_,h),w=w.replace(/^\n+/g,""),w=w.replace(/\n+$/g,""),w="<pre><code"+(E?' class="'+E+" language-"+E+'"':"")+">"+w+S+"</code></pre>",w=e.subParser("hashBlock")(w,_,h),`

\xA8G`+(h.ghCodeBlocks.push({text:b,codeblock:w})-1)+`G

`}),c=c.replace(/0/,""),h.converter._dispatch("githubCodeBlocks.after",c,_,h)):c}),e.subParser("hashBlock",function(c,_,h){"use strict";return c=h.converter._dispatch("hashBlock.before",c,_,h),c=c.replace(/(^\n+|\n+$)/g,""),c=`

\xA8K`+(h.gHtmlBlocks.push(c)-1)+`K

`,c=h.converter._dispatch("hashBlock.after",c,_,h),c}),e.subParser("hashCodeTags",function(c,_,h){"use strict";c=h.converter._dispatch("hashCodeTags.before",c,_,h);var b=function(M,E,w,S){var O=w+e.subParser("encodeCode")(E,_,h)+S;return"\xA8C"+(h.gHtmlSpans.push(O)-1)+"C"};return c=e.helper.replaceRecursiveRegExp(c,b,"<code\\b[^>]*>","</code>","gim"),c=h.converter._dispatch("hashCodeTags.after",c,_,h),c}),e.subParser("hashElement",function(c,_,h){"use strict";return function(b,M){var E=M;return E=E.replace(/\n\n/g,`
`),E=E.replace(/^\n/,""),E=E.replace(/\n+$/g,""),E=`

\xA8K`+(h.gHtmlBlocks.push(E)-1)+`K

`,E}}),e.subParser("hashHTMLBlocks",function(c,_,h){"use strict";c=h.converter._dispatch("hashHTMLBlocks.before",c,_,h);var b=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],M=function(T,L,P,D){var H=T;return P.search(/\bmarkdown\b/)!==-1&&(H=P+h.converter.makeHtml(L)+D),`

\xA8K`+(h.gHtmlBlocks.push(H)-1)+`K

`};_.backslashEscapesHTMLTags&&(c=c.replace(/\\<(\/?[^>]+?)>/g,function(T,L){return"&lt;"+L+"&gt;"}));for(var E=0;E<b.length;++E)for(var w,S=new RegExp("^ {0,3}(<"+b[E]+"\\b[^>]*>)","im"),O="<"+b[E]+"\\b[^>]*>",B="</"+b[E]+">";(w=e.helper.regexIndexOf(c,S))!==-1;){var A=e.helper.splitAtIndex(c,w),R=e.helper.replaceRecursiveRegExp(A[1],M,O,B,"im");if(R===A[1])break;c=A[0].concat(R)}return c=c.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(c,_,h)),c=e.helper.replaceRecursiveRegExp(c,function(T){return`

\xA8K`+(h.gHtmlBlocks.push(T)-1)+`K

`},"^ {0,3}<!--","-->","gm"),c=c.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(c,_,h)),c=h.converter._dispatch("hashHTMLBlocks.after",c,_,h),c}),e.subParser("hashHTMLSpans",function(c,_,h){"use strict";c=h.converter._dispatch("hashHTMLSpans.before",c,_,h);function b(M){return"\xA8C"+(h.gHtmlSpans.push(M)-1)+"C"}return c=c.replace(/<[^>]+?\/>/gi,function(M){return b(M)}),c=c.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(M){return b(M)}),c=c.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(M){return b(M)}),c=c.replace(/<[^>]+?>/gi,function(M){return b(M)}),c=h.converter._dispatch("hashHTMLSpans.after",c,_,h),c}),e.subParser("unhashHTMLSpans",function(c,_,h){"use strict";c=h.converter._dispatch("unhashHTMLSpans.before",c,_,h);for(var b=0;b<h.gHtmlSpans.length;++b){for(var M=h.gHtmlSpans[b],E=0;/C(\d+)C/.test(M);){var w=RegExp.$1;if(M=M.replace("\xA8C"+w+"C",h.gHtmlSpans[w]),E===10){console.error("maximum nesting of 10 spans reached!!!");break}++E}c=c.replace("\xA8C"+b+"C",M)}return c=h.converter._dispatch("unhashHTMLSpans.after",c,_,h),c}),e.subParser("hashPreCodeTags",function(c,_,h){"use strict";c=h.converter._dispatch("hashPreCodeTags.before",c,_,h);var b=function(M,E,w,S){var O=w+e.subParser("encodeCode")(E,_,h)+S;return`

\xA8G`+(h.ghCodeBlocks.push({text:M,codeblock:O})-1)+`G

`};return c=e.helper.replaceRecursiveRegExp(c,b,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),c=h.converter._dispatch("hashPreCodeTags.after",c,_,h),c}),e.subParser("headers",function(c,_,h){"use strict";c=h.converter._dispatch("headers.before",c,_,h);var b=isNaN(parseInt(_.headerLevelStart))?1:parseInt(_.headerLevelStart),M=_.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,E=_.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;c=c.replace(M,function(O,B){var A=e.subParser("spanGamut")(B,_,h),R=_.noHeaderId?"":' id="'+S(B)+'"',T=b,L="<h"+T+R+">"+A+"</h"+T+">";return e.subParser("hashBlock")(L,_,h)}),c=c.replace(E,function(O,B){var A=e.subParser("spanGamut")(B,_,h),R=_.noHeaderId?"":' id="'+S(B)+'"',T=b+1,L="<h"+T+R+">"+A+"</h"+T+">";return e.subParser("hashBlock")(L,_,h)});var w=_.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;c=c.replace(w,function(O,B,A){var R=A;_.customizedHeaderId&&(R=A.replace(/\s?\{([^{]+?)}\s*$/,""));var T=e.subParser("spanGamut")(R,_,h),L=_.noHeaderId?"":' id="'+S(A)+'"',P=b-1+B.length,D="<h"+P+L+">"+T+"</h"+P+">";return e.subParser("hashBlock")(D,_,h)});function S(O){var B,A;if(_.customizedHeaderId){var R=O.match(/\{([^{]+?)}\s*$/);R&&R[1]&&(O=R[1])}return B=O,e.helper.isString(_.prefixHeaderId)?A=_.prefixHeaderId:_.prefixHeaderId===!0?A="section-":A="",_.rawPrefixHeaderId||(B=A+B),_.ghCompatibleHeaderId?B=B.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():_.rawHeaderId?B=B.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"\xA8").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():B=B.replace(/[^\w]/g,"").toLowerCase(),_.rawPrefixHeaderId&&(B=A+B),h.hashLinkCounts[B]?B=B+"-"+h.hashLinkCounts[B]++:h.hashLinkCounts[B]=1,B}return c=h.converter._dispatch("headers.after",c,_,h),c}),e.subParser("horizontalRule",function(c,_,h){"use strict";c=h.converter._dispatch("horizontalRule.before",c,_,h);var b=e.subParser("hashBlock")("<hr />",_,h);return c=c.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,b),c=c.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,b),c=c.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,b),c=h.converter._dispatch("horizontalRule.after",c,_,h),c}),e.subParser("images",function(c,_,h){"use strict";c=h.converter._dispatch("images.before",c,_,h);var b=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,M=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,E=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,w=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,S=/!\[([^\[\]]+)]()()()()()/g;function O(A,R,T,L,P,D,H,j){return L=L.replace(/\s/g,""),B(A,R,T,L,P,D,H,j)}function B(A,R,T,L,P,D,H,j){var F=h.gUrls,K=h.gTitles,q=h.gDimensions;if(T=T.toLowerCase(),j||(j=""),A.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)L="";else if(L===""||L===null)if((T===""||T===null)&&(T=R.toLowerCase().replace(/ ?\n/g," ")),L="#"+T,!e.helper.isUndefined(F[T]))L=F[T],e.helper.isUndefined(K[T])||(j=K[T]),e.helper.isUndefined(q[T])||(P=q[T].width,D=q[T].height);else return A;R=R.replace(/"/g,"&quot;").replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback),L=L.replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback);var W='<img src="'+L+'" alt="'+R+'"';return j&&e.helper.isString(j)&&(j=j.replace(/"/g,"&quot;").replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback),W+=' title="'+j+'"'),P&&D&&(P=P==="*"?"auto":P,D=D==="*"?"auto":D,W+=' width="'+P+'"',W+=' height="'+D+'"'),W+=" />",W}return c=c.replace(w,B),c=c.replace(E,O),c=c.replace(M,B),c=c.replace(b,B),c=c.replace(S,B),c=h.converter._dispatch("images.after",c,_,h),c}),e.subParser("italicsAndBold",function(c,_,h){"use strict";c=h.converter._dispatch("italicsAndBold.before",c,_,h);function b(M,E,w){return E+M+w}return _.literalMidWordUnderscores?(c=c.replace(/\b___(\S[\s\S]*?)___\b/g,function(M,E){return b(E,"<strong><em>","</em></strong>")}),c=c.replace(/\b__(\S[\s\S]*?)__\b/g,function(M,E){return b(E,"<strong>","</strong>")}),c=c.replace(/\b_(\S[\s\S]*?)_\b/g,function(M,E){return b(E,"<em>","</em>")})):(c=c.replace(/___(\S[\s\S]*?)___/g,function(M,E){return/\S$/.test(E)?b(E,"<strong><em>","</em></strong>"):M}),c=c.replace(/__(\S[\s\S]*?)__/g,function(M,E){return/\S$/.test(E)?b(E,"<strong>","</strong>"):M}),c=c.replace(/_([^\s_][\s\S]*?)_/g,function(M,E){return/\S$/.test(E)?b(E,"<em>","</em>"):M})),_.literalMidWordAsterisks?(c=c.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(M,E,w){return b(w,E+"<strong><em>","</em></strong>")}),c=c.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(M,E,w){return b(w,E+"<strong>","</strong>")}),c=c.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(M,E,w){return b(w,E+"<em>","</em>")})):(c=c.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(M,E){return/\S$/.test(E)?b(E,"<strong><em>","</em></strong>"):M}),c=c.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(M,E){return/\S$/.test(E)?b(E,"<strong>","</strong>"):M}),c=c.replace(/\*([^\s*][\s\S]*?)\*/g,function(M,E){return/\S$/.test(E)?b(E,"<em>","</em>"):M})),c=h.converter._dispatch("italicsAndBold.after",c,_,h),c}),e.subParser("lists",function(c,_,h){"use strict";function b(w,S){h.gListLevel++,w=w.replace(/\n{2,}$/,`
`),w+="\xA80";var O=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,B=/\n[ \t]*\n(?!0)/.test(w);return _.disableForced4SpacesIndentedSublists&&(O=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),w=w.replace(O,function(A,R,T,L,P,D,H){H=H&&H.trim()!=="";var j=e.subParser("outdent")(P,_,h),F="";return D&&_.tasklists&&(F=' class="task-list-item" style="list-style-type: none;"',j=j.replace(/^[ \t]*\[(x|X| )?]/m,function(){var K='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return H&&(K+=" checked"),K+=">",K})),j=j.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(K){return"\xA8A"+K}),R||j.search(/\n{2,}/)>-1?(j=e.subParser("githubCodeBlocks")(j,_,h),j=e.subParser("blockGamut")(j,_,h)):(j=e.subParser("lists")(j,_,h),j=j.replace(/\n$/,""),j=e.subParser("hashHTMLBlocks")(j,_,h),j=j.replace(/\n\n+/g,`

`),B?j=e.subParser("paragraphs")(j,_,h):j=e.subParser("spanGamut")(j,_,h)),j=j.replace("\xA8A",""),j="<li"+F+">"+j+`</li>
`,j}),w=w.replace(/0/g,""),h.gListLevel--,S&&(w=w.replace(/\s+$/,"")),w}function M(w,S){if(S==="ol"){var O=w.match(/^ *(\d+)\./);if(O&&O[1]!=="1")return' start="'+O[1]+'"'}return""}function E(w,S,O){var B=_.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,A=_.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,R=S==="ul"?B:A,T="";if(w.search(R)!==-1)(function P(D){var H=D.search(R),j=M(w,S);H!==-1?(T+=`

<`+S+j+`>
`+b(D.slice(0,H),!!O)+"</"+S+`>
`,S=S==="ul"?"ol":"ul",R=S==="ul"?B:A,P(D.slice(H))):T+=`

<`+S+j+`>
`+b(D,!!O)+"</"+S+`>
`})(w);else{var L=M(w,S);T=`

<`+S+L+`>
`+b(w,!!O)+"</"+S+`>
`}return T}return c=h.converter._dispatch("lists.before",c,_,h),c+="\xA80",h.gListLevel?c=c.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(w,S,O){var B=O.search(/[*+-]/g)>-1?"ul":"ol";return E(S,B,!0)}):c=c.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(w,S,O,B){var A=B.search(/[*+-]/g)>-1?"ul":"ol";return E(O,A,!1)}),c=c.replace(/0/,""),c=h.converter._dispatch("lists.after",c,_,h),c}),e.subParser("metadata",function(c,_,h){"use strict";if(!_.metadata)return c;c=h.converter._dispatch("metadata.before",c,_,h);function b(M){h.metadata.raw=M,M=M.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),M=M.replace(/\n {4}/g," "),M.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(E,w,S){return h.metadata.parsed[w]=S,""})}return c=c.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(M,E,w){return b(w),"\xA8M"}),c=c.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(M,E,w){return E&&(h.metadata.format=E),b(w),"\xA8M"}),c=c.replace(/M/g,""),c=h.converter._dispatch("metadata.after",c,_,h),c}),e.subParser("outdent",function(c,_,h){"use strict";return c=h.converter._dispatch("outdent.before",c,_,h),c=c.replace(/^(\t|[ ]{1,4})/gm,"\xA80"),c=c.replace(/0/g,""),c=h.converter._dispatch("outdent.after",c,_,h),c}),e.subParser("paragraphs",function(c,_,h){"use strict";c=h.converter._dispatch("paragraphs.before",c,_,h),c=c.replace(/^\n+/g,""),c=c.replace(/\n+$/g,"");for(var b=c.split(/\n{2,}/g),M=[],E=b.length,w=0;w<E;w++){var S=b[w];S.search(/(K|G)(\d+)\1/g)>=0?M.push(S):S.search(/\S/)>=0&&(S=e.subParser("spanGamut")(S,_,h),S=S.replace(/^([ \t]*)/g,"<p>"),S+="</p>",M.push(S))}for(E=M.length,w=0;w<E;w++){for(var O="",B=M[w],A=!1;/(K|G)(\d+)\1/.test(B);){var R=RegExp.$1,T=RegExp.$2;R==="K"?O=h.gHtmlBlocks[T]:A?O=e.subParser("encodeCode")(h.ghCodeBlocks[T].text,_,h):O=h.ghCodeBlocks[T].codeblock,O=O.replace(/\$/g,"$$$$"),B=B.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,O),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(B)&&(A=!0)}M[w]=B}return c=M.join(`
`),c=c.replace(/^\n+/g,""),c=c.replace(/\n+$/g,""),h.converter._dispatch("paragraphs.after",c,_,h)}),e.subParser("runExtension",function(c,_,h,b){"use strict";if(c.filter)_=c.filter(_,b.converter,h);else if(c.regex){var M=c.regex;M instanceof RegExp||(M=new RegExp(M,"g")),_=_.replace(M,c.replace)}return _}),e.subParser("spanGamut",function(c,_,h){"use strict";return c=h.converter._dispatch("spanGamut.before",c,_,h),c=e.subParser("codeSpans")(c,_,h),c=e.subParser("escapeSpecialCharsWithinTagAttributes")(c,_,h),c=e.subParser("encodeBackslashEscapes")(c,_,h),c=e.subParser("images")(c,_,h),c=e.subParser("anchors")(c,_,h),c=e.subParser("autoLinks")(c,_,h),c=e.subParser("simplifiedAutoLinks")(c,_,h),c=e.subParser("emoji")(c,_,h),c=e.subParser("underline")(c,_,h),c=e.subParser("italicsAndBold")(c,_,h),c=e.subParser("strikethrough")(c,_,h),c=e.subParser("ellipsis")(c,_,h),c=e.subParser("hashHTMLSpans")(c,_,h),c=e.subParser("encodeAmpsAndAngles")(c,_,h),_.simpleLineBreaks?/\n\nK/.test(c)||(c=c.replace(/\n+/g,`<br />
`)):c=c.replace(/  +\n/g,`<br />
`),c=h.converter._dispatch("spanGamut.after",c,_,h),c}),e.subParser("strikethrough",function(c,_,h){"use strict";function b(M){return _.simplifiedAutoLink&&(M=e.subParser("simplifiedAutoLinks")(M,_,h)),"<del>"+M+"</del>"}return _.strikethrough&&(c=h.converter._dispatch("strikethrough.before",c,_,h),c=c.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(M,E){return b(E)}),c=h.converter._dispatch("strikethrough.after",c,_,h)),c}),e.subParser("stripLinkDefinitions",function(c,_,h){"use strict";var b=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,M=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;c+="\xA80";var E=function(w,S,O,B,A,R,T){return S=S.toLowerCase(),c.toLowerCase().split(S).length-1<2?w:(O.match(/^data:.+?\/.+?;base64,/)?h.gUrls[S]=O.replace(/\s/g,""):h.gUrls[S]=e.subParser("encodeAmpsAndAngles")(O,_,h),R?R+T:(T&&(h.gTitles[S]=T.replace(/"|'/g,"&quot;")),_.parseImgDimensions&&B&&A&&(h.gDimensions[S]={width:B,height:A}),""))};return c=c.replace(M,E),c=c.replace(b,E),c=c.replace(/0/,""),c}),e.subParser("tables",function(c,_,h){"use strict";if(!_.tables)return c;var b=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,M=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function E(A){return/^:[ \t]*--*$/.test(A)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(A)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(A)?' style="text-align:center;"':""}function w(A,R){var T="";return A=A.trim(),(_.tablesHeaderId||_.tableHeaderId)&&(T=' id="'+A.replace(/ /g,"_").toLowerCase()+'"'),A=e.subParser("spanGamut")(A,_,h),"<th"+T+R+">"+A+`</th>
`}function S(A,R){var T=e.subParser("spanGamut")(A,_,h);return"<td"+R+">"+T+`</td>
`}function O(A,R){for(var T=`<table>
<thead>
<tr>
`,L=A.length,P=0;P<L;++P)T+=A[P];for(T+=`</tr>
</thead>
<tbody>
`,P=0;P<R.length;++P){T+=`<tr>
`;for(var D=0;D<L;++D)T+=R[P][D];T+=`</tr>
`}return T+=`</tbody>
</table>
`,T}function B(A){var R,T=A.split(`
`);for(R=0;R<T.length;++R)/^ {0,3}\|/.test(T[R])&&(T[R]=T[R].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(T[R])&&(T[R]=T[R].replace(/\|[ \t]*$/,"")),T[R]=e.subParser("codeSpans")(T[R],_,h);var L=T[0].split("|").map(function(W){return W.trim()}),P=T[1].split("|").map(function(W){return W.trim()}),D=[],H=[],j=[],F=[];for(T.shift(),T.shift(),R=0;R<T.length;++R)T[R].trim()!==""&&D.push(T[R].split("|").map(function(W){return W.trim()}));if(L.length<P.length)return A;for(R=0;R<P.length;++R)j.push(E(P[R]));for(R=0;R<L.length;++R)e.helper.isUndefined(j[R])&&(j[R]=""),H.push(w(L[R],j[R]));for(R=0;R<D.length;++R){for(var K=[],q=0;q<H.length;++q)e.helper.isUndefined(D[R][q]),K.push(S(D[R][q],j[q]));F.push(K)}return O(H,F)}return c=h.converter._dispatch("tables.before",c,_,h),c=c.replace(/\\(\|)/g,e.helper.escapeCharactersCallback),c=c.replace(b,B),c=c.replace(M,B),c=h.converter._dispatch("tables.after",c,_,h),c}),e.subParser("underline",function(c,_,h){"use strict";return _.underline&&(c=h.converter._dispatch("underline.before",c,_,h),_.literalMidWordUnderscores?(c=c.replace(/\b___(\S[\s\S]*?)___\b/g,function(b,M){return"<u>"+M+"</u>"}),c=c.replace(/\b__(\S[\s\S]*?)__\b/g,function(b,M){return"<u>"+M+"</u>"})):(c=c.replace(/___(\S[\s\S]*?)___/g,function(b,M){return/\S$/.test(M)?"<u>"+M+"</u>":b}),c=c.replace(/__(\S[\s\S]*?)__/g,function(b,M){return/\S$/.test(M)?"<u>"+M+"</u>":b})),c=c.replace(/(_)/g,e.helper.escapeCharactersCallback),c=h.converter._dispatch("underline.after",c,_,h)),c}),e.subParser("unescapeSpecialChars",function(c,_,h){"use strict";return c=h.converter._dispatch("unescapeSpecialChars.before",c,_,h),c=c.replace(/E(\d+)E/g,function(b,M){var E=parseInt(M);return String.fromCharCode(E)}),c=h.converter._dispatch("unescapeSpecialChars.after",c,_,h),c}),e.subParser("makeMarkdown.blockquote",function(c,_){"use strict";var h="";if(c.hasChildNodes())for(var b=c.childNodes,M=b.length,E=0;E<M;++E){var w=e.subParser("makeMarkdown.node")(b[E],_);w!==""&&(h+=w)}return h=h.trim(),h="> "+h.split(`
`).join(`
> `),h}),e.subParser("makeMarkdown.codeBlock",function(c,_){"use strict";var h=c.getAttribute("language"),b=c.getAttribute("precodenum");return"```"+h+`
`+_.preList[b]+"\n```"}),e.subParser("makeMarkdown.codeSpan",function(c){"use strict";return"`"+c.innerHTML+"`"}),e.subParser("makeMarkdown.emphasis",function(c,_){"use strict";var h="";if(c.hasChildNodes()){h+="*";for(var b=c.childNodes,M=b.length,E=0;E<M;++E)h+=e.subParser("makeMarkdown.node")(b[E],_);h+="*"}return h}),e.subParser("makeMarkdown.header",function(c,_,h){"use strict";var b=new Array(h+1).join("#"),M="";if(c.hasChildNodes()){M=b+" ";for(var E=c.childNodes,w=E.length,S=0;S<w;++S)M+=e.subParser("makeMarkdown.node")(E[S],_)}return M}),e.subParser("makeMarkdown.hr",function(){"use strict";return"---"}),e.subParser("makeMarkdown.image",function(c){"use strict";var _="";return c.hasAttribute("src")&&(_+="!["+c.getAttribute("alt")+"](",_+="<"+c.getAttribute("src")+">",c.hasAttribute("width")&&c.hasAttribute("height")&&(_+=" ="+c.getAttribute("width")+"x"+c.getAttribute("height")),c.hasAttribute("title")&&(_+=' "'+c.getAttribute("title")+'"'),_+=")"),_}),e.subParser("makeMarkdown.links",function(c,_){"use strict";var h="";if(c.hasChildNodes()&&c.hasAttribute("href")){var b=c.childNodes,M=b.length;h="[";for(var E=0;E<M;++E)h+=e.subParser("makeMarkdown.node")(b[E],_);h+="](",h+="<"+c.getAttribute("href")+">",c.hasAttribute("title")&&(h+=' "'+c.getAttribute("title")+'"'),h+=")"}return h}),e.subParser("makeMarkdown.list",function(c,_,h){"use strict";var b="";if(!c.hasChildNodes())return"";for(var M=c.childNodes,E=M.length,w=c.getAttribute("start")||1,S=0;S<E;++S)if(!(typeof M[S].tagName=="undefined"||M[S].tagName.toLowerCase()!=="li")){var O="";h==="ol"?O=w.toString()+". ":O="- ",b+=O+e.subParser("makeMarkdown.listItem")(M[S],_),++w}return b+=`
<!-- -->
`,b.trim()}),e.subParser("makeMarkdown.listItem",function(c,_){"use strict";for(var h="",b=c.childNodes,M=b.length,E=0;E<M;++E)h+=e.subParser("makeMarkdown.node")(b[E],_);return/\n$/.test(h)?h=h.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):h+=`
`,h}),e.subParser("makeMarkdown.node",function(c,_,h){"use strict";h=h||!1;var b="";if(c.nodeType===3)return e.subParser("makeMarkdown.txt")(c,_);if(c.nodeType===8)return"<!--"+c.data+`-->

`;if(c.nodeType!==1)return"";var M=c.tagName.toLowerCase();switch(M){case"h1":h||(b=e.subParser("makeMarkdown.header")(c,_,1)+`

`);break;case"h2":h||(b=e.subParser("makeMarkdown.header")(c,_,2)+`

`);break;case"h3":h||(b=e.subParser("makeMarkdown.header")(c,_,3)+`

`);break;case"h4":h||(b=e.subParser("makeMarkdown.header")(c,_,4)+`

`);break;case"h5":h||(b=e.subParser("makeMarkdown.header")(c,_,5)+`

`);break;case"h6":h||(b=e.subParser("makeMarkdown.header")(c,_,6)+`

`);break;case"p":h||(b=e.subParser("makeMarkdown.paragraph")(c,_)+`

`);break;case"blockquote":h||(b=e.subParser("makeMarkdown.blockquote")(c,_)+`

`);break;case"hr":h||(b=e.subParser("makeMarkdown.hr")(c,_)+`

`);break;case"ol":h||(b=e.subParser("makeMarkdown.list")(c,_,"ol")+`

`);break;case"ul":h||(b=e.subParser("makeMarkdown.list")(c,_,"ul")+`

`);break;case"precode":h||(b=e.subParser("makeMarkdown.codeBlock")(c,_)+`

`);break;case"pre":h||(b=e.subParser("makeMarkdown.pre")(c,_)+`

`);break;case"table":h||(b=e.subParser("makeMarkdown.table")(c,_)+`

`);break;case"code":b=e.subParser("makeMarkdown.codeSpan")(c,_);break;case"em":case"i":b=e.subParser("makeMarkdown.emphasis")(c,_);break;case"strong":case"b":b=e.subParser("makeMarkdown.strong")(c,_);break;case"del":b=e.subParser("makeMarkdown.strikethrough")(c,_);break;case"a":b=e.subParser("makeMarkdown.links")(c,_);break;case"img":b=e.subParser("makeMarkdown.image")(c,_);break;default:b=c.outerHTML+`

`}return b}),e.subParser("makeMarkdown.paragraph",function(c,_){"use strict";var h="";if(c.hasChildNodes())for(var b=c.childNodes,M=b.length,E=0;E<M;++E)h+=e.subParser("makeMarkdown.node")(b[E],_);return h=h.trim(),h}),e.subParser("makeMarkdown.pre",function(c,_){"use strict";var h=c.getAttribute("prenum");return"<pre>"+_.preList[h]+"</pre>"}),e.subParser("makeMarkdown.strikethrough",function(c,_){"use strict";var h="";if(c.hasChildNodes()){h+="~~";for(var b=c.childNodes,M=b.length,E=0;E<M;++E)h+=e.subParser("makeMarkdown.node")(b[E],_);h+="~~"}return h}),e.subParser("makeMarkdown.strong",function(c,_){"use strict";var h="";if(c.hasChildNodes()){h+="**";for(var b=c.childNodes,M=b.length,E=0;E<M;++E)h+=e.subParser("makeMarkdown.node")(b[E],_);h+="**"}return h}),e.subParser("makeMarkdown.table",function(c,_){"use strict";var h="",b=[[],[]],M=c.querySelectorAll("thead>tr>th"),E=c.querySelectorAll("tbody>tr"),w,S;for(w=0;w<M.length;++w){var O=e.subParser("makeMarkdown.tableCell")(M[w],_),B="---";if(M[w].hasAttribute("style")){var A=M[w].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(A){case"text-align:left;":B=":---";break;case"text-align:right;":B="---:";break;case"text-align:center;":B=":---:";break}}b[0][w]=O.trim(),b[1][w]=B}for(w=0;w<E.length;++w){var R=b.push([])-1,T=E[w].getElementsByTagName("td");for(S=0;S<M.length;++S){var L=" ";typeof T[S]!="undefined"&&(L=e.subParser("makeMarkdown.tableCell")(T[S],_)),b[R].push(L)}}var P=3;for(w=0;w<b.length;++w)for(S=0;S<b[w].length;++S){var D=b[w][S].length;D>P&&(P=D)}for(w=0;w<b.length;++w){for(S=0;S<b[w].length;++S)w===1?b[w][S].slice(-1)===":"?b[w][S]=e.helper.padEnd(b[w][S].slice(-1),P-1,"-")+":":b[w][S]=e.helper.padEnd(b[w][S],P,"-"):b[w][S]=e.helper.padEnd(b[w][S],P);h+="| "+b[w].join(" | ")+` |
`}return h.trim()}),e.subParser("makeMarkdown.tableCell",function(c,_){"use strict";var h="";if(!c.hasChildNodes())return"";for(var b=c.childNodes,M=b.length,E=0;E<M;++E)h+=e.subParser("makeMarkdown.node")(b[E],_,!0);return h.trim()}),e.subParser("makeMarkdown.txt",function(c){"use strict";var _=c.nodeValue;return _=_.replace(/ +/g," "),_=_.replace(/NBSP;/g," "),_=e.helper.unescapeHTMLEntities(_),_=_.replace(/([*_~|`])/g,"\\$1"),_=_.replace(/^(\s*)>/g,"\\$1>"),_=_.replace(/^#/gm,"\\#"),_=_.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),_=_.replace(/^( {0,3}\d+)\./gm,"$1\\."),_=_.replace(/^( {0,3})([+-])/gm,"$1\\$2"),_=_.replace(/]([\s]*)\(/g,"\\]$1\\("),_=_.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),_});var C=this;typeof define=="function"&&define.amd?define(function(){"use strict";return e}):typeof Hn!="undefined"&&Hn.exports?Hn.exports=e:C.showdown=e}).call(zd)});var Gd=_e((exports,module)=>{frappe.provide("frappe.search");frappe.provide("frappe.tags");frappe.search.AwesomeBar=class{setup(r){var t=this;$(".search-bar").removeClass("hidden");var e=$(r),i=e.get(0);this.options=[],this.global_results=[];var n=new Awesomplete(i,{minChars:0,maxItems:99,autoFirst:!0,list:[],filter:function(s,a){return!0},data:function(s,a){return{label:s.index||"",value:s.value}},item:function(s,a){var l=this.get_item(s.value),u=__(l.label||l.value),d="<span>"+u+"</span>";return l.description&&l.value!==l.description&&(d+='<br><span class="text-muted ellipsis">'+__(l.description)+"</span>"),$("<li></li>").data("item.autocomplete",l).html(`<a style="font-weight:normal">${d}</a>`).get(0)},sort:function(s,a){return a.label-s.label}});i.awesomplete=n,this.awesomplete=n,e.on("input",frappe.utils.debounce(function(s){var a=s.target.value,l=a.trim().replace(/\s\s+/g," "),u=l.lastIndexOf(" ");t.global_results=[],t.options=[],l&&l.length>1?(u!==-1&&t.set_specifics(l.slice(0,u),l.slice(u+1)),t.add_defaults(l),t.options=t.options.concat(t.build_options(l)),t.options=t.options.concat(t.global_results)):(t.options=t.options.concat(t.deduplicate(frappe.search.utils.get_recent_pages(l||""))),t.options=t.options.concat(frappe.search.utils.get_frequent_links())),t.add_help(),n.list=t.deduplicate(t.options)},100));var o=function(){this.autocomplete_open||$(this).trigger("input")};e.on("focus",o),e.on("awesomplete-open",function(s){t.autocomplete_open=s.target}),e.on("awesomplete-close",function(s){t.autocomplete_open=!1}),e.on("awesomplete-select",function(s){var a=s.originalEvent,l=a.text.value,u=n.get_item(l);if(u.route_options&&(frappe.route_options=u.route_options),u.onclick)u.onclick(u.match);else{let d=a.originalEvent;if((d.ctrlKey||d.metaKey)&&(frappe.open_in_new_tab=!0),u.route[0].startsWith("https://")){window.open(u.route[0],"_blank");return}frappe.set_route(u.route)}e.val(""),e.trigger("blur")}),e.on("awesomplete-selectcomplete",function(s){e.val("")}),e.on("keydown",s=>{s.key=="Escape"&&e.trigger("blur")}),frappe.search.utils.setup_recent()}add_help(){this.options.push({value:__("Help on Search"),index:-10,default:"Help",onclick:function(){var r='<table class="table table-bordered">					<tr><td style="width: 50%">'+__("Create a new record")+"</td><td>"+__("new type of document")+"</td></tr>					<tr><td>"+__("List a document type")+"</td><td>"+__("document type..., e.g. customer")+"</td></tr>					<tr><td>"+__("Search in a document type")+"</td><td>"+__("text in document type")+"</td></tr>					<tr><td>"+__("Tags")+"</td><td>"+__("tag name..., e.g. #tag")+"</td></tr>					<tr><td>"+__("Open a module or tool")+"</td><td>"+__("module name...")+"</td></tr>					<tr><td>"+__("Calculate")+"</td><td>"+__("e.g. (55 + 434) / 4 or =Math.sin(Math.PI/2)...")+"</td></tr>				</table>";frappe.msgprint(r,__("Search Help"))}})}set_specifics(r,t){var e=this,i=this.build_options(r);i.forEach(function(n){n.type&&n.type.toLowerCase().indexOf(t.toLowerCase())===0&&e.options.push(n)})}add_defaults(r){this.make_global_search(r),this.make_search_in_current(r),this.make_calculator(r),this.make_random(r)}build_options(r){var t=frappe.search.utils.get_creatables(r).concat(frappe.search.utils.get_search_in_list(r),frappe.search.utils.get_doctypes(r),frappe.search.utils.get_reports(r),frappe.search.utils.get_pages(r),frappe.search.utils.get_workspaces(r),frappe.search.utils.get_dashboards(r),frappe.search.utils.get_recent_pages(r||""),frappe.search.utils.get_executables(r),frappe.search.utils.get_marketplace_apps(r));r.charAt(0)==="#"&&(t=frappe.tags.utils.get_tags(r));var e=this.deduplicate(t);return e.sort(function(i,n){return n.index-i.index})}deduplicate(r){var t=[],e=[];return r.forEach(function(i){if(i.route){i.route[0]==="List"&&i.route[2]!=="Report"&&i.route[2]!=="Inbox"&&i.route.splice(2);var n=typeof i.route=="string"?i.route:i.route.join("/");if(e.indexOf(n)===-1)t.push(i),e.push(n);else{var o=e.indexOf(n);t[o].index<i.index&&!i.recent&&(t[o]=i)}}else t.push(i),e.push("")}),t}set_global_results(r,t){this.global_results=this.global_results.concat(r)}make_global_search(r){r.charAt(0)!=="#"&&this.options.push({label:`
				<span class="flex justify-between text-medium">
					<span class="ellipsis">${__("Search for {0}",[frappe.utils.xss_sanitise(r).bold()])}</span>
					<kbd>\u21B5</kbd>
				</span>
			`,value:__("Search for {0}",[r]),match:r,index:100,default:"Search",onclick:function(){frappe.searchdialog.search.init_search(r,"global_search")}})}make_search_in_current(r){var o,s;var t=frappe.get_route();if(t[0]==="List"&&r.indexOf(" in")===-1){let a=(s=(o=frappe.container.page)==null?void 0:o.list_view)==null?void 0:s.doctype;if(!a)return;var e=frappe.get_meta(a),i=e.title_field||"name",n={};n[i]=["like","%"+r+"%"],this.options.push({label:__("Find {0} in {1}",[r.bold(),__(t[1]).bold()]),value:__("Find {0} in {1}",[r,__(t[1])]),route_options:n,onclick:function(){cur_list.show()},index:90,default:"Current",match:r})}}make_calculator(txt){var first=txt.substr(0,1);if(first==parseInt(first)||first==="("||first==="="){first==="="&&(txt=txt.substr(1));try{var val=eval(txt),formatted_value=__("{0} = {1}",[txt,(val+"").bold()]);this.options.push({label:formatted_value,value:__("{0} = {1}",[txt,val]),match:val,index:80,default:"Calculator",onclick:function(){frappe.msgprint(formatted_value,__("Result"))}})}catch(r){}}}make_random(r){r.toLowerCase().includes("random")&&this.options.push({label:__("Generate Random Password"),value:frappe.utils.get_random(16),onclick:function(){frappe.msgprint(frappe.utils.get_random(16),__("Result"))}})}}});var Jd=_e((Xd,rs)=>{(function(r){if(typeof Xd=="object"&&typeof rs!="undefined")rs.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.localforage=r()}})(function(){var r,t,e;return function i(n,o,s){function a(d,p){if(!o[d]){if(!n[d]){var g=typeof di=="function"&&di;if(!p&&g)return g(d,!0);if(l)return l(d,!0);var m=new Error("Cannot find module '"+d+"'");throw m.code="MODULE_NOT_FOUND",m}var k=o[d]={exports:{}};n[d][0].call(k.exports,function(y){var v=n[d][1][y];return a(v||y)},k,k.exports,i,n,o,s)}return o[d].exports}for(var l=typeof di=="function"&&di,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(i,n,o){(function(s){"use strict";var a=s.MutationObserver||s.WebKitMutationObserver,l;if(a){var u=0,d=new a(y),p=s.document.createTextNode("");d.observe(p,{characterData:!0}),l=function(){p.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel!="undefined"){var g=new s.MessageChannel;g.port1.onmessage=y,l=function(){g.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?l=function(){var x=s.document.createElement("script");x.onreadystatechange=function(){y(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},s.document.documentElement.appendChild(x)}:l=function(){setTimeout(y,0)};var m,k=[];function y(){m=!0;for(var x,C,c=k.length;c;){for(C=k,k=[],x=-1;++x<c;)C[x]();c=k.length}m=!1}n.exports=v;function v(x){k.push(x)===1&&!m&&l()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(i,n,o){"use strict";var s=i(1);function a(){}var l={},u=["REJECTED"],d=["FULFILLED"],p=["PENDING"];n.exports=g;function g(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,b!==a&&v(this,b)}g.prototype.catch=function(b){return this.then(null,b)},g.prototype.then=function(b,M){if(typeof b!="function"&&this.state===d||typeof M!="function"&&this.state===u)return this;var E=new this.constructor(a);if(this.state!==p){var w=this.state===d?b:M;k(E,w,this.outcome)}else this.queue.push(new m(E,b,M));return E};function m(b,M,E){this.promise=b,typeof M=="function"&&(this.onFulfilled=M,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(b){l.resolve(this.promise,b)},m.prototype.otherCallFulfilled=function(b){k(this.promise,this.onFulfilled,b)},m.prototype.callRejected=function(b){l.reject(this.promise,b)},m.prototype.otherCallRejected=function(b){k(this.promise,this.onRejected,b)};function k(b,M,E){s(function(){var w;try{w=M(E)}catch(S){return l.reject(b,S)}w===b?l.reject(b,new TypeError("Cannot resolve promise with itself")):l.resolve(b,w)})}l.resolve=function(b,M){var E=x(y,M);if(E.status==="error")return l.reject(b,E.value);var w=E.value;if(w)v(b,w);else{b.state=d,b.outcome=M;for(var S=-1,O=b.queue.length;++S<O;)b.queue[S].callFulfilled(M)}return b},l.reject=function(b,M){b.state=u,b.outcome=M;for(var E=-1,w=b.queue.length;++E<w;)b.queue[E].callRejected(M);return b};function y(b){var M=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof M=="function")return function(){M.apply(b,arguments)}}function v(b,M){var E=!1;function w(A){E||(E=!0,l.reject(b,A))}function S(A){E||(E=!0,l.resolve(b,A))}function O(){M(S,w)}var B=x(O);B.status==="error"&&w(B.value)}function x(b,M){var E={};try{E.value=b(M),E.status="success"}catch(w){E.status="error",E.value=w}return E}g.resolve=C;function C(b){return b instanceof this?b:l.resolve(new this(a),b)}g.reject=c;function c(b){var M=new this(a);return l.reject(M,b)}g.all=_;function _(b){var M=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=b.length,w=!1;if(!E)return this.resolve([]);for(var S=new Array(E),O=0,B=-1,A=new this(a);++B<E;)R(b[B],B);return A;function R(T,L){M.resolve(T).then(P,function(D){w||(w=!0,l.reject(A,D))});function P(D){S[L]=D,++O===E&&!w&&(w=!0,l.resolve(A,S))}}}g.race=h;function h(b){var M=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=b.length,w=!1;if(!E)return this.resolve([]);for(var S=-1,O=new this(a);++S<E;)B(b[S]);return O;function B(A){M.resolve(A).then(function(R){w||(w=!0,l.resolve(O,R))},function(R){w||(w=!0,l.reject(O,R))})}}},{1:1}],3:[function(i,n,o){(function(s){"use strict";typeof s.Promise!="function"&&(s.Promise=i(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{2:2}],4:[function(i,n,o){"use strict";var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V};function a(V,te){if(!(V instanceof te))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(V){return}}var u=l();function d(){try{if(!u||!u.open)return!1;var V=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),te=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!V||te)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(J){return!1}}function p(V,te){V=V||[],te=te||{};try{return new Blob(V,te)}catch(I){if(I.name!=="TypeError")throw I;for(var J=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,oe=new J,ae=0;ae<V.length;ae+=1)oe.append(V[ae]);return oe.getBlob(te.type)}}typeof Promise=="undefined"&&i(3);var g=Promise;function m(V,te){te&&V.then(function(J){te(null,J)},function(J){te(J)})}function k(V,te,J){typeof te=="function"&&V.then(te),typeof J=="function"&&V.catch(J)}function y(V){return typeof V!="string"&&(console.warn(V+" used as a key, but it is not a string."),V=String(V)),V}function v(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var x="local-forage-detect-blob-support",C=void 0,c={},_=Object.prototype.toString,h="readonly",b="readwrite";function M(V){for(var te=V.length,J=new ArrayBuffer(te),oe=new Uint8Array(J),ae=0;ae<te;ae++)oe[ae]=V.charCodeAt(ae);return J}function E(V){return new g(function(te){var J=V.transaction(x,b),oe=p([""]);J.objectStore(x).put(oe,"key"),J.onabort=function(ae){ae.preventDefault(),ae.stopPropagation(),te(!1)},J.oncomplete=function(){var ae=navigator.userAgent.match(/Chrome\/(\d+)/),I=navigator.userAgent.match(/Edge\//);te(I||!ae||parseInt(ae[1],10)>=43)}}).catch(function(){return!1})}function w(V){return typeof C=="boolean"?g.resolve(C):E(V).then(function(te){return C=te,C})}function S(V){var te=c[V.name],J={};J.promise=new g(function(oe,ae){J.resolve=oe,J.reject=ae}),te.deferredOperations.push(J),te.dbReady?te.dbReady=te.dbReady.then(function(){return J.promise}):te.dbReady=J.promise}function O(V){var te=c[V.name],J=te.deferredOperations.pop();if(J)return J.resolve(),J.promise}function B(V,te){var J=c[V.name],oe=J.deferredOperations.pop();if(oe)return oe.reject(te),oe.promise}function A(V,te){return new g(function(J,oe){if(c[V.name]=c[V.name]||q(),V.db)if(te)S(V),V.db.close();else return J(V.db);var ae=[V.name];te&&ae.push(V.version);var I=u.open.apply(u,ae);te&&(I.onupgradeneeded=function(N){var z=I.result;try{z.createObjectStore(V.storeName),N.oldVersion<=1&&z.createObjectStore(x)}catch(G){if(G.name==="ConstraintError")console.warn('The database "'+V.name+'" has been upgraded from version '+N.oldVersion+" to version "+N.newVersion+', but the storage "'+V.storeName+'" already exists.');else throw G}}),I.onerror=function(N){N.preventDefault(),oe(I.error)},I.onsuccess=function(){var N=I.result;N.onversionchange=function(z){z.target.close()},J(N),O(V)}})}function R(V){return A(V,!1)}function T(V){return A(V,!0)}function L(V,te){if(!V.db)return!0;var J=!V.db.objectStoreNames.contains(V.storeName),oe=V.version<V.db.version,ae=V.version>V.db.version;if(oe&&(V.version!==te&&console.warn('The database "'+V.name+`" can't be downgraded from version `+V.db.version+" to version "+V.version+"."),V.version=V.db.version),ae||J){if(J){var I=V.db.version+1;I>V.version&&(V.version=I)}return!0}return!1}function P(V){return new g(function(te,J){var oe=new FileReader;oe.onerror=J,oe.onloadend=function(ae){var I=btoa(ae.target.result||"");te({__local_forage_encoded_blob:!0,data:I,type:V.type})},oe.readAsBinaryString(V)})}function D(V){var te=M(atob(V.data));return p([te],{type:V.type})}function H(V){return V&&V.__local_forage_encoded_blob}function j(V){var te=this,J=te._initReady().then(function(){var oe=c[te._dbInfo.name];if(oe&&oe.dbReady)return oe.dbReady});return k(J,V,V),J}function F(V){S(V);for(var te=c[V.name],J=te.forages,oe=0;oe<J.length;oe++){var ae=J[oe];ae._dbInfo.db&&(ae._dbInfo.db.close(),ae._dbInfo.db=null)}return V.db=null,R(V).then(function(I){return V.db=I,L(V)?T(V):I}).then(function(I){V.db=te.db=I;for(var N=0;N<J.length;N++)J[N]._dbInfo.db=I}).catch(function(I){throw B(V,I),I})}function K(V,te,J,oe){oe===void 0&&(oe=1);try{var ae=V.db.transaction(V.storeName,te);J(null,ae)}catch(I){if(oe>0&&(!V.db||I.name==="InvalidStateError"||I.name==="NotFoundError"))return g.resolve().then(function(){if(!V.db||I.name==="NotFoundError"&&!V.db.objectStoreNames.contains(V.storeName)&&V.version<=V.db.version)return V.db&&(V.version=V.db.version+1),T(V)}).then(function(){return F(V).then(function(){K(V,te,J,oe-1)})}).catch(J);J(I)}}function q(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function W(V){var te=this,J={db:null};if(V)for(var oe in V)J[oe]=V[oe];var ae=c[J.name];ae||(ae=q(),c[J.name]=ae),ae.forages.push(te),te._initReady||(te._initReady=te.ready,te.ready=j);var I=[];function N(){return g.resolve()}for(var z=0;z<ae.forages.length;z++){var G=ae.forages[z];G!==te&&I.push(G._initReady().catch(N))}var U=ae.forages.slice(0);return g.all(I).then(function(){return J.db=ae.db,R(J)}).then(function(ee){return J.db=ee,L(J,te._defaultConfig.version)?T(J):ee}).then(function(ee){J.db=ae.db=ee,te._dbInfo=J;for(var ie=0;ie<U.length;ie++){var se=U[ie];se!==te&&(se._dbInfo.db=J.db,se._dbInfo.version=J.version)}})}function Y(V,te){var J=this;V=y(V);var oe=new g(function(ae,I){J.ready().then(function(){K(J._dbInfo,h,function(N,z){if(N)return I(N);try{var G=z.objectStore(J._dbInfo.storeName),U=G.get(V);U.onsuccess=function(){var ee=U.result;ee===void 0&&(ee=null),H(ee)&&(ee=D(ee)),ae(ee)},U.onerror=function(){I(U.error)}}catch(ee){I(ee)}})}).catch(I)});return m(oe,te),oe}function Z(V,te){var J=this,oe=new g(function(ae,I){J.ready().then(function(){K(J._dbInfo,h,function(N,z){if(N)return I(N);try{var G=z.objectStore(J._dbInfo.storeName),U=G.openCursor(),ee=1;U.onsuccess=function(){var ie=U.result;if(ie){var se=ie.value;H(se)&&(se=D(se));var fe=V(se,ie.key,ee++);fe!==void 0?ae(fe):ie.continue()}else ae()},U.onerror=function(){I(U.error)}}catch(ie){I(ie)}})}).catch(I)});return m(oe,te),oe}function X(V,te,J){var oe=this;V=y(V);var ae=new g(function(I,N){var z;oe.ready().then(function(){return z=oe._dbInfo,_.call(te)==="[object Blob]"?w(z.db).then(function(G){return G?te:P(te)}):te}).then(function(G){K(oe._dbInfo,b,function(U,ee){if(U)return N(U);try{var ie=ee.objectStore(oe._dbInfo.storeName);G===null&&(G=void 0);var se=ie.put(G,V);ee.oncomplete=function(){G===void 0&&(G=null),I(G)},ee.onabort=ee.onerror=function(){var fe=se.error?se.error:se.transaction.error;N(fe)}}catch(fe){N(fe)}})}).catch(N)});return m(ae,J),ae}function Q(V,te){var J=this;V=y(V);var oe=new g(function(ae,I){J.ready().then(function(){K(J._dbInfo,b,function(N,z){if(N)return I(N);try{var G=z.objectStore(J._dbInfo.storeName),U=G.delete(V);z.oncomplete=function(){ae()},z.onerror=function(){I(U.error)},z.onabort=function(){var ee=U.error?U.error:U.transaction.error;I(ee)}}catch(ee){I(ee)}})}).catch(I)});return m(oe,te),oe}function ue(V){var te=this,J=new g(function(oe,ae){te.ready().then(function(){K(te._dbInfo,b,function(I,N){if(I)return ae(I);try{var z=N.objectStore(te._dbInfo.storeName),G=z.clear();N.oncomplete=function(){oe()},N.onabort=N.onerror=function(){var U=G.error?G.error:G.transaction.error;ae(U)}}catch(U){ae(U)}})}).catch(ae)});return m(J,V),J}function ce(V){var te=this,J=new g(function(oe,ae){te.ready().then(function(){K(te._dbInfo,h,function(I,N){if(I)return ae(I);try{var z=N.objectStore(te._dbInfo.storeName),G=z.count();G.onsuccess=function(){oe(G.result)},G.onerror=function(){ae(G.error)}}catch(U){ae(U)}})}).catch(ae)});return m(J,V),J}function ne(V,te){var J=this,oe=new g(function(ae,I){if(V<0){ae(null);return}J.ready().then(function(){K(J._dbInfo,h,function(N,z){if(N)return I(N);try{var G=z.objectStore(J._dbInfo.storeName),U=!1,ee=G.openKeyCursor();ee.onsuccess=function(){var ie=ee.result;if(!ie){ae(null);return}V===0||U?ae(ie.key):(U=!0,ie.advance(V))},ee.onerror=function(){I(ee.error)}}catch(ie){I(ie)}})}).catch(I)});return m(oe,te),oe}function ge(V){var te=this,J=new g(function(oe,ae){te.ready().then(function(){K(te._dbInfo,h,function(I,N){if(I)return ae(I);try{var z=N.objectStore(te._dbInfo.storeName),G=z.openKeyCursor(),U=[];G.onsuccess=function(){var ee=G.result;if(!ee){oe(U);return}U.push(ee.key),ee.continue()},G.onerror=function(){ae(G.error)}}catch(ee){ae(ee)}})}).catch(ae)});return m(J,V),J}function re(V,te){te=v.apply(this,arguments);var J=this.config();V=typeof V!="function"&&V||{},V.name||(V.name=V.name||J.name,V.storeName=V.storeName||J.storeName);var oe=this,ae;if(!V.name)ae=g.reject("Invalid arguments");else{var I=V.name===J.name&&oe._dbInfo.db,N=I?g.resolve(oe._dbInfo.db):R(V).then(function(z){var G=c[V.name],U=G.forages;G.db=z;for(var ee=0;ee<U.length;ee++)U[ee]._dbInfo.db=z;return z});V.storeName?ae=N.then(function(z){if(!!z.objectStoreNames.contains(V.storeName)){var G=z.version+1;S(V);var U=c[V.name],ee=U.forages;z.close();for(var ie=0;ie<ee.length;ie++){var se=ee[ie];se._dbInfo.db=null,se._dbInfo.version=G}var fe=new g(function(me,we){var Te=u.open(V.name,G);Te.onerror=function(Pe){var $e=Te.result;$e.close(),we(Pe)},Te.onupgradeneeded=function(){var Pe=Te.result;Pe.deleteObjectStore(V.storeName)},Te.onsuccess=function(){var Pe=Te.result;Pe.close(),me(Pe)}});return fe.then(function(me){U.db=me;for(var we=0;we<ee.length;we++){var Te=ee[we];Te._dbInfo.db=me,O(Te._dbInfo)}}).catch(function(me){throw(B(V,me)||g.resolve()).catch(function(){}),me})}}):ae=N.then(function(z){S(V);var G=c[V.name],U=G.forages;z.close();for(var ee=0;ee<U.length;ee++){var ie=U[ee];ie._dbInfo.db=null}var se=new g(function(fe,me){var we=u.deleteDatabase(V.name);we.onerror=function(){var Te=we.result;Te&&Te.close(),me(we.error)},we.onblocked=function(){console.warn('dropInstance blocked for database "'+V.name+'" until all open connections are closed')},we.onsuccess=function(){var Te=we.result;Te&&Te.close(),fe(Te)}});return se.then(function(fe){G.db=fe;for(var me=0;me<U.length;me++){var we=U[me];O(we._dbInfo)}}).catch(function(fe){throw(B(V,fe)||g.resolve()).catch(function(){}),fe})})}return m(ae,te),ae}var pe={_driver:"asyncStorage",_initStorage:W,_support:d(),iterate:Z,getItem:Y,setItem:X,removeItem:Q,clear:ue,length:ce,key:ne,keys:ge,dropInstance:re};function Ce(){return typeof openDatabase=="function"}var be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xe="~~local_forage_type~",Re=/^~~local_forage_type~([^~]+)~/,je="__lfsc__:",Be=je.length,ze="arbf",Ne="blob",De="si08",le="ui08",he="uic8",ye="si16",Ae="si32",qe="ur16",nt="ui32",st="fl32",Mt="fl64",Ct=Be+ze.length,St=Object.prototype.toString;function Ft(V){var te=V.length*.75,J=V.length,oe,ae=0,I,N,z,G;V[V.length-1]==="="&&(te--,V[V.length-2]==="="&&te--);var U=new ArrayBuffer(te),ee=new Uint8Array(U);for(oe=0;oe<J;oe+=4)I=be.indexOf(V[oe]),N=be.indexOf(V[oe+1]),z=be.indexOf(V[oe+2]),G=be.indexOf(V[oe+3]),ee[ae++]=I<<2|N>>4,ee[ae++]=(N&15)<<4|z>>2,ee[ae++]=(z&3)<<6|G&63;return U}function Je(V){var te=new Uint8Array(V),J="",oe;for(oe=0;oe<te.length;oe+=3)J+=be[te[oe]>>2],J+=be[(te[oe]&3)<<4|te[oe+1]>>4],J+=be[(te[oe+1]&15)<<2|te[oe+2]>>6],J+=be[te[oe+2]&63];return te.length%3===2?J=J.substring(0,J.length-1)+"=":te.length%3===1&&(J=J.substring(0,J.length-2)+"=="),J}function It(V,te){var J="";if(V&&(J=St.call(V)),V&&(J==="[object ArrayBuffer]"||V.buffer&&St.call(V.buffer)==="[object ArrayBuffer]")){var oe,ae=je;V instanceof ArrayBuffer?(oe=V,ae+=ze):(oe=V.buffer,J==="[object Int8Array]"?ae+=De:J==="[object Uint8Array]"?ae+=le:J==="[object Uint8ClampedArray]"?ae+=he:J==="[object Int16Array]"?ae+=ye:J==="[object Uint16Array]"?ae+=qe:J==="[object Int32Array]"?ae+=Ae:J==="[object Uint32Array]"?ae+=nt:J==="[object Float32Array]"?ae+=st:J==="[object Float64Array]"?ae+=Mt:te(new Error("Failed to get type for BinaryArray"))),te(ae+Je(oe))}else if(J==="[object Blob]"){var I=new FileReader;I.onload=function(){var N=xe+V.type+"~"+Je(this.result);te(je+Ne+N)},I.readAsArrayBuffer(V)}else try{te(JSON.stringify(V))}catch(N){console.error("Couldn't convert value into a JSON string: ",V),te(null,N)}}function Tt(V){if(V.substring(0,Be)!==je)return JSON.parse(V);var te=V.substring(Ct),J=V.substring(Be,Ct),oe;if(J===Ne&&Re.test(te)){var ae=te.match(Re);oe=ae[1],te=te.substring(ae[0].length)}var I=Ft(te);switch(J){case ze:return I;case Ne:return p([I],{type:oe});case De:return new Int8Array(I);case le:return new Uint8Array(I);case he:return new Uint8ClampedArray(I);case ye:return new Int16Array(I);case qe:return new Uint16Array(I);case Ae:return new Int32Array(I);case nt:return new Uint32Array(I);case st:return new Float32Array(I);case Mt:return new Float64Array(I);default:throw new Error("Unkown type: "+J)}}var zt={serialize:It,deserialize:Tt,stringToBuffer:Ft,bufferToString:Je};function Ht(V,te,J,oe){V.executeSql("CREATE TABLE IF NOT EXISTS "+te.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],J,oe)}function Yt(V){var te=this,J={db:null};if(V)for(var oe in V)J[oe]=typeof V[oe]!="string"?V[oe].toString():V[oe];var ae=new g(function(I,N){try{J.db=openDatabase(J.name,String(J.version),J.description,J.size)}catch(z){return N(z)}J.db.transaction(function(z){Ht(z,J,function(){te._dbInfo=J,I()},function(G,U){N(U)})},N)});return J.serializer=zt,ae}function bt(V,te,J,oe,ae,I){V.executeSql(J,oe,ae,function(N,z){z.code===z.SYNTAX_ERR?N.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[te.storeName],function(G,U){U.rows.length?I(G,z):Ht(G,te,function(){G.executeSql(J,oe,ae,I)},I)},I):I(N,z)},I)}function Qt(V,te){var J=this;V=y(V);var oe=new g(function(ae,I){J.ready().then(function(){var N=J._dbInfo;N.db.transaction(function(z){bt(z,N,"SELECT * FROM "+N.storeName+" WHERE key = ? LIMIT 1",[V],function(G,U){var ee=U.rows.length?U.rows.item(0).value:null;ee&&(ee=N.serializer.deserialize(ee)),ae(ee)},function(G,U){I(U)})})}).catch(I)});return m(oe,te),oe}function We(V,te){var J=this,oe=new g(function(ae,I){J.ready().then(function(){var N=J._dbInfo;N.db.transaction(function(z){bt(z,N,"SELECT * FROM "+N.storeName,[],function(G,U){for(var ee=U.rows,ie=ee.length,se=0;se<ie;se++){var fe=ee.item(se),me=fe.value;if(me&&(me=N.serializer.deserialize(me)),me=V(me,fe.key,se+1),me!==void 0){ae(me);return}}ae()},function(G,U){I(U)})})}).catch(I)});return m(oe,te),oe}function qt(V,te,J,oe){var ae=this;V=y(V);var I=new g(function(N,z){ae.ready().then(function(){te===void 0&&(te=null);var G=te,U=ae._dbInfo;U.serializer.serialize(te,function(ee,ie){ie?z(ie):U.db.transaction(function(se){bt(se,U,"INSERT OR REPLACE INTO "+U.storeName+" (key, value) VALUES (?, ?)",[V,ee],function(){N(G)},function(fe,me){z(me)})},function(se){if(se.code===se.QUOTA_ERR){if(oe>0){N(qt.apply(ae,[V,G,J,oe-1]));return}z(se)}})})}).catch(z)});return m(I,J),I}function nr(V,te,J){return qt.apply(this,[V,te,J,1])}function mr(V,te){var J=this;V=y(V);var oe=new g(function(ae,I){J.ready().then(function(){var N=J._dbInfo;N.db.transaction(function(z){bt(z,N,"DELETE FROM "+N.storeName+" WHERE key = ?",[V],function(){ae()},function(G,U){I(U)})})}).catch(I)});return m(oe,te),oe}function vr(V){var te=this,J=new g(function(oe,ae){te.ready().then(function(){var I=te._dbInfo;I.db.transaction(function(N){bt(N,I,"DELETE FROM "+I.storeName,[],function(){oe()},function(z,G){ae(G)})})}).catch(ae)});return m(J,V),J}function br(V){var te=this,J=new g(function(oe,ae){te.ready().then(function(){var I=te._dbInfo;I.db.transaction(function(N){bt(N,I,"SELECT COUNT(key) as c FROM "+I.storeName,[],function(z,G){var U=G.rows.item(0).c;oe(U)},function(z,G){ae(G)})})}).catch(ae)});return m(J,V),J}function Rr(V,te){var J=this,oe=new g(function(ae,I){J.ready().then(function(){var N=J._dbInfo;N.db.transaction(function(z){bt(z,N,"SELECT key FROM "+N.storeName+" WHERE id = ? LIMIT 1",[V+1],function(G,U){var ee=U.rows.length?U.rows.item(0).key:null;ae(ee)},function(G,U){I(U)})})}).catch(I)});return m(oe,te),oe}function jr(V){var te=this,J=new g(function(oe,ae){te.ready().then(function(){var I=te._dbInfo;I.db.transaction(function(N){bt(N,I,"SELECT key FROM "+I.storeName,[],function(z,G){for(var U=[],ee=0;ee<G.rows.length;ee++)U.push(G.rows.item(ee).key);oe(U)},function(z,G){ae(G)})})}).catch(ae)});return m(J,V),J}function Sr(V){return new g(function(te,J){V.transaction(function(oe){oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ae,I){for(var N=[],z=0;z<I.rows.length;z++)N.push(I.rows.item(z).name);te({db:V,storeNames:N})},function(ae,I){J(I)})},function(oe){J(oe)})})}function Tr(V,te){te=v.apply(this,arguments);var J=this.config();V=typeof V!="function"&&V||{},V.name||(V.name=V.name||J.name,V.storeName=V.storeName||J.storeName);var oe=this,ae;return V.name?ae=new g(function(I){var N;V.name===J.name?N=oe._dbInfo.db:N=openDatabase(V.name,"","",0),V.storeName?I({db:N,storeNames:[V.storeName]}):I(Sr(N))}).then(function(I){return new g(function(N,z){I.db.transaction(function(G){function U(fe){return new g(function(me,we){G.executeSql("DROP TABLE IF EXISTS "+fe,[],function(){me()},function(Te,Pe){we(Pe)})})}for(var ee=[],ie=0,se=I.storeNames.length;ie<se;ie++)ee.push(U(I.storeNames[ie]));g.all(ee).then(function(){N()}).catch(function(fe){z(fe)})},function(G){z(G)})})}):ae=g.reject("Invalid arguments"),m(ae,te),ae}var Wt={_driver:"webSQLStorage",_initStorage:Yt,_support:Ce(),iterate:We,getItem:Qt,setItem:nr,removeItem:mr,clear:vr,length:br,key:Rr,keys:jr,dropInstance:Tr};function Nr(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(V){return!1}}function Oe(V,te){var J=V.name+"/";return V.storeName!==te.storeName&&(J+=V.storeName+"/"),J}function or(){var V="_localforage_support_test";try{return localStorage.setItem(V,!0),localStorage.removeItem(V),!1}catch(te){return!0}}function yr(){return!or()||localStorage.length>0}function Dr(V){var te=this,J={};if(V)for(var oe in V)J[oe]=V[oe];return J.keyPrefix=Oe(V,te._defaultConfig),yr()?(te._dbInfo=J,J.serializer=zt,g.resolve()):g.reject()}function yt(V){var te=this,J=te.ready().then(function(){for(var oe=te._dbInfo.keyPrefix,ae=localStorage.length-1;ae>=0;ae--){var I=localStorage.key(ae);I.indexOf(oe)===0&&localStorage.removeItem(I)}});return m(J,V),J}function ve(V,te){var J=this;V=y(V);var oe=J.ready().then(function(){var ae=J._dbInfo,I=localStorage.getItem(ae.keyPrefix+V);return I&&(I=ae.serializer.deserialize(I)),I});return m(oe,te),oe}function ke(V,te){var J=this,oe=J.ready().then(function(){for(var ae=J._dbInfo,I=ae.keyPrefix,N=I.length,z=localStorage.length,G=1,U=0;U<z;U++){var ee=localStorage.key(U);if(ee.indexOf(I)===0){var ie=localStorage.getItem(ee);if(ie&&(ie=ae.serializer.deserialize(ie)),ie=V(ie,ee.substring(N),G++),ie!==void 0)return ie}}});return m(oe,te),oe}function Le(V,te){var J=this,oe=J.ready().then(function(){var ae=J._dbInfo,I;try{I=localStorage.key(V)}catch(N){I=null}return I&&(I=I.substring(ae.keyPrefix.length)),I});return m(oe,te),oe}function Ke(V){var te=this,J=te.ready().then(function(){for(var oe=te._dbInfo,ae=localStorage.length,I=[],N=0;N<ae;N++){var z=localStorage.key(N);z.indexOf(oe.keyPrefix)===0&&I.push(z.substring(oe.keyPrefix.length))}return I});return m(J,V),J}function He(V){var te=this,J=te.keys().then(function(oe){return oe.length});return m(J,V),J}function Et(V,te){var J=this;V=y(V);var oe=J.ready().then(function(){var ae=J._dbInfo;localStorage.removeItem(ae.keyPrefix+V)});return m(oe,te),oe}function Ut(V,te,J){var oe=this;V=y(V);var ae=oe.ready().then(function(){te===void 0&&(te=null);var I=te;return new g(function(N,z){var G=oe._dbInfo;G.serializer.serialize(te,function(U,ee){if(ee)z(ee);else try{localStorage.setItem(G.keyPrefix+V,U),N(I)}catch(ie){(ie.name==="QuotaExceededError"||ie.name==="NS_ERROR_DOM_QUOTA_REACHED")&&z(ie),z(ie)}})})});return m(ae,J),ae}function Se(V,te){if(te=v.apply(this,arguments),V=typeof V!="function"&&V||{},!V.name){var J=this.config();V.name=V.name||J.name,V.storeName=V.storeName||J.storeName}var oe=this,ae;return V.name?ae=new g(function(I){V.storeName?I(Oe(V,oe._defaultConfig)):I(V.name+"/")}).then(function(I){for(var N=localStorage.length-1;N>=0;N--){var z=localStorage.key(N);z.indexOf(I)===0&&localStorage.removeItem(z)}}):ae=g.reject("Invalid arguments"),m(ae,te),ae}var ht={_driver:"localStorageWrapper",_initStorage:Dr,_support:Nr(),iterate:ke,getItem:ve,setItem:Ut,removeItem:Et,clear:yt,length:He,key:Le,keys:Ke,dropInstance:Se},$t=function(te,J){return te===J||typeof te=="number"&&typeof J=="number"&&isNaN(te)&&isNaN(J)},sr=function(te,J){for(var oe=te.length,ae=0;ae<oe;){if($t(te[ae],J))return!0;ae++}return!1},ut=Array.isArray||function(V){return Object.prototype.toString.call(V)==="[object Array]"},Qe={},er={},Ot={INDEXEDDB:pe,WEBSQL:Wt,LOCALSTORAGE:ht},ar=[Ot.INDEXEDDB._driver,Ot.WEBSQL._driver,Ot.LOCALSTORAGE._driver],Pt=["dropInstance"],Ye=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Pt),Me={description:"",driver:ar.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function gt(V,te){V[te]=function(){var J=arguments;return V.ready().then(function(){return V[te].apply(V,J)})}}function _t(){for(var V=1;V<arguments.length;V++){var te=arguments[V];if(te)for(var J in te)te.hasOwnProperty(J)&&(ut(te[J])?arguments[0][J]=te[J].slice():arguments[0][J]=te[J])}return arguments[0]}var Ee=function(){function V(te){a(this,V);for(var J in Ot)if(Ot.hasOwnProperty(J)){var oe=Ot[J],ae=oe._driver;this[J]=ae,Qe[ae]||this.defineDriver(oe)}this._defaultConfig=_t({},Me),this._config=_t({},this._defaultConfig,te),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return V.prototype.config=function(J){if((typeof J=="undefined"?"undefined":s(J))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var oe in J){if(oe==="storeName"&&(J[oe]=J[oe].replace(/\W/g,"_")),oe==="version"&&typeof J[oe]!="number")return new Error("Database version must be a number.");this._config[oe]=J[oe]}return"driver"in J&&J.driver?this.setDriver(this._config.driver):!0}else return typeof J=="string"?this._config[J]:this._config},V.prototype.defineDriver=function(J,oe,ae){var I=new g(function(N,z){try{var G=J._driver,U=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!J._driver){z(U);return}for(var ee=Ye.concat("_initStorage"),ie=0,se=ee.length;ie<se;ie++){var fe=ee[ie],me=!sr(Pt,fe);if((me||J[fe])&&typeof J[fe]!="function"){z(U);return}}var we=function(){for(var $e=function(Ve){return function(){var Bt=new Error("Method "+Ve+" is not implemented by the current driver"),wt=g.reject(Bt);return m(wt,arguments[arguments.length-1]),wt}},Ze=0,Ie=Pt.length;Ze<Ie;Ze++){var et=Pt[Ze];J[et]||(J[et]=$e(et))}};we();var Te=function($e){Qe[G]&&console.info("Redefining LocalForage driver: "+G),Qe[G]=J,er[G]=$e,N()};"_support"in J?J._support&&typeof J._support=="function"?J._support().then(Te,z):Te(!!J._support):Te(!0)}catch(Pe){z(Pe)}});return k(I,oe,ae),I},V.prototype.driver=function(){return this._driver||null},V.prototype.getDriver=function(J,oe,ae){var I=Qe[J]?g.resolve(Qe[J]):g.reject(new Error("Driver not found."));return k(I,oe,ae),I},V.prototype.getSerializer=function(J){var oe=g.resolve(zt);return k(oe,J),oe},V.prototype.ready=function(J){var oe=this,ae=oe._driverSet.then(function(){return oe._ready===null&&(oe._ready=oe._initDriver()),oe._ready});return k(ae,J,J),ae},V.prototype.setDriver=function(J,oe,ae){var I=this;ut(J)||(J=[J]);var N=this._getSupportedDrivers(J);function z(){I._config.driver=I.driver()}function G(ie){return I._extend(ie),z(),I._ready=I._initStorage(I._config),I._ready}function U(ie){return function(){var se=0;function fe(){for(;se<ie.length;){var me=ie[se];return se++,I._dbInfo=null,I._ready=null,I.getDriver(me).then(G).catch(fe)}z();var we=new Error("No available storage method found.");return I._driverSet=g.reject(we),I._driverSet}return fe()}}var ee=this._driverSet!==null?this._driverSet.catch(function(){return g.resolve()}):g.resolve();return this._driverSet=ee.then(function(){var ie=N[0];return I._dbInfo=null,I._ready=null,I.getDriver(ie).then(function(se){I._driver=se._driver,z(),I._wrapLibraryMethodsWithReady(),I._initDriver=U(N)})}).catch(function(){z();var ie=new Error("No available storage method found.");return I._driverSet=g.reject(ie),I._driverSet}),k(this._driverSet,oe,ae),this._driverSet},V.prototype.supports=function(J){return!!er[J]},V.prototype._extend=function(J){_t(this,J)},V.prototype._getSupportedDrivers=function(J){for(var oe=[],ae=0,I=J.length;ae<I;ae++){var N=J[ae];this.supports(N)&&oe.push(N)}return oe},V.prototype._wrapLibraryMethodsWithReady=function(){for(var J=0,oe=Ye.length;J<oe;J++)gt(this,Ye[J])},V.prototype.createInstance=function(J){return new V(J)},V}(),Xe=new Ee;n.exports=Xe},{3:3}]},{},[4])(4)})});var Qd=_e((Yn,is)=>{(function(r,t){typeof Yn=="object"&&typeof is=="object"?is.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Yn=="object"?Yn.EditorJS=t():r.EditorJS=t()})(window,function(){return function(r){var t={};function e(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return r[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=r,e.c=t,e.d=function(i,n,o){e.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:o})},e.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,n){if(1&n&&(i=e(i)),8&n||4&n&&typeof i=="object"&&i&&i.__esModule)return i;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:i}),2&n&&typeof i!="string")for(var s in i)e.d(o,s,function(a){return i[a]}.bind(null,s));return o},e.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(n,"a",n),n},e.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},e.p="",e(e.s=187)}([function(r,t,e){var i=e(10),n=e(16),o=e(27),s=e(23),a=e(31),l=function(u,d,p){var g,m,k,y,v=u&l.F,x=u&l.G,C=u&l.S,c=u&l.P,_=u&l.B,h=x?i:C?i[d]||(i[d]={}):(i[d]||{}).prototype,b=x?n:n[d]||(n[d]={}),M=b.prototype||(b.prototype={});for(g in x&&(p=d),p)k=((m=!v&&h&&h[g]!==void 0)?h:p)[g],y=_&&m?a(k,i):c&&typeof k=="function"?a(Function.call,k):k,h&&s(h,g,k,u&l.U),b[g]!=k&&o(b,g,y),c&&M[g]!=k&&(M[g]=k)};i.core=n,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,r.exports=l},function(r,t){r.exports=function(e){return e&&e.__esModule?e:{default:e}},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){function e(i,n){for(var o=0;o<n.length;o++){var s=n[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}r.exports=function(i,n,o){return n&&e(i.prototype,n),o&&e(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){function e(i){return r.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r.exports.__esModule=!0,r.exports.default=r.exports,e(i)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(111);r.exports=function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),o&&i(n,o)},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(7).default,n=e(152);r.exports=function(o,s){if(s&&(i(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(o)},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){function e(i){return r.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r.exports.__esModule=!0,r.exports.default=r.exports,e(i)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i,n,o;n=[t,e(20),e(372),e(21),e(403),e(19)],(o=typeof(i=function(s,a,l,u,d,p){"use strict";var g,m=e(1);function k(w,S){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"log",B=arguments.length>3?arguments[3]:void 0,A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"color: inherit";if("console"in window&&window.console[O]){var R=["info","log","warn","error"].includes(O),T=[];switch(k.logLevel){case g.ERROR:if(O!=="error")return;break;case g.WARN:if(!["error","warn"].includes(O))return;break;case g.INFO:if(!R||w)return}B&&T.push(B);var L="Editor.js ".concat("2.26.5"),P=`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`;w&&(R?(T.unshift(P,A),S="%c".concat(L,"%c ").concat(S)):S="( ".concat(L," )").concat(S));try{if(R)if(B){var D;(D=console)[O].apply(D,["".concat(S," %o")].concat(T))}else{var H;(H=console)[O].apply(H,[S].concat(T))}else console[O](S)}catch(j){}}}Object.defineProperty(s,"__esModule",{value:!0}),s.LogLevels=void 0,s.array=function(w){return Array.prototype.slice.call(w)},s.beautifyShortcut=function(w){var S=b();return w=w.replace(/shift/gi,"\u21E7").replace(/backspace/gi,"\u232B").replace(/enter/gi,"\u23CE").replace(/up/gi,"\u2191").replace(/left/gi,"\u2192").replace(/down/gi,"\u2193").replace(/right/gi,"\u2190").replace(/escape/gi,"\u238B").replace(/insert/gi,"Ins").replace(/delete/gi,"\u2421").replace(/\+/gi," + "),w=S.mac?w.replace(/ctrl|cmd/gi,"\u2318").replace(/alt/gi,"\u2325"):w.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN")},s.cacheable=function(w,S,O){var B=O.value?"value":"get",A=O[B],R="#".concat(S,"Cache");if(O[B]=function(){if(this[R]===void 0){for(var L=arguments.length,P=new Array(L),D=0;D<L;D++)P[D]=arguments[D];this[R]=A.apply.apply(A,[this].concat(P))}return this[R]},B==="get"&&O.set){var T=O.set;O.set=function(L){delete w[R],T.apply(this,L)}}return O},s.capitalize=function(w){return w[0].toUpperCase()+w.slice(1)},s.copyTextToClipboard=function(w){var S=p.default.make("div","codex-editor-clipboard",{innerHTML:w});document.body.appendChild(S);var O=window.getSelection(),B=document.createRange();B.selectNode(S),window.getSelection().removeAllRanges(),O.addRange(B),document.execCommand("copy"),document.body.removeChild(S)},s.debounce=function(w,S,O){var B,A=this;return function(){for(var R=arguments.length,T=new Array(R),L=0;L<R;L++)T[L]=arguments[L];var P=A,D=function(){B=null,O||w.apply(P,T)},H=O&&!B;window.clearTimeout(B),B=window.setTimeout(D,S),H&&w.apply(P,T)}},s.deepMerge=function w(S){for(var O=arguments.length,B=new Array(O>1?O-1:0),A=1;A<O;A++)B[A-1]=arguments[A];if(!B.length)return S;var R=B.shift();if(c(S)&&c(R))for(var T in R)c(R[T])?(S[T]||Object.assign(S,(0,l.default)({},T,{})),w(S[T],R[T])):Object.assign(S,(0,l.default)({},T,R[T]));return w.apply(void 0,[S].concat(B))},s.delay=function(w,S){return function(){var O=this,B=arguments;window.setTimeout(function(){return w.apply(O,B)},S)}},s.deprecationAssert=function(w,S,O){var B="\xAB".concat(S,"\xBB is deprecated and will be removed in the next major release. Please use the \xAB").concat(O,"\xBB instead.");w&&v(B,"warn")},s.equals=function(w,S){var O=Array.isArray(w)||c(w),B=Array.isArray(S)||c(S);return O||B?JSON.stringify(w)===JSON.stringify(S):w===S},s.generateBlockId=function(){return(0,d.nanoid)(10)},s.generateId=function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return"".concat(w).concat(Math.floor(1e8*Math.random()).toString(16))},s.getFileExtension=function(w){return w.name.split(".").pop()},s.getUserOS=b,s.getValidUrl=function(w){try{return new URL(w).href}catch(S){}return w.substring(0,2)==="//"?window.location.protocol+w:window.location.origin+w},s.isBoolean=function(w){return x(w)==="boolean"},s.isClass=function(w){return C(w)&&/^\s*class\s+/.test(w.toString())},s.isEmpty=function(w){return!w||Object.keys(w).length===0&&w.constructor===Object},s.isFunction=C,s.isIosDevice=void 0,s.isMobileScreen=function(){return window.matchMedia("(max-width: ".concat(650,"px)")).matches},s.isNumber=function(w){return x(w)==="number"},s.isObject=c,s.isPrintableKey=function(w){return w>47&&w<58||w===32||w===13||w===229||w>64&&w<91||w>95&&w<112||w>185&&w<193||w>218&&w<223},s.isPromise=function(w){return Promise.resolve(w)===w},s.isString=function(w){return x(w)==="string"},s.isTouchSupported=void 0,s.isUndefined=_,s.isValidMimeType=function(w){return/^[-\w]+\/([-+\w]+|\*)$/.test(w)},s.mouseButtons=s.mobileScreenBreakpoint=s.logLabeled=s.log=s.keyCodes=void 0,s.openTab=function(w){window.open(w,"_blank")},s.sequence=function(w){return h.apply(this,arguments)},s.setLogLevel=function(w){k.logLevel=w},s.throttle=function(w,S){var O,B,A,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,T=null,L=0;R||(R={});var P=function(){L=R.leading===!1?0:Date.now(),T=null,A=w.apply(O,B),T||(O=B=null)};return function(){var D=Date.now();L||R.leading!==!1||(L=D);var H=S-(D-L);return O=this,B=arguments,H<=0||H>S?(T&&(clearTimeout(T),T=null),L=D,A=w.apply(O,B),T||(O=B=null)):T||R.trailing===!1||(T=setTimeout(P,H)),A}},s.typeOf=x,a=m(a),l=m(l),u=m(u),p=m(p),s.LogLevels=g,function(w){w.VERBOSE="VERBOSE",w.INFO="INFO",w.WARN="WARN",w.ERROR="ERROR"}(g||(s.LogLevels=g={})),s.keyCodes={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91},s.mouseButtons={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4},k.logLevel=g.VERBOSE;var y=k.bind(window,!1);s.log=y;var v=k.bind(window,!0);function x(w){return Object.prototype.toString.call(w).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function C(w){return x(w)==="function"||x(w)==="asyncfunction"}function c(w){return x(w)==="object"}function _(w){return x(w)==="undefined"}function h(){return(h=(0,u.default)(a.default.mark(function w(S){var O,B,A,R,T=arguments;return a.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return R=function(){return(R=(0,u.default)(a.default.mark(function P(D,H,j){return a.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.prev=0,F.next=3,D.function(D.data);case 3:return F.next=5,H(_(D.data)?{}:D.data);case 5:F.next=10;break;case 7:F.prev=7,F.t0=F.catch(0),j(_(D.data)?{}:D.data);case 10:case"end":return F.stop()}},P,null,[[0,7]])}))).apply(this,arguments)},A=function(P,D,H){return R.apply(this,arguments)},O=T.length>1&&T[1]!==void 0?T[1]:function(){},B=T.length>2&&T[2]!==void 0?T[2]:function(){},L.abrupt("return",S.reduce(function(){var P=(0,u.default)(a.default.mark(function D(H,j){return a.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,H;case 2:return F.abrupt("return",A(j,O,B));case 3:case"end":return F.stop()}},D)}));return function(D,H){return P.apply(this,arguments)}}(),Promise.resolve()));case 5:case"end":return L.stop()}},w)}))).apply(this,arguments)}function b(){var w={win:!1,mac:!1,x11:!1,linux:!1},S=Object.keys(w).find(function(O){return window.navigator.appVersion.toLowerCase().indexOf(O)!==-1});return S&&(w[S]=!0),w}s.logLabeled=v;var M="ontouchstart"in document.documentElement;s.isTouchSupported=M,s.mobileScreenBreakpoint=650;var E=typeof window!="undefined"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);s.isIosDevice=E})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(112)],(o=typeof(i=function(s,a,l,u){"use strict";var d=e(1);function p(k,y){var v=typeof Symbol!="undefined"&&k[Symbol.iterator]||k["@@iterator"];if(!v){if(Array.isArray(k)||(v=function(b,M){if(b){if(typeof b=="string")return g(b,M);var E=Object.prototype.toString.call(b).slice(8,-1);return E==="Object"&&b.constructor&&(E=b.constructor.name),E==="Map"||E==="Set"?Array.from(b):E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E)?g(b,M):void 0}}(k))||y&&k&&typeof k.length=="number"){v&&(k=v);var x=0,C=function(){};return{s:C,n:function(){return x>=k.length?{done:!0}:{done:!1,value:k[x++]}},e:function(b){throw b},f:C}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,_=!0,h=!1;return{s:function(){v=v.call(k)},n:function(){var b=v.next();return _=b.done,b},e:function(b){h=!0,c=b},f:function(){try{_||v.return==null||v.return()}finally{if(h)throw c}}}}function g(k,y){(y==null||y>k.length)&&(y=k.length);for(var v=0,x=new Array(y);v<y;v++)x[v]=k[v];return x}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=d(a),l=d(l),u=d(u);var m=function(){function k(y){var v=this,x=y.config,C=y.eventsDispatcher;if((0,a.default)(this,k),this.nodes={},this.listeners=new u.default,this.readOnlyMutableListeners={on:function(c,_,h){var b=arguments.length>3&&arguments[3]!==void 0&&arguments[3];v.mutableListenerIds.push(v.listeners.on(c,_,h,b))},clearAll:function(){var c,_=p(v.mutableListenerIds);try{for(_.s();!(c=_.n()).done;){var h=c.value;v.listeners.offById(h)}}catch(b){_.e(b)}finally{_.f()}v.mutableListenerIds=[]}},this.mutableListenerIds=[],(this instanceof k?this.constructor:void 0)===k)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=x,this.eventsDispatcher=C}return(0,l.default)(k,[{key:"state",set:function(y){this.Editor=y}},{key:"removeAllNodes",value:function(){for(var y in this.nodes){var v=this.nodes[y];v instanceof HTMLElement&&v.remove()}}},{key:"isRtl",get:function(){return this.config.i18n.direction==="rtl"}}]),k}();s.default=m,m.displayName="Module",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t){var e=r.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=e)},function(r,t){r.exports=function(e){try{return!!e()}catch(i){return!0}}},function(r,t,e){var i=e(13);r.exports=function(n){if(!i(n))throw TypeError(n+" is not an object!");return n}},function(r,t){r.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}},function(r,t,e){var i=e(70)("wks"),n=e(45),o=e(10).Symbol,s=typeof o=="function";(r.exports=function(a){return i[a]||(i[a]=s&&o[a]||(s?o:n)("Symbol."+a))}).store=i},function(r,t,e){var i=e(33),n=Math.min;r.exports=function(o){return o>0?n(i(o),9007199254740991):0}},function(r,t){var e=r.exports={version:"2.6.12"};typeof __e=="number"&&(__e=e)},function(r,t,e){r.exports=!e(11)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(r,t,e){var i=e(12),n=e(117),o=e(42),s=Object.defineProperty;t.f=e(17)?Object.defineProperty:function(a,l,u){if(i(a),l=o(l,!0),i(u),n)try{return s(a,l,u)}catch(d){}if("get"in u||"set"in u)throw TypeError("Accessors not supported!");return"value"in u&&(a[l]=u.value),a}},function(r,t,e){var i,n,o,s=e(7);n=[t,e(41),e(2),e(3),e(8)],(o=typeof(i=function(a,l,u,d,p){"use strict";var g=e(1);function m(y){if(typeof WeakMap!="function")return null;var v=new WeakMap,x=new WeakMap;return(m=function(C){return C?x:v})(y)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=g(l),u=g(u),d=g(d),p=function(y,v){if(!v&&y&&y.__esModule)return y;if(y===null||s(y)!=="object"&&typeof y!="function")return{default:y};var x=m(v);if(x&&x.has(y))return x.get(y);var C={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in y)if(_!=="default"&&Object.prototype.hasOwnProperty.call(y,_)){var h=c?Object.getOwnPropertyDescriptor(y,_):null;h&&(h.get||h.set)?Object.defineProperty(C,_,h):C[_]=y[_]}return C.default=y,x&&x.set(y,C),C}(p);var k=function(){function y(){(0,u.default)(this,y)}return(0,d.default)(y,null,[{key:"isSingleTag",value:function(v){return v.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(v.tagName)}},{key:"isLineBreakTag",value:function(v){return v&&v.tagName&&["BR","WBR"].includes(v.tagName)}},{key:"make",value:function(v){var x,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_=document.createElement(v);for(var h in Array.isArray(C)?(x=_.classList).add.apply(x,(0,l.default)(C)):C&&_.classList.add(C),c)Object.prototype.hasOwnProperty.call(c,h)&&(_[h]=c[h]);return _}},{key:"text",value:function(v){return document.createTextNode(v)}},{key:"append",value:function(v,x){Array.isArray(x)?x.forEach(function(C){return v.appendChild(C)}):v.appendChild(x)}},{key:"prepend",value:function(v,x){Array.isArray(x)?(x=x.reverse()).forEach(function(C){return v.prepend(C)}):v.prepend(x)}},{key:"swap",value:function(v,x){var C=document.createElement("div"),c=v.parentNode;c.insertBefore(C,v),c.insertBefore(v,x),c.insertBefore(x,C),c.removeChild(C)}},{key:"find",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,x=arguments.length>1?arguments[1]:void 0;return v.querySelector(x)}},{key:"get",value:function(v){return document.getElementById(v)}},{key:"findAll",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,x=arguments.length>1?arguments[1]:void 0;return v.querySelectorAll(x)}},{key:"allInputsSelector",get:function(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(function(v){return'input[type="'.concat(v,'"]')}).join(", ")}},{key:"findAllInputs",value:function(v){return p.array(v.querySelectorAll(y.allInputsSelector)).reduce(function(x,C){return y.isNativeInput(C)||y.containsOnlyInlineElements(C)?[].concat((0,l.default)(x),[C]):[].concat((0,l.default)(x),(0,l.default)(y.getDeepestBlockElements(C)))},[])}},{key:"getDeepestNode",value:function(v){var x=arguments.length>1&&arguments[1]!==void 0&&arguments[1],C=x?"lastChild":"firstChild",c=x?"previousSibling":"nextSibling";if(v&&v.nodeType===Node.ELEMENT_NODE&&v[C]){var _=v[C];if(y.isSingleTag(_)&&!y.isNativeInput(_)&&!y.isLineBreakTag(_))if(_[c])_=_[c];else{if(!_.parentNode[c])return _.parentNode;_=_.parentNode[c]}return this.getDeepestNode(_,x)}return v}},{key:"isElement",value:function(v){return!p.isNumber(v)&&v&&v.nodeType&&v.nodeType===Node.ELEMENT_NODE}},{key:"isFragment",value:function(v){return!p.isNumber(v)&&v&&v.nodeType&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE}},{key:"isContentEditable",value:function(v){return v.contentEditable==="true"}},{key:"isNativeInput",value:function(v){return!(!v||!v.tagName)&&["INPUT","TEXTAREA"].includes(v.tagName)}},{key:"canSetCaret",value:function(v){var x=!0;if(y.isNativeInput(v))switch(v.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":x=!1}else x=y.isContentEditable(v);return x}},{key:"isNodeEmpty",value:function(v){return!(this.isSingleTag(v)&&!this.isLineBreakTag(v))&&(this.isElement(v)&&this.isNativeInput(v)?v.value:v.textContent.replace("\u200B","")).trim().length===0}},{key:"isLeaf",value:function(v){return!!v&&v.childNodes.length===0}},{key:"isEmpty",value:function(v){v.normalize();for(var x=[v];x.length>0;)if(v=x.shift()){if(this.isLeaf(v)&&!this.isNodeEmpty(v))return!1;v.childNodes&&x.push.apply(x,(0,l.default)(Array.from(v.childNodes)))}return!0}},{key:"isHTMLString",value:function(v){var x=y.make("div");return x.innerHTML=v,x.childElementCount>0}},{key:"getContentLength",value:function(v){return y.isNativeInput(v)?v.value.length:v.nodeType===Node.TEXT_NODE?v.length:v.textContent.length}},{key:"blockElements",get:function(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}},{key:"containsOnlyInlineElements",value:function(v){var x;return p.isString(v)?(x=document.createElement("div")).innerHTML=v:x=v,Array.from(x.children).every(function C(c){return!y.blockElements.includes(c.tagName.toLowerCase())&&Array.from(c.children).every(C)})}},{key:"getDeepestBlockElements",value:function(v){return y.containsOnlyInlineElements(v)?[v]:Array.from(v.children).reduce(function(x,C){return[].concat((0,l.default)(x),(0,l.default)(y.getDeepestBlockElements(C)))},[])}},{key:"getHolder",value:function(v){return p.isString(v)?document.getElementById(v):v}},{key:"isExtensionNode",value:function(v){return v&&["GRAMMARLY-EXTENSION"].includes(v.nodeName)}},{key:"isAnchor",value:function(v){return v.tagName.toLowerCase()==="a"}},{key:"offset",value:function(v){var x=v.getBoundingClientRect(),C=window.pageXOffset||document.documentElement.scrollLeft,c=window.pageYOffset||document.documentElement.scrollTop,_=x.top+c,h=x.left+C;return{top:_,left:h,bottom:_+x.height,right:h+x.width}}}]),y}();a.default=k,k.displayName="Dom",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(368)();r.exports=i;try{regeneratorRuntime=i}catch(n){typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},function(r,t){function e(i,n,o,s,a,l,u){try{var d=i[l](u),p=d.value}catch(g){return void o(g)}d.done?n(p):Promise.resolve(p).then(s,a)}r.exports=function(i){return function(){var n=this,o=arguments;return new Promise(function(s,a){var l=i.apply(n,o);function u(p){e(l,s,a,u,d,"next",p)}function d(p){e(l,s,a,u,d,"throw",p)}u(void 0)})}},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(39);r.exports=function(n){return Object(i(n))}},function(r,t,e){var i=e(10),n=e(27),o=e(26),s=e(45)("src"),a=e(192),l=(""+a).split("toString");e(16).inspectSource=function(u){return a.call(u)},(r.exports=function(u,d,p,g){var m=typeof p=="function";m&&(o(p,"name")||n(p,"name",d)),u[d]!==p&&(m&&(o(p,s)||n(p,s,u[d]?""+u[d]:l.join(String(d)))),u===i?u[d]=p:g?u[d]?u[d]=p:n(u,d,p):(delete u[d],n(u,d,p)))})(Function.prototype,"toString",function(){return typeof this=="function"&&this[s]||a.call(this)})},function(r,t,e){var i=e(0),n=e(11),o=e(39),s=/"/g,a=function(l,u,d,p){var g=String(o(l)),m="<"+u;return d!==""&&(m+=" "+d+'="'+String(p).replace(s,"&quot;")+'"'),m+">"+g+"</"+u+">"};r.exports=function(l,u){var d={};d[l]=u(a),i(i.P+i.F*n(function(){var p=""[l]('"');return p!==p.toLowerCase()||p.split('"').length>3}),"String",d)}},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(8),e(19)],(o=typeof(i=function(a,l,u,d,p){"use strict";var g=e(1);function m(y){if(typeof WeakMap!="function")return null;var v=new WeakMap,x=new WeakMap;return(m=function(C){return C?x:v})(y)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=g(l),u=g(u),d=function(y,v){if(!v&&y&&y.__esModule)return y;if(y===null||s(y)!=="object"&&typeof y!="function")return{default:y};var x=m(v);if(x&&x.has(y))return x.get(y);var C={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in y)if(_!=="default"&&Object.prototype.hasOwnProperty.call(y,_)){var h=c?Object.getOwnPropertyDescriptor(y,_):null;h&&(h.get||h.set)?Object.defineProperty(C,_,h):C[_]=y[_]}return C.default=y,x&&x.set(y,C),C}(d),p=g(p);var k=function(){function y(){(0,l.default)(this,y),this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}return(0,u.default)(y,[{key:"removeFakeBackground",value:function(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}},{key:"setFakeBackground",value:function(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}},{key:"save",value:function(){this.savedSelectionRange=y.range}},{key:"restore",value:function(){if(this.savedSelectionRange){var v=window.getSelection();v.removeAllRanges(),v.addRange(this.savedSelectionRange)}}},{key:"clearSaved",value:function(){this.savedSelectionRange=null}},{key:"collapseToEnd",value:function(){var v=window.getSelection(),x=document.createRange();x.selectNodeContents(v.focusNode),x.collapse(!1),v.removeAllRanges(),v.addRange(x)}},{key:"findParentTag",value:function(v,x){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,c=window.getSelection(),_=null;if(!c||!c.anchorNode||!c.focusNode)return null;var h=[c.anchorNode,c.focusNode];return h.forEach(function(b){for(var M=C;M>0&&b.parentNode&&(b.tagName!==v||(_=b,x&&b.classList&&!b.classList.contains(x)&&(_=null),!_));)b=b.parentNode,M--}),_}},{key:"expandToTag",value:function(v){var x=window.getSelection();x.removeAllRanges();var C=document.createRange();C.selectNodeContents(v),x.addRange(C)}}],[{key:"CSS",get:function(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}},{key:"anchorNode",get:function(){var v=window.getSelection();return v?v.anchorNode:null}},{key:"anchorElement",get:function(){var v=window.getSelection();if(!v)return null;var x=v.anchorNode;return x?p.default.isElement(x)?x:x.parentElement:null}},{key:"anchorOffset",get:function(){var v=window.getSelection();return v?v.anchorOffset:null}},{key:"isCollapsed",get:function(){var v=window.getSelection();return v?v.isCollapsed:null}},{key:"isAtEditor",get:function(){return this.isSelectionAtEditor(y.get())}},{key:"isSelectionAtEditor",value:function(v){if(!v)return!1;var x=v.anchorNode||v.focusNode;x&&x.nodeType===Node.TEXT_NODE&&(x=x.parentNode);var C=null;return x&&x instanceof Element&&(C=x.closest(".".concat(y.CSS.editorZone))),!!C&&C.nodeType===Node.ELEMENT_NODE}},{key:"isRangeAtEditor",value:function(v){if(v){var x=v.startContainer;x&&x.nodeType===Node.TEXT_NODE&&(x=x.parentNode);var C=null;return x&&x instanceof Element&&(C=x.closest(".".concat(y.CSS.editorZone))),!!C&&C.nodeType===Node.ELEMENT_NODE}}},{key:"isSelectionExists",get:function(){return!!y.get().anchorNode}},{key:"range",get:function(){return this.getRangeFromSelection(this.get())}},{key:"getRangeFromSelection",value:function(v){return v&&v.rangeCount?v.getRangeAt(0):null}},{key:"rect",get:function(){var v,x=document.selection,C={x:0,y:0,width:0,height:0};if(x&&x.type!=="Control")return v=(x=x).createRange(),C.x=v.boundingLeft,C.y=v.boundingTop,C.width=v.boundingWidth,C.height=v.boundingHeight,C;if(!window.getSelection)return d.log("Method window.getSelection is not supported","warn"),C;if((x=window.getSelection()).rangeCount===null||isNaN(x.rangeCount))return d.log("Method SelectionUtils.rangeCount is not supported","warn"),C;if(x.rangeCount===0)return C;if((v=x.getRangeAt(0).cloneRange()).getBoundingClientRect&&(C=v.getBoundingClientRect()),C.x===0&&C.y===0){var c=document.createElement("span");if(c.getBoundingClientRect){c.appendChild(document.createTextNode("\u200B")),v.insertNode(c),C=c.getBoundingClientRect();var _=c.parentNode;_.removeChild(c),_.normalize()}}return C}},{key:"text",get:function(){return window.getSelection?window.getSelection().toString():""}},{key:"get",value:function(){return window.getSelection()}},{key:"setCursor",value:function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=document.createRange(),c=window.getSelection();return p.default.isNativeInput(v)?p.default.canSetCaret(v)?(v.focus(),v.selectionStart=v.selectionEnd=x,v.getBoundingClientRect()):void 0:(C.setStart(v,x),C.setEnd(v,x),c.removeAllRanges(),c.addRange(C),C.getBoundingClientRect())}},{key:"addFakeCursor",value:function(v){var x=y.range,C=p.default.make("span","codex-editor__fake-cursor");C.dataset.mutationFree="true",!x||v&&!v.contains(x.startContainer)||(x.collapse(),x.insertNode(C))}},{key:"removeFakeCursor",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.body,x=p.default.find(v,".codex-editor__fake-cursor");x&&x.remove()}}]),y}();a.default=k,k.displayName="SelectionUtils",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t){var e={}.hasOwnProperty;r.exports=function(i,n){return e.call(i,n)}},function(r,t,e){var i=e(18),n=e(44);r.exports=e(17)?function(o,s,a){return i.f(o,s,n(1,a))}:function(o,s,a){return o[s]=a,o}},function(r,t,e){var i=e(62),n=e(39);r.exports=function(o){return i(n(o))}},function(r,t,e){"use strict";var i=e(11);r.exports=function(n,o){return!!n&&i(function(){o?n.call(null,function(){},1):n.call(null)})}},function(r,t,e){var i=e(362),n=e(363),o=e(148),s=e(364);r.exports=function(a,l){return i(a)||n(a,l)||o(a,l)||s()},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(32);r.exports=function(n,o,s){if(i(n),o===void 0)return n;switch(s){case 1:return function(a){return n.call(o,a)};case 2:return function(a,l){return n.call(o,a,l)};case 3:return function(a,l,u){return n.call(o,a,l,u)}}return function(){return n.apply(o,arguments)}}},function(r,t){r.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(r,t){var e=Math.ceil,i=Math.floor;r.exports=function(n){return isNaN(n=+n)?0:(n>0?i:e)(n)}},function(r,t,e){var i=e(63),n=e(44),o=e(28),s=e(42),a=e(26),l=e(117),u=Object.getOwnPropertyDescriptor;t.f=e(17)?u:function(d,p){if(d=o(d),p=s(p,!0),l)try{return u(d,p)}catch(g){}if(a(d,p))return n(!i.f.call(d,p),d[p])}},function(r,t,e){var i=e(0),n=e(16),o=e(11);r.exports=function(s,a){var l=(n.Object||{})[s]||Object[s],u={};u[s]=a(l),i(i.S+i.F*o(function(){l(1)}),"Object",u)}},function(r,t,e){var i=e(31),n=e(62),o=e(22),s=e(15),a=e(133);r.exports=function(l,u){var d=l==1,p=l==2,g=l==3,m=l==4,k=l==6,y=l==5||k,v=u||a;return function(x,C,c){for(var _,h,b=o(x),M=n(b),E=i(C,c,3),w=s(M.length),S=0,O=d?v(x,w):p?v(x,0):void 0;w>S;S++)if((y||S in M)&&(h=E(_=M[S],S,b),l)){if(d)O[S]=h;else if(h)switch(l){case 3:return!0;case 5:return _;case 6:return S;case 2:O.push(_)}else if(m)return!1}return k?-1:g||m?m:O}}},function(r,t,e){"use strict";e.r(t),e.d(t,"IconAddBackground",function(){return u}),e.d(t,"IconAddBorder",function(){return d}),e.d(t,"IconAlignCenter",function(){return p}),e.d(t,"IconAlignJustify",function(){return g}),e.d(t,"IconAlignLeft",function(){return m}),e.d(t,"IconAlignRight",function(){return k}),e.d(t,"IconBold",function(){return y}),e.d(t,"IconBrackets",function(){return v}),e.d(t,"IconChecklist",function(){return x}),e.d(t,"IconChevronDown",function(){return C}),e.d(t,"IconChevronLeft",function(){return c}),e.d(t,"IconChevronRight",function(){return _}),e.d(t,"IconChevronUp",function(){return h}),e.d(t,"IconClipboard",function(){return b}),e.d(t,"IconCollapse",function(){return M}),e.d(t,"IconColor",function(){return E}),e.d(t,"IconCopy",function(){return w}),e.d(t,"IconCross",function(){return S}),e.d(t,"IconCurlyBrackets",function(){return O}),e.d(t,"IconDelimiter",function(){return B}),e.d(t,"IconDirectionDownRight",function(){return A}),e.d(t,"IconDirectionLeftDown",function(){return R}),e.d(t,"IconDirectionRightDown",function(){return T}),e.d(t,"IconDirectionUpRight",function(){return L}),e.d(t,"IconDotCircle",function(){return P}),e.d(t,"IconEtcHorisontal",function(){return D}),e.d(t,"IconEtcVertical",function(){return H}),e.d(t,"IconFile",function(){return j}),e.d(t,"IconGift",function(){return F}),e.d(t,"IconGlobe",function(){return K}),e.d(t,"IconH1",function(){return i}),e.d(t,"IconH2",function(){return n}),e.d(t,"IconH3",function(){return o}),e.d(t,"IconH4",function(){return s}),e.d(t,"IconH5",function(){return a}),e.d(t,"IconH6",function(){return l}),e.d(t,"IconHeading",function(){return q}),e.d(t,"IconHeart",function(){return W}),e.d(t,"IconHidden",function(){return Y}),e.d(t,"IconHtml",function(){return Z}),e.d(t,"IconInstagram",function(){return X}),e.d(t,"IconItalic",function(){return Q}),e.d(t,"IconLink",function(){return ue}),e.d(t,"IconLinkedin",function(){return ce}),e.d(t,"IconListBulleted",function(){return ne}),e.d(t,"IconListNumbered",function(){return ge}),e.d(t,"IconMarker",function(){return re}),e.d(t,"IconMenu",function(){return Ce}),e.d(t,"IconMenuSmall",function(){return pe}),e.d(t,"IconPicture",function(){return be}),e.d(t,"IconPlay",function(){return xe}),e.d(t,"IconPlus",function(){return Re}),e.d(t,"IconQuestion",function(){return je}),e.d(t,"IconQuote",function(){return Be}),e.d(t,"IconRedo",function(){return ze}),e.d(t,"IconRemoveBackground",function(){return Ne}),e.d(t,"IconReplace",function(){return De}),e.d(t,"IconSave",function(){return le}),e.d(t,"IconSearch",function(){return he}),e.d(t,"IconStar",function(){return ye}),e.d(t,"IconStretch",function(){return Ae}),e.d(t,"IconStrikethrough",function(){return qe}),e.d(t,"IconTable",function(){return Mt}),e.d(t,"IconTableWithHeadings",function(){return nt}),e.d(t,"IconTableWithoutHeadings",function(){return st}),e.d(t,"IconText",function(){return Ct}),e.d(t,"IconTranslate",function(){return St}),e.d(t,"IconTrash",function(){return Ft}),e.d(t,"IconTwitter",function(){return Je}),e.d(t,"IconUnderline",function(){return It}),e.d(t,"IconUndo",function(){return Tt}),e.d(t,"IconUnlink",function(){return zt}),e.d(t,"IconUser",function(){return Ht}),e.d(t,"IconUsersGroup",function(){return Yt}),e.d(t,"IconWarning",function(){return bt});let i='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17V10.2135C19 10.1287 18.9011 10.0824 18.836 10.1367L16 12.5"/></svg>',n='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10 19 9.5 19 12C19 13.9771 16.0684 13.9997 16.0012 16.8981C15.9999 16.9533 16.0448 17 16.1 17L19.3 17"/></svg>',o='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10.5 16.8323 10 17.6 10C18.3677 10 19.5 10.311 19.5 11.5C19.5 12.5315 18.7474 12.9022 18.548 12.9823C18.5378 12.9864 18.5395 13.0047 18.5503 13.0063C18.8115 13.0456 20 13.3065 20 14.8C20 16 19.5 17 17.8 17C17.8 17 16 17 16 16.3"/></svg>',s='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 10L15.2834 14.8511C15.246 14.9178 15.294 15 15.3704 15C16.8489 15 18.7561 15 20.2 15M19 17C19 15.7187 19 14.8813 19 13.6"/></svg>',a='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 15.9C16 15.9 16.3768 17 17.8 17C19.5 17 20 15.6199 20 14.7C20 12.7323 17.6745 12.0486 16.1635 12.9894C16.094 13.0327 16 12.9846 16 12.9027V10.1C16 10.0448 16.0448 10 16.1 10H19.8"/></svg>',l='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.5 10C16.5 10.5 16 13.3285 16 15M16 15V15C16 16.1046 16.8954 17 18 17H18.3246C19.3251 17 20.3191 16.3492 20.2522 15.3509C20.0612 12.4958 16 12.6611 16 15Z"/></svg>',u='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',d='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 9.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 5H14.5096"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.625 5H15C17.2091 5 19 6.79086 19 9V9.375"/><path stroke="currentColor" stroke-width="2" d="M9.375 5L9 5C6.79086 5 5 6.79086 5 9V9.375"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 5H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9.5H5.00957"/><path stroke="currentColor" stroke-width="2" d="M9.375 19H9C6.79086 19 5 17.2091 5 15V14.625"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 19H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14.55H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/></svg>',p='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 7L6 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 17H6"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 12L8 12"/></svg>',g='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 7L6 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 17H6"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 12L6 12"/></svg>',m='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 7L5 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 17H5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13 12L5 12"/></svg>',k='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 7L7 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17H7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 12L11 12"/></svg>',y='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',v='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 8L5 12L9 16"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8L19 12L15 16"/></svg>',x='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.2 12L11.0586 13.8586C11.1367 13.9367 11.2633 13.9367 11.3414 13.8586L14.7 10.5"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',C='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 17.5L9.64142 12.6414C9.56331 12.5633 9.56331 12.4367 9.64142 12.3586L14.5 7.5"/></svg>',_='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.58284 17.5L14.4414 12.6414C14.5195 12.5633 14.5195 12.4367 14.4414 12.3586L9.58284 7.5"/></svg>',h='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',b='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.42857 7H7.71429C7.25963 7 6.82359 7.15804 6.5021 7.43934C6.18061 7.72064 6 8.10218 6 8.5V17.5C6 17.8978 6.18061 18.2794 6.5021 18.5607C6.82359 18.842 7.25963 19 7.71429 19H16.2857C16.7404 19 17.1764 18.842 17.4979 18.5607C17.8194 18.2794 18 17.8978 18 17.5V8.5C18 8.10218 17.8194 7.72064 17.4979 7.43934C17.1764 7.15804 16.7404 7 16.2857 7H14.5714"/><rect width="5.15789" height="3.36842" x="9.42105" y="5" stroke="currentColor" stroke-width="2" rx="1.5"/></svg>',M='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L10 12M10 12L7 15M10 12H4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L14 12M14 12L17 15M14 12H20"/></svg>',E='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M5.24296 11.4075C5.23167 10.6253 5.52446 9.8395 6.12132 9.24264L9.65686 5.70711C10.0474 5.31658 10.6809 5.31693 11.0714 5.70745L16.0205 10.6565C16.2268 10.8629 16.3243 11.1371 16.3126 11.4075M5.24296 11.4075C5.25382 12.1607 5.54661 12.9106 6.12132 13.4853L8 15.364M5.24296 11.4075H11.9565M16.3126 11.4075C16.3022 11.6487 16.205 11.8869 16.0208 12.0711L12.4853 15.6066C11.3137 16.7782 9.41421 16.7782 8.24264 15.6066L8 15.364M16.3126 11.4075H11.9565M8 15.364L11.9565 11.4075"/><path stroke="currentColor" stroke-width="2" d="M20 17.4615C20 18.3112 19.3284 19 18.5 19C17.6716 19 17 18.3112 17 17.4615C17 16.6119 17.9 15.6154 18.5 15C19.1 15.6154 20 16.6119 20 17.4615Z"/></svg>',w='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.25 8.5H10.25C9.2835 8.5 8.5 9.2835 8.5 10.25V17.25C8.5 18.2165 9.2835 19 10.25 19H17.25C18.2165 19 19 18.2165 19 17.25V10.25C19 9.2835 18.2165 8.5 17.25 8.5Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.5 8.5V6.75C15.5 6.28587 15.3156 5.84075 14.9874 5.51256C14.6592 5.18437 14.2141 5 13.75 5H6.75C6.28587 5 5.84075 5.18437 5.51256 5.51256C5.18437 5.84075 5 6.28587 5 6.75V13.75C5 14.2141 5.18437 14.6592 5.51256 14.9874C5.84075 15.3156 6.28587 15.5 6.75 15.5H8.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 12L15.5 12"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15.5L15.5 15.5"/></svg>',S='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',O='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17C7 17 7 15.2536 7 13.5L5.5 12L7 10.5C7 8.74644 7 7 9 7"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17C17 17 17 15.2536 17 13.5L18.5 12L17 10.5C17 8.74644 17 7 15 7"/></svg>',B='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="6" x2="10" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="14" x2="18" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',A='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 9.16666L18.2167 12.5M18.2167 12.5L14.8833 15.8333M18.2167 12.5H10.05C9.16594 12.5 8.31809 12.1488 7.69297 11.5237C7.06785 10.8986 6.71666 10.0507 6.71666 9.16666"/></svg>',R='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.9167 14.9167L11.5833 18.25M11.5833 18.25L8.25 14.9167M11.5833 18.25L11.5833 10.0833C11.5833 9.19928 11.9345 8.35143 12.5596 7.72631C13.1848 7.10119 14.0326 6.75 14.9167 6.75"/></svg>',T='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.13333 14.9167L12.4667 18.25M12.4667 18.25L15.8 14.9167M12.4667 18.25L12.4667 10.0833C12.4667 9.19928 12.1155 8.35143 11.4904 7.72631C10.8652 7.10119 10.0174 6.75 9.13333 6.75"/></svg>',L='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 15.8333L18.2167 12.5M18.2167 12.5L14.8833 9.16667M18.2167 12.5L10.05 12.5C9.16595 12.5 8.31811 12.8512 7.69299 13.4763C7.06787 14.1014 6.71667 14.9493 6.71667 15.8333"/></svg>',P='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',D='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M7.30499 11.995L7.30499 12.005M12.005 11.995V12.005M16.705 11.995L16.705 12.005"/></svg>',H='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M12.01 7.29999H12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M12.01 12H12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M12.01 16.7H12"/></svg>',j='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.3236 8.43554L9.49533 12.1908C9.13119 12.5505 8.93118 13.043 8.9393 13.5598C8.94741 14.0767 9.163 14.5757 9.53862 14.947C9.91424 15.3182 10.4191 15.5314 10.9422 15.5397C11.4653 15.5479 11.9637 15.3504 12.3279 14.9908L16.1562 11.2355C16.8845 10.5161 17.2845 9.53123 17.2682 8.4975C17.252 7.46376 16.8208 6.46583 16.0696 5.72324C15.3184 4.98066 14.3086 4.55425 13.2624 4.53782C12.2162 4.52138 11.2193 4.91627 10.4911 5.63562L6.66277 9.39093C5.57035 10.4699 4.97032 11.9473 4.99467 13.4979C5.01903 15.0485 5.66578 16.5454 6.79264 17.6592C7.9195 18.7731 9.43417 19.4127 11.0034 19.4374C12.5727 19.462 14.068 18.8697 15.1604 17.7907L18.9887 14.0354"/></svg>',F='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="12" height="6" x="6" y="13" stroke="currentColor" stroke-width="2" rx="2"/><line x1="12" x2="12" y1="9" y2="19" stroke="currentColor" stroke-width="2"/><path stroke="currentColor" stroke-width="2" d="M5 11C5 9.89543 5.89543 9 7 9H17C18.1046 9 19 9.89543 19 11V11C19 12.1046 18.1046 13 17 13H7C5.89543 13 5 12.1046 5 11V11Z"/><path stroke="currentColor" stroke-width="2" d="M16 9C16 7.89543 16 6 14 6C12 6 12 7.89543 12 9C12 7.89543 12 6 10 6C8 6 8 7.89543 8 9"/></svg>',K='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M18 12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12M18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12M18 12H6M11.7 6C11.7 6 9.7 7.63811 9.7 12C9.7 16.9 11.7 18 11.7 18M12.3 6C12.3 6 14.3 7.63811 14.3 12C14.3 16.9 12.3 18 12.3 18"/></svg>',q='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 7L9 12M9 17V12M9 12L15 12M15 7V12M15 17L15 12"/></svg>',W='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M6.6 7.50001C5.27451 8.82549 5.19999 10.6 6.59999 12.3C8 14 12.2 17.9 12.2 17.9C12.2 17.9 16.5 14 17.8 12.3C19.1 10.6 19.1255 8.82549 17.8 7.5C16.4745 6.17452 14.3255 6.17452 13 7.5L12.2 8.30001L11.4 7.50001C10.0745 6.17453 7.92548 6.17453 6.6 7.50001Z"/></svg>',Y='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.77778 6L18.5 17.7222"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.687 10C10.2473 10.4392 10.0002 11.035 10 11.6564C9.99978 12.2777 10.2465 12.8737 10.6858 13.3132C11.1251 13.7527 11.7211 13.9998 12.3427 14C12.9642 14.0002 13.5604 13.7536 14 13.3144"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7C17 11.1666 20 11.17 20 11.67C20 12.17 19 13.17 19 13.17M8.2424 8.80936C7.59317 9.22876 6.97961 9.76732 6.4017 10.4251C5.70398 11.2193 5.35512 11.6164 5.35513 12.3702C5.35514 13.124 5.70406 13.5211 6.40191 14.3154C7.99587 16.1297 9.8618 17.0367 12 17.0367C13.1102 17.0367 14.1466 16.7917 15.1111 16.3024"/></svg>',Z='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16.6954 5C17.912 5 18.8468 6.07716 18.6755 7.28165L17.426 16.0659C17.3183 16.8229 16.7885 17.4522 16.061 17.6873L12.6151 18.8012C12.2152 18.9304 11.7848 18.9304 11.3849 18.8012L7.93898 17.6873C7.21148 17.4522 6.6817 16.8229 6.57403 16.0659L5.32454 7.28165C5.15322 6.07716 6.088 5 7.30461 5H16.6954Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8.4H9L9.42857 11.7939H14.5714L14.3571 13.2788L14.1429 14.7636L12 15.4L9.85714 14.7636L9.77143 14.3394"/></svg>',X='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.9 8.1V8.11"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/></svg>',Q='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',ue='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',ce='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="9" x2="9" y1="11.4" y2="15.4" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 8.7V8.71"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 11.4V12M12 15.4V12M12 12C14 11.5 15 11.3611 15 12.5C15 13.5 15 15.4 15 15.4"/></svg>',ne='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',ge='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>',re='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M11.3535 9.31802L12.7678 7.90381C13.5488 7.12276 14.8151 7.12276 15.5962 7.90381C16.3772 8.68486 16.3772 9.95119 15.5962 10.7322L14.182 12.1464M11.3535 9.31802L7.96729 12.7043C7.40889 13.2627 7.02826 13.9739 6.87339 14.7482L6.69798 15.6253C6.55803 16.325 7.17495 16.942 7.87467 16.802L8.75175 16.6266C9.52612 16.4717 10.2373 16.0911 10.7957 15.5327L14.182 12.1464M11.3535 9.31802L14.182 12.1464"/><line x1="15" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',pe='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.41 9.66H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 9.66H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.31 14.36H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 14.36H14.59"/></svg>',Ce='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',be='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.13968 15.32L8.69058 11.5661C9.02934 11.2036 9.48873 11 9.96774 11C10.4467 11 10.9061 11.2036 11.2449 11.5661L15.3871 16M13.5806 14.0664L15.0132 12.533C15.3519 12.1705 15.8113 11.9668 16.2903 11.9668C16.7693 11.9668 17.2287 12.1705 17.5675 12.533L18.841 13.9634"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.7778 9.33331H13.7867"/></svg>',xe='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 10.5606V13.4394C10 14.4777 11.1572 15.0971 12.0211 14.5211L14.1803 13.0817C14.9536 12.5661 14.9503 11.4317 14.18 10.9181L12.0214 9.47907C11.1591 8.9042 10 9.5203 10 10.5606Z"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',Re='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',je='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.52V15.51"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M10.0024 9.97655C10.1567 9.01858 11 8.5 12 8.5C13 8.5 13.6857 9.17188 13.8693 9.70703C14.0529 10.2422 14.0135 11.0514 13.5067 11.5159C13 11.9805 12.7344 11.832 12.2784 12.3168C12.1134 12.4923 12 12.7476 12 12.7476"/></svg>',Be='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 10.8182L9 10.8182C8.80222 10.8182 8.60888 10.7649 8.44443 10.665C8.27998 10.5651 8.15181 10.4231 8.07612 10.257C8.00043 10.0909 7.98063 9.90808 8.01922 9.73174C8.0578 9.55539 8.15304 9.39341 8.29289 9.26627C8.43275 9.13913 8.61093 9.05255 8.80491 9.01747C8.99889 8.98239 9.19996 9.00039 9.38268 9.0692C9.56541 9.13801 9.72159 9.25453 9.83147 9.40403C9.94135 9.55353 10 9.72929 10 9.90909L10 12.1818C10 12.664 9.78929 13.1265 9.41421 13.4675C9.03914 13.8084 8.53043 14 8 14"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 10.8182L15 10.8182C14.8022 10.8182 14.6089 10.7649 14.4444 10.665C14.28 10.5651 14.1518 10.4231 14.0761 10.257C14.0004 10.0909 13.9806 9.90808 14.0192 9.73174C14.0578 9.55539 14.153 9.39341 14.2929 9.26627C14.4327 9.13913 14.6109 9.05255 14.8049 9.01747C14.9989 8.98239 15.2 9.00039 15.3827 9.0692C15.5654 9.13801 15.7216 9.25453 15.8315 9.40403C15.9414 9.55353 16 9.72929 16 9.90909L16 12.1818C16 12.664 15.7893 13.1265 15.4142 13.4675C15.0391 13.8084 14.5304 14 14 14"/></svg>',ze='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.6667 13.6667L18 10.3333L14.6667 7M18 10.3333H8.83333C7.94928 10.3333 7.10143 10.6845 6.47631 11.3096C5.85119 11.9348 5.5 12.7826 5.5 13.6667C5.5 14.5507 5.85119 15.3986 6.47631 16.0237C7.10143 16.6488 7.94928 17 8.83333 17H9.66667"/></svg>',Ne='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.1187 14.8787L16.9974 17M14.876 19.1213L16.9974 17M19.1187 19.1213L16.9974 17M16.9974 17L14.876 14.8787"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',De='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M11.5 17.5L5 11M5 11V15.5M5 11H9.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12.5 6.5L19 13M19 13V8.5M19 13H14.5"/></svg>',le='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M15.078 5.62637L15.6153 4.78296L15.078 5.62637C15.4261 5.84808 15.7393 6.15354 16.5711 6.98528L17.2782 6.27817L16.5711 6.98528L17.5251 7.93934C17.8347 8.2489 17.9496 8.36494 18.0489 8.48177C18.5907 9.11982 18.9188 9.91178 18.9868 10.7461C18.9992 10.8989 19 11.0622 19 11.5V12C19 13.4166 18.9992 14.419 18.9352 15.2026C18.8721 15.9745 18.7527 16.4457 18.564 16.816C18.1805 17.5686 17.5686 18.1805 16.816 18.564C16.4457 18.7527 15.9745 18.8721 15.2026 18.9352C14.419 18.9992 13.4166 19 12 19C10.5834 19 9.58104 18.9992 8.79744 18.9352C8.02552 18.8721 7.55435 18.7527 7.18404 18.564C6.43139 18.1805 5.81947 17.5686 5.43597 16.816C5.24729 16.4457 5.12787 15.9745 5.0648 15.2026C5.00078 14.419 5 13.4166 5 12V11.7782C5 10.4673 5.00067 9.53987 5.05572 8.81299C5.10998 8.09655 5.21284 7.65673 5.37487 7.3093C5.77229 6.45718 6.45718 5.77229 7.3093 5.37487C7.65673 5.21284 8.09655 5.10998 8.81299 5.05572C9.53986 5.00067 10.4673 5 11.7782 5C12.9544 5 13.3919 5.00552 13.7948 5.09484C14.2503 5.19583 14.6846 5.37572 15.078 5.62637Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15C13.1046 15 14 14.1046 14 13C14 11.8954 13.1046 11 12 11C10.8954 11 10 11.8954 10 13C10 14.1046 10.8954 15 12 15Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5.5V7C14 7.55228 13.5523 8 13 8H11C10.4477 8 10 7.55228 10 7V5.2"/></svg>',he='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',ye='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M11.8197 6.04369C11.8924 5.8925 12.1076 5.8925 12.1803 6.04369L13.9776 9.78496C14.0068 9.84564 14.0645 9.88759 14.1312 9.89657L18.2448 10.4498C18.411 10.4722 18.4776 10.6769 18.3562 10.7927L15.3535 13.6582C15.3048 13.7047 15.2827 13.7726 15.2948 13.8388L16.0398 17.922C16.0699 18.087 15.8957 18.2136 15.7481 18.1339L12 16.1124L8.25192 18.1339C8.10429 18.2136 7.93012 18.087 7.96022 17.922L8.7052 13.8388C8.71728 13.7726 8.69523 13.7047 8.64652 13.6582L5.64378 10.7927C5.52244 10.6769 5.58896 10.4722 5.7552 10.4498L9.86876 9.89657C9.93549 9.88759 9.99322 9.84564 10.0224 9.78496L11.8197 6.04369Z"/></svg>',Ae='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>',qe='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 8.50001C13.5 7 10.935 6.66476 9.75315 7.79706C9.27092 8.25909 9 8.88574 9 9.53915C9 10.1926 9.27092 10.8192 9.75315 11.2812C10.9835 12.46 13.0165 11.5457 14.2468 12.7244C14.7291 13.1865 15 13.8131 15 14.4665C15 15.1199 14.7291 15.7466 14.2468 16.2086C12.8659 17.5317 10 17.5 9 16"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 12H18"/></svg>',nt='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',st='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M14 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><path stroke="currentColor" stroke-width="2" d="M5 14H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',Mt='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',Ct='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',St='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 17C8 14.5 12 12 13 9"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.5 11C8.5 11 10 14 12.5 15"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7.7H16M11 7.7V5.7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 18L15.2143 16M15.2143 16L16.9159 11.2354C16.9663 11.0942 17.1001 11 17.25 11C17.3999 11 17.5337 11.0942 17.5841 11.2354L19.2857 16M15.2143 16H19.2857M20 18L19.2857 16"/></svg>',Ft='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.1328 7.7234C18.423 7.7634 18.7115 7.80571 19 7.85109M18.1328 7.7234L17.2267 17.4023C17.1897 17.8371 16.973 18.2432 16.62 18.5394C16.267 18.8356 15.8037 19.0001 15.3227 19H8.67733C8.19632 19.0001 7.73299 18.8356 7.37998 18.5394C7.02698 18.2432 6.81032 17.8371 6.77333 17.4023L5.86715 7.7234M18.1328 7.7234C17.1536 7.58919 16.1693 7.48733 15.1818 7.41803M5.86715 7.7234C5.57697 7.76263 5.28848 7.80494 5 7.85032M5.86715 7.7234C6.84642 7.58919 7.83074 7.48733 8.81818 7.41803M15.1818 7.41803C13.0638 7.26963 10.9362 7.26963 8.81818 7.41803M15.1818 7.41803C15.1818 5.30368 13.7266 4.34834 12 4.34834C10.2734 4.34834 8.81818 5.43945 8.81818 7.41803"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.5 15.5L10 11"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 11L13.5 15.5"/></svg>',Je='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linejoin="round" stroke-width="2" d="M16.7893 7.87697C17.5 8 18.5 8 18.5 8C18.5 8 17.5 9.5 17.5 10C18.5 18.5 11.5 20.5 5.5 16.5C6.99996 16.6712 8.04617 16.5163 9.25234 15.6024C7.99546 15.58 5.36548 13.6033 5 12.5C6.5 13 8 12 8 12C6.52134 11.0446 4.93005 9.24114 5.97461 7.50832C7.39125 9.18838 9.50766 10.2939 11.8948 10.4097C11.2198 7.60755 14.9218 5.95341 16.7893 7.87697Z"/></svg>',It='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7.5V11.5C9 12.2956 9.31607 13.0587 9.87868 13.6213C10.4413 14.1839 11.2044 14.5 12 14.5C12.7956 14.5 13.5587 14.1839 14.1213 13.6213C14.6839 13.0587 15 12.2956 15 11.5V7.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7.71429 18H16.2857"/></svg>',Tt='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.33333 13.6667L6 10.3333L9.33333 7M6 10.3333H15.1667C16.0507 10.3333 16.8986 10.6845 17.5237 11.3096C18.1488 11.9348 18.5 12.7826 18.5 13.6667C18.5 14.5507 18.1488 15.3986 17.5237 16.0237C16.8986 16.6488 16.0507 17 15.1667 17H14.3333"/></svg>',zt='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',Ht='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M12 10C12.7145 10 13.239 9.56559 13.5392 9.11536C13.844 8.65814 14 8.0841 14 7.5C14 6.9159 13.844 6.34186 13.5392 5.88464C13.239 5.43441 12.7145 5 12 5C11.2855 5 10.761 5.43441 10.4608 5.88464C10.156 6.34186 10 6.9159 10 7.5C10 8.0841 10.156 8.65814 10.4608 9.11536C10.761 9.56559 11.2855 10 12 10Z"/><ellipse cx="12" cy="16" stroke="currentColor" stroke-width="2" rx="3" ry="5" transform="rotate(-90 12 16)"/></svg>',Yt='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 10C10.7145 10 11.239 9.56559 11.5392 9.11536C11.844 8.65814 12 8.0841 12 7.5C12 6.9159 11.844 6.34186 11.5392 5.88464C11.239 5.43441 10.7145 5 10 5C9.28547 5 8.761 5.43441 8.46084 5.88464C8.15603 6.34186 8 6.9159 8 7.5C8 8.0841 8.15603 8.65814 8.46084 9.11536C8.761 9.56559 9.28547 10 10 10Z"/><ellipse cx="10" cy="16" stroke="currentColor" stroke-width="2" rx="3" ry="5" transform="rotate(-90 10 16)"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.5555 10.2222C16.5374 10.2222 17.3333 9.42629 17.3333 8.44445C17.3333 7.46261 16.5374 6.66667 15.5555 6.66667"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.5 13C21 14.5 20.5 18 18 18.5"/></svg>',bt='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>'},function(r,t){var e={}.toString;r.exports=function(i){return e.call(i).slice(8,-1)}},function(r,t){r.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}},function(r,t,e){"use strict";if(e(17)){var i=e(46),n=e(10),o=e(11),s=e(0),a=e(81),l=e(110),u=e(31),d=e(59),p=e(44),g=e(27),m=e(60),k=e(33),y=e(15),v=e(144),x=e(48),C=e(42),c=e(26),_=e(64),h=e(13),b=e(22),M=e(102),E=e(49),w=e(51),S=e(50).f,O=e(104),B=e(45),A=e(14),R=e(36),T=e(71),L=e(65),P=e(106),D=e(57),H=e(74),j=e(58),F=e(105),K=e(135),q=e(18),W=e(34),Y=q.f,Z=W.f,X=n.RangeError,Q=n.TypeError,ue=n.Uint8Array,ce=Array.prototype,ne=l.ArrayBuffer,ge=l.DataView,re=R(0),pe=R(2),Ce=R(3),be=R(4),xe=R(5),Re=R(6),je=T(!0),Be=T(!1),ze=P.values,Ne=P.keys,De=P.entries,le=ce.lastIndexOf,he=ce.reduce,ye=ce.reduceRight,Ae=ce.join,qe=ce.sort,nt=ce.slice,st=ce.toString,Mt=ce.toLocaleString,Ct=A("iterator"),St=A("toStringTag"),Ft=B("typed_constructor"),Je=B("def_constructor"),It=a.CONSTR,Tt=a.TYPED,zt=a.VIEW,Ht=R(1,function(ve,ke){return qt(L(ve,ve[Je]),ke)}),Yt=o(function(){return new ue(new Uint16Array([1]).buffer)[0]===1}),bt=!!ue&&!!ue.prototype.set&&o(function(){new ue(1).set({})}),Qt=function(ve,ke){var Le=k(ve);if(Le<0||Le%ke)throw X("Wrong offset!");return Le},We=function(ve){if(h(ve)&&Tt in ve)return ve;throw Q(ve+" is not a typed array!")},qt=function(ve,ke){if(!h(ve)||!(Ft in ve))throw Q("It is not a typed array constructor!");return new ve(ke)},nr=function(ve,ke){return mr(L(ve,ve[Je]),ke)},mr=function(ve,ke){for(var Le=0,Ke=ke.length,He=qt(ve,Ke);Ke>Le;)He[Le]=ke[Le++];return He},vr=function(ve,ke,Le){Y(ve,ke,{get:function(){return this._d[Le]}})},br=function(ve){var ke,Le,Ke,He,Et,Ut,Se=b(ve),ht=arguments.length,$t=ht>1?arguments[1]:void 0,sr=$t!==void 0,ut=O(Se);if(ut!=null&&!M(ut)){for(Ut=ut.call(Se),Ke=[],ke=0;!(Et=Ut.next()).done;ke++)Ke.push(Et.value);Se=Ke}for(sr&&ht>2&&($t=u($t,arguments[2],2)),ke=0,Le=y(Se.length),He=qt(this,Le);Le>ke;ke++)He[ke]=sr?$t(Se[ke],ke):Se[ke];return He},Rr=function(){for(var ve=0,ke=arguments.length,Le=qt(this,ke);ke>ve;)Le[ve]=arguments[ve++];return Le},jr=!!ue&&o(function(){Mt.call(new ue(1))}),Sr=function(){return Mt.apply(jr?nt.call(We(this)):We(this),arguments)},Tr={copyWithin:function(ve,ke){return K.call(We(this),ve,ke,arguments.length>2?arguments[2]:void 0)},every:function(ve){return be(We(this),ve,arguments.length>1?arguments[1]:void 0)},fill:function(ve){return F.apply(We(this),arguments)},filter:function(ve){return nr(this,pe(We(this),ve,arguments.length>1?arguments[1]:void 0))},find:function(ve){return xe(We(this),ve,arguments.length>1?arguments[1]:void 0)},findIndex:function(ve){return Re(We(this),ve,arguments.length>1?arguments[1]:void 0)},forEach:function(ve){re(We(this),ve,arguments.length>1?arguments[1]:void 0)},indexOf:function(ve){return Be(We(this),ve,arguments.length>1?arguments[1]:void 0)},includes:function(ve){return je(We(this),ve,arguments.length>1?arguments[1]:void 0)},join:function(ve){return Ae.apply(We(this),arguments)},lastIndexOf:function(ve){return le.apply(We(this),arguments)},map:function(ve){return Ht(We(this),ve,arguments.length>1?arguments[1]:void 0)},reduce:function(ve){return he.apply(We(this),arguments)},reduceRight:function(ve){return ye.apply(We(this),arguments)},reverse:function(){for(var ve,ke=We(this).length,Le=Math.floor(ke/2),Ke=0;Ke<Le;)ve=this[Ke],this[Ke++]=this[--ke],this[ke]=ve;return this},some:function(ve){return Ce(We(this),ve,arguments.length>1?arguments[1]:void 0)},sort:function(ve){return qe.call(We(this),ve)},subarray:function(ve,ke){var Le=We(this),Ke=Le.length,He=x(ve,Ke);return new(L(Le,Le[Je]))(Le.buffer,Le.byteOffset+He*Le.BYTES_PER_ELEMENT,y((ke===void 0?Ke:x(ke,Ke))-He))}},Wt=function(ve,ke){return nr(this,nt.call(We(this),ve,ke))},Nr=function(ve){We(this);var ke=Qt(arguments[1],1),Le=this.length,Ke=b(ve),He=y(Ke.length),Et=0;if(He+ke>Le)throw X("Wrong length!");for(;Et<He;)this[ke+Et]=Ke[Et++]},Oe={entries:function(){return De.call(We(this))},keys:function(){return Ne.call(We(this))},values:function(){return ze.call(We(this))}},or=function(ve,ke){return h(ve)&&ve[Tt]&&typeof ke!="symbol"&&ke in ve&&String(+ke)==String(ke)},yr=function(ve,ke){return or(ve,ke=C(ke,!0))?p(2,ve[ke]):Z(ve,ke)},Dr=function(ve,ke,Le){return!(or(ve,ke=C(ke,!0))&&h(Le)&&c(Le,"value"))||c(Le,"get")||c(Le,"set")||Le.configurable||c(Le,"writable")&&!Le.writable||c(Le,"enumerable")&&!Le.enumerable?Y(ve,ke,Le):(ve[ke]=Le.value,ve)};It||(W.f=yr,q.f=Dr),s(s.S+s.F*!It,"Object",{getOwnPropertyDescriptor:yr,defineProperty:Dr}),o(function(){st.call({})})&&(st=Mt=function(){return Ae.call(this)});var yt=m({},Tr);m(yt,Oe),g(yt,Ct,Oe.values),m(yt,{slice:Wt,set:Nr,constructor:function(){},toString:st,toLocaleString:Sr}),vr(yt,"buffer","b"),vr(yt,"byteOffset","o"),vr(yt,"byteLength","l"),vr(yt,"length","e"),Y(yt,St,{get:function(){return this[Tt]}}),r.exports=function(ve,ke,Le,Ke){var He=ve+((Ke=!!Ke)?"Clamped":"")+"Array",Et="get"+ve,Ut="set"+ve,Se=n[He],ht=Se||{},$t=Se&&w(Se),sr=!Se||!a.ABV,ut={},Qe=Se&&Se.prototype,er=function(Ye,Me){Y(Ye,Me,{get:function(){return function(gt,_t){var Ee=gt._d;return Ee.v[Et](_t*ke+Ee.o,Yt)}(this,Me)},set:function(gt){return function(_t,Ee,Xe){var V=_t._d;Ke&&(Xe=(Xe=Math.round(Xe))<0?0:Xe>255?255:255&Xe),V.v[Ut](Ee*ke+V.o,Xe,Yt)}(this,Me,gt)},enumerable:!0})};sr?(Se=Le(function(Ye,Me,gt,_t){d(Ye,Se,He,"_d");var Ee,Xe,V,te,J=0,oe=0;if(h(Me)){if(!(Me instanceof ne||(te=_(Me))=="ArrayBuffer"||te=="SharedArrayBuffer"))return Tt in Me?mr(Se,Me):br.call(Se,Me);Ee=Me,oe=Qt(gt,ke);var ae=Me.byteLength;if(_t===void 0){if(ae%ke||(Xe=ae-oe)<0)throw X("Wrong length!")}else if((Xe=y(_t)*ke)+oe>ae)throw X("Wrong length!");V=Xe/ke}else V=v(Me),Ee=new ne(Xe=V*ke);for(g(Ye,"_d",{b:Ee,o:oe,l:Xe,e:V,v:new ge(Ee)});J<V;)er(Ye,J++)}),Qe=Se.prototype=E(yt),g(Qe,"constructor",Se)):o(function(){Se(1)})&&o(function(){new Se(-1)})&&H(function(Ye){new Se,new Se(null),new Se(1.5),new Se(Ye)},!0)||(Se=Le(function(Ye,Me,gt,_t){var Ee;return d(Ye,Se,He),h(Me)?Me instanceof ne||(Ee=_(Me))=="ArrayBuffer"||Ee=="SharedArrayBuffer"?_t!==void 0?new ht(Me,Qt(gt,ke),_t):gt!==void 0?new ht(Me,Qt(gt,ke)):new ht(Me):Tt in Me?mr(Se,Me):br.call(Se,Me):new ht(v(Me))}),re($t!==Function.prototype?S(ht).concat(S($t)):S(ht),function(Ye){Ye in Se||g(Se,Ye,ht[Ye])}),Se.prototype=Qe,i||(Qe.constructor=Se));var Ot=Qe[Ct],ar=!!Ot&&(Ot.name=="values"||Ot.name==null),Pt=Oe.values;g(Se,Ft,!0),g(Qe,Tt,He),g(Qe,zt,!0),g(Qe,Je,Se),(Ke?new Se(1)[St]==He:St in Qe)||Y(Qe,St,{get:function(){return He}}),ut[He]=Se,s(s.G+s.W+s.F*(Se!=ht),ut),s(s.S,He,{BYTES_PER_ELEMENT:ke}),s(s.S+s.F*o(function(){ht.of.call(Se,1)}),He,{from:br,of:Rr}),"BYTES_PER_ELEMENT"in Qe||g(Qe,"BYTES_PER_ELEMENT",ke),s(s.P,He,Tr),j(He),s(s.P+s.F*bt,He,{set:Nr}),s(s.P+s.F*!ar,He,Oe),i||Qe.toString==st||(Qe.toString=st),s(s.P+s.F*o(function(){new Se(1).slice()}),He,{slice:Wt}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new Se([1,2]).toLocaleString()})||!o(function(){Qe.toLocaleString.call([1,2])})),He,{toLocaleString:Sr}),D[He]=ar?Ot:Pt,i||ar||g(Qe,Ct,Pt)}}else r.exports=function(){}},function(r,t,e){var i=e(369),n=e(370),o=e(148),s=e(371);r.exports=function(a){return i(a)||n(a)||o(a)||s()},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(13);r.exports=function(n,o){if(!i(n))return n;var s,a;if(o&&typeof(s=n.toString)=="function"&&!i(a=s.call(n))||typeof(s=n.valueOf)=="function"&&!i(a=s.call(n))||!o&&typeof(s=n.toString)=="function"&&!i(a=s.call(n)))return a;throw TypeError("Can't convert object to primitive value")}},function(r,t,e){var i=e(45)("meta"),n=e(13),o=e(26),s=e(18).f,a=0,l=Object.isExtensible||function(){return!0},u=!e(11)(function(){return l(Object.preventExtensions({}))}),d=function(g){s(g,i,{value:{i:"O"+ ++a,w:{}}})},p=r.exports={KEY:i,NEED:!1,fastKey:function(g,m){if(!n(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!o(g,i)){if(!l(g))return"F";if(!m)return"E";d(g)}return g[i].i},getWeak:function(g,m){if(!o(g,i)){if(!l(g))return!0;if(!m)return!1;d(g)}return g[i].w},onFreeze:function(g){return u&&p.NEED&&l(g)&&!o(g,i)&&d(g),g}}},function(r,t){r.exports=function(e,i){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:i}}},function(r,t){var e=0,i=Math.random();r.exports=function(n){return"Symbol(".concat(n===void 0?"":n,")_",(++e+i).toString(36))}},function(r,t){r.exports=!1},function(r,t,e){var i=e(119),n=e(89);r.exports=Object.keys||function(o){return i(o,n)}},function(r,t,e){var i=e(33),n=Math.max,o=Math.min;r.exports=function(s,a){return(s=i(s))<0?n(s+a,0):o(s,a)}},function(r,t,e){var i=e(12),n=e(120),o=e(89),s=e(88)("IE_PROTO"),a=function(){},l=function(){var u,d=e(86)("iframe"),p=o.length;for(d.style.display="none",e(90).appendChild(d),d.src="javascript:",(u=d.contentWindow.document).open(),u.write("<script>document.F=Object<\/script>"),u.close(),l=u.F;p--;)delete l.prototype[o[p]];return l()};r.exports=Object.create||function(u,d){var p;return u!==null?(a.prototype=i(u),p=new a,a.prototype=null,p[s]=u):p=l(),d===void 0?p:n(p,d)}},function(r,t,e){var i=e(119),n=e(89).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(o){return i(o,n)}},function(r,t,e){var i=e(26),n=e(22),o=e(88)("IE_PROTO"),s=Object.prototype;r.exports=Object.getPrototypeOf||function(a){return a=n(a),i(a,o)?a[o]:typeof a.constructor=="function"&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?s:null}},function(r,t,e){var i=e(14)("unscopables"),n=Array.prototype;n[i]==null&&e(27)(n,i,{}),r.exports=function(o){n[i][o]=!0}},function(r,t,e){var i=e(13);r.exports=function(n,o){if(!i(n)||n._t!==o)throw TypeError("Incompatible receiver, "+o+" required!");return n}},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(150)],(o=typeof(i=function(s,a,l,u){"use strict";var d=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=d(a),l=d(l),u=d(u);var p=function(){function g(){(0,a.default)(this,g)}return(0,l.default)(g,null,[{key:"ui",value:function(m,k){return g._t(m,k)}},{key:"t",value:function(m,k){return g._t(m,k)}},{key:"setDictionary",value:function(m){g.currentDictionary=m}},{key:"_t",value:function(m,k){var y=g.getNamespace(m);return y&&y[k]?y[k]:k}},{key:"getNamespace",value:function(m){return m.split(".").reduce(function(k,y){return k&&Object.keys(k).length?k[y]:{}},g.currentDictionary)}}]),g}();s.default=p,p.displayName="I18n",p.currentDictionary=u.default,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(18).f,n=e(26),o=e(14)("toStringTag");r.exports=function(s,a,l){s&&!n(s=l?s:s.prototype,o)&&i(s,o,{configurable:!0,value:a})}},function(r,t,e){var i=e(0),n=e(39),o=e(11),s=e(92),a="["+s+"]",l=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),d=function(g,m,k){var y={},v=o(function(){return!!s[g]()||"\u200B\x85"[g]()!="\u200B\x85"}),x=y[g]=v?m(p):s[g];k&&(y[k]=x),i(i.P+i.F*v,"String",y)},p=d.trim=function(g,m){return g=String(n(g)),1&m&&(g=g.replace(l,"")),2&m&&(g=g.replace(u,"")),g};r.exports=d},function(r,t){r.exports={}},function(r,t,e){"use strict";var i=e(10),n=e(18),o=e(17),s=e(14)("species");r.exports=function(a){var l=i[a];o&&l&&!l[s]&&n.f(l,s,{configurable:!0,get:function(){return this}})}},function(r,t){r.exports=function(e,i,n,o){if(!(e instanceof i)||o!==void 0&&o in e)throw TypeError(n+": incorrect invocation!");return e}},function(r,t,e){var i=e(23);r.exports=function(n,o,s){for(var a in o)i(n,a,o[a],s);return n}},function(r,t,e){var i,n,o,s=e(7);n=[t,e(20),e(30),e(21),e(41),e(2),e(3),e(152),e(114),e(5),e(6),e(4),e(19),e(8),e(113),e(25),e(82)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x,C,c,_,h,b,M){"use strict";var E,w=e(1);function S(A){if(typeof WeakMap!="function")return null;var R=new WeakMap,T=new WeakMap;return(S=function(L){return L?T:R})(A)}function O(A){var R=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(T){return!1}}();return function(){var T,L=(0,C.default)(A);if(R){var P=(0,C.default)(this).constructor;T=Reflect.construct(L,arguments,P)}else T=L.apply(this,arguments);return(0,x.default)(this,T)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BlockToolAPI=void 0,l=w(l),u=w(u),d=w(d),p=w(p),g=w(g),m=w(m),k=w(k),y=w(y),v=w(v),x=w(x),C=w(C),c=w(c),_=function(A,R){if(!R&&A&&A.__esModule)return A;if(A===null||s(A)!=="object"&&typeof A!="function")return{default:A};var T=S(R);if(T&&T.has(A))return T.get(A);var L={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in A)if(D!=="default"&&Object.prototype.hasOwnProperty.call(A,D)){var H=P?Object.getOwnPropertyDescriptor(A,D):null;H&&(H.get||H.set)?Object.defineProperty(L,D,H):L[D]=A[D]}return L.default=A,T&&T.set(A,L),L}(_),h=w(h),b=w(b),M=w(M),a.BlockToolAPI=E,function(A){A.APPEND_CALLBACK="appendCallback",A.RENDERED="rendered",A.MOVED="moved",A.UPDATED="updated",A.REMOVED="removed",A.ON_PASTE="onPaste"}(E||(a.BlockToolAPI=E={}));var B=function(A){(0,v.default)(H,A);var R,T,L,P,D=O(H);function H(j){var F,K=j.id,q=K===void 0?_.generateBlockId():K,W=j.data,Y=j.tool,Z=j.api,X=j.readOnly,Q=j.tunesData;return(0,g.default)(this,H),(F=D.call(this)).cachedInputs=[],F.tunesInstances=new Map,F.defaultTunesInstances=new Map,F.unavailableTunesData={},F.inputIndex=0,F.modificationDebounceTimer=450,F.didMutated=_.debounce(function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ce=ue instanceof InputEvent||!ue.some(function(ne){var ge=ne.addedNodes,re=ge===void 0?[]:ge,pe=ne.removedNodes;return[].concat((0,p.default)(Array.from(re)),(0,p.default)(Array.from(pe))).some(function(Ce){return c.default.isElement(Ce)&&Ce.dataset.mutationFree==="true"})});ce&&(F.cachedInputs=[],F.updateCurrentInput(),F.call(E.UPDATED),F.emit("didMutated",(0,k.default)(F)))},F.modificationDebounceTimer),F.handleFocus=function(){F.cachedInputs=[],F.updateCurrentInput()},F.name=Y.name,F.id=q,F.settings=Y.settings,F.config=Y.settings.config||{},F.api=Z,F.blockAPI=new h.default((0,k.default)(F)),F.mutationObserver=new MutationObserver(F.didMutated),F.tool=Y,F.toolInstance=Y.create(W,F.blockAPI,X),F.tunes=Y.tunes,F.composeTunes(Q),F.holder=F.compose(),F}return(0,m.default)(H,[{key:"inputs",get:function(){if(this.cachedInputs.length!==0)return this.cachedInputs;var j=c.default.findAllInputs(this.holder);return this.inputIndex>j.length-1&&(this.inputIndex=j.length-1),this.cachedInputs=j,j}},{key:"currentInput",get:function(){return this.inputs[this.inputIndex]},set:function(j){var F=this.inputs.findIndex(function(K){return K===j||K.contains(j)});F!==-1&&(this.inputIndex=F)}},{key:"firstInput",get:function(){return this.inputs[0]}},{key:"lastInput",get:function(){var j=this.inputs;return j[j.length-1]}},{key:"nextInput",get:function(){return this.inputs[this.inputIndex+1]}},{key:"previousInput",get:function(){return this.inputs[this.inputIndex-1]}},{key:"data",get:function(){return this.save().then(function(j){return j&&!_.isEmpty(j.data)?j.data:{}})}},{key:"sanitize",get:function(){return this.tool.sanitizeConfig}},{key:"mergeable",get:function(){return _.isFunction(this.toolInstance.merge)}},{key:"isEmpty",get:function(){var j=c.default.isEmpty(this.pluginsContent),F=!this.hasMedia;return j&&F}},{key:"hasMedia",get:function(){return!!this.holder.querySelector(["img","iframe","video","audio","source","input","textarea","twitterwidget"].join(","))}},{key:"focused",get:function(){return this.holder.classList.contains(H.CSS.focused)},set:function(j){this.holder.classList.toggle(H.CSS.focused,j)}},{key:"selected",get:function(){return this.holder.classList.contains(H.CSS.selected)},set:function(j){j?(this.holder.classList.add(H.CSS.selected),b.default.addFakeCursor(this.holder)):(this.holder.classList.remove(H.CSS.selected),b.default.removeFakeCursor(this.holder))}},{key:"stretched",get:function(){return this.holder.classList.contains(H.CSS.wrapperStretched)},set:function(j){this.holder.classList.toggle(H.CSS.wrapperStretched,j)}},{key:"dropTarget",set:function(j){this.holder.classList.toggle(H.CSS.dropTarget,j)}},{key:"pluginsContent",get:function(){var j=this.holder.querySelector(".".concat(H.CSS.content));if(j&&j.childNodes.length)for(var F=j.childNodes.length-1;F>=0;F--){var K=j.childNodes[F];if(!c.default.isExtensionNode(K))return K}return null}},{key:"call",value:function(j,F){if(_.isFunction(this.toolInstance[j])){j===E.APPEND_CALLBACK&&_.log("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[j].call(this.toolInstance,F)}catch(K){_.log("Error during '".concat(j,"' call: ").concat(K.message),"error")}}}},{key:"mergeWith",value:(P=(0,d.default)(l.default.mark(function j(F){return l.default.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,this.toolInstance.merge(F);case 2:case"end":return K.stop()}},j,this)})),function(j){return P.apply(this,arguments)})},{key:"save",value:(L=(0,d.default)(l.default.mark(function j(){var F,K,q,W,Y=this;return l.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,this.toolInstance.save(this.pluginsContent);case 2:return F=Z.sent,K=this.unavailableTunesData,[].concat((0,p.default)(this.tunesInstances.entries()),(0,p.default)(this.defaultTunesInstances.entries())).forEach(function(X){var Q=(0,u.default)(X,2),ue=Q[0],ce=Q[1];if(_.isFunction(ce.save))try{K[ue]=ce.save()}catch(ne){_.log("Tune ".concat(ce.constructor.name," save method throws an Error %o"),"warn",ne)}}),q=window.performance.now(),Z.abrupt("return",Promise.resolve(F).then(function(X){return W=window.performance.now(),{id:Y.id,tool:Y.name,data:X,tunes:K,time:W-q}}).catch(function(X){_.log("Saving process for ".concat(Y.name," tool failed due to the ").concat(X),"log","red")}));case 7:case"end":return Z.stop()}},j,this)})),function(){return L.apply(this,arguments)})},{key:"validate",value:(T=(0,d.default)(l.default.mark(function j(F){var K;return l.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(K=!0,!(this.toolInstance.validate instanceof Function)){q.next=5;break}return q.next=4,this.toolInstance.validate(F);case 4:K=q.sent;case 5:return q.abrupt("return",K);case 6:case"end":return q.stop()}},j,this)})),function(j){return T.apply(this,arguments)})},{key:"getTunes",value:function(){var j=document.createElement("div"),F=[];return[typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[],[].concat((0,p.default)(this.tunesInstances.values()),(0,p.default)(this.defaultTunesInstances.values())).map(function(K){return K.render()})].flat().forEach(function(K){c.default.isElement(K)?j.appendChild(K):Array.isArray(K)?F.push.apply(F,(0,p.default)(K)):F.push(K)}),[F,j]}},{key:"updateCurrentInput",value:function(){this.currentInput=c.default.isNativeInput(document.activeElement)||!b.default.anchorNode?document.activeElement:b.default.anchorNode}},{key:"willSelect",value:function(){this.mutationObserver.observe(this.holder.firstElementChild,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.addInputEvents()}},{key:"willUnselect",value:function(){this.mutationObserver.disconnect(),this.removeInputEvents()}},{key:"dispatchChange",value:function(){this.didMutated()}},{key:"destroy",value:function(){(0,y.default)((0,C.default)(H.prototype),"destroy",this).call(this),_.isFunction(this.toolInstance.destroy)&&this.toolInstance.destroy()}},{key:"getActiveToolboxEntry",value:(R=(0,d.default)(l.default.mark(function j(){var F,K,q;return l.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if((F=this.tool.toolbox).length!==1){W.next=3;break}return W.abrupt("return",Promise.resolve(this.tool.toolbox[0]));case 3:return W.next=5,this.data;case 5:return K=W.sent,q=F,W.abrupt("return",q.find(function(Y){return Object.entries(Y.data).some(function(Z){var X=(0,u.default)(Z,2),Q=X[0],ue=X[1];return K[Q]&&_.equals(K[Q],ue)})}));case 8:case"end":return W.stop()}},j,this)})),function(){return R.apply(this,arguments)})},{key:"compose",value:function(){var j=c.default.make("div",H.CSS.wrapper),F=c.default.make("div",H.CSS.content),K=this.toolInstance.render();F.appendChild(K);var q=F;return[].concat((0,p.default)(this.tunesInstances.values()),(0,p.default)(this.defaultTunesInstances.values())).forEach(function(W){if(_.isFunction(W.wrap))try{q=W.wrap(q)}catch(Y){_.log("Tune ".concat(W.constructor.name," wrap method throws an Error %o"),"warn",Y)}}),j.appendChild(q),j}},{key:"composeTunes",value:function(j){var F=this;Array.from(this.tunes.values()).forEach(function(K){(K.isInternal?F.defaultTunesInstances:F.tunesInstances).set(K.name,K.create(j[K.name],F.blockAPI))}),Object.entries(j).forEach(function(K){var q=(0,u.default)(K,2),W=q[0],Y=q[1];F.tunesInstances.has(W)||(F.unavailableTunesData[W]=Y)})}},{key:"addInputEvents",value:function(){var j=this;this.inputs.forEach(function(F){F.addEventListener("focus",j.handleFocus),c.default.isNativeInput(F)&&F.addEventListener("input",j.didMutated)})}},{key:"removeInputEvents",value:function(){var j=this;this.inputs.forEach(function(F){F.removeEventListener("focus",j.handleFocus),c.default.isNativeInput(F)&&F.removeEventListener("input",j.didMutated)})}}],[{key:"CSS",get:function(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",focused:"ce-block--focused",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}}]),H}(M.default);a.default=B,B.displayName="Block"})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(38);r.exports=Object("z").propertyIsEnumerable(0)?Object:function(n){return i(n)=="String"?n.split(""):Object(n)}},function(r,t){t.f={}.propertyIsEnumerable},function(r,t,e){var i=e(38),n=e(14)("toStringTag"),o=i(function(){return arguments}())=="Arguments";r.exports=function(s){var a,l,u;return s===void 0?"Undefined":s===null?"Null":typeof(l=function(d,p){try{return d[p]}catch(g){}}(a=Object(s),n))=="string"?l:o?i(a):(u=i(a))=="Object"&&typeof a.callee=="function"?"Arguments":u}},function(r,t,e){var i=e(12),n=e(32),o=e(14)("species");r.exports=function(s,a){var l,u=i(s).constructor;return u===void 0||(l=i(u)[o])==null?a:n(l)}},function(r,t,e){var i,n,o,s=e(7);n=[t,e(8),e(380)],(o=typeof(i=function(a,l,u){"use strict";var d=e(1);function p(k){if(typeof WeakMap!="function")return null;var y=new WeakMap,v=new WeakMap;return(p=function(x){return x?v:y})(k)}function g(k){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={tags:y},x=new u.default(v);return x.clean(k)}function m(k,y){return Array.isArray(k)?(C=y,k.map(function(c){return m(c,C)})):l.isObject(k)?function(c,_){var h,b={};for(var M in c)if(Object.prototype.hasOwnProperty.call(c,M)){var E=c[M],w=(h=_[M],l.isObject(h)||l.isBoolean(h)||l.isFunction(h)?_[M]:_);b[M]=m(E,w)}return b}(k,y):l.isString(k)?(v=k,x=y,l.isObject(x)?g(v,x):x===!1?g(v,{}):v):k;var v,x,C}Object.defineProperty(a,"__esModule",{value:!0}),a.clean=g,a.sanitizeBlocks=function(k,y){return k.map(function(v){var x=l.isFunction(y)?y(v.tool):y;return l.isEmpty(x)||(v.data=m(v.data,x)),v})},l=function(k,y){if(!y&&k&&k.__esModule)return k;if(k===null||s(k)!=="object"&&typeof k!="function")return{default:k};var v=p(y);if(v&&v.has(k))return v.get(k);var x={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in k)if(c!=="default"&&Object.prototype.hasOwnProperty.call(k,c)){var _=C?Object.getOwnPropertyDescriptor(k,c):null;_&&(_.get||_.set)?Object.defineProperty(x,c,_):x[c]=k[c]}return x.default=k,v&&v.set(k,x),x}(l),u=d(u)})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(382),e(8)],(o=typeof(i=function(a,l,u,d,p){"use strict";var g=e(1);function m(y){if(typeof WeakMap!="function")return null;var v=new WeakMap,x=new WeakMap;return(m=function(C){return C?x:v})(y)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=g(l),u=g(u),d=g(d),p=function(y,v){if(!v&&y&&y.__esModule)return y;if(y===null||s(y)!=="object"&&typeof y!="function")return{default:y};var x=m(v);if(x&&x.has(y))return x.get(y);var C={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in y)if(_!=="default"&&Object.prototype.hasOwnProperty.call(y,_)){var h=c?Object.getOwnPropertyDescriptor(y,_):null;h&&(h.get||h.set)?Object.defineProperty(C,_,h):C[_]=y[_]}return C.default=y,x&&x.set(y,C),C}(p);var k=function(){function y(v){var x=this;(0,l.default)(this,y),this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=function(C){if(x.isEventReadyForHandling(C))switch(y.usedKeys.includes(C.keyCode)&&C.preventDefault(),C.keyCode){case p.keyCodes.TAB:x.handleTabPress(C);break;case p.keyCodes.LEFT:case p.keyCodes.UP:x.flipLeft();break;case p.keyCodes.RIGHT:case p.keyCodes.DOWN:x.flipRight();break;case p.keyCodes.ENTER:x.handleEnterPress(C)}},this.iterator=new d.default(v.items,v.focusedItemClass),this.activateCallback=v.activateCallback,this.allowedKeys=v.allowedKeys||y.usedKeys}return(0,u.default)(y,[{key:"isActivated",get:function(){return this.activated}},{key:"activate",value:function(v,x){this.activated=!0,v&&this.iterator.setItems(v),x!==void 0&&this.iterator.setCursor(x),document.addEventListener("keydown",this.onKeyDown,!0)}},{key:"deactivate",value:function(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}},{key:"focusFirst",value:function(){this.dropCursor(),this.flipRight()}},{key:"flipLeft",value:function(){this.iterator.previous(),this.flipCallback()}},{key:"flipRight",value:function(){this.iterator.next(),this.flipCallback()}},{key:"hasFocus",value:function(){return!!this.iterator.currentItem}},{key:"onFlip",value:function(v){this.flipCallbacks.push(v)}},{key:"removeOnFlip",value:function(v){this.flipCallbacks=this.flipCallbacks.filter(function(x){return x!==v})}},{key:"dropCursor",value:function(){this.iterator.dropCursor()}},{key:"isEventReadyForHandling",value:function(v){return this.activated&&this.allowedKeys.includes(v.keyCode)}},{key:"handleTabPress",value:function(v){switch(v.shiftKey?d.default.directions.LEFT:d.default.directions.RIGHT){case d.default.directions.RIGHT:this.flipRight();break;case d.default.directions.LEFT:this.flipLeft()}}},{key:"handleEnterPress",value:function(v){this.activated&&(this.iterator.currentItem&&(v.stopPropagation(),v.preventDefault(),this.iterator.currentItem.click()),p.isFunction(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}},{key:"flipCallback",value:function(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(function(v){return v()})}}],[{key:"usedKeys",get:function(){return[p.keyCodes.TAB,p.keyCodes.LEFT,p.keyCodes.RIGHT,p.keyCodes.ENTER,p.keyCodes.UP,p.keyCodes.DOWN]}}]),y}();a.default=k,k.displayName="Flipper",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(30),e(150),e(8)],(o=typeof(i=function(s,a,l,u){"use strict";var d=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.I18nInternalNS=void 0,a=d(a);var p=function g(m,k){var y={};return Object.entries(m).forEach(function(v){var x=(0,a.default)(v,2),C=x[0],c=x[1];if((0,u.isObject)(c)){var _=k?"".concat(k,".").concat(C):C,h=Object.values(c).every(function(b){return(0,u.isString)(b)});y[C]=h?_:g(c,_)}else y[C]=c}),y}((l=d(l)).default);s.I18nInternalNS=p})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(8)],(o=typeof(i=function(a,l,u,d){"use strict";var p,g,m,k,y,v,x=e(1);function C(_){if(typeof WeakMap!="function")return null;var h=new WeakMap,b=new WeakMap;return(C=function(M){return M?b:h})(_)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.UserSettings=a.ToolType=a.InternalTuneSettings=a.InternalInlineToolSettings=a.InternalBlockToolSettings=a.CommonInternalSettings=void 0,l=x(l),u=x(u),d=function(_,h){if(!h&&_&&_.__esModule)return _;if(_===null||s(_)!=="object"&&typeof _!="function")return{default:_};var b=C(h);if(b&&b.has(_))return b.get(_);var M={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in _)if(w!=="default"&&Object.prototype.hasOwnProperty.call(_,w)){var S=E?Object.getOwnPropertyDescriptor(_,w):null;S&&(S.get||S.set)?Object.defineProperty(M,w,S):M[w]=_[w]}return M.default=_,b&&b.set(_,M),M}(d),a.ToolType=p,function(_){_[_.Block=0]="Block",_[_.Inline=1]="Inline",_[_.Tune=2]="Tune"}(p||(a.ToolType=p={})),a.UserSettings=g,function(_){_.Shortcut="shortcut",_.Toolbox="toolbox",_.EnabledInlineTools="inlineToolbar",_.EnabledBlockTunes="tunes",_.Config="config"}(g||(a.UserSettings=g={})),a.CommonInternalSettings=m,function(_){_.Shortcut="shortcut",_.SanitizeConfig="sanitize"}(m||(a.CommonInternalSettings=m={})),a.InternalBlockToolSettings=k,function(_){_.IsEnabledLineBreaks="enableLineBreaks",_.Toolbox="toolbox",_.ConversionConfig="conversionConfig",_.IsReadOnlySupported="isReadOnlySupported",_.PasteConfig="pasteConfig"}(k||(a.InternalBlockToolSettings=k={})),a.InternalInlineToolSettings=y,function(_){_.IsInline="isInline",_.Title="title"}(y||(a.InternalInlineToolSettings=y={})),a.InternalTuneSettings=v,function(_){_.IsTune="isTune"}(v||(a.InternalTuneSettings=v={}));var c=function(){function _(h){var b=h.name,M=h.constructable,E=h.config,w=h.api,S=h.isDefault,O=h.isInternal,B=O!==void 0&&O,A=h.defaultPlaceholder;(0,l.default)(this,_),this.api=w,this.name=b,this.constructable=M,this.config=E,this.isDefault=S,this.isInternal=B,this.defaultPlaceholder=A}return(0,u.default)(_,[{key:"settings",get:function(){var h=this.config[g.Config]||{};return this.isDefault&&!("placeholder"in h)&&this.defaultPlaceholder&&(h.placeholder=this.defaultPlaceholder),h}},{key:"reset",value:function(){if(d.isFunction(this.constructable.reset))return this.constructable.reset()}},{key:"prepare",value:function(){if(d.isFunction(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}},{key:"shortcut",get:function(){var h=this.constructable[m.Shortcut];return this.config[g.Shortcut]||h}},{key:"sanitizeConfig",get:function(){return this.constructable[m.SanitizeConfig]||{}}},{key:"isInline",value:function(){return this.type===p.Inline}},{key:"isBlock",value:function(){return this.type===p.Block}},{key:"isTune",value:function(){return this.type===p.Tune}}]),_}();a.default=c,c.displayName="BaseTool"})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(16),n=e(10),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(r.exports=function(s,a){return o[s]||(o[s]=a!==void 0?a:{})})("versions",[]).push({version:i.version,mode:e(46)?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},function(r,t,e){var i=e(28),n=e(15),o=e(48);r.exports=function(s){return function(a,l,u){var d,p=i(a),g=n(p.length),m=o(u,g);if(s&&l!=l){for(;g>m;)if((d=p[m++])!=d)return!0}else for(;g>m;m++)if((s||m in p)&&p[m]===l)return s||m||0;return!s&&-1}}},function(r,t){t.f=Object.getOwnPropertySymbols},function(r,t,e){var i=e(38);r.exports=Array.isArray||function(n){return i(n)=="Array"}},function(r,t,e){var i=e(14)("iterator"),n=!1;try{var o=[7][i]();o.return=function(){n=!0},Array.from(o,function(){throw 2})}catch(s){}r.exports=function(s,a){if(!a&&!n)return!1;var l=!1;try{var u=[7],d=u[i]();d.next=function(){return{done:l=!0}},u[i]=function(){return d},s(u)}catch(p){}return l}},function(r,t,e){"use strict";var i=e(12);r.exports=function(){var n=i(this),o="";return n.global&&(o+="g"),n.ignoreCase&&(o+="i"),n.multiline&&(o+="m"),n.unicode&&(o+="u"),n.sticky&&(o+="y"),o}},function(r,t,e){"use strict";var i=e(64),n=RegExp.prototype.exec;r.exports=function(o,s){var a=o.exec;if(typeof a=="function"){var l=a.call(o,s);if(typeof l!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return l}if(i(o)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(o,s)}},function(r,t,e){"use strict";e(137);var i=e(23),n=e(27),o=e(11),s=e(39),a=e(14),l=e(107),u=a("species"),d=!o(function(){var g=/./;return g.exec=function(){var m=[];return m.groups={a:"7"},m},"".replace(g,"$<a>")!=="7"}),p=function(){var g=/(?:)/,m=g.exec;g.exec=function(){return m.apply(this,arguments)};var k="ab".split(g);return k.length===2&&k[0]==="a"&&k[1]==="b"}();r.exports=function(g,m,k){var y=a(g),v=!o(function(){var b={};return b[y]=function(){return 7},""[g](b)!=7}),x=v?!o(function(){var b=!1,M=/a/;return M.exec=function(){return b=!0,null},g==="split"&&(M.constructor={},M.constructor[u]=function(){return M}),M[y](""),!b}):void 0;if(!v||!x||g==="replace"&&!d||g==="split"&&!p){var C=/./[y],c=k(s,y,""[g],function(b,M,E,w,S){return M.exec===l?v&&!S?{done:!0,value:C.call(M,E,w)}:{done:!0,value:b.call(E,M,w)}:{done:!1}}),_=c[0],h=c[1];i(String.prototype,g,_),n(RegExp.prototype,y,m==2?function(b,M){return h.call(b,this,M)}:function(b){return h.call(b,this)})}}},function(r,t,e){var i=e(31),n=e(132),o=e(102),s=e(12),a=e(15),l=e(104),u={},d={};(t=r.exports=function(p,g,m,k,y){var v,x,C,c,_=y?function(){return p}:l(p),h=i(m,k,g?2:1),b=0;if(typeof _!="function")throw TypeError(p+" is not iterable!");if(o(_)){for(v=a(p.length);v>b;b++)if((c=g?h(s(x=p[b])[0],x[1]):h(p[b]))===u||c===d)return c}else for(C=_.call(p);!(x=C.next()).done;)if((c=n(C,h,x.value,g))===u||c===d)return c}).BREAK=u,t.RETURN=d},function(r,t,e){var i=e(10).navigator;r.exports=i&&i.userAgent||""},function(r,t,e){"use strict";var i=e(10),n=e(0),o=e(23),s=e(60),a=e(43),l=e(78),u=e(59),d=e(13),p=e(11),g=e(74),m=e(55),k=e(93);r.exports=function(y,v,x,C,c,_){var h=i[y],b=h,M=c?"set":"add",E=b&&b.prototype,w={},S=function(L){var P=E[L];o(E,L,L=="delete"||L=="has"?function(D){return!(_&&!d(D))&&P.call(this,D===0?0:D)}:L=="get"?function(D){return _&&!d(D)?void 0:P.call(this,D===0?0:D)}:L=="add"?function(D){return P.call(this,D===0?0:D),this}:function(D,H){return P.call(this,D===0?0:D,H),this})};if(typeof b=="function"&&(_||E.forEach&&!p(function(){new b().entries().next()}))){var O=new b,B=O[M](_?{}:-0,1)!=O,A=p(function(){O.has(1)}),R=g(function(L){new b(L)}),T=!_&&p(function(){for(var L=new b,P=5;P--;)L[M](P,P);return!L.has(-0)});R||((b=v(function(L,P){u(L,b,y);var D=k(new h,L,b);return P!=null&&l(P,c,D[M],D),D})).prototype=E,E.constructor=b),(A||T)&&(S("delete"),S("has"),c&&S("get")),(T||B)&&S(M),_&&E.clear&&delete E.clear}else b=C.getConstructor(v,y,c,M),s(b.prototype,x),a.NEED=!0;return m(b,y),w[y]=b,n(n.G+n.W+n.F*(b!=h),w),_||C.setStrong(b,y,c),b}},function(r,t,e){for(var i,n=e(10),o=e(27),s=e(45),a=s("typed_array"),l=s("view"),u=!(!n.ArrayBuffer||!n.DataView),d=u,p=0,g="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");p<9;)(i=n[g[p++]])?(o(i.prototype,a,!0),o(i.prototype,l,!0)):d=!1;r.exports={ABV:u,CONSTR:d,TYPED:a,VIEW:l}},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(8)],(o=typeof(i=function(s,a,l,u){"use strict";var d=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=d(a),l=d(l);var p=function(){function g(){(0,a.default)(this,g),this.subscribers={}}return(0,l.default)(g,[{key:"on",value:function(m,k){m in this.subscribers||(this.subscribers[m]=[]),this.subscribers[m].push(k)}},{key:"once",value:function(m,k){var y=this;m in this.subscribers||(this.subscribers[m]=[]),this.subscribers[m].push(function v(x){var C=k(x),c=y.subscribers[m].indexOf(v);return c!==-1&&y.subscribers[m].splice(c,1),C})}},{key:"emit",value:function(m,k){!(0,u.isEmpty)(this.subscribers)&&this.subscribers[m]&&this.subscribers[m].reduce(function(y,v){return v(y)||y},k)}},{key:"off",value:function(m,k){for(var y=0;y<this.subscribers[m].length;y++)if(this.subscribers[m][y]===k){delete this.subscribers[m][y];break}}},{key:"destroy",value:function(){this.subscribers=null}}]),g}();s.default=p,p.displayName="EventsDispatcher",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(s,a,l,u,d,p,g){"use strict";var m=e(1);function k(v){var x=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,c=(0,p.default)(v);if(x){var _=(0,p.default)(this).constructor;C=Reflect.construct(c,arguments,_)}else C=c.apply(this,arguments);return(0,d.default)(this,C)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=m(a),l=m(l),u=m(u),d=m(d),p=m(p);var y=function(v){(0,u.default)(C,v);var x=k(C);function C(){return(0,a.default)(this,C),x.apply(this,arguments)}return(0,l.default)(C,[{key:"methods",get:function(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}},{key:"getMethodsForTool",value:function(c){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(c)})}}]),C}((g=m(g)).default);s.default=y,y.displayName="API",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(8),e(54),e(68),e(115),e(386),e(37)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x,C,c,_){"use strict";var h=e(1);function b(S){if(typeof WeakMap!="function")return null;var O=new WeakMap,B=new WeakMap;return(b=function(A){return A?B:O})(S)}function M(S,O){if(!O&&S&&S.__esModule)return S;if(S===null||s(S)!=="object"&&typeof S!="function")return{default:S};var B=b(O);if(B&&B.has(S))return B.get(S);var A={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in S)if(T!=="default"&&Object.prototype.hasOwnProperty.call(S,T)){var L=R?Object.getOwnPropertyDescriptor(S,T):null;L&&(L.get||L.set)?Object.defineProperty(A,T,L):A[T]=S[T]}return A.default=S,B&&B.set(S,A),A}function E(S){var O=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(B){return!1}}();return function(){var B,A=(0,g.default)(S);if(O){var R=(0,g.default)(this).constructor;B=Reflect.construct(A,arguments,R)}else B=A.apply(this,arguments);return(0,p.default)(this,B)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=h(l),u=h(u),d=h(d),p=h(p),g=h(g),m=h(m),k=h(k),y=M(y),v=h(v),C=h(C),c=M(c);var w=function(S){(0,d.default)(B,S);var O=E(B);function B(A){var R,T=A.config,L=A.eventsDispatcher;return(0,l.default)(this,B),(R=O.call(this,{config:T,eventsDispatcher:L})).tooltip=new C.default,R}return(0,u.default)(B,[{key:"CSS",get:function(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}},{key:"opened",get:function(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}},{key:"toolbox",get:function(){var A=this;return{opened:this.toolboxInstance.opened,close:function(){A.toolboxInstance.close()},open:function(){A.Editor.BlockManager.currentBlock=A.hoveredBlock,A.toolboxInstance.open()},toggle:function(){return A.toolboxInstance.toggle()},hasFocus:function(){return A.toolboxInstance.hasFocus()}}}},{key:"blockActions",get:function(){var A=this;return{hide:function(){A.nodes.actions.classList.remove(A.CSS.actionsOpened)},show:function(){A.nodes.actions.classList.add(A.CSS.actionsOpened)}}}},{key:"blockTunesToggler",get:function(){var A=this;return{hide:function(){return A.nodes.settingsToggler.classList.add(A.CSS.settingsTogglerHidden)},show:function(){return A.nodes.settingsToggler.classList.remove(A.CSS.settingsTogglerHidden)}}}},{key:"toggleReadOnly",value:function(A){A?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):(this.drawUI(),this.enableModuleBindings())}},{key:"moveAndOpen",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.Editor.BlockManager.currentBlock;if(this.toolboxInstance.close(),this.Editor.BlockSettings.close(),A){this.hoveredBlock=A;var R,T=A.holder,L=this.Editor.UI.isMobile,P=A.pluginsContent,D=window.getComputedStyle(P),H=parseInt(D.paddingTop,10),j=T.offsetHeight;R=L?T.offsetTop+j:T.offsetTop+H,this.nodes.wrapper.style.top="".concat(Math.floor(R),"px"),this.Editor.BlockManager.blocks.length===1&&A.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}}},{key:"close",value:function(){this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),this.toolboxInstance.close(),this.Editor.BlockSettings.close())}},{key:"open",value:function(){var A=this,R=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];y.delay(function(){A.nodes.wrapper.classList.add(A.CSS.toolbarOpened),R?A.blockActions.show():A.blockActions.hide()},50)()}},{key:"make",value:function(){var A=this;this.nodes.wrapper=k.default.make("div",this.CSS.toolbar),["content","actions"].forEach(function(T){A.nodes[T]=k.default.make("div",A.CSS[T])}),k.default.append(this.nodes.wrapper,this.nodes.content),k.default.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=k.default.make("div",this.CSS.plusButton,{innerHTML:_.IconPlus}),k.default.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",function(){A.tooltip.hide(!0),A.plusButtonClicked()},!1);var R=k.default.make("div");R.appendChild(document.createTextNode(v.default.ui(x.I18nInternalNS.ui.toolbar.toolbox,"Add"))),R.appendChild(k.default.make("div",this.CSS.plusButtonShortcut,{textContent:"\u21E5 Tab"})),this.tooltip.onHover(this.nodes.plusButton,R,{hidingDelay:400}),this.nodes.settingsToggler=k.default.make("span",this.CSS.settingsToggler,{innerHTML:_.IconMenu}),k.default.append(this.nodes.actions,this.nodes.settingsToggler),this.tooltip.onHover(this.nodes.settingsToggler,v.default.ui(x.I18nInternalNS.ui.blockTunes.toggler,"Click to tune"),{hidingDelay:400}),k.default.append(this.nodes.actions,this.makeToolbox()),k.default.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),k.default.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}},{key:"makeToolbox",value:function(){var A=this;return this.toolboxInstance=new c.default({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:v.default.ui(x.I18nInternalNS.ui.popover,"Filter"),nothingFound:v.default.ui(x.I18nInternalNS.ui.popover,"Nothing found")}}),this.toolboxInstance.on(c.ToolboxEvent.Opened,function(){A.Editor.UI.nodes.wrapper.classList.add(A.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(c.ToolboxEvent.Closed,function(){A.Editor.UI.nodes.wrapper.classList.remove(A.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(c.ToolboxEvent.BlockAdded,function(R){var T=R.block,L=A.Editor,P=L.BlockManager,D=L.Caret,H=P.getBlockById(T.id);H.inputs.length===0&&(H===P.lastBlock?(P.insertAtEnd(),D.setToBlock(P.lastBlock)):D.setToBlock(P.nextBlock))}),this.toolboxInstance.make()}},{key:"plusButtonClicked",value:function(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.toggle()}},{key:"enableModuleBindings",value:function(){var A=this;this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",function(R){R.stopPropagation(),A.settingsTogglerClicked(),A.toolboxInstance.close(),A.tooltip.hide(!0)},!0),y.isMobileScreen()||this.eventsDispatcher.on(this.Editor.UI.events.blockHovered,function(R){A.Editor.BlockSettings.opened||A.toolboxInstance.opened||A.moveAndOpen(R.block)})}},{key:"disableModuleBindings",value:function(){this.readOnlyMutableListeners.clearAll()}},{key:"settingsTogglerClicked",value:function(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}},{key:"drawUI",value:function(){this.Editor.BlockSettings.make(),this.make()}},{key:"destroy",value:function(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy(),this.tooltip.destroy()}}]),B}(m.default);a.default=w,w.displayName="Toolbar",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(41),e(2),e(3),e(5),e(6),e(4),e(7),e(19),e(112),e(67),e(387),e(82),e(8),e(388),e(37)],(o=typeof(i=function(s,a,l,u,d,p,g,m,k,y,v,x,C,c,_,h){"use strict";var b=e(1);function M(O){var B=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(A){return!1}}();return function(){var A,R=(0,g.default)(O);if(B){var T=(0,g.default)(this).constructor;A=Reflect.construct(R,arguments,T)}else A=R.apply(this,arguments);return(0,p.default)(this,A)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.PopoverEvent=void 0,a=b(a),l=b(l),u=b(u),d=b(d),p=b(p),g=b(g),m=b(m),k=b(k),y=b(y),v=b(v),x=b(x),C=b(C),_=b(_);var E,w=function(O,B,A,R){var T,L=arguments.length,P=L<3?B:R===null?R=Object.getOwnPropertyDescriptor(B,A):R;if((typeof Reflect=="undefined"?"undefined":(0,m.default)(Reflect))==="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(O,B,A,R);else for(var D=O.length-1;D>=0;D--)(T=O[D])&&(P=(L<3?T(P):L>3?T(B,A,P):T(B,A))||P);return L>3&&P&&Object.defineProperty(B,A,P),P};s.PopoverEvent=E,function(O){O.OverlayClicked="overlay-clicked",O.Close="close"}(E||(s.PopoverEvent=E={}));var S=function(O){(0,d.default)(A,O);var B=M(A);function A(R){var T,L=R.items,P=R.className,D=R.searchable,H=R.filterLabel,j=R.nothingFoundLabel,F=R.customContent,K=R.customContentFlippableItems,q=R.scopeElement;return(0,l.default)(this,A),(T=B.call(this)).customContentFlippableItems=[],T.isShown=!1,T.nodes={wrapper:null,popover:null,items:null,nothingFound:null,overlay:null},T.scrollLocker=new _.default,T.itemsRequiringConfirmation={},T.removeSpecialHoverBehavior=function(){var W=T.nodes.items.querySelector(".".concat(A.CSS.itemNoHover));W&&W.classList.remove(A.CSS.itemNoHover)},T.onFlip=function(){T.disableSpecialHoverAndFocusBehavior()},T.items=L,T.customContent=F,T.customContentFlippableItems=K,T.className=P||"",T.searchable=D,T.listeners=new y.default,T.scopeElement=q,T.filterLabel=H,T.nothingFoundLabel=j,T.render(),T.enableFlipper(),T}return(0,u.default)(A,[{key:"getElement",value:function(){return this.nodes.wrapper}},{key:"show",value:function(){var R=this;this.shouldOpenPopoverBottom||(this.nodes.wrapper.style.setProperty("--popover-height",this.calculateHeight()+"px"),this.nodes.wrapper.classList.add(this.className+"--opened-top")),this.search&&this.search.clear(),this.nodes.items.scrollTop=0,this.nodes.popover.classList.add(A.CSS.popoverOpened),this.nodes.overlay.classList.remove(A.CSS.popoverOverlayHidden),this.flipper.activate(this.flippableElements),this.searchable&&setTimeout(function(){R.search.focus()},100),(0,c.isMobileScreen)()&&this.scrollLocker.lock(),this.isShown=!0}},{key:"hide",value:function(){var R=this;this.isShown&&(this.nodes.popover.classList.remove(A.CSS.popoverOpened),this.nodes.overlay.classList.add(A.CSS.popoverOverlayHidden),this.flipper.deactivate(),(0,c.isMobileScreen)()&&this.scrollLocker.unlock(),this.isShown=!1,this.nodes.wrapper.classList.remove(this.className+"--opened-top"),Array.from(this.nodes.items.querySelectorAll(".".concat(A.CSS.itemConfirmation))).forEach(function(T){return R.cleanUpConfirmationStateForItem(T)}),this.disableSpecialHoverAndFocusBehavior(),this.emit(E.Close))}},{key:"destroy",value:function(){this.flipper.deactivate(),this.listeners.removeAll(),this.disableSpecialHoverAndFocusBehavior(),(0,c.isMobileScreen)()&&this.scrollLocker.unlock()}},{key:"hasFocus",value:function(){return this.flipper.hasFocus()}},{key:"calculateHeight",value:function(){var R,T=this.nodes.popover.cloneNode(!0);return T.style.visibility="hidden",T.style.position="absolute",T.style.top="-1000px",T.classList.add(A.CSS.popoverOpened),document.body.appendChild(T),R=T.offsetHeight,T.remove(),R}},{key:"render",value:function(){var R=this;this.nodes.wrapper=k.default.make("div",this.className),this.nodes.popover=k.default.make("div",A.CSS.popover),this.nodes.wrapper.appendChild(this.nodes.popover),this.nodes.overlay=k.default.make("div",[A.CSS.popoverOverlay,A.CSS.popoverOverlayHidden]),this.nodes.wrapper.appendChild(this.nodes.overlay),this.searchable&&this.addSearch(this.nodes.popover),this.customContent&&(this.customContent.classList.add(A.CSS.customContent),this.nodes.popover.appendChild(this.customContent)),this.nodes.items=k.default.make("div",A.CSS.itemsWrapper),this.items.forEach(function(T){R.nodes.items.appendChild(R.createItem(T))}),this.nodes.popover.appendChild(this.nodes.items),this.nodes.nothingFound=k.default.make("div",[A.CSS.noFoundMessage],{textContent:this.nothingFoundLabel}),this.nodes.popover.appendChild(this.nodes.nothingFound),this.listeners.on(this.nodes.popover,"click",function(T){var L=T.target.closest(".".concat(A.CSS.item));L&&R.itemClicked(L,T)}),this.listeners.on(this.nodes.overlay,"click",function(){R.emit(E.OverlayClicked)})}},{key:"addSearch",value:function(R){var T=this;this.search=new x.default({items:this.items,placeholder:this.filterLabel,onSearch:function(P){var D=[];T.items.forEach(function(F,K){var q=T.nodes.items.children[K];P.includes(F)?(D.push(q),q.classList.remove(A.CSS.itemHidden)):q.classList.add(A.CSS.itemHidden)}),T.nodes.nothingFound.classList.toggle(A.CSS.noFoundMessageShown,D.length===0);var H=P.length===T.items.length,j=H?T.flippableElements:D;T.customContent&&T.customContent.classList.toggle(A.CSS.customContentHidden,!H),T.flipper.isActivated&&(T.reactivateFlipper(j),T.flipper.focusFirst())}});var L=this.search.getElement();R.appendChild(L)}},{key:"createItem",value:function(R){var T=k.default.make("div",A.CSS.item);R.name&&(T.dataset.itemName=R.name);var L=k.default.make("div",A.CSS.itemLabel,{innerHTML:R.title||""});return T.appendChild(k.default.make("div",A.CSS.itemIcon,{innerHTML:R.icon||h.IconDotCircle})),T.appendChild(L),R.secondaryLabel&&T.appendChild(k.default.make("div",A.CSS.itemSecondaryLabel,{textContent:R.secondaryLabel})),R.isActive&&T.classList.add(A.CSS.itemActive),R.isDisabled&&T.classList.add(A.CSS.itemDisabled),T}},{key:"itemClicked",value:function(R,T){var L=this,P=Array.from(this.nodes.items.children),D=P.indexOf(R),H=this.items[D];H.isDisabled||(P.filter(function(j){return j!==R}).forEach(function(j){L.cleanUpConfirmationStateForItem(j)}),H.confirmation?this.enableConfirmationStateForItem(H,R,D):(H.onActivate(H,T),this.toggleIfNeeded(D,P),H.closeOnActivate&&this.hide()))}},{key:"toggleIfNeeded",value:function(R,T){var L=this,P=this.items[R];if(P.toggle===!0)return P.isActive=!P.isActive,void T[R].classList.toggle(A.CSS.itemActive);if(typeof P.toggle=="string"){var D=this.items.filter(function(H){return H.toggle===P.toggle});if(D.length===1)return P.isActive=!P.isActive,void T[R].classList.toggle(A.CSS.itemActive);D.forEach(function(H){var j=L.items.indexOf(H),F=H===P;H.isActive=F,T[j].classList.toggle(A.CSS.itemActive,F)})}}},{key:"enableConfirmationStateForItem",value:function(R,T,L){var P;this.itemsRequiringConfirmation[L]===void 0&&(this.itemsRequiringConfirmation[L]=R);var D=Object.assign(Object.assign(Object.assign({},R),R.confirmation),{confirmation:R.confirmation.confirmation});this.items[L]=D;var H=this.createItem(D);(P=H.classList).add.apply(P,[A.CSS.itemConfirmation].concat((0,a.default)(Array.from(T.classList)))),T.parentElement.replaceChild(H,T),this.enableSpecialHoverAndFocusBehavior(H),this.reactivateFlipper(this.flippableElements,this.flippableElements.indexOf(H))}},{key:"cleanUpConfirmationStateForItem",value:function(R){var T=Array.from(this.nodes.items.children).indexOf(R),L=this.itemsRequiringConfirmation[T];if(L!==void 0){var P=this.createItem(L);R.parentElement.replaceChild(P,R),this.items[T]=L,delete this.itemsRequiringConfirmation[T],R.removeEventListener("mouseleave",this.removeSpecialHoverBehavior),this.disableSpecialHoverAndFocusBehavior(),this.reactivateFlipper(this.flippableElements,this.flippableElements.indexOf(P))}}},{key:"enableSpecialHoverAndFocusBehavior",value:function(R){R.classList.add(A.CSS.itemNoHover),R.classList.add(A.CSS.itemNoFocus),R.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0}),this.flipper.onFlip(this.onFlip)}},{key:"disableSpecialHoverAndFocusBehavior",value:function(){this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),this.flipper.removeOnFlip(this.onFlip)}},{key:"removeSpecialFocusBehavior",value:function(){var R=this.nodes.items.querySelector(".".concat(A.CSS.itemNoFocus));R&&R.classList.remove(A.CSS.itemNoFocus)}},{key:"reactivateFlipper",value:function(R,T){this.flipper.deactivate(),this.flipper.activate(R,T)}},{key:"enableFlipper",value:function(){this.flipper=new v.default({items:this.flippableElements,focusedItemClass:A.CSS.itemFocused,allowedKeys:[c.keyCodes.TAB,c.keyCodes.UP,c.keyCodes.DOWN,c.keyCodes.ENTER]})}},{key:"flippableElements",get:function(){var R=Array.from(this.nodes.wrapper.querySelectorAll(".".concat(A.CSS.item)));return(this.customContentFlippableItems||[]).concat(R)}},{key:"shouldOpenPopoverBottom",get:function(){var R=this.nodes.wrapper.getBoundingClientRect(),T=this.scopeElement.getBoundingClientRect(),L=this.calculateHeight(),P=R.top+L,D=R.top-L,H=Math.min(window.innerHeight,T.bottom);return D<T.top||P<=H}}],[{key:"CSS",get:function(){return{popover:"ce-popover",popoverOpened:"ce-popover--opened",itemsWrapper:"ce-popover__items",item:"ce-popover__item",itemHidden:"ce-popover__item--hidden",itemFocused:"ce-popover__item--focused",itemActive:"ce-popover__item--active",itemDisabled:"ce-popover__item--disabled",itemConfirmation:"ce-popover__item--confirmation",itemNoHover:"ce-popover__item--no-visible-hover",itemNoFocus:"ce-popover__item--no-visible-focus",itemLabel:"ce-popover__item-label",itemIcon:"ce-popover__item-icon",itemSecondaryLabel:"ce-popover__item-secondary-label",noFoundMessage:"ce-popover__no-found",noFoundMessageShown:"ce-popover__no-found--shown",popoverOverlay:"ce-popover__overlay",popoverOverlayHidden:"ce-popover__overlay--hidden",customContent:"ce-popover__custom-content",customContentHidden:"ce-popover__custom-content--hidden"}}}]),A}(C.default);s.default=S,S.displayName="Popover",w([c.cacheable],S.prototype,"calculateHeight",null)})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(13),n=e(10).document,o=i(n)&&i(n.createElement);r.exports=function(s){return o?n.createElement(s):{}}},function(r,t,e){t.f=e(14)},function(r,t,e){var i=e(70)("keys"),n=e(45);r.exports=function(o){return i[o]||(i[o]=n(o))}},function(r,t){r.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(r,t,e){var i=e(10).document;r.exports=i&&i.documentElement},function(r,t,e){var i=e(13),n=e(12),o=function(s,a){if(n(s),!i(a)&&a!==null)throw TypeError(a+": can't set as prototype!")};r.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(s,a,l){try{(l=e(31)(Function.call,e(34).f(Object.prototype,"__proto__").set,2))(s,[]),a=!(s instanceof Array)}catch(u){a=!0}return function(u,d){return o(u,d),a?u.__proto__=d:l(u,d),u}}({},!1):void 0),check:o}},function(r,t){r.exports=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},function(r,t,e){var i=e(13),n=e(91).set;r.exports=function(o,s,a){var l,u=s.constructor;return u!==a&&typeof u=="function"&&(l=u.prototype)!==a.prototype&&i(l)&&n&&n(o,l),o}},function(r,t,e){"use strict";var i=e(33),n=e(39);r.exports=function(o){var s=String(n(this)),a="",l=i(o);if(l<0||l==1/0)throw RangeError("Count can't be negative");for(;l>0;(l>>>=1)&&(s+=s))1&l&&(a+=s);return a}},function(r,t){r.exports=Math.sign||function(e){return(e=+e)==0||e!=e?e:e<0?-1:1}},function(r,t){var e=Math.expm1;r.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||e(-2e-17)!=-2e-17?function(i){return(i=+i)==0?i:i>-1e-6&&i<1e-6?i+i*i/2:Math.exp(i)-1}:e},function(r,t,e){var i=e(33),n=e(39);r.exports=function(o){return function(s,a){var l,u,d=String(n(s)),p=i(a),g=d.length;return p<0||p>=g?o?"":void 0:(l=d.charCodeAt(p))<55296||l>56319||p+1===g||(u=d.charCodeAt(p+1))<56320||u>57343?o?d.charAt(p):l:o?d.slice(p,p+2):u-56320+(l-55296<<10)+65536}}},function(r,t,e){"use strict";var i=e(46),n=e(0),o=e(23),s=e(27),a=e(57),l=e(131),u=e(55),d=e(51),p=e(14)("iterator"),g=!([].keys&&"next"in[].keys()),m=function(){return this};r.exports=function(k,y,v,x,C,c,_){l(v,y,x);var h,b,M,E=function(P){if(!g&&P in B)return B[P];switch(P){case"keys":case"values":return function(){return new v(this,P)}}return function(){return new v(this,P)}},w=y+" Iterator",S=C=="values",O=!1,B=k.prototype,A=B[p]||B["@@iterator"]||C&&B[C],R=A||E(C),T=C?S?E("entries"):R:void 0,L=y=="Array"&&B.entries||A;if(L&&(M=d(L.call(new k)))!==Object.prototype&&M.next&&(u(M,w,!0),i||typeof M[p]=="function"||s(M,p,m)),S&&A&&A.name!=="values"&&(O=!0,R=function(){return A.call(this)}),i&&!_||!g&&!O&&B[p]||s(B,p,R),a[y]=R,a[w]=m,C)if(h={values:S?R:E("values"),keys:c?R:E("keys"),entries:T},_)for(b in h)b in B||o(B,b,h[b]);else n(n.P+n.F*(g||O),y,h);return h}},function(r,t,e){var i=e(100),n=e(39);r.exports=function(o,s,a){if(i(s))throw TypeError("String#"+a+" doesn't accept regex!");return String(n(o))}},function(r,t,e){var i=e(13),n=e(38),o=e(14)("match");r.exports=function(s){var a;return i(s)&&((a=s[o])!==void 0?!!a:n(s)=="RegExp")}},function(r,t,e){var i=e(14)("match");r.exports=function(n){var o=/./;try{"/./"[n](o)}catch(s){try{return o[i]=!1,!"/./"[n](o)}catch(a){}}return!0}},function(r,t,e){var i=e(57),n=e(14)("iterator"),o=Array.prototype;r.exports=function(s){return s!==void 0&&(i.Array===s||o[n]===s)}},function(r,t,e){"use strict";var i=e(18),n=e(44);r.exports=function(o,s,a){s in o?i.f(o,s,n(0,a)):o[s]=a}},function(r,t,e){var i=e(64),n=e(14)("iterator"),o=e(57);r.exports=e(16).getIteratorMethod=function(s){if(s!=null)return s[n]||s["@@iterator"]||o[i(s)]}},function(r,t,e){"use strict";var i=e(22),n=e(48),o=e(15);r.exports=function(s){for(var a=i(this),l=o(a.length),u=arguments.length,d=n(u>1?arguments[1]:void 0,l),p=u>2?arguments[2]:void 0,g=p===void 0?l:n(p,l);g>d;)a[d++]=s;return a}},function(r,t,e){"use strict";var i=e(52),n=e(136),o=e(57),s=e(28);r.exports=e(98)(Array,"Array",function(a,l){this._t=s(a),this._i=0,this._k=l},function(){var a=this._t,l=this._k,u=this._i++;return!a||u>=a.length?(this._t=void 0,n(1)):n(0,l=="keys"?u:l=="values"?a[u]:[u,a[u]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(r,t,e){"use strict";var i,n,o=e(75),s=RegExp.prototype.exec,a=String.prototype.replace,l=s,u=(i=/a/,n=/b*/g,s.call(i,"a"),s.call(n,"a"),i.lastIndex!==0||n.lastIndex!==0),d=/()??/.exec("")[1]!==void 0;(u||d)&&(l=function(p){var g,m,k,y,v=this;return d&&(m=new RegExp("^"+v.source+"$(?!\\s)",o.call(v))),u&&(g=v.lastIndex),k=s.call(v,p),u&&k&&(v.lastIndex=v.global?k.index+k[0].length:g),d&&k&&k.length>1&&a.call(k[0],m,function(){for(y=1;y<arguments.length-2;y++)arguments[y]===void 0&&(k[y]=void 0)}),k}),r.exports=l},function(r,t,e){"use strict";var i=e(97)(!0);r.exports=function(n,o,s){return o+(s?i(n,o).length:1)}},function(r,t,e){var i,n,o,s=e(31),a=e(125),l=e(90),u=e(86),d=e(10),p=d.process,g=d.setImmediate,m=d.clearImmediate,k=d.MessageChannel,y=d.Dispatch,v=0,x={},C=function(){var _=+this;if(x.hasOwnProperty(_)){var h=x[_];delete x[_],h()}},c=function(_){C.call(_.data)};g&&m||(g=function(_){for(var h=[],b=1;arguments.length>b;)h.push(arguments[b++]);return x[++v]=function(){a(typeof _=="function"?_:Function(_),h)},i(v),v},m=function(_){delete x[_]},e(38)(p)=="process"?i=function(_){p.nextTick(s(C,_,1))}:y&&y.now?i=function(_){y.now(s(C,_,1))}:k?(o=(n=new k).port2,n.port1.onmessage=c,i=s(o.postMessage,o,1)):d.addEventListener&&typeof postMessage=="function"&&!d.importScripts?(i=function(_){d.postMessage(_+"","*")},d.addEventListener("message",c,!1)):i="onreadystatechange"in u("script")?function(_){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),C.call(_)}}:function(_){setTimeout(s(C,_,1),0)}),r.exports={set:g,clear:m}},function(r,t,e){"use strict";var i=e(10),n=e(17),o=e(46),s=e(81),a=e(27),l=e(60),u=e(11),d=e(59),p=e(33),g=e(15),m=e(144),k=e(50).f,y=e(18).f,v=e(105),x=e(55),C=i.ArrayBuffer,c=i.DataView,_=i.Math,h=i.RangeError,b=i.Infinity,M=C,E=_.abs,w=_.pow,S=_.floor,O=_.log,B=_.LN2,A=n?"_b":"buffer",R=n?"_l":"byteLength",T=n?"_o":"byteOffset";function L(re,pe,Ce){var be,xe,Re,je=new Array(Ce),Be=8*Ce-pe-1,ze=(1<<Be)-1,Ne=ze>>1,De=pe===23?w(2,-24)-w(2,-77):0,le=0,he=re<0||re===0&&1/re<0?1:0;for((re=E(re))!=re||re===b?(xe=re!=re?1:0,be=ze):(be=S(O(re)/B),re*(Re=w(2,-be))<1&&(be--,Re*=2),(re+=be+Ne>=1?De/Re:De*w(2,1-Ne))*Re>=2&&(be++,Re/=2),be+Ne>=ze?(xe=0,be=ze):be+Ne>=1?(xe=(re*Re-1)*w(2,pe),be+=Ne):(xe=re*w(2,Ne-1)*w(2,pe),be=0));pe>=8;je[le++]=255&xe,xe/=256,pe-=8);for(be=be<<pe|xe,Be+=pe;Be>0;je[le++]=255&be,be/=256,Be-=8);return je[--le]|=128*he,je}function P(re,pe,Ce){var be,xe=8*Ce-pe-1,Re=(1<<xe)-1,je=Re>>1,Be=xe-7,ze=Ce-1,Ne=re[ze--],De=127&Ne;for(Ne>>=7;Be>0;De=256*De+re[ze],ze--,Be-=8);for(be=De&(1<<-Be)-1,De>>=-Be,Be+=pe;Be>0;be=256*be+re[ze],ze--,Be-=8);if(De===0)De=1-je;else{if(De===Re)return be?NaN:Ne?-b:b;be+=w(2,pe),De-=je}return(Ne?-1:1)*be*w(2,De-pe)}function D(re){return re[3]<<24|re[2]<<16|re[1]<<8|re[0]}function H(re){return[255&re]}function j(re){return[255&re,re>>8&255]}function F(re){return[255&re,re>>8&255,re>>16&255,re>>24&255]}function K(re){return L(re,52,8)}function q(re){return L(re,23,4)}function W(re,pe,Ce){y(re.prototype,pe,{get:function(){return this[Ce]}})}function Y(re,pe,Ce,be){var xe=m(+Ce);if(xe+pe>re[R])throw h("Wrong index!");var Re=re[A]._b,je=xe+re[T],Be=Re.slice(je,je+pe);return be?Be:Be.reverse()}function Z(re,pe,Ce,be,xe,Re){var je=m(+Ce);if(je+pe>re[R])throw h("Wrong index!");for(var Be=re[A]._b,ze=je+re[T],Ne=be(+xe),De=0;De<pe;De++)Be[ze+De]=Ne[Re?De:pe-De-1]}if(s.ABV){if(!u(function(){C(1)})||!u(function(){new C(-1)})||u(function(){return new C,new C(1.5),new C(NaN),C.name!="ArrayBuffer"})){for(var X,Q=(C=function(re){return d(this,C),new M(m(re))}).prototype=M.prototype,ue=k(M),ce=0;ue.length>ce;)(X=ue[ce++])in C||a(C,X,M[X]);o||(Q.constructor=C)}var ne=new c(new C(2)),ge=c.prototype.setInt8;ne.setInt8(0,2147483648),ne.setInt8(1,2147483649),!ne.getInt8(0)&&ne.getInt8(1)||l(c.prototype,{setInt8:function(re,pe){ge.call(this,re,pe<<24>>24)},setUint8:function(re,pe){ge.call(this,re,pe<<24>>24)}},!0)}else C=function(re){d(this,C,"ArrayBuffer");var pe=m(re);this._b=v.call(new Array(pe),0),this[R]=pe},c=function(re,pe,Ce){d(this,c,"DataView"),d(re,C,"DataView");var be=re[R],xe=p(pe);if(xe<0||xe>be)throw h("Wrong offset!");if(xe+(Ce=Ce===void 0?be-xe:g(Ce))>be)throw h("Wrong length!");this[A]=re,this[T]=xe,this[R]=Ce},n&&(W(C,"byteLength","_l"),W(c,"buffer","_b"),W(c,"byteLength","_l"),W(c,"byteOffset","_o")),l(c.prototype,{getInt8:function(re){return Y(this,1,re)[0]<<24>>24},getUint8:function(re){return Y(this,1,re)[0]},getInt16:function(re){var pe=Y(this,2,re,arguments[1]);return(pe[1]<<8|pe[0])<<16>>16},getUint16:function(re){var pe=Y(this,2,re,arguments[1]);return pe[1]<<8|pe[0]},getInt32:function(re){return D(Y(this,4,re,arguments[1]))},getUint32:function(re){return D(Y(this,4,re,arguments[1]))>>>0},getFloat32:function(re){return P(Y(this,4,re,arguments[1]),23,4)},getFloat64:function(re){return P(Y(this,8,re,arguments[1]),52,8)},setInt8:function(re,pe){Z(this,1,re,H,pe)},setUint8:function(re,pe){Z(this,1,re,H,pe)},setInt16:function(re,pe){Z(this,2,re,j,pe,arguments[2])},setUint16:function(re,pe){Z(this,2,re,j,pe,arguments[2])},setInt32:function(re,pe){Z(this,4,re,F,pe,arguments[2])},setUint32:function(re,pe){Z(this,4,re,F,pe,arguments[2])},setFloat32:function(re,pe){Z(this,4,re,q,pe,arguments[2])},setFloat64:function(re,pe){Z(this,8,re,K,pe,arguments[2])}});x(C,"ArrayBuffer"),x(c,"DataView"),a(c.prototype,s.VIEW,!0),t.ArrayBuffer=C,t.DataView=c},function(r,t){function e(i,n){return r.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},r.exports.__esModule=!0,r.exports.default=r.exports,e(i,n)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(8)],(o=typeof(i=function(a,l,u,d){"use strict";var p=e(1);function g(k){if(typeof WeakMap!="function")return null;var y=new WeakMap,v=new WeakMap;return(g=function(x){return x?v:y})(k)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=p(l),u=p(u),d=function(k,y){if(!y&&k&&k.__esModule)return k;if(k===null||s(k)!=="object"&&typeof k!="function")return{default:k};var v=g(y);if(v&&v.has(k))return v.get(k);var x={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in k)if(c!=="default"&&Object.prototype.hasOwnProperty.call(k,c)){var _=C?Object.getOwnPropertyDescriptor(k,c):null;_&&(_.get||_.set)?Object.defineProperty(x,c,_):x[c]=k[c]}return x.default=k,v&&v.set(k,x),x}(d);var m=function(){function k(){(0,l.default)(this,k),this.allListeners=[]}return(0,u.default)(k,[{key:"on",value:function(y,v,x){var C=arguments.length>3&&arguments[3]!==void 0&&arguments[3],c=d.generateId("l"),_={id:c,element:y,eventType:v,handler:x,options:C},h=this.findOne(y,v,x);if(!h)return this.allListeners.push(_),y.addEventListener(v,x,C),c}},{key:"off",value:function(y,v,x,C){var c=this,_=this.findAll(y,v,x);_.forEach(function(h,b){var M=c.allListeners.indexOf(_[b]);M>-1&&(c.allListeners.splice(M,1),h.element.removeEventListener(h.eventType,h.handler,h.options))})}},{key:"offById",value:function(y){var v=this.findById(y);v&&v.element.removeEventListener(v.eventType,v.handler,v.options)}},{key:"findOne",value:function(y,v,x){var C=this.findAll(y,v,x);return C.length>0?C[0]:null}},{key:"findAll",value:function(y,v,x){var C=y?this.findByEventTarget(y):[];return y&&v&&x?C.filter(function(c){return c.eventType===v&&c.handler===x}):y&&v?C.filter(function(c){return c.eventType===v}):C}},{key:"removeAll",value:function(){this.allListeners.map(function(y){y.element.removeEventListener(y.eventType,y.handler,y.options)}),this.allListeners=[]}},{key:"destroy",value:function(){this.removeAll()}},{key:"findByEventTarget",value:function(y){return this.allListeners.filter(function(v){if(v.element===y)return v})}},{key:"findByType",value:function(y){return this.allListeners.filter(function(v){if(v.eventType===y)return v})}},{key:"findByHandler",value:function(y){return this.allListeners.filter(function(v){if(v.handler===y)return v})}},{key:"findById",value:function(y){return this.allListeners.find(function(v){return v.id===y})}}]),k}();a.default=m,m.displayName="Listeners",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t],(o=typeof(i=function(s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=function(l){var u={get id(){return l.id},get name(){return l.name},get config(){return l.config},get holder(){return l.holder},get isEmpty(){return l.isEmpty},get selected(){return l.selected},set stretched(d){l.stretched=d},get stretched(){return l.stretched},call:function(d,p){return l.call(d,p)},save:function(){return l.save()},validate:function(d){return l.validate(d)},dispatchChange:function(){l.dispatchChange()}};Object.setPrototypeOf(this,u)};s.default=a,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(377);function n(){return typeof Reflect!="undefined"&&Reflect.get?(r.exports=n=Reflect.get.bind(),r.exports.__esModule=!0,r.exports.default=r.exports):(r.exports=n=function(o,s,a){var l=i(o,s);if(l){var u=Object.getOwnPropertyDescriptor(l,s);return u.get?u.get.call(arguments.length<3?o:a):u.value}},r.exports.__esModule=!0,r.exports.default=r.exports),n.apply(this,arguments)}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(381)],(o=typeof(i=function(s,a,l,u){"use strict";var d=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=d(a),l=d(l),u=d(u);var p=function(){function g(){(0,a.default)(this,g),this.lib=new u.default}return(0,l.default)(g,[{key:"destroy",value:function(){this.lib.destroy()}},{key:"show",value:function(m,k,y){this.lib.show(m,k,y)}},{key:"hide",value:function(){var m=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.lib.hide(m)}},{key:"onHover",value:function(m,k,y){this.lib.onHover(m,k,y)}}]),g}();s.default=p,p.displayName="Tooltip",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(41),e(2),e(3),e(385)],(o=typeof(i=function(s,a,l,u,d){"use strict";var p=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=p(a),l=p(l),u=p(u),d=p(d);var g=function(){function k(){(0,l.default)(this,k),this.registeredShortcuts=new Map}return(0,u.default)(k,[{key:"add",value:function(y){if(this.findShortcut(y.on,y.name))throw Error("Shortcut ".concat(y.name," is already registered for ").concat(y.on,". Please remove it before add a new handler."));var v=new d.default({name:y.name,on:y.on,callback:y.handler}),x=this.registeredShortcuts.get(y.on)||[];this.registeredShortcuts.set(y.on,[].concat((0,a.default)(x),[v]))}},{key:"remove",value:function(y,v){var x=this.findShortcut(y,v);if(x){x.remove();var C=this.registeredShortcuts.get(y);this.registeredShortcuts.set(y,C.filter(function(c){return c!==x}))}}},{key:"findShortcut",value:function(y,v){return(this.registeredShortcuts.get(y)||[]).find(function(x){return x.name===v})}}]),k}();g.displayName="Shortcuts";var m=new g;s.default=m,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){r.exports=!e(17)&&!e(11)(function(){return Object.defineProperty(e(86)("div"),"a",{get:function(){return 7}}).a!=7})},function(r,t,e){var i=e(10),n=e(16),o=e(46),s=e(87),a=e(18).f;r.exports=function(l){var u=n.Symbol||(n.Symbol=o?{}:i.Symbol||{});l.charAt(0)=="_"||l in u||a(u,l,{value:s.f(l)})}},function(r,t,e){var i=e(26),n=e(28),o=e(71)(!1),s=e(88)("IE_PROTO");r.exports=function(a,l){var u,d=n(a),p=0,g=[];for(u in d)u!=s&&i(d,u)&&g.push(u);for(;l.length>p;)i(d,u=l[p++])&&(~o(g,u)||g.push(u));return g}},function(r,t,e){var i=e(18),n=e(12),o=e(47);r.exports=e(17)?Object.defineProperties:function(s,a){n(s);for(var l,u=o(a),d=u.length,p=0;d>p;)i.f(s,l=u[p++],a[l]);return s}},function(r,t,e){var i=e(28),n=e(50).f,o={}.toString,s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r.exports.f=function(a){return s&&o.call(a)=="[object Window]"?function(l){try{return n(l)}catch(u){return s.slice()}}(a):n(i(a))}},function(r,t,e){"use strict";var i=e(17),n=e(47),o=e(72),s=e(63),a=e(22),l=e(62),u=Object.assign;r.exports=!u||e(11)(function(){var d={},p={},g=Symbol(),m="abcdefghijklmnopqrst";return d[g]=7,m.split("").forEach(function(k){p[k]=k}),u({},d)[g]!=7||Object.keys(u({},p)).join("")!=m})?function(d,p){for(var g=a(d),m=arguments.length,k=1,y=o.f,v=s.f;m>k;)for(var x,C=l(arguments[k++]),c=y?n(C).concat(y(C)):n(C),_=c.length,h=0;_>h;)x=c[h++],i&&!v.call(C,x)||(g[x]=C[x]);return g}:u},function(r,t){r.exports=Object.is||function(e,i){return e===i?e!==0||1/e==1/i:e!=e&&i!=i}},function(r,t,e){"use strict";var i=e(32),n=e(13),o=e(125),s=[].slice,a={},l=function(u,d,p){if(!(d in a)){for(var g=[],m=0;m<d;m++)g[m]="a["+m+"]";a[d]=Function("F,a","return new F("+g.join(",")+")")}return a[d](u,p)};r.exports=Function.bind||function(u){var d=i(this),p=s.call(arguments,1),g=function(){var m=p.concat(s.call(arguments));return this instanceof g?l(d,m.length,m):o(d,m,u)};return n(d.prototype)&&(g.prototype=d.prototype),g}},function(r,t){r.exports=function(e,i,n){var o=n===void 0;switch(i.length){case 0:return o?e():e.call(n);case 1:return o?e(i[0]):e.call(n,i[0]);case 2:return o?e(i[0],i[1]):e.call(n,i[0],i[1]);case 3:return o?e(i[0],i[1],i[2]):e.call(n,i[0],i[1],i[2]);case 4:return o?e(i[0],i[1],i[2],i[3]):e.call(n,i[0],i[1],i[2],i[3])}return e.apply(n,i)}},function(r,t,e){var i=e(10).parseInt,n=e(56).trim,o=e(92),s=/^[-+]?0[xX]/;r.exports=i(o+"08")!==8||i(o+"0x16")!==22?function(a,l){var u=n(String(a),3);return i(u,l>>>0||(s.test(u)?16:10))}:i},function(r,t,e){var i=e(10).parseFloat,n=e(56).trim;r.exports=1/i(e(92)+"-0")!=-1/0?function(o){var s=n(String(o),3),a=i(s);return a===0&&s.charAt(0)=="-"?-0:a}:i},function(r,t,e){var i=e(38);r.exports=function(n,o){if(typeof n!="number"&&i(n)!="Number")throw TypeError(o);return+n}},function(r,t,e){var i=e(13),n=Math.floor;r.exports=function(o){return!i(o)&&isFinite(o)&&n(o)===o}},function(r,t){r.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(r,t,e){"use strict";var i=e(49),n=e(44),o=e(55),s={};e(27)(s,e(14)("iterator"),function(){return this}),r.exports=function(a,l,u){a.prototype=i(s,{next:n(1,u)}),o(a,l+" Iterator")}},function(r,t,e){var i=e(12);r.exports=function(n,o,s,a){try{return a?o(i(s)[0],s[1]):o(s)}catch(u){var l=n.return;throw l!==void 0&&i(l.call(n)),u}}},function(r,t,e){var i=e(282);r.exports=function(n,o){return new(i(n))(o)}},function(r,t,e){var i=e(32),n=e(22),o=e(62),s=e(15);r.exports=function(a,l,u,d,p){i(l);var g=n(a),m=o(g),k=s(g.length),y=p?k-1:0,v=p?-1:1;if(u<2)for(;;){if(y in m){d=m[y],y+=v;break}if(y+=v,p?y<0:k<=y)throw TypeError("Reduce of empty array with no initial value")}for(;p?y>=0:k>y;y+=v)y in m&&(d=l(d,m[y],y,g));return d}},function(r,t,e){"use strict";var i=e(22),n=e(48),o=e(15);r.exports=[].copyWithin||function(s,a){var l=i(this),u=o(l.length),d=n(s,u),p=n(a,u),g=arguments.length>2?arguments[2]:void 0,m=Math.min((g===void 0?u:n(g,u))-p,u-d),k=1;for(p<d&&d<p+m&&(k=-1,p+=m-1,d+=m-1);m-- >0;)p in l?l[d]=l[p]:delete l[d],d+=k,p+=k;return l}},function(r,t){r.exports=function(e,i){return{value:i,done:!!e}}},function(r,t,e){"use strict";var i=e(107);e(0)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},function(r,t,e){e(17)&&/./g.flags!="g"&&e(18).f(RegExp.prototype,"flags",{configurable:!0,get:e(75)})},function(r,t,e){"use strict";var i,n,o,s,a=e(46),l=e(10),u=e(31),d=e(64),p=e(0),g=e(13),m=e(32),k=e(59),y=e(78),v=e(65),x=e(109).set,C=e(302)(),c=e(140),_=e(303),h=e(79),b=e(141),M=l.TypeError,E=l.process,w=E&&E.versions,S=w&&w.v8||"",O=l.Promise,B=d(E)=="process",A=function(){},R=n=c.f,T=!!function(){try{var q=O.resolve(1),W=(q.constructor={})[e(14)("species")]=function(Y){Y(A,A)};return(B||typeof PromiseRejectionEvent=="function")&&q.then(A)instanceof W&&S.indexOf("6.6")!==0&&h.indexOf("Chrome/66")===-1}catch(Y){}}(),L=function(q){var W;return!(!g(q)||typeof(W=q.then)!="function")&&W},P=function(q,W){if(!q._n){q._n=!0;var Y=q._c;C(function(){for(var Z=q._v,X=q._s==1,Q=0,ue=function(ce){var ne,ge,re,pe=X?ce.ok:ce.fail,Ce=ce.resolve,be=ce.reject,xe=ce.domain;try{pe?(X||(q._h==2&&j(q),q._h=1),pe===!0?ne=Z:(xe&&xe.enter(),ne=pe(Z),xe&&(xe.exit(),re=!0)),ne===ce.promise?be(M("Promise-chain cycle")):(ge=L(ne))?ge.call(ne,Ce,be):Ce(ne)):be(Z)}catch(Re){xe&&!re&&xe.exit(),be(Re)}};Y.length>Q;)ue(Y[Q++]);q._c=[],q._n=!1,W&&!q._h&&D(q)})}},D=function(q){x.call(l,function(){var W,Y,Z,X=q._v,Q=H(q);if(Q&&(W=_(function(){B?E.emit("unhandledRejection",X,q):(Y=l.onunhandledrejection)?Y({promise:q,reason:X}):(Z=l.console)&&Z.error&&Z.error("Unhandled promise rejection",X)}),q._h=B||H(q)?2:1),q._a=void 0,Q&&W.e)throw W.v})},H=function(q){return q._h!==1&&(q._a||q._c).length===0},j=function(q){x.call(l,function(){var W;B?E.emit("rejectionHandled",q):(W=l.onrejectionhandled)&&W({promise:q,reason:q._v})})},F=function(q){var W=this;W._d||(W._d=!0,(W=W._w||W)._v=q,W._s=2,W._a||(W._a=W._c.slice()),P(W,!0))},K=function(q){var W,Y=this;if(!Y._d){Y._d=!0,Y=Y._w||Y;try{if(Y===q)throw M("Promise can't be resolved itself");(W=L(q))?C(function(){var Z={_w:Y,_d:!1};try{W.call(q,u(K,Z,1),u(F,Z,1))}catch(X){F.call(Z,X)}}):(Y._v=q,Y._s=1,P(Y,!1))}catch(Z){F.call({_w:Y,_d:!1},Z)}}};T||(O=function(q){k(this,O,"Promise","_h"),m(q),i.call(this);try{q(u(K,this,1),u(F,this,1))}catch(W){F.call(this,W)}},(i=function(q){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=e(60)(O.prototype,{then:function(q,W){var Y=R(v(this,O));return Y.ok=typeof q!="function"||q,Y.fail=typeof W=="function"&&W,Y.domain=B?E.domain:void 0,this._c.push(Y),this._a&&this._a.push(Y),this._s&&P(this,!1),Y.promise},catch:function(q){return this.then(void 0,q)}}),o=function(){var q=new i;this.promise=q,this.resolve=u(K,q,1),this.reject=u(F,q,1)},c.f=R=function(q){return q===O||q===s?new o(q):n(q)}),p(p.G+p.W+p.F*!T,{Promise:O}),e(55)(O,"Promise"),e(58)("Promise"),s=e(16).Promise,p(p.S+p.F*!T,"Promise",{reject:function(q){var W=R(this);return(0,W.reject)(q),W.promise}}),p(p.S+p.F*(a||!T),"Promise",{resolve:function(q){return b(a&&this===s?O:this,q)}}),p(p.S+p.F*!(T&&e(74)(function(q){O.all(q).catch(A)})),"Promise",{all:function(q){var W=this,Y=R(W),Z=Y.resolve,X=Y.reject,Q=_(function(){var ue=[],ce=0,ne=1;y(q,!1,function(ge){var re=ce++,pe=!1;ue.push(void 0),ne++,W.resolve(ge).then(function(Ce){pe||(pe=!0,ue[re]=Ce,--ne||Z(ue))},X)}),--ne||Z(ue)});return Q.e&&X(Q.v),Y.promise},race:function(q){var W=this,Y=R(W),Z=Y.reject,X=_(function(){y(q,!1,function(Q){W.resolve(Q).then(Y.resolve,Z)})});return X.e&&Z(X.v),Y.promise}})},function(r,t,e){"use strict";var i=e(32);function n(o){var s,a;this.promise=new o(function(l,u){if(s!==void 0||a!==void 0)throw TypeError("Bad Promise constructor");s=l,a=u}),this.resolve=i(s),this.reject=i(a)}r.exports.f=function(o){return new n(o)}},function(r,t,e){var i=e(12),n=e(13),o=e(140);r.exports=function(s,a){if(i(s),n(a)&&a.constructor===s)return a;var l=o.f(s);return(0,l.resolve)(a),l.promise}},function(r,t,e){"use strict";var i=e(18).f,n=e(49),o=e(60),s=e(31),a=e(59),l=e(78),u=e(98),d=e(136),p=e(58),g=e(17),m=e(43).fastKey,k=e(53),y=g?"_s":"size",v=function(x,C){var c,_=m(C);if(_!=="F")return x._i[_];for(c=x._f;c;c=c.n)if(c.k==C)return c};r.exports={getConstructor:function(x,C,c,_){var h=x(function(b,M){a(b,h,C,"_i"),b._t=C,b._i=n(null),b._f=void 0,b._l=void 0,b[y]=0,M!=null&&l(M,c,b[_],b)});return o(h.prototype,{clear:function(){for(var b=k(this,C),M=b._i,E=b._f;E;E=E.n)E.r=!0,E.p&&(E.p=E.p.n=void 0),delete M[E.i];b._f=b._l=void 0,b[y]=0},delete:function(b){var M=k(this,C),E=v(M,b);if(E){var w=E.n,S=E.p;delete M._i[E.i],E.r=!0,S&&(S.n=w),w&&(w.p=S),M._f==E&&(M._f=w),M._l==E&&(M._l=S),M[y]--}return!!E},forEach:function(b){k(this,C);for(var M,E=s(b,arguments.length>1?arguments[1]:void 0,3);M=M?M.n:this._f;)for(E(M.v,M.k,this);M&&M.r;)M=M.p},has:function(b){return!!v(k(this,C),b)}}),g&&i(h.prototype,"size",{get:function(){return k(this,C)[y]}}),h},def:function(x,C,c){var _,h,b=v(x,C);return b?b.v=c:(x._l=b={i:h=m(C,!0),k:C,v:c,p:_=x._l,n:void 0,r:!1},x._f||(x._f=b),_&&(_.n=b),x[y]++,h!=="F"&&(x._i[h]=b)),x},getEntry:v,setStrong:function(x,C,c){u(x,C,function(_,h){this._t=k(_,C),this._k=h,this._l=void 0},function(){for(var _=this._k,h=this._l;h&&h.r;)h=h.p;return this._t&&(this._l=h=h?h.n:this._t._f)?d(0,_=="keys"?h.k:_=="values"?h.v:[h.k,h.v]):(this._t=void 0,d(1))},c?"entries":"values",!c,!0),p(C)}}},function(r,t,e){"use strict";var i=e(60),n=e(43).getWeak,o=e(12),s=e(13),a=e(59),l=e(78),u=e(36),d=e(26),p=e(53),g=u(5),m=u(6),k=0,y=function(C){return C._l||(C._l=new v)},v=function(){this.a=[]},x=function(C,c){return g(C.a,function(_){return _[0]===c})};v.prototype={get:function(C){var c=x(this,C);if(c)return c[1]},has:function(C){return!!x(this,C)},set:function(C,c){var _=x(this,C);_?_[1]=c:this.a.push([C,c])},delete:function(C){var c=m(this.a,function(_){return _[0]===C});return~c&&this.a.splice(c,1),!!~c}},r.exports={getConstructor:function(C,c,_,h){var b=C(function(M,E){a(M,b,c,"_i"),M._t=c,M._i=k++,M._l=void 0,E!=null&&l(E,_,M[h],M)});return i(b.prototype,{delete:function(M){if(!s(M))return!1;var E=n(M);return E===!0?y(p(this,c)).delete(M):E&&d(E,this._i)&&delete E[this._i]},has:function(M){if(!s(M))return!1;var E=n(M);return E===!0?y(p(this,c)).has(M):E&&d(E,this._i)}}),b},def:function(C,c,_){var h=n(o(c),!0);return h===!0?y(C).set(c,_):h[C._i]=_,C},ufstore:y}},function(r,t,e){var i=e(33),n=e(15);r.exports=function(o){if(o===void 0)return 0;var s=i(o),a=n(s);if(s!==a)throw RangeError("Wrong length!");return a}},function(r,t,e){var i=e(50),n=e(72),o=e(12),s=e(10).Reflect;r.exports=s&&s.ownKeys||function(a){var l=i.f(o(a)),u=n.f;return u?l.concat(u(a)):l}},function(r,t,e){var i=e(15),n=e(94),o=e(39);r.exports=function(s,a,l,u){var d=String(o(s)),p=d.length,g=l===void 0?" ":String(l),m=i(a);if(m<=p||g=="")return d;var k=m-p,y=n.call(g,Math.ceil(k/g.length));return y.length>k&&(y=y.slice(0,k)),u?y+d:d+y}},function(r,t,e){var i=e(17),n=e(47),o=e(28),s=e(63).f;r.exports=function(a){return function(l){for(var u,d=o(l),p=n(d),g=p.length,m=0,k=[];g>m;)u=p[m++],i&&!s.call(d,u)||k.push(a?[u,d[u]]:d[u]);return k}}},function(r,t,e){var i=e(149);r.exports=function(n,o){if(n){if(typeof n=="string")return i(n,o);var s=Object.prototype.toString.call(n).slice(8,-1);return s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set"?Array.from(n):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?i(n,o):void 0}},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(e,i){(i==null||i>e.length)&&(i=e.length);for(var n=0,o=new Array(i);n<i;n++)o[n]=e[n];return o},r.exports.__esModule=!0,r.exports.default=r.exports},function(r){r.exports=JSON.parse('{"ui":{"blockTunes":{"toggler":{"Click to tune":"","or drag to move":""}},"inlineToolbar":{"converter":{"Convert to":""}},"toolbar":{"toolbox":{"Add":""}},"popover":{"Filter":"","Nothing found":""}},"toolNames":{"Text":"","Link":"","Bold":"","Italic":""},"tools":{"link":{"Add a link":""},"stub":{"The block can not be displayed correctly.":""}},"blockTunes":{"delete":{"Delete":"","Click to delete":""},"moveUp":{"Move up":""},"moveDown":{"Move down":""}}}')},function(r,t,e){var i,n,o;n=[t,e(3),e(2),e(5),e(6),e(4),e(153)],(o=typeof(i=function(s,a,l,u,d,p,g){"use strict";var m=e(1);function k(v){var x=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,c=(0,p.default)(v);if(x){var _=(0,p.default)(this).constructor;C=Reflect.construct(c,arguments,_)}else C=c.apply(this,arguments);return(0,d.default)(this,C)}}Object.defineProperty(s,"__esModule",{value:!0}),s.CriticalError=void 0,a=m(a),l=m(l),u=m(u),d=m(d),p=m(p);var y=function(v){(0,u.default)(C,v);var x=k(C);function C(){return(0,l.default)(this,C),x.apply(this,arguments)}return(0,a.default)(C)}((0,(g=m(g)).default)(Error));s.CriticalError=y,y.displayName="CriticalError"})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t){r.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(4),n=e(111),o=e(373),s=e(374);function a(l){var u=typeof Map=="function"?new Map:void 0;return r.exports=a=function(d){if(d===null||!o(d))return d;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(d))return u.get(d);u.set(d,p)}function p(){return s(d,arguments,i(this).constructor)}return p.prototype=Object.create(d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),n(p,d)},r.exports.__esModule=!0,r.exports.default=r.exports,a(l)}r.exports=a,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i,n,o,s=e(7);n=[t,e(20),e(21),e(2),e(3),e(5),e(6),e(4),e(8),e(113),e(9),e(61)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x,C){"use strict";var c=e(1);function _(M){if(typeof WeakMap!="function")return null;var E=new WeakMap,w=new WeakMap;return(_=function(S){return S?w:E})(M)}function h(M){var E=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(w){return!1}}();return function(){var w,S=(0,k.default)(M);if(E){var O=(0,k.default)(this).constructor;w=Reflect.construct(S,arguments,O)}else w=S.apply(this,arguments);return(0,m.default)(this,w)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=c(l),u=c(u),d=c(d),p=c(p),g=c(g),m=c(m),k=c(k),y=function(M,E){if(!E&&M&&M.__esModule)return M;if(M===null||s(M)!=="object"&&typeof M!="function")return{default:M};var w=_(E);if(w&&w.has(M))return w.get(M);var S={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in M)if(B!=="default"&&Object.prototype.hasOwnProperty.call(M,B)){var A=O?Object.getOwnPropertyDescriptor(M,B):null;A&&(A.get||A.set)?Object.defineProperty(S,B,A):S[B]=M[B]}return S.default=M,w&&w.set(M,S),S}(y),v=c(v),x=c(x),C=c(C);var b=function(M){(0,g.default)(w,M);var E=h(w);function w(){var S;return(0,d.default)(this,w),(S=E.apply(this,arguments)).insert=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S.config.defaultBlock,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=arguments.length>3?arguments[3]:void 0,R=arguments.length>4?arguments[4]:void 0,T=arguments.length>5?arguments[5]:void 0,L=arguments.length>6?arguments[6]:void 0,P=S.Editor.BlockManager.insert({id:L,tool:O,data:B,index:A,needToFocus:R,replace:T});return new v.default(P)},S.composeBlockData=function(){var O=(0,u.default)(l.default.mark(function B(A){var R,T;return l.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return R=S.Editor.Tools.blockTools.get(A),T=new C.default({tool:R,api:S.Editor.API,readOnly:!0,data:{},tunesData:{}}),L.abrupt("return",T.data);case 3:case"end":return L.stop()}},B)}));return function(B){return O.apply(this,arguments)}}(),S.update=function(O,B){var A=S.Editor.BlockManager,R=A.getBlockById(O);if(R){var T=A.getBlockIndex(R);A.insert({id:R.id,tool:R.name,data:B,index:T,replace:!0,tunes:R.tunes})}else y.log("blocks.update(): Block with passed id was not found","warn")},S}return(0,p.default)(w,[{key:"methods",get:function(){var S=this;return{clear:function(){return S.clear()},render:function(O){return S.render(O)},renderFromHTML:function(O){return S.renderFromHTML(O)},delete:function(O){return S.delete(O)},swap:function(O,B){return S.swap(O,B)},move:function(O,B){return S.move(O,B)},getBlockByIndex:function(O){return S.getBlockByIndex(O)},getById:function(O){return S.getById(O)},getCurrentBlockIndex:function(){return S.getCurrentBlockIndex()},getBlockIndex:function(O){return S.getBlockIndex(O)},getBlocksCount:function(){return S.getBlocksCount()},stretchBlock:function(O){var B=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return S.stretchBlock(O,B)},insertNewBlock:function(){return S.insertNewBlock()},insert:this.insert,update:this.update,composeBlockData:this.composeBlockData}}},{key:"getBlocksCount",value:function(){return this.Editor.BlockManager.blocks.length}},{key:"getCurrentBlockIndex",value:function(){return this.Editor.BlockManager.currentBlockIndex}},{key:"getBlockIndex",value:function(S){var O=this.Editor.BlockManager.getBlockById(S);if(O)return this.Editor.BlockManager.getBlockIndex(O);y.logLabeled("There is no block with id `"+S+"`","warn")}},{key:"getBlockByIndex",value:function(S){var O=this.Editor.BlockManager.getBlockByIndex(S);if(O!==void 0)return new v.default(O);y.logLabeled("There is no block at index `"+S+"`","warn")}},{key:"getById",value:function(S){var O=this.Editor.BlockManager.getBlockById(S);return O===void 0?(y.logLabeled("There is no block with id `"+S+"`","warn"),null):new v.default(O)}},{key:"swap",value:function(S,O){y.log("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(S,O)}},{key:"move",value:function(S,O){this.Editor.BlockManager.move(S,O)}},{key:"delete",value:function(S){try{this.Editor.BlockManager.removeBlock(S)}catch(O){return void y.logLabeled(O,"warn")}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}},{key:"clear",value:function(){this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}},{key:"render",value:function(S){return this.Editor.BlockManager.clear(),this.Editor.Renderer.render(S.blocks)}},{key:"renderFromHTML",value:function(S){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(S,!0)}},{key:"stretchBlock",value:function(S){var O=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];y.deprecationAssert(!0,"blocks.stretchBlock()","BlockAPI");var B=this.Editor.BlockManager.getBlockByIndex(S);B&&(B.stretched=O)}},{key:"insertNewBlock",value:function(){y.log("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}}]),w}(x.default);a.default=b,b.displayName="BlocksAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(s,a,l,u,d,p,g){"use strict";var m=e(1);function k(v){var x=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,c=(0,p.default)(v);if(x){var _=(0,p.default)(this).constructor;C=Reflect.construct(c,arguments,_)}else C=c.apply(this,arguments);return(0,d.default)(this,C)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=m(a),l=m(l),u=m(u),d=m(d),p=m(p);var y=function(v){(0,u.default)(C,v);var x=k(C);function C(){var c;return(0,a.default)(this,C),(c=x.apply(this,arguments)).setToFirstBlock=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c.Editor.Caret.positions.DEFAULT,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return!!c.Editor.BlockManager.firstBlock&&(c.Editor.Caret.setToBlock(c.Editor.BlockManager.firstBlock,_,h),!0)},c.setToLastBlock=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c.Editor.Caret.positions.DEFAULT,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return!!c.Editor.BlockManager.lastBlock&&(c.Editor.Caret.setToBlock(c.Editor.BlockManager.lastBlock,_,h),!0)},c.setToPreviousBlock=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c.Editor.Caret.positions.DEFAULT,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return!!c.Editor.BlockManager.previousBlock&&(c.Editor.Caret.setToBlock(c.Editor.BlockManager.previousBlock,_,h),!0)},c.setToNextBlock=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c.Editor.Caret.positions.DEFAULT,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return!!c.Editor.BlockManager.nextBlock&&(c.Editor.Caret.setToBlock(c.Editor.BlockManager.nextBlock,_,h),!0)},c.setToBlock=function(_){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.Editor.Caret.positions.DEFAULT,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return!!c.Editor.BlockManager.blocks[_]&&(c.Editor.Caret.setToBlock(c.Editor.BlockManager.blocks[_],h,b),!0)},c.focus=function(){var _=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return _?c.setToLastBlock(c.Editor.Caret.positions.END):c.setToFirstBlock(c.Editor.Caret.positions.START)},c}return(0,l.default)(C,[{key:"methods",get:function(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}]),C}((g=m(g)).default);s.default=y,y.displayName="CaretAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(s,a,l,u,d,p,g){"use strict";var m=e(1);function k(v){var x=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,c=(0,p.default)(v);if(x){var _=(0,p.default)(this).constructor;C=Reflect.construct(c,arguments,_)}else C=c.apply(this,arguments);return(0,d.default)(this,C)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=m(a),l=m(l),u=m(u),d=m(d),p=m(p);var y=function(v){(0,u.default)(C,v);var x=k(C);function C(){return(0,a.default)(this,C),x.apply(this,arguments)}return(0,l.default)(C,[{key:"methods",get:function(){var c=this;return{emit:function(_,h){return c.emit(_,h)},off:function(_,h){return c.off(_,h)},on:function(_,h){return c.on(_,h)}}}},{key:"on",value:function(c,_){this.eventsDispatcher.on(c,_)}},{key:"emit",value:function(c,_){this.eventsDispatcher.emit(c,_)}},{key:"off",value:function(c,_){this.eventsDispatcher.off(c,_)}}]),C}((g=m(g)).default);s.default=y,y.displayName="EventsAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(54),e(8),e(9)],(o=typeof(i=function(s,a,l,u,d,p,g,m,k){"use strict";var y=e(1);function v(C){var c=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_){return!1}}();return function(){var _,h=(0,p.default)(C);if(c){var b=(0,p.default)(this).constructor;_=Reflect.construct(h,arguments,b)}else _=h.apply(this,arguments);return(0,d.default)(this,_)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=y(a),l=y(l),u=y(u),d=y(d),p=y(p),g=y(g);var x=function(C){(0,u.default)(_,C);var c=v(_);function _(){return(0,a.default)(this,_),c.apply(this,arguments)}return(0,l.default)(_,[{key:"methods",get:function(){return{t:function(){(0,m.logLabeled)("I18n.t() method can be accessed only from Tools","warn")}}}},{key:"getMethodsForTool",value:function(h){return Object.assign(this.methods,{t:function(b){return g.default.t(_.getNamespace(h),b)}})}}],[{key:"getNamespace",value:function(h){return h.isTune()?"blockTunes.".concat(h.name):"tools.".concat(h.name)}}]),_}((k=y(k)).default);s.default=x,x.displayName="I18nAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(s,a,l,u,d,p,g){"use strict";var m=e(1);function k(v){var x=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,c=(0,p.default)(v);if(x){var _=(0,p.default)(this).constructor;C=Reflect.construct(c,arguments,_)}else C=c.apply(this,arguments);return(0,d.default)(this,C)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=m(a),l=m(l),u=m(u),d=m(d),p=m(p);var y=function(v){(0,u.default)(C,v);var x=k(C);function C(){return(0,a.default)(this,C),x.apply(this,arguments)}return(0,l.default)(C,[{key:"methods",get:function(){var c=this;return{close:function(){return c.close()},open:function(){return c.open()}}}},{key:"open",value:function(){this.Editor.InlineToolbar.tryToShow()}},{key:"close",value:function(){this.Editor.InlineToolbar.close()}}]),C}((g=m(g)).default);s.default=y,y.displayName="InlineToolbarAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(s,a,l,u,d,p,g){"use strict";var m=e(1);function k(v){var x=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,c=(0,p.default)(v);if(x){var _=(0,p.default)(this).constructor;C=Reflect.construct(c,arguments,_)}else C=c.apply(this,arguments);return(0,d.default)(this,C)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=m(a),l=m(l),u=m(u),d=m(d),p=m(p);var y=function(v){(0,u.default)(C,v);var x=k(C);function C(){return(0,a.default)(this,C),x.apply(this,arguments)}return(0,l.default)(C,[{key:"methods",get:function(){var c=this;return{on:function(_,h,b,M){return c.on(_,h,b,M)},off:function(_,h,b,M){return c.off(_,h,b,M)},offById:function(_){return c.offById(_)}}}},{key:"on",value:function(c,_,h,b){return this.listeners.on(c,_,h,b)}},{key:"off",value:function(c,_,h,b){this.listeners.off(c,_,h,b)}},{key:"offById",value:function(c){this.listeners.offById(c)}}]),C}((g=m(g)).default);s.default=y,y.displayName="ListenersAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(378),e(9)],(o=typeof(i=function(s,a,l,u,d,p,g,m){"use strict";var k=e(1);function y(x){var C=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}();return function(){var c,_=(0,p.default)(x);if(C){var h=(0,p.default)(this).constructor;c=Reflect.construct(_,arguments,h)}else c=_.apply(this,arguments);return(0,d.default)(this,c)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=k(a),l=k(l),u=k(u),d=k(d),p=k(p),g=k(g);var v=function(x){(0,u.default)(c,x);var C=y(c);function c(_){var h,b=_.config,M=_.eventsDispatcher;return(0,a.default)(this,c),(h=C.call(this,{config:b,eventsDispatcher:M})).notifier=new g.default,h}return(0,l.default)(c,[{key:"methods",get:function(){var _=this;return{show:function(h){return _.show(h)}}}},{key:"show",value:function(_){return this.notifier.show(_)}}]),c}((m=k(m)).default);s.default=v,v.displayName="NotifierAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(s,a,l,u,d,p,g){"use strict";var m=e(1);function k(v){var x=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,c=(0,p.default)(v);if(x){var _=(0,p.default)(this).constructor;C=Reflect.construct(c,arguments,_)}else C=c.apply(this,arguments);return(0,d.default)(this,C)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=m(a),l=m(l),u=m(u),d=m(d),p=m(p);var y=function(v){(0,u.default)(C,v);var x=k(C);function C(){return(0,a.default)(this,C),x.apply(this,arguments)}return(0,l.default)(C,[{key:"methods",get:function(){var c=this;return{toggle:function(_){return c.toggle(_)},get isEnabled(){return c.isEnabled}}}},{key:"toggle",value:function(c){return this.Editor.ReadOnly.toggle(c)}},{key:"isEnabled",get:function(){return this.Editor.ReadOnly.isEnabled}}]),C}((g=m(g)).default);s.default=y,y.displayName="ReadOnlyAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(66)],(o=typeof(i=function(s,a,l,u,d,p,g,m){"use strict";var k=e(1);function y(x){var C=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}();return function(){var c,_=(0,p.default)(x);if(C){var h=(0,p.default)(this).constructor;c=Reflect.construct(_,arguments,h)}else c=_.apply(this,arguments);return(0,d.default)(this,c)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=k(a),l=k(l),u=k(u),d=k(d),p=k(p);var v=function(x){(0,u.default)(c,x);var C=y(c);function c(){return(0,a.default)(this,c),C.apply(this,arguments)}return(0,l.default)(c,[{key:"methods",get:function(){var _=this;return{clean:function(h,b){return _.clean(h,b)}}}},{key:"clean",value:function(_,h){return(0,m.clean)(_,h)}}]),c}((g=k(g)).default);s.default=v,v.displayName="SanitizerAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(8),e(9)],(o=typeof(i=function(a,l,u,d,p,g,m,k){"use strict";var y=e(1);function v(c){if(typeof WeakMap!="function")return null;var _=new WeakMap,h=new WeakMap;return(v=function(b){return b?h:_})(c)}function x(c){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(h){return!1}}();return function(){var h,b=(0,g.default)(c);if(_){var M=(0,g.default)(this).constructor;h=Reflect.construct(b,arguments,M)}else h=b.apply(this,arguments);return(0,p.default)(this,h)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=y(l),u=y(u),d=y(d),p=y(p),g=y(g),m=function(c,_){if(!_&&c&&c.__esModule)return c;if(c===null||s(c)!=="object"&&typeof c!="function")return{default:c};var h=v(_);if(h&&h.has(c))return h.get(c);var b={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in c)if(E!=="default"&&Object.prototype.hasOwnProperty.call(c,E)){var w=M?Object.getOwnPropertyDescriptor(c,E):null;w&&(w.get||w.set)?Object.defineProperty(b,E,w):b[E]=c[E]}return b.default=c,h&&h.set(c,b),b}(m);var C=function(c){(0,d.default)(h,c);var _=x(h);function h(){return(0,l.default)(this,h),_.apply(this,arguments)}return(0,u.default)(h,[{key:"methods",get:function(){var b=this;return{save:function(){return b.save()}}}},{key:"save",value:function(){var b="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(m.logLabeled(b,"warn"),Promise.reject(new Error(b))):this.Editor.Saver.save()}}]),h}((k=y(k)).default);a.default=C,C.displayName="SaverAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(25),e(9)],(o=typeof(i=function(s,a,l,u,d,p,g,m){"use strict";var k=e(1);function y(x){var C=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}();return function(){var c,_=(0,p.default)(x);if(C){var h=(0,p.default)(this).constructor;c=Reflect.construct(_,arguments,h)}else c=_.apply(this,arguments);return(0,d.default)(this,c)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=k(a),l=k(l),u=k(u),d=k(d),p=k(p),g=k(g);var v=function(x){(0,u.default)(c,x);var C=y(c);function c(){return(0,a.default)(this,c),C.apply(this,arguments)}return(0,l.default)(c,[{key:"methods",get:function(){var _=this;return{findParentTag:function(h,b){return _.findParentTag(h,b)},expandToTag:function(h){return _.expandToTag(h)}}}},{key:"findParentTag",value:function(_,h){return new g.default().findParentTag(_,h)}},{key:"expandToTag",value:function(_){new g.default().expandToTag(_)}}]),c}((m=k(m)).default);s.default=v,v.displayName="SelectionAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(s,a,l,u,d,p,g){"use strict";var m=e(1);function k(v){var x=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,c=(0,p.default)(v);if(x){var _=(0,p.default)(this).constructor;C=Reflect.construct(c,arguments,_)}else C=c.apply(this,arguments);return(0,d.default)(this,C)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=m(a),l=m(l),u=m(u),d=m(d),p=m(p);var y=function(v){(0,u.default)(C,v);var x=k(C);function C(){return(0,a.default)(this,C),x.apply(this,arguments)}return(0,l.default)(C,[{key:"classes",get:function(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}]),C}((g=m(g)).default);s.default=y,y.displayName="StylesAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(8)],(o=typeof(i=function(a,l,u,d,p,g,m,k){"use strict";var y=e(1);function v(c){if(typeof WeakMap!="function")return null;var _=new WeakMap,h=new WeakMap;return(v=function(b){return b?h:_})(c)}function x(c){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(h){return!1}}();return function(){var h,b=(0,g.default)(c);if(_){var M=(0,g.default)(this).constructor;h=Reflect.construct(b,arguments,M)}else h=b.apply(this,arguments);return(0,p.default)(this,h)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=y(l),u=y(u),d=y(d),p=y(p),g=y(g),m=y(m),k=function(c,_){if(!_&&c&&c.__esModule)return c;if(c===null||s(c)!=="object"&&typeof c!="function")return{default:c};var h=v(_);if(h&&h.has(c))return h.get(c);var b={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in c)if(E!=="default"&&Object.prototype.hasOwnProperty.call(c,E)){var w=M?Object.getOwnPropertyDescriptor(c,E):null;w&&(w.get||w.set)?Object.defineProperty(b,E,w):b[E]=c[E]}return b.default=c,h&&h.set(c,b),b}(k);var C=function(c){(0,d.default)(h,c);var _=x(h);function h(){return(0,l.default)(this,h),_.apply(this,arguments)}return(0,u.default)(h,[{key:"methods",get:function(){var b=this;return{close:function(){return b.close()},open:function(){return b.open()},toggleBlockSettings:function(M){return b.toggleBlockSettings(M)}}}},{key:"open",value:function(){this.Editor.Toolbar.moveAndOpen()}},{key:"close",value:function(){this.Editor.Toolbar.close()}},{key:"toggleBlockSettings",value:function(b){this.Editor.BlockManager.currentBlockIndex!==-1?(b!=null?b:!this.Editor.BlockSettings.opened)?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close():k.logLabeled("Could't toggle the Toolbar because there is no block selected ","warn")}}]),h}(m.default);a.default=C,C.displayName="ToolbarAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(115)],(o=typeof(i=function(s,a,l,u,d,p,g,m){"use strict";var k=e(1);function y(x){var C=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}();return function(){var c,_=(0,p.default)(x);if(C){var h=(0,p.default)(this).constructor;c=Reflect.construct(_,arguments,h)}else c=_.apply(this,arguments);return(0,d.default)(this,c)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=k(a),l=k(l),u=k(u),d=k(d),p=k(p),g=k(g),m=k(m);var v=function(x){(0,u.default)(c,x);var C=y(c);function c(_){var h,b=_.config,M=_.eventsDispatcher;return(0,a.default)(this,c),(h=C.call(this,{config:b,eventsDispatcher:M})).tooltip=new m.default,h}return(0,l.default)(c,[{key:"destroy",value:function(){this.tooltip.destroy()}},{key:"methods",get:function(){var _=this;return{show:function(h,b,M){return _.show(h,b,M)},hide:function(){return _.hide()},onHover:function(h,b,M){return _.onHover(h,b,M)}}}},{key:"show",value:function(_,h,b){this.tooltip.show(_,h,b)}},{key:"hide",value:function(){this.tooltip.hide()}},{key:"onHover",value:function(_,h,b){this.tooltip.onHover(_,h,b)}}]),c}(g.default);s.default=v,v.displayName="TooltipAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(s,a,l,u,d,p,g){"use strict";var m=e(1);function k(v){var x=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,c=(0,p.default)(v);if(x){var _=(0,p.default)(this).constructor;C=Reflect.construct(c,arguments,_)}else C=c.apply(this,arguments);return(0,d.default)(this,C)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=m(a),l=m(l),u=m(u),d=m(d),p=m(p);var y=function(v){(0,u.default)(C,v);var x=k(C);function C(){return(0,a.default)(this,C),x.apply(this,arguments)}return(0,l.default)(C,[{key:"methods",get:function(){return{nodes:this.editorNodes}}},{key:"editorNodes",get:function(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}]),C}((g=m(g)).default);s.default=y,y.displayName="UiAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(8),e(25),e(67)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v){"use strict";var x=e(1);function C(h){if(typeof WeakMap!="function")return null;var b=new WeakMap,M=new WeakMap;return(C=function(E){return E?M:b})(h)}function c(h){var b=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(M){return!1}}();return function(){var M,E=(0,g.default)(h);if(b){var w=(0,g.default)(this).constructor;M=Reflect.construct(E,arguments,w)}else M=E.apply(this,arguments);return(0,p.default)(this,M)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=x(l),u=x(u),d=x(d),p=x(p),g=x(g),m=x(m),k=function(h,b){if(!b&&h&&h.__esModule)return h;if(h===null||s(h)!=="object"&&typeof h!="function")return{default:h};var M=C(b);if(M&&M.has(h))return M.get(h);var E={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in h)if(S!=="default"&&Object.prototype.hasOwnProperty.call(h,S)){var O=w?Object.getOwnPropertyDescriptor(h,S):null;O&&(O.get||O.set)?Object.defineProperty(E,S,O):E[S]=h[S]}return E.default=h,M&&M.set(h,E),E}(k),y=x(y),v=x(v);var _=function(h){(0,d.default)(M,h);var b=c(M);function M(){return(0,l.default)(this,M),b.apply(this,arguments)}return(0,u.default)(M,[{key:"keydown",value:function(E){switch(this.beforeKeydownProcessing(E),E.keyCode){case k.keyCodes.BACKSPACE:this.backspace(E);break;case k.keyCodes.ENTER:this.enter(E);break;case k.keyCodes.DOWN:case k.keyCodes.RIGHT:this.arrowRightAndDown(E);break;case k.keyCodes.UP:case k.keyCodes.LEFT:this.arrowLeftAndUp(E);break;case k.keyCodes.TAB:this.tabPressed(E)}}},{key:"beforeKeydownProcessing",value:function(E){this.needToolbarClosing(E)&&k.isPrintableKey(E.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||(this.Editor.BlockManager.clearFocused(),this.Editor.BlockSelection.clearSelection(E)))}},{key:"keyup",value:function(E){E.shiftKey||this.Editor.UI.checkEmptiness()}},{key:"tabPressed",value:function(E){this.Editor.BlockSelection.clearSelection(E);var w=this.Editor,S=w.BlockManager,O=w.InlineToolbar,B=w.ConversionToolbar,A=S.currentBlock;if(A){var R=A.isEmpty,T=A.tool.isDefault&&R,L=!R&&B.opened,P=!R&&!y.default.isCollapsed&&O.opened,D=!L&&!P;T?this.activateToolbox():D&&this.activateBlockSettings()}}},{key:"dragOver",value:function(E){this.Editor.BlockManager.getBlockByChildNode(E.target).dropTarget=!0}},{key:"dragLeave",value:function(E){this.Editor.BlockManager.getBlockByChildNode(E.target).dropTarget=!1}},{key:"handleCommandC",value:function(E){var w=this.Editor.BlockSelection;w.anyBlockSelected&&w.copySelectedBlocks(E)}},{key:"handleCommandX",value:function(E){var w=this.Editor,S=w.BlockSelection,O=w.BlockManager,B=w.Caret;S.anyBlockSelected&&S.copySelectedBlocks(E).then(function(){var A=O.removeSelectedBlocks(),R=O.insertDefaultBlockAtIndex(A,!0);B.setToBlock(R,B.positions.START),S.clearSelection(E)})}},{key:"enter",value:function(E){var w=this.Editor,S=w.BlockManager,O=w.UI;if(!S.currentBlock.tool.isLineBreaksEnabled&&!(O.someToolbarOpened&&O.someFlipperButtonFocused||E.shiftKey)){var B=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):B=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(B),this.Editor.Toolbar.moveAndOpen(B),E.preventDefault()}}},{key:"backspace",value:function(E){var w=this.Editor,S=w.BlockManager,O=w.BlockSelection,B=w.Caret,A=S.currentBlock,R=A.tool;if(A.selected||A.isEmpty&&A.currentInput===A.firstInput){E.preventDefault();var T=S.currentBlockIndex;return S.previousBlock&&S.previousBlock.inputs.length===0?S.removeBlock(T-1):S.removeBlock(),B.setToBlock(S.currentBlock,T?B.positions.END:B.positions.START),this.Editor.Toolbar.close(),void O.clearSelection(E)}if(!R.isLineBreaksEnabled||B.isAtStart){var L=S.currentBlockIndex===0;B.isAtStart&&y.default.isCollapsed&&A.currentInput===A.firstInput&&!L&&(E.preventDefault(),this.mergeBlocks())}}},{key:"mergeBlocks",value:function(){var E=this.Editor,w=E.BlockManager,S=E.Caret,O=E.Toolbar,B=w.previousBlock,A=w.currentBlock;if(A.name!==B.name||!B.mergeable)return B.inputs.length===0||B.isEmpty?(w.removeBlock(w.currentBlockIndex-1),S.setToBlock(w.currentBlock),void O.close()):void(S.navigatePrevious()&&O.close());S.createShadow(B.pluginsContent),w.mergeBlocks(B,A).then(function(){S.restoreCaret(B.pluginsContent),B.pluginsContent.normalize(),O.close()})}},{key:"arrowRightAndDown",value:function(E){var w=this,S=v.default.usedKeys.includes(E.keyCode)&&(!E.shiftKey||E.keyCode===k.keyCodes.TAB);if(!this.Editor.UI.someToolbarOpened||!S){this.Editor.BlockManager.clearFocused(),this.Editor.Toolbar.close();var O=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;E.shiftKey&&E.keyCode===k.keyCodes.DOWN&&O?this.Editor.CrossBlockSelection.toggleBlockSelectedState():((E.keyCode===k.keyCodes.DOWN||E.keyCode===k.keyCodes.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious())?E.preventDefault():k.delay(function(){w.Editor.BlockManager.currentBlock&&w.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(E))}}},{key:"arrowLeftAndUp",value:function(E){var w=this;if(this.Editor.UI.someToolbarOpened){if(v.default.usedKeys.includes(E.keyCode)&&(!E.shiftKey||E.keyCode===k.keyCodes.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.BlockManager.clearFocused(),this.Editor.Toolbar.close();var S=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;E.shiftKey&&E.keyCode===k.keyCodes.UP&&S?this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1):((E.keyCode===k.keyCodes.UP||E.keyCode===k.keyCodes.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext())?E.preventDefault():k.delay(function(){w.Editor.BlockManager.currentBlock&&w.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(E))}},{key:"needToolbarClosing",value:function(E){var w=E.keyCode===k.keyCodes.ENTER&&this.Editor.Toolbar.toolbox.opened,S=E.keyCode===k.keyCodes.ENTER&&this.Editor.BlockSettings.opened,O=E.keyCode===k.keyCodes.ENTER&&this.Editor.InlineToolbar.opened,B=E.keyCode===k.keyCodes.ENTER&&this.Editor.ConversionToolbar.opened,A=E.keyCode===k.keyCodes.TAB;return!(E.shiftKey||A||w||S||O||B)}},{key:"activateToolbox",value:function(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}},{key:"activateBlockSettings",value:function(){this.Editor.Toolbar.opened||(this.Editor.BlockManager.currentBlock.focused=!0,this.Editor.Toolbar.moveAndOpen()),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}]),M}(m.default);a.default=_,_.displayName="BlockEvents",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(20),e(21),e(2),e(3),e(5),e(6),e(4),e(61),e(9),e(19),e(8),e(383),e(113),e(384)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x,C,c,_,h){"use strict";var b=e(1);function M(O){if(typeof WeakMap!="function")return null;var B=new WeakMap,A=new WeakMap;return(M=function(R){return R?A:B})(O)}function E(O,B){if(!B&&O&&O.__esModule)return O;if(O===null||s(O)!=="object"&&typeof O!="function")return{default:O};var A=M(B);if(A&&A.has(O))return A.get(O);var R={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in O)if(L!=="default"&&Object.prototype.hasOwnProperty.call(O,L)){var P=T?Object.getOwnPropertyDescriptor(O,L):null;P&&(P.get||P.set)?Object.defineProperty(R,L,P):R[L]=O[L]}return R.default=O,A&&A.set(O,R),R}function w(O){var B=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(A){return!1}}();return function(){var A,R=(0,k.default)(O);if(B){var T=(0,k.default)(this).constructor;A=Reflect.construct(R,arguments,T)}else A=R.apply(this,arguments);return(0,m.default)(this,A)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=b(l),u=b(u),d=b(d),p=b(p),g=b(g),m=b(m),k=b(k),y=E(y),v=b(v),x=b(x),C=E(C),c=b(c),_=b(_);var S=function(O){(0,g.default)(T,O);var B,A,R=w(T);function T(){var L;return(0,d.default)(this,T),(L=R.apply(this,arguments))._currentBlockIndex=-1,L._blocks=null,L}return(0,p.default)(T,[{key:"currentBlockIndex",get:function(){return this._currentBlockIndex},set:function(L){this._blocks[this._currentBlockIndex]&&this._blocks[this._currentBlockIndex].willUnselect(),this._blocks[L]&&this._blocks[L].willSelect(),this._currentBlockIndex=L}},{key:"firstBlock",get:function(){return this._blocks[0]}},{key:"lastBlock",get:function(){return this._blocks[this._blocks.length-1]}},{key:"currentBlock",get:function(){return this._blocks[this.currentBlockIndex]},set:function(L){this.currentBlockIndex=this.getBlockIndex(L)}},{key:"nextBlock",get:function(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}},{key:"nextContentfulBlock",get:function(){return this.blocks.slice(this.currentBlockIndex+1).find(function(L){return!!L.inputs.length})}},{key:"previousContentfulBlock",get:function(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(function(L){return!!L.inputs.length})}},{key:"previousBlock",get:function(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}},{key:"blocks",get:function(){return this._blocks.array}},{key:"isEditorEmpty",get:function(){return this.blocks.every(function(L){return L.isEmpty})}},{key:"prepare",value:function(){var L=this,P=new c.default(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(P,{set:c.default.set,get:c.default.get}),this.listeners.on(document,"copy",function(D){return L.Editor.BlockEvents.handleCommandC(D)})}},{key:"toggleReadOnly",value:function(L){L?this.disableModuleBindings():this.enableModuleBindings()}},{key:"composeBlock",value:function(L){var P=L.tool,D=L.data,H=D===void 0?{}:D,j=L.id,F=j===void 0?void 0:j,K=L.tunes,q=K===void 0?{}:K,W=this.Editor.ReadOnly.isEnabled,Y=this.Editor.Tools.blockTools.get(P),Z=new y.default({id:F,data:H,tool:Y,api:this.Editor.API,readOnly:W,tunesData:q});return W||this.bindBlockEvents(Z),Z}},{key:"insert",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=L.id,D=P===void 0?void 0:P,H=L.tool,j=H===void 0?this.config.defaultBlock:H,F=L.data,K=F===void 0?{}:F,q=L.index,W=L.needToFocus,Y=W===void 0||W,Z=L.replace,X=Z!==void 0&&Z,Q=L.tunes,ue=Q===void 0?{}:Q,ce=q;ce===void 0&&(ce=this.currentBlockIndex+(X?0:1));var ne=this.composeBlock({id:D,tool:j,data:K,tunes:ue});return X&&this.blockDidMutated(h.BlockMutationType.Removed,this.getBlockByIndex(ce),{index:ce}),this._blocks.insert(ce,ne,X),this.blockDidMutated(h.BlockMutationType.Added,ne,{index:ce}),Y?this.currentBlockIndex=ce:ce<=this.currentBlockIndex&&this.currentBlockIndex++,ne}},{key:"replace",value:function(L){var P=L.tool,D=P===void 0?this.config.defaultBlock:P,H=L.data,j=H===void 0?{}:H;return this.insert({tool:D,data:j,index:this.currentBlockIndex,replace:!0})}},{key:"paste",value:function(L,P){var D=arguments.length>2&&arguments[2]!==void 0&&arguments[2],H=this.insert({tool:L,replace:D});try{H.call(y.BlockToolAPI.ON_PASTE,P)}catch(j){C.log("".concat(L,": onPaste callback call is failed"),"error",j)}return H}},{key:"insertDefaultBlockAtIndex",value:function(L){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],D=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[L]=D,this.blockDidMutated(h.BlockMutationType.Added,D,{index:L}),P?this.currentBlockIndex=L:L<=this.currentBlockIndex&&this.currentBlockIndex++,D}},{key:"insertAtEnd",value:function(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}},{key:"mergeBlocks",value:(A=(0,u.default)(l.default.mark(function L(P,D){var H,j;return l.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(H=this._blocks.indexOf(D),!D.isEmpty){F.next=3;break}return F.abrupt("return");case 3:return F.next=5,D.data;case 5:if(j=F.sent,C.isEmpty(j)){F.next=9;break}return F.next=9,P.mergeWith(j);case 9:this.removeBlock(H),this.currentBlockIndex=this._blocks.indexOf(P);case 11:case"end":return F.stop()}},L,this)})),function(L,P){return A.apply(this,arguments)})},{key:"removeBlock",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.currentBlockIndex;if(!this.validateIndex(L))throw new Error("Can't find a Block to remove");var P=this._blocks[L];P.destroy(),this._blocks.remove(L),this.blockDidMutated(h.BlockMutationType.Removed,P,{index:L}),this.currentBlockIndex>=L&&this.currentBlockIndex--,this.blocks.length?L===0&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,this.insert())}},{key:"removeSelectedBlocks",value:function(){for(var L,P=this.blocks.length-1;P>=0;P--)this.blocks[P].selected&&(this.removeBlock(P),L=P);return L}},{key:"removeAllBlocks",value:function(){for(var L=this.blocks.length-1;L>=0;L--)this._blocks.remove(L);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}},{key:"split",value:function(){var L=this.Editor.Caret.extractFragmentFromCaretPosition(),P=x.default.make("div");P.appendChild(L);var D={text:x.default.isEmpty(P)?"":P.innerHTML};return this.insert({data:D})}},{key:"getBlockByIndex",value:function(L){return L===-1&&(L=this._blocks.length-1),this._blocks[L]}},{key:"getBlockIndex",value:function(L){return this._blocks.indexOf(L)}},{key:"getBlockById",value:function(L){return this._blocks.array.find(function(P){return P.id===L})}},{key:"getBlock",value:function(L){x.default.isElement(L)||(L=L.parentNode);var P=this._blocks.nodes,D=L.closest(".".concat(y.default.CSS.wrapper)),H=P.indexOf(D);if(H>=0)return this._blocks[H]}},{key:"highlightCurrentNode",value:function(){this.clearFocused(),this.currentBlock.focused=!0}},{key:"clearFocused",value:function(){this.blocks.forEach(function(L){L.focused=!1})}},{key:"setCurrentBlockByChildNode",value:function(L){x.default.isElement(L)||(L=L.parentNode);var P=L.closest(".".concat(y.default.CSS.wrapper));if(P){var D=P.closest(".".concat(this.Editor.UI.CSS.editorWrapper));if(D!=null&&D.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(P),this.currentBlock.updateCurrentInput(),this.currentBlock}}},{key:"getBlockByChildNode",value:function(L){x.default.isElement(L)||(L=L.parentNode);var P=L.closest(".".concat(y.default.CSS.wrapper));return this.blocks.find(function(D){return D.holder===P})}},{key:"swap",value:function(L,P){this._blocks.swap(L,P),this.currentBlockIndex=P}},{key:"move",value:function(L){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.currentBlockIndex;isNaN(L)||isNaN(P)?C.log("Warning during 'move' call: incorrect indices provided.","warn"):this.validateIndex(L)&&this.validateIndex(P)?(this._blocks.move(L,P),this.currentBlockIndex=L,this.blockDidMutated(h.BlockMutationType.Moved,this.currentBlock,{fromIndex:P,toIndex:L})):C.log("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn")}},{key:"dropPointer",value:function(){this.currentBlockIndex=-1,this.clearFocused()}},{key:"clear",value:function(){var L=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._blocks.removeAll(),this.dropPointer(),L&&this.insert(),this.Editor.UI.checkEmptiness()}},{key:"destroy",value:(B=(0,u.default)(l.default.mark(function L(){return l.default.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,Promise.all(this.blocks.map(function(D){return D.destroy()}));case 2:case"end":return P.stop()}},L,this)})),function(){return B.apply(this,arguments)})},{key:"bindBlockEvents",value:function(L){var P=this,D=this.Editor.BlockEvents;this.readOnlyMutableListeners.on(L.holder,"keydown",function(H){D.keydown(H)}),this.readOnlyMutableListeners.on(L.holder,"keyup",function(H){D.keyup(H)}),this.readOnlyMutableListeners.on(L.holder,"dragover",function(H){D.dragOver(H)}),this.readOnlyMutableListeners.on(L.holder,"dragleave",function(H){D.dragLeave(H)}),L.on("didMutated",function(H){return P.blockDidMutated(h.BlockMutationType.Changed,H,{index:P.getBlockIndex(H)})})}},{key:"disableModuleBindings",value:function(){this.readOnlyMutableListeners.clearAll()}},{key:"enableModuleBindings",value:function(){var L=this;this.readOnlyMutableListeners.on(document,"cut",function(P){return L.Editor.BlockEvents.handleCommandX(P)}),this.blocks.forEach(function(P){L.bindBlockEvents(P)})}},{key:"validateIndex",value:function(L){return!(L<0||L>=this._blocks.length)}},{key:"blockDidMutated",value:function(L,P){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},H=new CustomEvent(L,{detail:Object.assign({target:new _.default(P)},D)});return this.Editor.ModificationsObserver.onChange(H),P}}]),T}(v.default);a.default=S,S.displayName="BlockManager",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(8),e(19),e(116),e(25),e(66)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x,C){"use strict";var c=e(1);function _(M){if(typeof WeakMap!="function")return null;var E=new WeakMap,w=new WeakMap;return(_=function(S){return S?w:E})(M)}function h(M){var E=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(w){return!1}}();return function(){var w,S=(0,g.default)(M);if(E){var O=(0,g.default)(this).constructor;w=Reflect.construct(S,arguments,O)}else w=S.apply(this,arguments);return(0,p.default)(this,w)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=c(l),u=c(u),d=c(d),p=c(p),g=c(g),m=c(m),k=function(M,E){if(!E&&M&&M.__esModule)return M;if(M===null||s(M)!=="object"&&typeof M!="function")return{default:M};var w=_(E);if(w&&w.has(M))return w.get(M);var S={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in M)if(B!=="default"&&Object.prototype.hasOwnProperty.call(M,B)){var A=O?Object.getOwnPropertyDescriptor(M,B):null;A&&(A.get||A.set)?Object.defineProperty(S,B,A):S[B]=M[B]}return S.default=M,w&&w.set(M,S),S}(k),y=c(y),v=c(v),x=c(x);var b=function(M){(0,d.default)(w,M);var E=h(w);function w(){var S;return(0,l.default)(this,w),(S=E.apply(this,arguments)).anyBlockSelectedCache=null,S.needToSelectAll=!1,S.nativeInputSelected=!1,S.readyToBlockSelection=!1,S}return(0,u.default)(w,[{key:"sanitizerConfig",get:function(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}},{key:"allBlocksSelected",get:function(){return this.Editor.BlockManager.blocks.every(function(S){return S.selected===!0})},set:function(S){this.Editor.BlockManager.blocks.forEach(function(O){O.selected=S}),this.clearCache()}},{key:"anyBlockSelected",get:function(){var S=this.Editor.BlockManager;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=S.blocks.some(function(O){return O.selected===!0})),this.anyBlockSelectedCache}},{key:"selectedBlocks",get:function(){return this.Editor.BlockManager.blocks.filter(function(S){return S.selected})}},{key:"prepare",value:function(){var S=this;this.selection=new x.default,v.default.add({name:"CMD+A",handler:function(O){var B=S.Editor,A=B.BlockManager;if(B.ReadOnly.isEnabled)return O.preventDefault(),void S.selectAllBlocks();A.currentBlock&&S.handleCommandA(O)},on:this.Editor.UI.nodes.redactor})}},{key:"toggleReadOnly",value:function(){x.default.get().removeAllRanges(),this.allBlocksSelected=!1}},{key:"unSelectBlockByIndex",value:function(S){var O=this.Editor.BlockManager;(isNaN(S)?O.currentBlock:O.getBlockByIndex(S)).selected=!1,this.clearCache()}},{key:"clearSelection",value:function(S){var O=arguments.length>1&&arguments[1]!==void 0&&arguments[1],B=this.Editor,A=B.BlockManager,R=B.Caret,T=B.RectangleSelection;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;var L=S&&S instanceof KeyboardEvent,P=L&&k.isPrintableKey(S.keyCode);if(this.anyBlockSelected&&L&&P&&!x.default.isSelectionExists){var D=A.removeSelectedBlocks();A.insertDefaultBlockAtIndex(D,!0),R.setToBlock(A.currentBlock),k.delay(function(){var H=S.key;R.insertContentAtCaretPosition(H.length>1?"":H)},20)()}this.Editor.CrossBlockSelection.clear(S),this.anyBlockSelected&&!T.isRectActivated()?(O&&this.selection.restore(),this.allBlocksSelected=!1):this.Editor.RectangleSelection.clearSelection()}},{key:"copySelectedBlocks",value:function(S){var O=this;S.preventDefault();var B=y.default.make("div");this.selectedBlocks.forEach(function(T){var L=(0,C.clean)(T.holder.innerHTML,O.sanitizerConfig),P=y.default.make("p");P.innerHTML=L,B.appendChild(P)});var A=Array.from(B.childNodes).map(function(T){return T.textContent}).join(`

`),R=B.innerHTML;return S.clipboardData.setData("text/plain",A),S.clipboardData.setData("text/html",R),Promise.all(this.selectedBlocks.map(function(T){return T.save()})).then(function(T){try{S.clipboardData.setData(O.Editor.Paste.MIME_TYPE,JSON.stringify(T))}catch(L){}})}},{key:"selectBlockByIndex",value:function(S){var O,B=this.Editor.BlockManager;B.clearFocused(),O=isNaN(S)?B.currentBlock:B.getBlockByIndex(S),this.selection.save(),x.default.get().removeAllRanges(),O.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}},{key:"clearCache",value:function(){this.anyBlockSelectedCache=null}},{key:"destroy",value:function(){v.default.remove(this.Editor.UI.nodes.redactor,"CMD+A")}},{key:"handleCommandA",value:function(S){if(this.Editor.RectangleSelection.clearSelection(),!y.default.isNativeInput(S.target)||this.readyToBlockSelection){var O=this.Editor.BlockManager.getBlock(S.target).inputs;O.length>1&&!this.readyToBlockSelection?this.readyToBlockSelection=!0:O.length!==1||this.needToSelectAll?this.needToSelectAll?(S.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(S.preventDefault(),this.selectBlockByIndex(),this.needToSelectAll=!0):this.needToSelectAll=!0}else this.readyToBlockSelection=!0}},{key:"selectAllBlocks",value:function(){this.selection.save(),x.default.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}]),w}(m.default);a.default=b,b.displayName="BlockSelection",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(25),e(9),e(19),e(8)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v){"use strict";var x=e(1);function C(h){if(typeof WeakMap!="function")return null;var b=new WeakMap,M=new WeakMap;return(C=function(E){return E?M:b})(h)}function c(h){var b=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(M){return!1}}();return function(){var M,E=(0,g.default)(h);if(b){var w=(0,g.default)(this).constructor;M=Reflect.construct(E,arguments,w)}else M=E.apply(this,arguments);return(0,p.default)(this,M)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=x(l),u=x(u),d=x(d),p=x(p),g=x(g),m=x(m),k=x(k),y=x(y),v=function(h,b){if(!b&&h&&h.__esModule)return h;if(h===null||s(h)!=="object"&&typeof h!="function")return{default:h};var M=C(b);if(M&&M.has(h))return M.get(h);var E={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in h)if(S!=="default"&&Object.prototype.hasOwnProperty.call(h,S)){var O=w?Object.getOwnPropertyDescriptor(h,S):null;O&&(O.get||O.set)?Object.defineProperty(E,S,O):E[S]=h[S]}return E.default=h,M&&M.set(h,E),E}(v);var _=function(h){(0,d.default)(M,h);var b=c(M);function M(){return(0,l.default)(this,M),b.apply(this,arguments)}return(0,u.default)(M,[{key:"positions",get:function(){return{START:"start",END:"end",DEFAULT:"default"}}},{key:"isAtStart",get:function(){var E=m.default.get(),w=y.default.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput),S=E.focusNode;if(y.default.isNativeInput(w))return w.selectionEnd===0;if(!E.anchorNode)return!1;var O=S.textContent.search(/\S/);O===-1&&(O=0);var B=E.focusOffset;return S.nodeType!==Node.TEXT_NODE&&S.childNodes.length&&(S.childNodes[B]?(S=S.childNodes[B],B=0):B=(S=S.childNodes[B-1]).textContent.length),!(!y.default.isLineBreakTag(w)&&!y.default.isEmpty(w)||!this.getHigherLevelSiblings(S,"left").every(function(A){var R=y.default.isLineBreakTag(A),T=A.children.length===1&&y.default.isLineBreakTag(A.children[0]),L=R||T;return y.default.isEmpty(A)&&!L})||B!==O)||w===null||S===w&&B<=O}},{key:"isAtEnd",get:function(){var E=m.default.get(),w=E.focusNode,S=y.default.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput,!0);if(y.default.isNativeInput(S))return S.selectionEnd===S.value.length;if(!E.focusNode)return!1;var O=E.focusOffset;if(w.nodeType!==Node.TEXT_NODE&&w.childNodes.length&&(w.childNodes[O-1]?O=(w=w.childNodes[O-1]).textContent.length:(w=w.childNodes[0],O=0)),y.default.isLineBreakTag(S)||y.default.isEmpty(S)){var B=this.getHigherLevelSiblings(w,"right");if(B.every(function(R,T){return T===B.length-1&&y.default.isLineBreakTag(R)||y.default.isEmpty(R)&&!y.default.isLineBreakTag(R)})&&O===w.textContent.length)return!0}var A=S.textContent.replace(/\s+$/,"");return w===S&&O>=A.length}},{key:"setToBlock",value:function(E){var w,S=this,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.positions.DEFAULT,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,A=this.Editor.BlockManager;switch(O){case this.positions.START:w=E.firstInput;break;case this.positions.END:w=E.lastInput;break;default:w=E.currentInput}if(w){var R=y.default.getDeepestNode(w,O===this.positions.END),T=y.default.getContentLength(R);switch(!0){case O===this.positions.START:B=0;break;case O===this.positions.END:case B>T:B=T}v.delay(function(){S.set(R,B)},20)(),A.setCurrentBlockByChildNode(E.holder),A.currentBlock.currentInput=w}}},{key:"setToInput",value:function(E){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.positions.DEFAULT,S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,O=this.Editor.BlockManager.currentBlock,B=y.default.getDeepestNode(E);switch(w){case this.positions.START:this.set(B,0);break;case this.positions.END:this.set(B,y.default.getContentLength(B));break;default:S&&this.set(B,S)}O.currentInput=E}},{key:"set",value:function(E){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=m.default.setCursor(E,w),O=S.top,B=S.bottom,A=window,R=A.innerHeight;O<0&&window.scrollBy(0,O),B>R&&window.scrollBy(0,B-R)}},{key:"setToTheLastBlock",value:function(){var E=this.Editor.BlockManager.lastBlock;if(E)if(E.tool.isDefault&&E.isEmpty)this.setToBlock(E);else{var w=this.Editor.BlockManager.insertAtEnd();this.setToBlock(w)}}},{key:"extractFragmentFromCaretPosition",value:function(){var E=m.default.get();if(E.rangeCount){var w=E.getRangeAt(0),S=this.Editor.BlockManager.currentBlock.currentInput;if(w.deleteContents(),S){if(y.default.isNativeInput(S)){var O=S,B=document.createDocumentFragment(),A=O.value.substring(0,O.selectionStart),R=O.value.substring(O.selectionStart);return B.textContent=R,O.value=A,B}var T=w.cloneRange();return T.selectNodeContents(S),T.setStart(w.endContainer,w.endOffset),T.extractContents()}}}},{key:"navigateNext",value:function(){var E=this.Editor.BlockManager,w=E.currentBlock,S=E.nextContentfulBlock,O=w.nextInput,B=this.isAtEnd,A=S;if(!A&&!O){if(w.tool.isDefault||!B)return!1;A=E.insertAtEnd()}return!!B&&(O?this.setToInput(O,this.positions.START):this.setToBlock(A,this.positions.START),!0)}},{key:"navigatePrevious",value:function(){var E=this.Editor.BlockManager,w=E.currentBlock,S=E.previousContentfulBlock;if(!w)return!1;var O=w.previousInput;return!(!S&&!O||!this.isAtStart||(O?this.setToInput(O,this.positions.END):this.setToBlock(S,this.positions.END),0))}},{key:"createShadow",value:function(E){var w=document.createElement("span");w.classList.add(M.CSS.shadowCaret),E.insertAdjacentElement("beforeend",w)}},{key:"restoreCaret",value:function(E){var w=E.querySelector(".".concat(M.CSS.shadowCaret));w&&(new m.default().expandToTag(w),setTimeout(function(){var S=document.createRange();S.selectNode(w),S.extractContents()},50))}},{key:"insertContentAtCaretPosition",value:function(E){var w=document.createDocumentFragment(),S=document.createElement("div"),O=m.default.get(),B=m.default.range;S.innerHTML=E,Array.from(S.childNodes).forEach(function(T){return w.appendChild(T)}),w.childNodes.length===0&&w.appendChild(new Text);var A=w.lastChild;B.deleteContents(),B.insertNode(w);var R=document.createRange();R.setStart(A,A.textContent.length),O.removeAllRanges(),O.addRange(R)}},{key:"getHigherLevelSiblings",value:function(E,w){for(var S=E,O=[];S.parentNode&&S.parentNode.contentEditable!=="true";)S=S.parentNode;for(var B=w==="left"?"previousSibling":"nextSibling";S[B];)S=S[B],O.push(S);return O}}],[{key:"CSS",get:function(){return{shadowCaret:"cdx-shadow-caret"}}}]),M}(k.default);a.default=_,_.displayName="Caret",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(20),e(21),e(2),e(3),e(5),e(6),e(4),e(9),e(25),e(8)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x){"use strict";var C=e(1);function c(b){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(c=function(w){return w?E:M})(b)}function _(b){var M=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(E){return!1}}();return function(){var E,w=(0,k.default)(b);if(M){var S=(0,k.default)(this).constructor;E=Reflect.construct(w,arguments,S)}else E=w.apply(this,arguments);return(0,m.default)(this,E)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=C(l),u=C(u),d=C(d),p=C(p),g=C(g),m=C(m),k=C(k),y=C(y),v=C(v),x=function(b,M){if(!M&&b&&b.__esModule)return b;if(b===null||s(b)!=="object"&&typeof b!="function")return{default:b};var E=c(M);if(E&&E.has(b))return E.get(b);var w={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in b)if(O!=="default"&&Object.prototype.hasOwnProperty.call(b,O)){var B=S?Object.getOwnPropertyDescriptor(b,O):null;B&&(B.get||B.set)?Object.defineProperty(w,O,B):w[O]=b[O]}return w.default=b,E&&E.set(b,w),w}(x);var h=function(b){(0,g.default)(w,b);var M,E=_(w);function w(){var S;return(0,d.default)(this,w),(S=E.apply(this,arguments)).onMouseUp=function(){S.listeners.off(document,"mouseover",S.onMouseOver),S.listeners.off(document,"mouseup",S.onMouseUp)},S.onMouseOver=function(O){var B=S.Editor,A=B.BlockManager,R=B.BlockSelection,T=A.getBlockByChildNode(O.relatedTarget)||S.lastSelectedBlock,L=A.getBlockByChildNode(O.target);if(T&&L&&L!==T){if(T===S.firstSelectedBlock)return v.default.get().removeAllRanges(),T.selected=!0,L.selected=!0,void R.clearCache();if(L===S.firstSelectedBlock)return T.selected=!1,L.selected=!1,void R.clearCache();S.Editor.InlineToolbar.close(),S.toggleBlocksSelectedState(T,L),S.lastSelectedBlock=L}},S}return(0,p.default)(w,[{key:"prepare",value:(M=(0,u.default)(l.default.mark(function S(){var O=this;return l.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:this.listeners.on(document,"mousedown",function(A){O.enableCrossBlockSelection(A)});case 1:case"end":return B.stop()}},S,this)})),function(){return M.apply(this,arguments)})},{key:"watchSelection",value:function(S){if(S.button===x.mouseButtons.LEFT){var O=this.Editor.BlockManager;this.firstSelectedBlock=O.getBlock(S.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}}},{key:"isCrossBlockSelectionStarted",get:function(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}},{key:"toggleBlockSelectedState",value:function(){var S=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],O=this.Editor,B=O.BlockManager,A=O.BlockSelection;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=B.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,A.clearCache(),v.default.get().removeAllRanges());var R=B.blocks.indexOf(this.lastSelectedBlock)+(S?1:-1),T=B.blocks[R];T&&(this.lastSelectedBlock.selected!==T.selected?(T.selected=!0,A.clearCache()):(this.lastSelectedBlock.selected=!1,A.clearCache()),this.lastSelectedBlock=T,this.Editor.InlineToolbar.close(),T.holder.scrollIntoView({block:"nearest"}))}},{key:"clear",value:function(S){var O=this.Editor,B=O.BlockManager,A=O.BlockSelection,R=O.Caret,T=B.blocks.indexOf(this.firstSelectedBlock),L=B.blocks.indexOf(this.lastSelectedBlock);if(A.anyBlockSelected&&T>-1&&L>-1)if(S&&S instanceof KeyboardEvent)switch(S.keyCode){case x.keyCodes.DOWN:case x.keyCodes.RIGHT:R.setToBlock(B.blocks[Math.max(T,L)],R.positions.END);break;case x.keyCodes.UP:case x.keyCodes.LEFT:R.setToBlock(B.blocks[Math.min(T,L)],R.positions.START);break;default:R.setToBlock(B.blocks[Math.max(T,L)],R.positions.END)}else R.setToBlock(B.blocks[Math.max(T,L)],R.positions.END);this.firstSelectedBlock=this.lastSelectedBlock=null}},{key:"enableCrossBlockSelection",value:function(S){var O=this.Editor.UI;v.default.isCollapsed||this.Editor.BlockSelection.clearSelection(S),O.nodes.redactor.contains(S.target)?this.watchSelection(S):this.Editor.BlockSelection.clearSelection(S)}},{key:"toggleBlocksSelectedState",value:function(S,O){for(var B=this.Editor,A=B.BlockManager,R=B.BlockSelection,T=A.blocks.indexOf(S),L=A.blocks.indexOf(O),P=S.selected!==O.selected,D=Math.min(T,L);D<=Math.max(T,L);D++){var H=A.blocks[D];H!==this.firstSelectedBlock&&H!==(P?S:O)&&(A.blocks[D].selected=!A.blocks[D].selected,R.clearCache())}}}]),w}(y.default);a.default=h,h.displayName="CrossBlockSelection",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(20),e(21),e(2),e(3),e(5),e(6),e(4),e(25),e(9)],(o=typeof(i=function(s,a,l,u,d,p,g,m,k,y){"use strict";var v=e(1);function x(c){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(h){return!1}}();return function(){var h,b=(0,m.default)(c);if(_){var M=(0,m.default)(this).constructor;h=Reflect.construct(b,arguments,M)}else h=b.apply(this,arguments);return(0,g.default)(this,h)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=v(a),l=v(l),u=v(u),d=v(d),p=v(p),g=v(g),m=v(m),k=v(k);var C=function(c){(0,p.default)(b,c);var _,h=x(b);function b(){var M;return(0,u.default)(this,b),(M=h.apply(this,arguments)).isStartedAtEditor=!1,M}return(0,d.default)(b,[{key:"toggleReadOnly",value:function(M){M?this.disableModuleBindings():this.enableModuleBindings()}},{key:"enableModuleBindings",value:function(){var M=this,E=this.Editor.UI;this.readOnlyMutableListeners.on(E.nodes.holder,"drop",function(){var w=(0,l.default)(a.default.mark(function S(O){return a.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,M.processDrop(O);case 2:case"end":return B.stop()}},S)}));return function(S){return w.apply(this,arguments)}}(),!0),this.readOnlyMutableListeners.on(E.nodes.holder,"dragstart",function(){M.processDragStart()}),this.readOnlyMutableListeners.on(E.nodes.holder,"dragover",function(w){M.processDragOver(w)},!0)}},{key:"disableModuleBindings",value:function(){this.readOnlyMutableListeners.clearAll()}},{key:"processDrop",value:(_=(0,l.default)(a.default.mark(function M(E){var w,S,O,B,A,R;return a.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return w=this.Editor,S=w.BlockManager,O=w.Caret,B=w.Paste,E.preventDefault(),S.blocks.forEach(function(L){L.dropTarget=!1}),k.default.isAtEditor&&!k.default.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1,(A=S.setCurrentBlockByChildNode(E.target))?this.Editor.Caret.setToBlock(A,O.positions.END):(R=S.setCurrentBlockByChildNode(S.lastBlock.holder),this.Editor.Caret.setToBlock(R,O.positions.END)),T.next=9,B.processDataTransfer(E.dataTransfer,!0);case 9:case"end":return T.stop()}},M,this)})),function(M){return _.apply(this,arguments)})},{key:"processDragStart",value:function(){k.default.isAtEditor&&!k.default.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}},{key:"processDragOver",value:function(M){M.preventDefault()}}]),b}((y=v(y)).default);s.default=C,C.displayName="DragNDrop",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(8)],(o=typeof(i=function(a,l,u,d,p,g,m,k){"use strict";var y=e(1);function v(c){if(typeof WeakMap!="function")return null;var _=new WeakMap,h=new WeakMap;return(v=function(b){return b?h:_})(c)}function x(c){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(h){return!1}}();return function(){var h,b=(0,g.default)(c);if(_){var M=(0,g.default)(this).constructor;h=Reflect.construct(b,arguments,M)}else h=b.apply(this,arguments);return(0,p.default)(this,h)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=y(l),u=y(u),d=y(d),p=y(p),g=y(g),m=y(m),k=function(c,_){if(!_&&c&&c.__esModule)return c;if(c===null||s(c)!=="object"&&typeof c!="function")return{default:c};var h=v(_);if(h&&h.has(c))return h.get(c);var b={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in c)if(E!=="default"&&Object.prototype.hasOwnProperty.call(c,E)){var w=M?Object.getOwnPropertyDescriptor(c,E):null;w&&(w.get||w.set)?Object.defineProperty(b,E,w):b[E]=c[E]}return b.default=c,h&&h.set(c,b),b}(k);var C=function(c){(0,d.default)(h,c);var _=x(h);function h(){var b;return(0,l.default)(this,h),(b=_.apply(this,arguments)).disabled=!1,b}return(0,u.default)(h,[{key:"enable",value:function(){this.disabled=!1}},{key:"disable",value:function(){this.disabled=!0}},{key:"onChange",value:function(b){!this.disabled&&k.isFunction(this.config.onChange)&&this.config.onChange(this.Editor.API.methods,b)}}]),h}(m.default);a.default=C,C.displayName="ModificationsObserver",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(20),e(30),e(41),e(21),e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(8),e(66)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x,C,c,_){"use strict";var h=e(1);function b(w){if(typeof WeakMap!="function")return null;var S=new WeakMap,O=new WeakMap;return(b=function(B){return B?O:S})(w)}function M(w){var S=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(O){return!1}}();return function(){var O,B=(0,v.default)(w);if(S){var A=(0,v.default)(this).constructor;O=Reflect.construct(B,arguments,A)}else O=B.apply(this,arguments);return(0,y.default)(this,O)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=h(l),u=h(u),d=h(d),p=h(p),g=h(g),m=h(m),k=h(k),y=h(y),v=h(v),x=h(x),C=h(C),c=function(w,S){if(!S&&w&&w.__esModule)return w;if(w===null||s(w)!=="object"&&typeof w!="function")return{default:w};var O=b(S);if(O&&O.has(w))return O.get(w);var B={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in w)if(R!=="default"&&Object.prototype.hasOwnProperty.call(w,R)){var T=A?Object.getOwnPropertyDescriptor(w,R):null;T&&(T.get||T.set)?Object.defineProperty(B,R,T):B[R]=w[R]}return B.default=w,O&&O.set(w,B),B}(c);var E=function(w){(0,k.default)(H,w);var S,O,B,A,R,T,L,P,D=M(H);function H(){var j;return(0,g.default)(this,H),(j=D.apply(this,arguments)).MIME_TYPE="application/x-editor-js",j.toolsTags={},j.tagsByTool={},j.toolsPatterns=[],j.toolsFiles={},j.exceptionList=[],j.processTool=function(F){try{var K=F.create({},{},!1);if(F.pasteConfig===!1)return void j.exceptionList.push(F.name);if(!c.isFunction(K.onPaste))return;j.getTagsConfig(F),j.getFilesConfig(F),j.getPatternsConfig(F)}catch(q){c.log("Paste handling for \xAB".concat(F.name,"\xBB Tool hasn't been set up because of the error"),"warn",q)}},j.handlePasteEvent=function(){var F=(0,p.default)(l.default.mark(function K(q){var W,Y,Z;return l.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(W=j.Editor,Y=W.BlockManager,Z=W.Toolbar,Y.currentBlock&&(!j.isNativeBehaviour(q.target)||q.clipboardData.types.includes("Files"))){X.next=3;break}return X.abrupt("return");case 3:if(!Y.currentBlock||!j.exceptionList.includes(Y.currentBlock.name)){X.next=5;break}return X.abrupt("return");case 5:q.preventDefault(),j.processDataTransfer(q.clipboardData),Y.clearFocused(),Z.close();case 9:case"end":return X.stop()}},K)}));return function(K){return F.apply(this,arguments)}}(),j}return(0,m.default)(H,[{key:"prepare",value:(P=(0,p.default)(l.default.mark(function j(){return l.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:this.processTools();case 1:case"end":return F.stop()}},j,this)})),function(){return P.apply(this,arguments)})},{key:"toggleReadOnly",value:function(j){j?this.unsetCallback():this.setCallback()}},{key:"processDataTransfer",value:(L=(0,p.default)(l.default.mark(function j(F){var K,q,W,Y,Z,X,Q,ue,ce,ne=this,ge=arguments;return l.default.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(K=ge.length>1&&ge[1]!==void 0&&ge[1],q=this.Editor.Tools,!((W=F.types).includes?W.includes("Files"):W.contains("Files"))||c.isEmpty(this.toolsFiles)){re.next=8;break}return re.next=7,this.processFiles(F.files);case 7:return re.abrupt("return");case 8:if(Y=F.getData(this.MIME_TYPE),Z=F.getData("text/plain"),X=F.getData("text/html"),!Y){re.next=19;break}return re.prev=12,this.insertEditorJSData(JSON.parse(Y)),re.abrupt("return");case 17:re.prev=17,re.t0=re.catch(12);case 19:if(K&&Z.trim()&&X.trim()&&(X="<p>"+(X.trim()?X:Z)+"</p>"),Q=Object.keys(this.toolsTags).reduce(function(pe,Ce){var be;return pe[Ce.toLowerCase()]=(be=ne.toolsTags[Ce].sanitizationConfig)!==null&&be!==void 0?be:{},pe},{}),ue=Object.assign({},Q,q.getAllInlineToolsSanitizeConfig(),{br:{}}),(ce=(0,_.clean)(X,ue)).trim()&&ce.trim()!==Z&&C.default.isHTMLString(ce)){re.next=28;break}return re.next=26,this.processText(Z);case 26:re.next=30;break;case 28:return re.next=30,this.processText(ce,!0);case 30:case"end":return re.stop()}},j,this,[[12,17]])})),function(j){return L.apply(this,arguments)})},{key:"processText",value:(T=(0,p.default)(l.default.mark(function j(F){var K,q,W,Y,Z,X,Q,ue=this,ce=arguments;return l.default.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(K=ce.length>1&&ce[1]!==void 0&&ce[1],q=this.Editor,W=q.Caret,Y=q.BlockManager,(Z=K?this.processHTML(F):this.processPlain(F)).length){ne.next=5;break}return ne.abrupt("return");case 5:if(Z.length!==1){ne.next=8;break}return Z[0].isBlock?this.processSingleBlock(Z.pop()):this.processInlinePaste(Z.pop()),ne.abrupt("return");case 8:X=Y.currentBlock&&Y.currentBlock.tool.isDefault,Q=X&&Y.currentBlock.isEmpty,Z.map(function(){var ge=(0,p.default)(l.default.mark(function re(pe,Ce){return l.default.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.abrupt("return",ue.insertBlock(pe,Ce===0&&Q));case 1:case"end":return be.stop()}},re)}));return function(re,pe){return ge.apply(this,arguments)}}()),Y.currentBlock&&W.setToBlock(Y.currentBlock,W.positions.END);case 12:case"end":return ne.stop()}},j,this)})),function(j){return T.apply(this,arguments)})},{key:"setCallback",value:function(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}},{key:"unsetCallback",value:function(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}},{key:"processTools",value:function(){var j=this.Editor.Tools.blockTools;Array.from(j.values()).forEach(this.processTool)}},{key:"collectTagNames",value:function(j){return c.isString(j)?[j]:c.isObject(j)?Object.keys(j):[]}},{key:"getTagsConfig",value:function(j){var F=this,K=j.pasteConfig.tags||[],q=[];K.forEach(function(W){var Y=F.collectTagNames(W);q.push.apply(q,(0,d.default)(Y)),Y.forEach(function(Z){if(Object.prototype.hasOwnProperty.call(F.toolsTags,Z))c.log("Paste handler for \xAB".concat(j.name,"\xBB Tool on \xAB").concat(Z,"\xBB tag is skipped ")+"because it is already used by \xAB".concat(F.toolsTags[Z].tool.name,"\xBB Tool."),"warn");else{var X=c.isObject(W)?W[Z]:null;F.toolsTags[Z.toUpperCase()]={tool:j,sanitizationConfig:X}}})}),this.tagsByTool[j.name]=q.map(function(W){return W.toUpperCase()})}},{key:"getFilesConfig",value:function(j){var F=j.pasteConfig.files,K=F===void 0?{}:F,q=K.extensions,W=K.mimeTypes;(q||W)&&(q&&!Array.isArray(q)&&(c.log("\xABextensions\xBB property of the onDrop config for \xAB".concat(j.name,"\xBB Tool should be an array")),q=[]),W&&!Array.isArray(W)&&(c.log("\xABmimeTypes\xBB property of the onDrop config for \xAB".concat(j.name,"\xBB Tool should be an array")),W=[]),W&&(W=W.filter(function(Y){return!!c.isValidMimeType(Y)||(c.log("MIME type value \xAB".concat(Y,"\xBB for the \xAB").concat(j.name,"\xBB Tool is not a valid MIME type"),"warn"),!1)})),this.toolsFiles[j.name]={extensions:q||[],mimeTypes:W||[]})}},{key:"getPatternsConfig",value:function(j){var F=this;j.pasteConfig.patterns&&!c.isEmpty(j.pasteConfig.patterns)&&Object.entries(j.pasteConfig.patterns).forEach(function(K){var q=(0,u.default)(K,2),W=q[0],Y=q[1];Y instanceof RegExp||c.log("Pattern ".concat(Y," for \xAB").concat(j.name,"\xBB Tool is skipped because it should be a Regexp instance."),"warn"),F.toolsPatterns.push({key:W,pattern:Y,tool:j})})}},{key:"isNativeBehaviour",value:function(j){return C.default.isNativeInput(j)}},{key:"processFiles",value:(R=(0,p.default)(l.default.mark(function j(F){var K,q,W,Y,Z=this;return l.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return K=this.Editor.BlockManager,X.next=3,Promise.all(Array.from(F).map(function(Q){return Z.processFile(Q)}));case 3:q=(q=X.sent).filter(function(Q){return!!Q}),W=K.currentBlock.tool.isDefault,Y=W&&K.currentBlock.isEmpty,q.forEach(function(Q,ue){K.paste(Q.type,Q.event,ue===0&&Y)});case 8:case"end":return X.stop()}},j,this)})),function(j){return R.apply(this,arguments)})},{key:"processFile",value:(A=(0,p.default)(l.default.mark(function j(F){var K,q,W,Y,Z;return l.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(K=c.getFileExtension(F),q=Object.entries(this.toolsFiles).find(function(Q){var ue=(0,u.default)(Q,2),ce=(ue[0],ue[1]),ne=ce.mimeTypes,ge=ce.extensions,re=F.type.split("/"),pe=(0,u.default)(re,2),Ce=pe[0],be=pe[1],xe=ge.find(function(je){return je.toLowerCase()===K.toLowerCase()}),Re=ne.find(function(je){var Be=je.split("/"),ze=(0,u.default)(Be,2),Ne=ze[0],De=ze[1];return Ne===Ce&&(De===be||De==="*")});return!!xe||!!Re})){X.next=4;break}return X.abrupt("return");case 4:return W=(0,u.default)(q,1),Y=W[0],Z=this.composePasteEvent("file",{file:F}),X.abrupt("return",{event:Z,type:Y});case 7:case"end":return X.stop()}},j,this)})),function(j){return A.apply(this,arguments)})},{key:"processHTML",value:function(j){var F=this,K=this.Editor.Tools,q=C.default.make("DIV");return q.innerHTML=j,this.getNodes(q).map(function(W){var Y,Z=K.defaultTool,X=!1;switch(W.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:(Y=C.default.make("div")).appendChild(W);break;case Node.ELEMENT_NODE:Y=W,X=!0,F.toolsTags[Y.tagName]&&(Z=F.toolsTags[Y.tagName].tool)}var Q=Z.pasteConfig.tags.reduce(function(ge,re){return F.collectTagNames(re).forEach(function(pe){var Ce=c.isObject(re)?re[pe]:null;ge[pe.toLowerCase()]=Ce||{}}),ge},{}),ue=Object.assign({},Q,Z.baseSanitizeConfig);if(Y.tagName.toLowerCase()==="table"){var ce=(0,_.clean)(Y.outerHTML,ue);Y=C.default.make("div",void 0,{innerHTML:ce}).firstChild}else Y.innerHTML=(0,_.clean)(Y.innerHTML,ue);var ne=F.composePasteEvent("tag",{data:Y});return{content:Y,isBlock:X,tool:Z.name,event:ne}}).filter(function(W){var Y=C.default.isEmpty(W.content),Z=C.default.isSingleTag(W.content);return!Y||Z})}},{key:"processPlain",value:function(j){var F=this,K=this.config.defaultBlock;if(!j)return[];var q=K;return j.split(/\r?\n/).filter(function(W){return W.trim()}).map(function(W){var Y=C.default.make("div");Y.textContent=W;var Z=F.composePasteEvent("tag",{data:Y});return{content:Y,tool:q,isBlock:!1,event:Z}})}},{key:"processSingleBlock",value:(B=(0,p.default)(l.default.mark(function j(F){var K,q,W,Y;return l.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(K=this.Editor,q=K.Caret,W=K.BlockManager,(Y=W.currentBlock)&&F.tool===Y.name&&C.default.containsOnlyInlineElements(F.content.innerHTML)){Z.next=5;break}return this.insertBlock(F,(Y==null?void 0:Y.tool.isDefault)&&Y.isEmpty),Z.abrupt("return");case 5:q.insertContentAtCaretPosition(F.content.innerHTML);case 6:case"end":return Z.stop()}},j,this)})),function(j){return B.apply(this,arguments)})},{key:"processInlinePaste",value:(O=(0,p.default)(l.default.mark(function j(F){var K,q,W,Y,Z,X,Q,ue;return l.default.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(K=this.Editor,q=K.BlockManager,W=K.Caret,Y=F.content,!(q.currentBlock&&q.currentBlock.tool.isDefault&&Y.textContent.length<H.PATTERN_PROCESSING_MAX_LENGTH)){ce.next=12;break}return ce.next=6,this.processPattern(Y.textContent);case 6:if(!(Z=ce.sent)){ce.next=12;break}return X=q.currentBlock&&q.currentBlock.tool.isDefault&&q.currentBlock.isEmpty,Q=q.paste(Z.tool,Z.event,X),W.setToBlock(Q,W.positions.END),ce.abrupt("return");case 12:q.currentBlock&&q.currentBlock.currentInput?(ue=q.currentBlock.tool.baseSanitizeConfig,document.execCommand("insertHTML",!1,(0,_.clean)(Y.innerHTML,ue))):this.insertBlock(F);case 13:case"end":return ce.stop()}},j,this)})),function(j){return O.apply(this,arguments)})},{key:"processPattern",value:(S=(0,p.default)(l.default.mark(function j(F){var K,q;return l.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(K=this.toolsPatterns.find(function(Y){var Z=Y.pattern.exec(F);return!!Z&&F===Z.shift()})){W.next=3;break}return W.abrupt("return");case 3:return q=this.composePasteEvent("pattern",{key:K.key,data:F}),W.abrupt("return",{event:q,tool:K.tool.name});case 5:case"end":return W.stop()}},j,this)})),function(j){return S.apply(this,arguments)})},{key:"insertBlock",value:function(j){var F,K=arguments.length>1&&arguments[1]!==void 0&&arguments[1],q=this.Editor,W=q.BlockManager,Y=q.Caret,Z=W.currentBlock;if(K&&Z&&Z.isEmpty)return F=W.paste(j.tool,j.event,!0),void Y.setToBlock(F,Y.positions.END);F=W.paste(j.tool,j.event),Y.setToBlock(F,Y.positions.END)}},{key:"insertEditorJSData",value:function(j){var F=this.Editor,K=F.BlockManager,q=F.Caret,W=F.Tools;(0,_.sanitizeBlocks)(j,function(Y){return W.blockTools.get(Y).sanitizeConfig}).forEach(function(Y,Z){var X=Y.tool,Q=Y.data,ue=!1;Z===0&&(ue=K.currentBlock&&K.currentBlock.tool.isDefault&&K.currentBlock.isEmpty);var ce=K.insert({tool:X,data:Q,replace:ue});q.setToBlock(ce,q.positions.END)})}},{key:"processElementNode",value:function(j,F,K){var q=Object.keys(this.toolsTags),W=j,Y=(this.toolsTags[W.tagName]||{}).tool,Z=this.tagsByTool[Y==null?void 0:Y.name]||[],X=q.includes(W.tagName),Q=C.default.blockElements.includes(W.tagName.toLowerCase()),ue=Array.from(W.children).some(function(ne){var ge=ne.tagName;return q.includes(ge)&&!Z.includes(ge)}),ce=Array.from(W.children).some(function(ne){var ge=ne.tagName;return C.default.blockElements.includes(ge.toLowerCase())});return Q||X||ue?X&&!ue||Q&&!ce&&!ue?[].concat((0,d.default)(F),[K,W]):void 0:(K.appendChild(W),[].concat((0,d.default)(F),[K]))}},{key:"getNodes",value:function(j){var F,K=this;return Array.from(j.childNodes).reduce(function q(W,Y){if(C.default.isEmpty(Y)&&!C.default.isSingleTag(Y))return W;var Z=W[W.length-1],X=new DocumentFragment;switch(Z&&C.default.isFragment(Z)&&(X=W.pop()),Y.nodeType){case Node.ELEMENT_NODE:if(F=K.processElementNode(Y,W,X))return F;break;case Node.TEXT_NODE:return X.appendChild(Y),[].concat((0,d.default)(W),[X]);default:return[].concat((0,d.default)(W),[X])}return[].concat((0,d.default)(W),(0,d.default)(Array.from(Y.childNodes).reduce(q,[])))},[])}},{key:"composePasteEvent",value:function(j,F){return new CustomEvent(j,{detail:F})}}]),H}(x.default);a.default=E,E.displayName="Paste",E.PATTERN_PROCESSING_MAX_LENGTH=450,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(20),e(30),e(21),e(2),e(3),e(5),e(6),e(4),e(9),e(151)],(o=typeof(i=function(s,a,l,u,d,p,g,m,k,y,v){"use strict";var x=e(1);function C(_){var h=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}();return function(){var b,M=(0,k.default)(_);if(h){var E=(0,k.default)(this).constructor;b=Reflect.construct(M,arguments,E)}else b=M.apply(this,arguments);return(0,m.default)(this,b)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=x(a),l=x(l),u=x(u),d=x(d),p=x(p),g=x(g),m=x(m),k=x(k);var c=function(_){(0,g.default)(E,_);var h,b,M=C(E);function E(){var w;return(0,d.default)(this,E),(w=M.apply(this,arguments)).toolsDontSupportReadOnly=[],w.readOnlyEnabled=!1,w}return(0,p.default)(E,[{key:"isEnabled",get:function(){return this.readOnlyEnabled}},{key:"prepare",value:(b=(0,u.default)(a.default.mark(function w(){var S,O,B;return a.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:S=this.Editor.Tools,O=S.blockTools,B=[],Array.from(O.entries()).forEach(function(R){var T=(0,l.default)(R,2),L=T[0];T[1].isReadOnlySupported||B.push(L)}),this.toolsDontSupportReadOnly=B,this.config.readOnly&&B.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly);case 7:case"end":return A.stop()}},w,this)})),function(){return b.apply(this,arguments)})},{key:"toggle",value:(h=(0,u.default)(a.default.mark(function w(){var S,O,B,A,R=arguments;return a.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:(S=R.length>0&&R[0]!==void 0?R[0]:!this.readOnlyEnabled)&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError(),O=this.readOnlyEnabled,this.readOnlyEnabled=S,T.t0=a.default.keys(this.Editor);case 5:if((T.t1=T.t0()).done){T.next=12;break}if(B=T.t1.value,this.Editor[B].toggleReadOnly){T.next=9;break}return T.abrupt("continue",5);case 9:this.Editor[B].toggleReadOnly(S),T.next=5;break;case 12:if(O!==S){T.next=14;break}return T.abrupt("return",this.readOnlyEnabled);case 14:return T.next=16,this.Editor.Saver.save();case 16:return A=T.sent,T.next=19,this.Editor.BlockManager.clear();case 19:return T.next=21,this.Editor.Renderer.render(A.blocks);case 21:return T.abrupt("return",this.readOnlyEnabled);case 22:case"end":return T.stop()}},w,this)})),function(){return h.apply(this,arguments)})},{key:"throwCriticalError",value:function(){throw new v.CriticalError("To enable read-only mode all connected tools should support it. Tools ".concat(this.toolsDontSupportReadOnly.join(", ")," don't support read-only mode."))}}]),E}((y=x(y)).default);s.default=c,c.displayName="ReadOnly",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(25),e(61),e(8)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x){"use strict";var C=e(1);function c(E){if(typeof WeakMap!="function")return null;var w=new WeakMap,S=new WeakMap;return(c=function(O){return O?S:w})(E)}function _(E,w){var S=typeof Symbol!="undefined"&&E[Symbol.iterator]||E["@@iterator"];if(!S){if(Array.isArray(E)||(S=function(L,P){if(L){if(typeof L=="string")return h(L,P);var D=Object.prototype.toString.call(L).slice(8,-1);return D==="Object"&&L.constructor&&(D=L.constructor.name),D==="Map"||D==="Set"?Array.from(L):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?h(L,P):void 0}}(E))||w&&E&&typeof E.length=="number"){S&&(E=S);var O=0,B=function(){};return{s:B,n:function(){return O>=E.length?{done:!0}:{done:!1,value:E[O++]}},e:function(L){throw L},f:B}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A,R=!0,T=!1;return{s:function(){S=S.call(E)},n:function(){var L=S.next();return R=L.done,L},e:function(L){T=!0,A=L},f:function(){try{R||S.return==null||S.return()}finally{if(T)throw A}}}}function h(E,w){(w==null||w>E.length)&&(w=E.length);for(var S=0,O=new Array(w);S<w;S++)O[S]=E[S];return O}function b(E){var w=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(S){return!1}}();return function(){var S,O=(0,g.default)(E);if(w){var B=(0,g.default)(this).constructor;S=Reflect.construct(O,arguments,B)}else S=O.apply(this,arguments);return(0,p.default)(this,S)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=C(l),u=C(u),d=C(d),p=C(p),g=C(g),m=C(m),k=C(k),y=C(y),v=C(v),x=function(E,w){if(!w&&E&&E.__esModule)return E;if(E===null||s(E)!=="object"&&typeof E!="function")return{default:E};var S=c(w);if(S&&S.has(E))return S.get(E);var O={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in E)if(A!=="default"&&Object.prototype.hasOwnProperty.call(E,A)){var R=B?Object.getOwnPropertyDescriptor(E,A):null;R&&(R.get||R.set)?Object.defineProperty(O,A,R):O[A]=E[A]}return O.default=E,S&&S.set(E,O),O}(x);var M=function(E){(0,d.default)(S,E);var w=b(S);function S(){var O;return(0,l.default)(this,S),(O=w.apply(this,arguments)).isRectSelectionActivated=!1,O.SCROLL_SPEED=3,O.HEIGHT_OF_SCROLL_ZONE=40,O.BOTTOM_SCROLL_ZONE=1,O.TOP_SCROLL_ZONE=2,O.MAIN_MOUSE_BUTTON=0,O.mousedown=!1,O.isScrolling=!1,O.inScrollZone=null,O.startX=0,O.startY=0,O.mouseX=0,O.mouseY=0,O.stackOfSelected=[],O.listenerIds=[],O}return(0,u.default)(S,[{key:"prepare",value:function(){this.enableModuleBindings()}},{key:"startSelection",value:function(O,B){var A=document.elementFromPoint(O-window.pageXOffset,B-window.pageYOffset);A.closest(".".concat(this.Editor.Toolbar.CSS.toolbar))||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);var R=[".".concat(v.default.CSS.content),".".concat(this.Editor.Toolbar.CSS.toolbar),".".concat(this.Editor.InlineToolbar.CSS.inlineToolbar)],T=A.closest("."+this.Editor.UI.CSS.editorWrapper),L=R.some(function(P){return!!A.closest(P)});T&&!L&&(this.mousedown=!0,this.startX=O,this.startY=B)}},{key:"endSelection",value:function(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}},{key:"isRectActivated",value:function(){return this.isRectSelectionActivated}},{key:"clearSelection",value:function(){this.isRectSelectionActivated=!1}},{key:"enableModuleBindings",value:function(){var O=this,B=this.genHTML().container;this.listeners.on(B,"mousedown",function(A){O.processMouseDown(A)},!1),this.listeners.on(document.body,"mousemove",x.throttle(function(A){O.processMouseMove(A)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",function(){O.processMouseLeave()}),this.listeners.on(window,"scroll",x.throttle(function(A){O.processScroll(A)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",function(){O.processMouseUp()},!1)}},{key:"processMouseDown",value:function(O){O.button===this.MAIN_MOUSE_BUTTON&&(O.target.closest(k.default.allInputsSelector)!==null||this.startSelection(O.pageX,O.pageY))}},{key:"processMouseMove",value:function(O){this.changingRectangle(O),this.scrollByZones(O.clientY)}},{key:"processMouseLeave",value:function(){this.clearSelection(),this.endSelection()}},{key:"processScroll",value:function(O){this.changingRectangle(O)}},{key:"processMouseUp",value:function(){this.clearSelection(),this.endSelection()}},{key:"scrollByZones",value:function(O){this.inScrollZone=null,O<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-O<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),this.inScrollZone?this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0):this.isScrolling=!1}},{key:"genHTML",value:function(){var O=this.Editor.UI,B=O.nodes.holder.querySelector("."+O.CSS.editorWrapper),A=k.default.make("div",S.CSS.overlay,{}),R=k.default.make("div",S.CSS.overlayContainer,{}),T=k.default.make("div",S.CSS.rect,{});return R.appendChild(T),A.appendChild(R),B.appendChild(A),this.overlayRectangle=T,{container:B,overlay:A}}},{key:"scrollVertical",value:function(O){var B=this;if(this.inScrollZone&&this.mousedown){var A=window.pageYOffset;window.scrollBy(0,O),this.mouseY+=window.pageYOffset-A,setTimeout(function(){B.scrollVertical(O)},0)}}},{key:"changingRectangle",value:function(O){if(this.mousedown){O.pageY!==void 0&&(this.mouseX=O.pageX,this.mouseY=O.pageY);var B=this.genInfoForMouseSelection(),A=B.rightPos,R=B.leftPos,T=B.index,L=this.startX>A&&this.mouseX>A,P=this.startX<R&&this.mouseX<R;this.rectCrossesBlocks=!(L||P),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),T!==void 0&&(this.trySelectNextBlock(T),this.inverseSelection(),y.default.get().removeAllRanges())}}},{key:"shrinkRectangleToPoint",value:function(){this.overlayRectangle.style.left="".concat(this.startX-window.pageXOffset,"px"),this.overlayRectangle.style.top="".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.bottom="calc(100% - ".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.right="calc(100% - ".concat(this.startX-window.pageXOffset,"px")}},{key:"inverseSelection",value:function(){var O=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!O){var B,A=_(this.stackOfSelected);try{for(A.s();!(B=A.n()).done;){var R=B.value;this.Editor.BlockSelection.selectBlockByIndex(R)}}catch(D){A.e(D)}finally{A.f()}}if(!this.rectCrossesBlocks&&O){var T,L=_(this.stackOfSelected);try{for(L.s();!(T=L.n()).done;){var P=T.value;this.Editor.BlockSelection.unSelectBlockByIndex(P)}}catch(D){L.e(D)}finally{L.f()}}}},{key:"updateRectangleSize",value:function(){this.mouseY>=this.startY?(this.overlayRectangle.style.top="".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.bottom="calc(100% - ".concat(this.mouseY-window.pageYOffset,"px")):(this.overlayRectangle.style.bottom="calc(100% - ".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.top="".concat(this.mouseY-window.pageYOffset,"px")),this.mouseX>=this.startX?(this.overlayRectangle.style.left="".concat(this.startX-window.pageXOffset,"px"),this.overlayRectangle.style.right="calc(100% - ".concat(this.mouseX-window.pageXOffset,"px")):(this.overlayRectangle.style.right="calc(100% - ".concat(this.startX-window.pageXOffset,"px"),this.overlayRectangle.style.left="".concat(this.mouseX-window.pageXOffset,"px"))}},{key:"genInfoForMouseSelection",value:function(){var O,B=document.body.offsetWidth/2,A=this.mouseY-window.pageYOffset,R=document.elementFromPoint(B,A),T=this.Editor.BlockManager.getBlockByChildNode(R);T!==void 0&&(O=this.Editor.BlockManager.blocks.findIndex(function(D){return D.holder===T.holder}));var L=this.Editor.BlockManager.lastBlock.holder.querySelector("."+v.default.CSS.content),P=Number.parseInt(window.getComputedStyle(L).width,10)/2;return{index:O,leftPos:B-P,rightPos:B+P}}},{key:"addBlockInSelection",value:function(O){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(O),this.stackOfSelected.push(O)}},{key:"trySelectNextBlock",value:function(O){var B=this,A=this.stackOfSelected[this.stackOfSelected.length-1]===O,R=this.stackOfSelected.length;if(!A){var T=this.stackOfSelected[R-1]-this.stackOfSelected[R-2]>0,L=0;R>1&&(L=T?1:-1);var P=O>this.stackOfSelected[R-1]&&L===1,D=O<this.stackOfSelected[R-1]&&L===-1,H=!(P||D||L===0);if(H||!(O>this.stackOfSelected[R-1]||this.stackOfSelected[R-1]===void 0)){if(!H&&O<this.stackOfSelected[R-1])for(var j=this.stackOfSelected[R-1]-1;j>=O;j--)this.addBlockInSelection(j);else if(H){var F,K=R-1;for(F=O>this.stackOfSelected[R-1]?function(){return O>B.stackOfSelected[K]}:function(){return O<B.stackOfSelected[K]};F();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[K]),this.stackOfSelected.pop(),K--}}else for(var q=this.stackOfSelected[R-1]+1||O;q<=O;q++)this.addBlockInSelection(q)}}}],[{key:"CSS",get:function(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}}]),S}(m.default);a.default=M,M.displayName="RectangleSelection",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(20),e(21),e(2),e(3),e(5),e(6),e(4),e(9),e(8)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v){"use strict";var x=e(1);function C(h){if(typeof WeakMap!="function")return null;var b=new WeakMap,M=new WeakMap;return(C=function(E){return E?M:b})(h)}function c(h){var b=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(M){return!1}}();return function(){var M,E=(0,k.default)(h);if(b){var w=(0,k.default)(this).constructor;M=Reflect.construct(E,arguments,w)}else M=E.apply(this,arguments);return(0,m.default)(this,M)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=x(l),u=x(u),d=x(d),p=x(p),g=x(g),m=x(m),k=x(k),y=x(y),v=function(h,b){if(!b&&h&&h.__esModule)return h;if(h===null||s(h)!=="object"&&typeof h!="function")return{default:h};var M=C(b);if(M&&M.has(h))return M.get(h);var E={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in h)if(S!=="default"&&Object.prototype.hasOwnProperty.call(h,S)){var O=w?Object.getOwnPropertyDescriptor(h,S):null;O&&(O.get||O.set)?Object.defineProperty(E,S,O):E[S]=h[S]}return E.default=h,M&&M.set(h,E),E}(v);var _=function(h){(0,g.default)(w,h);var b,M,E=c(w);function w(){return(0,d.default)(this,w),E.apply(this,arguments)}return(0,p.default)(w,[{key:"render",value:(M=(0,u.default)(l.default.mark(function S(O){var B,A,R=this;return l.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return B=O.map(function(L){return{function:function(){return R.insertBlock(L)}}}),this.Editor.ModificationsObserver.disable(),T.next=4,v.sequence(B);case 4:return A=T.sent,this.Editor.ModificationsObserver.enable(),this.Editor.UI.checkEmptiness(),T.abrupt("return",A);case 8:case"end":return T.stop()}},S,this)})),function(S){return M.apply(this,arguments)})},{key:"insertBlock",value:(b=(0,u.default)(l.default.mark(function S(O){var B,A,R,T,L,P,D,H,j,F,K;return l.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(A=this.Editor,R=A.Tools,T=A.BlockManager,L=O.type,P=O.data,D=O.tunes,H=O.id,!R.available.has(L)){q.next=13;break}q.prev=3,T.insert({id:H,tool:L,data:P,tunes:D}),q.next=11;break;case 7:throw q.prev=7,q.t0=q.catch(3),v.log("Block \xAB".concat(L,"\xBB skipped because of plugins error"),"warn",P),Error(q.t0);case 11:q.next=18;break;case 13:j={savedData:{id:H,type:L,data:P},title:L},R.unavailable.has(L)&&(F=R.unavailable.get(L).toolbox,K=(B=F[0])===null||B===void 0?void 0:B.title,j.title=K||j.title),T.insert({id:H,tool:R.stubTool,data:j}).stretched=!0,v.log("Tool \xAB".concat(L,"\xBB is not found. Check 'tools' property at your initial Editor.js config."),"warn");case 18:case"end":return q.stop()}},S,this,[[3,7]])})),function(S){return b.apply(this,arguments)})}]),w}(y.default);a.default=_,_.displayName="Renderer",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(20),e(21),e(2),e(3),e(5),e(6),e(4),e(9),e(8),e(66)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x){"use strict";var C=e(1);function c(b){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(c=function(w){return w?E:M})(b)}function _(b){var M=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(E){return!1}}();return function(){var E,w=(0,k.default)(b);if(M){var S=(0,k.default)(this).constructor;E=Reflect.construct(w,arguments,S)}else E=w.apply(this,arguments);return(0,m.default)(this,E)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=C(l),u=C(u),d=C(d),p=C(p),g=C(g),m=C(m),k=C(k),y=C(y),v=function(b,M){if(!M&&b&&b.__esModule)return b;if(b===null||s(b)!=="object"&&typeof b!="function")return{default:b};var E=c(M);if(E&&E.has(b))return E.get(b);var w={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in b)if(O!=="default"&&Object.prototype.hasOwnProperty.call(b,O)){var B=S?Object.getOwnPropertyDescriptor(b,O):null;B&&(B.get||B.set)?Object.defineProperty(w,O,B):w[O]=b[O]}return w.default=b,E&&E.set(b,w),w}(v);var h=function(b){(0,g.default)(S,b);var M,E,w=_(S);function S(){return(0,d.default)(this,S),w.apply(this,arguments)}return(0,p.default)(S,[{key:"save",value:(E=(0,u.default)(l.default.mark(function O(){var B,A,R,T,L,P,D,H=this;return l.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return B=this.Editor,A=B.BlockManager,R=B.Tools,T=A.blocks,L=[],j.prev=2,T.forEach(function(F){L.push(H.getSavedData(F))}),j.next=6,Promise.all(L);case 6:return P=j.sent,j.next=9,(0,x.sanitizeBlocks)(P,function(F){return R.blockTools.get(F).sanitizeConfig});case 9:return D=j.sent,j.abrupt("return",this.makeOutput(D));case 13:j.prev=13,j.t0=j.catch(2),v.logLabeled("Saving failed due to the Error %o","error",j.t0);case 16:case"end":return j.stop()}},O,this,[[2,13]])})),function(){return E.apply(this,arguments)})},{key:"getSavedData",value:(M=(0,u.default)(l.default.mark(function O(B){var A,R;return l.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,B.save();case 2:if(A=T.sent,T.t0=A,!T.t0){T.next=8;break}return T.next=7,B.validate(A.data);case 7:T.t0=T.sent;case 8:return R=T.t0,T.abrupt("return",Object.assign(Object.assign({},A),{isValid:R}));case 10:case"end":return T.stop()}},O)})),function(O){return M.apply(this,arguments)})},{key:"makeOutput",value:function(O){var B=this,A=0,R=[];return v.log("[Editor.js saving]:","groupCollapsed"),O.forEach(function(T){var L=T.id,P=T.tool,D=T.data,H=T.tunes,j=T.time,F=T.isValid;if(A+=j,v.log("".concat(P.charAt(0).toUpperCase()+P.slice(1)),"group"),!F)return v.log("Block \xAB".concat(P,"\xBB skipped because saved data is invalid")),void v.log(void 0,"groupEnd");if(v.log(D),v.log(void 0,"groupEnd"),P!==B.Editor.Tools.stubTool){var K=Object.assign({id:L,type:P,data:D},!v.isEmpty(H)&&{tunes:H});R.push(K)}else R.push(D)}),v.log("Total","log",A),v.log(void 0,"groupEnd"),{time:+new Date,blocks:R,version:"2.26.5"}}}]),S}(y.default);a.default=h,h.displayName="Saver",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(30),e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(25),e(85),e(54),e(68),e(389)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x,C,c,_){"use strict";var h=e(1);function b(w){if(typeof WeakMap!="function")return null;var S=new WeakMap,O=new WeakMap;return(b=function(B){return B?O:S})(w)}function M(w){var S=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(O){return!1}}();return function(){var O,B=(0,m.default)(w);if(S){var A=(0,m.default)(this).constructor;O=Reflect.construct(B,arguments,A)}else O=B.apply(this,arguments);return(0,g.default)(this,O)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=h(l),u=h(u),d=h(d),p=h(p),g=h(g),m=h(m),k=h(k),y=h(y),v=h(v),x=function(w,S){if(!S&&w&&w.__esModule)return w;if(w===null||s(w)!=="object"&&typeof w!="function")return{default:w};var O=b(S);if(O&&O.has(w))return O.get(w);var B={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in w)if(R!=="default"&&Object.prototype.hasOwnProperty.call(w,R)){var T=A?Object.getOwnPropertyDescriptor(w,R):null;T&&(T.get||T.set)?Object.defineProperty(B,R,T):B[R]=w[R]}return B.default=w,O&&O.set(w,B),B}(x),C=h(C);var E=function(w){(0,p.default)(O,w);var S=M(O);function O(){var B;return(0,u.default)(this,O),(B=S.apply(this,arguments)).opened=!1,B.selection=new v.default,B.onOverlayClicked=function(){B.close()},B}return(0,d.default)(O,[{key:"events",get:function(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}},{key:"CSS",get:function(){return{settings:"ce-settings"}}},{key:"flipper",get:function(){var B;return(B=this.popover)===null||B===void 0?void 0:B.flipper}},{key:"make",value:function(){this.nodes.wrapper=y.default.make("div")}},{key:"destroy",value:function(){this.removeAllNodes()}},{key:"open",value:function(){var B=this,A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.Editor.BlockManager.currentBlock;this.opened=!0,this.selection.save(),A.selected=!0,this.Editor.BlockSelection.clearCache();var R=A.getTunes(),T=(0,l.default)(R,2),L=T[0],P=T[1];this.eventsDispatcher.emit(this.events.opened),this.popover=new x.default({className:this.CSS.settings,searchable:!0,filterLabel:C.default.ui(c.I18nInternalNS.ui.popover,"Filter"),nothingFoundLabel:C.default.ui(c.I18nInternalNS.ui.popover,"Nothing found"),items:L.map(function(D){return B.resolveTuneAliases(D)}),customContent:P,customContentFlippableItems:this.getControls(P),scopeElement:this.Editor.API.methods.ui.nodes.redactor}),this.popover.on(x.PopoverEvent.OverlayClicked,this.onOverlayClicked),this.popover.on(x.PopoverEvent.Close,function(){return B.close()}),this.nodes.wrapper.append(this.popover.getElement()),this.popover.show()}},{key:"getElement",value:function(){return this.nodes.wrapper}},{key:"close",value:function(){this.opened=!1,v.default.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&(this.Editor.BlockManager.currentBlock.selected=!1),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(x.PopoverEvent.OverlayClicked,this.onOverlayClicked),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null)}},{key:"getControls",value:function(B){var A=this.Editor.StylesAPI,R=B.querySelectorAll(".".concat(A.classes.settingsButton,", ").concat(y.default.allInputsSelector));return Array.from(R)}},{key:"resolveTuneAliases",value:function(B){var A=(0,_.resolveAliases)(B,{label:"title"});return B.confirmation&&(A.confirmation=this.resolveTuneAliases(B.confirmation)),A}}]),O}(k.default);a.default=E,E.displayName="BlockSettings",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(20),e(30),e(21),e(41),e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(8),e(67),e(54),e(68),e(66)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x,C,c,_,h,b,M){"use strict";var E=e(1);function w(B){if(typeof WeakMap!="function")return null;var A=new WeakMap,R=new WeakMap;return(w=function(T){return T?R:A})(B)}function S(B){var A=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(R){return!1}}();return function(){var R,T=(0,v.default)(B);if(A){var L=(0,v.default)(this).constructor;R=Reflect.construct(T,arguments,L)}else R=T.apply(this,arguments);return(0,y.default)(this,R)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=E(l),u=E(u),d=E(d),p=E(p),g=E(g),m=E(m),k=E(k),y=E(y),v=E(v),x=E(x),C=E(C),c=function(B,A){if(!A&&B&&B.__esModule)return B;if(B===null||s(B)!=="object"&&typeof B!="function")return{default:B};var R=w(A);if(R&&R.has(B))return R.get(B);var T={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in B)if(P!=="default"&&Object.prototype.hasOwnProperty.call(B,P)){var D=L?Object.getOwnPropertyDescriptor(B,P):null;D&&(D.get||D.set)?Object.defineProperty(T,P,D):T[P]=B[P]}return T.default=B,R&&R.set(B,T),T}(c),_=E(_),h=E(h);var O=function(B){(0,k.default)(L,B);var A,R,T=S(L);function L(){var P;return(0,g.default)(this,L),(P=T.apply(this,arguments)).opened=!1,P.tools=[],P.flipper=null,P.togglingCallback=null,P}return(0,m.default)(L,[{key:"make",value:function(){this.nodes.wrapper=C.default.make("div",[L.CSS.conversionToolbarWrapper].concat((0,p.default)(this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]))),this.nodes.tools=C.default.make("div",L.CSS.conversionToolbarTools);var P=C.default.make("div",L.CSS.conversionToolbarLabel,{textContent:h.default.ui(b.I18nInternalNS.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),C.default.append(this.nodes.wrapper,P),C.default.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}},{key:"destroy",value:function(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}},{key:"toggle",value:function(P){this.opened?this.close():this.open(),c.isFunction(P)&&(this.togglingCallback=P)}},{key:"open",value:function(){var P=this;this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add(L.CSS.conversionToolbarShowed),window.requestAnimationFrame(function(){P.flipper.activate(P.tools.map(function(D){return D.button}).filter(function(D){return!D.classList.contains(L.CSS.conversionToolHidden)})),P.flipper.focusFirst(),c.isFunction(P.togglingCallback)&&P.togglingCallback(!0)})}},{key:"close",value:function(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove(L.CSS.conversionToolbarShowed),c.isFunction(this.togglingCallback)&&this.togglingCallback(!1)}},{key:"hasTools",value:function(){return this.tools.length!==1||this.tools[0].name!==this.config.defaultBlock}},{key:"replaceWithBlock",value:(R=(0,d.default)(l.default.mark(function P(D,H){var j,F,K,q,W,Y,Z,X,Q,ue=this;return l.default.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return j=this.Editor.BlockManager.currentBlock.tool,ce.next=3,this.Editor.BlockManager.currentBlock.save();case 3:if(F=ce.sent,K=F.data,q=this.Editor.Tools.blockTools.get(D),W="",Y=j.conversionConfig.export,!c.isFunction(Y)){ce.next=12;break}W=Y(K),ce.next=18;break;case 12:if(!c.isString(Y)){ce.next=16;break}W=K[Y],ce.next=18;break;case 16:return c.log("Conversion \xABexport\xBB property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),ce.abrupt("return");case 18:if(Z=(0,M.clean)(W,q.sanitizeConfig),X={},Q=q.conversionConfig.import,!c.isFunction(Q)){ce.next=25;break}X=Q(Z),ce.next=31;break;case 25:if(!c.isString(Q)){ce.next=29;break}X[Q]=Z,ce.next=31;break;case 29:return c.log("Conversion \xABimport\xBB property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),ce.abrupt("return");case 31:H&&(X=Object.assign(X,H)),this.Editor.BlockManager.replace({tool:D,data:X}),this.Editor.BlockSelection.clearSelection(),this.close(),this.Editor.InlineToolbar.close(),c.delay(function(){ue.Editor.Caret.setToBlock(ue.Editor.BlockManager.currentBlock)},10)();case 37:case"end":return ce.stop()}},P,this)})),function(P,D){return R.apply(this,arguments)})},{key:"addTools",value:function(){var P=this,D=this.Editor.Tools.blockTools;Array.from(D.entries()).forEach(function(H){var j=(0,u.default)(H,2),F=j[0],K=j[1],q=K.conversionConfig;q&&q.import&&K.toolbox.forEach(function(W){return P.addToolIfValid(F,W)})})}},{key:"addToolIfValid",value:function(P,D){!c.isEmpty(D)&&D.icon&&this.addTool(P,D)}},{key:"addTool",value:function(P,D){var H=this,j=C.default.make("div",[L.CSS.conversionTool]),F=C.default.make("div",[L.CSS.conversionToolIcon]);j.dataset.tool=P,F.innerHTML=D.icon,C.default.append(j,F),C.default.append(j,C.default.text(h.default.t(b.I18nInternalNS.toolNames,D.title||c.capitalize(P)))),C.default.append(this.nodes.tools,j),this.tools.push({name:P,button:j,toolboxItem:D}),this.listeners.on(j,"click",(0,d.default)(l.default.mark(function K(){return l.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,H.replaceWithBlock(P,D.data);case 2:case"end":return q.stop()}},K)})))}},{key:"filterTools",value:(A=(0,d.default)(l.default.mark(function P(){var D,H,j;return l.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return j=function(K,q){return K.icon===q.icon&&K.title===q.title},D=this.Editor.BlockManager.currentBlock,F.next=4,D.getActiveToolboxEntry();case 4:H=F.sent,this.tools.forEach(function(K){var q=!1;if(H){var W=j(H,K.toolboxItem);q=K.button.dataset.tool===D.name&&W}K.button.hidden=q,K.button.classList.toggle(L.CSS.conversionToolHidden,q)});case 6:case"end":return F.stop()}},P,this)})),function(){return A.apply(this,arguments)})},{key:"enableFlipper",value:function(){this.flipper=new _.default({focusedItemClass:L.CSS.conversionToolFocused})}}],[{key:"CSS",get:function(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}}]),L}(x.default);a.default=O,O.displayName="ConversionToolbar",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(20),e(21),e(41),e(30),e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(25),e(8),e(67),e(54),e(68),e(116),e(115),e(69),e(37)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x,C,c,_,h,b,M,E,w,S,O){"use strict";var B=e(1);function A(L){if(typeof WeakMap!="function")return null;var P=new WeakMap,D=new WeakMap;return(A=function(H){return H?D:P})(L)}function R(L){var P=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(D){return!1}}();return function(){var D,H=(0,v.default)(L);if(P){var j=(0,v.default)(this).constructor;D=Reflect.construct(H,arguments,j)}else D=H.apply(this,arguments);return(0,y.default)(this,D)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=B(l),u=B(u),d=B(d),p=B(p),g=B(g),m=B(m),k=B(k),y=B(y),v=B(v),x=B(x),C=B(C),c=B(c),_=function(L,P){if(!P&&L&&L.__esModule)return L;if(L===null||s(L)!=="object"&&typeof L!="function")return{default:L};var D=A(P);if(D&&D.has(L))return D.get(L);var H={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var F in L)if(F!=="default"&&Object.prototype.hasOwnProperty.call(L,F)){var K=j?Object.getOwnPropertyDescriptor(L,F):null;K&&(K.get||K.set)?Object.defineProperty(H,F,K):H[F]=L[F]}return H.default=L,D&&D.set(L,H),H}(_),h=B(h),b=B(b),E=B(E),w=B(w);var T=function(L){(0,k.default)(H,L);var P,D=R(H);function H(j){var F,K=j.config,q=j.eventsDispatcher;return(0,g.default)(this,H),(F=D.call(this,{config:K,eventsDispatcher:q})).CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerArrow:"ce-inline-toolbar__dropdown-arrow",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},F.opened=!1,F.toolbarVerticalMargin=_.isMobileScreen()?20:6,F.buttonsList=null,F.width=0,F.flipper=null,F.tooltip=new w.default,F}return(0,m.default)(H,[{key:"toggleReadOnly",value:function(j){j?(this.destroy(),this.Editor.ConversionToolbar.destroy()):this.make()}},{key:"tryToShow",value:function(){var j=arguments.length>0&&arguments[0]!==void 0&&arguments[0],F=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.allowedToShow()?(this.move(),this.open(F),this.Editor.Toolbar.close()):j&&this.close()}},{key:"move",value:function(){var j=c.default.rect,F=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),K={x:j.x-F.left,y:j.y+j.height-F.top+this.toolbarVerticalMargin};j.width&&(K.x+=Math.floor(j.width/2));var q=K.x-this.width/2,W=K.x+this.width/2;this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarLeftOriented,q<this.Editor.UI.contentRect.left),this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarRightOriented,W>this.Editor.UI.contentRect.right),this.nodes.wrapper.style.left=Math.floor(K.x)+"px",this.nodes.wrapper.style.top=Math.floor(K.y)+"px"}},{key:"close",value:function(){var j=this;this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach(function(F){var K=(0,p.default)(F,2),q=K[0],W=K[1],Y=j.getToolShortcut(q);Y&&E.default.remove(j.Editor.UI.nodes.redactor,Y),_.isFunction(W.clear)&&W.clear()}),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}},{key:"open",value:function(){var j=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];if(!this.opened){this.addToolsFiltered(),this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(".".concat(this.CSS.inlineToolButton)),this.opened=!0,j&&this.Editor.ConversionToolbar.hasTools()?this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0;var F=Array.from(this.buttonsList);F.unshift(this.nodes.conversionToggler),F=F.filter(function(K){return!K.hidden}),this.flipper.activate(F)}}},{key:"containsNode",value:function(j){return this.nodes.wrapper.contains(j)}},{key:"destroy",value:function(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes(),this.tooltip.destroy()}},{key:"make",value:function(){var j=this;this.nodes.wrapper=C.default.make("div",[this.CSS.inlineToolbar].concat((0,d.default)(this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]))),this.nodes.togglerAndButtonsWrapper=C.default.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=C.default.make("div",this.CSS.buttonsWrapper),this.nodes.actions=C.default.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",function(F){F.target.closest(".".concat(j.CSS.actionsWrapper))||F.preventDefault()}),C.default.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),C.default.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),C.default.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),this.recalculateWidth(),this.enableFlipper()}},{key:"allowedToShow",value:function(){var j=c.default.get(),F=c.default.text;if(!j||!j.anchorNode||j.isCollapsed||F.length<1)return!1;var K=C.default.isElement(j.anchorNode)?j.anchorNode:j.anchorNode.parentElement;if(j&&["IMG","INPUT"].includes(K.tagName)||K.closest('[contenteditable="true"]')===null)return!1;var q=this.Editor.BlockManager.getBlock(j.anchorNode);return!!q&&q.tool.inlineTools.size!==0}},{key:"recalculateWidth",value:function(){this.width=this.nodes.wrapper.offsetWidth}},{key:"addConversionToggler",value:function(){var j=this;this.nodes.conversionToggler=C.default.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=C.default.make("div",this.CSS.conversionTogglerContent);var F=C.default.make("div",this.CSS.conversionTogglerArrow,{innerHTML:O.IconChevronDown});this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(F),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",function(){j.Editor.ConversionToolbar.toggle(function(K){!K&&j.opened?j.flipper.activate():j.opened&&j.flipper.deactivate()})}),_.isMobileScreen()===!1&&this.tooltip.onHover(this.nodes.conversionToggler,b.default.ui(M.I18nInternalNS.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}},{key:"setConversionTogglerContent",value:(P=(0,u.default)(l.default.mark(function j(){var F,K,q,W,Y,Z;return l.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return F=this.Editor.BlockManager,K=F.currentBlock,q=K.name,W=K.tool.conversionConfig,Y=W&&W.export,this.nodes.conversionToggler.hidden=!Y,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!Y),X.next=9,K.getActiveToolboxEntry();case 9:if(X.t0=X.sent,X.t0){X.next=12;break}X.t0={};case 12:Z=X.t0,this.nodes.conversionTogglerContent.innerHTML=Z.icon||Z.title||_.capitalize(q);case 14:case"end":return X.stop()}},j,this)})),function(){return P.apply(this,arguments)})},{key:"prepareConversionToolbar",value:function(){var j=this.Editor.ConversionToolbar.make();C.default.append(this.nodes.wrapper,j)}},{key:"addToolsFiltered",value:function(){var j=this,F=c.default.get(),K=this.Editor.BlockManager.getBlock(F.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,Array.from(K.tool.inlineTools.values()).forEach(function(q){j.addTool(q)}),this.recalculateWidth()}},{key:"addTool",value:function(j){var F=this,K=j.create(),q=K.render();if(q){if(q.dataset.tool=j.name,this.nodes.buttons.appendChild(q),this.toolsInstances.set(j.name,K),_.isFunction(K.renderActions)){var W=K.renderActions();this.nodes.actions.appendChild(W)}this.listeners.on(q,"click",function(Q){F.toolClicked(K),Q.preventDefault()});var Y=this.getToolShortcut(j.name);if(Y)try{this.enableShortcuts(K,Y)}catch(Q){}var Z=C.default.make("div"),X=b.default.t(M.I18nInternalNS.toolNames,j.title||_.capitalize(j.name));Z.appendChild(C.default.text(X)),Y&&Z.appendChild(C.default.make("div",this.CSS.inlineToolbarShortcut,{textContent:_.beautifyShortcut(Y)})),_.isMobileScreen()===!1&&this.tooltip.onHover(q,Z,{placement:"top",hidingDelay:100}),K.checkState(c.default.get())}else _.log("Render method must return an instance of Node","warn",j.name)}},{key:"getToolShortcut",value:function(j){var F=this.Editor.Tools,K=F.inlineTools.get(j),q=F.internal.inlineTools;return Array.from(q.keys()).includes(j)?this.inlineTools[j][S.CommonInternalSettings.Shortcut]:K.shortcut}},{key:"enableShortcuts",value:function(j,F){var K=this;E.default.add({name:F,handler:function(q){var W=K.Editor.BlockManager.currentBlock;W&&W.tool.enabledInlineTools&&(q.preventDefault(),K.toolClicked(j))},on:this.Editor.UI.nodes.redactor})}},{key:"toolClicked",value:function(j){var F=c.default.range;j.surround(F),this.checkToolsState(),j.renderActions!==void 0&&this.flipper.deactivate()}},{key:"checkToolsState",value:function(){this.toolsInstances.forEach(function(j){j.checkState(c.default.get())})}},{key:"inlineTools",get:function(){var j={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(function(F){var K=(0,p.default)(F,2),q=K[0],W=K[1];j[q]=W.create()}),j}},{key:"enableFlipper",value:function(){this.flipper=new h.default({focusedItemClass:this.CSS.focusedButton,allowedKeys:[_.keyCodes.ENTER,_.keyCodes.TAB]})}}]),H}(x.default);a.default=T,T.displayName="InlineToolbar",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(20),e(41),e(30),e(21),e(2),e(3),e(5),e(6),e(4),e(7),e(390),e(9),e(8),e(391),e(392),e(393),e(394),e(395),e(399),e(400),e(401),e(185)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x,C,c,_,h,b,M,E,w,S,O,B,A){"use strict";var R=e(1);function T(H){if(typeof WeakMap!="function")return null;var j=new WeakMap,F=new WeakMap;return(T=function(K){return K?F:j})(H)}function L(H){var j=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}();return function(){var F,K=(0,v.default)(H);if(j){var q=(0,v.default)(this).constructor;F=Reflect.construct(K,arguments,q)}else F=K.apply(this,arguments);return(0,y.default)(this,F)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=R(l),u=R(u),d=R(d),p=R(p),g=R(g),m=R(m),k=R(k),y=R(y),v=R(v),x=R(x),C=R(C),c=R(c),_=function(H,j){if(!j&&H&&H.__esModule)return H;if(H===null||s(H)!=="object"&&typeof H!="function")return{default:H};var F=T(j);if(F&&F.has(H))return F.get(H);var K={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in H)if(W!=="default"&&Object.prototype.hasOwnProperty.call(H,W)){var Y=q?Object.getOwnPropertyDescriptor(H,W):null;Y&&(Y.get||Y.set)?Object.defineProperty(K,W,Y):K[W]=H[W]}return K.default=H,F&&F.set(H,K),K}(_),h=R(h),b=R(b),M=R(M),E=R(E),w=R(w),S=R(S),O=R(O),B=R(B),A=R(A);var P=function(H,j,F,K){var q,W=arguments.length,Y=W<3?j:K===null?K=Object.getOwnPropertyDescriptor(j,F):K;if((typeof Reflect=="undefined"?"undefined":(0,x.default)(Reflect))==="object"&&typeof Reflect.decorate=="function")Y=Reflect.decorate(H,j,F,K);else for(var Z=H.length-1;Z>=0;Z--)(q=H[Z])&&(Y=(W<3?q(Y):W>3?q(j,F,Y):q(j,F))||Y);return W>3&&Y&&Object.defineProperty(j,F,Y),Y},D=function(H){(0,k.default)(K,H);var j,F=L(K);function K(){var q;return(0,g.default)(this,K),(q=F.apply(this,arguments)).stubTool="stub",q.toolsAvailable=new A.default,q.toolsUnavailable=new A.default,q}return(0,m.default)(K,[{key:"available",get:function(){return this.toolsAvailable}},{key:"unavailable",get:function(){return this.toolsUnavailable}},{key:"inlineTools",get:function(){return this.available.inlineTools}},{key:"blockTools",get:function(){return this.available.blockTools}},{key:"blockTunes",get:function(){return this.available.blockTunes}},{key:"defaultTool",get:function(){return this.blockTools.get(this.config.defaultBlock)}},{key:"internal",get:function(){return this.available.internalTools}},{key:"prepare",value:(j=(0,p.default)(l.default.mark(function q(){var W,Y,Z=this;return l.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(this.validateTools(),this.config.tools=_.deepMerge({},this.internalTools,this.config.tools),Object.prototype.hasOwnProperty.call(this.config,"tools")&&Object.keys(this.config.tools).length!==0){X.next=4;break}throw Error("Can't start without tools");case 4:if(W=this.prepareConfig(),this.factory=new w.default(W,this.config,this.Editor.API),(Y=this.getListOfPrepareFunctions(W)).length!==0){X.next=9;break}return X.abrupt("return",Promise.resolve());case 9:return X.next=11,_.sequence(Y,function(Q){Z.toolPrepareMethodSuccess(Q)},function(Q){Z.toolPrepareMethodFallback(Q)});case 11:this.prepareBlockTools();case 12:case"end":return X.stop()}},q,this)})),function(){return j.apply(this,arguments)})},{key:"getAllInlineToolsSanitizeConfig",value:function(){var q={};return Array.from(this.inlineTools.values()).forEach(function(W){Object.assign(q,W.sanitizeConfig)}),q}},{key:"destroy",value:function(){Object.values(this.available).forEach(function(){var q=(0,p.default)(l.default.mark(function W(Y){return l.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(!_.isFunction(Y.reset)){Z.next=3;break}return Z.next=3,Y.reset();case 3:case"end":return Z.stop()}},W)}));return function(W){return q.apply(this,arguments)}}())}},{key:"internalTools",get:function(){return{bold:{class:h.default,isInternal:!0},italic:{class:b.default,isInternal:!0},link:{class:M.default,isInternal:!0},paragraph:{class:C.default,inlineToolbar:!0,isInternal:!0},stub:{class:E.default,isInternal:!0},moveUp:{class:B.default,isInternal:!0},delete:{class:O.default,isInternal:!0},moveDown:{class:S.default,isInternal:!0}}}},{key:"toolPrepareMethodSuccess",value:function(q){var W=this.factory.get(q.toolName);if(W.isInline()){var Y=["render","surround","checkState"].filter(function(Z){return!W.create()[Z]});if(Y.length)return _.log("Incorrect Inline Tool: ".concat(W.name,". Some of required methods is not implemented %o"),"warn",Y),void this.toolsUnavailable.set(W.name,W)}this.toolsAvailable.set(W.name,W)}},{key:"toolPrepareMethodFallback",value:function(q){this.toolsUnavailable.set(q.toolName,this.factory.get(q.toolName))}},{key:"getListOfPrepareFunctions",value:function(q){var W=[];return Object.entries(q).forEach(function(Y){var Z=(0,d.default)(Y,2),X=Z[0],Q=Z[1];W.push({function:_.isFunction(Q.class.prepare)?Q.class.prepare:function(){},data:{toolName:X,config:Q.config}})}),W}},{key:"prepareBlockTools",value:function(){var q=this;Array.from(this.blockTools.values()).forEach(function(W){q.assignInlineToolsToBlockTool(W),q.assignBlockTunesToBlockTool(W)})}},{key:"assignInlineToolsToBlockTool",value:function(q){var W=this;this.config.inlineToolbar!==!1&&(q.enabledInlineTools!==!0?Array.isArray(q.enabledInlineTools)&&(q.inlineTools=new A.default(q.enabledInlineTools.map(function(Y){return[Y,W.inlineTools.get(Y)]}))):q.inlineTools=new A.default(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(function(Y){return[Y,W.inlineTools.get(Y)]}):Array.from(this.inlineTools.entries())))}},{key:"assignBlockTunesToBlockTool",value:function(q){var W=this;if(q.enabledBlockTunes!==!1)if(Array.isArray(q.enabledBlockTunes)){var Y=new A.default(q.enabledBlockTunes.map(function(X){return[X,W.blockTunes.get(X)]}));q.tunes=new A.default([].concat((0,u.default)(Y),(0,u.default)(this.blockTunes.internalTools)))}else if(Array.isArray(this.config.tunes)){var Z=new A.default(this.config.tunes.map(function(X){return[X,W.blockTunes.get(X)]}));q.tunes=new A.default([].concat((0,u.default)(Z),(0,u.default)(this.blockTunes.internalTools)))}else q.tunes=this.blockTunes.internalTools}},{key:"validateTools",value:function(){for(var q in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,q)){if(q in this.internalTools)return;var W=this.config.tools[q];if(!_.isFunction(W)&&!_.isFunction(W.class))throw Error("Tool \xAB".concat(q,"\xBB must be a constructor function or an object with function in the \xABclass\xBB property"))}}},{key:"prepareConfig",value:function(){var q={};for(var W in this.config.tools)_.isObject(this.config.tools[W])?q[W]=this.config.tools[W]:q[W]={class:this.config.tools[W]};return q}}]),K}(c.default);a.default=D,D.displayName="Tools",P([_.cacheable],D.prototype,"getAllInlineToolsSanitizeConfig",null),r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(30),e(2),e(3),e(5),e(6),e(4),e(153)],(o=typeof(i=function(s,a,l,u,d,p,g,m){"use strict";var k=e(1);function y(x){var C=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}();return function(){var c,_=(0,g.default)(x);if(C){var h=(0,g.default)(this).constructor;c=Reflect.construct(_,arguments,h)}else c=_.apply(this,arguments);return(0,p.default)(this,c)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=k(a),l=k(l),u=k(u),d=k(d),p=k(p),g=k(g);var v=function(x){(0,d.default)(c,x);var C=y(c);function c(){return(0,l.default)(this,c),C.apply(this,arguments)}return(0,u.default)(c,[{key:"blockTools",get:function(){return new c(Array.from(this.entries()).filter(function(_){return(0,a.default)(_,2)[1].isBlock()}))}},{key:"inlineTools",get:function(){return new c(Array.from(this.entries()).filter(function(_){return(0,a.default)(_,2)[1].isInline()}))}},{key:"blockTunes",get:function(){return new c(Array.from(this.entries()).filter(function(_){return(0,a.default)(_,2)[1].isTune()}))}},{key:"internalTools",get:function(){return new c(Array.from(this.entries()).filter(function(_){return(0,a.default)(_,2)[1].isInternal}))}},{key:"externalTools",get:function(){return new c(Array.from(this.entries()).filter(function(_){return!(0,a.default)(_,2)[1].isInternal}))}}]),c}((0,(m=k(m)).default)(Map));s.default=v,v.displayName="ToolsCollection",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(20),e(41),e(30),e(21),e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(8),e(25),e(61),e(67)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x,C,c,_,h,b){"use strict";var M=e(1);function E(O){if(typeof WeakMap!="function")return null;var B=new WeakMap,A=new WeakMap;return(E=function(R){return R?A:B})(O)}function w(O){var B=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(A){return!1}}();return function(){var A,R=(0,v.default)(O);if(B){var T=(0,v.default)(this).constructor;A=Reflect.construct(R,arguments,T)}else A=R.apply(this,arguments);return(0,y.default)(this,A)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=M(l),u=M(u),d=M(d),p=M(p),g=M(g),m=M(m),k=M(k),y=M(y),v=M(v),x=M(x),C=M(C),c=function(O,B){if(!B&&O&&O.__esModule)return O;if(O===null||s(O)!=="object"&&typeof O!="function")return{default:O};var A=E(B);if(A&&A.has(O))return A.get(O);var R={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in O)if(L!=="default"&&Object.prototype.hasOwnProperty.call(O,L)){var P=T?Object.getOwnPropertyDescriptor(O,L):null;P&&(P.get||P.set)?Object.defineProperty(R,L,P):R[L]=O[L]}return R.default=O,A&&A.set(O,R),R}(c),_=M(_),h=M(h),b=M(b);var S=function(O){(0,k.default)(R,O);var B,A=w(R);function R(){var T;return(0,g.default)(this,R),(T=A.apply(this,arguments)).isMobile=!1,T.contentRectCache=void 0,T.resizeDebouncer=c.debounce(function(){T.windowResize()},200),T}return(0,m.default)(R,[{key:"events",get:function(){return{blockHovered:"block-hovered"}}},{key:"CSS",get:function(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorLoader:"codex-editor__loader",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}},{key:"contentRect",get:function(){if(this.contentRectCache)return this.contentRectCache;var T=this.nodes.wrapper.querySelector(".".concat(h.default.CSS.content));return T?(this.contentRectCache=T.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}},{key:"addLoader",value:function(){this.nodes.loader=C.default.make("div",this.CSS.editorLoader),this.nodes.wrapper.prepend(this.nodes.loader),this.nodes.redactor.classList.add(this.CSS.editorZoneHidden)}},{key:"removeLoader",value:function(){this.nodes.loader.remove(),this.nodes.redactor.classList.remove(this.CSS.editorZoneHidden)}},{key:"prepare",value:(B=(0,p.default)(l.default.mark(function T(){return l.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:this.checkIsMobile(),this.make(),this.addLoader(),this.loadStyles();case 4:case"end":return L.stop()}},T,this)})),function(){return B.apply(this,arguments)})},{key:"toggleReadOnly",value:function(T){T?this.disableModuleBindings():this.enableModuleBindings()}},{key:"checkEmptiness",value:function(){var T=this.Editor.BlockManager;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,T.isEditorEmpty)}},{key:"someToolbarOpened",get:function(){var T=this.Editor,L=T.Toolbar,P=T.BlockSettings,D=T.InlineToolbar,H=T.ConversionToolbar;return P.opened||D.opened||H.opened||L.toolbox.opened}},{key:"someFlipperButtonFocused",get:function(){return!!this.Editor.Toolbar.toolbox.hasFocus()||Object.entries(this.Editor).filter(function(T){var L=(0,d.default)(T,2);return L[0],L[1].flipper instanceof b.default}).some(function(T){var L=(0,d.default)(T,2);return L[0],L[1].flipper.hasFocus()})}},{key:"destroy",value:function(){this.nodes.holder.innerHTML=""}},{key:"closeAllToolbars",value:function(){var T=this.Editor,L=T.Toolbar,P=T.BlockSettings,D=T.InlineToolbar,H=T.ConversionToolbar;P.close(),D.close(),H.close(),L.toolbox.close()}},{key:"checkIsMobile",value:function(){this.isMobile=window.innerWidth<c.mobileScreenBreakpoint}},{key:"make",value:function(){this.nodes.holder=C.default.getHolder(this.config.holder),this.nodes.wrapper=C.default.make("div",[this.CSS.editorWrapper].concat((0,u.default)(this.isRtl?[this.CSS.editorRtlFix]:[]))),this.nodes.redactor=C.default.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}},{key:"loadStyles",value:function(){var T=e(402);if(!C.default.get("editor-js-styles")){var L=C.default.make("style",null,{id:"editor-js-styles",textContent:T.toString()});C.default.prepend(document.head,L)}}},{key:"enableModuleBindings",value:function(){var T=this;this.readOnlyMutableListeners.on(this.nodes.redactor,"click",function(L){T.redactorClicked(L)},!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",function(L){T.documentTouched(L)},!0),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",function(L){T.documentTouched(L)},!0),this.readOnlyMutableListeners.on(document,"keydown",function(L){T.documentKeydown(L)},!0),this.readOnlyMutableListeners.on(document,"mousedown",function(L){T.documentClicked(L)},!0),this.readOnlyMutableListeners.on(document,"selectionchange",function(){T.selectionChanged()},!0),this.readOnlyMutableListeners.on(window,"resize",function(){T.resizeDebouncer()},{passive:!0}),this.watchBlockHoveredEvents()}},{key:"watchBlockHoveredEvents",value:function(){var T,L=this;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",c.throttle(function(P){var D=P.target.closest(".ce-block");L.Editor.BlockSelection.anyBlockSelected||D&&T!==D&&(T=D,L.eventsDispatcher.emit(L.events.blockHovered,{block:L.Editor.BlockManager.getBlockByChildNode(D)}))},20),{passive:!0})}},{key:"disableModuleBindings",value:function(){this.readOnlyMutableListeners.clearAll()}},{key:"windowResize",value:function(){this.contentRectCache=null,this.checkIsMobile()}},{key:"documentKeydown",value:function(T){switch(T.keyCode){case c.keyCodes.ENTER:this.enterPressed(T);break;case c.keyCodes.BACKSPACE:this.backspacePressed(T);break;case c.keyCodes.ESC:this.escapePressed(T);break;default:this.defaultBehaviour(T)}}},{key:"defaultBehaviour",value:function(T){var L=this.Editor.BlockManager.currentBlock,P=T.target.closest(".".concat(this.CSS.editorWrapper)),D=T.altKey||T.ctrlKey||T.metaKey||T.shiftKey;L===void 0||P!==null?P||L&&D||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close()):this.Editor.BlockEvents.keydown(T)}},{key:"backspacePressed",value:function(T){var L=this.Editor,P=L.BlockManager,D=L.BlockSelection,H=L.Caret;if(D.anyBlockSelected&&!_.default.isSelectionExists){var j=P.removeSelectedBlocks();H.setToBlock(P.insertDefaultBlockAtIndex(j,!0),H.positions.START),D.clearSelection(T),T.preventDefault(),T.stopPropagation(),T.stopImmediatePropagation()}}},{key:"escapePressed",value:function(T){this.Editor.BlockSelection.clearSelection(T),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}},{key:"enterPressed",value:function(T){var L=this.Editor,P=L.BlockManager,D=L.BlockSelection,H=P.currentBlockIndex>=0;if(D.anyBlockSelected&&!_.default.isSelectionExists)return D.clearSelection(T),T.preventDefault(),T.stopImmediatePropagation(),void T.stopPropagation();if(!this.someToolbarOpened&&H&&T.target.tagName==="BODY"){var j=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(j),this.Editor.BlockManager.highlightCurrentNode(),this.Editor.Toolbar.moveAndOpen(j)}this.Editor.BlockSelection.clearSelection(T)}},{key:"documentClicked",value:function(T){if(T.isTrusted){var L=T.target;this.nodes.holder.contains(L)||_.default.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close());var P=this.Editor.BlockSettings.nodes.wrapper.contains(L),D=this.Editor.Toolbar.nodes.settingsToggler.contains(L),H=P||D;if(this.Editor.BlockSettings.opened&&!H){this.Editor.BlockSettings.close();var j=this.Editor.BlockManager.getBlockByChildNode(L);this.Editor.Toolbar.moveAndOpen(j)}this.Editor.BlockSelection.clearSelection(T)}}},{key:"documentTouched",value:function(T){var L=T.target;if(L===this.nodes.redactor){var P=T instanceof MouseEvent?T.clientX:T.touches[0].clientX,D=T instanceof MouseEvent?T.clientY:T.touches[0].clientY;L=document.elementFromPoint(P,D)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(L),this.Editor.BlockManager.highlightCurrentNode()}catch(H){this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}},{key:"redactorClicked",value:function(T){var L=this.Editor.BlockSelection;if(_.default.isCollapsed){var P=function(){T.stopImmediatePropagation(),T.stopPropagation()},D=T.target,H=T.metaKey||T.ctrlKey;if(C.default.isAnchor(D)&&H){P();var j=D.getAttribute("href"),F=c.getValidUrl(j);c.openTab(F)}else{var K=this.Editor.BlockManager.getBlockByIndex(-1),q=C.default.offset(K.holder).bottom,W=T.pageY;if(T.target instanceof Element&&T.target.isEqualNode(this.nodes.redactor)&&!L.anyBlockSelected&&q<W){P();var Y=this.Editor,Z=Y.BlockManager,X=Y.Caret,Q=Y.Toolbar;Z.lastBlock.tool.isDefault&&Z.lastBlock.isEmpty||Z.insertAtEnd(),X.setToTheLastBlock(),Q.moveAndOpen(Z.lastBlock)}}}}},{key:"selectionChanged",value:function(){var T=this.Editor,L=T.CrossBlockSelection,P=T.BlockSelection,D=_.default.anchorElement;if(L.isCrossBlockSelectionStarted&&P.anyBlockSelected&&_.default.get().removeAllRanges(),D){var H=D.closest(".".concat(h.default.CSS.content))===null;if(H&&(this.Editor.InlineToolbar.containsNode(D)||this.Editor.InlineToolbar.close(),D.dataset.inlineToolbar!=="true"))return;this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(D);var j=H!==!0;this.Editor.InlineToolbar.tryToShow(!0,j)}else _.default.range||this.Editor.InlineToolbar.close()}}]),R}(x.default);a.default=S,S.displayName="UI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){e(188),r.exports=e(361)},function(r,t,e){e(189)},function(r,t,e){"use strict";e(190),e(333),e(335),e(338),e(340),e(342),e(344),e(346),e(348),e(350),e(352),e(354),e(356),e(360)},function(r,t,e){e(191),e(194),e(195),e(196),e(197),e(198),e(199),e(200),e(201),e(202),e(203),e(204),e(205),e(206),e(207),e(208),e(209),e(210),e(211),e(212),e(213),e(214),e(215),e(216),e(217),e(218),e(219),e(220),e(221),e(222),e(223),e(224),e(225),e(226),e(227),e(228),e(229),e(230),e(231),e(232),e(233),e(234),e(235),e(237),e(238),e(239),e(240),e(241),e(242),e(243),e(244),e(245),e(246),e(247),e(248),e(249),e(250),e(251),e(252),e(253),e(254),e(255),e(256),e(257),e(258),e(259),e(260),e(261),e(262),e(263),e(264),e(265),e(266),e(267),e(268),e(269),e(270),e(272),e(273),e(275),e(276),e(277),e(278),e(279),e(280),e(281),e(283),e(284),e(285),e(286),e(287),e(288),e(289),e(290),e(291),e(292),e(293),e(294),e(295),e(106),e(296),e(137),e(297),e(138),e(298),e(299),e(300),e(301),e(139),e(304),e(305),e(306),e(307),e(308),e(309),e(310),e(311),e(312),e(313),e(314),e(315),e(316),e(317),e(318),e(319),e(320),e(321),e(322),e(323),e(324),e(325),e(326),e(327),e(328),e(329),e(330),e(331),e(332),r.exports=e(16)},function(r,t,e){"use strict";var i=e(10),n=e(26),o=e(17),s=e(0),a=e(23),l=e(43).KEY,u=e(11),d=e(70),p=e(55),g=e(45),m=e(14),k=e(87),y=e(118),v=e(193),x=e(73),C=e(12),c=e(13),_=e(22),h=e(28),b=e(42),M=e(44),E=e(49),w=e(121),S=e(34),O=e(72),B=e(18),A=e(47),R=S.f,T=B.f,L=w.f,P=i.Symbol,D=i.JSON,H=D&&D.stringify,j=m("_hidden"),F=m("toPrimitive"),K={}.propertyIsEnumerable,q=d("symbol-registry"),W=d("symbols"),Y=d("op-symbols"),Z=Object.prototype,X=typeof P=="function"&&!!O.f,Q=i.QObject,ue=!Q||!Q.prototype||!Q.prototype.findChild,ce=o&&u(function(){return E(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a!=7})?function(le,he,ye){var Ae=R(Z,he);Ae&&delete Z[he],T(le,he,ye),Ae&&le!==Z&&T(Z,he,Ae)}:T,ne=function(le){var he=W[le]=E(P.prototype);return he._k=le,he},ge=X&&typeof P.iterator=="symbol"?function(le){return typeof le=="symbol"}:function(le){return le instanceof P},re=function(le,he,ye){return le===Z&&re(Y,he,ye),C(le),he=b(he,!0),C(ye),n(W,he)?(ye.enumerable?(n(le,j)&&le[j][he]&&(le[j][he]=!1),ye=E(ye,{enumerable:M(0,!1)})):(n(le,j)||T(le,j,M(1,{})),le[j][he]=!0),ce(le,he,ye)):T(le,he,ye)},pe=function(le,he){C(le);for(var ye,Ae=v(he=h(he)),qe=0,nt=Ae.length;nt>qe;)re(le,ye=Ae[qe++],he[ye]);return le},Ce=function(le){var he=K.call(this,le=b(le,!0));return!(this===Z&&n(W,le)&&!n(Y,le))&&(!(he||!n(this,le)||!n(W,le)||n(this,j)&&this[j][le])||he)},be=function(le,he){if(le=h(le),he=b(he,!0),le!==Z||!n(W,he)||n(Y,he)){var ye=R(le,he);return!ye||!n(W,he)||n(le,j)&&le[j][he]||(ye.enumerable=!0),ye}},xe=function(le){for(var he,ye=L(h(le)),Ae=[],qe=0;ye.length>qe;)n(W,he=ye[qe++])||he==j||he==l||Ae.push(he);return Ae},Re=function(le){for(var he,ye=le===Z,Ae=L(ye?Y:h(le)),qe=[],nt=0;Ae.length>nt;)!n(W,he=Ae[nt++])||ye&&!n(Z,he)||qe.push(W[he]);return qe};X||(a((P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var le=g(arguments.length>0?arguments[0]:void 0),he=function(ye){this===Z&&he.call(Y,ye),n(this,j)&&n(this[j],le)&&(this[j][le]=!1),ce(this,le,M(1,ye))};return o&&ue&&ce(Z,le,{configurable:!0,set:he}),ne(le)}).prototype,"toString",function(){return this._k}),S.f=be,B.f=re,e(50).f=w.f=xe,e(63).f=Ce,O.f=Re,o&&!e(46)&&a(Z,"propertyIsEnumerable",Ce,!0),k.f=function(le){return ne(m(le))}),s(s.G+s.W+s.F*!X,{Symbol:P});for(var je="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Be=0;je.length>Be;)m(je[Be++]);for(var ze=A(m.store),Ne=0;ze.length>Ne;)y(ze[Ne++]);s(s.S+s.F*!X,"Symbol",{for:function(le){return n(q,le+="")?q[le]:q[le]=P(le)},keyFor:function(le){if(!ge(le))throw TypeError(le+" is not a symbol!");for(var he in q)if(q[he]===le)return he},useSetter:function(){ue=!0},useSimple:function(){ue=!1}}),s(s.S+s.F*!X,"Object",{create:function(le,he){return he===void 0?E(le):pe(E(le),he)},defineProperty:re,defineProperties:pe,getOwnPropertyDescriptor:be,getOwnPropertyNames:xe,getOwnPropertySymbols:Re});var De=u(function(){O.f(1)});s(s.S+s.F*De,"Object",{getOwnPropertySymbols:function(le){return O.f(_(le))}}),D&&s(s.S+s.F*(!X||u(function(){var le=P();return H([le])!="[null]"||H({a:le})!="{}"||H(Object(le))!="{}"})),"JSON",{stringify:function(le){for(var he,ye,Ae=[le],qe=1;arguments.length>qe;)Ae.push(arguments[qe++]);if(ye=he=Ae[1],(c(he)||le!==void 0)&&!ge(le))return x(he)||(he=function(nt,st){if(typeof ye=="function"&&(st=ye.call(this,nt,st)),!ge(st))return st}),Ae[1]=he,H.apply(D,Ae)}}),P.prototype[F]||e(27)(P.prototype,F,P.prototype.valueOf),p(P,"Symbol"),p(Math,"Math",!0),p(i.JSON,"JSON",!0)},function(r,t,e){r.exports=e(70)("native-function-to-string",Function.toString)},function(r,t,e){var i=e(47),n=e(72),o=e(63);r.exports=function(s){var a=i(s),l=n.f;if(l)for(var u,d=l(s),p=o.f,g=0;d.length>g;)p.call(s,u=d[g++])&&a.push(u);return a}},function(r,t,e){var i=e(0);i(i.S,"Object",{create:e(49)})},function(r,t,e){var i=e(0);i(i.S+i.F*!e(17),"Object",{defineProperty:e(18).f})},function(r,t,e){var i=e(0);i(i.S+i.F*!e(17),"Object",{defineProperties:e(120)})},function(r,t,e){var i=e(28),n=e(34).f;e(35)("getOwnPropertyDescriptor",function(){return function(o,s){return n(i(o),s)}})},function(r,t,e){var i=e(22),n=e(51);e(35)("getPrototypeOf",function(){return function(o){return n(i(o))}})},function(r,t,e){var i=e(22),n=e(47);e(35)("keys",function(){return function(o){return n(i(o))}})},function(r,t,e){e(35)("getOwnPropertyNames",function(){return e(121).f})},function(r,t,e){var i=e(13),n=e(43).onFreeze;e(35)("freeze",function(o){return function(s){return o&&i(s)?o(n(s)):s}})},function(r,t,e){var i=e(13),n=e(43).onFreeze;e(35)("seal",function(o){return function(s){return o&&i(s)?o(n(s)):s}})},function(r,t,e){var i=e(13),n=e(43).onFreeze;e(35)("preventExtensions",function(o){return function(s){return o&&i(s)?o(n(s)):s}})},function(r,t,e){var i=e(13);e(35)("isFrozen",function(n){return function(o){return!i(o)||!!n&&n(o)}})},function(r,t,e){var i=e(13);e(35)("isSealed",function(n){return function(o){return!i(o)||!!n&&n(o)}})},function(r,t,e){var i=e(13);e(35)("isExtensible",function(n){return function(o){return!!i(o)&&(!n||n(o))}})},function(r,t,e){var i=e(0);i(i.S+i.F,"Object",{assign:e(122)})},function(r,t,e){var i=e(0);i(i.S,"Object",{is:e(123)})},function(r,t,e){var i=e(0);i(i.S,"Object",{setPrototypeOf:e(91).set})},function(r,t,e){"use strict";var i=e(64),n={};n[e(14)("toStringTag")]="z",n+""!="[object z]"&&e(23)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(r,t,e){var i=e(0);i(i.P,"Function",{bind:e(124)})},function(r,t,e){var i=e(18).f,n=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in n||e(17)&&i(n,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(s){return""}}})},function(r,t,e){"use strict";var i=e(13),n=e(51),o=e(14)("hasInstance"),s=Function.prototype;o in s||e(18).f(s,o,{value:function(a){if(typeof this!="function"||!i(a))return!1;if(!i(this.prototype))return a instanceof this;for(;a=n(a);)if(this.prototype===a)return!0;return!1}})},function(r,t,e){var i=e(0),n=e(126);i(i.G+i.F*(parseInt!=n),{parseInt:n})},function(r,t,e){var i=e(0),n=e(127);i(i.G+i.F*(parseFloat!=n),{parseFloat:n})},function(r,t,e){"use strict";var i=e(10),n=e(26),o=e(38),s=e(93),a=e(42),l=e(11),u=e(50).f,d=e(34).f,p=e(18).f,g=e(56).trim,m=i.Number,k=m,y=m.prototype,v=o(e(49)(y))=="Number",x="trim"in String.prototype,C=function(b){var M=a(b,!1);if(typeof M=="string"&&M.length>2){var E,w,S,O=(M=x?M.trim():g(M,3)).charCodeAt(0);if(O===43||O===45){if((E=M.charCodeAt(2))===88||E===120)return NaN}else if(O===48){switch(M.charCodeAt(1)){case 66:case 98:w=2,S=49;break;case 79:case 111:w=8,S=55;break;default:return+M}for(var B,A=M.slice(2),R=0,T=A.length;R<T;R++)if((B=A.charCodeAt(R))<48||B>S)return NaN;return parseInt(A,w)}}return+M};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(b){var M=arguments.length<1?0:b,E=this;return E instanceof m&&(v?l(function(){y.valueOf.call(E)}):o(E)!="Number")?s(new k(C(M)),E,m):C(M)};for(var c,_=e(17)?u(k):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),h=0;_.length>h;h++)n(k,c=_[h])&&!n(m,c)&&p(m,c,d(k,c));m.prototype=y,y.constructor=m,e(23)(i,"Number",m)}},function(r,t,e){"use strict";var i=e(0),n=e(33),o=e(128),s=e(94),a=1 .toFixed,l=Math.floor,u=[0,0,0,0,0,0],d="Number.toFixed: incorrect invocation!",p=function(y,v){for(var x=-1,C=v;++x<6;)C+=y*u[x],u[x]=C%1e7,C=l(C/1e7)},g=function(y){for(var v=6,x=0;--v>=0;)x+=u[v],u[v]=l(x/y),x=x%y*1e7},m=function(){for(var y=6,v="";--y>=0;)if(v!==""||y===0||u[y]!==0){var x=String(u[y]);v=v===""?x:v+s.call("0",7-x.length)+x}return v},k=function(y,v,x){return v===0?x:v%2==1?k(y,v-1,x*y):k(y*y,v/2,x)};i(i.P+i.F*(!!a&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!e(11)(function(){a.call({})})),"Number",{toFixed:function(y){var v,x,C,c,_=o(this,d),h=n(y),b="",M="0";if(h<0||h>20)throw RangeError(d);if(_!=_)return"NaN";if(_<=-1e21||_>=1e21)return String(_);if(_<0&&(b="-",_=-_),_>1e-21)if(x=(v=function(E){for(var w=0,S=E;S>=4096;)w+=12,S/=4096;for(;S>=2;)w+=1,S/=2;return w}(_*k(2,69,1))-69)<0?_*k(2,-v,1):_/k(2,v,1),x*=4503599627370496,(v=52-v)>0){for(p(0,x),C=h;C>=7;)p(1e7,0),C-=7;for(p(k(10,C,1),0),C=v-1;C>=23;)g(1<<23),C-=23;g(1<<C),p(1,1),g(2),M=m()}else p(0,x),p(1<<-v,0),M=m()+s.call("0",h);return M=h>0?b+((c=M.length)<=h?"0."+s.call("0",h-c)+M:M.slice(0,c-h)+"."+M.slice(c-h)):b+M}})},function(r,t,e){"use strict";var i=e(0),n=e(11),o=e(128),s=1 .toPrecision;i(i.P+i.F*(n(function(){return s.call(1,void 0)!=="1"})||!n(function(){s.call({})})),"Number",{toPrecision:function(a){var l=o(this,"Number#toPrecision: incorrect invocation!");return a===void 0?s.call(l):s.call(l,a)}})},function(r,t,e){var i=e(0);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(r,t,e){var i=e(0),n=e(10).isFinite;i(i.S,"Number",{isFinite:function(o){return typeof o=="number"&&n(o)}})},function(r,t,e){var i=e(0);i(i.S,"Number",{isInteger:e(129)})},function(r,t,e){var i=e(0);i(i.S,"Number",{isNaN:function(n){return n!=n}})},function(r,t,e){var i=e(0),n=e(129),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(s){return n(s)&&o(s)<=9007199254740991}})},function(r,t,e){var i=e(0);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(r,t,e){var i=e(0);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(r,t,e){var i=e(0),n=e(127);i(i.S+i.F*(Number.parseFloat!=n),"Number",{parseFloat:n})},function(r,t,e){var i=e(0),n=e(126);i(i.S+i.F*(Number.parseInt!=n),"Number",{parseInt:n})},function(r,t,e){var i=e(0),n=e(130),o=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&Math.floor(s(Number.MAX_VALUE))==710&&s(1/0)==1/0),"Math",{acosh:function(a){return(a=+a)<1?NaN:a>9490626562425156e-8?Math.log(a)+Math.LN2:n(a-1+o(a-1)*o(a+1))}})},function(r,t,e){var i=e(0),n=Math.asinh;i(i.S+i.F*!(n&&1/n(0)>0),"Math",{asinh:function o(s){return isFinite(s=+s)&&s!=0?s<0?-o(-s):Math.log(s+Math.sqrt(s*s+1)):s}})},function(r,t,e){var i=e(0),n=Math.atanh;i(i.S+i.F*!(n&&1/n(-0)<0),"Math",{atanh:function(o){return(o=+o)==0?o:Math.log((1+o)/(1-o))/2}})},function(r,t,e){var i=e(0),n=e(95);i(i.S,"Math",{cbrt:function(o){return n(o=+o)*Math.pow(Math.abs(o),1/3)}})},function(r,t,e){var i=e(0);i(i.S,"Math",{clz32:function(n){return(n>>>=0)?31-Math.floor(Math.log(n+.5)*Math.LOG2E):32}})},function(r,t,e){var i=e(0),n=Math.exp;i(i.S,"Math",{cosh:function(o){return(n(o=+o)+n(-o))/2}})},function(r,t,e){var i=e(0),n=e(96);i(i.S+i.F*(n!=Math.expm1),"Math",{expm1:n})},function(r,t,e){var i=e(0);i(i.S,"Math",{fround:e(236)})},function(r,t,e){var i=e(95),n=Math.pow,o=n(2,-52),s=n(2,-23),a=n(2,127)*(2-s),l=n(2,-126);r.exports=Math.fround||function(u){var d,p,g=Math.abs(u),m=i(u);return g<l?m*(g/l/s+1/o-1/o)*l*s:(p=(d=(1+s/o)*g)-(d-g))>a||p!=p?m*(1/0):m*p}},function(r,t,e){var i=e(0),n=Math.abs;i(i.S,"Math",{hypot:function(o,s){for(var a,l,u=0,d=0,p=arguments.length,g=0;d<p;)g<(a=n(arguments[d++]))?(u=u*(l=g/a)*l+1,g=a):u+=a>0?(l=a/g)*l:a;return g===1/0?1/0:g*Math.sqrt(u)}})},function(r,t,e){var i=e(0),n=Math.imul;i(i.S+i.F*e(11)(function(){return n(4294967295,5)!=-5||n.length!=2}),"Math",{imul:function(o,s){var a=+o,l=+s,u=65535&a,d=65535&l;return 0|u*d+((65535&a>>>16)*d+u*(65535&l>>>16)<<16>>>0)}})},function(r,t,e){var i=e(0);i(i.S,"Math",{log10:function(n){return Math.log(n)*Math.LOG10E}})},function(r,t,e){var i=e(0);i(i.S,"Math",{log1p:e(130)})},function(r,t,e){var i=e(0);i(i.S,"Math",{log2:function(n){return Math.log(n)/Math.LN2}})},function(r,t,e){var i=e(0);i(i.S,"Math",{sign:e(95)})},function(r,t,e){var i=e(0),n=e(96),o=Math.exp;i(i.S+i.F*e(11)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(s){return Math.abs(s=+s)<1?(n(s)-n(-s))/2:(o(s-1)-o(-s-1))*(Math.E/2)}})},function(r,t,e){var i=e(0),n=e(96),o=Math.exp;i(i.S,"Math",{tanh:function(s){var a=n(s=+s),l=n(-s);return a==1/0?1:l==1/0?-1:(a-l)/(o(s)+o(-s))}})},function(r,t,e){var i=e(0);i(i.S,"Math",{trunc:function(n){return(n>0?Math.floor:Math.ceil)(n)}})},function(r,t,e){var i=e(0),n=e(48),o=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&s.length!=1),"String",{fromCodePoint:function(a){for(var l,u=[],d=arguments.length,p=0;d>p;){if(l=+arguments[p++],n(l,1114111)!==l)throw RangeError(l+" is not a valid code point");u.push(l<65536?o(l):o(55296+((l-=65536)>>10),l%1024+56320))}return u.join("")}})},function(r,t,e){var i=e(0),n=e(28),o=e(15);i(i.S,"String",{raw:function(s){for(var a=n(s.raw),l=o(a.length),u=arguments.length,d=[],p=0;l>p;)d.push(String(a[p++])),p<u&&d.push(String(arguments[p]));return d.join("")}})},function(r,t,e){"use strict";e(56)("trim",function(i){return function(){return i(this,3)}})},function(r,t,e){"use strict";var i=e(97)(!0);e(98)(String,"String",function(n){this._t=String(n),this._i=0},function(){var n,o=this._t,s=this._i;return s>=o.length?{value:void 0,done:!0}:(n=i(o,s),this._i+=n.length,{value:n,done:!1})})},function(r,t,e){"use strict";var i=e(0),n=e(97)(!1);i(i.P,"String",{codePointAt:function(o){return n(this,o)}})},function(r,t,e){"use strict";var i=e(0),n=e(15),o=e(99),s="".endsWith;i(i.P+i.F*e(101)("endsWith"),"String",{endsWith:function(a){var l=o(this,a,"endsWith"),u=arguments.length>1?arguments[1]:void 0,d=n(l.length),p=u===void 0?d:Math.min(n(u),d),g=String(a);return s?s.call(l,g,p):l.slice(p-g.length,p)===g}})},function(r,t,e){"use strict";var i=e(0),n=e(99);i(i.P+i.F*e(101)("includes"),"String",{includes:function(o){return!!~n(this,o,"includes").indexOf(o,arguments.length>1?arguments[1]:void 0)}})},function(r,t,e){var i=e(0);i(i.P,"String",{repeat:e(94)})},function(r,t,e){"use strict";var i=e(0),n=e(15),o=e(99),s="".startsWith;i(i.P+i.F*e(101)("startsWith"),"String",{startsWith:function(a){var l=o(this,a,"startsWith"),u=n(Math.min(arguments.length>1?arguments[1]:void 0,l.length)),d=String(a);return s?s.call(l,d,u):l.slice(u,u+d.length)===d}})},function(r,t,e){"use strict";e(24)("anchor",function(i){return function(n){return i(this,"a","name",n)}})},function(r,t,e){"use strict";e(24)("big",function(i){return function(){return i(this,"big","","")}})},function(r,t,e){"use strict";e(24)("blink",function(i){return function(){return i(this,"blink","","")}})},function(r,t,e){"use strict";e(24)("bold",function(i){return function(){return i(this,"b","","")}})},function(r,t,e){"use strict";e(24)("fixed",function(i){return function(){return i(this,"tt","","")}})},function(r,t,e){"use strict";e(24)("fontcolor",function(i){return function(n){return i(this,"font","color",n)}})},function(r,t,e){"use strict";e(24)("fontsize",function(i){return function(n){return i(this,"font","size",n)}})},function(r,t,e){"use strict";e(24)("italics",function(i){return function(){return i(this,"i","","")}})},function(r,t,e){"use strict";e(24)("link",function(i){return function(n){return i(this,"a","href",n)}})},function(r,t,e){"use strict";e(24)("small",function(i){return function(){return i(this,"small","","")}})},function(r,t,e){"use strict";e(24)("strike",function(i){return function(){return i(this,"strike","","")}})},function(r,t,e){"use strict";e(24)("sub",function(i){return function(){return i(this,"sub","","")}})},function(r,t,e){"use strict";e(24)("sup",function(i){return function(){return i(this,"sup","","")}})},function(r,t,e){var i=e(0);i(i.S,"Date",{now:function(){return new Date().getTime()}})},function(r,t,e){"use strict";var i=e(0),n=e(22),o=e(42);i(i.P+i.F*e(11)(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}),"Date",{toJSON:function(s){var a=n(this),l=o(a);return typeof l!="number"||isFinite(l)?a.toISOString():null}})},function(r,t,e){var i=e(0),n=e(271);i(i.P+i.F*(Date.prototype.toISOString!==n),"Date",{toISOString:n})},function(r,t,e){"use strict";var i=e(11),n=Date.prototype.getTime,o=Date.prototype.toISOString,s=function(a){return a>9?a:"0"+a};r.exports=i(function(){return o.call(new Date(-50000000000001))!="0385-07-25T07:06:39.999Z"})||!i(function(){o.call(new Date(NaN))})?function(){if(!isFinite(n.call(this)))throw RangeError("Invalid time value");var a=this,l=a.getUTCFullYear(),u=a.getUTCMilliseconds(),d=l<0?"-":l>9999?"+":"";return d+("00000"+Math.abs(l)).slice(d?-6:-4)+"-"+s(a.getUTCMonth()+1)+"-"+s(a.getUTCDate())+"T"+s(a.getUTCHours())+":"+s(a.getUTCMinutes())+":"+s(a.getUTCSeconds())+"."+(u>99?u:"0"+s(u))+"Z"}:o},function(r,t,e){var i=Date.prototype,n=i.toString,o=i.getTime;new Date(NaN)+""!="Invalid Date"&&e(23)(i,"toString",function(){var s=o.call(this);return s==s?n.call(this):"Invalid Date"})},function(r,t,e){var i=e(14)("toPrimitive"),n=Date.prototype;i in n||e(27)(n,i,e(274))},function(r,t,e){"use strict";var i=e(12),n=e(42);r.exports=function(o){if(o!=="string"&&o!=="number"&&o!=="default")throw TypeError("Incorrect hint");return n(i(this),o!="number")}},function(r,t,e){var i=e(0);i(i.S,"Array",{isArray:e(73)})},function(r,t,e){"use strict";var i=e(31),n=e(0),o=e(22),s=e(132),a=e(102),l=e(15),u=e(103),d=e(104);n(n.S+n.F*!e(74)(function(p){Array.from(p)}),"Array",{from:function(p){var g,m,k,y,v=o(p),x=typeof this=="function"?this:Array,C=arguments.length,c=C>1?arguments[1]:void 0,_=c!==void 0,h=0,b=d(v);if(_&&(c=i(c,C>2?arguments[2]:void 0,2)),b==null||x==Array&&a(b))for(m=new x(g=l(v.length));g>h;h++)u(m,h,_?c(v[h],h):v[h]);else for(y=b.call(v),m=new x;!(k=y.next()).done;h++)u(m,h,_?s(y,c,[k.value,h],!0):k.value);return m.length=h,m}})},function(r,t,e){"use strict";var i=e(0),n=e(103);i(i.S+i.F*e(11)(function(){function o(){}return!(Array.of.call(o)instanceof o)}),"Array",{of:function(){for(var o=0,s=arguments.length,a=new(typeof this=="function"?this:Array)(s);s>o;)n(a,o,arguments[o++]);return a.length=s,a}})},function(r,t,e){"use strict";var i=e(0),n=e(28),o=[].join;i(i.P+i.F*(e(62)!=Object||!e(29)(o)),"Array",{join:function(s){return o.call(n(this),s===void 0?",":s)}})},function(r,t,e){"use strict";var i=e(0),n=e(90),o=e(38),s=e(48),a=e(15),l=[].slice;i(i.P+i.F*e(11)(function(){n&&l.call(n)}),"Array",{slice:function(u,d){var p=a(this.length),g=o(this);if(d=d===void 0?p:d,g=="Array")return l.call(this,u,d);for(var m=s(u,p),k=s(d,p),y=a(k-m),v=new Array(y),x=0;x<y;x++)v[x]=g=="String"?this.charAt(m+x):this[m+x];return v}})},function(r,t,e){"use strict";var i=e(0),n=e(32),o=e(22),s=e(11),a=[].sort,l=[1,2,3];i(i.P+i.F*(s(function(){l.sort(void 0)})||!s(function(){l.sort(null)})||!e(29)(a)),"Array",{sort:function(u){return u===void 0?a.call(o(this)):a.call(o(this),n(u))}})},function(r,t,e){"use strict";var i=e(0),n=e(36)(0),o=e(29)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(s){return n(this,s,arguments[1])}})},function(r,t,e){var i=e(13),n=e(73),o=e(14)("species");r.exports=function(s){var a;return n(s)&&(typeof(a=s.constructor)!="function"||a!==Array&&!n(a.prototype)||(a=void 0),i(a)&&(a=a[o])===null&&(a=void 0)),a===void 0?Array:a}},function(r,t,e){"use strict";var i=e(0),n=e(36)(1);i(i.P+i.F*!e(29)([].map,!0),"Array",{map:function(o){return n(this,o,arguments[1])}})},function(r,t,e){"use strict";var i=e(0),n=e(36)(2);i(i.P+i.F*!e(29)([].filter,!0),"Array",{filter:function(o){return n(this,o,arguments[1])}})},function(r,t,e){"use strict";var i=e(0),n=e(36)(3);i(i.P+i.F*!e(29)([].some,!0),"Array",{some:function(o){return n(this,o,arguments[1])}})},function(r,t,e){"use strict";var i=e(0),n=e(36)(4);i(i.P+i.F*!e(29)([].every,!0),"Array",{every:function(o){return n(this,o,arguments[1])}})},function(r,t,e){"use strict";var i=e(0),n=e(134);i(i.P+i.F*!e(29)([].reduce,!0),"Array",{reduce:function(o){return n(this,o,arguments.length,arguments[1],!1)}})},function(r,t,e){"use strict";var i=e(0),n=e(134);i(i.P+i.F*!e(29)([].reduceRight,!0),"Array",{reduceRight:function(o){return n(this,o,arguments.length,arguments[1],!0)}})},function(r,t,e){"use strict";var i=e(0),n=e(71)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!e(29)(o)),"Array",{indexOf:function(a){return s?o.apply(this,arguments)||0:n(this,a,arguments[1])}})},function(r,t,e){"use strict";var i=e(0),n=e(28),o=e(33),s=e(15),a=[].lastIndexOf,l=!!a&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!e(29)(a)),"Array",{lastIndexOf:function(u){if(l)return a.apply(this,arguments)||0;var d=n(this),p=s(d.length),g=p-1;for(arguments.length>1&&(g=Math.min(g,o(arguments[1]))),g<0&&(g=p+g);g>=0;g--)if(g in d&&d[g]===u)return g||0;return-1}})},function(r,t,e){var i=e(0);i(i.P,"Array",{copyWithin:e(135)}),e(52)("copyWithin")},function(r,t,e){var i=e(0);i(i.P,"Array",{fill:e(105)}),e(52)("fill")},function(r,t,e){"use strict";var i=e(0),n=e(36)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),i(i.P+i.F*o,"Array",{find:function(s){return n(this,s,arguments.length>1?arguments[1]:void 0)}}),e(52)("find")},function(r,t,e){"use strict";var i=e(0),n=e(36)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{findIndex:function(a){return n(this,a,arguments.length>1?arguments[1]:void 0)}}),e(52)(o)},function(r,t,e){e(58)("Array")},function(r,t,e){var i=e(10),n=e(93),o=e(18).f,s=e(50).f,a=e(100),l=e(75),u=i.RegExp,d=u,p=u.prototype,g=/a/g,m=/a/g,k=new u(g)!==g;if(e(17)&&(!k||e(11)(function(){return m[e(14)("match")]=!1,u(g)!=g||u(m)==m||u(g,"i")!="/a/i"}))){u=function(C,c){var _=this instanceof u,h=a(C),b=c===void 0;return!_&&h&&C.constructor===u&&b?C:n(k?new d(h&&!b?C.source:C,c):d((h=C instanceof u)?C.source:C,h&&b?l.call(C):c),_?this:p,u)};for(var y=function(C){C in u||o(u,C,{configurable:!0,get:function(){return d[C]},set:function(c){d[C]=c}})},v=s(d),x=0;v.length>x;)y(v[x++]);p.constructor=u,u.prototype=p,e(23)(i,"RegExp",u)}e(58)("RegExp")},function(r,t,e){"use strict";e(138);var i=e(12),n=e(75),o=e(17),s=/./.toString,a=function(l){e(23)(RegExp.prototype,"toString",l,!0)};e(11)(function(){return s.call({source:"a",flags:"b"})!="/a/b"})?a(function(){var l=i(this);return"/".concat(l.source,"/","flags"in l?l.flags:!o&&l instanceof RegExp?n.call(l):void 0)}):s.name!="toString"&&a(function(){return s.call(this)})},function(r,t,e){"use strict";var i=e(12),n=e(15),o=e(108),s=e(76);e(77)("match",1,function(a,l,u,d){return[function(p){var g=a(this),m=p==null?void 0:p[l];return m!==void 0?m.call(p,g):new RegExp(p)[l](String(g))},function(p){var g=d(u,p,this);if(g.done)return g.value;var m=i(p),k=String(this);if(!m.global)return s(m,k);var y=m.unicode;m.lastIndex=0;for(var v,x=[],C=0;(v=s(m,k))!==null;){var c=String(v[0]);x[C]=c,c===""&&(m.lastIndex=o(k,n(m.lastIndex),y)),C++}return C===0?null:x}]})},function(r,t,e){"use strict";var i=e(12),n=e(22),o=e(15),s=e(33),a=e(108),l=e(76),u=Math.max,d=Math.min,p=Math.floor,g=/\$([$&`']|\d\d?|<[^>]*>)/g,m=/\$([$&`']|\d\d?)/g;e(77)("replace",2,function(k,y,v,x){return[function(c,_){var h=k(this),b=c==null?void 0:c[y];return b!==void 0?b.call(c,h,_):v.call(String(h),c,_)},function(c,_){var h=x(v,c,this,_);if(h.done)return h.value;var b=i(c),M=String(this),E=typeof _=="function";E||(_=String(_));var w=b.global;if(w){var S=b.unicode;b.lastIndex=0}for(var O=[];;){var B=l(b,M);if(B===null||(O.push(B),!w))break;String(B[0])===""&&(b.lastIndex=a(M,o(b.lastIndex),S))}for(var A,R="",T=0,L=0;L<O.length;L++){B=O[L];for(var P=String(B[0]),D=u(d(s(B.index),M.length),0),H=[],j=1;j<B.length;j++)H.push((A=B[j])===void 0?A:String(A));var F=B.groups;if(E){var K=[P].concat(H,D,M);F!==void 0&&K.push(F);var q=String(_.apply(void 0,K))}else q=C(P,M,D,H,F,_);D>=T&&(R+=M.slice(T,D)+q,T=D+P.length)}return R+M.slice(T)}];function C(c,_,h,b,M,E){var w=h+c.length,S=b.length,O=m;return M!==void 0&&(M=n(M),O=g),v.call(E,O,function(B,A){var R;switch(A.charAt(0)){case"$":return"$";case"&":return c;case"`":return _.slice(0,h);case"'":return _.slice(w);case"<":R=M[A.slice(1,-1)];break;default:var T=+A;if(T===0)return B;if(T>S){var L=p(T/10);return L===0?B:L<=S?b[L-1]===void 0?A.charAt(1):b[L-1]+A.charAt(1):B}R=b[T-1]}return R===void 0?"":R})}})},function(r,t,e){"use strict";var i=e(12),n=e(123),o=e(76);e(77)("search",1,function(s,a,l,u){return[function(d){var p=s(this),g=d==null?void 0:d[a];return g!==void 0?g.call(d,p):new RegExp(d)[a](String(p))},function(d){var p=u(l,d,this);if(p.done)return p.value;var g=i(d),m=String(this),k=g.lastIndex;n(k,0)||(g.lastIndex=0);var y=o(g,m);return n(g.lastIndex,k)||(g.lastIndex=k),y===null?-1:y.index}]})},function(r,t,e){"use strict";var i=e(100),n=e(12),o=e(65),s=e(108),a=e(15),l=e(76),u=e(107),d=e(11),p=Math.min,g=[].push,m="length",k=!d(function(){RegExp(4294967295,"y")});e(77)("split",2,function(y,v,x,C){var c;return c="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1)[m]!=4||"ab".split(/(?:ab)*/)[m]!=2||".".split(/(.?)(.?)/)[m]!=4||".".split(/()()/)[m]>1||"".split(/.?/)[m]?function(_,h){var b=String(this);if(_===void 0&&h===0)return[];if(!i(_))return x.call(b,_,h);for(var M,E,w,S=[],O=(_.ignoreCase?"i":"")+(_.multiline?"m":"")+(_.unicode?"u":"")+(_.sticky?"y":""),B=0,A=h===void 0?4294967295:h>>>0,R=new RegExp(_.source,O+"g");(M=u.call(R,b))&&!((E=R.lastIndex)>B&&(S.push(b.slice(B,M.index)),M[m]>1&&M.index<b[m]&&g.apply(S,M.slice(1)),w=M[0][m],B=E,S[m]>=A));)R.lastIndex===M.index&&R.lastIndex++;return B===b[m]?!w&&R.test("")||S.push(""):S.push(b.slice(B)),S[m]>A?S.slice(0,A):S}:"0".split(void 0,0)[m]?function(_,h){return _===void 0&&h===0?[]:x.call(this,_,h)}:x,[function(_,h){var b=y(this),M=_==null?void 0:_[v];return M!==void 0?M.call(_,b,h):c.call(String(b),_,h)},function(_,h){var b=C(c,_,this,h,c!==x);if(b.done)return b.value;var M=n(_),E=String(this),w=o(M,RegExp),S=M.unicode,O=(M.ignoreCase?"i":"")+(M.multiline?"m":"")+(M.unicode?"u":"")+(k?"y":"g"),B=new w(k?M:"^(?:"+M.source+")",O),A=h===void 0?4294967295:h>>>0;if(A===0)return[];if(E.length===0)return l(B,E)===null?[E]:[];for(var R=0,T=0,L=[];T<E.length;){B.lastIndex=k?T:0;var P,D=l(B,k?E:E.slice(T));if(D===null||(P=p(a(B.lastIndex+(k?0:T)),E.length))===R)T=s(E,T,S);else{if(L.push(E.slice(R,T)),L.length===A)return L;for(var H=1;H<=D.length-1;H++)if(L.push(D[H]),L.length===A)return L;T=R=P}}return L.push(E.slice(R)),L}]})},function(r,t,e){var i=e(10),n=e(109).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,l=e(38)(s)=="process";r.exports=function(){var u,d,p,g=function(){var v,x;for(l&&(v=s.domain)&&v.exit();u;){x=u.fn,u=u.next;try{x()}catch(C){throw u?p():d=void 0,C}}d=void 0,v&&v.enter()};if(l)p=function(){s.nextTick(g)};else if(!o||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var m=a.resolve(void 0);p=function(){m.then(g)}}else p=function(){n.call(i,g)};else{var k=!0,y=document.createTextNode("");new o(g).observe(y,{characterData:!0}),p=function(){y.data=k=!k}}return function(v){var x={fn:v,next:void 0};d&&(d.next=x),u||(u=x,p()),d=x}}},function(r,t){r.exports=function(e){try{return{e:!1,v:e()}}catch(i){return{e:!0,v:i}}}},function(r,t,e){"use strict";var i=e(142),n=e(53);r.exports=e(80)("Map",function(o){return function(){return o(this,arguments.length>0?arguments[0]:void 0)}},{get:function(o){var s=i.getEntry(n(this,"Map"),o);return s&&s.v},set:function(o,s){return i.def(n(this,"Map"),o===0?0:o,s)}},i,!0)},function(r,t,e){"use strict";var i=e(142),n=e(53);r.exports=e(80)("Set",function(o){return function(){return o(this,arguments.length>0?arguments[0]:void 0)}},{add:function(o){return i.def(n(this,"Set"),o=o===0?0:o,o)}},i)},function(r,t,e){"use strict";var i,n=e(10),o=e(36)(0),s=e(23),a=e(43),l=e(122),u=e(143),d=e(13),p=e(53),g=e(53),m=!n.ActiveXObject&&"ActiveXObject"in n,k=a.getWeak,y=Object.isExtensible,v=u.ufstore,x=function(_){return function(){return _(this,arguments.length>0?arguments[0]:void 0)}},C={get:function(_){if(d(_)){var h=k(_);return h===!0?v(p(this,"WeakMap")).get(_):h?h[this._i]:void 0}},set:function(_,h){return u.def(p(this,"WeakMap"),_,h)}},c=r.exports=e(80)("WeakMap",x,C,u,!0,!0);g&&m&&(l((i=u.getConstructor(x,"WeakMap")).prototype,C),a.NEED=!0,o(["delete","has","get","set"],function(_){var h=c.prototype,b=h[_];s(h,_,function(M,E){if(d(M)&&!y(M)){this._f||(this._f=new i);var w=this._f[_](M,E);return _=="set"?this:w}return b.call(this,M,E)})}))},function(r,t,e){"use strict";var i=e(143),n=e(53);e(80)("WeakSet",function(o){return function(){return o(this,arguments.length>0?arguments[0]:void 0)}},{add:function(o){return i.def(n(this,"WeakSet"),o,!0)}},i,!1,!0)},function(r,t,e){"use strict";var i=e(0),n=e(81),o=e(110),s=e(12),a=e(48),l=e(15),u=e(13),d=e(10).ArrayBuffer,p=e(65),g=o.ArrayBuffer,m=o.DataView,k=n.ABV&&d.isView,y=g.prototype.slice,v=n.VIEW;i(i.G+i.W+i.F*(d!==g),{ArrayBuffer:g}),i(i.S+i.F*!n.CONSTR,"ArrayBuffer",{isView:function(x){return k&&k(x)||u(x)&&v in x}}),i(i.P+i.U+i.F*e(11)(function(){return!new g(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(x,C){if(y!==void 0&&C===void 0)return y.call(s(this),x);for(var c=s(this).byteLength,_=a(x,c),h=a(C===void 0?c:C,c),b=new(p(this,g))(l(h-_)),M=new m(this),E=new m(b),w=0;_<h;)E.setUint8(w++,M.getUint8(_++));return b}}),e(58)("ArrayBuffer")},function(r,t,e){var i=e(0);i(i.G+i.W+i.F*!e(81).ABV,{DataView:e(110).DataView})},function(r,t,e){e(40)("Int8",1,function(i){return function(n,o,s){return i(this,n,o,s)}})},function(r,t,e){e(40)("Uint8",1,function(i){return function(n,o,s){return i(this,n,o,s)}})},function(r,t,e){e(40)("Uint8",1,function(i){return function(n,o,s){return i(this,n,o,s)}},!0)},function(r,t,e){e(40)("Int16",2,function(i){return function(n,o,s){return i(this,n,o,s)}})},function(r,t,e){e(40)("Uint16",2,function(i){return function(n,o,s){return i(this,n,o,s)}})},function(r,t,e){e(40)("Int32",4,function(i){return function(n,o,s){return i(this,n,o,s)}})},function(r,t,e){e(40)("Uint32",4,function(i){return function(n,o,s){return i(this,n,o,s)}})},function(r,t,e){e(40)("Float32",4,function(i){return function(n,o,s){return i(this,n,o,s)}})},function(r,t,e){e(40)("Float64",8,function(i){return function(n,o,s){return i(this,n,o,s)}})},function(r,t,e){var i=e(0),n=e(32),o=e(12),s=(e(10).Reflect||{}).apply,a=Function.apply;i(i.S+i.F*!e(11)(function(){s(function(){})}),"Reflect",{apply:function(l,u,d){var p=n(l),g=o(d);return s?s(p,u,g):a.call(p,u,g)}})},function(r,t,e){var i=e(0),n=e(49),o=e(32),s=e(12),a=e(13),l=e(11),u=e(124),d=(e(10).Reflect||{}).construct,p=l(function(){function m(){}return!(d(function(){},[],m)instanceof m)}),g=!l(function(){d(function(){})});i(i.S+i.F*(p||g),"Reflect",{construct:function(m,k){o(m),s(k);var y=arguments.length<3?m:o(arguments[2]);if(g&&!p)return d(m,k,y);if(m==y){switch(k.length){case 0:return new m;case 1:return new m(k[0]);case 2:return new m(k[0],k[1]);case 3:return new m(k[0],k[1],k[2]);case 4:return new m(k[0],k[1],k[2],k[3])}var v=[null];return v.push.apply(v,k),new(u.apply(m,v))}var x=y.prototype,C=n(a(x)?x:Object.prototype),c=Function.apply.call(m,C,k);return a(c)?c:C}})},function(r,t,e){var i=e(18),n=e(0),o=e(12),s=e(42);n(n.S+n.F*e(11)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(a,l,u){o(a),l=s(l,!0),o(u);try{return i.f(a,l,u),!0}catch(d){return!1}}})},function(r,t,e){var i=e(0),n=e(34).f,o=e(12);i(i.S,"Reflect",{deleteProperty:function(s,a){var l=n(o(s),a);return!(l&&!l.configurable)&&delete s[a]}})},function(r,t,e){"use strict";var i=e(0),n=e(12),o=function(s){this._t=n(s),this._i=0;var a,l=this._k=[];for(a in s)l.push(a)};e(131)(o,"Object",function(){var s,a=this._k;do if(this._i>=a.length)return{value:void 0,done:!0};while(!((s=a[this._i++])in this._t));return{value:s,done:!1}}),i(i.S,"Reflect",{enumerate:function(s){return new o(s)}})},function(r,t,e){var i=e(34),n=e(51),o=e(26),s=e(0),a=e(13),l=e(12);s(s.S,"Reflect",{get:function u(d,p){var g,m,k=arguments.length<3?d:arguments[2];return l(d)===k?d[p]:(g=i.f(d,p))?o(g,"value")?g.value:g.get!==void 0?g.get.call(k):void 0:a(m=n(d))?u(m,p,k):void 0}})},function(r,t,e){var i=e(34),n=e(0),o=e(12);n(n.S,"Reflect",{getOwnPropertyDescriptor:function(s,a){return i.f(o(s),a)}})},function(r,t,e){var i=e(0),n=e(51),o=e(12);i(i.S,"Reflect",{getPrototypeOf:function(s){return n(o(s))}})},function(r,t,e){var i=e(0);i(i.S,"Reflect",{has:function(n,o){return o in n}})},function(r,t,e){var i=e(0),n=e(12),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(s){return n(s),!o||o(s)}})},function(r,t,e){var i=e(0);i(i.S,"Reflect",{ownKeys:e(145)})},function(r,t,e){var i=e(0),n=e(12),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(s){n(s);try{return o&&o(s),!0}catch(a){return!1}}})},function(r,t,e){var i=e(18),n=e(34),o=e(51),s=e(26),a=e(0),l=e(44),u=e(12),d=e(13);a(a.S,"Reflect",{set:function p(g,m,k){var y,v,x=arguments.length<4?g:arguments[3],C=n.f(u(g),m);if(!C){if(d(v=o(g)))return p(v,m,k,x);C=l(0)}if(s(C,"value")){if(C.writable===!1||!d(x))return!1;if(y=n.f(x,m)){if(y.get||y.set||y.writable===!1)return!1;y.value=k,i.f(x,m,y)}else i.f(x,m,l(0,k));return!0}return C.set!==void 0&&(C.set.call(x,k),!0)}})},function(r,t,e){var i=e(0),n=e(91);n&&i(i.S,"Reflect",{setPrototypeOf:function(o,s){n.check(o,s);try{return n.set(o,s),!0}catch(a){return!1}}})},function(r,t,e){e(334),r.exports=e(16).Array.includes},function(r,t,e){"use strict";var i=e(0),n=e(71)(!0);i(i.P,"Array",{includes:function(o){return n(this,o,arguments.length>1?arguments[1]:void 0)}}),e(52)("includes")},function(r,t,e){e(336),r.exports=e(16).Array.flatMap},function(r,t,e){"use strict";var i=e(0),n=e(337),o=e(22),s=e(15),a=e(32),l=e(133);i(i.P,"Array",{flatMap:function(u){var d,p,g=o(this);return a(u),d=s(g.length),p=l(g,0),n(p,g,g,d,0,1,u,arguments[1]),p}}),e(52)("flatMap")},function(r,t,e){"use strict";var i=e(73),n=e(13),o=e(15),s=e(31),a=e(14)("isConcatSpreadable");r.exports=function l(u,d,p,g,m,k,y,v){for(var x,C,c=m,_=0,h=!!y&&s(y,v,3);_<g;){if(_ in p){if(x=h?h(p[_],_,d):p[_],C=!1,n(x)&&(C=(C=x[a])!==void 0?!!C:i(x)),C&&k>0)c=l(u,d,x,o(x.length),c,k-1)-1;else{if(c>=9007199254740991)throw TypeError();u[c]=x}c++}_++}return c}},function(r,t,e){e(339),r.exports=e(16).String.padStart},function(r,t,e){"use strict";var i=e(0),n=e(146),o=e(79),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*s,"String",{padStart:function(a){return n(this,a,arguments.length>1?arguments[1]:void 0,!0)}})},function(r,t,e){e(341),r.exports=e(16).String.padEnd},function(r,t,e){"use strict";var i=e(0),n=e(146),o=e(79),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*s,"String",{padEnd:function(a){return n(this,a,arguments.length>1?arguments[1]:void 0,!1)}})},function(r,t,e){e(343),r.exports=e(16).String.trimLeft},function(r,t,e){"use strict";e(56)("trimLeft",function(i){return function(){return i(this,1)}},"trimStart")},function(r,t,e){e(345),r.exports=e(16).String.trimRight},function(r,t,e){"use strict";e(56)("trimRight",function(i){return function(){return i(this,2)}},"trimEnd")},function(r,t,e){e(347),r.exports=e(87).f("asyncIterator")},function(r,t,e){e(118)("asyncIterator")},function(r,t,e){e(349),r.exports=e(16).Object.getOwnPropertyDescriptors},function(r,t,e){var i=e(0),n=e(145),o=e(28),s=e(34),a=e(103);i(i.S,"Object",{getOwnPropertyDescriptors:function(l){for(var u,d,p=o(l),g=s.f,m=n(p),k={},y=0;m.length>y;)(d=g(p,u=m[y++]))!==void 0&&a(k,u,d);return k}})},function(r,t,e){e(351),r.exports=e(16).Object.values},function(r,t,e){var i=e(0),n=e(147)(!1);i(i.S,"Object",{values:function(o){return n(o)}})},function(r,t,e){e(353),r.exports=e(16).Object.entries},function(r,t,e){var i=e(0),n=e(147)(!0);i(i.S,"Object",{entries:function(o){return n(o)}})},function(r,t,e){"use strict";e(139),e(355),r.exports=e(16).Promise.finally},function(r,t,e){"use strict";var i=e(0),n=e(16),o=e(10),s=e(65),a=e(141);i(i.P+i.R,"Promise",{finally:function(l){var u=s(this,n.Promise||o.Promise),d=typeof l=="function";return this.then(d?function(p){return a(u,l()).then(function(){return p})}:l,d?function(p){return a(u,l()).then(function(){throw p})}:l)}})},function(r,t,e){e(357),e(358),e(359),r.exports=e(16)},function(r,t,e){var i=e(10),n=e(0),o=e(79),s=[].slice,a=/MSIE .\./.test(o),l=function(u){return function(d,p){var g=arguments.length>2,m=!!g&&s.call(arguments,2);return u(g?function(){(typeof d=="function"?d:Function(d)).apply(this,m)}:d,p)}};n(n.G+n.B+n.F*a,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},function(r,t,e){var i=e(0),n=e(109);i(i.G+i.B,{setImmediate:n.set,clearImmediate:n.clear})},function(r,t,e){for(var i=e(106),n=e(47),o=e(23),s=e(10),a=e(27),l=e(57),u=e(14),d=u("iterator"),p=u("toStringTag"),g=l.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},k=n(m),y=0;y<k.length;y++){var v,x=k[y],C=m[x],c=s[x],_=c&&c.prototype;if(_&&(_[d]||a(_,d,g),_[p]||a(_,p,x),l[x]=g,C))for(v in i)_[v]||o(_,v,i[v],!0)}},function(r,t,e){var i=function(n){"use strict";var o=Object.prototype,s=o.hasOwnProperty,a=Object.defineProperty||function(L,P,D){L[P]=D.value},l=typeof Symbol=="function"?Symbol:{},u=l.iterator||"@@iterator",d=l.asyncIterator||"@@asyncIterator",p=l.toStringTag||"@@toStringTag";function g(L,P,D){return Object.defineProperty(L,P,{value:D,enumerable:!0,configurable:!0,writable:!0}),L[P]}try{g({},"")}catch(L){g=function(P,D,H){return P[D]=H}}function m(L,P,D,H){var j=P&&P.prototype instanceof v?P:v,F=Object.create(j.prototype),K=new A(H||[]);return a(F,"_invoke",{value:w(L,D,K)}),F}function k(L,P,D){try{return{type:"normal",arg:L.call(P,D)}}catch(H){return{type:"throw",arg:H}}}n.wrap=m;var y={};function v(){}function x(){}function C(){}var c={};g(c,u,function(){return this});var _=Object.getPrototypeOf,h=_&&_(_(R([])));h&&h!==o&&s.call(h,u)&&(c=h);var b=C.prototype=v.prototype=Object.create(c);function M(L){["next","throw","return"].forEach(function(P){g(L,P,function(D){return this._invoke(P,D)})})}function E(L,P){var D;a(this,"_invoke",{value:function(H,j){function F(){return new P(function(K,q){(function W(Y,Z,X,Q){var ue=k(L[Y],L,Z);if(ue.type!=="throw"){var ce=ue.arg,ne=ce.value;return ne&&typeof ne=="object"&&s.call(ne,"__await")?P.resolve(ne.__await).then(function(ge){W("next",ge,X,Q)},function(ge){W("throw",ge,X,Q)}):P.resolve(ne).then(function(ge){ce.value=ge,X(ce)},function(ge){return W("throw",ge,X,Q)})}Q(ue.arg)})(H,j,K,q)})}return D=D?D.then(F,F):F()}})}function w(L,P,D){var H="suspendedStart";return function(j,F){if(H==="executing")throw new Error("Generator is already running");if(H==="completed"){if(j==="throw")throw F;return T()}for(D.method=j,D.arg=F;;){var K=D.delegate;if(K){var q=S(K,D);if(q){if(q===y)continue;return q}}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(H==="suspendedStart")throw H="completed",D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);H="executing";var W=k(L,P,D);if(W.type==="normal"){if(H=D.done?"completed":"suspendedYield",W.arg===y)continue;return{value:W.arg,done:D.done}}W.type==="throw"&&(H="completed",D.method="throw",D.arg=W.arg)}}}function S(L,P){var D=P.method,H=L.iterator[D];if(H===void 0)return P.delegate=null,D==="throw"&&L.iterator.return&&(P.method="return",P.arg=void 0,S(L,P),P.method==="throw")||D!=="return"&&(P.method="throw",P.arg=new TypeError("The iterator does not provide a '"+D+"' method")),y;var j=k(H,L.iterator,P.arg);if(j.type==="throw")return P.method="throw",P.arg=j.arg,P.delegate=null,y;var F=j.arg;return F?F.done?(P[L.resultName]=F.value,P.next=L.nextLoc,P.method!=="return"&&(P.method="next",P.arg=void 0),P.delegate=null,y):F:(P.method="throw",P.arg=new TypeError("iterator result is not an object"),P.delegate=null,y)}function O(L){var P={tryLoc:L[0]};1 in L&&(P.catchLoc=L[1]),2 in L&&(P.finallyLoc=L[2],P.afterLoc=L[3]),this.tryEntries.push(P)}function B(L){var P=L.completion||{};P.type="normal",delete P.arg,L.completion=P}function A(L){this.tryEntries=[{tryLoc:"root"}],L.forEach(O,this),this.reset(!0)}function R(L){if(L){var P=L[u];if(P)return P.call(L);if(typeof L.next=="function")return L;if(!isNaN(L.length)){var D=-1,H=function j(){for(;++D<L.length;)if(s.call(L,D))return j.value=L[D],j.done=!1,j;return j.value=void 0,j.done=!0,j};return H.next=H}}return{next:T}}function T(){return{value:void 0,done:!0}}return x.prototype=C,a(b,"constructor",{value:C,configurable:!0}),a(C,"constructor",{value:x,configurable:!0}),x.displayName=g(C,p,"GeneratorFunction"),n.isGeneratorFunction=function(L){var P=typeof L=="function"&&L.constructor;return!!P&&(P===x||(P.displayName||P.name)==="GeneratorFunction")},n.mark=function(L){return Object.setPrototypeOf?Object.setPrototypeOf(L,C):(L.__proto__=C,g(L,p,"GeneratorFunction")),L.prototype=Object.create(b),L},n.awrap=function(L){return{__await:L}},M(E.prototype),g(E.prototype,d,function(){return this}),n.AsyncIterator=E,n.async=function(L,P,D,H,j){j===void 0&&(j=Promise);var F=new E(m(L,P,D,H),j);return n.isGeneratorFunction(P)?F:F.next().then(function(K){return K.done?K.value:F.next()})},M(b),g(b,p,"Generator"),g(b,u,function(){return this}),g(b,"toString",function(){return"[object Generator]"}),n.keys=function(L){var P=Object(L),D=[];for(var H in P)D.push(H);return D.reverse(),function j(){for(;D.length;){var F=D.pop();if(F in P)return j.value=F,j.done=!1,j}return j.done=!0,j}},n.values=R,A.prototype={constructor:A,reset:function(L){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!L)for(var P in this)P.charAt(0)==="t"&&s.call(this,P)&&!isNaN(+P.slice(1))&&(this[P]=void 0)},stop:function(){this.done=!0;var L=this.tryEntries[0].completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(L){if(this.done)throw L;var P=this;function D(W,Y){return F.type="throw",F.arg=L,P.next=W,Y&&(P.method="next",P.arg=void 0),!!Y}for(var H=this.tryEntries.length-1;H>=0;--H){var j=this.tryEntries[H],F=j.completion;if(j.tryLoc==="root")return D("end");if(j.tryLoc<=this.prev){var K=s.call(j,"catchLoc"),q=s.call(j,"finallyLoc");if(K&&q){if(this.prev<j.catchLoc)return D(j.catchLoc,!0);if(this.prev<j.finallyLoc)return D(j.finallyLoc)}else if(K){if(this.prev<j.catchLoc)return D(j.catchLoc,!0)}else{if(!q)throw new Error("try statement without catch or finally");if(this.prev<j.finallyLoc)return D(j.finallyLoc)}}}},abrupt:function(L,P){for(var D=this.tryEntries.length-1;D>=0;--D){var H=this.tryEntries[D];if(H.tryLoc<=this.prev&&s.call(H,"finallyLoc")&&this.prev<H.finallyLoc){var j=H;break}}j&&(L==="break"||L==="continue")&&j.tryLoc<=P&&P<=j.finallyLoc&&(j=null);var F=j?j.completion:{};return F.type=L,F.arg=P,j?(this.method="next",this.next=j.finallyLoc,y):this.complete(F)},complete:function(L,P){if(L.type==="throw")throw L.arg;return L.type==="break"||L.type==="continue"?this.next=L.arg:L.type==="return"?(this.rval=this.arg=L.arg,this.method="return",this.next="end"):L.type==="normal"&&P&&(this.next=P),y},finish:function(L){for(var P=this.tryEntries.length-1;P>=0;--P){var D=this.tryEntries[P];if(D.finallyLoc===L)return this.complete(D.completion,D.afterLoc),B(D),y}},catch:function(L){for(var P=this.tryEntries.length-1;P>=0;--P){var D=this.tryEntries[P];if(D.tryLoc===L){var H=D.completion;if(H.type==="throw"){var j=H.arg;B(D)}return j}}throw new Error("illegal catch attempt")},delegateYield:function(L,P,D){return this.delegate={iterator:R(L),resultName:P,nextLoc:D},this.method==="next"&&(this.arg=void 0),y}},n}(r.exports);try{regeneratorRuntime=i}catch(n){typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},function(r,t,e){var i,n,o,s=e(7);n=[t,e(30),e(2),e(3),e(365),e(366),e(367),e(8)],(o=typeof(i=function(a,l,u,d,p,g,m,k){"use strict";var y=e(1);function v(C){if(typeof WeakMap!="function")return null;var c=new WeakMap,_=new WeakMap;return(v=function(h){return h?_:c})(C)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=y(l),u=y(u),d=y(d),m=y(m),k=function(C,c){if(!c&&C&&C.__esModule)return C;if(C===null||s(C)!=="object"&&typeof C!="function")return{default:C};var _=v(c);if(_&&_.has(C))return _.get(C);var h={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in C)if(M!=="default"&&Object.prototype.hasOwnProperty.call(C,M)){var E=b?Object.getOwnPropertyDescriptor(C,M):null;E&&(E.get||E.set)?Object.defineProperty(h,M,E):h[M]=C[M]}return h.default=C,_&&_.set(C,h),h}(k);var x=function(){function C(c){var _=this;(0,u.default)(this,C);var h=function(){};k.isObject(c)&&k.isFunction(c.onReady)&&(h=c.onReady);var b=new m.default(c);this.isReady=b.isReady.then(function(){_.exportAPI(b),h()})}return(0,d.default)(C,[{key:"exportAPI",value:function(c){var _=this;["configuration"].forEach(function(h){_[h]=c[h]}),this.destroy=function(){for(var h in Object.values(c.moduleInstances).forEach(function(b){k.isFunction(b.destroy)&&b.destroy(),b.listeners.removeAll()}),c=null,_)Object.prototype.hasOwnProperty.call(_,h)&&delete _[h];Object.setPrototypeOf(_,null)},Object.setPrototypeOf(this,c.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(function(h){var b=(0,l.default)(h,2),M=b[0],E=b[1];Object.entries(E).forEach(function(w){var S=(0,l.default)(w,2),O=S[0],B=S[1];_[B]=c.moduleInstances.API.methods[M][O]})})}}],[{key:"version",get:function(){return"2.26.5"}}]),C}();a.default=x,x.displayName="EditorJS",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t){r.exports=function(e){if(Array.isArray(e))return e},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(e,i){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,s,a=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(o=n.next()).done)&&(a.push(o.value),!i||a.length!==i);l=!0);}catch(d){u=!0,s=d}finally{try{l||n.return==null||n.return()}finally{if(u)throw s}}return a}},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){function e(){}r.exports=Object.assign(e,{default:e,register:e,revert:function(){},__esModule:!0})},function(r,t,e){var i,n,o;n=[],(o=typeof(i=function(){"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(s){for(var a=(this.document||this.ownerDocument).querySelectorAll(s),l=a.length;--l>=0&&a.item(l)!==this;);return l>-1}),Element.prototype.closest||(Element.prototype.closest=function(s){var a=this;if(!document.documentElement.contains(a))return null;do{if(a.matches(s))return a;a=a.parentElement||a.parentNode}while(a!==null);return null}),Element.prototype.prepend||(Element.prototype.prepend=function(s){var a=document.createDocumentFragment();Array.isArray(s)||(s=[s]),s.forEach(function(l){var u=l instanceof Node;a.appendChild(u?l:document.createTextNode(l))}),this.insertBefore(a,this.firstChild)}),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(s){s=arguments.length===0||!!s;var a=this.parentNode,l=window.getComputedStyle(a,null),u=parseInt(l.getPropertyValue("border-top-width")),d=parseInt(l.getPropertyValue("border-left-width")),p=this.offsetTop-a.offsetTop<a.scrollTop,g=this.offsetTop-a.offsetTop+this.clientHeight-u>a.scrollTop+a.clientHeight,m=this.offsetLeft-a.offsetLeft<a.scrollLeft,k=this.offsetLeft-a.offsetLeft+this.clientWidth-d>a.scrollLeft+a.clientWidth,y=p&&!g;(p||g)&&s&&(a.scrollTop=this.offsetTop-a.offsetTop-a.clientHeight/2-u+this.clientHeight/2),(m||k)&&s&&(a.scrollLeft=this.offsetLeft-a.offsetLeft-a.clientWidth/2-d+this.clientWidth/2),(p||g||m||k)&&!s&&this.scrollIntoView(y)})})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(20),e(21),e(2),e(3),e(19),e(8),e(54),e(151),e(82)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v){"use strict";var x=e(1);function C(b){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(C=function(w){return w?E:M})(b)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=x(l),u=x(u),d=x(d),p=x(p),g=x(g),m=function(b,M){if(!M&&b&&b.__esModule)return b;if(b===null||s(b)!=="object"&&typeof b!="function")return{default:b};var E=C(M);if(E&&E.has(b))return E.get(b);var w={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in b)if(O!=="default"&&Object.prototype.hasOwnProperty.call(b,O)){var B=S?Object.getOwnPropertyDescriptor(b,O):null;B&&(B.get||B.set)?Object.defineProperty(w,O,B):w[O]=b[O]}return w.default=b,E&&E.set(b,w),w}(m),k=x(k),v=x(v);var c=e(376),_=[];c.keys().forEach(function(b){b.match(/^\.\/[^_][\w/]*\.([tj])s$/)&&_.push(c(b))});var h=function(){function b(w){var S,O,B=this;(0,d.default)(this,b),this.moduleInstances={},this.eventsDispatcher=new v.default,this.isReady=new Promise(function(A,R){S=A,O=R}),Promise.resolve().then((0,u.default)(l.default.mark(function A(){return l.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return B.configuration=w,R.next=3,B.validate();case 3:return R.next=5,B.init();case 5:return R.next=7,B.start();case 7:m.logLabeled("I'm ready! (\uFF89\u25D5\u30EE\u25D5)\uFF89*:\uFF65\uFF9F\u2727","log","","color: #E24A75"),setTimeout((0,u.default)(l.default.mark(function T(){var L,P,D;return l.default.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,B.render();case 2:B.configuration.autofocus&&(L=B.moduleInstances,P=L.BlockManager,(D=L.Caret).setToBlock(P.blocks[0],D.positions.START),P.highlightCurrentNode()),B.moduleInstances.UI.removeLoader(),S();case 5:case"end":return H.stop()}},T)})),500);case 9:case"end":return R.stop()}},A)}))).catch(function(A){m.log("Editor.js is not ready because of ".concat(A),"error"),O(A)})}var M,E;return(0,p.default)(b,[{key:"configuration",get:function(){return this.config},set:function(w){var S,O;m.isObject(w)?this.config=Object.assign({},w):this.config={holder:w},m.deprecationAssert(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=m.LogLevels.VERBOSE),m.setLogLevel(this.config.logLevel),m.deprecationAssert(Boolean(this.config.initialBlock),"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;var B={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=!!this.config.hideToolbar&&this.config.hideToolbar,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||function(){},this.config.onChange=this.config.onChange||function(){},this.config.inlineToolbar=this.config.inlineToolbar===void 0||this.config.inlineToolbar,!m.isEmpty(this.config.data)&&this.config.data.blocks&&this.config.data.blocks.length!==0||(this.config.data={blocks:[B]}),this.config.readOnly=this.config.readOnly||!1,!((S=this.config.i18n)===null||S===void 0)&&S.messages&&k.default.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((O=this.config.i18n)===null||O===void 0?void 0:O.direction)||"ltr"}},{key:"validate",value:(E=(0,u.default)(l.default.mark(function w(){var S,O,B;return l.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(S=this.config,O=S.holderId,B=S.holder,!O||!B){A.next=3;break}throw Error("\xABholderId\xBB and \xABholder\xBB param can't assign at the same time.");case 3:if(!m.isString(B)||g.default.get(B)){A.next=5;break}throw Error("element with ID \xAB".concat(B,"\xBB is missing. Pass correct holder's ID."));case 5:if(!B||!m.isObject(B)||g.default.isElement(B)){A.next=7;break}throw Error("\xABholder\xBB value must be an Element node");case 7:case"end":return A.stop()}},w,this)})),function(){return E.apply(this,arguments)})},{key:"init",value:function(){this.constructModules(),this.configureModules()}},{key:"start",value:(M=(0,u.default)(l.default.mark(function w(){var S,O=this;return l.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return S=["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"],B.next=3,S.reduce(function(A,R){return A.then((0,u.default)(l.default.mark(function T(){return l.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.prev=0,L.next=3,O.moduleInstances[R].prepare();case 3:L.next=10;break;case 5:if(L.prev=5,L.t0=L.catch(0),!(L.t0 instanceof y.CriticalError)){L.next=9;break}throw new Error(L.t0.message);case 9:m.log("Module ".concat(R," was skipped because of %o"),"warn",L.t0);case 10:case"end":return L.stop()}},T,null,[[0,5]])})))},Promise.resolve());case 3:case"end":return B.stop()}},w)})),function(){return M.apply(this,arguments)})},{key:"render",value:function(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}},{key:"constructModules",value:function(){var w=this;_.forEach(function(S){var O=m.isFunction(S)?S:S.default;try{w.moduleInstances[O.displayName]=new O({config:w.configuration,eventsDispatcher:w.eventsDispatcher})}catch(B){m.log("Module ".concat(O.displayName," skipped because"),"error",B)}})}},{key:"configureModules",value:function(){for(var w in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,w)&&(this.moduleInstances[w].state=this.getModulesDiff(w))}},{key:"getModulesDiff",value:function(w){var S={};for(var O in this.moduleInstances)O!==w&&(S[O]=this.moduleInstances[O]);return S}}]),b}();a.default=h,h.displayName="Core",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(7).default;function n(){"use strict";r.exports=n=function(){return o},r.exports.__esModule=!0,r.exports.default=r.exports;var o={},s=Object.prototype,a=s.hasOwnProperty,l=Object.defineProperty||function(P,D,H){P[D]=H.value},u=typeof Symbol=="function"?Symbol:{},d=u.iterator||"@@iterator",p=u.asyncIterator||"@@asyncIterator",g=u.toStringTag||"@@toStringTag";function m(P,D,H){return Object.defineProperty(P,D,{value:H,enumerable:!0,configurable:!0,writable:!0}),P[D]}try{m({},"")}catch(P){m=function(D,H,j){return D[H]=j}}function k(P,D,H,j){var F=D&&D.prototype instanceof x?D:x,K=Object.create(F.prototype),q=new R(j||[]);return l(K,"_invoke",{value:S(P,H,q)}),K}function y(P,D,H){try{return{type:"normal",arg:P.call(D,H)}}catch(j){return{type:"throw",arg:j}}}o.wrap=k;var v={};function x(){}function C(){}function c(){}var _={};m(_,d,function(){return this});var h=Object.getPrototypeOf,b=h&&h(h(T([])));b&&b!==s&&a.call(b,d)&&(_=b);var M=c.prototype=x.prototype=Object.create(_);function E(P){["next","throw","return"].forEach(function(D){m(P,D,function(H){return this._invoke(D,H)})})}function w(P,D){var H;l(this,"_invoke",{value:function(j,F){function K(){return new D(function(q,W){(function Y(Z,X,Q,ue){var ce=y(P[Z],P,X);if(ce.type!=="throw"){var ne=ce.arg,ge=ne.value;return ge&&i(ge)=="object"&&a.call(ge,"__await")?D.resolve(ge.__await).then(function(re){Y("next",re,Q,ue)},function(re){Y("throw",re,Q,ue)}):D.resolve(ge).then(function(re){ne.value=re,Q(ne)},function(re){return Y("throw",re,Q,ue)})}ue(ce.arg)})(j,F,q,W)})}return H=H?H.then(K,K):K()}})}function S(P,D,H){var j="suspendedStart";return function(F,K){if(j==="executing")throw new Error("Generator is already running");if(j==="completed"){if(F==="throw")throw K;return L()}for(H.method=F,H.arg=K;;){var q=H.delegate;if(q){var W=O(q,H);if(W){if(W===v)continue;return W}}if(H.method==="next")H.sent=H._sent=H.arg;else if(H.method==="throw"){if(j==="suspendedStart")throw j="completed",H.arg;H.dispatchException(H.arg)}else H.method==="return"&&H.abrupt("return",H.arg);j="executing";var Y=y(P,D,H);if(Y.type==="normal"){if(j=H.done?"completed":"suspendedYield",Y.arg===v)continue;return{value:Y.arg,done:H.done}}Y.type==="throw"&&(j="completed",H.method="throw",H.arg=Y.arg)}}}function O(P,D){var H=P.iterator[D.method];if(H===void 0){if(D.delegate=null,D.method==="throw"){if(P.iterator.return&&(D.method="return",D.arg=void 0,O(P,D),D.method==="throw"))return v;D.method="throw",D.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var j=y(H,P.iterator,D.arg);if(j.type==="throw")return D.method="throw",D.arg=j.arg,D.delegate=null,v;var F=j.arg;return F?F.done?(D[P.resultName]=F.value,D.next=P.nextLoc,D.method!=="return"&&(D.method="next",D.arg=void 0),D.delegate=null,v):F:(D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,v)}function B(P){var D={tryLoc:P[0]};1 in P&&(D.catchLoc=P[1]),2 in P&&(D.finallyLoc=P[2],D.afterLoc=P[3]),this.tryEntries.push(D)}function A(P){var D=P.completion||{};D.type="normal",delete D.arg,P.completion=D}function R(P){this.tryEntries=[{tryLoc:"root"}],P.forEach(B,this),this.reset(!0)}function T(P){if(P){var D=P[d];if(D)return D.call(P);if(typeof P.next=="function")return P;if(!isNaN(P.length)){var H=-1,j=function F(){for(;++H<P.length;)if(a.call(P,H))return F.value=P[H],F.done=!1,F;return F.value=void 0,F.done=!0,F};return j.next=j}}return{next:L}}function L(){return{value:void 0,done:!0}}return C.prototype=c,l(M,"constructor",{value:c,configurable:!0}),l(c,"constructor",{value:C,configurable:!0}),C.displayName=m(c,g,"GeneratorFunction"),o.isGeneratorFunction=function(P){var D=typeof P=="function"&&P.constructor;return!!D&&(D===C||(D.displayName||D.name)==="GeneratorFunction")},o.mark=function(P){return Object.setPrototypeOf?Object.setPrototypeOf(P,c):(P.__proto__=c,m(P,g,"GeneratorFunction")),P.prototype=Object.create(M),P},o.awrap=function(P){return{__await:P}},E(w.prototype),m(w.prototype,p,function(){return this}),o.AsyncIterator=w,o.async=function(P,D,H,j,F){F===void 0&&(F=Promise);var K=new w(k(P,D,H,j),F);return o.isGeneratorFunction(D)?K:K.next().then(function(q){return q.done?q.value:K.next()})},E(M),m(M,g,"Generator"),m(M,d,function(){return this}),m(M,"toString",function(){return"[object Generator]"}),o.keys=function(P){var D=Object(P),H=[];for(var j in D)H.push(j);return H.reverse(),function F(){for(;H.length;){var K=H.pop();if(K in D)return F.value=K,F.done=!1,F}return F.done=!0,F}},o.values=T,R.prototype={constructor:R,reset:function(P){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!P)for(var D in this)D.charAt(0)==="t"&&a.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=void 0)},stop:function(){this.done=!0;var P=this.tryEntries[0].completion;if(P.type==="throw")throw P.arg;return this.rval},dispatchException:function(P){if(this.done)throw P;var D=this;function H(Y,Z){return K.type="throw",K.arg=P,D.next=Y,Z&&(D.method="next",D.arg=void 0),!!Z}for(var j=this.tryEntries.length-1;j>=0;--j){var F=this.tryEntries[j],K=F.completion;if(F.tryLoc==="root")return H("end");if(F.tryLoc<=this.prev){var q=a.call(F,"catchLoc"),W=a.call(F,"finallyLoc");if(q&&W){if(this.prev<F.catchLoc)return H(F.catchLoc,!0);if(this.prev<F.finallyLoc)return H(F.finallyLoc)}else if(q){if(this.prev<F.catchLoc)return H(F.catchLoc,!0)}else{if(!W)throw new Error("try statement without catch or finally");if(this.prev<F.finallyLoc)return H(F.finallyLoc)}}}},abrupt:function(P,D){for(var H=this.tryEntries.length-1;H>=0;--H){var j=this.tryEntries[H];if(j.tryLoc<=this.prev&&a.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var F=j;break}}F&&(P==="break"||P==="continue")&&F.tryLoc<=D&&D<=F.finallyLoc&&(F=null);var K=F?F.completion:{};return K.type=P,K.arg=D,F?(this.method="next",this.next=F.finallyLoc,v):this.complete(K)},complete:function(P,D){if(P.type==="throw")throw P.arg;return P.type==="break"||P.type==="continue"?this.next=P.arg:P.type==="return"?(this.rval=this.arg=P.arg,this.method="return",this.next="end"):P.type==="normal"&&D&&(this.next=D),v},finish:function(P){for(var D=this.tryEntries.length-1;D>=0;--D){var H=this.tryEntries[D];if(H.finallyLoc===P)return this.complete(H.completion,H.afterLoc),A(H),v}},catch:function(P){for(var D=this.tryEntries.length-1;D>=0;--D){var H=this.tryEntries[D];if(H.tryLoc===P){var j=H.completion;if(j.type==="throw"){var F=j.arg;A(H)}return F}}throw new Error("illegal catch attempt")},delegateYield:function(P,D,H){return this.delegate={iterator:T(P),resultName:D,nextLoc:H},this.method==="next"&&(this.arg=void 0),v}},o}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(149);r.exports=function(n){if(Array.isArray(n))return i(n)},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(e){return Function.toString.call(e).indexOf("[native code]")!==-1},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(111),n=e(375);function o(s,a,l){return n()?(r.exports=o=Reflect.construct.bind(),r.exports.__esModule=!0,r.exports.default=r.exports):(r.exports=o=function(u,d,p){var g=[null];g.push.apply(g,d);var m=new(Function.bind.apply(u,g));return p&&i(m,p.prototype),m},r.exports.__esModule=!0,r.exports.default=r.exports),o.apply(null,arguments)}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i={"./api":83,"./api/":83,"./api/blocks":154,"./api/blocks.ts":154,"./api/caret":155,"./api/caret.ts":155,"./api/events":156,"./api/events.ts":156,"./api/i18n":157,"./api/i18n.ts":157,"./api/index":83,"./api/index.ts":83,"./api/inlineToolbar":158,"./api/inlineToolbar.ts":158,"./api/listeners":159,"./api/listeners.ts":159,"./api/notifier":160,"./api/notifier.ts":160,"./api/readonly":161,"./api/readonly.ts":161,"./api/sanitizer":162,"./api/sanitizer.ts":162,"./api/saver":163,"./api/saver.ts":163,"./api/selection":164,"./api/selection.ts":164,"./api/styles":165,"./api/styles.ts":165,"./api/toolbar":166,"./api/toolbar.ts":166,"./api/tooltip":167,"./api/tooltip.ts":167,"./api/ui":168,"./api/ui.ts":168,"./blockEvents":169,"./blockEvents.ts":169,"./blockManager":170,"./blockManager.ts":170,"./blockSelection":171,"./blockSelection.ts":171,"./caret":172,"./caret.ts":172,"./crossBlockSelection":173,"./crossBlockSelection.ts":173,"./dragNDrop":174,"./dragNDrop.ts":174,"./modificationsObserver":175,"./modificationsObserver.ts":175,"./paste":176,"./paste.ts":176,"./readonly":177,"./readonly.ts":177,"./rectangleSelection":178,"./rectangleSelection.ts":178,"./renderer":179,"./renderer.ts":179,"./saver":180,"./saver.ts":180,"./toolbar":84,"./toolbar/":84,"./toolbar/blockSettings":181,"./toolbar/blockSettings.ts":181,"./toolbar/conversion":182,"./toolbar/conversion.ts":182,"./toolbar/index":84,"./toolbar/index.ts":84,"./toolbar/inline":183,"./toolbar/inline.ts":183,"./tools":184,"./tools.ts":184,"./ui":186,"./ui.ts":186};function n(s){var a=o(s);return e(a)}function o(s){if(!e.o(i,s)){var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}return i[s]}n.keys=function(){return Object.keys(i)},n.resolve=o,r.exports=n,n.id=376},function(r,t,e){var i=e(4);r.exports=function(n,o){for(;!Object.prototype.hasOwnProperty.call(n,o)&&(n=i(n))!==null;);return n},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(379)],(o=typeof(i=function(s,a,l,u){"use strict";var d=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=d(a),l=d(l),u=d(u);var p=function(){function g(){(0,a.default)(this,g)}return(0,l.default)(g,[{key:"show",value:function(m){u.default.show(m)}}]),g}();s.default=p,p.displayName="Notifier",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){r.exports=function(i){var n={};function o(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return i[s].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=i,o.c=n,o.d=function(s,a,l){o.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:l})},o.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.t=function(s,a){if(1&a&&(s=o(s)),8&a||4&a&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&a&&typeof s!="string")for(var u in s)o.d(l,u,function(d){return s[d]}.bind(null,u));return l},o.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(a,"a",a),a},o.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},o.p="/",o(o.s=0)}([function(i,n,o){"use strict";o(1),i.exports=function(){var s=o(6),a=null;return{show:function(l){if(l.message){(function(){if(a)return!0;a=s.getWrapper(),document.body.appendChild(a)})();var u=null,d=l.time||8e3;switch(l.type){case"confirm":u=s.confirm(l);break;case"prompt":u=s.prompt(l);break;default:u=s.alert(l),window.setTimeout(function(){u.remove()},d)}a.appendChild(u),u.classList.add("cdx-notify--bounce-in")}}}}()},function(i,n,o){var s=o(2);typeof s=="string"&&(s=[[i.i,s,""]]),o(4)(s,{hmr:!0,transform:void 0,insertInto:void 0}),s.locals&&(i.exports=s.locals)},function(i,n,o){(i.exports=o(3)(!1)).push([i.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(i,n){i.exports=function(o){var s=[];return s.toString=function(){return this.map(function(a){var l=function(u,d){var p,g=u[1]||"",m=u[3];if(!m)return g;if(d&&typeof btoa=="function"){var k=(p=m,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(p))))+" */"),y=m.sources.map(function(v){return"/*# sourceURL="+m.sourceRoot+v+" */"});return[g].concat(y).concat([k]).join(`
`)}return[g].join(`
`)}(a,o);return a[2]?"@media "+a[2]+"{"+l+"}":l}).join("")},s.i=function(a,l){typeof a=="string"&&(a=[[null,a,""]]);for(var u={},d=0;d<this.length;d++){var p=this[d][0];typeof p=="number"&&(u[p]=!0)}for(d=0;d<a.length;d++){var g=a[d];typeof g[0]=="number"&&u[g[0]]||(l&&!g[2]?g[2]=l:l&&(g[2]="("+g[2]+") and ("+l+")"),s.push(g))}},s}},function(i,n,o){var s,a,l={},u=(s=function(){return window&&document&&document.all&&!window.atob},function(){return a===void 0&&(a=s.apply(this,arguments)),a}),d=function(w){var S={};return function(O){if(typeof O=="function")return O();if(S[O]===void 0){var B=function(A){return document.querySelector(A)}.call(this,O);if(window.HTMLIFrameElement&&B instanceof window.HTMLIFrameElement)try{B=B.contentDocument.head}catch(A){B=null}S[O]=B}return S[O]}}(),p=null,g=0,m=[],k=o(5);function y(w,S){for(var O=0;O<w.length;O++){var B=w[O],A=l[B.id];if(A){A.refs++;for(var R=0;R<A.parts.length;R++)A.parts[R](B.parts[R]);for(;R<B.parts.length;R++)A.parts.push(h(B.parts[R],S))}else{var T=[];for(R=0;R<B.parts.length;R++)T.push(h(B.parts[R],S));l[B.id]={id:B.id,refs:1,parts:T}}}}function v(w,S){for(var O=[],B={},A=0;A<w.length;A++){var R=w[A],T=S.base?R[0]+S.base:R[0],L={css:R[1],media:R[2],sourceMap:R[3]};B[T]?B[T].parts.push(L):O.push(B[T]={id:T,parts:[L]})}return O}function x(w,S){var O=d(w.insertInto);if(!O)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var B=m[m.length-1];if(w.insertAt==="top")B?B.nextSibling?O.insertBefore(S,B.nextSibling):O.appendChild(S):O.insertBefore(S,O.firstChild),m.push(S);else if(w.insertAt==="bottom")O.appendChild(S);else{if(typeof w.insertAt!="object"||!w.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var A=d(w.insertInto+" "+w.insertAt.before);O.insertBefore(S,A)}}function C(w){if(w.parentNode===null)return!1;w.parentNode.removeChild(w);var S=m.indexOf(w);S>=0&&m.splice(S,1)}function c(w){var S=document.createElement("style");return w.attrs.type===void 0&&(w.attrs.type="text/css"),_(S,w.attrs),x(w,S),S}function _(w,S){Object.keys(S).forEach(function(O){w.setAttribute(O,S[O])})}function h(w,S){var O,B,A,R;if(S.transform&&w.css){if(!(R=S.transform(w.css)))return function(){};w.css=R}if(S.singleton){var T=g++;O=p||(p=c(S)),B=E.bind(null,O,T,!1),A=E.bind(null,O,T,!0)}else w.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(O=function(L){var P=document.createElement("link");return L.attrs.type===void 0&&(L.attrs.type="text/css"),L.attrs.rel="stylesheet",_(P,L.attrs),x(L,P),P}(S),B=function(L,P,D){var H=D.css,j=D.sourceMap,F=P.convertToAbsoluteUrls===void 0&&j;(P.convertToAbsoluteUrls||F)&&(H=k(H)),j&&(H+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(j))))+" */");var K=new Blob([H],{type:"text/css"}),q=L.href;L.href=URL.createObjectURL(K),q&&URL.revokeObjectURL(q)}.bind(null,O,S),A=function(){C(O),O.href&&URL.revokeObjectURL(O.href)}):(O=c(S),B=function(L,P){var D=P.css,H=P.media;if(H&&L.setAttribute("media",H),L.styleSheet)L.styleSheet.cssText=D;else{for(;L.firstChild;)L.removeChild(L.firstChild);L.appendChild(document.createTextNode(D))}}.bind(null,O),A=function(){C(O)});return B(w),function(L){if(L){if(L.css===w.css&&L.media===w.media&&L.sourceMap===w.sourceMap)return;B(w=L)}else A()}}i.exports=function(w,S){if(typeof DEBUG!="undefined"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(S=S||{}).attrs=typeof S.attrs=="object"?S.attrs:{},S.singleton||typeof S.singleton=="boolean"||(S.singleton=u()),S.insertInto||(S.insertInto="head"),S.insertAt||(S.insertAt="bottom");var O=v(w,S);return y(O,S),function(B){for(var A=[],R=0;R<O.length;R++){var T=O[R];(L=l[T.id]).refs--,A.push(L)}for(B&&y(v(B,S),S),R=0;R<A.length;R++){var L;if((L=A[R]).refs===0){for(var P=0;P<L.parts.length;P++)L.parts[P]();delete l[L.id]}}}};var b,M=(b=[],function(w,S){return b[w]=S,b.filter(Boolean).join(`
`)});function E(w,S,O,B){var A=O?"":B.css;if(w.styleSheet)w.styleSheet.cssText=M(S,A);else{var R=document.createTextNode(A),T=w.childNodes;T[S]&&w.removeChild(T[S]),T.length?w.insertBefore(R,T[S]):w.appendChild(R)}}},function(i,n){i.exports=function(o){var s=typeof window!="undefined"&&window.location;if(!s)throw new Error("fixUrls requires window.location");if(!o||typeof o!="string")return o;var a=s.protocol+"//"+s.host,l=a+s.pathname.replace(/\/[^\/]*$/,"/");return o.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(u,d){var p,g=d.trim().replace(/^"(.*)"$/,function(m,k){return k}).replace(/^'(.*)'$/,function(m,k){return k});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(g)?u:(p=g.indexOf("//")===0?g:g.indexOf("/")===0?a+g:l+g.replace(/^\.\//,""),"url("+JSON.stringify(p)+")")})}},function(i,n,o){"use strict";var s,a,l,u,d,p;i.exports=(s="cdx-notify",a="cdx-notify__cross",l="cdx-notify__button--confirm",u="cdx-notify__button",d="cdx-notify__btns-wrapper",{alert:p=function(g){var m=document.createElement("DIV"),k=document.createElement("DIV"),y=g.message,v=g.style;return m.classList.add(s),v&&m.classList.add(s+"--"+v),m.innerHTML=y,k.classList.add(a),k.addEventListener("click",m.remove.bind(m)),m.appendChild(k),m},confirm:function(g){var m=p(g),k=document.createElement("div"),y=document.createElement("button"),v=document.createElement("button"),x=m.querySelector("."+a),C=g.cancelHandler,c=g.okHandler;return k.classList.add(d),y.innerHTML=g.okText||"Confirm",v.innerHTML=g.cancelText||"Cancel",y.classList.add(u),v.classList.add(u),y.classList.add(l),v.classList.add("cdx-notify__button--cancel"),C&&typeof C=="function"&&(v.addEventListener("click",C),x.addEventListener("click",C)),c&&typeof c=="function"&&y.addEventListener("click",c),y.addEventListener("click",m.remove.bind(m)),v.addEventListener("click",m.remove.bind(m)),k.appendChild(y),k.appendChild(v),m.appendChild(k),m},prompt:function(g){var m=p(g),k=document.createElement("div"),y=document.createElement("button"),v=document.createElement("input"),x=m.querySelector("."+a),C=g.cancelHandler,c=g.okHandler;return k.classList.add(d),y.innerHTML=g.okText||"Ok",y.classList.add(u),y.classList.add(l),v.classList.add("cdx-notify__input"),g.placeholder&&v.setAttribute("placeholder",g.placeholder),g.default&&(v.value=g.default),g.inputType&&(v.type=g.inputType),C&&typeof C=="function"&&x.addEventListener("click",C),c&&typeof c=="function"&&y.addEventListener("click",function(){c(v.value)}),y.addEventListener("click",m.remove.bind(m)),k.appendChild(v),k.appendChild(y),m.appendChild(k),m},getWrapper:function(){var g=document.createElement("DIV");return g.classList.add("cdx-notifies"),g}})}])},function(r,t,e){var i,n;(n=typeof(i=function(){function o(m){var k=m.tags;if(!Object.keys(k).map(function(y){return typeof k[y]}).every(function(y){return y==="object"||y==="boolean"||y==="function"}))throw new Error("The configuration was invalid");this.config=m}var s=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function a(m){return s.indexOf(m.nodeName)!==-1}var l=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function u(m){return l.indexOf(m.nodeName)!==-1}function d(m,k,y){return typeof m.tags[k]=="function"?m.tags[k](y):m.tags[k]}function p(m,k){return k===void 0||typeof k=="boolean"&&!k}function g(m,k,y){var v=m.name.toLowerCase();return k!==!0&&(typeof k[v]=="function"?!k[v](m.value,y):k[v]===void 0||k[v]===!1||typeof k[v]=="string"&&k[v]!==m.value)}return o.prototype.clean=function(m){let k=document.implementation.createHTMLDocument(),y=k.createElement("div");return y.innerHTML=m,this._sanitize(k,y),y.innerHTML},o.prototype._sanitize=function(m,k){var y=function(w,S){return w.createTreeWalker(S,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}(m,k),v=y.firstChild();if(v)do if(v.nodeType!==Node.TEXT_NODE){if(v.nodeType===Node.COMMENT_NODE){k.removeChild(v),this._sanitize(m,k);break}var x,C=u(v);C&&(x=Array.prototype.some.call(v.childNodes,a));var c=!!k.parentNode,_=a(k)&&a(v)&&c,h=v.nodeName.toLowerCase(),b=d(this.config,h,v);if(C&&x||p(0,b)||!this.config.keepNestedBlockElements&&_){if(v.nodeName!=="SCRIPT"&&v.nodeName!=="STYLE")for(;v.childNodes.length>0;)k.insertBefore(v.childNodes[0],v);k.removeChild(v),this._sanitize(m,k);break}for(var M=0;M<v.attributes.length;M+=1){var E=v.attributes[M];g(E,b,v)&&(v.removeAttribute(E.name),M-=1)}this._sanitize(m,v)}else if(v.data.trim()===""&&(v.previousElementSibling&&a(v.previousElementSibling)||v.nextElementSibling&&a(v.nextElementSibling))){k.removeChild(v),this._sanitize(m,k);break}while(v=y.nextSibling())},o})=="function"?i.call(t,e,t,r):i)===void 0||(r.exports=n)},function(r,t,e){r.exports=function(i){var n={};function o(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return i[s].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=i,o.c=n,o.d=function(s,a,l){o.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:l})},o.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.t=function(s,a){if(1&a&&(s=o(s)),8&a||4&a&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&a&&typeof s!="string")for(var u in s)o.d(l,u,function(d){return s[d]}.bind(null,u));return l},o.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(a,"a",a),a},o.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},o.p="",o(o.s=0)}([function(i,n,o){i.exports=o(1)},function(i,n,o){"use strict";o.r(n),o.d(n,"default",function(){return s});class s{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(l,u,d){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);let p=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},d);if(p.hidingDelay&&(this.hidingDelay=p.hidingDelay),this.nodes.content.innerHTML="",typeof u=="string")this.nodes.content.appendChild(document.createTextNode(u));else{if(!(u instanceof Node))throw Error("[CodeX Tooltip] Wrong type of \xABcontent\xBB passed. It should be an instance of Node or String. But "+typeof u+" given.");this.nodes.content.appendChild(u)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),p.placement){case"top":this.placeTop(l,p);break;case"left":this.placeLeft(l,p);break;case"right":this.placeRight(l,p);break;case"bottom":default:this.placeBottom(l,p)}p&&p.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},p.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(l=!1){if(this.hidingDelay&&!l)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(l,u,d){l.addEventListener("mouseenter",()=>{this.show(l,u,d)}),l.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){let l="codex-tooltips-style";if(document.getElementById(l))return;let u=o(2),d=this.make("style",null,{textContent:u.toString(),id:l});this.prepend(document.head,d)}placeBottom(l,u){let d=l.getBoundingClientRect(),p=d.left+l.clientWidth/2-this.nodes.wrapper.offsetWidth/2,g=d.bottom+window.pageYOffset+this.offsetTop+u.marginTop;this.applyPlacement("bottom",p,g)}placeTop(l,u){let d=l.getBoundingClientRect(),p=d.left+l.clientWidth/2-this.nodes.wrapper.offsetWidth/2,g=d.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",p,g)}placeLeft(l,u){let d=l.getBoundingClientRect(),p=d.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-u.marginLeft,g=d.top+window.pageYOffset+l.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",p,g)}placeRight(l,u){let d=l.getBoundingClientRect(),p=d.right+this.offsetRight+u.marginRight,g=d.top+window.pageYOffset+l.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",p,g)}applyPlacement(l,u,d){this.nodes.wrapper.classList.add(this.CSS.placement[l]),this.nodes.wrapper.style.left=u+"px",this.nodes.wrapper.style.top=d+"px"}make(l,u=null,d={}){let p=document.createElement(l);Array.isArray(u)?p.classList.add(...u):u&&p.classList.add(u);for(let g in d)d.hasOwnProperty(g)&&(p[g]=d[g]);return p}append(l,u){Array.isArray(u)?u.forEach(d=>l.appendChild(d)):l.appendChild(u)}prepend(l,u){Array.isArray(u)?(u=u.reverse()).forEach(d=>l.prepend(d)):l.prepend(u)}}},function(i,n){i.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(19),e(8),e(25)],(o=typeof(i=function(a,l,u,d,p,g){"use strict";var m=e(1);function k(v){if(typeof WeakMap!="function")return null;var x=new WeakMap,C=new WeakMap;return(k=function(c){return c?C:x})(v)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=m(l),u=m(u),d=m(d),p=function(v,x){if(!x&&v&&v.__esModule)return v;if(v===null||s(v)!=="object"&&typeof v!="function")return{default:v};var C=k(x);if(C&&C.has(v))return C.get(v);var c={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in v)if(h!=="default"&&Object.prototype.hasOwnProperty.call(v,h)){var b=_?Object.getOwnPropertyDescriptor(v,h):null;b&&(b.get||b.set)?Object.defineProperty(c,h,b):c[h]=v[h]}return c.default=v,C&&C.set(v,c),c}(p),g=m(g);var y=function(){function v(x,C){(0,l.default)(this,v),this.cursor=-1,this.items=[],this.items=x||[],this.focusedCssClass=C}return(0,u.default)(v,[{key:"currentItem",get:function(){return this.cursor===-1?null:this.items[this.cursor]}},{key:"setCursor",value:function(x){x<this.items.length&&x>=-1&&(this.dropCursor(),this.cursor=x,this.items[this.cursor].classList.add(this.focusedCssClass))}},{key:"setItems",value:function(x){this.items=x}},{key:"next",value:function(){this.cursor=this.leafNodesAndReturnIndex(v.directions.RIGHT)}},{key:"previous",value:function(){this.cursor=this.leafNodesAndReturnIndex(v.directions.LEFT)}},{key:"dropCursor",value:function(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}},{key:"leafNodesAndReturnIndex",value:function(x){var C=this;if(this.items.length===0)return this.cursor;var c=this.cursor;return c===-1?c=x===v.directions.RIGHT?-1:0:this.items[c].classList.remove(this.focusedCssClass),c=x===v.directions.RIGHT?(c+1)%this.items.length:(this.items.length+c-1)%this.items.length,d.default.canSetCaret(this.items[c])&&p.delay(function(){return g.default.setCursor(C.items[c])},50)(),this.items[c].classList.add(this.focusedCssClass),c}}]),v}();a.default=y,y.displayName="DomIterator",y.directions={RIGHT:"right",LEFT:"left"},r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(8),e(19),e(61)],(o=typeof(i=function(a,l,u,d,p,g){"use strict";var m=e(1);function k(v){if(typeof WeakMap!="function")return null;var x=new WeakMap,C=new WeakMap;return(k=function(c){return c?C:x})(v)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=m(l),u=m(u),d=function(v,x){if(!x&&v&&v.__esModule)return v;if(v===null||s(v)!=="object"&&typeof v!="function")return{default:v};var C=k(x);if(C&&C.has(v))return C.get(v);var c={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in v)if(h!=="default"&&Object.prototype.hasOwnProperty.call(v,h)){var b=_?Object.getOwnPropertyDescriptor(v,h):null;b&&(b.get||b.set)?Object.defineProperty(c,h,b):c[h]=v[h]}return c.default=v,C&&C.set(v,c),c}(d),p=m(p);var y=function(){function v(x){(0,l.default)(this,v),this.blocks=[],this.workingArea=x}return(0,u.default)(v,[{key:"length",get:function(){return this.blocks.length}},{key:"array",get:function(){return this.blocks}},{key:"nodes",get:function(){return d.array(this.workingArea.children)}},{key:"push",value:function(x){this.blocks.push(x),this.insertToDOM(x)}},{key:"swap",value:function(x,C){var c=this.blocks[C];p.default.swap(this.blocks[x].holder,c.holder),this.blocks[C]=this.blocks[x],this.blocks[x]=c}},{key:"move",value:function(x,C){var c=this.blocks.splice(C,1)[0],_=x-1,h=Math.max(0,_),b=this.blocks[h];x>0?this.insertToDOM(c,"afterend",b):this.insertToDOM(c,"beforebegin",b),this.blocks.splice(x,0,c);var M=this.composeBlockEvent("move",{fromIndex:C,toIndex:x});c.call(g.BlockToolAPI.MOVED,M)}},{key:"insert",value:function(x,C){var c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(this.length){x>this.length&&(x=this.length),c&&(this.blocks[x].holder.remove(),this.blocks[x].call(g.BlockToolAPI.REMOVED));var _=c?1:0;if(this.blocks.splice(x,_,C),x>0){var h=this.blocks[x-1];this.insertToDOM(C,"afterend",h)}else{var b=this.blocks[x+1];b?this.insertToDOM(C,"beforebegin",b):this.insertToDOM(C)}}else this.push(C)}},{key:"remove",value:function(x){isNaN(x)&&(x=this.length-1),this.blocks[x].holder.remove(),this.blocks[x].call(g.BlockToolAPI.REMOVED),this.blocks.splice(x,1)}},{key:"removeAll",value:function(){this.workingArea.innerHTML="",this.blocks.forEach(function(x){return x.call(g.BlockToolAPI.REMOVED)}),this.blocks.length=0}},{key:"insertAfter",value:function(x,C){var c=this.blocks.indexOf(x);this.insert(c+1,C)}},{key:"get",value:function(x){return this.blocks[x]}},{key:"indexOf",value:function(x){return this.blocks.indexOf(x)}},{key:"insertToDOM",value:function(x,C,c){C?c.holder.insertAdjacentElement(C,x.holder):this.workingArea.appendChild(x.holder),x.call(g.BlockToolAPI.RENDERED)}},{key:"composeBlockEvent",value:function(x,C){return new CustomEvent(x,{detail:C})}}],[{key:"set",value:function(x,C,c){return isNaN(Number(C))?(Reflect.set(x,C,c),!0):(x.insert(+C,c),!0)}},{key:"get",value:function(x,C){return isNaN(Number(C))?Reflect.get(x,C):x.get(+C)}}]),v}();a.default=y,y.displayName="Blocks",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t],(o=typeof(i=function(s){"use strict";var a;Object.defineProperty(s,"__esModule",{value:!0}),s.BlockMutationType=void 0,s.BlockMutationType=a,function(l){l.Added="block-added",l.Removed="block-removed",l.Moved="block-moved",l.Changed="block-changed"}(a||(s.BlockMutationType=a={}))})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){r.exports=function(i){var n={};function o(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return i[s].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=i,o.c=n,o.d=function(s,a,l){o.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:l})},o.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.t=function(s,a){if(1&a&&(s=o(s)),8&a||4&a&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&a&&typeof s!="string")for(var u in s)o.d(l,u,function(d){return s[d]}.bind(null,u));return l},o.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(a,"a",a),a},o.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},o.p="",o(o.s=0)}([function(i,n,o){"use strict";function s(u,d){for(var p=0;p<d.length;p++){var g=d[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}function a(u,d,p){return d&&s(u.prototype,d),p&&s(u,p),u}o.r(n);var l=function(){function u(d){var p=this;(function(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")})(this,u),this.commands={},this.keys={},this.name=d.name,this.parseShortcutName(d.name),this.element=d.on,this.callback=d.callback,this.executeShortcut=function(g){p.execute(g)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return a(u,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),a(u,[{key:"parseShortcutName",value:function(d){d=d.split("+");for(var p=0;p<d.length;p++){d[p]=d[p].toUpperCase();var g=!1;for(var m in u.supportedCommands)if(u.supportedCommands[m].includes(d[p])){g=this.commands[m]=!0;break}g||(this.keys[d[p]]=!0)}for(var k in u.supportedCommands)this.commands[k]||(this.commands[k]=!1)}},{key:"execute",value:function(d){var p,g={CMD:d.ctrlKey||d.metaKey,SHIFT:d.shiftKey,ALT:d.altKey},m=!0;for(p in this.commands)this.commands[p]!==g[p]&&(m=!1);var k,y=!0;for(k in this.keys)y=y&&d.keyCode===u.keyCodes[k];m&&y&&this.callback(d)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),u}();n.default=l}]).default},function(r,t,e){var i,n,o,s=e(7);n=[t,e(20),e(21),e(2),e(3),e(114),e(5),e(6),e(4),e(7),e(8),e(61),e(116),e(82),e(85),e(54),e(68)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x,C,c,_,h,b,M){"use strict";var E=e(1);function w(T){if(typeof WeakMap!="function")return null;var L=new WeakMap,P=new WeakMap;return(w=function(D){return D?P:L})(T)}function S(T,L){if(!L&&T&&T.__esModule)return T;if(T===null||s(T)!=="object"&&typeof T!="function")return{default:T};var P=w(L);if(P&&P.has(T))return P.get(T);var D={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in T)if(j!=="default"&&Object.prototype.hasOwnProperty.call(T,j)){var F=H?Object.getOwnPropertyDescriptor(T,j):null;F&&(F.get||F.set)?Object.defineProperty(D,j,F):D[j]=T[j]}return D.default=T,P&&P.set(T,D),D}function O(T){var L=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var P,D=(0,y.default)(T);if(L){var H=(0,y.default)(this).constructor;P=Reflect.construct(D,arguments,H)}else P=D.apply(this,arguments);return(0,k.default)(this,P)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.ToolboxEvent=void 0,l=E(l),u=E(u),d=E(d),p=E(p),g=E(g),m=E(m),k=E(k),y=E(y),v=E(v),x=S(x),c=E(c),_=E(_),h=S(h),b=E(b);var B,A=function(T,L,P,D){var H,j=arguments.length,F=j<3?L:D===null?D=Object.getOwnPropertyDescriptor(L,P):D;if((typeof Reflect=="undefined"?"undefined":(0,v.default)(Reflect))==="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(T,L,P,D);else for(var K=T.length-1;K>=0;K--)(H=T[K])&&(F=(j<3?H(F):j>3?H(L,P,F):H(L,P))||F);return j>3&&F&&Object.defineProperty(L,P,F),F};a.ToolboxEvent=B,function(T){T.Opened="toolbox-opened",T.Closed="toolbox-closed",T.BlockAdded="toolbox-block-added"}(B||(a.ToolboxEvent=B={}));var R=function(T){(0,m.default)(D,T);var L,P=O(D);function D(H){var j,F=H.api,K=H.tools,q=H.i18nLabels;return(0,d.default)(this,D),(j=P.call(this)).opened=!1,j.nodes={toolbox:null},j.onOverlayClicked=function(){j.close()},j.api=F,j.tools=K,j.i18nLabels=q,j}return(0,p.default)(D,[{key:"isEmpty",get:function(){return this.toolsToBeDisplayed.length===0}},{key:"make",value:function(){return this.popover=new h.default({scopeElement:this.api.ui.nodes.redactor,className:D.CSS.toolbox,searchable:!0,filterLabel:this.i18nLabels.filter,nothingFoundLabel:this.i18nLabels.nothingFound,items:this.toolboxItemsToBeDisplayed}),this.popover.on(h.PopoverEvent.OverlayClicked,this.onOverlayClicked),this.enableShortcuts(),this.nodes.toolbox=this.popover.getElement(),this.nodes.toolbox}},{key:"hasFocus",value:function(){var H;return(H=this.popover)===null||H===void 0?void 0:H.hasFocus()}},{key:"destroy",value:function(){var H;(0,g.default)((0,y.default)(D.prototype),"destroy",this).call(this),this.nodes&&this.nodes.toolbox&&(this.nodes.toolbox.remove(),this.nodes.toolbox=null),this.removeAllShortcuts(),(H=this.popover)===null||H===void 0||H.off(h.PopoverEvent.OverlayClicked,this.onOverlayClicked)}},{key:"toolButtonActivated",value:function(H,j){this.insertNewBlock(H,j)}},{key:"open",value:function(){var H;this.isEmpty||((H=this.popover)===null||H===void 0||H.show(),this.opened=!0,this.emit(B.Opened))}},{key:"close",value:function(){var H;(H=this.popover)===null||H===void 0||H.hide(),this.opened=!1,this.emit(B.Closed)}},{key:"toggle",value:function(){this.opened?this.close():this.open()}},{key:"toolsToBeDisplayed",get:function(){var H=[];return this.tools.forEach(function(j){j.toolbox&&H.push(j)}),H}},{key:"toolboxItemsToBeDisplayed",get:function(){var H=this,j=function(F,K){return{icon:F.icon,title:b.default.t(M.I18nInternalNS.toolNames,F.title||x.capitalize(K.name)),name:K.name,onActivate:function(){H.toolButtonActivated(K.name,F.data)},secondaryLabel:K.shortcut?x.beautifyShortcut(K.shortcut):""}};return this.toolsToBeDisplayed.reduce(function(F,K){return Array.isArray(K.toolbox)?K.toolbox.forEach(function(q){F.push(j(q,K))}):K.toolbox!==void 0&&F.push(j(K.toolbox,K)),F},[])}},{key:"enableShortcuts",value:function(){var H=this;this.toolsToBeDisplayed.forEach(function(j){var F=j.shortcut;F&&H.enableShortcutForTool(j.name,F)})}},{key:"enableShortcutForTool",value:function(H,j){var F=this;c.default.add({name:j,on:this.api.ui.nodes.redactor,handler:function(K){K.preventDefault(),F.insertNewBlock(H)}})}},{key:"removeAllShortcuts",value:function(){var H=this;this.toolsToBeDisplayed.forEach(function(j){var F=j.shortcut;F&&c.default.remove(H.api.ui.nodes.redactor,F)})}},{key:"insertNewBlock",value:(L=(0,u.default)(l.default.mark(function H(j,F){var K,q,W,Y,Z,X;return l.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(K=this.api.blocks.getCurrentBlockIndex(),q=this.api.blocks.getBlockByIndex(K)){Q.next=4;break}return Q.abrupt("return");case 4:if(W=q.isEmpty?K:K+1,!F){Q.next=10;break}return Q.next=8,this.api.blocks.composeBlockData(j);case 8:Z=Q.sent,Y=Object.assign(Z,F);case 10:(X=this.api.blocks.insert(j,Y,void 0,W,void 0,q.isEmpty)).call(C.BlockToolAPI.APPEND_CALLBACK),this.api.caret.setToBlock(W),this.emit(B.BlockAdded,{block:X}),this.api.toolbar.close();case 15:case"end":return Q.stop()}},H,this)})),function(H,j){return L.apply(this,arguments)})}],[{key:"CSS",get:function(){return{toolbox:"ce-toolbox"}}}]),D}(_.default);a.default=R,R.displayName="Toolbox",A([x.cacheable],R.prototype,"toolsToBeDisplayed",null),A([x.cacheable],R.prototype,"toolboxItemsToBeDisplayed",null)})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(19),e(112),e(37)],(o=typeof(i=function(s,a,l,u,d,p){"use strict";var g=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=g(a),l=g(l),u=g(u),d=g(d);var m=function(){function k(y){var v=y.items,x=y.onSearch,C=y.placeholder;(0,a.default)(this,k),this.listeners=new d.default,this.items=v,this.onSearch=x,this.render(C)}return(0,l.default)(k,[{key:"getElement",value:function(){return this.wrapper}},{key:"focus",value:function(){this.input.focus()}},{key:"clear",value:function(){this.input.value="",this.searchQuery="",this.onSearch(this.foundItems)}},{key:"destroy",value:function(){this.listeners.removeAll()}},{key:"render",value:function(y){var v=this;this.wrapper=u.default.make("div",k.CSS.wrapper);var x=u.default.make("div",k.CSS.icon,{innerHTML:p.IconSearch});this.input=u.default.make("input",k.CSS.input,{placeholder:y}),this.wrapper.appendChild(x),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",function(){v.searchQuery=v.input.value,v.onSearch(v.foundItems)})}},{key:"foundItems",get:function(){var y=this;return this.items.filter(function(v){return y.checkItem(v)})}},{key:"checkItem",value:function(y){var v,x=((v=y.title)===null||v===void 0?void 0:v.toLowerCase())||"",C=this.searchQuery.toLowerCase();return x.includes(C)}}],[{key:"CSS",get:function(){return{wrapper:"cdx-search-field",icon:"cdx-search-field__icon",input:"cdx-search-field__input"}}}]),k}();s.default=m,m.displayName="SearchInput",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(8)],(o=typeof(i=function(s,a,l,u){"use strict";var d=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=d(a),l=d(l);var p=function(){function g(){(0,a.default)(this,g)}return(0,l.default)(g,[{key:"lock",value:function(){u.isIosDevice?this.lockHard():document.body.classList.add(g.CSS.scrollLocked)}},{key:"unlock",value:function(){u.isIosDevice?this.unlockHard():document.body.classList.remove(g.CSS.scrollLocked)}},{key:"lockHard",value:function(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset","".concat(this.scrollPosition,"px")),document.body.classList.add(g.CSS.scrollLockedHard)}},{key:"unlockHard",value:function(){document.body.classList.remove(g.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}}]),g}();s.default=p,p.displayName="ScrollLocker",p.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"},r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t],(o=typeof(i=function(s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.resolveAliases=function(a,l){var u={};return Object.keys(a).forEach(function(d){var p=l[d];p!==void 0?u[p]=a[d]:u[d]=a[d]}),u}})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){r.exports=function(i){var n={};function o(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return i[s].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=i,o.c=n,o.d=function(s,a,l){o.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:l})},o.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.t=function(s,a){if(1&a&&(s=o(s)),8&a||4&a&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&a&&typeof s!="string")for(var u in s)o.d(l,u,function(d){return s[d]}.bind(null,u));return l},o.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(a,"a",a),a},o.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},o.p="/",o(o.s=4)}([function(i,n,o){var s=o(1),a=o(2);typeof(a=a.__esModule?a.default:a)=="string"&&(a=[[i.i,a,""]]),s(a,{insert:"head",singleton:!1}),i.exports=a.locals||{}},function(i,n,o){"use strict";var s,a=function(){var c={};return function(_){if(c[_]===void 0){var h=document.querySelector(_);if(window.HTMLIFrameElement&&h instanceof window.HTMLIFrameElement)try{h=h.contentDocument.head}catch(b){h=null}c[_]=h}return c[_]}}(),l=[];function u(c){for(var _=-1,h=0;h<l.length;h++)if(l[h].identifier===c){_=h;break}return _}function d(c,_){for(var h={},b=[],M=0;M<c.length;M++){var E=c[M],w=_.base?E[0]+_.base:E[0],S=h[w]||0,O="".concat(w," ").concat(S);h[w]=S+1;var B=u(O),A={css:E[1],media:E[2],sourceMap:E[3]};B!==-1?(l[B].references++,l[B].updater(A)):l.push({identifier:O,updater:C(A,_),references:1}),b.push(O)}return b}function p(c){var _=document.createElement("style"),h=c.attributes||{};if(h.nonce===void 0){var b=o.nc;b&&(h.nonce=b)}if(Object.keys(h).forEach(function(E){_.setAttribute(E,h[E])}),typeof c.insert=="function")c.insert(_);else{var M=a(c.insert||"head");if(!M)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");M.appendChild(_)}return _}var g,m=(g=[],function(c,_){return g[c]=_,g.filter(Boolean).join(`
`)});function k(c,_,h,b){var M=h?"":b.media?"@media ".concat(b.media," {").concat(b.css,"}"):b.css;if(c.styleSheet)c.styleSheet.cssText=m(_,M);else{var E=document.createTextNode(M),w=c.childNodes;w[_]&&c.removeChild(w[_]),w.length?c.insertBefore(E,w[_]):c.appendChild(E)}}function y(c,_,h){var b=h.css,M=h.media,E=h.sourceMap;if(M?c.setAttribute("media",M):c.removeAttribute("media"),E&&btoa&&(b+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(E))))," */")),c.styleSheet)c.styleSheet.cssText=b;else{for(;c.firstChild;)c.removeChild(c.firstChild);c.appendChild(document.createTextNode(b))}}var v=null,x=0;function C(c,_){var h,b,M;if(_.singleton){var E=x++;h=v||(v=p(_)),b=k.bind(null,h,E,!1),M=k.bind(null,h,E,!0)}else h=p(_),b=y.bind(null,h,_),M=function(){(function(w){if(w.parentNode===null)return!1;w.parentNode.removeChild(w)})(h)};return b(c),function(w){if(w){if(w.css===c.css&&w.media===c.media&&w.sourceMap===c.sourceMap)return;b(c=w)}else M()}}i.exports=function(c,_){(_=_||{}).singleton||typeof _.singleton=="boolean"||(_.singleton=(s===void 0&&(s=Boolean(window&&document&&document.all&&!window.atob)),s));var h=d(c=c||[],_);return function(b){if(b=b||[],Object.prototype.toString.call(b)==="[object Array]"){for(var M=0;M<h.length;M++){var E=u(h[M]);l[E].references--}for(var w=d(b,_),S=0;S<h.length;S++){var O=u(h[S]);l[O].references===0&&(l[O].updater(),l.splice(O,1))}h=w}}}},function(i,n,o){(n=o(3)(!1)).push([i.i,`.ce-paragraph {
    line-height: 1.6em;
    outline: none;
}

.ce-paragraph[data-placeholder]:empty::before{
  content: attr(data-placeholder);
  color: #707684;
  font-weight: normal;
  opacity: 0;
}

/** Show placeholder at the first paragraph if Editor is empty */
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {
  opacity: 1;
}

.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {
  opacity: 0;
}

.ce-paragraph p:first-of-type{
    margin-top: 0;
}

.ce-paragraph p:last-of-type{
    margin-bottom: 0;
}
`,""]),i.exports=n},function(i,n,o){"use strict";i.exports=function(s){var a=[];return a.toString=function(){return this.map(function(l){var u=function(d,p){var g,m,k,y=d[1]||"",v=d[3];if(!v)return y;if(p&&typeof btoa=="function"){var x=(g=v,m=btoa(unescape(encodeURIComponent(JSON.stringify(g)))),k="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(m),"/*# ".concat(k," */")),C=v.sources.map(function(c){return"/*# sourceURL=".concat(v.sourceRoot||"").concat(c," */")});return[y].concat(C).concat([x]).join(`
`)}return[y].join(`
`)}(l,s);return l[2]?"@media ".concat(l[2]," {").concat(u,"}"):u}).join("")},a.i=function(l,u,d){typeof l=="string"&&(l=[[null,l,""]]);var p={};if(d)for(var g=0;g<this.length;g++){var m=this[g][0];m!=null&&(p[m]=!0)}for(var k=0;k<l.length;k++){var y=[].concat(l[k]);d&&p[y[0]]||(u&&(y[2]?y[2]="".concat(u," and ").concat(y[2]):y[2]=u),a.push(y))}},a}},function(i,n,o){"use strict";function s(u,d){for(var p=0;p<d.length;p++){var g=d[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}function a(u,d,p){return d&&s(u.prototype,d),p&&s(u,p),u}o.r(n),o.d(n,"default",function(){return l}),o(0);var l=function(){function u(d){var p=d.data,g=d.config,m=d.api,k=d.readOnly;(function(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")})(this,u),this.api=m,this.readOnly=k,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=g.placeholder?g.placeholder:u.DEFAULT_PLACEHOLDER,this._data={},this._element=this.drawView(),this._preserveBlank=g.preserveBlank!==void 0&&g.preserveBlank,this.data=p}return a(u,null,[{key:"DEFAULT_PLACEHOLDER",get:function(){return""}}]),a(u,[{key:"onKeyUp",value:function(d){d.code!=="Backspace"&&d.code!=="Delete"||this._element.textContent===""&&(this._element.innerHTML="")}},{key:"drawView",value:function(){var d=document.createElement("DIV");return d.classList.add(this._CSS.wrapper,this._CSS.block),d.contentEditable=!1,d.dataset.placeholder=this.api.i18n.t(this._placeholder),this.readOnly||(d.contentEditable=!0,d.addEventListener("keyup",this.onKeyUp)),d}},{key:"render",value:function(){return this._element}},{key:"merge",value:function(d){var p={text:this.data.text+d.text};this.data=p}},{key:"validate",value:function(d){return!(d.text.trim()===""&&!this._preserveBlank)}},{key:"save",value:function(d){return{text:d.innerHTML}}},{key:"onPaste",value:function(d){var p={text:d.detail.data.innerHTML};this.data=p}},{key:"data",get:function(){var d=this._element.innerHTML;return this._data.text=d,this._data},set:function(d){this._data=d||{},this._element.innerHTML=this._data.text||""}}],[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{text:{br:!0}}}},{key:"isReadOnlySupported",get:function(){return!0}},{key:"pasteConfig",get:function(){return{tags:["P"]}}},{key:"toolbox",get:function(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',title:"Text"}}}]),u}()}]).default},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(37)],(o=typeof(i=function(s,a,l,u){"use strict";var d=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=d(a),l=d(l);var p=function(){function g(){(0,a.default)(this,g),this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}return(0,l.default)(g,[{key:"render",value:function(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=u.IconBold,this.nodes.button}},{key:"surround",value:function(){document.execCommand(this.commandName)}},{key:"checkState",value:function(){var m=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,m),m}},{key:"shortcut",get:function(){return"CMD+B"}}],[{key:"sanitize",get:function(){return{b:{}}}}]),g}();s.default=p,p.displayName="BoldInlineTool",p.isInline=!0,p.title="Bold",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(37)],(o=typeof(i=function(s,a,l,u){"use strict";var d=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=d(a),l=d(l);var p=function(){function g(){(0,a.default)(this,g),this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}return(0,l.default)(g,[{key:"render",value:function(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=u.IconItalic,this.nodes.button}},{key:"surround",value:function(){document.execCommand(this.commandName)}},{key:"checkState",value:function(){var m=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,m),m}},{key:"shortcut",get:function(){return"CMD+I"}}],[{key:"sanitize",get:function(){return{i:{}}}}]),g}();s.default=p,p.displayName="ItalicInlineTool",p.isInline=!0,p.title="Italic",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(25),e(8),e(37)],(o=typeof(i=function(a,l,u,d,p,g){"use strict";var m=e(1);function k(v){if(typeof WeakMap!="function")return null;var x=new WeakMap,C=new WeakMap;return(k=function(c){return c?C:x})(v)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=m(l),u=m(u),d=m(d),p=function(v,x){if(!x&&v&&v.__esModule)return v;if(v===null||s(v)!=="object"&&typeof v!="function")return{default:v};var C=k(x);if(C&&C.has(v))return C.get(v);var c={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in v)if(h!=="default"&&Object.prototype.hasOwnProperty.call(v,h)){var b=_?Object.getOwnPropertyDescriptor(v,h):null;b&&(b.get||b.set)?Object.defineProperty(c,h,b):c[h]=v[h]}return c.default=v,C&&C.set(v,c),c}(p);var y=function(){function v(x){var C=x.api;(0,l.default)(this,v),this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=C.toolbar,this.inlineToolbar=C.inlineToolbar,this.notifier=C.notifier,this.i18n=C.i18n,this.selection=new d.default}return(0,u.default)(v,[{key:"render",value:function(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=g.IconLink,this.nodes.button}},{key:"renderActions",value:function(){var x=this;return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",function(C){C.keyCode===x.ENTER_KEY&&x.enterPressed(C)}),this.nodes.input}},{key:"surround",value:function(x){if(x){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());var C=this.selection.findParentTag("A");if(C)return this.selection.expandToTag(C),this.unlink(),this.closeActions(),this.checkState(),void this.toolbar.close()}this.toggleActions()}},{key:"checkState",value:function(){var x=this.selection.findParentTag("A");if(x){this.nodes.button.innerHTML=g.IconUnlink,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();var C=x.getAttribute("href");this.nodes.input.value=C!=="null"?C:"",this.selection.save()}else this.nodes.button.innerHTML=g.IconLink,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!x}},{key:"clear",value:function(){this.closeActions()}},{key:"shortcut",get:function(){return"CMD+K"}},{key:"toggleActions",value:function(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}},{key:"openActions",value:function(){var x=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.nodes.input.classList.add(this.CSS.inputShowed),x&&this.nodes.input.focus(),this.inputOpened=!0}},{key:"closeActions",value:function(){var x=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];if(this.selection.isFakeBackgroundEnabled){var C=new d.default;C.save(),this.selection.restore(),this.selection.removeFakeBackground(),C.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",x&&this.selection.clearSaved(),this.inputOpened=!1}},{key:"enterPressed",value:function(x){var C=this.nodes.input.value||"";return C.trim()?this.validateURL(C)?(C=this.prepareLink(C),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(C),x.preventDefault(),x.stopPropagation(),x.stopImmediatePropagation(),this.selection.collapseToEnd(),void this.inlineToolbar.close()):(this.notifier.show({message:"Pasted link is not valid.",style:"error"}),void p.log("Incorrect Link pasted","warn",C)):(this.selection.restore(),this.unlink(),x.preventDefault(),void this.closeActions())}},{key:"validateURL",value:function(x){return!/\s/.test(x)}},{key:"prepareLink",value:function(x){return x=x.trim(),x=this.addProtocol(x)}},{key:"addProtocol",value:function(x){if(/^(\w+):(\/\/)?/.test(x))return x;var C=/^\/[^/\s]/.test(x),c=x.substring(0,1)==="#",_=/^\/\/[^/\s]/.test(x);return C||c||_||(x="http://"+x),x}},{key:"insertLink",value:function(x){var C=this.selection.findParentTag("A");C&&this.selection.expandToTag(C),document.execCommand(this.commandLink,!1,x)}},{key:"unlink",value:function(){document.execCommand(this.commandUnlink)}}],[{key:"sanitize",get:function(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}}]),v}();a.default=y,y.displayName="LinkInlineTool",y.isInline=!0,y.title="Link",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(19)],(o=typeof(i=function(s,a,l,u){"use strict";var d=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=d(a),l=d(l),u=d(u);var p=function(){function g(m){var k=m.data,y=m.api;(0,a.default)(this,g),this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=y,this.title=k.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=k.savedData,this.wrapper=this.make()}return(0,l.default)(g,[{key:"render",value:function(){return this.wrapper}},{key:"save",value:function(){return this.savedData}},{key:"make",value:function(){var m=u.default.make("div",this.CSS.wrapper),k=u.default.make("div",this.CSS.info),y=u.default.make("div",this.CSS.title,{textContent:this.title}),v=u.default.make("div",this.CSS.subtitle,{textContent:this.subtitle});return m.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="52" height="52" viewBox="0 0 52 52"><path fill="#D76B6B" fill-rule="nonzero" d="M26 52C11.64 52 0 40.36 0 26S11.64 0 26 0s26 11.64 26 26-11.64 26-26 26zm0-3.25c12.564 0 22.75-10.186 22.75-22.75S38.564 3.25 26 3.25 3.25 13.436 3.25 26 13.436 48.75 26 48.75zM15.708 33.042a2.167 2.167 0 1 1 0-4.334 2.167 2.167 0 0 1 0 4.334zm23.834 0a2.167 2.167 0 1 1 0-4.334 2.167 2.167 0 0 1 0 4.334zm-15.875 5.452a1.083 1.083 0 1 1-1.834-1.155c1.331-2.114 3.49-3.179 6.334-3.179 2.844 0 5.002 1.065 6.333 3.18a1.083 1.083 0 1 1-1.833 1.154c-.913-1.45-2.366-2.167-4.5-2.167s-3.587.717-4.5 2.167z"/></svg>',k.appendChild(y),k.appendChild(v),m.appendChild(k),m}}]),g}();s.default=p,p.displayName="Stub",p.isReadOnlySupported=!0,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(69),e(396),e(397),e(398)],(o=typeof(i=function(s,a,l,u,d,p,g){"use strict";var m=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=m(a),l=m(l),d=m(d),p=m(p),g=m(g);var k=function(v,x){var C={};for(var c in v)Object.prototype.hasOwnProperty.call(v,c)&&x.indexOf(c)<0&&(C[c]=v[c]);if(v!=null&&typeof Object.getOwnPropertySymbols=="function"){var _=0;for(c=Object.getOwnPropertySymbols(v);_<c.length;_++)x.indexOf(c[_])<0&&Object.prototype.propertyIsEnumerable.call(v,c[_])&&(C[c[_]]=v[c[_]])}return C},y=function(){function v(x,C,c){(0,a.default)(this,v),this.api=c,this.config=x,this.editorConfig=C}return(0,l.default)(v,[{key:"get",value:function(x){var C=this.config[x],c=C.class,_=C.isInternal,h=_!==void 0&&_,b=k(C,["class","isInternal"]);return new(this.getConstructor(c))({name:x,constructable:c,config:b,api:this.api,isDefault:x===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:h})}},{key:"getConstructor",value:function(x){switch(!0){case x[u.InternalInlineToolSettings.IsInline]:return d.default;case x[u.InternalTuneSettings.IsTune]:return p.default;default:return g.default}}}]),v}();s.default=y,y.displayName="ToolsFactory",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(69)],(o=typeof(i=function(a,l,u,d,p,g,m){"use strict";var k=e(1);function y(C){if(typeof WeakMap!="function")return null;var c=new WeakMap,_=new WeakMap;return(y=function(h){return h?_:c})(C)}function v(C){var c=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_){return!1}}();return function(){var _,h=(0,g.default)(C);if(c){var b=(0,g.default)(this).constructor;_=Reflect.construct(h,arguments,b)}else _=h.apply(this,arguments);return(0,p.default)(this,_)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=k(l),u=k(u),d=k(d),p=k(p),g=k(g);var x=function(C){(0,d.default)(_,C);var c=v(_);function _(){var h;return(0,l.default)(this,_),(h=c.apply(this,arguments)).type=m.ToolType.Inline,h}return(0,u.default)(_,[{key:"title",get:function(){return this.constructable[m.InternalInlineToolSettings.Title]}},{key:"create",value:function(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}}]),_}((m=function(C,c){if(!c&&C&&C.__esModule)return C;if(C===null||s(C)!=="object"&&typeof C!="function")return{default:C};var _=y(c);if(_&&_.has(C))return _.get(C);var h={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in C)if(M!=="default"&&Object.prototype.hasOwnProperty.call(C,M)){var E=b?Object.getOwnPropertyDescriptor(C,M):null;E&&(E.get||E.set)?Object.defineProperty(h,M,E):h[M]=C[M]}return h.default=C,_&&_.set(C,h),h}(m)).default);a.default=x,x.displayName="InlineTool",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(69)],(o=typeof(i=function(a,l,u,d,p,g,m){"use strict";var k=e(1);function y(C){if(typeof WeakMap!="function")return null;var c=new WeakMap,_=new WeakMap;return(y=function(h){return h?_:c})(C)}function v(C){var c=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_){return!1}}();return function(){var _,h=(0,g.default)(C);if(c){var b=(0,g.default)(this).constructor;_=Reflect.construct(h,arguments,b)}else _=h.apply(this,arguments);return(0,p.default)(this,_)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=k(l),u=k(u),d=k(d),p=k(p),g=k(g);var x=function(C){(0,d.default)(_,C);var c=v(_);function _(){var h;return(0,l.default)(this,_),(h=c.apply(this,arguments)).type=m.ToolType.Tune,h}return(0,u.default)(_,[{key:"create",value:function(h,b){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings,block:b,data:h})}}]),_}((m=function(C,c){if(!c&&C&&C.__esModule)return C;if(C===null||s(C)!=="object"&&typeof C!="function")return{default:C};var _=y(c);if(_&&_.has(C))return _.get(C);var h={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in C)if(M!=="default"&&Object.prototype.hasOwnProperty.call(C,M)){var E=b?Object.getOwnPropertyDescriptor(C,M):null;E&&(E.get||E.set)?Object.defineProperty(h,M,E):h[M]=C[M]}return h.default=C,_&&_.set(C,h),h}(m)).default);a.default=x,x.displayName="BlockTune",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,s=e(7);n=[t,e(2),e(3),e(114),e(5),e(6),e(4),e(7),e(69),e(8),e(185)],(o=typeof(i=function(a,l,u,d,p,g,m,k,y,v,x){"use strict";var C=e(1);function c(E){if(typeof WeakMap!="function")return null;var w=new WeakMap,S=new WeakMap;return(c=function(O){return O?S:w})(E)}function _(E,w){if(!w&&E&&E.__esModule)return E;if(E===null||s(E)!=="object"&&typeof E!="function")return{default:E};var S=c(w);if(S&&S.has(E))return S.get(E);var O={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in E)if(A!=="default"&&Object.prototype.hasOwnProperty.call(E,A)){var R=B?Object.getOwnPropertyDescriptor(E,A):null;R&&(R.get||R.set)?Object.defineProperty(O,A,R):O[A]=E[A]}return O.default=E,S&&S.set(E,O),O}function h(E){var w=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(S){return!1}}();return function(){var S,O=(0,m.default)(E);if(w){var B=(0,m.default)(this).constructor;S=Reflect.construct(O,arguments,B)}else S=O.apply(this,arguments);return(0,g.default)(this,S)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,l=C(l),u=C(u),d=C(d),p=C(p),g=C(g),m=C(m),k=C(k),y=_(y),v=_(v),x=C(x);var b=function(E,w,S,O){var B,A=arguments.length,R=A<3?w:O===null?O=Object.getOwnPropertyDescriptor(w,S):O;if((typeof Reflect=="undefined"?"undefined":(0,k.default)(Reflect))==="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(E,w,S,O);else for(var T=E.length-1;T>=0;T--)(B=E[T])&&(R=(A<3?B(R):A>3?B(w,S,R):B(w,S))||R);return A>3&&R&&Object.defineProperty(w,S,R),R},M=function(E){(0,p.default)(S,E);var w=h(S);function S(){var O;return(0,l.default)(this,S),(O=w.apply(this,arguments)).type=y.ToolType.Block,O.inlineTools=new x.default,O.tunes=new x.default,O}return(0,u.default)(S,[{key:"create",value:function(O,B,A){return new this.constructable({data:O,block:B,readOnly:A,api:this.api.getMethodsForTool(this),config:this.settings})}},{key:"isReadOnlySupported",get:function(){return this.constructable[y.InternalBlockToolSettings.IsReadOnlySupported]===!0}},{key:"isLineBreaksEnabled",get:function(){return this.constructable[y.InternalBlockToolSettings.IsEnabledLineBreaks]}},{key:"toolbox",get:function(){var O=this.constructable[y.InternalBlockToolSettings.Toolbox],B=this.config[y.UserSettings.Toolbox];if(!v.isEmpty(O)&&B!==!1)return B?Array.isArray(O)?Array.isArray(B)?B.map(function(A,R){var T=O[R];return T?Object.assign(Object.assign({},T),A):A}):[B]:Array.isArray(B)?B:[Object.assign(Object.assign({},O),B)]:Array.isArray(O)?O:[O]}},{key:"conversionConfig",get:function(){return this.constructable[y.InternalBlockToolSettings.ConversionConfig]}},{key:"enabledInlineTools",get:function(){return this.config[y.UserSettings.EnabledInlineTools]||!1}},{key:"enabledBlockTunes",get:function(){return this.config[y.UserSettings.EnabledBlockTunes]}},{key:"pasteConfig",get:function(){return this.constructable[y.InternalBlockToolSettings.PasteConfig]||{}}},{key:"sanitizeConfig",get:function(){var O=(0,d.default)((0,m.default)(S.prototype),"sanitizeConfig",this),B=this.baseSanitizeConfig;if(v.isEmpty(O))return B;var A={};for(var R in O)if(Object.prototype.hasOwnProperty.call(O,R)){var T=O[R];v.isObject(T)?A[R]=Object.assign({},B,T):A[R]=T}return A}},{key:"baseSanitizeConfig",get:function(){var O={};return Array.from(this.inlineTools.values()).forEach(function(B){return Object.assign(O,B.sanitizeConfig)}),Array.from(this.tunes.values()).forEach(function(B){return Object.assign(O,B.sanitizeConfig)}),O}}]),S}(y.default);a.default=M,M.displayName="BlockTool",b([v.cacheable],M.prototype,"sanitizeConfig",null),b([v.cacheable],M.prototype,"baseSanitizeConfig",null),r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(85),e(37)],(o=typeof(i=function(s,a,l,u,d){"use strict";var p=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=p(a),l=p(l),u=p(u);var g=function(){function m(k){var y=k.api;(0,a.default)(this,m),this.CSS={animation:"wobble"},this.api=y}return(0,l.default)(m,[{key:"render",value:function(){var k=this;return{icon:d.IconChevronDown,title:this.api.i18n.t("Move down"),onActivate:function(y,v){return k.handleClick(v)},name:"move-down"}}},{key:"handleClick",value:function(k){var y=this,v=this.api.blocks.getCurrentBlockIndex(),x=this.api.blocks.getBlockByIndex(v+1);if(!x){var C=k.target.closest("."+u.default.CSS.item).querySelector("."+u.default.CSS.itemIcon);return C.classList.add(this.CSS.animation),void window.setTimeout(function(){C.classList.remove(y.CSS.animation)},500)}var c=x.holder,_=c.getBoundingClientRect(),h=Math.abs(window.innerHeight-c.offsetHeight);_.top<window.innerHeight&&(h=window.scrollY+c.offsetHeight),window.scrollTo(0,h),this.api.blocks.move(v+1),this.api.toolbar.toggleBlockSettings(!0)}}]),m}();s.default=g,g.displayName="MoveDownTune",g.isTune=!0,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(37)],(o=typeof(i=function(s,a,l,u){"use strict";var d=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=d(a),l=d(l);var p=function(){function g(m){var k=m.api;(0,a.default)(this,g),this.api=k}return(0,l.default)(g,[{key:"render",value:function(){var m=this;return{icon:u.IconCross,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:function(){return m.handleClick()}}}}},{key:"handleClick",value:function(){this.api.blocks.delete()}}]),g}();s.default=p,p.displayName="DeleteTune",p.isTune=!0,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(85),e(37)],(o=typeof(i=function(s,a,l,u,d){"use strict";var p=e(1);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,a=p(a),l=p(l),u=p(u);var g=function(){function m(k){var y=k.api;(0,a.default)(this,m),this.CSS={animation:"wobble"},this.api=y}return(0,l.default)(m,[{key:"render",value:function(){var k=this;return{icon:d.IconChevronUp,title:this.api.i18n.t("Move up"),onActivate:function(y,v){return k.handleClick(v)},name:"move-up"}}},{key:"handleClick",value:function(k){var y=this,v=this.api.blocks.getCurrentBlockIndex(),x=this.api.blocks.getBlockByIndex(v),C=this.api.blocks.getBlockByIndex(v-1);if(v===0||!x||!C){var c=k.target.closest("."+u.default.CSS.item).querySelector("."+u.default.CSS.itemIcon);return c.classList.add(this.CSS.animation),void window.setTimeout(function(){c.classList.remove(y.CSS.animation)},500)}var _,h=x.holder,b=C.holder,M=h.getBoundingClientRect(),E=b.getBoundingClientRect();_=E.top>0?Math.abs(M.top)-Math.abs(E.top):window.innerHeight-Math.abs(M.top)+Math.abs(E.top),window.scrollBy(0,-1*_),this.api.blocks.move(v-1),this.api.toolbar.toggleBlockSettings(!0)}}]),m}();s.default=g,g.displayName="MoveUpTune",g.isTune=!0,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t){r.exports='.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide,.codex-editor__redactor--hidden{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff "}@media (min-width:651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width:651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor__loader{position:relative;height:30vh}.codex-editor__loader:before{content:"";position:absolute;left:50%;top:50%;width:30px;height:30px;margin-top:-15px;margin-left:-15px;border-radius:50%;border:2px solid rgba(201,201,204,.48);border-top-color:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-animation:editor-loader-spin .8s linear infinite;animation:editor-loader-spin .8s linear infinite;will-change:transform}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:rgba(46,170,220,.2);border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}::-moz-selection{background-color:#d4ecff}::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}@-webkit-keyframes editor-loader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes editor-loader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(var(--window-scroll-offset)*-1);position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width:650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover:hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus{-ms-flex-negative:0;flex-shrink:0}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width:650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #e8e8eb;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:6px;z-index:2}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-toolbar__plus{position:static}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width:650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media (max-width:650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover:hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__settings-btn{margin-left:3px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (min-width:651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width:650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #e8e8eb;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:6px;z-index:2}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-toolbar__settings-btn{position:static}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width:651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}.ce-toolbox{--gap:8px}@media (min-width:651px){.ce-toolbox{position:absolute;top:calc(26px + var(--gap));left:0}.ce-toolbox--opened-top{top:calc(var(--gap)*-1 + var(--popover-height)*-1)}}@media (min-width:651px){.codex-editor--narrow .ce-toolbox{left:auto;right:0}.codex-editor--narrow .ce-toolbox .ce-popover{right:0}}.ce-inline-toolbar{--y-offset:8px;position:absolute;background-color:#fff;border:1px solid #e8e8eb;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:6px;z-index:2}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar{-webkit-transform:translateX(-50%) translateY(8px) scale(.94);transform:translateX(-50%) translateY(8px) scale(.94);opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease,-webkit-transform .15s ease;transition:opacity .25s ease,-webkit-transform .15s ease;transition:transform .15s ease,opacity .25s ease;transition:transform .15s ease,opacity .25s ease,-webkit-transform .15s ease;will-change:transform,opacity;top:0;left:0;z-index:3}.ce-inline-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.ce-inline-toolbar--left-oriented{-webkit-transform:translateX(-23px) translateY(8px) scale(.94);transform:translateX(-23px) translateY(8px) scale(.94)}.ce-inline-toolbar--left-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-23px);transform:translateX(-23px)}.ce-inline-toolbar--right-oriented{-webkit-transform:translateX(-100%) translateY(8px) scale(.94);transform:translateX(-100%) translateY(8px) scale(.94);margin-left:23px}.ce-inline-toolbar--right-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{width:100%;padding:0 6px}.ce-inline-toolbar__buttons,.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover:hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-arrow,.ce-inline-toolbar__dropdown-content{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-arrow svg,.ce-inline-toolbar__dropdown-content svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0}.ce-inline-tool svg{width:20px;height:20px}@media (max-width:650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover:hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool{border-radius:0;line-height:normal}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width:650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #e8e8eb;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:6px;z-index:2}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar{opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:150px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px rgba(201,201,204,.48);border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width:650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-settings{position:absolute;z-index:2;--gap:8px}@media (min-width:651px){.ce-settings{position:absolute;top:calc(26px + var(--gap));left:0}.ce-settings--opened-top{top:calc(var(--gap)*-1 + var(--popover-height)*-1)}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0}.ce-settings__button svg{width:20px;height:20px}@media (max-width:650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover:hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button{line-height:32px}.ce-settings__button--disabled{cursor:not-allowed!important;opacity:.3}.ce-settings__button--selected{color:#388ae5}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:none}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content .ce-stub,.ce-block--selected .ce-block__content img{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388ae5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388ae5,#388ae5 1px,#fff 0,#fff 6px)}.ce-block a{cursor:pointer;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@media (min-width:651px){.codex-editor--narrow .ce-block--focused{margin-right:-50px;padding-right:50px}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-5%,0,0) rotate(-5deg);transform:translate3d(-5%,0,0) rotate(-5deg)}30%{-webkit-transform:translate3d(2%,0,0) rotate(3deg);transform:translate3d(2%,0,0) rotate(3deg)}45%{-webkit-transform:translate3d(-3%,0,0) rotate(-3deg);transform:translate3d(-3%,0,0) rotate(-3deg)}60%{-webkit-transform:translate3d(2%,0,0) rotate(2deg);transform:translate3d(2%,0,0) rotate(2deg)}75%{-webkit-transform:translate3d(-1%,0,0) rotate(-1deg);transform:translate3d(-1%,0,0) rotate(-1deg)}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-5%,0,0) rotate(-5deg);transform:translate3d(-5%,0,0) rotate(-5deg)}30%{-webkit-transform:translate3d(2%,0,0) rotate(3deg);transform:translate3d(2%,0,0) rotate(3deg)}45%{-webkit-transform:translate3d(-3%,0,0) rotate(-3deg);transform:translate3d(-3%,0,0) rotate(-3deg)}60%{-webkit-transform:translate3d(2%,0,0) rotate(2deg);transform:translate3d(2%,0,0) rotate(2deg)}75%{-webkit-transform:translate3d(-1%,0,0) rotate(-1deg);transform:translate3d(-1%,0,0) rotate(-1deg)}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important;display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0}.cdx-settings-button svg{width:20px;height:20px}@media (max-width:650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover:hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button{min-width:26px;min-height:26px}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width:650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s linear infinite;animation:cdxRotation 1.2s linear infinite}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px 0 rgba(18,30,57,.04);color:#707684;text-align:center;cursor:pointer}@media (hover:hover){.cdx-button:hover{background:#fbfcfe;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px 0 rgba(18,30,57,.08)}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;padding:3.5em 0;margin:17px 0;border-radius:3px;background:#fcf7f7;color:#b46262}.ce-stub__info{margin-left:20px}.ce-stub__title{margin-bottom:3px;font-weight:600;font-size:18px;text-transform:capitalize}.ce-stub__subtitle{font-size:16px}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width:650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0 solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0;right:5px}}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.ce-popover{opacity:0;will-change:opacity,transform;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:6px;min-width:200px;width:200px;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-negative:0;flex-shrink:0;max-height:0;pointer-events:none;position:absolute;background-color:#fff;border:1px solid #e8e8eb;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:6px;z-index:2}.ce-popover--left-oriented:before{left:15px;margin-left:0}.ce-popover--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-popover{z-index:4;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.ce-popover--opened{opacity:1;max-height:270px;pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease}@media (max-width:650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover::-webkit-scrollbar{width:7px}.ce-popover::-webkit-scrollbar-thumb{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:inset 0 0 2px 2px #eff2f5;box-shadow:inset 0 0 2px 2px #eff2f5;border-color:transparent;border-style:solid;border-width:4px 3px 4px 0}@media (max-width:650px){.ce-popover{--offset:5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset)*2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (min-width:651px){.ce-popover__items{margin-top:5px}}.ce-popover__item{display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:start;white-space:nowrap;padding:3px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:6px}.ce-popover__item:not(:last-of-type){margin-bottom:1px}@media (max-width:650px){.ce-popover__item{font-size:16px;padding:4px}}@media (hover:hover){.ce-popover__item:hover:not(.ce-popover__item--no-visible-hover){background-color:#eff2f5}.ce-popover__item:hover .ce-popover__item-icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover__item--disabled{color:#707684;cursor:default;pointer-events:none}.ce-popover__item--disabled .ce-popover__item-icon{-webkit-box-shadow:0 0 0 1px #eff0f1;box-shadow:0 0 0 1px #eff0f1}.ce-popover__item--focused:not(.ce-popover__item--no-visible-focus){-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-popover__item--hidden{display:none}.ce-popover__item--active{background:rgba(56,138,229,.1);color:#388ae5}.ce-popover__item--confirmation{background:#e24a4a}.ce-popover__item--confirmation .ce-popover__item-icon{color:#e24a4a}.ce-popover__item--confirmation .ce-popover__item-label{color:#fff}@media (hover:hover){.ce-popover__item--confirmation:not(.ce-popover__item--no-visible-hover):hover{background:#ce4343}}.ce-popover__item--confirmation:not(.ce-popover__item--no-visible-focus).ce-popover__item--focused{background:#ce4343!important}.ce-popover__item-icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px rgba(201,201,204,.48);border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-popover__item-icon svg{width:20px;height:20px}@media (max-width:650px){.ce-popover__item-icon{width:36px;height:36px;border-radius:8px}.ce-popover__item-icon svg{width:28px;height:28px}}.ce-popover__item-label{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.ce-popover__item-label:after{content:"";width:25px;display:inline-block}.ce-popover__item-secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width:650px){.ce-popover__item-secondary-label{display:none}}.ce-popover__item--active .ce-popover__item-icon,.ce-popover__item--confirmation .ce-popover__item-icon,.ce-popover__item--focused .ce-popover__item-icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover__no-found{display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:start;white-space:nowrap;padding:3px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:6px}.ce-popover__no-found:not(:last-of-type){margin-bottom:1px}@media (max-width:650px){.ce-popover__no-found{font-size:16px;padding:4px}}.ce-popover__no-found{color:#707684;display:none;cursor:default}.ce-popover__no-found--shown{display:block}@media (max-width:650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1d202b;opacity:.5;z-index:3;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}.ce-popover .cdx-search-field{display:none}}.ce-popover__overlay--hidden{z-index:0;opacity:0;visibility:hidden}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width:651px){.ce-popover__custom-content:not(:empty){margin-top:5px;padding:0}}.ce-popover__custom-content--hidden{display:none}.cdx-search-field{--icon-margin-right:10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}'},function(r,t,e){"use strict";e.r(t),e.d(t,"nanoid",function(){return a}),e.d(t,"customAlphabet",function(){return s}),e.d(t,"customRandom",function(){return o}),e.d(t,"urlAlphabet",function(){return i}),e.d(t,"random",function(){return n});let i="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",n=l=>crypto.getRandomValues(new Uint8Array(l)),o=(l,u,d)=>{let p=(2<<Math.log(l.length-1)/Math.LN2)-1,g=-~(1.6*p*u/l.length);return()=>{let m="";for(;;){let k=d(g),y=g;for(;y--;)if(m+=l[k[y]&p]||"",m.length===u)return m}}},s=(l,u)=>o(l,u,n),a=(l=21)=>{let u="",d=crypto.getRandomValues(new Uint8Array(l));for(;l--;){let p=63&d[l];u+=p<36?p.toString(36):p<62?(p-26).toString(36).toUpperCase():p<63?"_":"-"}return u}}])})});var ef=_e((Gn,ns)=>{(function(r,t){typeof Gn=="object"&&typeof ns=="object"?ns.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Gn=="object"?Gn.Undo=t():r.Undo=t()})(window,function(){return function(r){var t={};function e(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return r[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=r,e.c=t,e.d=function(i,n,o){e.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:o})},e.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,n){if(1&n&&(i=e(i)),8&n||4&n&&typeof i=="object"&&i&&i.__esModule)return i;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:i}),2&n&&typeof i!="string")for(var s in i)e.d(o,s,function(a){return i[a]}.bind(null,s));return o},e.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(n,"a",n),n},e.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},e.p="/",e(e.s=0)}([function(r,t,e){"use strict";function i(a,l){for(var u=0;u<l.length;u++){var d=l[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}e.r(t),e.d(t,"default",function(){return s});var n=function(){function a(p,g){(function(m,k){if(!(m instanceof k))throw new TypeError("Cannot call a class as a function")})(this,a),this.holder=typeof g=="string"?document.getElementById(g):g,this.observer=null,this.debounceTimer=200,this.mutationDebouncer=this.debounce(function(){p()},this.debounceTimer)}var l,u,d;return l=a,(u=[{key:"setMutationObserver",value:function(){var p=this,g=this.holder;this.observer=new MutationObserver(function(m){p.mutationHandler(m)}),this.observer.observe(g,{childList:!0,attributes:!0,subtree:!0,characterData:!0,characterDataOldValue:!0})}},{key:"mutationHandler",value:function(p){var g=this,m=!1;p.forEach(function(k){switch(k.type){case"childList":k.target===g.holder?g.onDestroy():m=!0;break;case"characterData":m=!0;break;case"attributes":k.target.classList.contains("ce-block")||(m=!0)}}),m&&this.mutationDebouncer()}},{key:"debounce",value:function(p,g){var m,k=this;return function(){for(var y=arguments.length,v=new Array(y),x=0;x<y;x++)v[x]=arguments[x];var C=k;clearTimeout(m),m=setTimeout(function(){return p.apply(C,v)},g)}}},{key:"onDestroy",value:function(){var p=new CustomEvent("destroy");document.dispatchEvent(p),this.observer.disconnect()}}])&&i(l.prototype,u),d&&i(l,d),a}();function o(a,l){for(var u=0;u<l.length;u++){var d=l[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var s=function(){function a(p){var g=this,m=p.editor,k=p.onUpdate,y=p.maxLength;(function(C,c){if(!(C instanceof c))throw new TypeError("Cannot call a class as a function")})(this,a);var v={maxLength:30,onUpdate:function(){}},x=m.configuration;this.editor=m,this.shouldSaveHistory=!0,this.readOnly=x.readOnly,this.maxLength=y||v.maxLength,this.onUpdate=k||v.onUpdate,new n(function(){return g.registerChange()},x.holder).setMutationObserver(),this.setEventListeners(),this.initialItem=null,this.clear()}var l,u,d;return l=a,d=[{key:"isReadOnlySupported",get:function(){return!0}}],(u=[{key:"truncate",value:function(p,g){for(;p.length>g;)p.shift()}},{key:"initialize",value:function(p){var g="blocks"in p?p.blocks:p,m={index:g.length-1,state:g};this.stack[0]=m,this.initialItem=m}},{key:"clear",value:function(){this.stack=this.initialItem?[this.initialItem]:[{index:0,state:[]}],this.position=0,this.onUpdate()}},{key:"registerChange",value:function(){var p=this;this.readOnly||(this.editor&&this.editor.save&&this.shouldSaveHistory&&this.editor.save().then(function(g){p.editorDidUpdate(g.blocks)&&p.save(g.blocks)}),this.shouldSaveHistory=!0)}},{key:"editorDidUpdate",value:function(p){var g=this.stack[this.position].state;return p.length!==g.length||JSON.stringify(g)!==JSON.stringify(p)}},{key:"save",value:function(p){this.position>=this.maxLength&&this.truncate(this.stack,this.maxLength),this.position=Math.min(this.position,this.stack.length-1),this.stack=this.stack.slice(0,this.position+1);var g=this.editor.blocks.getCurrentBlockIndex();this.stack.push({index:g,state:p}),this.position+=1,this.onUpdate()}},{key:"undo",value:function(){var p=this;if(this.canUndo()){this.shouldSaveHistory=!1;var g=this.stack[this.position-=1],m=g.index,k=g.state;this.onUpdate(),this.editor.blocks.render({blocks:k}).then(function(){return p.editor.caret.setToBlock(m,"end")})}}},{key:"redo",value:function(){var p=this;if(this.canRedo()){this.shouldSaveHistory=!1;var g=this.stack[this.position+=1],m=g.index,k=g.state;this.onUpdate(),this.editor.blocks.render({blocks:k}).then(function(){return p.editor.caret.setToBlock(m,"end")})}}},{key:"canUndo",value:function(){return!this.readOnly&&this.position>0}},{key:"canRedo",value:function(){return!this.readOnly&&this.position<this.count()}},{key:"count",value:function(){return this.stack.length-1}},{key:"setEventListeners",value:function(){var p=this,g=/(Mac)/i.test(navigator.platform)?"metaKey":"ctrlKey",m=function(y){y[g]&&y.key==="z"&&(y.preventDefault(),p.undo())},k=function(y){y[g]&&y.key==="y"&&(y.preventDefault(),p.redo())};document.addEventListener("keydown",m),document.addEventListener("keydown",k),document.addEventListener("destroy",function(){document.removeEventListener("keydown",m),document.removeEventListener("keydown",k)})}}])&&o(l.prototype,u),d&&o(l,d),a}()}]).default})});var of=_e((exports,module)=>{frappe.dashboard_utils={render_chart_filters:function(r,t,e,i){r.forEach(n=>{let o="",s="";n.icon&&(o=frappe.utils.icon(n.icon)),n.class&&(s=n.class);let a=`<div class="${t} ${s} btn-group dropdown pull-right">
					<a data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<button class="btn btn-secondary btn-xs">
							${o}
							<span class="filter-label">${__(n.label)}</span>
							${frappe.utils.icon("select","xs")}
						</button>
				</a>`,l;n.fieldnames?l=n.options.map((p,g)=>`<li>
						<a class="dropdown-item" data-fieldname="${n.fieldnames[g]}" data-option="${encodeURIComponent(p)}">${__(p)}</a>
					</li>`).join(""):l=n.options.map(p=>`<li><a class="dropdown-item" data-option="${encodeURIComponent(p)}">${__(p)}</a></li>`).join("");let u=a+`<ul class="dropdown-menu">${l}</ul></div>`,d=$(u);i?d.prependTo(e):d.appendTo(e),d.find(".dropdown-menu").on("click","li a",p=>{let g=$(p.currentTarget),m;g.attr("data-fieldname")&&(m=g.attr("data-fieldname"));let k=decodeURIComponent(g.data("option"));g.parents(`.${t}`).find(".filter-label").html(__(k)),n.action(k,m)})})},get_filters_for_chart_type:function(r){if(r.chart_type==="Custom"&&r.source){let t="frappe.desk.doctype.dashboard_chart_source.dashboard_chart_source.get_config";return frappe.xcall(t,{name:r.source}).then(e=>(frappe.dom.eval(e),frappe.dashboards.chart_sources[r.source].filters))}else return r.chart_type==="Report"&&r.report_name?frappe.report_utils.get_report_filters(r.report_name).then(t=>t):Promise.resolve()},get_dashboard_settings(){return frappe.db.get_list("Dashboard Settings",{filters:{name:frappe.session.user},fields:["*"]}).then(r=>r.length?r[0]:this.create_dashboard_settings().then(t=>t))},create_dashboard_settings(){return frappe.xcall("frappe.desk.doctype.dashboard_settings.dashboard_settings.create_dashboard_settings",{user:frappe.session.user}).then(r=>r)},get_years_since_creation(r){let t=this.get_year(r),e=this.get_year(frappe.datetime.now_date()),i=[];for(var n=e;n>=t;n--)i.push(n);return i},get_year(r){return r.substring(0,r.indexOf("-"))},remove_common_static_filter_values(r,t){if(t)if($.isArray(r))r=r.filter(e=>{for(let i of t)if(e[0]==i[0]&&e[1]==i[1])return!1;return!0});else for(let e of Object.keys(t))delete r[e];return r},get_fields_for_dynamic_filter_dialog(r,t,e){let i=[{fieldtype:"HTML",fieldname:"description",options:`<div>
						<p>Set dynamic filter values in JavaScript for the required fields here.
						</p>
						<p>Ex:
							<code>frappe.defaults.get_user_default("Company")</code>
						</p>
					</div>`}];if(r)e&&(t=[...t,...e]),t.forEach(n=>{for(let o of i)if(o.fieldname==n[0]+":"+n[1])return;n[2]=="="&&i.push({label:`${n[1]} (${n[0]})`,fieldname:n[0]+":"+n[1],fieldtype:"Data"})});else{t=Ue(Ue({},e),t);for(let n of Object.keys(t))i.push({label:n,fieldname:n,fieldtype:"Data"})}return i},get_all_filters(doc){let filters=doc.filters_json?JSON.parse(doc.filters_json):null,dynamic_filters=doc.dynamic_filters_json?JSON.parse(doc.dynamic_filters_json):null;if(!dynamic_filters||!Object.keys(dynamic_filters).length)return filters;if(Array.isArray(dynamic_filters))dynamic_filters.forEach(f=>{try{f[3]=eval(f[3])}catch(r){frappe.throw(__("Invalid expression set in filter {0} ({1})",[f[1],f[0]]))}}),filters=[...filters,...dynamic_filters];else{for(let key of Object.keys(dynamic_filters))try{let val=eval(dynamic_filters[key]);dynamic_filters[key]=val}catch(r){frappe.throw(__("Invalid expression set in filter {0}",[key]))}Object.assign(filters,dynamic_filters)}return filters},get_dashboard_link_field(){let r={label:__("Select Dashboard"),fieldtype:"Link",fieldname:"dashboard",options:"Dashboard"};return frappe.boot.developer_mode||(r.get_query=()=>({filters:{is_standard:0}})),r},get_add_to_dashboard_dialog(r,t,e){let i=this.get_dashboard_link_field(),n=new frappe.ui.Dialog({title:__("Add to Dashboard"),fields:[i],primary_action:o=>{o.name=r,o.set_standard=frappe.boot.developer_mode,frappe.xcall(e,{args:o}).then(()=>{let s=`<a href = "/app/dashboard/${o.dashboard}">${o.dashboard}</a>`,a=__("{0} {1} added to Dashboard {2}",[t,o.name,s]);frappe.msgprint(a)}),n.hide()}});return n}}});var Af=_e((Ts,Es)=>{(function(r,t){typeof Ts=="object"&&typeof Es!="undefined"?Es.exports=t():typeof define=="function"&&define.amd?define(t):(r=r||self).Sortable=t()})(Ts,function(){"use strict";function r(I,N){var z,G=Object.keys(I);return Object.getOwnPropertySymbols&&(z=Object.getOwnPropertySymbols(I),N&&(z=z.filter(function(U){return Object.getOwnPropertyDescriptor(I,U).enumerable})),G.push.apply(G,z)),G}function t(I){for(var N=1;N<arguments.length;N++){var z=arguments[N]!=null?arguments[N]:{};N%2?r(Object(z),!0).forEach(function(G){var U,ee;U=I,G=z[ee=G],ee in U?Object.defineProperty(U,ee,{value:G,enumerable:!0,configurable:!0,writable:!0}):U[ee]=G}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(z)):r(Object(z)).forEach(function(G){Object.defineProperty(I,G,Object.getOwnPropertyDescriptor(z,G))})}return I}function e(I){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(I)}function i(){return(i=Object.assign||function(I){for(var N=1;N<arguments.length;N++){var z,G=arguments[N];for(z in G)Object.prototype.hasOwnProperty.call(G,z)&&(I[z]=G[z])}return I}).apply(this,arguments)}function n(I,N){if(I==null)return{};var z,G=function(ie,se){if(ie==null)return{};for(var fe,me={},we=Object.keys(ie),Te=0;Te<we.length;Te++)fe=we[Te],0<=se.indexOf(fe)||(me[fe]=ie[fe]);return me}(I,N);if(Object.getOwnPropertySymbols)for(var U=Object.getOwnPropertySymbols(I),ee=0;ee<U.length;ee++)z=U[ee],0<=N.indexOf(z)||Object.prototype.propertyIsEnumerable.call(I,z)&&(G[z]=I[z]);return G}function o(I){return function(N){if(Array.isArray(N))return s(N)}(I)||function(N){if(typeof Symbol!="undefined"&&N[Symbol.iterator]!=null||N["@@iterator"]!=null)return Array.from(N)}(I)||function(N,z){if(N){if(typeof N=="string")return s(N,z);var G=Object.prototype.toString.call(N).slice(8,-1);return(G=G==="Object"&&N.constructor?N.constructor.name:G)==="Map"||G==="Set"?Array.from(N):G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G)?s(N,z):void 0}}(I)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function s(I,N){(N==null||N>I.length)&&(N=I.length);for(var z=0,G=new Array(N);z<N;z++)G[z]=I[z];return G}function a(I){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(I)}var l=a(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),u=a(/Edge/i),d=a(/firefox/i),p=a(/safari/i)&&!a(/chrome/i)&&!a(/android/i),g=a(/iP(ad|od|hone)/i),er=a(/chrome/i)&&a(/android/i),m={capture:!1,passive:!1};function k(I,N,z){I.addEventListener(N,z,!l&&m)}function y(I,N,z){I.removeEventListener(N,z,!l&&m)}function v(I,N){if(N&&(N[0]===">"&&(N=N.substring(1)),I))try{if(I.matches)return I.matches(N);if(I.msMatchesSelector)return I.msMatchesSelector(N);if(I.webkitMatchesSelector)return I.webkitMatchesSelector(N)}catch(z){return}}function x(I,N,z,G){if(I){z=z||document;do if(N!=null&&(N[0]!==">"||I.parentNode===z)&&v(I,N)||G&&I===z)return I;while(I!==z&&(I=(U=I).host&&U!==document&&U.host.nodeType?U.host:U.parentNode))}var U;return null}var C,c=/\s+/g;function _(I,N,z){var G;I&&N&&(I.classList?I.classList[z?"add":"remove"](N):(G=(" "+I.className+" ").replace(c," ").replace(" "+N+" "," "),I.className=(G+(z?" "+N:"")).replace(c," ")))}function h(I,N,z){var G=I&&I.style;if(G){if(z===void 0)return document.defaultView&&document.defaultView.getComputedStyle?z=document.defaultView.getComputedStyle(I,""):I.currentStyle&&(z=I.currentStyle),N===void 0?z:z[N];G[N=N in G||N.indexOf("webkit")!==-1?N:"-webkit-"+N]=z+(typeof z=="string"?"":"px")}}function b(I,N){var z="";if(typeof I=="string")z=I;else do var G=h(I,"transform");while(G&&G!=="none"&&(z=G+" "+z),!N&&(I=I.parentNode));var U=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return U&&new U(z)}function M(I,N,z){if(I){var G=I.getElementsByTagName(N),U=0,ee=G.length;if(z)for(;U<ee;U++)z(G[U],U);return G}return[]}function E(){var I=document.scrollingElement;return I||document.documentElement}function w(I,N,z,G,U){if(I.getBoundingClientRect||I===window){var ee,ie,se,fe,me,we,Te=I!==window&&I.parentNode&&I!==E()?(ie=(ee=I.getBoundingClientRect()).top,se=ee.left,fe=ee.bottom,me=ee.right,we=ee.height,ee.width):(se=ie=0,fe=window.innerHeight,me=window.innerWidth,we=window.innerHeight,window.innerWidth);if((N||z)&&I!==window&&(U=U||I.parentNode,!l))do if(U&&U.getBoundingClientRect&&(h(U,"transform")!=="none"||z&&h(U,"position")!=="static")){var Pe=U.getBoundingClientRect();ie-=Pe.top+parseInt(h(U,"border-top-width")),se-=Pe.left+parseInt(h(U,"border-left-width")),fe=ie+ee.height,me=se+ee.width;break}while(U=U.parentNode);return G&&I!==window&&(G=(N=b(U||I))&&N.a,I=N&&N.d,N&&(fe=(ie/=I)+(we/=I),me=(se/=G)+(Te/=G))),{top:ie,left:se,bottom:fe,right:me,width:Te,height:we}}}function S(I,N,z){for(var G=T(I,!0),U=w(I)[N];G;){var ee=w(G)[z];if(!(z==="top"||z==="left"?ee<=U:U<=ee))return G;if(G===E())break;G=T(G,!1)}return!1}function O(I,N,z,G){for(var U=0,ee=0,ie=I.children;ee<ie.length;){if(ie[ee].style.display!=="none"&&ie[ee]!==Oe.ghost&&(G||ie[ee]!==Oe.dragged)&&x(ie[ee],z.draggable,I,!1)){if(U===N)return ie[ee];U++}ee++}return null}function B(I,N){for(var z=I.lastElementChild;z&&(z===Oe.ghost||h(z,"display")==="none"||N&&!v(z,N));)z=z.previousElementSibling;return z||null}function A(I,N){var z=0;if(!I||!I.parentNode)return-1;for(;I=I.previousElementSibling;)I.nodeName.toUpperCase()==="TEMPLATE"||I===Oe.clone||N&&!v(I,N)||z++;return z}function R(I){var N=0,z=0,G=E();if(I)do var ee=b(I),U=ee.a,ee=ee.d;while(N+=I.scrollLeft*U,z+=I.scrollTop*ee,I!==G&&(I=I.parentNode));return[N,z]}function T(I,N){if(!I||!I.getBoundingClientRect)return E();var z=I,G=!1;do if(z.clientWidth<z.scrollWidth||z.clientHeight<z.scrollHeight){var U=h(z);if(z.clientWidth<z.scrollWidth&&(U.overflowX=="auto"||U.overflowX=="scroll")||z.clientHeight<z.scrollHeight&&(U.overflowY=="auto"||U.overflowY=="scroll")){if(!z.getBoundingClientRect||z===document.body)return E();if(G||N)return z;G=!0}}while(z=z.parentNode);return E()}function L(I,N){return Math.round(I.top)===Math.round(N.top)&&Math.round(I.left)===Math.round(N.left)&&Math.round(I.height)===Math.round(N.height)&&Math.round(I.width)===Math.round(N.width)}function P(I,N){return function(){var z;C||((z=arguments).length===1?I.call(this,z[0]):I.apply(this,z),C=setTimeout(function(){C=void 0},N))}}function D(I,N,z){I.scrollLeft+=N,I.scrollTop+=z}function H(I){var N=window.Polymer,z=window.jQuery||window.Zepto;return N&&N.dom?N.dom(I).cloneNode(!0):z?z(I).clone(!0)[0]:I.cloneNode(!0)}function j(I,N){h(I,"position","absolute"),h(I,"top",N.top),h(I,"left",N.left),h(I,"width",N.width),h(I,"height",N.height)}function F(I){h(I,"position",""),h(I,"top",""),h(I,"left",""),h(I,"width",""),h(I,"height","")}var K="Sortable"+new Date().getTime();function q(){var I,N=[];return{captureAnimationState:function(){N=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(z){var G,U;h(z,"display")!=="none"&&z!==Oe.ghost&&(N.push({target:z,rect:w(z)}),G=t({},N[N.length-1].rect),!z.thisAnimationDuration||(U=b(z,!0))&&(G.top-=U.f,G.left-=U.e),z.fromRect=G)})},addAnimationState:function(z){N.push(z)},removeAnimationState:function(z){N.splice(function(G,U){for(var ee in G)if(G.hasOwnProperty(ee)){for(var ie in U)if(U.hasOwnProperty(ie)&&U[ie]===G[ee][ie])return Number(ee)}return-1}(N,{target:z}),1)},animateAll:function(z){var G=this;if(!this.options.animation)return clearTimeout(I),void(typeof z=="function"&&z());var U=!1,ee=0;N.forEach(function(ie){var se=0,fe=ie.target,me=fe.fromRect,we=w(fe),Te=fe.prevFromRect,Pe=fe.prevToRect,$e=ie.rect,Ze=b(fe,!0);Ze&&(we.top-=Ze.f,we.left-=Ze.e),fe.toRect=we,fe.thisAnimationDuration&&L(Te,we)&&!L(me,we)&&($e.top-we.top)/($e.left-we.left)==(me.top-we.top)/(me.left-we.left)&&(ie=$e,Ze=Te,Te=Pe,Pe=G.options,se=Math.sqrt(Math.pow(Ze.top-ie.top,2)+Math.pow(Ze.left-ie.left,2))/Math.sqrt(Math.pow(Ze.top-Te.top,2)+Math.pow(Ze.left-Te.left,2))*Pe.animation),L(we,me)||(fe.prevFromRect=me,fe.prevToRect=we,se=se||G.options.animation,G.animate(fe,$e,we,se)),se&&(U=!0,ee=Math.max(ee,se),clearTimeout(fe.animationResetTimer),fe.animationResetTimer=setTimeout(function(){fe.animationTime=0,fe.prevFromRect=null,fe.fromRect=null,fe.prevToRect=null,fe.thisAnimationDuration=null},se),fe.thisAnimationDuration=se)}),clearTimeout(I),U?I=setTimeout(function(){typeof z=="function"&&z()},ee):typeof z=="function"&&z(),N=[]},animate:function(z,G,U,ee){var ie,se;ee&&(h(z,"transition",""),h(z,"transform",""),ie=(se=b(this.el))&&se.a,se=se&&se.d,ie=(G.left-U.left)/(ie||1),se=(G.top-U.top)/(se||1),z.animatingX=!!ie,z.animatingY=!!se,h(z,"transform","translate3d("+ie+"px,"+se+"px,0)"),this.forRepaintDummy=z.offsetWidth,h(z,"transition","transform "+ee+"ms"+(this.options.easing?" "+this.options.easing:"")),h(z,"transform","translate3d(0,0,0)"),typeof z.animated=="number"&&clearTimeout(z.animated),z.animated=setTimeout(function(){h(z,"transition",""),h(z,"transform",""),z.animated=!1,z.animatingX=!1,z.animatingY=!1},ee))}}}var W=[],Y={initializeByDefault:!0},Z={mount:function(I){for(var N in Y)!Y.hasOwnProperty(N)||N in I||(I[N]=Y[N]);W.forEach(function(z){if(z.pluginName===I.pluginName)throw"Sortable: Cannot mount plugin ".concat(I.pluginName," more than once")}),W.push(I)},pluginEvent:function(I,N,z){var G=this;this.eventCanceled=!1,z.cancel=function(){G.eventCanceled=!0};var U=I+"Global";W.forEach(function(ee){N[ee.pluginName]&&(N[ee.pluginName][U]&&N[ee.pluginName][U](t({sortable:N},z)),N.options[ee.pluginName]&&N[ee.pluginName][I]&&N[ee.pluginName][I](t({sortable:N},z)))})},initializePlugins:function(I,N,z,G){for(var U in W.forEach(function(ie){var se=ie.pluginName;(I.options[se]||ie.initializeByDefault)&&((ie=new ie(I,N,I.options)).sortable=I,ie.options=I.options,I[se]=ie,i(z,ie.defaults))}),I.options){var ee;I.options.hasOwnProperty(U)&&(ee=this.modifyOption(I,U,I.options[U]))!==void 0&&(I.options[U]=ee)}},getEventProperties:function(I,N){var z={};return W.forEach(function(G){typeof G.eventProperties=="function"&&i(z,G.eventProperties.call(N[G.pluginName],I))}),z},modifyOption:function(I,N,z){var G;return W.forEach(function(U){I[U.pluginName]&&U.optionListeners&&typeof U.optionListeners[N]=="function"&&(G=U.optionListeners[N].call(I[U.pluginName],z))}),G}};function X(I){var N=I.sortable,z=I.rootEl,G=I.name,U=I.targetEl,ee=I.cloneEl,ie=I.toEl,se=I.fromEl,fe=I.oldIndex,me=I.newIndex,we=I.oldDraggableIndex,Te=I.newDraggableIndex,Pe=I.originalEvent,$e=I.putSortable,Ze=I.extraEventProperties;if(N=N||z&&z[K]){var Ie,et=N.options,I="on"+G.charAt(0).toUpperCase()+G.substr(1);!window.CustomEvent||l||u?(Ie=document.createEvent("Event")).initEvent(G,!0,!0):Ie=new CustomEvent(G,{bubbles:!0,cancelable:!0}),Ie.to=ie||z,Ie.from=se||z,Ie.item=U||z,Ie.clone=ee,Ie.oldIndex=fe,Ie.newIndex=me,Ie.oldDraggableIndex=we,Ie.newDraggableIndex=Te,Ie.originalEvent=Pe,Ie.pullMode=$e?$e.lastPutMode:void 0;var Lt,Ve=t(t({},Ze),Z.getEventProperties(G,N));for(Lt in Ve)Ie[Lt]=Ve[Lt];z&&z.dispatchEvent(Ie),et[I]&&et[I].call(N,Ie)}}function Q(I,N){var z=(G=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{}).evt,G=n(G,ue);Z.pluginEvent.bind(Oe)(I,N,t({dragEl:ne,parentEl:ge,ghostEl:re,rootEl:pe,nextEl:Ce,lastDownEl:be,cloneEl:xe,cloneHidden:Re,dragStarted:Mt,putSortable:le,activeSortable:Oe.active,originalEvent:z,oldIndex:je,oldDraggableIndex:ze,newIndex:Be,newDraggableIndex:Ne,hideGhostForTarget:Sr,unhideGhostForTarget:Tr,cloneNowHidden:function(){Re=!0},cloneNowShown:function(){Re=!1},dispatchSortableEvent:function(U){ce({sortable:N,name:U,originalEvent:z})}},G))}var ue=["evt"];function ce(I){X(t({putSortable:le,cloneEl:xe,targetEl:ne,rootEl:pe,oldIndex:je,oldDraggableIndex:ze,newIndex:Be,newDraggableIndex:Ne},I))}var ne,ge,re,pe,Ce,be,xe,Re,je,Be,ze,Ne,De,le,he,ye,Ae,qe,nt,st,Mt,Ct,St,Ft,Je,It=!1,Tt=!1,zt=[],Ht=!1,Yt=!1,bt=[],Qt=!1,We=[],qt=typeof document!="undefined",nr=g,mr=u||l?"cssFloat":"float",vr=qt&&!er&&!g&&"draggable"in document.createElement("div"),br=function(){if(qt){if(l)return!1;var I=document.createElement("x");return I.style.cssText="pointer-events:auto",I.style.pointerEvents==="auto"}}(),Rr=function(me,N){var z=h(me),G=parseInt(z.width)-parseInt(z.paddingLeft)-parseInt(z.paddingRight)-parseInt(z.borderLeftWidth)-parseInt(z.borderRightWidth),U=O(me,0,N),ee=O(me,1,N),ie=U&&h(U),se=ee&&h(ee),fe=ie&&parseInt(ie.marginLeft)+parseInt(ie.marginRight)+w(U).width,me=se&&parseInt(se.marginLeft)+parseInt(se.marginRight)+w(ee).width;return z.display==="flex"?z.flexDirection==="column"||z.flexDirection==="column-reverse"?"vertical":"horizontal":z.display==="grid"?z.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":U&&ie.float&&ie.float!=="none"?(N=ie.float==="left"?"left":"right",!ee||se.clear!=="both"&&se.clear!==N?"horizontal":"vertical"):U&&(ie.display==="block"||ie.display==="flex"||ie.display==="table"||ie.display==="grid"||G<=fe&&z[mr]==="none"||ee&&z[mr]==="none"&&G<fe+me)?"vertical":"horizontal"},jr=function(I){function N(U,ee){return function(ie,se,fe,me){var we=ie.options.group.name&&se.options.group.name&&ie.options.group.name===se.options.group.name;return U==null&&(ee||we)?!0:U==null||U===!1?!1:ee&&U==="clone"?U:typeof U=="function"?N(U(ie,se,fe,me),ee)(ie,se,fe,me):(se=(ee?ie:se).options.group.name,U===!0||typeof U=="string"&&U===se||U.join&&-1<U.indexOf(se))}}var z={},G=I.group;G&&e(G)=="object"||(G={name:G}),z.name=G.name,z.checkPull=N(G.pull,!0),z.checkPut=N(G.put),z.revertClone=G.revertClone,I.group=z},Sr=function(){!br&&re&&h(re,"display","none")},Tr=function(){!br&&re&&h(re,"display","")};qt&&!er&&document.addEventListener("click",function(I){if(Tt)return I.preventDefault(),I.stopPropagation&&I.stopPropagation(),I.stopImmediatePropagation&&I.stopImmediatePropagation(),Tt=!1},!0);function Wt(I){if(ne){I=I.touches?I.touches[0]:I;var N=(U=I.clientX,ee=I.clientY,zt.some(function(se){var fe=se[K].options.emptyInsertThreshold;if(fe&&!B(se)){var me=w(se),we=U>=me.left-fe&&U<=me.right+fe,fe=ee>=me.top-fe&&ee<=me.bottom+fe;return we&&fe?ie=se:void 0}}),ie);if(N){var z,G={};for(z in I)I.hasOwnProperty(z)&&(G[z]=I[z]);G.target=G.rootEl=N,G.preventDefault=void 0,G.stopPropagation=void 0,N[K]._onDragOver(G)}}var U,ee,ie}function Nr(I){ne&&ne.parentNode[K]._isOutsideThisEl(I.target)}function Oe(I,N){if(!I||!I.nodeType||I.nodeType!==1)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(I));this.el=I,this.options=N=i({},N),I[K]=this;var z,G,U={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(I.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Rr(I,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(ee,ie){ee.setData("Text",ie.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Oe.supportPointer!==!1&&"PointerEvent"in window&&!p,emptyInsertThreshold:5};for(z in Z.initializePlugins(this,I,U),U)z in N||(N[z]=U[z]);for(G in jr(N),this)G.charAt(0)==="_"&&typeof this[G]=="function"&&(this[G]=this[G].bind(this));this.nativeDraggable=!N.forceFallback&&vr,this.nativeDraggable&&(this.options.touchStartThreshold=1),N.supportPointer?k(I,"pointerdown",this._onTapStart):(k(I,"mousedown",this._onTapStart),k(I,"touchstart",this._onTapStart)),this.nativeDraggable&&(k(I,"dragover",this),k(I,"dragenter",this)),zt.push(this.el),N.store&&N.store.get&&this.sort(N.store.get(this)||[]),i(this,q())}function or(I,N,z,G,U,ee,ie,se){var fe,me,we=I[K],Te=we.options.onMove;return!window.CustomEvent||l||u?(fe=document.createEvent("Event")).initEvent("move",!0,!0):fe=new CustomEvent("move",{bubbles:!0,cancelable:!0}),fe.to=N,fe.from=I,fe.dragged=z,fe.draggedRect=G,fe.related=U||N,fe.relatedRect=ee||w(N),fe.willInsertAfter=se,fe.originalEvent=ie,I.dispatchEvent(fe),me=Te?Te.call(we,fe,ie):me}function yr(I){I.draggable=!1}function Dr(){Qt=!1}function yt(I){return setTimeout(I,0)}function ve(I){return clearTimeout(I)}Oe.prototype={constructor:Oe,_isOutsideThisEl:function(I){this.el.contains(I)||I===this.el||(Ct=null)},_getDirection:function(I,N){return typeof this.options.direction=="function"?this.options.direction.call(this,I,N,ne):this.options.direction},_onTapStart:function(I){if(I.cancelable){var N=this,z=this.el,G=this.options,U=G.preventOnFilter,ee=I.type,ie=I.touches&&I.touches[0]||I.pointerType&&I.pointerType==="touch"&&I,se=(ie||I).target,fe=I.target.shadowRoot&&(I.path&&I.path[0]||I.composedPath&&I.composedPath()[0])||se,me=G.filter;if(function(we){We.length=0;for(var Te=we.getElementsByTagName("input"),Pe=Te.length;Pe--;){var $e=Te[Pe];$e.checked&&We.push($e)}}(z),!ne&&!(/mousedown|pointerdown/.test(ee)&&I.button!==0||G.disabled)&&!fe.isContentEditable&&(this.nativeDraggable||!p||!se||se.tagName.toUpperCase()!=="SELECT")&&!((se=x(se,G.draggable,z,!1))&&se.animated||be===se)){if(je=A(se),ze=A(se,G.draggable),typeof me=="function"){if(me.call(this,I,se,this))return ce({sortable:N,rootEl:fe,name:"filter",targetEl:se,toEl:z,fromEl:z}),Q("filter",N,{evt:I}),void(U&&I.cancelable&&I.preventDefault())}else if(me=me&&me.split(",").some(function(we){if(we=x(fe,we.trim(),z,!1))return ce({sortable:N,rootEl:we,name:"filter",targetEl:se,fromEl:z,toEl:z}),Q("filter",N,{evt:I}),!0}))return void(U&&I.cancelable&&I.preventDefault());G.handle&&!x(fe,G.handle,z,!1)||this._prepareDragStart(I,ie,se)}}},_prepareDragStart:function(I,N,z){var G,U=this,ee=U.el,ie=U.options,se=ee.ownerDocument;z&&!ne&&z.parentNode===ee&&(G=w(z),pe=ee,ge=(ne=z).parentNode,Ce=ne.nextSibling,be=z,De=ie.group,he={target:Oe.dragged=ne,clientX:(N||I).clientX,clientY:(N||I).clientY},nt=he.clientX-G.left,st=he.clientY-G.top,this._lastX=(N||I).clientX,this._lastY=(N||I).clientY,ne.style["will-change"]="all",G=function(){Q("delayEnded",U,{evt:I}),Oe.eventCanceled?U._onDrop():(U._disableDelayedDragEvents(),!d&&U.nativeDraggable&&(ne.draggable=!0),U._triggerDragStart(I,N),ce({sortable:U,name:"choose",originalEvent:I}),_(ne,ie.chosenClass,!0))},ie.ignore.split(",").forEach(function(fe){M(ne,fe.trim(),yr)}),k(se,"dragover",Wt),k(se,"mousemove",Wt),k(se,"touchmove",Wt),k(se,"mouseup",U._onDrop),k(se,"touchend",U._onDrop),k(se,"touchcancel",U._onDrop),d&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ne.draggable=!0),Q("delayStart",this,{evt:I}),!ie.delay||ie.delayOnTouchOnly&&!N||this.nativeDraggable&&(u||l)?G():Oe.eventCanceled?this._onDrop():(k(se,"mouseup",U._disableDelayedDrag),k(se,"touchend",U._disableDelayedDrag),k(se,"touchcancel",U._disableDelayedDrag),k(se,"mousemove",U._delayedDragTouchMoveHandler),k(se,"touchmove",U._delayedDragTouchMoveHandler),ie.supportPointer&&k(se,"pointermove",U._delayedDragTouchMoveHandler),U._dragStartTimer=setTimeout(G,ie.delay)))},_delayedDragTouchMoveHandler:function(I){I=I.touches?I.touches[0]:I,Math.max(Math.abs(I.clientX-this._lastX),Math.abs(I.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ne&&yr(ne),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var I=this.el.ownerDocument;y(I,"mouseup",this._disableDelayedDrag),y(I,"touchend",this._disableDelayedDrag),y(I,"touchcancel",this._disableDelayedDrag),y(I,"mousemove",this._delayedDragTouchMoveHandler),y(I,"touchmove",this._delayedDragTouchMoveHandler),y(I,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(I,N){N=N||I.pointerType=="touch"&&I,!this.nativeDraggable||N?this.options.supportPointer?k(document,"pointermove",this._onTouchMove):k(document,N?"touchmove":"mousemove",this._onTouchMove):(k(ne,"dragend",this),k(pe,"dragstart",this._onDragStart));try{document.selection?yt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(z){}},_dragStarted:function(I,N){var z;It=!1,pe&&ne?(Q("dragStarted",this,{evt:N}),this.nativeDraggable&&k(document,"dragover",Nr),z=this.options,I||_(ne,z.dragClass,!1),_(ne,z.ghostClass,!0),Oe.active=this,I&&this._appendGhost(),ce({sortable:this,name:"start",originalEvent:N})):this._nulling()},_emulateDragOver:function(){if(ye){this._lastX=ye.clientX,this._lastY=ye.clientY,Sr();for(var I=document.elementFromPoint(ye.clientX,ye.clientY),N=I;I&&I.shadowRoot&&(I=I.shadowRoot.elementFromPoint(ye.clientX,ye.clientY))!==N;)N=I;if(ne.parentNode[K]._isOutsideThisEl(I),N)do if(N[K]&&N[K]._onDragOver({clientX:ye.clientX,clientY:ye.clientY,target:I,rootEl:N})&&!this.options.dragoverBubble)break;while(N=(I=N).parentNode);Tr()}},_onTouchMove:function(I){if(he){var ee=this.options,N=ee.fallbackTolerance,z=ee.fallbackOffset,G=I.touches?I.touches[0]:I,U=re&&b(re,!0),ie=re&&U&&U.a,se=re&&U&&U.d,ee=nr&&Je&&R(Je),ie=(G.clientX-he.clientX+z.x)/(ie||1)+(ee?ee[0]-bt[0]:0)/(ie||1),se=(G.clientY-he.clientY+z.y)/(se||1)+(ee?ee[1]-bt[1]:0)/(se||1);if(!Oe.active&&!It){if(N&&Math.max(Math.abs(G.clientX-this._lastX),Math.abs(G.clientY-this._lastY))<N)return;this._onDragStart(I,!0)}re&&(U?(U.e+=ie-(Ae||0),U.f+=se-(qe||0)):U={a:1,b:0,c:0,d:1,e:ie,f:se},U="matrix(".concat(U.a,",").concat(U.b,",").concat(U.c,",").concat(U.d,",").concat(U.e,",").concat(U.f,")"),h(re,"webkitTransform",U),h(re,"mozTransform",U),h(re,"msTransform",U),h(re,"transform",U),Ae=ie,qe=se,ye=G),I.cancelable&&I.preventDefault()}},_appendGhost:function(){if(!re){var I=this.options.fallbackOnBody?document.body:pe,N=w(ne,!0,nr,!0,I),z=this.options;if(nr){for(Je=I;h(Je,"position")==="static"&&h(Je,"transform")==="none"&&Je!==document;)Je=Je.parentNode;Je!==document.body&&Je!==document.documentElement?(Je===document&&(Je=E()),N.top+=Je.scrollTop,N.left+=Je.scrollLeft):Je=E(),bt=R(Je)}_(re=ne.cloneNode(!0),z.ghostClass,!1),_(re,z.fallbackClass,!0),_(re,z.dragClass,!0),h(re,"transition",""),h(re,"transform",""),h(re,"box-sizing","border-box"),h(re,"margin",0),h(re,"top",N.top),h(re,"left",N.left),h(re,"width",N.width),h(re,"height",N.height),h(re,"opacity","0.8"),h(re,"position",nr?"absolute":"fixed"),h(re,"zIndex","100000"),h(re,"pointerEvents","none"),Oe.ghost=re,I.appendChild(re),h(re,"transform-origin",nt/parseInt(re.style.width)*100+"% "+st/parseInt(re.style.height)*100+"%")}},_onDragStart:function(I,N){var z=this,G=I.dataTransfer,U=z.options;Q("dragStart",this,{evt:I}),Oe.eventCanceled?this._onDrop():(Q("setupClone",this),Oe.eventCanceled||((xe=H(ne)).removeAttribute("id"),xe.draggable=!1,xe.style["will-change"]="",this._hideClone(),_(xe,this.options.chosenClass,!1),Oe.clone=xe),z.cloneId=yt(function(){Q("clone",z),Oe.eventCanceled||(z.options.removeCloneOnHide||pe.insertBefore(xe,ne),z._hideClone(),ce({sortable:z,name:"clone"}))}),N||_(ne,U.dragClass,!0),N?(Tt=!0,z._loopId=setInterval(z._emulateDragOver,50)):(y(document,"mouseup",z._onDrop),y(document,"touchend",z._onDrop),y(document,"touchcancel",z._onDrop),G&&(G.effectAllowed="move",U.setData&&U.setData.call(z,G,ne)),k(document,"drop",z),h(ne,"transform","translateZ(0)")),It=!0,z._dragStartId=yt(z._dragStarted.bind(z,N,I)),k(document,"selectstart",z),Mt=!0,p&&h(document.body,"user-select","none"))},_onDragOver:function(I){var N,z,G,U,ee=this.el,ie=I.target,se=this.options,fe=se.group,me=Oe.active,we=De===fe,Te=se.sort,Pe=le||me,$e=this,Ze=!1;if(!Qt){if(I.preventDefault!==void 0&&I.cancelable&&I.preventDefault(),ie=x(ie,se.draggable,ee,!0),ft("dragOver"),Oe.eventCanceled)return Ze;if(ne.contains(I.target)||ie.animated&&ie.animatingX&&ie.animatingY||$e._ignoreWhileAnimating===ie)return Rt(!1);if(Tt=!1,me&&!se.disabled&&(we?Te||(z=ge!==pe):le===this||(this.lastPutMode=De.checkPull(this,me,ne,I))&&fe.checkPut(this,me,ne,I))){if(G=this._getDirection(I,ie)==="vertical",N=w(ne),ft("dragOverValid"),Oe.eventCanceled)return Ze;if(z)return ge=pe,ur(),this._hideClone(),ft("revert"),Oe.eventCanceled||(Ce?pe.insertBefore(ne,Ce):pe.appendChild(ne)),Rt(!0);var Ie=B(ee,se.draggable);if(!Ie||function(dt,ui,ot){return ot=w(B(ot.el,ot.options.draggable)),ui?dt.clientX>ot.right+10||dt.clientX<=ot.right&&dt.clientY>ot.bottom&&dt.clientX>=ot.left:dt.clientX>ot.right&&dt.clientY>ot.top||dt.clientX<=ot.right&&dt.clientY>ot.bottom+10}(I,G,this)&&!Ie.animated){if(Ie===ne)return Rt(!1);if((ie=Ie&&ee===I.target?Ie:ie)&&(wt=w(ie)),or(pe,ee,ne,N,ie,wt,I,!!ie)!==!1)return ur(),Ie&&Ie.nextSibling?ee.insertBefore(ne,Ie.nextSibling):ee.appendChild(ne),ge=ee,Er(),Rt(!0)}else if(Ie&&function(dt,ui,ot){return ot=w(O(ot.el,0,ot.options,!0)),ui?dt.clientX<ot.left-10||dt.clientY<ot.top&&dt.clientX<ot.right:dt.clientY<ot.top-10||dt.clientY<ot.bottom&&dt.clientX<ot.left}(I,G,this)){var et=O(ee,0,se,!0);if(et===ne)return Rt(!1);if(wt=w(ie=et),or(pe,ee,ne,N,ie,wt,I,!1)!==!1)return ur(),ee.insertBefore(ne,et),ge=ee,Er(),Rt(!0)}else if(ie.parentNode===ee){var Lt,Ve,Bt,wt=w(ie),cr=ne.parentNode!==ee,at=(at=ne.animated&&ne.toRect||N,ct=ie.animated&&ie.toRect||wt,lr=(U=G)?at.left:at.top,fe=U?at.right:at.bottom,Ie=U?at.width:at.height,et=U?ct.left:ct.top,at=U?ct.right:ct.bottom,ct=U?ct.width:ct.height,!(lr===et||fe===at||lr+Ie/2===et+ct/2)),lr=G?"top":"left",Ie=S(ie,"top","top")||S(ne,"top","top"),et=Ie?Ie.scrollTop:void 0;if(Ct!==ie&&(Ve=wt[lr],Ht=!1,Yt=!at&&se.invertSwap||cr),(Lt=function(kr,co,tr,fr,uo,gn,Hs,Qf){var dr=fr?kr.clientY:kr.clientX,wr=fr?tr.height:tr.width,kr=fr?tr.top:tr.left,fr=fr?tr.bottom:tr.right,tr=!1;if(!Hs){if(Qf&&Ft<wr*uo){if(Ht=!Ht&&(St===1?kr+wr*gn/2<dr:dr<fr-wr*gn/2)?!0:Ht)tr=!0;else if(St===1?dr<kr+Ft:fr-Ft<dr)return-St}else if(kr+wr*(1-uo)/2<dr&&dr<fr-wr*(1-uo)/2)return function(ep){return A(ne)<A(ep)?1:-1}(co)}return(tr=tr||Hs)&&(dr<kr+wr*gn/2||fr-wr*gn/2<dr)?kr+wr/2<dr?1:-1:0}(I,ie,wt,G,at?1:se.swapThreshold,se.invertedSwapThreshold==null?se.swapThreshold:se.invertedSwapThreshold,Yt,Ct===ie))!==0)for(var ci=A(ne);(Bt=ge.children[ci-=Lt])&&(h(Bt,"display")==="none"||Bt===re););if(Lt===0||Bt===ie)return Rt(!1);St=Lt;var ct=(Ct=ie).nextElementSibling,cr=!1,at=or(pe,ee,ne,N,ie,wt,I,cr=Lt===1);if(at!==!1)return at!==1&&at!==-1||(cr=at===1),Qt=!0,setTimeout(Dr,30),ur(),cr&&!ct?ee.appendChild(ne):ie.parentNode.insertBefore(ne,cr?ct:ie),Ie&&D(Ie,0,et-Ie.scrollTop),ge=ne.parentNode,Ve===void 0||Yt||(Ft=Math.abs(Ve-w(ie)[lr])),Er(),Rt(!0)}if(ee.contains(ne))return Rt(!1)}return!1}function ft(dt,ui){Q(dt,$e,t({evt:I,isOwner:we,axis:G?"vertical":"horizontal",revert:z,dragRect:N,targetRect:wt,canSort:Te,fromSortable:Pe,target:ie,completed:Rt,onMove:function(ot,co){return or(pe,ee,ne,N,ot,w(ot),I,co)},changed:Er},ui))}function ur(){ft("dragOverAnimationCapture"),$e.captureAnimationState(),$e!==Pe&&Pe.captureAnimationState()}function Rt(dt){return ft("dragOverCompleted",{insertion:dt}),dt&&(we?me._hideClone():me._showClone($e),$e!==Pe&&(_(ne,(le||me).options.ghostClass,!1),_(ne,se.ghostClass,!0)),le!==$e&&$e!==Oe.active?le=$e:$e===Oe.active&&le&&(le=null),Pe===$e&&($e._ignoreWhileAnimating=ie),$e.animateAll(function(){ft("dragOverAnimationComplete"),$e._ignoreWhileAnimating=null}),$e!==Pe&&(Pe.animateAll(),Pe._ignoreWhileAnimating=null)),(ie===ne&&!ne.animated||ie===ee&&!ie.animated)&&(Ct=null),se.dragoverBubble||I.rootEl||ie===document||(ne.parentNode[K]._isOutsideThisEl(I.target),dt||Wt(I)),!se.dragoverBubble&&I.stopPropagation&&I.stopPropagation(),Ze=!0}function Er(){Be=A(ne),Ne=A(ne,se.draggable),ce({sortable:$e,name:"change",toEl:ee,newIndex:Be,newDraggableIndex:Ne,originalEvent:I})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){y(document,"mousemove",this._onTouchMove),y(document,"touchmove",this._onTouchMove),y(document,"pointermove",this._onTouchMove),y(document,"dragover",Wt),y(document,"mousemove",Wt),y(document,"touchmove",Wt)},_offUpEvents:function(){var I=this.el.ownerDocument;y(I,"mouseup",this._onDrop),y(I,"touchend",this._onDrop),y(I,"pointerup",this._onDrop),y(I,"touchcancel",this._onDrop),y(document,"selectstart",this)},_onDrop:function(I){var N=this.el,z=this.options;Be=A(ne),Ne=A(ne,z.draggable),Q("drop",this,{evt:I}),ge=ne&&ne.parentNode,Be=A(ne),Ne=A(ne,z.draggable),Oe.eventCanceled||(Ht=Yt=It=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ve(this.cloneId),ve(this._dragStartId),this.nativeDraggable&&(y(document,"drop",this),y(N,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),p&&h(document.body,"user-select",""),h(ne,"transform",""),I&&(Mt&&(I.cancelable&&I.preventDefault(),z.dropBubble||I.stopPropagation()),re&&re.parentNode&&re.parentNode.removeChild(re),(pe===ge||le&&le.lastPutMode!=="clone")&&xe&&xe.parentNode&&xe.parentNode.removeChild(xe),ne&&(this.nativeDraggable&&y(ne,"dragend",this),yr(ne),ne.style["will-change"]="",Mt&&!It&&_(ne,(le||this).options.ghostClass,!1),_(ne,this.options.chosenClass,!1),ce({sortable:this,name:"unchoose",toEl:ge,newIndex:null,newDraggableIndex:null,originalEvent:I}),pe!==ge?(0<=Be&&(ce({rootEl:ge,name:"add",toEl:ge,fromEl:pe,originalEvent:I}),ce({sortable:this,name:"remove",toEl:ge,originalEvent:I}),ce({rootEl:ge,name:"sort",toEl:ge,fromEl:pe,originalEvent:I}),ce({sortable:this,name:"sort",toEl:ge,originalEvent:I})),le&&le.save()):Be!==je&&0<=Be&&(ce({sortable:this,name:"update",toEl:ge,originalEvent:I}),ce({sortable:this,name:"sort",toEl:ge,originalEvent:I})),Oe.active&&(Be!=null&&Be!==-1||(Be=je,Ne=ze),ce({sortable:this,name:"end",toEl:ge,originalEvent:I}),this.save())))),this._nulling()},_nulling:function(){Q("nulling",this),pe=ne=ge=re=Ce=xe=be=Re=he=ye=Mt=Be=Ne=je=ze=Ct=St=le=De=Oe.dragged=Oe.ghost=Oe.clone=Oe.active=null,We.forEach(function(I){I.checked=!0}),We.length=Ae=qe=0},handleEvent:function(I){switch(I.type){case"drop":case"dragend":this._onDrop(I);break;case"dragenter":case"dragover":ne&&(this._onDragOver(I),function(N){N.dataTransfer&&(N.dataTransfer.dropEffect="move"),N.cancelable&&N.preventDefault()}(I));break;case"selectstart":I.preventDefault()}},toArray:function(){for(var I,N=[],z=this.el.children,G=0,U=z.length,ee=this.options;G<U;G++)x(I=z[G],ee.draggable,this.el,!1)&&N.push(I.getAttribute(ee.dataIdAttr)||function(ie){for(var se=ie.tagName+ie.className+ie.src+ie.href+ie.textContent,fe=se.length,me=0;fe--;)me+=se.charCodeAt(fe);return me.toString(36)}(I));return N},sort:function(I,N){var z={},G=this.el;this.toArray().forEach(function(U,ee){ee=G.children[ee],x(ee,this.options.draggable,G,!1)&&(z[U]=ee)},this),N&&this.captureAnimationState(),I.forEach(function(U){z[U]&&(G.removeChild(z[U]),G.appendChild(z[U]))}),N&&this.animateAll()},save:function(){var I=this.options.store;I&&I.set&&I.set(this)},closest:function(I,N){return x(I,N||this.options.draggable,this.el,!1)},option:function(I,N){var z=this.options;if(N===void 0)return z[I];var G=Z.modifyOption(this,I,N);z[I]=G!==void 0?G:N,I==="group"&&jr(z)},destroy:function(){Q("destroy",this);var I=this.el;I[K]=null,y(I,"mousedown",this._onTapStart),y(I,"touchstart",this._onTapStart),y(I,"pointerdown",this._onTapStart),this.nativeDraggable&&(y(I,"dragover",this),y(I,"dragenter",this)),Array.prototype.forEach.call(I.querySelectorAll("[draggable]"),function(N){N.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),zt.splice(zt.indexOf(this.el),1),this.el=I=null},_hideClone:function(){Re||(Q("hideClone",this),Oe.eventCanceled||(h(xe,"display","none"),this.options.removeCloneOnHide&&xe.parentNode&&xe.parentNode.removeChild(xe),Re=!0))},_showClone:function(I){I.lastPutMode==="clone"?Re&&(Q("showClone",this),Oe.eventCanceled||(ne.parentNode!=pe||this.options.group.revertClone?Ce?pe.insertBefore(xe,Ce):pe.appendChild(xe):pe.insertBefore(xe,ne),this.options.group.revertClone&&this.animate(ne,xe),h(xe,"display",""),Re=!1)):this._hideClone()}},qt&&k(document,"touchmove",function(I){(Oe.active||It)&&I.cancelable&&I.preventDefault()}),Oe.utils={on:k,off:y,css:h,find:M,is:function(I,N){return!!x(I,N,I,!1)},extend:function(I,N){if(I&&N)for(var z in N)N.hasOwnProperty(z)&&(I[z]=N[z]);return I},throttle:P,closest:x,toggleClass:_,clone:H,index:A,nextTick:yt,cancelNextTick:ve,detectDirection:Rr,getChild:O},Oe.get=function(I){return I[K]},Oe.mount=function(){for(var I=arguments.length,N=new Array(I),z=0;z<I;z++)N[z]=arguments[z];(N=N[0].constructor===Array?N[0]:N).forEach(function(G){if(!G.prototype||!G.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(G));G.utils&&(Oe.utils=t(t({},Oe.utils),G.utils)),Z.mount(G)})},Oe.create=function(I,N){return new Oe(I,N)};var ke,Le,Ke,He,Et,Ut,Se=[],ht=!(Oe.version="1.15.0");function $t(){Se.forEach(function(I){clearInterval(I.pid)}),Se=[]}function sr(){clearInterval(Ut)}var ut,Qe=P(function(I,N,z,G){if(N.scroll){var U,ee=(I.touches?I.touches[0]:I).clientX,ie=(I.touches?I.touches[0]:I).clientY,se=N.scrollSensitivity,fe=N.scrollSpeed,me=E(),we=!1;Le!==z&&(Le=z,$t(),ke=N.scroll,U=N.scrollFn,ke===!0&&(ke=T(z,!0)));var Te=0,Pe=ke;do{var $e=Pe,ft=w($e),Ze=ft.top,Ie=ft.bottom,et=ft.left,Lt=ft.right,Ve=ft.width,Bt=ft.height,wt=void 0,cr=void 0,lr=$e.scrollWidth,ci=$e.scrollHeight,ct=h($e),at=$e.scrollLeft,ft=$e.scrollTop,cr=$e===me?(wt=Ve<lr&&(ct.overflowX==="auto"||ct.overflowX==="scroll"||ct.overflowX==="visible"),Bt<ci&&(ct.overflowY==="auto"||ct.overflowY==="scroll"||ct.overflowY==="visible")):(wt=Ve<lr&&(ct.overflowX==="auto"||ct.overflowX==="scroll"),Bt<ci&&(ct.overflowY==="auto"||ct.overflowY==="scroll")),at=wt&&(Math.abs(Lt-ee)<=se&&at+Ve<lr)-(Math.abs(et-ee)<=se&&!!at),ft=cr&&(Math.abs(Ie-ie)<=se&&ft+Bt<ci)-(Math.abs(Ze-ie)<=se&&!!ft);if(!Se[Te])for(var ur=0;ur<=Te;ur++)Se[ur]||(Se[ur]={});Se[Te].vx==at&&Se[Te].vy==ft&&Se[Te].el===$e||(Se[Te].el=$e,Se[Te].vx=at,Se[Te].vy=ft,clearInterval(Se[Te].pid),at==0&&ft==0||(we=!0,Se[Te].pid=setInterval(function(){G&&this.layer===0&&Oe.active._onTouchMove(Et);var Rt=Se[this.layer].vy?Se[this.layer].vy*fe:0,Er=Se[this.layer].vx?Se[this.layer].vx*fe:0;typeof U=="function"&&U.call(Oe.dragged.parentNode[K],Er,Rt,I,Et,Se[this.layer].el)!=="continue"||D(Se[this.layer].el,Er,Rt)}.bind({layer:Te}),24))),Te++}while(N.bubbleScroll&&Pe!==me&&(Pe=T(Pe,!1)));ht=we}},30),er=function(se){var N=se.originalEvent,z=se.putSortable,G=se.dragEl,U=se.activeSortable,ee=se.dispatchSortableEvent,ie=se.hideGhostForTarget,se=se.unhideGhostForTarget;N&&(U=z||U,ie(),N=N.changedTouches&&N.changedTouches.length?N.changedTouches[0]:N,N=document.elementFromPoint(N.clientX,N.clientY),se(),U&&!U.el.contains(N)&&(ee("spill"),this.onSpill({dragEl:G,putSortable:z})))};function Ot(){}function ar(){}Ot.prototype={startIndex:null,dragStart:function(I){I=I.oldDraggableIndex,this.startIndex=I},onSpill:function(I){var N=I.dragEl,z=I.putSortable;this.sortable.captureAnimationState(),z&&z.captureAnimationState(),I=O(this.sortable.el,this.startIndex,this.options),I?this.sortable.el.insertBefore(N,I):this.sortable.el.appendChild(N),this.sortable.animateAll(),z&&z.animateAll()},drop:er},i(Ot,{pluginName:"revertOnSpill"}),ar.prototype={onSpill:function(z){var N=z.dragEl,z=z.putSortable||this.sortable;z.captureAnimationState(),N.parentNode&&N.parentNode.removeChild(N),z.animateAll()},drop:er},i(ar,{pluginName:"removeOnSpill"});var Pt,Ye,Me,gt,_t,Ee=[],Xe=[],V=!1,te=!1,J=!1;function oe(I,N){Xe.forEach(function(z,G){G=N.children[z.sortableIndex+(I?Number(G):0)],G?N.insertBefore(z,G):N.appendChild(z)})}function ae(){Ee.forEach(function(I){I!==Me&&I.parentNode&&I.parentNode.removeChild(I)})}return Oe.mount(new function(){function I(){for(var N in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)N.charAt(0)==="_"&&typeof this[N]=="function"&&(this[N]=this[N].bind(this))}return I.prototype={dragStarted:function(N){N=N.originalEvent,this.sortable.nativeDraggable?k(document,"dragover",this._handleAutoScroll):this.options.supportPointer?k(document,"pointermove",this._handleFallbackAutoScroll):N.touches?k(document,"touchmove",this._handleFallbackAutoScroll):k(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(N){N=N.originalEvent,this.options.dragOverBubble||N.rootEl||this._handleAutoScroll(N)},drop:function(){this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):(y(document,"pointermove",this._handleFallbackAutoScroll),y(document,"touchmove",this._handleFallbackAutoScroll),y(document,"mousemove",this._handleFallbackAutoScroll)),sr(),$t(),clearTimeout(C),C=void 0},nulling:function(){Et=Le=ke=ht=Ut=Ke=He=null,Se.length=0},_handleFallbackAutoScroll:function(N){this._handleAutoScroll(N,!0)},_handleAutoScroll:function(N,z){var G,U=this,ee=(N.touches?N.touches[0]:N).clientX,ie=(N.touches?N.touches[0]:N).clientY,se=document.elementFromPoint(ee,ie);Et=N,z||this.options.forceAutoScrollFallback||u||l||p?(Qe(N,this.options,se,z),G=T(se,!0),!ht||Ut&&ee===Ke&&ie===He||(Ut&&sr(),Ut=setInterval(function(){var fe=T(document.elementFromPoint(ee,ie),!0);fe!==G&&(G=fe,$t()),Qe(N,U.options,fe,z)},10),Ke=ee,He=ie)):this.options.bubbleScroll&&T(se,!0)!==E()?Qe(N,this.options,T(se,!1),!1):$t()}},i(I,{pluginName:"scroll",initializeByDefault:!0})}),Oe.mount(ar,Ot),Oe.mount(new function(){function I(){this.defaults={swapClass:"sortable-swap-highlight"}}return I.prototype={dragStart:function(N){N=N.dragEl,ut=N},dragOverValid:function(N){var z=N.completed,G=N.target,U=N.onMove,ee=N.activeSortable,ie=N.changed,se=N.cancel;ee.options.swap&&(N=this.sortable.el,ee=this.options,G&&G!==N&&(N=ut,ut=U(G)!==!1?(_(G,ee.swapClass,!0),G):null,N&&N!==ut&&_(N,ee.swapClass,!1)),ie(),z(!0),se())},drop:function(N){var z,G,U=N.activeSortable,ee=N.putSortable,ie=N.dragEl,se=ee||this.sortable,fe=this.options;ut&&_(ut,fe.swapClass,!1),ut&&(fe.swap||ee&&ee.options.swap)&&ie!==ut&&(se.captureAnimationState(),se!==U&&U.captureAnimationState(),G=ut,N=(z=ie).parentNode,fe=G.parentNode,N&&fe&&!N.isEqualNode(G)&&!fe.isEqualNode(z)&&(ee=A(z),ie=A(G),N.isEqualNode(fe)&&ee<ie&&ie++,N.insertBefore(G,N.children[ee]),fe.insertBefore(z,fe.children[ie])),se.animateAll(),se!==U&&U.animateAll())},nulling:function(){ut=null}},i(I,{pluginName:"swap",eventProperties:function(){return{swapItem:ut}}})}),Oe.mount(new function(){function I(N){for(var z in this)z.charAt(0)==="_"&&typeof this[z]=="function"&&(this[z]=this[z].bind(this));N.options.avoidImplicitDeselect||(N.options.supportPointer?k(document,"pointerup",this._deselectMultiDrag):(k(document,"mouseup",this._deselectMultiDrag),k(document,"touchend",this._deselectMultiDrag))),k(document,"keydown",this._checkKeyDown),k(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(G,U){var ee="";Ee.length&&Ye===N?Ee.forEach(function(ie,se){ee+=(se?", ":"")+ie.textContent}):ee=U.textContent,G.setData("Text",ee)}}}return I.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(N){N=N.dragEl,Me=N},delayEnded:function(){this.isMultiDrag=~Ee.indexOf(Me)},setupClone:function(G){var z=G.sortable,G=G.cancel;if(this.isMultiDrag){for(var U=0;U<Ee.length;U++)Xe.push(H(Ee[U])),Xe[U].sortableIndex=Ee[U].sortableIndex,Xe[U].draggable=!1,Xe[U].style["will-change"]="",_(Xe[U],this.options.selectedClass,!1),Ee[U]===Me&&_(Xe[U],this.options.chosenClass,!1);z._hideClone(),G()}},clone:function(ee){var z=ee.sortable,G=ee.rootEl,U=ee.dispatchSortableEvent,ee=ee.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Ee.length&&Ye===z&&(oe(!0,G),U("clone"),ee()))},showClone:function(U){var z=U.cloneNowShown,G=U.rootEl,U=U.cancel;this.isMultiDrag&&(oe(!1,G),Xe.forEach(function(ee){h(ee,"display","")}),z(),_t=!1,U())},hideClone:function(U){var z=this,G=(U.sortable,U.cloneNowHidden),U=U.cancel;this.isMultiDrag&&(Xe.forEach(function(ee){h(ee,"display","none"),z.options.removeCloneOnHide&&ee.parentNode&&ee.parentNode.removeChild(ee)}),G(),_t=!0,U())},dragStartGlobal:function(N){N.sortable,!this.isMultiDrag&&Ye&&Ye.multiDrag._deselectMultiDrag(),Ee.forEach(function(z){z.sortableIndex=A(z)}),Ee=Ee.sort(function(z,G){return z.sortableIndex-G.sortableIndex}),J=!0},dragStarted:function(U){var z,G=this,U=U.sortable;this.isMultiDrag&&(this.options.sort&&(U.captureAnimationState(),this.options.animation&&(Ee.forEach(function(ee){ee!==Me&&h(ee,"position","absolute")}),z=w(Me,!1,!0,!0),Ee.forEach(function(ee){ee!==Me&&j(ee,z)}),V=te=!0)),U.animateAll(function(){V=te=!1,G.options.animation&&Ee.forEach(function(ee){F(ee)}),G.options.sort&&ae()}))},dragOver:function(U){var z=U.target,G=U.completed,U=U.cancel;te&&~Ee.indexOf(z)&&(G(!1),U())},revert:function(N){var z,G,U=N.fromSortable,ee=N.rootEl,ie=N.sortable,se=N.dragRect;1<Ee.length&&(Ee.forEach(function(fe){ie.addAnimationState({target:fe,rect:te?w(fe):se}),F(fe),fe.fromRect=se,U.removeAnimationState(fe)}),te=!1,z=!this.options.removeCloneOnHide,G=ee,Ee.forEach(function(fe,me){me=G.children[fe.sortableIndex+(z?Number(me):0)],me?G.insertBefore(fe,me):G.appendChild(fe)}))},dragOverCompleted:function(me){var z,G=me.sortable,U=me.isOwner,ee=me.insertion,ie=me.activeSortable,se=me.parentEl,fe=me.putSortable,me=this.options;ee&&(U&&ie._hideClone(),V=!1,me.animation&&1<Ee.length&&(te||!U&&!ie.options.sort&&!fe)&&(z=w(Me,!1,!0,!0),Ee.forEach(function(we){we!==Me&&(j(we,z),se.appendChild(we))}),te=!0),U||(te||ae(),1<Ee.length?(U=_t,ie._showClone(G),ie.options.animation&&!_t&&U&&Xe.forEach(function(we){ie.addAnimationState({target:we,rect:gt}),we.fromRect=gt,we.thisAnimationDuration=null})):ie._showClone(G)))},dragOverAnimationCapture:function(U){var z=U.dragRect,G=U.isOwner,U=U.activeSortable;Ee.forEach(function(ee){ee.thisAnimationDuration=null}),U.options.animation&&!G&&U.multiDrag.isMultiDrag&&(gt=i({},z),z=b(Me,!0),gt.top-=z.f,gt.left-=z.e)},dragOverAnimationComplete:function(){te&&(te=!1,ae())},drop:function(N){var z=N.originalEvent,G=N.rootEl,U=N.parentEl,ee=N.sortable,ie=N.dispatchSortableEvent,se=N.oldIndex,fe=N.putSortable,me=fe||this.sortable;if(z){var we,Te,Pe,$e=this.options,Ze=U.children;if(!J)if($e.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),_(Me,$e.selectedClass,!~Ee.indexOf(Me)),~Ee.indexOf(Me))Ee.splice(Ee.indexOf(Me),1),Pt=null,X({sortable:ee,rootEl:G,name:"deselect",targetEl:Me,originalEvent:z});else{if(Ee.push(Me),X({sortable:ee,rootEl:G,name:"select",targetEl:Me,originalEvent:z}),z.shiftKey&&Pt&&ee.el.contains(Pt)){var Ie=A(Pt),N=A(Me);if(~Ie&&~N&&Ie!==N)for(var et,Lt=Ie<N?(et=Ie,N):(et=N,Ie+1);et<Lt;et++)~Ee.indexOf(Ze[et])||(_(Ze[et],$e.selectedClass,!0),Ee.push(Ze[et]),X({sortable:ee,rootEl:G,name:"select",targetEl:Ze[et],originalEvent:z}))}else Pt=Me;Ye=me}J&&this.isMultiDrag&&(te=!1,(U[K].options.sort||U!==G)&&1<Ee.length&&(we=w(Me),Te=A(Me,":not(."+this.options.selectedClass+")"),!V&&$e.animation&&(Me.thisAnimationDuration=null),me.captureAnimationState(),V||($e.animation&&(Me.fromRect=we,Ee.forEach(function(Ve){var Bt;Ve.thisAnimationDuration=null,Ve!==Me&&(Bt=te?w(Ve):we,Ve.fromRect=Bt,me.addAnimationState({target:Ve,rect:Bt}))})),ae(),Ee.forEach(function(Ve){Ze[Te]?U.insertBefore(Ve,Ze[Te]):U.appendChild(Ve),Te++}),se===A(Me)&&(Pe=!1,Ee.forEach(function(Ve){Ve.sortableIndex!==A(Ve)&&(Pe=!0)}),Pe&&ie("update"))),Ee.forEach(function(Ve){F(Ve)}),me.animateAll()),Ye=me),(G===U||fe&&fe.lastPutMode!=="clone")&&Xe.forEach(function(Ve){Ve.parentNode&&Ve.parentNode.removeChild(Ve)})}},nullingGlobal:function(){this.isMultiDrag=J=!1,Xe.length=0},destroyGlobal:function(){this._deselectMultiDrag(),y(document,"pointerup",this._deselectMultiDrag),y(document,"mouseup",this._deselectMultiDrag),y(document,"touchend",this._deselectMultiDrag),y(document,"keydown",this._checkKeyDown),y(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(N){if(!(J!==void 0&&J||Ye!==this.sortable||N&&x(N.target,this.options.draggable,this.sortable.el,!1)||N&&N.button!==0))for(;Ee.length;){var z=Ee[0];_(z,this.options.selectedClass,!1),Ee.shift(),X({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:z,originalEvent:N})}},_checkKeyDown:function(N){N.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(N){N.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},i(I,{pluginName:"multiDrag",utils:{select:function(N){var z=N.parentNode[K];z&&z.options.multiDrag&&!~Ee.indexOf(N)&&(Ye&&Ye!==z&&(Ye.multiDrag._deselectMultiDrag(),Ye=z),_(N,z.options.selectedClass,!0),Ee.push(N))},deselect:function(N){var z=N.parentNode[K],G=Ee.indexOf(N);z&&z.options.multiDrag&&~G&&(_(N,z.options.selectedClass,!1),Ee.splice(G,1))}},eventProperties:function(){var N=this,z=[],G=[];return Ee.forEach(function(U){var ee;z.push({multiDragElement:U,index:U.sortableIndex}),ee=te&&U!==Me?-1:te?A(U,":not(."+N.options.selectedClass+")"):A(U),G.push({multiDragElement:U,index:ee})}),{items:o(Ee),clones:[].concat(Xe),oldIndicies:z,newIndicies:G}},optionListeners:{multiDragKey:function(N){return(N=N.toLowerCase())==="ctrl"?N="Control":1<N.length&&(N=N.charAt(0).toUpperCase()+N.substr(1)),N}}})}),Oe})});var Kf=_e((kT,Gf)=>{"use strict";function iw(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var nw=iw(Af());function de(r,t){return typeof r=="string"?(t||document).querySelector(r):r||null}de.each=(r,t)=>typeof r=="string"?Array.from((t||document).querySelectorAll(r)):r||null;de.create=(r,t)=>{let e=document.createElement(r);for(let i in t){let n=t[i];if(i==="inside")de(n).appendChild(e);else if(i==="around"){let o=de(n);o.parentNode.insertBefore(e,o),e.appendChild(o)}else i==="styles"?typeof n=="object"&&Object.keys(n).map(o=>{e.style[o]=n[o]}):i in e?e[i]=n:e.setAttribute(i,n)}return e};de.on=(r,t,e,i)=>{i?de.delegate(r,t,e,i):(i=e,de.bind(r,t,i))};de.off=(r,t,e)=>{r.removeEventListener(t,e)};de.bind=(r,t,e)=>{t.split(/\s+/).forEach(function(i){r.addEventListener(i,e)})};de.delegate=(r,t,e,i)=>{r.addEventListener(t,function(n){let o=n.target.closest(e);o&&(n.delegatedTarget=o,i.call(this,n,o))})};de.unbind=(r,t)=>{if(r)for(let e in t){let i=t[e];e.split(/\s+/).forEach(function(n){r.removeEventListener(n,i)})}};de.fire=(r,t,e)=>{let i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0);for(let n in e)i[n]=e[n];return r.dispatchEvent(i)};de.data=(r,t)=>{if(!t)return r.dataset;for(let e in t)r.dataset[e]=t[e]};de.style=(r,t)=>{if(typeof t=="string")return de.getStyle(r,t);Array.isArray(r)||(r=[r]),r.map(e=>{for(let i in t)e.style[i]=t[i]})};de.removeStyle=(r,t)=>{Array.isArray(r)||(r=[r]),Array.isArray(t)||(t=[t]),r.map(e=>{for(let i of t)e.style[i]=""})};de.getStyle=(r,t)=>{if(!t)return getComputedStyle(r);let e=getComputedStyle(r)[t];return["width","height"].includes(t)&&(e=parseFloat(e)),e};de.closest=(r,t)=>t?t.matches(r)?t:de.closest(r,t.parentNode):null;de.inViewport=(r,t)=>{let{top:e,left:i,bottom:n,right:o}=r.getBoundingClientRect(),{top:s,left:a,bottom:l,right:u}=t.getBoundingClientRect();return e>=s&&i>=a&&n<=l&&o<=u};de.scrollTop=function(t,e){requestAnimationFrame(()=>{t.scrollTop=e})};de.scrollbarSize=function(){return de.scrollBarSizeValue||(de.scrollBarSizeValue=ow()),de.scrollBarSizeValue};function ow(){let r=document.createElement("div");de.style(r,{width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"}),document.body.appendChild(r);let t=r.offsetWidth-r.clientWidth;return document.body.removeChild(r),t}de.hasVerticalOverflow=function(r){return r.scrollHeight>r.offsetHeight+10};de.hasHorizontalOverflow=function(r){return r.scrollWidth>r.offsetWidth+10};de.measureTextWidth=function(r){let t=document.createElement("div");return t.style.position="absolute",t.style.visibility="hidden",t.style.height="auto",t.style.width="auto",t.style.whiteSpace="nowrap",t.innerText=r,document.body.appendChild(t),t.clientWidth+1};function sw(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var ni=sw,to=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ro(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function aw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function lw(r,t){return t={exports:{}},r(t,t.exports),t.exports}var cw=typeof to=="object"&&to&&to.Object===Object&&to,uw=cw,dw=typeof self=="object"&&self&&self.Object===Object&&self,fw=uw||dw||Function("return this")(),_n=fw,pw=function(){return _n.Date.now()},Os=pw,hw=_n.Symbol,io=hw,Hf=Object.prototype,_w=Hf.hasOwnProperty,gw=Hf.toString,cn=io?io.toStringTag:void 0;function mw(r){var t=_w.call(r,cn),e=r[cn];try{r[cn]=void 0}catch(n){}var i=gw.call(r);return t?r[cn]=e:delete r[cn],i}var vw=mw,bw=Object.prototype,yw=bw.toString;function ww(r){return yw.call(r)}var kw=ww,xw="[object Null]",Cw="[object Undefined]",If=io?io.toStringTag:void 0;function Sw(r){return r==null?r===void 0?Cw:xw:If&&If in Object(r)?vw(r):kw(r)}var qf=Sw;function Tw(r){return r!=null&&typeof r=="object"}var Ew=Tw,Ow="[object Symbol]";function Mw(r){return typeof r=="symbol"||Ew(r)&&qf(r)==Ow}var $w=Mw,Pf=0/0,Lw=/^\s+|\s+$/g,Bw=/^[-+]0x[0-9a-f]+$/i,Aw=/^0b[01]+$/i,Iw=/^0o[0-7]+$/i,Pw=parseInt;function Rw(r){if(typeof r=="number")return r;if($w(r))return Pf;if(ni(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=ni(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=r.replace(Lw,"");var e=Aw.test(r);return e||Iw.test(r)?Pw(r.slice(2),e?2:8):Bw.test(r)?Pf:+r}var Rf=Rw,jw="Expected a function",Nw=Math.max,Dw=Math.min;function Fw(r,t,e){var i,n,o,s,a,l,u=0,d=!1,p=!1,g=!0;if(typeof r!="function")throw new TypeError(jw);t=Rf(t)||0,ni(e)&&(d=!!e.leading,p="maxWait"in e,o=p?Nw(Rf(e.maxWait)||0,t):o,g="trailing"in e?!!e.trailing:g);function m(b){var M=i,E=n;return i=n=void 0,u=b,s=r.apply(E,M),s}function k(b){return u=b,a=setTimeout(x,t),d?m(b):s}function y(b){var M=b-l,E=b-u,w=t-M;return p?Dw(w,o-E):w}function v(b){var M=b-l,E=b-u;return l===void 0||M>=t||M<0||p&&E>=o}function x(){var b=Os();if(v(b))return C(b);a=setTimeout(x,y(b))}function C(b){return a=void 0,g&&i?m(b):(i=n=void 0,s)}function c(){a!==void 0&&clearTimeout(a),u=0,i=l=n=a=void 0}function _(){return a===void 0?s:C(Os())}function h(){var b=Os(),M=v(b);if(i=arguments,n=this,l=b,M){if(a===void 0)return k(l);if(p)return a=setTimeout(x,t),m(l)}return a===void 0&&(a=setTimeout(x,t)),s}return h.cancel=c,h.flush=_,h}var Wf=Fw,zw="Expected a function";function Hw(r,t,e){var i=!0,n=!0;if(typeof r!="function")throw new TypeError(zw);return ni(e)&&(i="leading"in e?!!e.leading:i,n="trailing"in e?!!e.trailing:n),Wf(r,t,{leading:i,maxWait:t,trailing:n})}var qw=Hw,Ww="[object AsyncFunction]",Uw="[object Function]",Vw="[object GeneratorFunction]",Yw="[object Proxy]";function Gw(r){if(!ni(r))return!1;var t=qf(r);return t==Uw||t==Vw||t==Ww||t==Yw}var Kw=Gw,Xw=_n["__core-js_shared__"],Ms=Xw,jf=function(){var r=/[^.]+$/.exec(Ms&&Ms.keys&&Ms.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function Jw(r){return!!jf&&jf in r}var Zw=Jw,Qw=Function.prototype,e1=Qw.toString;function t1(r){if(r!=null){try{return e1.call(r)}catch(t){}try{return r+""}catch(t){}}return""}var r1=t1,i1=/[\\^$.*+?()[\]{}|]/g,n1=/^\[object .+?Constructor\]$/,o1=Function.prototype,s1=Object.prototype,a1=o1.toString,l1=s1.hasOwnProperty,c1=RegExp("^"+a1.call(l1).replace(i1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function u1(r){if(!ni(r)||Zw(r))return!1;var t=Kw(r)?c1:n1;return t.test(r1(r))}var d1=u1;function f1(r,t){return r==null?void 0:r[t]}var p1=f1;function h1(r,t){var e=p1(r,t);return d1(e)?e:void 0}var Fs=h1,_1=Fs(Object,"create"),hn=_1;function g1(){this.__data__=hn?hn(null):{},this.size=0}var m1=g1;function v1(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var b1=v1,y1="__lodash_hash_undefined__",w1=Object.prototype,k1=w1.hasOwnProperty;function x1(r){var t=this.__data__;if(hn){var e=t[r];return e===y1?void 0:e}return k1.call(t,r)?t[r]:void 0}var C1=x1,S1=Object.prototype,T1=S1.hasOwnProperty;function E1(r){var t=this.__data__;return hn?t[r]!==void 0:T1.call(t,r)}var O1=E1,M1="__lodash_hash_undefined__";function $1(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=hn&&t===void 0?M1:t,this}var L1=$1;function si(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}si.prototype.clear=m1;si.prototype.delete=b1;si.prototype.get=C1;si.prototype.has=O1;si.prototype.set=L1;var Nf=si;function B1(){this.__data__=[],this.size=0}var A1=B1;function I1(r,t){return r===t||r!==r&&t!==t}var P1=I1;function R1(r,t){for(var e=r.length;e--;)if(P1(r[e][0],t))return e;return-1}var oo=R1,j1=Array.prototype,N1=j1.splice;function D1(r){var t=this.__data__,e=oo(t,r);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():N1.call(t,e,1),--this.size,!0}var F1=D1;function z1(r){var t=this.__data__,e=oo(t,r);return e<0?void 0:t[e][1]}var H1=z1;function q1(r){return oo(this.__data__,r)>-1}var W1=q1;function U1(r,t){var e=this.__data__,i=oo(e,r);return i<0?(++this.size,e.push([r,t])):e[i][1]=t,this}var V1=U1;function ai(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}ai.prototype.clear=A1;ai.prototype.delete=F1;ai.prototype.get=H1;ai.prototype.has=W1;ai.prototype.set=V1;var Y1=ai,G1=Fs(_n,"Map"),K1=G1;function X1(){this.size=0,this.__data__={hash:new Nf,map:new(K1||Y1),string:new Nf}}var J1=X1;function Z1(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}var Q1=Z1;function ek(r,t){var e=r.__data__;return Q1(t)?e[typeof t=="string"?"string":"hash"]:e.map}var so=ek;function tk(r){var t=so(this,r).delete(r);return this.size-=t?1:0,t}var rk=tk;function ik(r){return so(this,r).get(r)}var nk=ik;function ok(r){return so(this,r).has(r)}var sk=ok;function ak(r,t){var e=so(this,r),i=e.size;return e.set(r,t),this.size+=e.size==i?0:1,this}var lk=ak;function li(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}li.prototype.clear=J1;li.prototype.delete=rk;li.prototype.get=nk;li.prototype.has=sk;li.prototype.set=lk;var ck=li,uk="__lodash_hash_undefined__";function dk(r){return this.__data__.set(r,uk),this}var fk=dk;function pk(r){return this.__data__.has(r)}var hk=pk;function no(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new ck;++t<e;)this.add(r[t])}no.prototype.add=no.prototype.push=fk;no.prototype.has=hk;var _k=no;function gk(r,t,e,i){for(var n=r.length,o=e+(i?1:-1);i?o--:++o<n;)if(t(r[o],o,r))return o;return-1}var mk=gk;function vk(r){return r!==r}var bk=vk;function yk(r,t,e){for(var i=e-1,n=r.length;++i<n;)if(r[i]===t)return i;return-1}var wk=yk;function kk(r,t,e){return t===t?wk(r,t,e):mk(r,bk,e)}var xk=kk;function Ck(r,t){var e=r==null?0:r.length;return!!e&&xk(r,t,0)>-1}var Sk=Ck;function Tk(r,t,e){for(var i=-1,n=r==null?0:r.length;++i<n;)if(e(t,r[i]))return!0;return!1}var Ek=Tk;function Ok(r,t){return r.has(t)}var Mk=Ok,$k=Fs(_n,"Set"),$s=$k;function Lk(){}var Bk=Lk;function Ak(r){var t=-1,e=Array(r.size);return r.forEach(function(i){e[++t]=i}),e}var Uf=Ak,Ik=1/0,Pk=$s&&1/Uf(new $s([,-0]))[1]==Ik?function(r){return new $s(r)}:Bk,Rk=Pk,jk=200;function Nk(r,t,e){var i=-1,n=Sk,o=r.length,s=!0,a=[],l=a;if(e)s=!1,n=Ek;else if(o>=jk){var u=t?null:Rk(r);if(u)return Uf(u);s=!1,n=Mk,l=new _k}else l=t?[]:a;e:for(;++i<o;){var d=r[i],p=t?t(d):d;if(d=e||d!==0?d:0,s&&p===p){for(var g=l.length;g--;)if(l[g]===p)continue e;t&&l.push(p),a.push(d)}else n(l,p,e)||(l!==a&&l.push(p),a.push(d))}return a}var Dk=Nk;function Fk(r){return r&&r.length?Dk(r):[]}var zk=Fk;function Vf(r){return r.replace(/([A-Z])/g,t=>`-${t[0].toLowerCase()}`)}function Ls(r){return Object.keys(r).map(e=>{let i=Vf(e),n=r[e];return n===void 0?"":`data-${i}="${n}" `}).join("").trim()}function Df(r){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=r,document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){console.log("Oops, unable to copy")}document.body.removeChild(t)}function Hk(r){return!isNaN(r)}var Yf=qw,qk=Wf;function dn(r,t=null){return(...e)=>new Promise(i=>{setTimeout(()=>{let o=r.apply(t,e);i(o)})})}function ao(r,t,e){let i=e.reduce((n,o)=>(n[o]={get(){return t[o]}},n),{});Object.defineProperties(r,i)}function Wk(r){return r!==void 0||r!==null}function Uk(r){return!Wk(r)}function fn(r){return!isNaN(r)}function Vk(r){return Array.isArray(r)?r:[r]}function Ff(r){return zk(r)}function un(r,t){return r-t}function zf(r){return r.replace(/<[^>]*>/g,"")}function Yk(r,t){return r&&(Object.keys(t).forEach(e=>{let i=new RegExp(`{(${e})}`,"g");r=r.replace(i,t[e])}),r)}function Gk(r){if(!r)return"";let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(r).replace(/[&<>"'`=/]/g,e=>t[e]||e)}var Bs=class{constructor(t){this.options=t,this.sortRows=dn(this.sortRows,this),this.switchColumn=dn(this.switchColumn,this),this.removeColumn=dn(this.removeColumn,this),this.options.filterRows=dn(this.options.filterRows,this)}init(t,e){t||(t=this.options.data),e&&(this.options.columns=e),this.data=t,this.rowCount=0,this.columns=[],this.rows=[],this.prepareColumns(),this.validateData(this.data),this.rows=this.prepareRows(this.data),this.prepareTreeRows(),this.prepareRowView(),this.prepareNumericColumns()}get currentSort(){return this.columns.find(e=>e.sortOrder!=="none")||{colIndex:-1,sortOrder:"none"}}prepareColumns(){this.columns=[],this.validateColumns(),this.prepareDefaultColumns(),this.prepareHeader()}prepareDefaultColumns(){if(this.options.checkboxColumn&&!this.hasColumnById("_checkbox")){let t={id:"_checkbox",content:this.getCheckboxHTML(),editable:!1,resizable:!1,sortable:!1,focusable:!1,dropdown:!1,width:32};this.columns.push(t)}if(this.options.serialNoColumn&&!this.hasColumnById("_rowIndex")){let t={id:"_rowIndex",content:"",align:"center",editable:!1,resizable:!1,focusable:!1,dropdown:!1};this.columns.push(t)}}prepareHeader(){let t=this.columns.concat(this.options.columns),e={isHeader:1,editable:!0,sortable:!0,resizable:!0,focusable:!0,dropdown:!0,width:null,format:i=>i==null?"":i+""};this.columns=t.map((i,n)=>this.prepareCell(i,n)).map(i=>Object.assign({},e,i)).map(i=>(i.content=i.content||i.name||"",i.id=i.id||i.content,i))}prepareCell(t,e){let i={content:"",sortOrder:"none",colIndex:e,column:this.columns[e]};return t!==null&&typeof t=="object"?Object.assign(i,t):i.content=t,i}prepareNumericColumns(){let t=this.getRow(0);!t||(this.columns=this.columns.map((e,i)=>{let n=t[i].content;return!e.align&&Hk(n)&&(e.align="right"),e}))}prepareRows(t){return t.map((e,i)=>{let n=this._getNextRowCount(),o=[],s={rowIndex:n};if(Array.isArray(e))for(this.options.checkboxColumn&&o.push(this.getCheckboxHTML()),this.options.serialNoColumn&&o.push(n+1+""),o=o.concat(e);o.length<this.columns.length;)o.push("");else{for(let a of this.columns)a.id==="_checkbox"?o.push(this.getCheckboxHTML()):a.id==="_rowIndex"?o.push(n+1+""):o.push(e[a.id]);s.indent=e.indent||0}return this.prepareRow(o,s)})}prepareTreeRows(){this.rows.forEach((t,e)=>{if(fn(t.meta.indent)){let i=this.getRow(e+1);t.meta.isLeaf=!i||Uk(i.meta.indent)||i.meta.indent<=t.meta.indent,t.meta.isTreeNodeClose=!1}})}prepareRowView(){this.rowViewOrder=this.rows.map(t=>t.meta.rowIndex)}prepareRow(t,e){let i={rowIndex:e.rowIndex,indent:e.indent};return t=t.map((n,o)=>this.prepareCell(n,o)).map(n=>Object.assign({},i,n)),t.meta=e,t}validateColumns(){let t=this.options.columns;if(!Array.isArray(t))throw new pn("`columns` must be an array");t.forEach((e,i)=>{if(typeof e!="string"&&typeof e!="object")throw new pn(`column "${i}" must be a string or an object`)})}validateData(t){if(Array.isArray(t)&&(t.length===0||Array.isArray(t[0])||typeof t[0]=="object"))return!0;throw new pn("`data` must be an array of arrays or objects")}appendRows(t){this.validateData(t),this.rows=this.rows.concat(this.prepareRows(t)),this.prepareTreeRows(),this.prepareRowView()}sortRows(t,e="none"){t=+t,this.getColumns().map(i=>{i.colIndex===t?i.sortOrder=e:i.sortOrder="none"}),this._sortRows(t,e)}_sortRows(t,e){if(this.currentSort.colIndex===t&&(this.currentSort.sortOrder==="asc"&&e==="desc"||this.currentSort.sortOrder==="desc"&&e==="asc")){this.reverseArray(this.rowViewOrder),this.currentSort.sortOrder=e;return}if(this.rowViewOrder.sort((i,n)=>{let o=i,s=n,a=this.getCell(t,i).content,l=this.getCell(t,n).content;if(a=a==null?"":a,l=l==null?"":l,e==="none")return o-s;if(e==="asc"){if(a<l)return-1;if(a>l)return 1;if(a===l)return 0}else if(e==="desc"){if(a<l)return 1;if(a>l)return-1;if(a===l)return 0}return 0}),this.hasColumnById("_rowIndex")){let i=this.getColumnIndexById("_rowIndex");this.rows.forEach((n,o)=>{let s=this.rowViewOrder.indexOf(o),a=n[i];a.content=s+1+""})}}reverseArray(t){let e=null,i=null,n=t.length;for(e=0,i=n-1;e<i;e+=1,i-=1){let o=t[e];t[e]=t[i],t[i]=o}}switchColumn(t,e){let i=this.columns[t];this.columns[t]=this.columns[e],this.columns[e]=i,this.columns[t].colIndex=t,this.columns[e].colIndex=e,this.rows.forEach(n=>{let o=Object.assign({},n[t],{colIndex:e}),s=Object.assign({},n[e],{colIndex:t});n[e]=o,n[t]=s})}removeColumn(t){t=+t;let e=n=>n.colIndex!==t,i=(n,o)=>Object.assign({},n,{colIndex:o});this.columns=this.columns.filter(e).map(i),this.rows.forEach(n=>{n.splice(t,1),n.forEach((o,s)=>{o.colIndex=s})})}updateRow(t,e){t.length<this.columns.length&&(this.hasColumnById("_rowIndex")&&(t=[e+1+""].concat(t)),this.hasColumnById("_checkbox")&&(t=['<input type="checkbox" />'].concat(t)));let i=this.prepareRow(t,{rowIndex:e}),n=this.rows.findIndex(o=>o[0].rowIndex===e);return this.rows[n]=i,i}updateCell(t,e,i){let n;typeof t=="object"&&(n=t,t=n.colIndex,e=n.rowIndex,i=n),n=this.getCell(t,e);for(let o in i){let s=i[o];s!==void 0&&(n[o]=s)}return n}updateColumn(t,e){let i=this.getColumn(t);for(let n in e){let o=e[n];o!==void 0&&(i[n]=o)}return i}filterRows(t){return this.options.filterRows(this.rows,t,this).then(e=>(e||(e=this.getAllRowIndices()),e.then||(e=Promise.resolve(e)),e.then(i=>(this._filteredRows=i,{rowsToHide:this.getAllRowIndices().filter(o=>!i.includes(o)),rowsToShow:i}))))}getFilteredRowIndices(){return this._filteredRows||this.getAllRowIndices()}getAllRowIndices(){return this.rows.map(t=>t.meta.rowIndex)}getRowCount(){return this.rowCount}_getNextRowCount(){let t=this.rowCount;return this.rowCount++,t}getRows(t,e){return this.rows.slice(t,e)}getRowsForView(t,e){return this.rowViewOrder.map(n=>this.rows[n]).slice(t,e)}getColumns(t){let e=this.columns;return t&&(e=e.slice(this.getStandardColumnCount())),e}getStandardColumnCount(){return this.options.checkboxColumn&&this.options.serialNoColumn?2:this.options.checkboxColumn||this.options.serialNoColumn?1:0}getColumnCount(t){let e=this.columns.length;return t&&(e=e-this.getStandardColumnCount()),e}getColumn(t){return t=+t,t<0&&(t=this.columns.length+t),this.columns.find(e=>e.colIndex===t)}getColumnById(t){return this.columns.find(e=>e.id===t)}getRow(t){return t=+t,this.rows[t]}getCell(t,e){return e=+e,t=+t,this.getRow(e)[t]}getChildren(t){t=+t;let e=this.getRow(t).meta.indent,i=[];for(let n=t+1;n<this.rowCount;n++){let o=this.getRow(n);if(!isNaN(o.meta.indent)&&(o.meta.indent>e&&i.push(n),o.meta.indent===e))break}return i}getImmediateChildren(t){t=+t;let e=this.getRow(t).meta.indent,i=[],n=e+1;for(let o=t+1;o<this.rowCount;o++){let s=this.getRow(o);if(!(isNaN(s.meta.indent)||s.meta.indent>n)&&(s.meta.indent===n&&i.push(o),s.meta.indent===e))break}return i}get(){return{columns:this.columns,rows:this.rows}}getData(t){return this.data[t]}hasColumn(t){return Boolean(this.columns.find(e=>e.content===t))}hasColumnById(t){return Boolean(this.columns.find(e=>e.id===t))}getColumnIndex(t){return this.columns.findIndex(e=>e.content===t)}getColumnIndexById(t){return this.columns.findIndex(e=>e.id===t)}getCheckboxHTML(){return'<input type="checkbox" />'}},pn=class extends TypeError{},As={chevronDown:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>',chevronRight:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>'},oi=class{constructor(t){this.instance=t,ao(this,this.instance,["wrapper","options","style","header","bodyScrollable","columnmanager","rowmanager","datamanager","keyboard"]),this.bindEvents()}bindEvents(){this.bindFocusCell(),this.bindEditCell(),this.bindKeyboardSelection(),this.bindCopyCellContents(),this.bindMouseEvents(),this.bindTreeEvents()}bindFocusCell(){this.bindKeyboardNav()}bindEditCell(){this.$editingCell=null,de.on(this.bodyScrollable,"dblclick",".dt-cell",(t,e)=>{this.activateEditing(e)}),this.keyboard.on("enter",()=>{this.$focusedCell&&!this.$editingCell?this.activateEditing(this.$focusedCell):this.$editingCell&&this.deactivateEditing()})}bindKeyboardNav(){let t=e=>{if(!this.$focusedCell||this.$editingCell)return!1;let i=this.$focusedCell,{rowIndex:n,colIndex:o}=de.data(i);return e==="left"?i=this.getLeftMostCell$(n):e==="right"?i=this.getRightMostCell$(n):e==="up"?i=this.getTopMostCell$(o):e==="down"&&(i=this.getBottomMostCell$(o)),this.focusCell(i),!0};["left","right","up","down","tab","shift+tab"].map(e=>this.keyboard.on(e,()=>this.focusCellInDirection(e))),["left","right","up","down"].map(e=>this.keyboard.on(`ctrl+${e}`,()=>t(e))),this.keyboard.on("esc",()=>{this.deactivateEditing(!1),this.columnmanager.toggleFilter(!1)}),this.options.inlineFilters&&(this.keyboard.on("ctrl+f",e=>{let i=de.closest(".dt-cell",e.target),{colIndex:n}=de.data(i);return this.activateFilter(n),!0}),de.on(this.header,"focusin",".dt-filter",()=>{this.unfocusCell(this.$focusedCell)}))}bindKeyboardSelection(){let t=e=>{let i=this.getSelectionCursor();return e==="left"?i=this.getLeftCell$(i):e==="right"?i=this.getRightCell$(i):e==="up"?i=this.getAboveCell$(i):e==="down"&&(i=this.getBelowCell$(i)),i};["left","right","up","down"].map(e=>this.keyboard.on(`shift+${e}`,()=>this.selectArea(t(e))))}bindCopyCellContents(){this.keyboard.on("ctrl+c",()=>{let t=this.copyCellContents(this.$focusedCell,this.$selectionCursor),e=this.instance.translate("{count} cells copied",{count:t});t&&this.instance.showToastMessage(e,2)}),this.options.pasteFromClipboard&&this.keyboard.on("ctrl+v",t=>(this.instance.pasteTarget.focus(),setTimeout(()=>{let e=this.instance.pasteTarget.value;this.instance.pasteTarget.value="",this.pasteContentInCell(e)},10),!1))}bindMouseEvents(){let t=null;de.on(this.bodyScrollable,"mousedown",".dt-cell",i=>{t=!0,this.focusCell(de(i.delegatedTarget))}),de.on(this.bodyScrollable,"mouseup",()=>{t=!1});let e=i=>{!t||this.selectArea(de(i.delegatedTarget))};de.on(this.bodyScrollable,"mousemove",".dt-cell",Yf(e,50))}bindTreeEvents(){de.on(this.bodyScrollable,"click",".dt-tree-node__toggle",(t,e)=>{let i=de.closest(".dt-cell",e),{rowIndex:n}=de.data(i);i.classList.contains("dt-cell--tree-close")?this.rowmanager.openSingleNode(n):this.rowmanager.closeSingleNode(n)})}focusCell(t,{skipClearSelection:e=0,skipDOMFocus:i=0,skipScrollToCell:n=0}={}){if(!t||t===this.$editingCell)return;let{colIndex:o,isHeader:s}=de.data(t);s||this.columnmanager.getColumn(o).focusable===!1||(n||this.scrollToCell(t),this.deactivateEditing(),e||this.clearSelection(),this.$focusedCell&&this.$focusedCell.classList.remove("dt-cell--focus"),this.$focusedCell=t,t.classList.add("dt-cell--focus"),i||t.focus(),this.highlightRowColumnHeader(t))}unfocusCell(t){!t||(t.classList.remove("dt-cell--focus"),this.$focusedCell=null,this.lastHeaders&&this.lastHeaders.forEach(e=>e&&e.classList.remove("dt-cell--highlight")))}highlightRowColumnHeader(t){let{colIndex:e,rowIndex:i}=de.data(t),n=this.datamanager.getColumnIndexById("_rowIndex"),o=`.dt-cell--header-${e}`,s=`.dt-cell--${n}-${i}`;this.lastHeaders&&this.lastHeaders.forEach(u=>u&&u.classList.remove("dt-cell--highlight"));let a=de(o,this.wrapper),l=de(s,this.wrapper);this.lastHeaders=[a,l],this.lastHeaders.forEach(u=>u&&u.classList.add("dt-cell--highlight"))}selectAreaOnClusterChanged(){if(!(this.$focusedCell&&this.$selectionCursor))return;let{colIndex:t,rowIndex:e}=de.data(this.$selectionCursor),i=this.getCell$(t,e);if(!i||i===this.$selectionCursor)return;let n=de.data(this.$focusedCell);this.$focusedCell=this.getCell$(n.colIndex,n.rowIndex),this.selectArea(i)}focusCellOnClusterChanged(){if(!this.$focusedCell)return;let{colIndex:t,rowIndex:e}=de.data(this.$focusedCell),i=this.getCell$(t,e);!i||this.focusCell(i,{skipClearSelection:1,skipDOMFocus:1,skipScrollToCell:1})}selectArea(t){!this.$focusedCell||this._selectArea(this.$focusedCell,t)&&(this.$selectionCursor=t)}_selectArea(t,e){if(t===e)return!1;let i=this.getCellsInRange(t,e);return i?(this.clearSelection(),this._selectedCells=i.map(n=>this.getCell$(...n)),requestAnimationFrame(()=>{this._selectedCells.map(n=>n.classList.add("dt-cell--highlight"))}),!0):!1}getCellsInRange(t,e){let i,n,o,s;if(typeof t=="number")[i,n,o,s]=arguments;else if(typeof t=="object"){if(!(t&&e))return!1;let p=de.data(t),g=de.data(e);i=+p.colIndex,n=+p.rowIndex,o=+g.colIndex,s=+g.rowIndex}if(n>s&&([n,s]=[s,n]),i>o&&([i,o]=[o,i]),this.isStandardCell(i)||this.isStandardCell(o))return!1;let a=[],l=i,u=n,d=[];for(;u<=s;)d.push(u),u+=1;return d.map(p=>{for(;l<=o;)a.push([l,p]),l++;l=i}),a}clearSelection(){(this._selectedCells||[]).forEach(t=>t.classList.remove("dt-cell--highlight")),this._selectedCells=[],this.$selectionCursor=null}getSelectionCursor(){return this.$selectionCursor||this.$focusedCell}activateEditing(t){this.focusCell(t);let{rowIndex:e,colIndex:i}=de.data(t),n=this.columnmanager.getColumn(i);if(n&&(n.editable===!1||n.focusable===!1))return;let o=this.getCell(i,e);if(o&&o.editable===!1)return;if(this.$editingCell){let{_rowIndex:l,_colIndex:u}=de.data(this.$editingCell);if(e===l&&i===u)return}this.$editingCell=t,t.classList.add("dt-cell--editing");let s=de(".dt-cell__edit",t);s.innerHTML="";let a=this.getEditor(i,e,o.content,s);a&&(this.currentCellEditor=a,a.initValue(o.content,e,n))}deactivateEditing(t=!0){t&&this.submitEditing(),this.$focusedCell&&this.$focusedCell.focus(),this.$editingCell&&(this.$editingCell.classList.remove("dt-cell--editing"),this.$editingCell=null)}getEditor(t,e,i,n){let o=this.datamanager.getColumn(t),s=this.datamanager.getRow(e),a=this.datamanager.getData(e),l=this.options.getEditor?this.options.getEditor(t,e,i,n,o,s,a):this.getDefaultEditor(n);return l===!1?!1:(l===void 0&&(l=this.getDefaultEditor(n)),l)}getDefaultEditor(t){let e=de.create("input",{class:"dt-input",type:"text",inside:t});return{initValue(i){e.focus(),e.value=i},getValue(){return e.value},setValue(i){e.value=i}}}submitEditing(){let t=Promise.resolve();if(!this.$editingCell)return t;let e=this.$editingCell,{rowIndex:i,colIndex:n}=de.data(e),o=this.datamanager.getColumn(n);if(e){let s=this.currentCellEditor;if(s){let a=s.getValue();a.then||(a=Promise.resolve(a)),t=a.then(l=>{let u=this.getCell(n,i).content;if(u===l)return!1;let d=s.setValue(l,i,o);return this.updateCell(n,i,l,!0),e.focus(),d&&d.then&&d.catch(p=>{console.log(p),this.updateCell(n,i,u)}),d})}}return this.currentCellEditor=null,t}copyCellContents(t,e){if(!e&&t){let{colIndex:s,rowIndex:a}=de.data(t),l=this.getCell(s,a);return Df(l.content),1}let i=this.getCellsInRange(t,e);if(!i)return 0;let n=i.map(s=>this.getCell(...s)).reduce((s,a)=>{let l=a.rowIndex;return s[l]=s[l]||[],s[l].push(a.content),s},[]),o=n.map(s=>s.join("	")).join(`
`);return Df(o),n.reduce((s,a)=>s+a.length,0)}pasteContentInCell(t){if(!this.$focusedCell)return;let e=t.split(`
`).map(s=>s.split("	")).filter(s=>s.length&&s.every(a=>a)),{colIndex:i,rowIndex:n}=de.data(this.$focusedCell),o={colIndex:+i,rowIndex:+n};e.forEach((s,a)=>{let l=a+o.rowIndex;s.forEach((u,d)=>{let p=d+o.colIndex;this.updateCell(p,l,u,!0)})})}activateFilter(t){this.columnmanager.toggleFilter(),this.columnmanager.focusFilter(t),this.columnmanager.isFilterShown||this.$focusedCell&&this.$focusedCell.focus()}updateCell(t,e,i,n=!1){let o=this.datamanager.updateCell(t,e,{content:i});this.refreshCell(o,n)}refreshCell(t,e=!1){let i=de(this.selector(t.colIndex,t.rowIndex),this.bodyScrollable);i.innerHTML=this.getCellContent(t,e)}toggleTreeButton(t,e){let i=this.columnmanager.getFirstColumnIndex(),n=this.getCell$(i,t);n&&n.classList[e?"remove":"add"]("dt-cell--tree-close")}isStandardCell(t){return t<this.columnmanager.getFirstColumnIndex()}focusCellInDirection(t){if(!this.$focusedCell||this.$editingCell&&["left","right","up","down"].includes(t))return!1;this.$editingCell&&["tab","shift+tab"].includes(t)&&this.deactivateEditing();let e=this.$focusedCell;if(t==="left"||t==="shift+tab"?e=this.getLeftCell$(e):t==="right"||t==="tab"?e=this.getRightCell$(e):t==="up"?e=this.getAboveCell$(e):t==="down"&&(e=this.getBelowCell$(e)),!e)return!1;let{colIndex:i}=de.data(e);if(!this.columnmanager.getColumn(i).focusable){let o=this.$focusedCell;this.unfocusCell(o),this.$focusedCell=e;let s=this.focusCellInDirection(t);return s||this.focusCell(o),s}return this.focusCell(e),!0}getCell$(t,e){return de(this.selector(t,e),this.bodyScrollable)}getAboveCell$(t){let{colIndex:e}=de.data(t),i=t.parentElement.previousElementSibling;for(;i&&i.classList.contains("dt-row--hide");)i=i.previousElementSibling;return i?de(`.dt-cell--col-${e}`,i):t}getBelowCell$(t){let{colIndex:e}=de.data(t),i=t.parentElement.nextElementSibling;for(;i&&i.classList.contains("dt-row--hide");)i=i.nextElementSibling;return i?de(`.dt-cell--col-${e}`,i):t}getLeftCell$(t){return t.previousElementSibling}getRightCell$(t){return t.nextElementSibling}getLeftMostCell$(t){return this.getCell$(this.columnmanager.getFirstColumnIndex(),t)}getRightMostCell$(t){return this.getCell$(this.columnmanager.getLastColumnIndex(),t)}getTopMostCell$(t){return this.getCell$(t,this.rowmanager.getFirstRowIndex())}getBottomMostCell$(t){return this.getCell$(t,this.rowmanager.getLastRowIndex())}getCell(t,e){return this.instance.datamanager.getCell(t,e)}getRowHeight(){return de.style(de(".dt-row",this.bodyScrollable),"height")}scrollToCell(t){if(de.inViewport(t,this.bodyScrollable))return!1;let{rowIndex:e}=de.data(t);return this.rowmanager.scrollToRow(e),!1}getRowCountPerPage(){return Math.ceil(this.instance.getViewportHeight()/this.getRowHeight())}getCellHTML(t){let{rowIndex:e,colIndex:i,isHeader:n,isFilter:o,isTotalRow:s}=t,a=Ls({rowIndex:e,colIndex:i,isHeader:n,isFilter:o,isTotalRow:s}),l=this.datamanager.getRow(e),u=!(n||o||s);return`
            <div class="${["dt-cell","dt-cell--col-"+i,u?`dt-cell--${i}-${e}`:"",u?"dt-cell--row-"+e:"",n?"dt-cell--header":"",n?`dt-cell--header-${i}`:"",o?"dt-cell--filter":"",u&&l&&l.meta.isTreeNodeClose?"dt-cell--tree-close":""].join(" ")}" ${a} tabindex="0">
                ${this.getCellContent(t)}
            </div>
        `}getCellContent(t,e=!1){let{isHeader:i,isFilter:n,colIndex:o}=t,a=!i&&t.editable!==!1?this.getEditCellHTML(o):"",u=i&&t.sortable!==!1?`<span class="sort-indicator">
                ${this.options.sortIndicator[t.sortOrder]}
            </span>`:"",p=i&&t.resizable!==!1?'<span class="dt-cell__resize-handle"></span>':"",m=i&&t.dropdown!==!1?this.columnmanager.getDropdownHTML():"",k=oi.getCustomCellFormatter(t),y;if(i||n||!k)y=t.content;else if(!t.html||e){let _=this.datamanager.getRow(t.rowIndex),h=this.datamanager.getData(t.rowIndex);y=k(t.content,_,t.column,h)}else y=t.html;if(t.html=y,this.options.treeView&&!(i||n)&&t.indent!==void 0){let _=this.datamanager.getRow(t.rowIndex+1),h=_&&_.meta.indent>t.indent,b=20,M="px";if(this.datamanager.getColumnIndexById("_rowIndex")+1===t.colIndex){let w=(t.indent||0)*b,S=h?`<span class="dt-tree-node__toggle" style="left: ${w-b}${M}">
                        <span class="icon-open">${As.chevronDown}</span>
                        <span class="icon-close">${As.chevronRight}</span>
                    </span>`:"";y=`<span class="dt-tree-node" style="padding-left: ${w}${M}">
                    ${S}
                    <span>${y}</span>
                </span>`}}let x=`
            <div class="${["dt-cell__content",i?`dt-cell__content--header-${o}`:`dt-cell__content--col-${o}`].join(" ")}">
                ${y}
                ${u}
                ${p}
                ${m}
            </div>
            ${a}
        `,C=document.createElement("div");C.innerHTML=y;let c=C.textContent;return c=c.replace(/\s+/g," ").trim(),x=x.replace(">",` title="${Gk(c)}">`),x}getEditCellHTML(t){return`<div class="dt-cell__edit dt-cell__edit--col-${t}"></div>`}selector(t,e){return`.dt-cell--${t}-${e}`}static getCustomCellFormatter(t){return t.format||t.column&&t.column.format||null}},Is=class{constructor(t){this.instance=t,ao(this,this.instance,["options","fireEvent","header","datamanager","cellmanager","style","wrapper","rowmanager","bodyScrollable","bodyRenderer"]),this.bindEvents()}renderHeader(){this.header.innerHTML="<div></div>",this.refreshHeader()}refreshHeader(){let t=this.datamanager.getColumns();de("div",this.header).innerHTML=this.getHeaderHTML(t),this.$filterRow=de(".dt-row-filter",this.header),this.$filterRow&&de.style(this.$filterRow,{display:"none"}),this.$columnMap=[],this.bindMoveColumn()}getHeaderHTML(t){let e=this.rowmanager.getRowHTML(t,{isHeader:1});return this.options.inlineFilters&&(e+=this.rowmanager.getRowHTML(t,{isFilter:1})),e}bindEvents(){this.bindDropdown(),this.bindResizeColumn(),this.bindPerfectColumnWidth(),this.bindFilter()}bindDropdown(){let t=".dt-dropdown__toggle",e=".dt-dropdown__list";this.instance.dropdownContainer.innerHTML=this.getDropdownListHTML(),this.$dropdownList=this.instance.dropdownContainer.firstElementChild,de.on(this.header,"click",t,s=>{this.openDropdown(s)});let i=s=>{let a=[t,t+" *",e,e+" *"].join(",");s.target.matches(a)||o()};de.on(document.body,"click",i),document.addEventListener("scroll",o,!0),this.instance.on("onDestroy",()=>{de.off(document.body,"click",i),de.off(document,"scroll",o)}),de.on(this.$dropdownList,"click",".dt-dropdown__list-item",(s,a)=>{if(!this._dropdownActiveColIndex)return;let l=this.options.headerDropdown,{index:u}=de.data(a),d=this._dropdownActiveColIndex,p=l[u].action;p&&p.call(this.instance,this.getColumn(d)),this.hideDropdown()});let n=this;function o(s){n.hideDropdown()}this.hideDropdown()}openDropdown(t){this._dropdownWidth||(de.style(this.$dropdownList,{display:""}),this._dropdownWidth=de.style(this.$dropdownList,"width")),de.style(this.$dropdownList,{display:"",left:t.clientX-this._dropdownWidth+4+"px",top:t.clientY+4+"px"});let e=de.closest(".dt-cell",t.target),{colIndex:i}=de.data(e);this._dropdownActiveColIndex=i}hideDropdown(){de.style(this.$dropdownList,{display:"none"}),this._dropdownActiveColIndex=null}bindResizeColumn(){let t=!1,e,i,n;de.on(this.header,"mousedown",".dt-cell .dt-cell__resize-handle",(a,l)=>{document.body.classList.add("dt-resize"),e=l.parentNode.parentNode;let{colIndex:d}=de.data(e),p=this.getColumn(d);p&&p.resizable===!1||(t=!0,i=de.style(de(".dt-cell__content",e),"width"),n=a.pageX)});let o=a=>{if(document.body.classList.remove("dt-resize"),!e)return;t=!1;let{colIndex:l}=de.data(e);this.setColumnWidth(l),this.style.setBodyStyle(),e=null};de.on(document.body,"mouseup",o),this.instance.on("onDestroy",()=>{de.off(document.body,"mouseup",o)});let s=a=>{if(!t)return;let l=a.pageX-n;this.options.direction==="rtl"&&(l=-1*l);let u=i+l,{colIndex:d}=de.data(e);this.options.minimumColumnWidth>u||(this.datamanager.updateColumn(d,{width:u}),this.setColumnHeaderWidth(d))};de.on(document.body,"mousemove",s),this.instance.on("onDestroy",()=>{de.off(document.body,"mousemove",s)})}bindPerfectColumnWidth(){de.on(this.header,"dblclick",".dt-cell .dt-cell__resize-handle",(t,e)=>{let i=e.parentNode.parentNode,{colIndex:n}=de.data(i),o=this.bodyRenderer.visibleRows.map(y=>y[n]).reduce((y,v)=>y.content.length>v.content.length?y:v),s=this.cellmanager.getCellHTML(o),a=document.createElement("div");a.innerHTML=s;let l=a.querySelector(".dt-cell__content").textContent,{borderLeftWidth:u,borderRightWidth:d,paddingLeft:p,paddingRight:g}=de.getStyle(this.bodyScrollable.querySelector(".dt-cell__content")),m=[u,d,p,g].map(parseFloat).reduce((y,v)=>y+v),k=de.measureTextWidth(l)+m;this.datamanager.updateColumn(n,{width:k}),this.setColumnHeaderWidth(n),this.setColumnWidth(n)})}bindMoveColumn(){if(this.options.disableReorderColumn)return;let t=de(".dt-row",this.header);this.sortable=nw.create(t,{onEnd:e=>{let{oldIndex:i,newIndex:n}=e,o=e.item,{colIndex:s}=de.data(o);+s!==n&&this.switchColumn(i,n)},preventOnFilter:!1,filter:".dt-cell__resize-handle, .dt-dropdown",chosenClass:"dt-cell--dragging",animation:150})}sortColumn(t,e){this.instance.freeze(),this.sortRows(t,e).then(()=>(this.refreshHeader(),this.rowmanager.refreshRows())).then(()=>this.instance.unfreeze()).then(()=>{this.fireEvent("onSortColumn",this.getColumn(t))})}removeColumn(t){let e=this.getColumn(t);this.instance.freeze(),this.datamanager.removeColumn(t).then(()=>(this.refreshHeader(),this.rowmanager.refreshRows())).then(()=>this.instance.unfreeze()).then(()=>{this.fireEvent("onRemoveColumn",e)})}switchColumn(t,e){this.instance.freeze(),this.datamanager.switchColumn(t,e).then(()=>(this.refreshHeader(),this.rowmanager.refreshRows())).then(()=>{this.setColumnWidth(t),this.setColumnWidth(e),this.instance.unfreeze()}).then(()=>{this.fireEvent("onSwitchColumn",this.getColumn(t),this.getColumn(e))})}toggleFilter(t){if(!this.options.inlineFilters)return;let e;t===void 0?e=!this.isFilterShown:e=t,e?de.style(this.$filterRow,{display:""}):de.style(this.$filterRow,{display:"none"}),this.isFilterShown=e,this.style.setBodyStyle()}focusFilter(t){if(!this.isFilterShown)return;de(`.dt-cell--col-${t} .dt-filter`,this.$filterRow).focus()}bindFilter(){if(!this.options.inlineFilters)return;let t=e=>{this.applyFilter(this.getAppliedFilters())};de.on(this.header,"keydown",".dt-filter",qk(t,300))}applyFilter(t){this.datamanager.filterRows(t).then(({rowsToShow:e})=>{this.rowmanager.showRows(e)})}getAppliedFilters(){let t={};return de.each(".dt-filter",this.header).map(e=>{let i=e.value;i&&(t[e.dataset.colIndex]=i)}),t}applyDefaultSortOrder(){let t=this.getColumns().filter(e=>e.sortOrder!=="none");if(t.length===1){let e=t[0];this.sortColumn(e.colIndex,e.sortOrder)}}sortRows(t,e){return this.datamanager.sortRows(t,e)}getColumn(t){return this.datamanager.getColumn(t)}getColumns(){return this.datamanager.getColumns()}setColumnWidth(t,e){t=+t;let i=e||this.getColumn(t).width,n=[`.dt-cell__content--col-${t}`,`.dt-cell__edit--col-${t}`].join(", "),o={width:i+"px"};this.style.setStyle(n,o)}setColumnHeaderWidth(t){t=+t,this.$columnMap=this.$columnMap||[];let e=`.dt-cell__content--header-${t}`,{width:i}=this.getColumn(t),n=this.$columnMap[t];n||(n=this.header.querySelector(e),this.$columnMap[t]=n),n.style.width=i+"px"}getColumnMinWidth(t){return t=+t,this.getColumn(t).minWidth||24}getFirstColumnIndex(){return this.datamanager.getColumnIndexById("_rowIndex")+1}getHeaderCell$(t){return de(`.dt-cell--header-${t}`,this.header)}getLastColumnIndex(){return this.datamanager.getColumnCount()-1}getDropdownHTML(){let{dropdownButton:t}=this.options;return`
            <div class="dt-dropdown">
                <div class="dt-dropdown__toggle">${t}</div>
            </div>
      `}getDropdownListHTML(){let{headerDropdown:t}=this.options;return`
            <div class="dt-dropdown__list">
            ${t.map((e,i)=>`
                <div class="dt-dropdown__list-item" data-index="${i}">${e.label}</div>
            `).join("")}
            </div>
        `}},Ps=class{constructor(t){this.instance=t,ao(this,this.instance,["options","fireEvent","wrapper","bodyScrollable","bodyRenderer","style"]),this.bindEvents(),this.refreshRows=dn(this.refreshRows,this)}get datamanager(){return this.instance.datamanager}get cellmanager(){return this.instance.cellmanager}bindEvents(){this.bindCheckbox()}bindCheckbox(){!this.options.checkboxColumn||(this.checkMap=[],de.on(this.wrapper,"click",'.dt-cell--col-0 [type="checkbox"]',(t,e)=>{let i=e.closest(".dt-cell"),{rowIndex:n,isHeader:o}=de.data(i),s=e.checked;o?this.checkAll(s):this.checkRow(n,s)}))}refreshRows(){this.instance.renderBody(),this.instance.setDimensions()}refreshRow(t,e){this.datamanager.updateRow(t,e).forEach(n=>{this.cellmanager.refreshCell(n,!0)})}getCheckedRows(){if(!this.checkMap)return[];let t=[];for(let e in this.checkMap)this.checkMap[e]===1&&t.push(e);return t}highlightCheckedRows(){this.getCheckedRows().map(t=>this.checkRow(t,!0))}checkRow(t,e){let i=e?1:0,n=o=>`.dt-cell--0-${o} [type="checkbox"]`;this.checkMap[t]=i,de.each(n(t),this.bodyScrollable).map(o=>{o.checked=e}),this.highlightRow(t,e),this.showCheckStatus(),this.fireEvent("onCheckRow",this.datamanager.getRow(t))}checkAll(t){let e=t?1:0;t?this.datamanager._filteredRows?this.datamanager._filteredRows.forEach(i=>{this.checkRow(i,t)}):this.checkMap=Array.from(Array(this.getTotalRows())).map(i=>e):this.checkMap=[],de.each('.dt-cell--col-0 [type="checkbox"]',this.bodyScrollable).map(i=>{i.checked=t}),this.highlightAll(t),this.showCheckStatus(),this.fireEvent("onCheckRow")}showCheckStatus(){if(!this.options.checkedRowStatus)return;let e=this.getCheckedRows().length;if(e>0){let i=this.instance.translate("{count} rows selected",{count:e});this.bodyRenderer.showToastMessage(i)}else this.bodyRenderer.clearToastMessage()}highlightRow(t,e=!0){let i=this.getRow$(t);if(!!i){if(!e&&this.bodyScrollable.classList.contains("dt-scrollable--highlight-all")){i.classList.add("dt-row--unhighlight");return}e&&i.classList.contains("dt-row--unhighlight")&&i.classList.remove("dt-row--unhighlight"),this._highlightedRows=this._highlightedRows||{},e?(i.classList.add("dt-row--highlight"),this._highlightedRows[t]=i):(i.classList.remove("dt-row--highlight"),delete this._highlightedRows[t])}}highlightAll(t=!0){if(t)this.bodyScrollable.classList.add("dt-scrollable--highlight-all");else{this.bodyScrollable.classList.remove("dt-scrollable--highlight-all");for(let e in this._highlightedRows)this._highlightedRows[e].classList.remove("dt-row--highlight");this._highlightedRows={}}}showRows(t){t=Vk(t);let e=t.map(i=>this.datamanager.getRow(i));this.bodyRenderer.renderRows(e)}showAllRows(){let t=this.datamanager.getAllRowIndices();this.showRows(t)}getChildrenToShowForNode(t){let e=this.datamanager.getRow(t);return e.meta.isTreeNodeClose=!1,this.datamanager.getImmediateChildren(t)}openSingleNode(t){let e=this.getChildrenToShowForNode(t),i=this.bodyRenderer.visibleRowIndices,n=Ff([...e,...i]).sort(un);this.showRows(n)}getChildrenToHideForNode(t){let e=this.datamanager.getRow(t);e.meta.isTreeNodeClose=!0;let i=this.datamanager.getChildren(t);return i.forEach(n=>{let o=this.datamanager.getRow(n);o.meta.isLeaf||(o.meta.isTreeNodeClose=!0)}),i}closeSingleNode(t){let e=this.getChildrenToHideForNode(t),n=this.bodyRenderer.visibleRowIndices.filter(o=>!e.includes(o)).sort(un);this.showRows(n)}expandAllNodes(){let i=this.datamanager.getRows().filter(s=>!s.meta.isLeaf).map(s=>this.getChildrenToShowForNode(s.meta.rowIndex)).flat(),n=this.bodyRenderer.visibleRowIndices,o=Ff([...i,...n]).sort(un);this.showRows(o)}collapseAllNodes(){let i=this.datamanager.getRows().filter(s=>s.meta.indent===0).map(s=>this.getChildrenToHideForNode(s.meta.rowIndex)).flat(),o=this.bodyRenderer.visibleRowIndices.filter(s=>!i.includes(s)).sort(un);this.showRows(o)}setTreeDepth(t){let e=this.datamanager.getRows(),i=e.filter(a=>a.meta.indent<t),n=e.filter(a=>a.meta.indent>=t),o=n.filter(a=>a.meta.indent>t);n.forEach(a=>{a.meta.isLeaf||(a.meta.isTreeNodeClose=!0)}),i.forEach(a=>{a.meta.isLeaf||(a.meta.isTreeNodeClose=!1)});let s=e.filter(a=>!o.includes(a)).map(a=>a.meta.rowIndex).sort(un);this.showRows(s)}getRow$(t){return de(this.selector(t),this.bodyScrollable)}getTotalRows(){return this.datamanager.getRowCount()}getFirstRowIndex(){return 0}getLastRowIndex(){return this.datamanager.getRowCount()-1}scrollToRow(t){t=+t,this._lastScrollTo=this._lastScrollTo||0;let e=this.getRow$(t);if(de.inViewport(e,this.bodyScrollable))return;let{height:i}=e.getBoundingClientRect(),{top:n,bottom:o}=this.bodyScrollable.getBoundingClientRect(),s=Math.floor((o-n)/i),a=0;t>this._lastScrollTo?a=i*(t+1-s):a=i*(t+1-1),this._lastScrollTo=t,de.scrollTop(this.bodyScrollable,a)}getRowHTML(t,e){let i=Ls(e),n=e.rowIndex;return e.isFilter&&(t=t.map(o=>Object.assign({},o,{content:this.getFilterInput({colIndex:o.colIndex,name:o.name}),isFilter:1,isHeader:void 0,editable:!1})),n="filter"),e.isHeader&&(n="header"),`
            <div class="dt-row dt-row-${n}" ${i}>
                ${t.map(o=>this.cellmanager.getCellHTML(o)).join("")}
            </div>
        `}getFilterInput(t){let e=`title="Filter based on ${t.name||"Index"}"`;return`<input class="dt-filter dt-input" type="text" ${Ls(t)} tabindex="1"
            ${t.colIndex===0?"disabled":e} />`}selector(t){return`.dt-row-${t}`}},Kk=lw(function(r,t){(function(e){r.exports=e()})(function(){return function e(i,n,o){function s(u,d){if(!n[u]){if(!i[u]){var p=typeof ro=="function"&&ro;if(!d&&p)return p(u,!0);if(a)return a(u,!0);var g=new Error("Cannot find module '"+u+"'");throw g.code="MODULE_NOT_FOUND",g}var m=n[u]={exports:{}};i[u][0].call(m.exports,function(k){var y=i[u][1][k];return s(y||k)},m,m.exports,e,i,n,o)}return n[u].exports}for(var a=typeof ro=="function"&&ro,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(e,i,n){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function d(p,g){for(var m=0;m<g.length;m++){var k=g[m];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(p,k.key,k)}}return function(p,g,m){return g&&d(p.prototype,g),m&&d(p,m),p}}();function s(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}var a={width:"100%",height:"100%"},l=function(p){return Number(p)===Number(p)},u=function(){o(d,null,[{key:"create",value:function(g,m){return new d(g,m)}},{key:"mergeStyle",value:function(g,m){for(var k in m)g.style[k]!==m[k]&&(g.style[k]=m[k])}},{key:"getMaxBrowserHeight",value:function(){var g=document.createElement("div"),m=document.createElement("div");d.mergeStyle(g,{position:"absolute",height:"1px",opacity:0}),d.mergeStyle(m,{height:"1e7px"}),g.appendChild(m),document.body.appendChild(g);var k=m.offsetHeight;return document.body.removeChild(g),k}}]);function d(p,g){var m=this;s(this,d),this._config={},this._lastRepaint=null,this._maxElementHeight=d.getMaxBrowserHeight(),this.refresh(p,g);var k=this._config,y=function v(){var x=m._getScrollPosition(),C=m._lastRepaint;if(m._renderAnimationFrame=window.requestAnimationFrame(v),x!==C&&(!C||Math.abs(x-C)>m._averageHeight)){var c=m._renderChunk();m._lastRepaint=x,c!==!1&&typeof k.afterRender=="function"&&k.afterRender()}};y()}return o(d,[{key:"destroy",value:function(){window.cancelAnimationFrame(this._renderAnimationFrame)}},{key:"refresh",value:function(g,m){var k=this;if(Object.assign(this._config,a,m),!g||g.nodeType!==1)throw new Error("HyperList requires a valid DOM Node container");this._element=g;var y=this._config,v=this._scroller||y.scroller||document.createElement(y.scrollerTagName||"tr");if(typeof y.useFragment!="boolean"&&(this._config.useFragment=!0),!y.generate)throw new Error("Missing required `generate` function");if(!l(y.total))throw new Error("Invalid required `total` value, expected number");if(!Array.isArray(y.itemHeight)&&!l(y.itemHeight))throw new Error("\n        Invalid required `itemHeight` value, expected number or array\n      ".trim());l(y.itemHeight)?this._itemHeights=Array(y.total).fill(y.itemHeight):this._itemHeights=y.itemHeight,Object.keys(a).filter(function(h){return h in y}).forEach(function(h){var b=y[h],M=l(b),E=M?!1:b.slice(-1)==="%";if(b&&typeof b!="string"&&typeof b!="number"){var w="Invalid optional `"+h+"`, expected string or number";throw new Error(w)}else M&&(y[h]=b+"px");if(h==="height"){var S=M?b:parseInt(b.replace(/px|%/,""),10);E?k._containerHeight=window.innerHeight*S/100:k._containerHeight=l(b)?b:S}});var x={width:""+y.width,height:""+y.height,overflow:"auto",position:"relative"};d.mergeStyle(g,x);var C=y.itemHeight*y.total,c=this._maxElementHeight;C>c&&console.warn(["HyperList: The maximum element height",c+"px has","been exceeded; please reduce your item height."].join(" "));var _={opacity:"0",position:"absolute",width:"1px",height:C+"px"};d.mergeStyle(v,_),this._scroller||g.appendChild(v),this._scroller=v,this._scrollHeight=this._computeScrollHeight(),this._itemPositions=this._itemPositions||Array(y.total).fill(0),this._computePositions(0),this._renderChunk(this._lastRepaint!==null),typeof y.afterRender=="function"&&y.afterRender()}},{key:"_getRow",value:function(g){var m=this._config,k=m.generate(g),y=k.height;if(y!==void 0&&l(y)?(k=k.element,y!==this._itemHeights&&(this._itemHeights[g]=y,this._computePositions(g),this._scrollHeight=this._computeScrollHeight(g))):y=this._itemHeights[g],!k||k.nodeType!==1)throw new Error("Generator did not return a DOM Node for index: "+g);var v=k.getAttribute("class")||"";k.setAttribute("class",v+" "+(m.rowClassName||"vrow"));var x=this._itemPositions[g];return d.mergeStyle(k,{position:"absolute",top:x+"px"}),k}},{key:"_getScrollPosition",value:function(){var g=this._config;return typeof g.overrideScrollPosition=="function"?g.overrideScrollPosition():this._element.scrollTop}},{key:"_renderChunk",value:function(g){var m=this._config,k=this._element,y=this._getScrollPosition(),v=m.total,x=m.reverse?this._getReverseFrom(y):this._getFrom(y)-1;if((x<0||x-this._screenItemsLen<0)&&(x=0),!g&&this._lastFrom===x)return!1;this._lastFrom=x;var C=x+this._cachedItemsLen;(C>v||C+this._cachedItemsLen>v)&&(C=v);var c=m.useFragment?document.createDocumentFragment():[],_=this._scroller;c[m.useFragment?"appendChild":"push"](_);for(var h=x;h<C;h++){var b=this._getRow(h);c[m.useFragment?"appendChild":"push"](b)}if(m.applyPatch)return m.applyPatch(k,c);k.innerHTML="",k.appendChild(c)}},{key:"_computePositions",value:function(){var g=arguments.length<=0||arguments[0]===void 0?1:arguments[0],m=this._config,k=m.total,y=m.reverse;g<1&&!y&&(g=1);for(var v=g;v<k;v++)y?v===0?this._itemPositions[0]=this._scrollHeight-this._itemHeights[0]:this._itemPositions[v]=this._itemPositions[v-1]-this._itemHeights[v]:this._itemPositions[v]=this._itemHeights[v-1]+this._itemPositions[v-1]}},{key:"_computeScrollHeight",value:function(){var g=this,m=this._config,k=m.total,y=this._itemHeights.reduce(function(_,h){return _+h},0);d.mergeStyle(this._scroller,{opacity:0,position:"absolute",width:"1px",height:y+"px"});var v=this._itemHeights.slice(0).sort(function(_,h){return _-h}),x=Math.floor(k/2),C=k%2===0?(v[x]+v[x-1])/2:v[x],c=this._element.clientHeight?this._element.clientHeight:this._containerHeight;return this._screenItemsLen=Math.ceil(c/C),this._containerHeight=c,this._cachedItemsLen=Math.max(this._cachedItemsLen||0,this._screenItemsLen*3),this._averageHeight=C,m.reverse&&window.requestAnimationFrame(function(){g._element.scrollTop=y}),y}},{key:"_getFrom",value:function(g){for(var m=0;this._itemPositions[m]<g;)m++;return m}},{key:"_getReverseFrom",value:function(g){for(var m=this._config.total-1;m>0&&this._itemPositions[m]<g+this._containerHeight;)m--;return m}}]),d}();n.default=u,i.exports=n.default},{}]},{},[1])(1)})}),Xk=aw(Kk),Rs=class{constructor(t){this.instance=t,this.options=t.options,this.datamanager=t.datamanager,this.rowmanager=t.rowmanager,this.cellmanager=t.cellmanager,this.bodyScrollable=t.bodyScrollable,this.footer=this.instance.footer,this.log=t.log}renderRows(t){if(this.visibleRows=t,this.visibleRowIndices=t.map(o=>o.meta.rowIndex),t.length===0){this.bodyScrollable.innerHTML=this.getNoDataHTML();return}let e=this.datamanager.rowViewOrder.map(o=>this.visibleRowIndices.includes(o)?o:null).filter(o=>o!==null),i=getComputedStyle(this.bodyScrollable),n={width:i.width,height:i.height,itemHeight:this.options.cellHeight,total:t.length,generate:o=>{let s=document.createElement("div"),a=e[o],l=this.datamanager.getRow(a),u=this.rowmanager.getRowHTML(l,l.meta);return s.innerHTML=u,s.children[0]},afterRender:()=>{this.restoreState()}};this.hyperlist?this.hyperlist.refresh(this.bodyScrollable,n):this.hyperlist=new Xk(this.bodyScrollable,n),this.renderFooter()}render(){let t=this.datamanager.getRowsForView();this.renderRows(t),this.instance.setDimensions()}renderFooter(){if(!this.options.showTotalRow)return;let t=this.getTotalRow(),e=this.rowmanager.getRowHTML(t,{isTotalRow:1,rowIndex:"totalRow"});this.footer.innerHTML=e}getTotalRow(){return this.datamanager.getColumns().map(n=>{let o=null;return["_rowIndex","_checkbox"].includes(n.id)&&(o=""),{content:o,isTotalRow:1,colIndex:n.colIndex,column:n}}).map((n,o)=>{if(n.content==="")return n;if(this.options.hooks.columnTotal){let s=this.visibleRows.map(l=>l[o].content),a=this.options.hooks.columnTotal.call(this.instance,s,n);if(a!=null)return n.content=a,n}return n.content=this.visibleRows.reduce((s,a)=>{let l=a[o];return typeof l.content=="number"?(s==null&&(s=0),s+l.content):s},n.content),n})}restoreState(){this.rowmanager.highlightCheckedRows(),this.cellmanager.selectAreaOnClusterChanged(),this.cellmanager.focusCellOnClusterChanged()}showToastMessage(t,e){this.instance.toastMessage.innerHTML=this.getToastMessageHTML(t),e&&setTimeout(()=>{this.clearToastMessage()},e*1e3)}clearToastMessage(){this.instance.toastMessage.innerHTML=""}getNoDataHTML(){return`<div class="dt-scrollable__no-data">${this.options.noDataMessage}</div>`}getToastMessageHTML(t){return`<span class="dt-toast__message">${t}</span>`}},js=class{constructor(t){this.instance=t,ao(this,this.instance,["options","datamanager","columnmanager","header","footer","bodyScrollable","datatableWrapper","getColumn","bodyRenderer"]),this.scopeClass="dt-instance-"+t.constructor.instances,t.datatableWrapper.classList.add(this.scopeClass);let e=document.createElement("style");t.wrapper.insertBefore(e,t.datatableWrapper),this.styleEl=e,this.bindResizeWindow(),this.bindScrollHeader()}get stylesheet(){return this.styleEl.sheet}bindResizeWindow(){this.onWindowResize=this.onWindowResize.bind(this),this.onWindowResize=Yf(this.onWindowResize,300),this.options.layout==="fluid"&&de.on(window,"resize",this.onWindowResize)}bindScrollHeader(){this._settingHeaderPosition=!1,de.on(this.bodyScrollable,"scroll",t=>{this._settingHeaderPosition||(this._settingHeaderPosition=!0,requestAnimationFrame(()=>{let e=-t.target.scrollLeft;de.style(this.header,{transform:`translateX(${e}px)`}),de.style(this.footer,{transform:`translateX(${e}px)`}),this._settingHeaderPosition=!1}))})}onWindowResize(){this.distributeRemainingWidth(),this.refreshColumnWidth(),this.setBodyStyle()}destroy(){this.styleEl.remove(),de.off(window,"resize",this.onWindowResize)}setStyle(t,e){if(t.includes(",")){t.split(",").map(s=>s.trim()).forEach(s=>{this.setStyle(s,e)});return}if(t=t.trim(),!t)return;this._styleRulesMap=this._styleRulesMap||{};let i=this._getPrefixedSelector(t);this._styleRulesMap[i]&&(this.removeStyle(t),e=Object.assign({},this._styleRulesMap[i],e));let n=this._getRuleString(e),o=`${i} { ${n} }`;this._styleRulesMap[i]=e,this.stylesheet.insertRule(o)}removeStyle(t){if(t.includes(",")){t.split(",").map(n=>n.trim()).forEach(n=>{this.removeStyle(n)});return}if(t=t.trim(),!t)return;let e=this._getPrefixedSelector(t),i=Array.from(this.stylesheet.cssRules).findIndex(n=>n.selectorText===e);i!==-1&&this.stylesheet.deleteRule(i)}_getPrefixedSelector(t){return`.${this.scopeClass} ${t}`}_getRuleString(t){return Object.keys(t).map(e=>{let i=e;return e.includes("-")||(i=Vf(e)),`${i}:${t[e]};`}).join("")}setDimensions(){this.setCellHeight(),this.setupMinWidth(),this.setupNaturalColumnWidth(),this.setupColumnWidth(),this.distributeRemainingWidth(),this.setColumnStyle(),this.setBodyStyle()}setCellHeight(){this.setStyle(".dt-cell",{height:this.options.cellHeight+"px"})}setupMinWidth(){de.each(".dt-cell--header",this.header).map(t=>{let{colIndex:e}=de.data(t),i=this.getColumn(e);if(!i.minWidth){let n=de.style(de(".dt-cell__content",t),"width");i.minWidth=n}})}setupNaturalColumnWidth(){!de(".dt-row")||(de.each(".dt-row-header .dt-cell",this.header).map(t=>{let{colIndex:e}=de.data(t),i=this.datamanager.getColumn(e),n=de.style(de(".dt-cell__content",t),"width");typeof n=="number"&&n>=this.options.minimumColumnWidth?i.naturalWidth=n:i.naturalWidth=this.options.minimumColumnWidth}),de.each(".dt-row-0 .dt-cell",this.bodyScrollable).map(t=>{let{colIndex:e}=de.data(t),i=this.datamanager.getColumn(e),n=de.style(de(".dt-cell__content",t),"width");typeof n=="number"&&n>=i.naturalWidth?i.naturalWidth=n:i.naturalWidth=i.naturalWidth}))}setupColumnWidth(){if(this.options.layout==="ratio"){let t=de.style(this.datatableWrapper,"width");if(this.options.serialNoColumn){let n=this.datamanager.getColumnById("_rowIndex");t=t-n.width-1}if(this.options.checkboxColumn){let n=this.datamanager.getColumnById("_checkbox");t=t-n.width-1}let e=this.datamanager.getColumns().map(n=>n.id==="_rowIndex"||n.id==="_checkbox"?0:(n.width||(n.width=1),n.ratioWidth=parseInt(n.width,10),n.ratioWidth)).reduce((n,o)=>n+o),i=t/e;this.datamanager.getColumns().map(n=>{n.id==="_rowIndex"||n.id==="_checkbox"||(n.width=Math.floor(i*n.ratioWidth)-1)})}else this.datamanager.getColumns().map(t=>{t.width||(t.width=t.naturalWidth),t.id==="_rowIndex"&&(t.width=this.getRowIndexColumnWidth()),t.width<this.options.minimumColumnWidth&&(t.width=this.options.minimumColumnWidth)})}distributeRemainingWidth(){if(this.options.layout!=="fluid")return;let t=de.style(this.instance.datatableWrapper,"width"),e=de(".dt-row",this.bodyScrollable),i=t;if(e)i=de.style(e,"width");else{let s=de(".dt-row",this.instance.header);i=Array.from(s.children).map(l=>l.offsetWidth).reduce((l,u)=>l+u,0)}let n=this.datamanager.getColumns().filter(s=>s.resizable),o=(t-i)/n.length;n.map(s=>{let a=de.style(this.getColumnHeaderElement(s.colIndex),"width"),l=Math.floor(a+o)-2;this.datamanager.updateColumn(s.colIndex,{width:l})})}setColumnStyle(){this.datamanager.getColumns().map(t=>{t.align||(t.align="left"),["left","center","right"].includes(t.align)||(t.align="left"),this.setStyle(`.dt-cell--col-${t.colIndex}`,{"text-align":t.align}),this.columnmanager.setColumnHeaderWidth(t.colIndex),this.columnmanager.setColumnWidth(t.colIndex)})}refreshColumnWidth(){this.datamanager.getColumns().map(t=>{this.columnmanager.setColumnHeaderWidth(t.colIndex),this.columnmanager.setColumnWidth(t.colIndex)})}setBodyStyle(){let t=de.style(this.datatableWrapper,"width"),e=de(".dt-row",this.bodyScrollable);if(!e)return;let i=de.style(e,"width"),n=t>i?i+10:t;de.style(this.bodyScrollable,{width:n+"px"}),de.removeStyle(this.bodyScrollable,"height");let o=de.getStyle(this.bodyScrollable,"height"),s=(this.bodyRenderer.hyperlist||{})._scrollHeight||1/0,a=de.hasHorizontalOverflow(this.bodyScrollable),l;s<o&&(l=s,a&&(l+=de.scrollbarSize()),de.style(this.bodyScrollable,{height:l+"px"})),this.bodyScrollable.scrollHeight-this.bodyScrollable.offsetHeight<de.scrollbarSize()&&de.style(this.bodyScrollable,{overflowY:"hidden"}),this.options.layout==="fluid"&&de.style(this.bodyScrollable,{overflowX:"hidden"})}getColumnHeaderElement(t){return t=+t,t<0?null:de(`.dt-cell--col-${t}`,this.header)}getRowIndexColumnWidth(){let t=this.datamanager.getRowCount(),e=22;return de.measureTextWidth(t+"")+e}},Jk={13:"enter",91:"meta",16:"shift",17:"ctrl",18:"alt",37:"left",38:"up",39:"right",40:"down",9:"tab",27:"esc",67:"c",70:"f",86:"v"},Ns=class{constructor(t){this.listeners={},de.on(t,"keydown",this.handler.bind(this))}handler(t){let e=Jk[t.keyCode];t.shiftKey&&e!=="shift"&&(e="shift+"+e),(t.ctrlKey&&e!=="ctrl"||t.metaKey&&e!=="meta")&&(e="ctrl+"+e);let i=this.listeners[e];if(i&&i.length>0)for(let n of i){let o=n(t);(o===void 0||o===!0)&&t.preventDefault()}}on(t,e){t.split(",").map(n=>n.trim()).map(n=>{this.listeners[n]=this.listeners[n]||[],this.listeners[n].push(e)})}},Zk={"Sort Ascending":"Sort Ascending","Sort Descending":"Sort Descending","Reset sorting":"Reset sorting","Remove column":"Remove column","No Data":"No Data","{count} cells copied":{1:"{count} cell copied",default:"{count} cells copied"},"{count} rows selected":{1:"{count} row selected",default:"{count} rows selected"}},Qk={"Sort Ascending":"Aufsteigend sortieren","Sort Descending":"Absteigend sortieren","Reset sorting":"Sortierung zur\xFCcksetzen","Remove column":"Spalte entfernen","No Data":"Keine Daten","{count} cells copied":{1:"{count} Zelle kopiert",default:"{count} Zellen kopiert"},"{count} rows selected":{1:"{count} Zeile ausgew\xE4hlt",default:"{count} Zeilen ausgew\xE4hlt"}},ex={"Sort Ascending":"Trier par ordre croissant","Sort Descending":"Trier par ordre d\xE9croissant","Reset sorting":"R\xE9initialiser le tri","Remove column":"Supprimer colonne","No Data":"Pas de donn\xE9es","{count} cells copied":{1:"{count} cellule copi\xE9e",default:"{count} cellules copi\xE9es"},"{count} rows selected":{1:"{count} ligne s\xE9lectionn\xE9e",default:"{count} lignes s\xE9lectionn\xE9es"}},tx={"Sort Ascending":"Ordinamento ascendente","Sort Descending":"Ordinamento decrescente","Reset sorting":"Azzeramento ordinamento","Remove column":"Rimuovi colonna","No Data":"Nessun dato","{count} cells copied":{1:"Copiato {count} cella",default:"{count} celle copiate"},"{count} rows selected":{1:"{count} linea selezionata",default:"{count} linee selezionate"}};function rx(){return{en:Zk,de:Qk,fr:ex,it:tx}}var Ds=class{constructor(t){this.language=t,this.translations=rx()}addTranslations(t){this.translations=Object.assign(this.translations,t)}translate(t,e){let i=this.translations[this.language]&&this.translations[this.language][t]||t;return typeof i=="object"&&(i=e&&e.count?this.getPluralizedTranslation(i,e.count):t),Yk(i,e||{})}getPluralizedTranslation(t,e){return t[e]||t.default}};function ix(r,t,e){let i=[];if(Object.keys(t).length===0)return r.map(n=>n.meta.rowIndex);for(let n in t){let o=t[n],a=(i.length?i.map(d=>r[d]):r).map(d=>d[n]),l=ox(o),u=nx(r,e,l);u?i=u(l.text,a):i=a.map(d=>d.rowIndex)}return i}function nx(r,t,e){let i=l=>{let u=oi.getCustomCellFormatter(l),d=r[l.rowIndex];return t&&t.data&&t.data.length&&(d=t.data[l.rowIndex]),u&&l.content?(l.html=u(l.content,r[l.rowIndex],l.column,d,e),zf(l.html)):l.content||""},n=l=>String(zf(l.html||"")||i(l)).toLowerCase(),o=l=>parseFloat(l.content),s=(l,u)=>{if(l.column.compareValue){let p=l.column.compareValue(l,u);if(p&&Array.isArray(p))return p}let d=o(l);return isNaN(d)?[n(l),u]:[d,u]};return{contains(l,u){return u.filter(d=>{let p=n(d),g=(l||"").toLowerCase();return!g||p.includes(g)}).map(d=>d.rowIndex)},greaterThan(l,u){return u.filter(d=>{let[p,g]=s(d,l);return p>g}).map(d=>d.rowIndex)},lessThan(l,u){return u.filter(d=>{let[p,g]=s(d,l);return p<g}).map(d=>d.rowIndex)},equals(l,u){return u.filter(d=>parseFloat(d.content)===l).map(d=>d.rowIndex)},notEquals(l,u){return u.filter(d=>parseFloat(d.content)!==l).map(d=>d.rowIndex)},range(l,u){return u.filter(d=>{let p=s(d,l[0]),g=s(d,l[1]),m=p[0];return m>=p[1]&&m<=g[1]}).map(d=>d.rowIndex)},containsNumber(l,u){return u.filter(d=>{let p=parseFloat(l,10),g=l,m=o(d),k=n(d);return p===m||k.includes(g)}).map(d=>d.rowIndex)}}[e.type]}function ox(r=""){if(r.length===0)return{};let t=r;return[">","<","="].includes(t[0])?t=r.slice(1):t.startsWith("!=")&&(t=r.slice(2)),r.startsWith(">")&&t?{type:"greaterThan",text:t.trim()}:r.startsWith("<")&&t?{type:"lessThan",text:t.trim()}:r.startsWith("=")&&fn(t)?{type:"equals",text:Number(r.slice(1).trim())}:fn(t)?{type:"containsNumber",text:t}:r.startsWith("!=")&&fn(t)?{type:"notEquals",text:Number(r.slice(2).trim())}:r.split(":").length===2&&r.split(":").every(e=>fn(e.trim()))?(t=r.split(":"),{type:"range",text:t.map(e=>e.trim())}):{type:"contains",text:t.toLowerCase()}}function sx(r){return{columns:[],data:[],dropdownButton:As.chevronDown,headerDropdown:[{label:r.translate("Sort Ascending"),action:function(t){this.sortColumn(t.colIndex,"asc")}},{label:r.translate("Sort Descending"),action:function(t){this.sortColumn(t.colIndex,"desc")}},{label:r.translate("Reset sorting"),action:function(t){this.sortColumn(t.colIndex,"none")}},{label:r.translate("Remove column"),action:function(t){this.removeColumn(t.colIndex)}}],events:{onRemoveColumn(t){},onSwitchColumn(t,e){},onSortColumn(t){},onCheckRow(t){},onDestroy(){}},hooks:{columnTotal:null},sortIndicator:{asc:"\u2191",desc:"\u2193",none:""},overrideComponents:{},filterRows:ix,freezeMessage:"",getEditor:null,serialNoColumn:!0,checkboxColumn:!1,clusterize:!0,logs:!1,layout:"fixed",noDataMessage:r.translate("No Data"),cellHeight:40,minimumColumnWidth:30,inlineFilters:!1,treeView:!1,checkedRowStatus:!0,dynamicRowHeight:!1,pasteFromClipboard:!1,showTotalRow:!1,direction:"ltr",disableReorderColumn:!1}}var ax={DataManager:Bs,CellManager:oi,ColumnManager:Is,RowManager:Ps,BodyRenderer:Rs,Style:js,Keyboard:Ns},Pr=class{constructor(t,e){if(Pr.instances++,typeof t=="string"&&(t=document.querySelector(t)),this.wrapper=t,!(this.wrapper instanceof HTMLElement))throw new Error("Invalid argument given for `wrapper`");this.initializeTranslations(e),this.setDefaultOptions(),this.buildOptions(e),this.prepare(),this.initializeComponents(),this.options.data&&(this.refresh(),this.columnmanager.applyDefaultSortOrder())}initializeTranslations(t){this.language=t.language||"en",this.translationManager=new Ds(this.language),t.translations&&this.translationManager.addTranslations(t.translations)}setDefaultOptions(){this.DEFAULT_OPTIONS=sx(this)}buildOptions(t){this.options=this.options||{},this.options=Object.assign({},this.DEFAULT_OPTIONS,this.options||{},t),t.headerDropdown=t.headerDropdown||[],this.options.headerDropdown=[...this.DEFAULT_OPTIONS.headerDropdown,...t.headerDropdown],this.events=Object.assign({},this.DEFAULT_OPTIONS.events,this.options.events||{},t.events||{}),this.fireEvent=this.fireEvent.bind(this)}prepare(){this.prepareDom(),this.unfreeze()}initializeComponents(){let t=Object.assign({},ax,this.options.overrideComponents),{Style:e,Keyboard:i,DataManager:n,RowManager:o,ColumnManager:s,CellManager:a,BodyRenderer:l}=t;this.style=new e(this),this.keyboard=new i(this.wrapper),this.datamanager=new n(this.options),this.rowmanager=new o(this),this.columnmanager=new s(this),this.cellmanager=new a(this),this.bodyRenderer=new l(this)}prepareDom(){this.wrapper.innerHTML=`
            <div class="datatable" dir="${this.options.direction}">
                <div class="dt-header"></div>
                <div class="dt-scrollable"></div>
                <div class="dt-footer"></div>
                <div class="dt-freeze">
                    <span class="dt-freeze__message">
                        ${this.options.freezeMessage}
                    </span>
                </div>
                <div class="dt-toast"></div>
                <div class="dt-dropdown-container"></div>
                <textarea class="dt-paste-target"></textarea>
            </div>
        `,this.datatableWrapper=de(".datatable",this.wrapper),this.header=de(".dt-header",this.wrapper),this.footer=de(".dt-footer",this.wrapper),this.bodyScrollable=de(".dt-scrollable",this.wrapper),this.freezeContainer=de(".dt-freeze",this.wrapper),this.toastMessage=de(".dt-toast",this.wrapper),this.pasteTarget=de(".dt-paste-target",this.wrapper),this.dropdownContainer=de(".dt-dropdown-container",this.wrapper)}refresh(t,e){this.datamanager.init(t,e),this.render(),this.setDimensions()}destroy(){this.wrapper.innerHTML="",this.style.destroy(),this.fireEvent("onDestroy")}appendRows(t){this.datamanager.appendRows(t),this.rowmanager.refreshRows()}refreshRow(t,e){this.rowmanager.refreshRow(t,e)}render(){this.renderHeader(),this.renderBody()}renderHeader(){this.columnmanager.renderHeader()}renderBody(){this.bodyRenderer.render()}setDimensions(){this.style.setDimensions()}showToastMessage(t,e){this.bodyRenderer.showToastMessage(t,e)}clearToastMessage(){this.bodyRenderer.clearToastMessage()}getColumn(t){return this.datamanager.getColumn(t)}getColumns(){return this.datamanager.getColumns()}getRows(){return this.datamanager.getRows()}getCell(t,e){return this.datamanager.getCell(t,e)}getColumnHeaderElement(t){return this.columnmanager.getColumnHeaderElement(t)}getViewportHeight(){return this.viewportHeight||(this.viewportHeight=de.style(this.bodyScrollable,"height")),this.viewportHeight}sortColumn(t,e){this.columnmanager.sortColumn(t,e)}removeColumn(t){this.columnmanager.removeColumn(t)}scrollToLastColumn(){this.datatableWrapper.scrollLeft=9999}freeze(){de.style(this.freezeContainer,{display:""})}unfreeze(){de.style(this.freezeContainer,{display:"none"})}updateOptions(t){this.buildOptions(t)}fireEvent(t,...e){let i=[...this._internalEventHandlers[t]||[],this.events[t]].filter(Boolean);for(let n of i)n.apply(this,e)}on(t,e){this._internalEventHandlers=this._internalEventHandlers||{},this._internalEventHandlers[t]=this._internalEventHandlers[t]||[],this._internalEventHandlers[t].push(e)}log(){this.options.logs&&console.log.apply(console,arguments)}translate(t,e){return this.translationManager.translate(t,e)}};Pr.instances=0;var lx="frappe-datatable",cx="0.0.0-development",ux="A modern datatable library for the web",dx="dist/frappe-datatable.cjs.js",fx="dist/frappe-datatable.min.js",px="dist/frappe-datatable.min.js",hx={start:"yarn run dev",build:"rollup -c && NODE_ENV=production rollup -c",dev:"rollup -c -w","cy:server":"http-server -p 8989","cy:open":"cypress open","cy:run":"cypress run",test:"start-server-and-test cy:server http://localhost:8989 cy:run","test-local":"start-server-and-test cy:server http://localhost:8989 cy:open","travis-deploy-once":"travis-deploy-once","semantic-release":"semantic-release",lint:"eslint src","lint-and-build":"yarn lint && yarn build",commit:"npx git-cz"},_x=["dist","src"],gx={autoprefixer:"^9.0.0",chai:"3.5.0",cypress:"^9.2.0","cz-conventional-changelog":"^2.1.0",deepmerge:"^2.0.1",eslint:"^5.0.1","eslint-config-airbnb":"^16.1.0","eslint-config-airbnb-base":"^12.1.0","eslint-plugin-import":"^2.11.0","http-server":"^0.11.1",mocha:"3.3.0","postcss-custom-properties":"^7.0.0","postcss-nested":"^3.0.0",rollup:"^0.59.4","rollup-plugin-commonjs":"^8.3.0","rollup-plugin-eslint":"^4.0.0","rollup-plugin-json":"^2.3.0","rollup-plugin-node-resolve":"^3.0.3","rollup-plugin-postcss":"^1.2.8","rollup-plugin-uglify-es":"^0.0.1","semantic-release":"^17.1.1","start-server-and-test":"^1.4.1","travis-deploy-once":"^5.0.1"},mx={type:"git",url:"https://github.com/frappe/datatable.git"},vx=["datatable","data","grid","table"],bx="Faris Ansari",yx="MIT",wx={url:"https://github.com/frappe/datatable/issues"},kx="https://frappe.io/datatable",xx={hyperlist:"^1.0.0-beta",lodash:"^4.17.5",sortablejs:"^1.7.0"},Cx={commitizen:{path:"cz-conventional-changelog"}},Sx={name:lx,version:cx,description:ux,main:dx,unpkg:fx,jsdelivr:px,scripts:hx,files:_x,devDependencies:gx,repository:mx,keywords:vx,author:bx,license:yx,bugs:wx,homepage:kx,dependencies:xx,config:Cx};Pr.__version__=Sx.version;Gf.exports=Pr});var Jf=_e((lo,zs)=>{(function(r,t){typeof lo=="object"&&typeof zs=="object"?zs.exports=t():typeof define=="function"&&define.amd?define([],t):typeof lo=="object"?lo.Driver=t():r.Driver=t()})(window,function(){return function(r){var t={};function e(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return r[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=r,e.c=t,e.d=function(i,n,o){e.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:o})},e.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,n){if(1&n&&(i=e(i)),8&n||4&n&&typeof i=="object"&&i&&i.__esModule)return i;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:i}),2&n&&typeof i!="string")for(var s in i)e.d(o,s,function(a){return i[a]}.bind(null,s));return o},e.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(n,"a",n),n},e.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},e.p="/dist/",e(e.s=57)}([function(r,t,e){var i=e(2),n=e(11),o=e(4),s=e(13),a=e(22),l=function(u,d,p){var g,m,k,y,v=u&l.F,x=u&l.G,C=u&l.S,c=u&l.P,_=u&l.B,h=x?i:C?i[d]||(i[d]={}):(i[d]||{}).prototype,b=x?n:n[d]||(n[d]={}),M=b.prototype||(b.prototype={});for(g in x&&(p=d),p)k=((m=!v&&h&&h[g]!==void 0)?h:p)[g],y=_&&m?a(k,i):c&&typeof k=="function"?a(Function.call,k):k,h&&s(h,g,k,u&l.U),b[g]!=k&&o(b,g,y),c&&M[g]!=k&&(M[g]=k)};i.core=n,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,r.exports=l},function(r,t,e){var i=e(17)("wks"),n=e(14),o=e(2).Symbol,s=typeof o=="function";(r.exports=function(a){return i[a]||(i[a]=s&&o[a]||(s?o:n)("Symbol."+a))}).store=i},function(r,t){var e=r.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=e)},function(r,t){r.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}},function(r,t,e){var i=e(5),n=e(16);r.exports=e(6)?function(o,s,a){return i.f(o,s,n(1,a))}:function(o,s,a){return o[s]=a,o}},function(r,t,e){var i=e(12),n=e(35),o=e(21),s=Object.defineProperty;t.f=e(6)?Object.defineProperty:function(a,l,u){if(i(a),l=o(l,!0),i(u),n)try{return s(a,l,u)}catch(d){}if("get"in u||"set"in u)throw TypeError("Accessors not supported!");return"value"in u&&(a[l]=u.value),a}},function(r,t,e){r.exports=!e(7)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(r,t){r.exports=function(e){try{return!!e()}catch(i){return!0}}},function(r,t){var e={}.hasOwnProperty;r.exports=function(i,n){return e.call(i,n)}},function(r,t,e){var i=e(39),n=e(24);r.exports=function(o){return i(n(o))}},function(r,t,e){var i=e(0);i(i.S+i.F*!e(6),"Object",{defineProperty:e(5).f})},function(r,t){var e=r.exports={version:"2.6.9"};typeof __e=="number"&&(__e=e)},function(r,t,e){var i=e(3);r.exports=function(n){if(!i(n))throw TypeError(n+" is not an object!");return n}},function(r,t,e){var i=e(2),n=e(4),o=e(8),s=e(14)("src"),a=e(59),l=(""+a).split("toString");e(11).inspectSource=function(u){return a.call(u)},(r.exports=function(u,d,p,g){var m=typeof p=="function";m&&(o(p,"name")||n(p,"name",d)),u[d]!==p&&(m&&(o(p,s)||n(p,s,u[d]?""+u[d]:l.join(String(d)))),u===i?u[d]=p:g?u[d]?u[d]=p:n(u,d,p):(delete u[d],n(u,d,p)))})(Function.prototype,"toString",function(){return typeof this=="function"&&this[s]||a.call(this)})},function(r,t){var e=0,i=Math.random();r.exports=function(n){return"Symbol(".concat(n===void 0?"":n,")_",(++e+i).toString(36))}},function(r,t,e){var i=e(45),n=e(28);r.exports=Object.keys||function(o){return i(o,n)}},function(r,t){r.exports=function(e,i){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:i}}},function(r,t,e){var i=e(11),n=e(2),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(r.exports=function(s,a){return o[s]||(o[s]=a!==void 0?a:{})})("versions",[]).push({version:i.version,mode:e(18)?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})},function(r,t){r.exports=!1},function(r,t,e){var i=e(24);r.exports=function(n){return Object(i(n))}},function(r,t,e){"use strict";var i=e(2),n=e(8),o=e(6),s=e(0),a=e(13),l=e(62).KEY,u=e(7),d=e(17),p=e(26),g=e(14),m=e(1),k=e(43),y=e(44),v=e(63),x=e(42),C=e(12),c=e(3),_=e(19),h=e(9),b=e(21),M=e(16),E=e(30),w=e(67),S=e(49),O=e(47),B=e(5),A=e(15),R=S.f,T=B.f,L=w.f,P=i.Symbol,D=i.JSON,H=D&&D.stringify,j=m("_hidden"),F=m("toPrimitive"),K={}.propertyIsEnumerable,q=d("symbol-registry"),W=d("symbols"),Y=d("op-symbols"),Z=Object.prototype,X=typeof P=="function"&&!!O.f,Q=i.QObject,ue=!Q||!Q.prototype||!Q.prototype.findChild,ce=o&&u(function(){return E(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a!=7})?function(le,he,ye){var Ae=R(Z,he);Ae&&delete Z[he],T(le,he,ye),Ae&&le!==Z&&T(Z,he,Ae)}:T,ne=function(le){var he=W[le]=E(P.prototype);return he._k=le,he},ge=X&&typeof P.iterator=="symbol"?function(le){return typeof le=="symbol"}:function(le){return le instanceof P},re=function(le,he,ye){return le===Z&&re(Y,he,ye),C(le),he=b(he,!0),C(ye),n(W,he)?(ye.enumerable?(n(le,j)&&le[j][he]&&(le[j][he]=!1),ye=E(ye,{enumerable:M(0,!1)})):(n(le,j)||T(le,j,M(1,{})),le[j][he]=!0),ce(le,he,ye)):T(le,he,ye)},pe=function(le,he){C(le);for(var ye,Ae=v(he=h(he)),qe=0,nt=Ae.length;nt>qe;)re(le,ye=Ae[qe++],he[ye]);return le},Ce=function(le){var he=K.call(this,le=b(le,!0));return!(this===Z&&n(W,le)&&!n(Y,le))&&(!(he||!n(this,le)||!n(W,le)||n(this,j)&&this[j][le])||he)},be=function(le,he){if(le=h(le),he=b(he,!0),le!==Z||!n(W,he)||n(Y,he)){var ye=R(le,he);return!ye||!n(W,he)||n(le,j)&&le[j][he]||(ye.enumerable=!0),ye}},xe=function(le){for(var he,ye=L(h(le)),Ae=[],qe=0;ye.length>qe;)n(W,he=ye[qe++])||he==j||he==l||Ae.push(he);return Ae},Re=function(le){for(var he,ye=le===Z,Ae=L(ye?Y:h(le)),qe=[],nt=0;Ae.length>nt;)!n(W,he=Ae[nt++])||ye&&!n(Z,he)||qe.push(W[he]);return qe};X||(a((P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var le=g(arguments.length>0?arguments[0]:void 0),he=function(ye){this===Z&&he.call(Y,ye),n(this,j)&&n(this[j],le)&&(this[j][le]=!1),ce(this,le,M(1,ye))};return o&&ue&&ce(Z,le,{configurable:!0,set:he}),ne(le)}).prototype,"toString",function(){return this._k}),S.f=be,B.f=re,e(48).f=w.f=xe,e(29).f=Ce,O.f=Re,o&&!e(18)&&a(Z,"propertyIsEnumerable",Ce,!0),k.f=function(le){return ne(m(le))}),s(s.G+s.W+s.F*!X,{Symbol:P});for(var je="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Be=0;je.length>Be;)m(je[Be++]);for(var ze=A(m.store),Ne=0;ze.length>Ne;)y(ze[Ne++]);s(s.S+s.F*!X,"Symbol",{for:function(le){return n(q,le+="")?q[le]:q[le]=P(le)},keyFor:function(le){if(!ge(le))throw TypeError(le+" is not a symbol!");for(var he in q)if(q[he]===le)return he},useSetter:function(){ue=!0},useSimple:function(){ue=!1}}),s(s.S+s.F*!X,"Object",{create:function(le,he){return he===void 0?E(le):pe(E(le),he)},defineProperty:re,defineProperties:pe,getOwnPropertyDescriptor:be,getOwnPropertyNames:xe,getOwnPropertySymbols:Re});var De=u(function(){O.f(1)});s(s.S+s.F*De,"Object",{getOwnPropertySymbols:function(le){return O.f(_(le))}}),D&&s(s.S+s.F*(!X||u(function(){var le=P();return H([le])!="[null]"||H({a:le})!="{}"||H(Object(le))!="{}"})),"JSON",{stringify:function(le){for(var he,ye,Ae=[le],qe=1;arguments.length>qe;)Ae.push(arguments[qe++]);if(ye=he=Ae[1],(c(he)||le!==void 0)&&!ge(le))return x(he)||(he=function(nt,st){if(typeof ye=="function"&&(st=ye.call(this,nt,st)),!ge(st))return st}),Ae[1]=he,H.apply(D,Ae)}}),P.prototype[F]||e(4)(P.prototype,F,P.prototype.valueOf),p(P,"Symbol"),p(Math,"Math",!0),p(i.JSON,"JSON",!0)},function(r,t,e){var i=e(3);r.exports=function(n,o){if(!i(n))return n;var s,a;if(o&&typeof(s=n.toString)=="function"&&!i(a=s.call(n))||typeof(s=n.valueOf)=="function"&&!i(a=s.call(n))||!o&&typeof(s=n.toString)=="function"&&!i(a=s.call(n)))return a;throw TypeError("Can't convert object to primitive value")}},function(r,t,e){var i=e(37);r.exports=function(n,o,s){if(i(n),o===void 0)return n;switch(s){case 1:return function(a){return n.call(o,a)};case 2:return function(a,l){return n.call(o,a,l)};case 3:return function(a,l,u){return n.call(o,a,l,u)}}return function(){return n.apply(o,arguments)}}},function(r,t){var e={}.toString;r.exports=function(i){return e.call(i).slice(8,-1)}},function(r,t){r.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}},function(r,t,e){"use strict";var i=e(7);r.exports=function(n,o){return!!n&&i(function(){o?n.call(null,function(){},1):n.call(null)})}},function(r,t,e){var i=e(5).f,n=e(8),o=e(1)("toStringTag");r.exports=function(s,a,l){s&&!n(s=l?s:s.prototype,o)&&i(s,o,{configurable:!0,value:a})}},function(r,t,e){var i=e(17)("keys"),n=e(14);r.exports=function(o){return i[o]||(i[o]=n(o))}},function(r,t){r.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(r,t){t.f={}.propertyIsEnumerable},function(r,t,e){var i=e(12),n=e(65),o=e(28),s=e(27)("IE_PROTO"),a=function(){},l=function(){var u,d=e(36)("iframe"),p=o.length;for(d.style.display="none",e(66).appendChild(d),d.src="javascript:",(u=d.contentWindow.document).open(),u.write("<script>document.F=Object<\/script>"),u.close(),l=u.F;p--;)delete l.prototype[o[p]];return l()};r.exports=Object.create||function(u,d){var p;return u!==null?(a.prototype=i(u),p=new a,a.prototype=null,p[s]=u):p=l(),d===void 0?p:n(p,d)}},function(r,t,e){"use strict";var i=e(68),n=e(69),o=e(32),s=e(9);r.exports=e(70)(Array,"Array",function(a,l){this._t=s(a),this._i=0,this._k=l},function(){var a=this._t,l=this._k,u=this._i++;return!a||u>=a.length?(this._t=void 0,n(1)):n(0,l=="keys"?u:l=="values"?a[u]:[u,a[u]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(r,t){r.exports={}},function(r,t,e){e(44)("asyncIterator")},function(r,t,e){"use strict";var i=e(0),n=e(38)(0),o=e(25)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(s){return n(this,s,arguments[1])}})},function(r,t,e){r.exports=!e(6)&&!e(7)(function(){return Object.defineProperty(e(36)("div"),"a",{get:function(){return 7}}).a!=7})},function(r,t,e){var i=e(3),n=e(2).document,o=i(n)&&i(n.createElement);r.exports=function(s){return o?n.createElement(s):{}}},function(r,t){r.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(r,t,e){var i=e(22),n=e(39),o=e(19),s=e(40),a=e(60);r.exports=function(l,u){var d=l==1,p=l==2,g=l==3,m=l==4,k=l==6,y=l==5||k,v=u||a;return function(x,C,c){for(var _,h,b=o(x),M=n(b),E=i(C,c,3),w=s(M.length),S=0,O=d?v(x,w):p?v(x,0):void 0;w>S;S++)if((y||S in M)&&(h=E(_=M[S],S,b),l)){if(d)O[S]=h;else if(h)switch(l){case 3:return!0;case 5:return _;case 6:return S;case 2:O.push(_)}else if(m)return!1}return k?-1:g||m?m:O}}},function(r,t,e){var i=e(23);r.exports=Object("z").propertyIsEnumerable(0)?Object:function(n){return i(n)=="String"?n.split(""):Object(n)}},function(r,t,e){var i=e(41),n=Math.min;r.exports=function(o){return o>0?n(i(o),9007199254740991):0}},function(r,t){var e=Math.ceil,i=Math.floor;r.exports=function(n){return isNaN(n=+n)?0:(n>0?i:e)(n)}},function(r,t,e){var i=e(23);r.exports=Array.isArray||function(n){return i(n)=="Array"}},function(r,t,e){t.f=e(1)},function(r,t,e){var i=e(2),n=e(11),o=e(18),s=e(43),a=e(5).f;r.exports=function(l){var u=n.Symbol||(n.Symbol=o?{}:i.Symbol||{});l.charAt(0)=="_"||l in u||a(u,l,{value:s.f(l)})}},function(r,t,e){var i=e(8),n=e(9),o=e(46)(!1),s=e(27)("IE_PROTO");r.exports=function(a,l){var u,d=n(a),p=0,g=[];for(u in d)u!=s&&i(d,u)&&g.push(u);for(;l.length>p;)i(d,u=l[p++])&&(~o(g,u)||g.push(u));return g}},function(r,t,e){var i=e(9),n=e(40),o=e(64);r.exports=function(s){return function(a,l,u){var d,p=i(a),g=n(p.length),m=o(u,g);if(s&&l!=l){for(;g>m;)if((d=p[m++])!=d)return!0}else for(;g>m;m++)if((s||m in p)&&p[m]===l)return s||m||0;return!s&&-1}}},function(r,t){t.f=Object.getOwnPropertySymbols},function(r,t,e){var i=e(45),n=e(28).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(o){return i(o,n)}},function(r,t,e){var i=e(29),n=e(16),o=e(9),s=e(21),a=e(8),l=e(35),u=Object.getOwnPropertyDescriptor;t.f=e(6)?u:function(d,p){if(d=o(d),p=s(p,!0),l)try{return u(d,p)}catch(g){}if(a(d,p))return n(!i.f.call(d,p),d[p])}},function(r,t,e){for(var i=e(31),n=e(15),o=e(13),s=e(2),a=e(4),l=e(32),u=e(1),d=u("iterator"),p=u("toStringTag"),g=l.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},k=n(m),y=0;y<k.length;y++){var v,x=k[y],C=m[x],c=s[x],_=c&&c.prototype;if(_&&(_[d]||a(_,d,g),_[p]||a(_,p,x),l[x]=g,C))for(v in i)_[v]||o(_,v,i[v],!0)}},function(r,t,e){"use strict";var i=e(73),n={};n[e(1)("toStringTag")]="z",n+""!="[object z]"&&e(13)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(r,t,e){var i=e(19),n=e(15);e(74)("keys",function(){return function(o){return n(i(o))}})},function(r,t,e){"use strict";var i=e(0),n=e(38)(2);i(i.P+i.F*!e(25)([].filter,!0),"Array",{filter:function(o){return n(this,o,arguments[1])}})},function(r,t,e){var i=e(0);i(i.P,"Function",{bind:e(75)})},function(r,t,e){var i=e(0);i(i.S,"Object",{create:e(30)})},function(r,t,e){var i=e(0);i(i.S,"Object",{setPrototypeOf:e(81).set})},function(r,t,e){e(58),r.exports=e(82)},function(r,t){},function(r,t,e){r.exports=e(17)("native-function-to-string",Function.toString)},function(r,t,e){var i=e(61);r.exports=function(n,o){return new(i(n))(o)}},function(r,t,e){var i=e(3),n=e(42),o=e(1)("species");r.exports=function(s){var a;return n(s)&&(typeof(a=s.constructor)!="function"||a!==Array&&!n(a.prototype)||(a=void 0),i(a)&&(a=a[o])===null&&(a=void 0)),a===void 0?Array:a}},function(r,t,e){var i=e(14)("meta"),n=e(3),o=e(8),s=e(5).f,a=0,l=Object.isExtensible||function(){return!0},u=!e(7)(function(){return l(Object.preventExtensions({}))}),d=function(g){s(g,i,{value:{i:"O"+ ++a,w:{}}})},p=r.exports={KEY:i,NEED:!1,fastKey:function(g,m){if(!n(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!o(g,i)){if(!l(g))return"F";if(!m)return"E";d(g)}return g[i].i},getWeak:function(g,m){if(!o(g,i)){if(!l(g))return!0;if(!m)return!1;d(g)}return g[i].w},onFreeze:function(g){return u&&p.NEED&&l(g)&&!o(g,i)&&d(g),g}}},function(r,t,e){var i=e(15),n=e(47),o=e(29);r.exports=function(s){var a=i(s),l=n.f;if(l)for(var u,d=l(s),p=o.f,g=0;d.length>g;)p.call(s,u=d[g++])&&a.push(u);return a}},function(r,t,e){var i=e(41),n=Math.max,o=Math.min;r.exports=function(s,a){return(s=i(s))<0?n(s+a,0):o(s,a)}},function(r,t,e){var i=e(5),n=e(12),o=e(15);r.exports=e(6)?Object.defineProperties:function(s,a){n(s);for(var l,u=o(a),d=u.length,p=0;d>p;)i.f(s,l=u[p++],a[l]);return s}},function(r,t,e){var i=e(2).document;r.exports=i&&i.documentElement},function(r,t,e){var i=e(9),n=e(48).f,o={}.toString,s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r.exports.f=function(a){return s&&o.call(a)=="[object Window]"?function(l){try{return n(l)}catch(u){return s.slice()}}(a):n(i(a))}},function(r,t,e){var i=e(1)("unscopables"),n=Array.prototype;n[i]==null&&e(4)(n,i,{}),r.exports=function(o){n[i][o]=!0}},function(r,t){r.exports=function(e,i){return{value:i,done:!!e}}},function(r,t,e){"use strict";var i=e(18),n=e(0),o=e(13),s=e(4),a=e(32),l=e(71),u=e(26),d=e(72),p=e(1)("iterator"),g=!([].keys&&"next"in[].keys()),m=function(){return this};r.exports=function(k,y,v,x,C,c,_){l(v,y,x);var h,b,M,E=function(P){if(!g&&P in B)return B[P];switch(P){case"keys":case"values":return function(){return new v(this,P)}}return function(){return new v(this,P)}},w=y+" Iterator",S=C=="values",O=!1,B=k.prototype,A=B[p]||B["@@iterator"]||C&&B[C],R=A||E(C),T=C?S?E("entries"):R:void 0,L=y=="Array"&&B.entries||A;if(L&&(M=d(L.call(new k)))!==Object.prototype&&M.next&&(u(M,w,!0),i||typeof M[p]=="function"||s(M,p,m)),S&&A&&A.name!=="values"&&(O=!0,R=function(){return A.call(this)}),i&&!_||!g&&!O&&B[p]||s(B,p,R),a[y]=R,a[w]=m,C)if(h={values:S?R:E("values"),keys:c?R:E("keys"),entries:T},_)for(b in h)b in B||o(B,b,h[b]);else n(n.P+n.F*(g||O),y,h);return h}},function(r,t,e){"use strict";var i=e(30),n=e(16),o=e(26),s={};e(4)(s,e(1)("iterator"),function(){return this}),r.exports=function(a,l,u){a.prototype=i(s,{next:n(1,u)}),o(a,l+" Iterator")}},function(r,t,e){var i=e(8),n=e(19),o=e(27)("IE_PROTO"),s=Object.prototype;r.exports=Object.getPrototypeOf||function(a){return a=n(a),i(a,o)?a[o]:typeof a.constructor=="function"&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?s:null}},function(r,t,e){var i=e(23),n=e(1)("toStringTag"),o=i(function(){return arguments}())=="Arguments";r.exports=function(s){var a,l,u;return s===void 0?"Undefined":s===null?"Null":typeof(l=function(d,p){try{return d[p]}catch(g){}}(a=Object(s),n))=="string"?l:o?i(a):(u=i(a))=="Object"&&typeof a.callee=="function"?"Arguments":u}},function(r,t,e){var i=e(0),n=e(11),o=e(7);r.exports=function(s,a){var l=(n.Object||{})[s]||Object[s],u={};u[s]=a(l),i(i.S+i.F*o(function(){l(1)}),"Object",u)}},function(r,t,e){"use strict";var i=e(37),n=e(3),o=e(76),s=[].slice,a={};r.exports=Function.bind||function(l){var u=i(this),d=s.call(arguments,1),p=function(){var g=d.concat(s.call(arguments));return this instanceof p?function(m,k,y){if(!(k in a)){for(var v=[],x=0;x<k;x++)v[x]="a["+x+"]";a[k]=Function("F,a","return new F("+v.join(",")+")")}return a[k](m,y)}(u,g.length,g):o(u,g,l)};return n(u.prototype)&&(p.prototype=u.prototype),p}},function(r,t){r.exports=function(e,i,n){var o=n===void 0;switch(i.length){case 0:return o?e():e.call(n);case 1:return o?e(i[0]):e.call(n,i[0]);case 2:return o?e(i[0],i[1]):e.call(n,i[0],i[1]);case 3:return o?e(i[0],i[1],i[2]):e.call(n,i[0],i[1],i[2]);case 4:return o?e(i[0],i[1],i[2],i[3]):e.call(n,i[0],i[1],i[2],i[3])}return e.apply(n,i)}},function(r,t,e){"use strict";e(78)("trim",function(i){return function(){return i(this,3)}})},function(r,t,e){var i=e(0),n=e(24),o=e(7),s=e(79),a="["+s+"]",l=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),d=function(g,m,k){var y={},v=o(function(){return!!s[g]()||"\u200B\x85"[g]()!="\u200B\x85"}),x=y[g]=v?m(p):s[g];k&&(y[k]=x),i(i.P+i.F*v,"String",y)},p=d.trim=function(g,m){return g=String(n(g)),1&m&&(g=g.replace(l,"")),2&m&&(g=g.replace(u,"")),g};r.exports=d},function(r,t){r.exports=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},function(r,t,e){"use strict";var i=e(0),n=e(46)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!e(25)(o)),"Array",{indexOf:function(a){return s?o.apply(this,arguments)||0:n(this,a,arguments[1])}})},function(r,t,e){var i=e(3),n=e(12),o=function(s,a){if(n(s),!i(a)&&a!==null)throw TypeError(a+": can't set as prototype!")};r.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(s,a,l){try{(l=e(22)(Function.call,e(49).f(Object.prototype,"__proto__").set,2))(s,[]),a=!(s instanceof Array)}catch(u){a=!0}return function(u,d){return o(u,d),a?u.__proto__=d:l(u,d),u}}({},!1):void 0),check:o}},function(r,t,e){"use strict";e.r(t),e(34),e(20),e(50),e(31),e(51),e(52),e(10),e(53),e(54);var i=.75,n=10,o=!0,s=!0,a=!0,l=!1,u="driver-highlighted-element-stage",d='<div id="'.concat("driver-page-overlay",'"></div>'),p='<div id="'.concat(u,'"></div>');e(33),e(77);function g(q){return(g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W})(q)}var m=function(q){var W=document.createElement("div");return W.innerHTML=q.trim(),W.firstChild},k=function q(W,Y){if(arguments.length>2&&arguments[2]!==void 0&&arguments[2]){for(var Z=["","-webkit-","-ms-","moz-","-o-"],X=0;X<Z.length;X++){var Q=q(W,Z[X]+Y);if(Q)return Q}return""}var ue="";return W.currentStyle?ue=W.currentStyle[Y]:document.defaultView&&document.defaultView.getComputedStyle&&(ue=document.defaultView.getComputedStyle(W,null).getPropertyValue(Y)),ue&&ue.toLowerCase?ue.toLowerCase():ue},y=function(q){return q&&g(q)==="object"&&"nodeType"in q};function v(q,W){for(var Y=0;Y<W.length;Y++){var Z=W[Y];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(q,Z.key,Z)}}var x=function(){function q(X,Q,ue){(function(ce,ne){if(!(ce instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,q),this.options=X,this.highlightedElement=null,this.lastHighlightedElement=null,this.hideTimer=null,this.window=Q,this.document=ue,this.removeNode=this.removeNode.bind(this)}var W,Y,Z;return W=q,(Y=[{key:"attachNode",value:function(){var X=this.document.getElementById("driver-page-overlay");X||(X=m(d),document.body.appendChild(X)),this.node=X,this.node.style.opacity="0",this.options.animate||this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"highlight",value:function(X){X&&X.node?X.isSame(this.highlightedElement)||(this.window.clearTimeout(this.hideTimer),X.onHighlightStarted(),this.highlightedElement&&!this.highlightedElement.isSame(this.lastHighlightedElement)&&this.highlightedElement.onDeselected(),X.getCalculatedPosition().canHighlight()&&(this.lastHighlightedElement=this.highlightedElement,this.highlightedElement=X,this.show(),this.highlightedElement.onHighlighted())):console.warn("Invalid element to highlight. Must be an instance of `Element`")}},{key:"show",value:function(){var X=this;this.node&&this.node.parentElement||(this.attachNode(),window.setTimeout(function(){X.node.style.opacity="".concat(X.options.opacity),X.node.style.position="fixed",X.node.style.left="0",X.node.style.top="0",X.node.style.bottom="0",X.node.style.right="0"}))}},{key:"getHighlightedElement",value:function(){return this.highlightedElement}},{key:"getLastHighlightedElement",value:function(){return this.lastHighlightedElement}},{key:"clear",value:function(){var X=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.onReset&&this.options.onReset(this.highlightedElement),this.highlightedElement&&this.highlightedElement.onDeselected(!0),this.highlightedElement=null,this.lastHighlightedElement=null,this.node&&(this.window.clearTimeout(this.hideTimer),this.options.animate&&!X?(this.node.style.opacity="0",this.hideTimer=this.window.setTimeout(this.removeNode,300)):this.removeNode())}},{key:"removeNode",value:function(){this.node&&this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"refresh",value:function(){this.highlightedElement&&(this.highlightedElement.showPopover(),this.highlightedElement.showStage())}}])&&v(W.prototype,Y),Z&&v(W,Z),q}();e(80);function C(q,W){for(var Y=0;Y<W.length;Y++){var Z=W[Y];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(q,Z.key,Z)}}var c=function(){function q(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=X.left,ue=Q===void 0?0:Q,ce=X.top,ne=ce===void 0?0:ce,ge=X.right,re=ge===void 0?0:ge,pe=X.bottom,Ce=pe===void 0?0:pe;(function(be,xe){if(!(be instanceof xe))throw new TypeError("Cannot call a class as a function")})(this,q),this.left=ue,this.right=re,this.top=ne,this.bottom=Ce}var W,Y,Z;return W=q,(Y=[{key:"canHighlight",value:function(){return this.left<this.right&&this.top<this.bottom}}])&&C(W.prototype,Y),Z&&C(W,Z),q}();function _(q,W){for(var Y=0;Y<W.length;Y++){var Z=W[Y];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(q,Z.key,Z)}}var h=function(){function q(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=X.node,ue=X.options,ce=X.popover,ne=X.stage,ge=X.overlay,re=X.window,pe=X.document;(function(Ce,be){if(!(Ce instanceof be))throw new TypeError("Cannot call a class as a function")})(this,q),this.node=Q,this.document=pe,this.window=re,this.options=ue,this.overlay=ge,this.popover=ce,this.stage=ne,this.animationTimeout=null}var W,Y,Z;return W=q,(Y=[{key:"isInView",value:function(){for(var X=this.node.offsetTop,Q=this.node.offsetLeft,ue=this.node.offsetWidth,ce=this.node.offsetHeight,ne=this.node;ne.offsetParent;)X+=(ne=ne.offsetParent).offsetTop,Q+=ne.offsetLeft;return X>=this.window.pageYOffset&&Q>=this.window.pageXOffset&&X+ce<=this.window.pageYOffset+this.window.innerHeight&&Q+ue<=this.window.pageXOffset+this.window.innerWidth}},{key:"scrollManually",value:function(){var X=this.node.getBoundingClientRect().top+this.window.pageYOffset-this.window.innerHeight/2;this.window.scrollTo(0,X)}},{key:"bringInView",value:function(){if(this.node&&!this.isInView())if(this.node.scrollIntoView)try{this.node.scrollIntoView(this.options.scrollIntoViewOptions||{behavior:"instant",block:"center"})}catch(X){this.scrollManually()}else this.scrollManually()}},{key:"getCalculatedPosition",value:function(){var X=this.document.body,Q=this.document.documentElement,ue=this.window,ce=this.window.pageYOffset||Q.scrollTop||X.scrollTop,ne=ue.pageXOffset||Q.scrollLeft||X.scrollLeft,ge=this.node.getBoundingClientRect();return new c({top:ge.top+ce,left:ge.left+ne,right:ge.left+ne+ge.width,bottom:ge.top+ce+ge.height})}},{key:"getPopover",value:function(){return this.popover}},{key:"onDeselected",value:function(){var X=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.hidePopover(),X&&this.hideStage(),this.removeHighlightClasses(),this.window.clearTimeout(this.animationTimeout),this.options.onDeselected&&this.options.onDeselected(this)}},{key:"isSame",value:function(X){return!(!X||!X.node)&&X.node===this.node}},{key:"onHighlightStarted",value:function(){this.options.onHighlightStarted&&this.options.onHighlightStarted(this)}},{key:"onHighlighted",value:function(){this.isInView()||this.bringInView(),this.showPopover(),this.showStage(),this.addHighlightClasses(),this.options.onHighlighted&&this.options.onHighlighted(this)}},{key:"removeHighlightClasses",value:function(){this.node.classList.remove("driver-highlighted-element"),this.node.classList.remove("driver-position-relative");for(var X=this.document.querySelectorAll(".".concat("driver-fix-stacking")),Q=0;Q<X.length;Q++)X[Q].classList.remove("driver-fix-stacking")}},{key:"addHighlightClasses",value:function(){this.node.classList.add("driver-highlighted-element"),this.canMakeRelative()&&this.node.classList.add("driver-position-relative"),this.fixStackingContext()}},{key:"fixStackingContext",value:function(){for(var X=this.node.parentNode;X&&X.tagName&&X.tagName.toLowerCase()!=="body";){var Q=k(X,"z-index"),ue=parseFloat(k(X,"opacity")),ce=k(X,"transform",!0),ne=k(X,"transform-style",!0),ge=k(X,"transform-box",!0),re=k(X,"filter",!0),pe=k(X,"perspective",!0);(/[0-9]+/.test(Q)||ue<1||ce&&ce!=="none"||ne&&ne!=="flat"||ge&&ge!=="border-box"||re&&re!=="none"||pe&&pe!=="none")&&X.classList.add("driver-fix-stacking"),X=X.parentNode}}},{key:"canMakeRelative",value:function(){var X=this.getStyleProperty("position");return["absolute","fixed","relative"].indexOf(X)===-1}},{key:"getStyleProperty",value:function(X){return k(this.node,X)}},{key:"showStage",value:function(){this.stage.show(this.getCalculatedPosition())}},{key:"getNode",value:function(){return this.node}},{key:"hideStage",value:function(){this.stage.hide()}},{key:"hidePopover",value:function(){this.popover&&this.popover.hide()}},{key:"showPopover",value:function(){var X=this;if(this.popover){var Q=this.getCalculatedPosition(),ue=300;this.options.animate&&this.overlay.lastHighlightedElement||(ue=0),this.animationTimeout=this.window.setTimeout(function(){X.popover.show(Q)},ue)}}},{key:"getFullPageSize",value:function(){var X=this.document.body,Q=this.document.documentElement;return{height:Math.max(X.scrollHeight,X.offsetHeight,Q.scrollHeight,Q.offsetHeight),width:Math.max(X.scrollWidth,X.offsetWidth,Q.scrollWidth,Q.offsetWidth)}}},{key:"getSize",value:function(){return{height:Math.max(this.node.scrollHeight,this.node.offsetHeight),width:Math.max(this.node.scrollWidth,this.node.offsetWidth)}}}])&&_(W.prototype,Y),Z&&_(W,Z),q}();e(55),e(56);function b(q){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W})(q)}function M(q,W,Y){return W in q?Object.defineProperty(q,W,{value:Y,enumerable:!0,configurable:!0,writable:!0}):q[W]=Y,q}function E(q,W){for(var Y=0;Y<W.length;Y++){var Z=W[Y];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(q,Z.key,Z)}}function w(q,W){return!W||b(W)!=="object"&&typeof W!="function"?function(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}(q):W}function S(q){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(W){return W.__proto__||Object.getPrototypeOf(W)})(q)}function O(q,W){return(O=Object.setPrototypeOf||function(Y,Z){return Y.__proto__=Z,Y})(q,W)}var B=function(q){function W(Q,ue,ce){var ne;return function(ge,re){if(!(ge instanceof re))throw new TypeError("Cannot call a class as a function")}(this,W),(ne=w(this,S(W).call(this))).options=function(ge){for(var re=1;re<arguments.length;re++){var pe=arguments[re]!=null?arguments[re]:{},Ce=Object.keys(pe);typeof Object.getOwnPropertySymbols=="function"&&(Ce=Ce.concat(Object.getOwnPropertySymbols(pe).filter(function(be){return Object.getOwnPropertyDescriptor(pe,be).enumerable}))),Ce.forEach(function(be){M(ge,be,pe[be])})}return ge}({isFirst:!0,isLast:!0,totalCount:1,currentIndex:0,offset:0,showButtons:!0,closeBtnText:"Close",doneBtnText:"Done",startBtnText:"Next &rarr;",nextBtnText:"Next &rarr;",prevBtnText:"&larr; Previous"},Q),ne.window=ue,ne.document=ce,ne}var Y,Z,X;return function(Q,ue){if(typeof ue!="function"&&ue!==null)throw new TypeError("Super expression must either be null or a function");Q.prototype=Object.create(ue&&ue.prototype,{constructor:{value:Q,writable:!0,configurable:!0}}),ue&&O(Q,ue)}(W,h),Y=W,(Z=[{key:"attachNode",value:function(){var Q=this.document.getElementById("driver-popover-item");Q&&Q.parentElement.removeChild(Q),Q=m(function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return`
  <div id="`.concat("driver-popover-item",'" class="').concat(ue,`">
    <div class="`).concat("driver-popover-tip",`"></div>
    <div class="`).concat("driver-popover-title",`">Popover Title</div>
    <div class="`).concat("driver-popover-description",`">Popover Description</div>
    <div class="driver-clearfix `).concat("driver-popover-footer",`">
      <button class="`).concat("driver-close-btn",`">Close</button>
      <span class="driver-btn-group `).concat("driver-navigation-btns",`">
        <button class="`).concat("driver-prev-btn",`">&larr; Previous</button>
        <button class="`).concat("driver-next-btn",`">Next &rarr;</button>
      </span>
    </div>
  </div>`)}(this.options.className)),document.body.appendChild(Q),this.node=Q,this.tipNode=Q.querySelector(".".concat("driver-popover-tip")),this.titleNode=Q.querySelector(".".concat("driver-popover-title")),this.descriptionNode=Q.querySelector(".".concat("driver-popover-description")),this.footerNode=Q.querySelector(".".concat("driver-popover-footer")),this.nextBtnNode=Q.querySelector(".".concat("driver-next-btn")),this.prevBtnNode=Q.querySelector(".".concat("driver-prev-btn")),this.closeBtnNode=Q.querySelector(".".concat("driver-close-btn"))}},{key:"getTitleNode",value:function(){return this.titleNode}},{key:"getDescriptionNode",value:function(){return this.descriptionNode}},{key:"hide",value:function(){this.node&&(this.node.style.display="none")}},{key:"setInitialState",value:function(){this.node.style.display="block",this.node.style.left="0",this.node.style.top="0",this.node.style.bottom="",this.node.style.right="",this.node.querySelector(".".concat("driver-popover-tip")).className="driver-popover-tip"}},{key:"show",value:function(Q){switch(this.attachNode(),this.setInitialState(),this.titleNode.innerHTML=this.options.title,this.descriptionNode.innerHTML=this.options.description||"",this.renderFooter(),this.options.position){case"left":case"left-top":this.positionOnLeft(Q);break;case"left-center":this.positionOnLeftCenter(Q);break;case"left-bottom":this.positionOnLeftBottom(Q);break;case"right":case"right-top":this.positionOnRight(Q);break;case"right-center":this.positionOnRightCenter(Q);break;case"right-bottom":this.positionOnRightBottom(Q);break;case"top":case"top-left":this.positionOnTop(Q);break;case"top-center":this.positionOnTopCenter(Q);break;case"top-right":this.positionOnTopRight(Q);break;case"bottom":case"bottom-left":this.positionOnBottom(Q);break;case"bottom-center":this.positionOnBottomCenter(Q);break;case"bottom-right":this.positionOnBottomRight(Q);break;case"mid-center":this.positionOnMidCenter(Q);break;case"auto":default:this.autoPosition(Q)}this.bringInView()}},{key:"renderFooter",value:function(){this.nextBtnNode.innerHTML=this.options.nextBtnText,this.prevBtnNode.innerHTML=this.options.prevBtnText,this.closeBtnNode.innerHTML=this.options.closeBtnText;var Q=this.options.totalCount&&this.options.totalCount!==1;this.options.showButtons?(Q?(this.nextBtnNode.style.display="inline-block",this.prevBtnNode.style.display="inline-block",this.closeBtnNode.classList.remove("driver-close-only-btn")):(this.nextBtnNode.style.display="none",this.prevBtnNode.style.display="none",this.closeBtnNode.classList.add("driver-close-only-btn")),this.footerNode.style.display="block",this.options.isFirst?(this.prevBtnNode.classList.add("driver-disabled"),this.nextBtnNode.innerHTML=this.options.startBtnText):this.prevBtnNode.classList.remove("driver-disabled"),this.options.isLast?this.nextBtnNode.innerHTML=this.options.doneBtnText:this.nextBtnNode.innerHTML=this.options.nextBtnText):this.footerNode.style.display="none"}},{key:"positionOnLeft",value:function(Q){var ue=this.getSize().width,ce=this.options.padding+10;this.node.style.left="".concat(Q.left-ue-ce,"px"),this.node.style.top="".concat(Q.top+this.options.offset-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("right")}},{key:"positionOnLeftBottom",value:function(Q){var ue=this.getSize(),ce=ue.width,ne=this.options.padding+10;this.node.style.left="".concat(Q.left-ce-ne,"px"),this.node.style.top="".concat(Q.bottom+this.options.padding+this.options.offset-ue.height,"px"),this.node.style.bottom="",this.node.style.right="",this.tipNode.classList.add("right","position-bottom")}},{key:"positionOnLeftCenter",value:function(Q){var ue=this.getSize(),ce=ue.width,ne=ue.height/2,ge=this.options.padding+10,re=(Q.bottom-Q.top)/2,pe=Q.top-ne+re+this.options.offset;this.node.style.left="".concat(Q.left-ce-ge,"px"),this.node.style.top="".concat(pe,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("right","position-center")}},{key:"positionOnRight",value:function(Q){var ue=this.options.padding+10;this.node.style.left="".concat(Q.right+ue,"px"),this.node.style.top="".concat(Q.top+this.options.offset-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("left")}},{key:"positionOnRightCenter",value:function(Q){var ue=this.getSize(),ce=this.options.padding+10,ne=ue.height/2,ge=(Q.bottom-Q.top)/2,re=Q.top-ne+ge+this.options.offset;this.node.style.left="".concat(Q.right+ce,"px"),this.node.style.top="".concat(re,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("left","position-center")}},{key:"positionOnRightBottom",value:function(Q){var ue=this.options.padding+10,ce=this.getSize();this.node.style.left="".concat(Q.right+ue,"px"),this.node.style.top="".concat(Q.bottom+this.options.padding+this.options.offset-ce.height,"px"),this.node.style.bottom="",this.node.style.right="",this.tipNode.classList.add("left","position-bottom")}},{key:"positionOnTop",value:function(Q){var ue=this.getSize().height,ce=this.options.padding+10;this.node.style.top="".concat(Q.top-ue-ce,"px"),this.node.style.left="".concat(Q.left-this.options.padding+this.options.offset,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom")}},{key:"positionOnTopCenter",value:function(Q){var ue=this.getSize(),ce=ue.height,ne=ue.width/2,ge=this.options.padding+10,re=this.options.offset+Q.left+(Q.right-Q.left)/2;this.node.style.top="".concat(Q.top-ce-ge,"px"),this.node.style.left="".concat(re-ne-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom","position-center")}},{key:"positionOnTopRight",value:function(Q){var ue=this.getSize(),ce=ue.height,ne=this.options.padding+10;this.node.style.top="".concat(Q.top-ce-ne,"px"),this.node.style.left="".concat(Q.right+this.options.padding+this.options.offset-ue.width,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom","position-right")}},{key:"positionOnBottom",value:function(Q){var ue=this.options.padding+10;this.node.style.top="".concat(Q.bottom+ue,"px"),this.node.style.left="".concat(Q.left-this.options.padding+this.options.offset,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top")}},{key:"positionOnBottomCenter",value:function(Q){var ue=this.getSize().width/2,ce=this.options.padding+10,ne=this.options.offset+Q.left+(Q.right-Q.left)/2;this.node.style.top="".concat(Q.bottom+ce,"px"),this.node.style.left="".concat(ne-ue-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top","position-center")}},{key:"positionOnBottomRight",value:function(Q){var ue=this.getSize(),ce=this.options.padding+10;this.node.style.top="".concat(Q.bottom+ce,"px"),this.node.style.left="".concat(Q.right+this.options.padding+this.options.offset-ue.width,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top","position-right")}},{key:"positionOnMidCenter",value:function(Q){var ue=this.getSize(),ce=ue.height,ne=ue.width/2,ge=ce/2,re=(Q.bottom-Q.top)/2,pe=Q.top-ge+re+this.options.offset,Ce=this.options.offset+Q.left+(Q.right-Q.left)/2;this.node.style.top="".concat(pe,"px"),this.node.style.left="".concat(Ce-ne-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("mid-center")}},{key:"autoPosition",value:function(Q){var ue=this.getFullPageSize(),ce=this.getSize(),ne=ue.height,ge=ce.height,re=this.options.padding+10;Q.bottom+ge+re>=ne?this.positionOnTop(Q):this.positionOnBottom(Q)}}])&&E(Y.prototype,Z),X&&E(Y,X),W}();function A(q){return(A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W})(q)}function R(q,W){for(var Y=0;Y<W.length;Y++){var Z=W[Y];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(q,Z.key,Z)}}function T(q,W){return!W||A(W)!=="object"&&typeof W!="function"?function(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}(q):W}function L(q){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(W){return W.__proto__||Object.getPrototypeOf(W)})(q)}function P(q,W){return(P=Object.setPrototypeOf||function(Y,Z){return Y.__proto__=Z,Y})(q,W)}var D=function(q){function W(Q,ue,ce){var ne;return function(ge,re){if(!(ge instanceof re))throw new TypeError("Cannot call a class as a function")}(this,W),(ne=T(this,L(W).call(this))).options=Q,ne.window=ue,ne.document=ce,ne}var Y,Z,X;return function(Q,ue){if(typeof ue!="function"&&ue!==null)throw new TypeError("Super expression must either be null or a function");Q.prototype=Object.create(ue&&ue.prototype,{constructor:{value:Q,writable:!0,configurable:!0}}),ue&&P(Q,ue)}(W,h),Y=W,(Z=[{key:"attachNode",value:function(){var Q=this.document.getElementById(u);Q||(Q=m(p),document.body.appendChild(Q)),this.node=Q,this.options.animate?this.node.classList.remove("driver-stage-no-animation"):this.node.classList.add("driver-stage-no-animation")}},{key:"hide",value:function(){this.node&&this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"setInitialStyle",value:function(){this.node.style.display="block",this.node.style.left="0",this.node.style.top="0",this.node.style.bottom="",this.node.style.right=""}},{key:"show",value:function(Q){this.attachNode(),this.setInitialStyle();var ue=2*this.options.padding,ce=Q.right-Q.left+ue,ne=Q.bottom-Q.top+ue;this.node.style.display="block",this.node.style.position="absolute",this.node.style.width="".concat(ce,"px"),this.node.style.height="".concat(ne,"px"),this.node.style.top="".concat(Q.top-ue/2,"px"),this.node.style.left="".concat(Q.left-ue/2,"px"),this.node.style.backgroundColor=this.options.stageBackground}}])&&R(Y.prototype,Z),X&&R(Y,X),W}();function H(q){for(var W=1;W<arguments.length;W++){var Y=arguments[W]!=null?arguments[W]:{},Z=Object.keys(Y);typeof Object.getOwnPropertySymbols=="function"&&(Z=Z.concat(Object.getOwnPropertySymbols(Y).filter(function(X){return Object.getOwnPropertyDescriptor(Y,X).enumerable}))),Z.forEach(function(X){j(q,X,Y[X])})}return q}function j(q,W,Y){return W in q?Object.defineProperty(q,W,{value:Y,enumerable:!0,configurable:!0,writable:!0}):q[W]=Y,q}function F(q,W){for(var Y=0;Y<W.length;Y++){var Z=W[Y];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(q,Z.key,Z)}}e.d(t,"default",function(){return K});var K=function(){function q(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(function(Q,ue){if(!(Q instanceof ue))throw new TypeError("Cannot call a class as a function")})(this,q),this.options=H({animate:o,opacity:i,padding:n,scrollIntoViewOptions:null,allowClose:s,keyboardControl:a,overlayClickNext:l,stageBackground:"#ffffff",onHighlightStarted:function(){return null},onHighlighted:function(){return null},onDeselected:function(){return null},onReset:function(){return null},onNext:function(){return null},onPrevious:function(){return null}},X),this.document=document,this.window=window,this.isActivated=!1,this.steps=[],this.currentStep=0,this.currentMovePrevented=!1,this.overlay=new x(this.options,window,document),this.onResize=this.onResize.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onClick=this.onClick.bind(this),this.moveNext=this.moveNext.bind(this),this.movePrevious=this.movePrevious.bind(this),this.preventMove=this.preventMove.bind(this),this.bind()}var W,Y,Z;return W=q,(Y=[{key:"getSteps",value:function(){return this.steps}},{key:"setSteps",value:function(X){this.steps=X}},{key:"bind",value:function(){this.window.addEventListener("resize",this.onResize,!1),this.window.addEventListener("keyup",this.onKeyUp,!1),"ontouchstart"in document.documentElement?this.window.addEventListener("touchstart",this.onClick,!1):this.window.addEventListener("click",this.onClick,!1)}},{key:"onClick",value:function(X){if(this.isActivated&&this.hasHighlightedElement()){X.stopPropagation();var Q=this.overlay.getHighlightedElement(),ue=this.document.getElementById("driver-popover-item"),ce=Q.node.contains(X.target),ne=ue&&ue.contains(X.target);if(ce||ne||!this.options.overlayClickNext)if(ce||ne||!this.options.allowClose){var ge=X.target.classList.contains("driver-next-btn"),re=X.target.classList.contains("driver-prev-btn");X.target.classList.contains("driver-close-btn")?this.reset():ge?this.handleNext():re&&this.handlePrevious()}else this.reset();else this.handleNext()}}},{key:"onResize",value:function(){this.isActivated&&this.refresh()}},{key:"refresh",value:function(){this.overlay.refresh()}},{key:"onKeyUp",value:function(X){if(this.isActivated&&this.options.keyboardControl)if(X.keyCode!==27){var Q=this.getHighlightedElement();Q&&Q.popover&&(X.keyCode===39?this.handleNext():X.keyCode===37&&this.handlePrevious())}else this.reset()}},{key:"movePrevious",value:function(){var X=this.steps[this.currentStep-1];X?(this.overlay.highlight(X),this.currentStep-=1):this.reset()}},{key:"preventMove",value:function(){this.currentMovePrevented=!0}},{key:"handleNext",value:function(){this.currentMovePrevented=!1;var X=this.steps[this.currentStep];X&&X.options&&X.options.onNext&&X.options.onNext(this.overlay.highlightedElement),this.currentMovePrevented||this.moveNext()}},{key:"handlePrevious",value:function(){this.currentMovePrevented=!1;var X=this.steps[this.currentStep];X&&X.options&&X.options.onPrevious&&X.options.onPrevious(this.overlay.highlightedElement),this.currentMovePrevented||this.movePrevious()}},{key:"moveNext",value:function(){var X=this.steps[this.currentStep+1];X?(this.overlay.highlight(X),this.currentStep+=1):this.reset()}},{key:"hasNextStep",value:function(){return!!this.steps[this.currentStep+1]}},{key:"hasPreviousStep",value:function(){return!!this.steps[this.currentStep-1]}},{key:"reset",value:function(){var X=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.currentStep=0,this.isActivated=!1,this.overlay.clear(X)}},{key:"hasHighlightedElement",value:function(){var X=this.overlay.getHighlightedElement();return X&&X.node}},{key:"getHighlightedElement",value:function(){return this.overlay.getHighlightedElement()}},{key:"getLastHighlightedElement",value:function(){return this.overlay.getLastHighlightedElement()}},{key:"defineSteps",value:function(X){this.steps=[];for(var Q=0;Q<X.length;Q++){var ue=this.prepareElementFromStep(X[Q],X,Q);ue&&this.steps.push(ue)}}},{key:"prepareElementFromStep",value:function(X){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,ce=H({},this.options),ne=X,ge=typeof X!="string"&&!y(X);if(!X||ge&&!X.element)throw new Error("Element is required in step ".concat(ue));ge&&(ne=X.element,ce=H({},this.options,X));var re=y(ne)?ne:this.document.querySelector(ne);if(!re)return console.warn("Element to highlight ".concat(ne," not found")),null;var pe=null;if(ce.popover&&ce.popover.title){var Ce=[this.options.className,ce.popover.className].filter(function(je){return je}).join(" "),be=H({},ce,ce.popover,{className:Ce,totalCount:Q.length,currentIndex:ue,isFirst:ue===0,isLast:Q.length===0||ue===Q.length-1});pe=new B(be,this.window,this.document)}var xe=H({},ce),Re=new D(xe,this.window,this.document);return new h({node:re,options:ce,popover:pe,stage:Re,overlay:this.overlay,window:this.window,document:this.document})}},{key:"start",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(!this.steps||this.steps.length===0)throw new Error("There are no steps defined to iterate");this.isActivated=!0,this.currentStep=X,this.overlay.highlight(this.steps[X])}},{key:"highlight",value:function(X){this.isActivated=!0;var Q=this.prepareElementFromStep(X);Q&&this.overlay.highlight(Q)}}])&&F(W.prototype,Y),Z&&F(W,Z),q}()}]).default})});window.frappe||(window.frappe={});frappe.provide=function(r){for(var t=r.split("."),e=window,i=0;i<t.length;i++){var n=t[i];e[n]||(e[n]={}),e=e[n]}return e};frappe.provide("locals");frappe.provide("frappe.flags");frappe.provide("frappe.settings");frappe.provide("frappe.utils");frappe.provide("frappe.ui.form");frappe.provide("frappe.modules");frappe.provide("frappe.templates");frappe.provide("frappe.test_data");frappe.provide("frappe.utils");frappe.provide("frappe.model");frappe.provide("frappe.user");frappe.provide("frappe.session");frappe.provide("frappe._messages");frappe.provide("locals.DocType");frappe.provide("frappe.listview_settings");frappe.provide("frappe.tour");frappe.provide("frappe.listview_parent_route");window.NEWLINE=`
`;window.TAB=9;window.UP_ARROW=38;window.DOWN_ARROW=40;window.cur_frm=null;frappe._=function(r,t,e=null){if(!r||typeof r!="string")return r;let i="",n=r;return e&&(i=frappe._messages[`${n}:${e}`]),i||(i=frappe._messages[n]||r),t&&typeof t=="object"&&(i=$.format(i,t)),i};window.__=frappe._;frappe.get_languages=function(){return frappe.languages||(frappe.languages=[],$.each(frappe.boot.lang_dict,function(r,t){frappe.languages.push({label:r,value:t})}),frappe.languages=frappe.languages.sort(function(r,t){return r.value<t.value?-1:1})),frappe.languages};(function(r){"use strict";var t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;function e(){}e.extend=function(i){var n=this.prototype,o=Object.create(n);for(var s in i)o[s]=typeof i[s]=="function"&&typeof n[s]=="function"&&t.test(i[s])?function(l,u){return function(){var d=this._super;this._super=n[l];var p=u.apply(this,arguments);return this._super=d,p}}(s,i[s]):i[s];var a=typeof o.init=="function"?o.hasOwnProperty("init")?o.init:function(){n.init.apply(this,arguments)}:function(){};return a.prototype=o,o.constructor=a,a.extend=e.extend,a},r.Class=e})(window);String.prototype.includes||(String.prototype.includes=function(r,t){"use strict";return typeof t!="number"&&(t=0),t+r.length>this.length?!1:this.indexOf(r,t)!==-1});Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(r,t){if(this==null)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if(i===0)return!1;for(var n=t|0,o=Math.max(n>=0?n:i-Math.abs(n),0);o<i;){if(e[o]===r)return!0;o++}return!1}});typeof String.prototype.trimLeft!="function"&&(String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")});typeof String.prototype.trimRight!="function"&&(String.prototype.trimRight=function(){return this.replace(/\s+$/,"")});typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(t){"use strict";if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!=null)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},writable:!0,configurable:!0});frappe.require=function(r,t){return typeof r=="string"&&(r=[r]),r=r.map(e=>frappe.assets.bundled_asset(e)),new Promise(e=>{frappe.assets.execute(r,()=>{e(),t&&t()})})};frappe.assets={check:function(){if(window._version_number!=localStorage.getItem("_version_number")&&(frappe.assets.clear_local_storage(),console.log("Cleared App Cache.")),localStorage._last_load){let r=new Date-new Date(localStorage._last_load);(r<5e3&&up()||r>2*864e5)&&frappe.assets.clear_local_storage()}else frappe.assets.clear_local_storage();frappe.assets.init_local_storage()},init_local_storage:function(){localStorage._last_load=new Date,localStorage._version_number=window._version_number,frappe.boot&&(localStorage.metadata_version=frappe.boot.metadata_version)},clear_local_storage:function(){$.each(["_last_load","_version_number","metadata_version","page_info","last_visited"],function(t,e){localStorage.removeItem(e)});for(var r in localStorage)(r.indexOf("desk_assets:")===0||r.indexOf("_page:")===0||r.indexOf("_doctype:")===0||r.indexOf("preferred_breadcrumbs:")===0)&&localStorage.removeItem(r);console.log("localStorage cleared")},executed_:[],execute:function(r,t){for(var e=[],i=0,n=r.length;i<n;i++)frappe.assets.exists(r[i])||e.push(r[i]);e.length?frappe.assets.fetch(e,function(){frappe.assets.eval_assets(r,t)}):frappe.assets.eval_assets(r,t)},eval_assets:function(r,t){for(var e=0,i=r.length;e<i;e++){var n=r[e];frappe.assets.executed_.indexOf(n)===-1&&(frappe.assets.handler[frappe.assets.extn(n)](frappe.assets.get(n),n),frappe.assets.executed_.push(n))}t&&t()},exists:function(r){return frappe.assets.executed_.indexOf(r)!==-1?!0:frappe.boot.developer_mode?!1:!!frappe.assets.get(r)},fetch:function(r,t){if(r.length===0){t();return}let e=frappe.boot.developer_mode||window.dev_server?Date.now():window._version_number;async function i(o){let s=new URL(o,window.location.origin);!o.includes(".bundle.")&&!s.searchParams.get("v")&&s.searchParams.append("v",e);let l=await(await fetch(s.toString())).text();frappe.assets.add(o,l)}frappe.dom.freeze();let n=r.map(i);Promise.all(n).then(()=>{frappe.dom.unfreeze(),t()})},add:function(r,t){if("localStorage"in window)try{frappe.assets.set(r,t)}catch(e){frappe.assets.clear_local_storage(),frappe.assets.set(r,t)}},get:function(r){return localStorage.getItem("desk_assets:"+r)},set:function(r,t){localStorage.setItem("desk_assets:"+r,t)},extn:function(r){return r.indexOf("?")!=-1&&(r=r.split("?").slice(-1)[0]),r.split(".").slice(-1)[0]},handler:{js:function(r,t){frappe.dom.eval(r)},css:function(r,t){frappe.dom.set_style(r)}},bundled_asset(r,t=null){return!r.startsWith("/assets")&&r.includes(".bundle.")&&(r.endsWith(".css")&&t&&(r=`rtl_${r}`),r=frappe.boot.assets_json[r]||r),r}};function up(){var r;try{return(r=window.performance)==null?void 0:r.getEntriesByType("navigation").map(t=>t.type).includes("reload")}catch(t){return!0}}function dp(r,t){return r==null?r:(this.unkeyed_index=0,r.replace(/\{(\w*)\}/g,function(e,i){if(i===""&&(i=this.unkeyed_index,this.unkeyed_index++),i==+i)return t[i]!==void 0?t[i]:e}.bind(this)))}jQuery&&(jQuery.format=dp);frappe.provide("frappe.form.formatters");frappe.form.link_formatters={};frappe.form.formatters={_right:function(r,t){return t&&(t.inline||t.only_value)?r:"<div style='text-align: right'>"+r+"</div>"},_apply_custom_formatter:function(r,t){if(t){let e=frappe.meta.docfield_map[t.parent]&&frappe.meta.docfield_map[t.parent][t.fieldname];e&&e.formatter&&typeof e.formatter=="function"&&(r=e.formatter(r,t))}return r},Data:function(r,t){return t&&t.options=="URL"?r?`<a href="${r}" title="Open Link" target="_blank">${r}</a>`:void 0:(r=r==null?"":r,frappe.form.formatters._apply_custom_formatter(r,t))},Autocomplete:function(r,t){return __(frappe.form.formatters.Data(r,t))},Select:function(r,t){return __(frappe.form.formatters.Data(r,t))},Float:function(r,t,e,i){var n=t.precision||cint(frappe.boot.sysdefaults&&frappe.boot.sysdefaults.float_precision)||null;if(t.options&&t.options.trim())return t.precision=n,frappe.form.formatters.Currency(r,t,e,i);if(!(e||{}).always_show_decimals&&!is_null(r)){var o=cstr(r).split(".");(o[1]==null||cint(o[1])===0)&&(n=0)}return r=r==null||r===""?"":r,frappe.form.formatters._right(format_number(r,null,n),e)},Int:function(r,t,e){return cstr(t.options).trim()==="File Size"?frappe.form.formatters.FileSize(r):frappe.form.formatters._right(r==null?"":cint(r),e)},Percent:function(r,t,e){let i=t.precision||cint(frappe.boot.sysdefaults&&frappe.boot.sysdefaults.float_precision)||2;return frappe.form.formatters._right(flt(r,i)+"%",e)},Rating:function(r,t){let e="",i=t.options||5;return r=r*i,r=Math.round(r*2)/2,Array.from({length:cint(i)},(n,o)=>o+1).forEach(n=>{e+=`<svg class="icon icon-md" data-rating=${n} viewBox="0 0 24 24" fill="none">
				<path class="right-half ${n<=(r||0)?"star-click":""}" d="M11.9987 3.00011C12.177 3.00011 12.3554 3.09303 12.4471 3.27888L14.8213 8.09112C14.8941 8.23872 15.0349 8.34102 15.1978 8.3647L20.5069 9.13641C20.917 9.19602 21.0807 9.69992 20.7841 9.9892L16.9421 13.7354C16.8243 13.8503 16.7706 14.0157 16.7984 14.1779L17.7053 19.4674C17.7753 19.8759 17.3466 20.1874 16.9798 19.9945L12.2314 17.4973C12.1586 17.459 12.0786 17.4398 11.9987 17.4398V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
				<path class="left-half ${n<=(r||0)||n-.5==r?"star-click":""}" d="M11.9987 3.00011C11.8207 3.00011 11.6428 3.09261 11.5509 3.27762L9.15562 8.09836C9.08253 8.24546 8.94185 8.34728 8.77927 8.37075L3.42887 9.14298C3.01771 9.20233 2.85405 9.70811 3.1525 9.99707L7.01978 13.7414C7.13858 13.8564 7.19283 14.0228 7.16469 14.1857L6.25116 19.4762C6.18071 19.8842 6.6083 20.1961 6.97531 20.0045L11.7672 17.5022C11.8397 17.4643 11.9192 17.4454 11.9987 17.4454V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
			</svg>`}),`<div class="rating">
			${e}
		</div>`},Currency:function(r,t,e,i){var n=frappe.meta.get_field_currency(t,i);let o;if(typeof t.precision=="number"?o=t.precision:o=cint(t.precision||frappe.boot.sysdefaults.currency_precision||2),o>2){var s=cstr(r).split("."),a=s.length>1?s[1]:"";if(a.length<3||a.length<o){let l=frappe.model.get_value(":Currency",n,"fraction_units")||100;a.length<cstr(l).length&&(o=cstr(l).length-1)}}return r=r==null||r===""?"":r,r=format_currency(r,n,o),e&&e.only_value?r:frappe.form.formatters._right(r,e)},Check:function(r){return`<input type="checkbox" disabled
			class="disabled-${r?"selected":"deselected"}">`},Link:function(r,t,e,i){var n=t._options||t.options,o=r;let s=frappe.utils.get_link_title(n,r);if(s===r&&(s=null),r&&r.match&&r.match(/^['"].*['"]$/)&&r.replace(/^.(.*).$/,"$1"),e&&(e.for_print||e.only_value))return s||r;if(frappe.form.link_formatters[n]&&i&&n!==i.doctype&&(r=frappe.form.link_formatters[n](r,i,t)),!r)return"";if(r[0]=="'"&&r[r.length-1]=="'")return r.substring(1,r.length-1);if(t&&t.link_onclick)return repl('<a onclick="%(onclick)s" href="#">%(value)s</a>',{onclick:t.link_onclick.replace(/"/g,"&quot;")+"; return false;",value:r});if(t&&n)if(frappe.model.can_read(n)){let a=document.createElement("a");return a.href=`/app/${encodeURIComponent(frappe.router.slug(n))}/${encodeURIComponent(o)}`,a.dataset.doctype=n,a.dataset.name=o,a.dataset.value=o,a.innerText=__(e&&e.label||s||r),a.outerHTML}else return s||r;else return s||r},Date:function(r){return frappe.datetime.str_to_user?(r&&(r=frappe.datetime.str_to_user(r,!1,!0),r==="Invalid date"&&(r=null)),r||""):r},DateRange:function(r){return Array.isArray(r)?__("{0} to {1}",[frappe.datetime.str_to_user(r[0]),frappe.datetime.str_to_user(r[1])]):r||""},Datetime:function(r){return r?moment(frappe.datetime.convert_to_user_tz(r)).format(frappe.boot.sysdefaults.date_format.toUpperCase()+" "+(frappe.boot.sysdefaults.time_format||"HH:mm:ss")):""},Text:function(r,t){if(r){for(var e=["<p","<div","<br","<table"],i=!1,n=0;n<e.length;n++)if(r.match(e[n])){i=!0;break}i||(r=frappe.utils.replace_newlines(r))}return frappe.form.formatters.Data(r,t)},Time:function(r){return r&&(r=frappe.datetime.str_to_user(r,!0)),r||""},Duration:function(r,t){if(r){let e=frappe.utils.get_duration_options(t);r=frappe.utils.get_formatted_duration(r,e)}return r||"0s"},LikedBy:function(r){var t="";return $.each(JSON.parse(r||"[]"),function(e,i){i&&(t+=frappe.avatar(i))}),t},Tag:function(r){var t="";return $.each((r||"").split(","),function(e,i){i&&(t+=`
				<span
					class="data-pill btn-xs align-center ellipsis"
					style="background-color: var(--control-bg); box-shadow: none; margin-right: 4px;"
					data-field="_user_tags" data-label="${i}'">
					${i}
				</span>`)}),t},Comment:function(r){return r},Assign:function(r){var t="";return $.each(JSON.parse(r||"[]"),function(e,i){i&&(t+='<span class="label label-warning" 				style="margin-right: 7px;"				data-field="_assign">'+i+"</span>")}),t},SmallText:function(r){return frappe.form.formatters.Text(r)},TextEditor:function(r){let t=frappe.form.formatters.Text(r);try{!$(t).find(".ql-editor").length&&!$(t).hasClass("ql-editor")&&(t=`<div class="ql-editor read-mode">${t}</div>`)}catch(e){t=`<div class="ql-editor read-mode">${t}</div>`}return t},Code:function(r){return"<pre>"+(r==null?"":$("<div>").text(r).html())+"</pre>"},WorkflowState:function(r){var t=frappe.get_doc("Workflow State",r);return t?repl("<span class='label label-%(style)s' 				data-workflow-state='%(value)s'				style='padding-bottom: 4px; cursor: pointer;'>				<i class='fa fa-small fa-white fa-%(icon)s'></i> %(value)s</span>",{value:r,style:t.style.toLowerCase(),icon:t.icon}):"<span class='label'>"+r+"</span>"},Email:function(r){return $("<div></div>").text(r).html()},FileSize:function(r){return r=cint(r),r>1048576?(r/1048576).toFixed(2)+"M":r>1024?(r/1024).toFixed(2)+"K":r},TableMultiSelect:function(r,t,e){r=r||[];let n=frappe.get_meta(t.options).fields.find(s=>s.fieldtype==="Link");return r.map(s=>{let a=s[n.fieldname];return`<span class="text-nowrap">
				${frappe.format(a,n,e,s)}
			</span>`}).join(", ")},Color:r=>r?`<div>
			<div class="selected-color" style="background-color: ${r}"></div>
			<span class="color-value">${r}</span>
		</div>`:"",Icon:r=>r?`<div>
			<div class="selected-icon">${frappe.utils.icon(r,"md")}</div>
			<span class="icon-value">${r}</span>
		</div>`:"",Attach:Vs,AttachImage:Vs};function Vs(r){return r?`<a href="${r}" target="_blank">${r}</a>`:""}frappe.form.get_formatter=function(r){return r||(r="Data"),frappe.form.formatters[r.replace(/ /g,"")]||frappe.form.formatters.Data};frappe.format=function(r,t,e,i){t||(t={fieldtype:"Data"}),t.fieldname=="_user_tags"&&(t=mt(Ue({},t),{fieldtype:"Tag"}));var n=t.fieldtype||"Data";n==="Dynamic Link"&&(n="Link",t._options=i?i[t.options]:null);var o=t.formatter||frappe.form.get_formatter(n),s=o(r,t,e,i);return typeof s=="string"&&(s=frappe.dom.remove_script_and_style(s)),s};frappe.get_format_helper=function(r){var t={get_formatted:function(e){var i=frappe.meta.get_docfield(r.doctype,e);return i||console.log("fieldname not found: "+e),frappe.format(r[e],i,{inline:1},r)}};return $.extend(t,r),t};frappe.form.link_formatters.User=function(r,t,e){return t&&(t.full_name||e&&t[`${e.fieldname}_full_name`])||r};frappe.provide("frappe.dom");frappe.dom={id_count:0,freeze_count:0,by_id:function(r){return document.getElementById(r)},get_unique_id:function(){let r="unique-"+frappe.dom.id_count;return frappe.dom.id_count++,r},set_unique_id:function(r){var t=$(r);if(t.attr("id"))return t.attr("id");var e="unique-"+frappe.dom.id_count;return t.attr("id",e),frappe.dom.id_count++,e},eval:function(r){if(!!r){var t=document.createElement("script");t.appendChild(document.createTextNode(r)),document.getElementsByTagName("head")[0].appendChild(t)}},remove_script_and_style:function(r){let t=["script","style","noscript","title","meta","base","head"],i=new DOMParser().parseFromString(r,"text/html"),n=i.body,o=!!i.head.innerHTML;for(let s of t)for(let a of n.getElementsByTagName(s))o=!0,a.parentNode.removeChild(a);for(let s of n.getElementsByTagName("link")){let a=s.getAttribute("rel");a&&a.toLowerCase().trim()==="stylesheet"&&(o=!0,s.parentNode.removeChild(s))}return o?n.innerHTML:r},is_element_in_viewport:function(r,t=0){typeof jQuery=="function"&&r instanceof jQuery&&(r=r[0]);var e=r.getBoundingClientRect();return e.top+t>=0&&e.left+t>=0&&e.bottom-t<=$(window).height()&&e.right-t<=$(window).width()},is_element_in_modal(r){return Boolean($(r).parents(".modal").length)},set_style:function(r,t){if(!!r){var e=document.createElement("style");if(e.type="text/css",t){var i=document.getElementById(t);i&&i.parentNode.removeChild(i),e.id=t}return e.styleSheet?e.styleSheet.cssText=r:e.appendChild(document.createTextNode(r)),document.getElementsByTagName("head")[0].appendChild(e),e}},add:function(r,t,e,i,n,o){r&&r.substr&&(r=frappe.dom.by_id(r));var s=document.createElement(t);return r&&r.appendChild(s),e&&(t.toLowerCase()=="img"?s.src=e:s.className=e),i&&frappe.dom.css(s,i),n&&(s.innerHTML=n),o&&(s.onclick=o),s},css:function(r,t){return r&&t&&$.extend(r.style,t),r},activate:function(r,t,e,i="active"){r.find(`.${e}.${i}`).removeClass(i),t.addClass(i)},freeze:function(r,t){if($("#freeze").length)$("#freeze").addClass("in");else{var e=$('<div id="freeze" class="modal-backdrop fade"></div>').on("click",function(){if(cur_frm&&cur_frm.cur_grid)return cur_frm.cur_grid.toggle_view(),!1}).appendTo("#body");e.html(repl('<div class="freeze-message-container"><div class="freeze-message"><p class="lead">%(msg)s</p></div></div>',{msg:r||""})),setTimeout(function(){e.addClass("in")},1)}t&&$("#freeze").addClass(t),frappe.dom.freeze_count++},unfreeze:function(){if(!!frappe.dom.freeze_count&&(frappe.dom.freeze_count--,!frappe.dom.freeze_count))var r=$("#freeze").removeClass("in").remove()},save_selection:function(){if(window.getSelection){var r=window.getSelection();if(r.getRangeAt&&r.rangeCount){for(var t=[],e=0,i=r.rangeCount;e<i;++e)t.push(r.getRangeAt(e));return t}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},restore_selection:function(r){if(r)if(window.getSelection){var t=window.getSelection();t.removeAllRanges();for(var e=0,i=r.length;e<i;++e)t.addRange(r[e])}else document.selection&&r.select&&r.select()},is_touchscreen:function(){return"ontouchstart"in window},handle_broken_images(r){$(r).find("img").on("error",t=>{$(t.currentTarget).addClass("no-image")})},scroll_to_bottom(r){let t=$(r);t.scrollTop(t[0].scrollHeight)},file_to_base64(r){return new Promise(t=>{let e=new FileReader;e.onload=function(){t(e.result)},e.readAsDataURL(r)})},scroll_to_section(r){setTimeout(()=>{let t=$(`a:contains("${r}")`);t.length&&(t.parent().hasClass("collapsed")&&t.click(),frappe.ui.scroll(t.parent().parent()))},200)},pixel_to_inches(r){let t=$('<div id="dpi" style="height: 1in; width: 1in; left: 100%; position: fixed; top: 100%;"></div>');t.appendTo(document.body);let e=document.getElementById("dpi").offsetWidth,i=r/e;return t.remove(),i}};frappe.ellipsis=function(r,t){return t||(t=20),r=cstr(r),r.length>t&&(r=r.substr(0,t)+"..."),r};frappe.run_serially=function(r){var t=Promise.resolve();return r.forEach(e=>{e&&(t=t.then?t.then(e):Promise.resolve())}),t};frappe.load_image=(r,t,e,i=()=>{})=>{var n=new Image;n.onload=function(){t(this)},n.onerror=e,i(n),n.src=r};frappe.timeout=r=>new Promise(t=>{setTimeout(()=>t(),r*1e3)});frappe.scrub=function(r,t="_"){return r.replace(/ /g,t).toLowerCase()};frappe.unscrub=function(r){return frappe.model.unscrub(r)};frappe.get_data_pill=(r,t=null,e=null,i=null)=>{let n=$(`
		<button class="data-pill btn">
			<div class="flex align-center ellipsis">
				${i||""}
				<span class="pill-label">${r}</span>
			</div>
		</button>
	`);if(e){let o=$(`
			<span class="remove-btn cursor-pointer">
				${frappe.utils.icon("close","sm")}
			</span>
		`).click(()=>{e(t||r,n)});n.append(o)}return n};frappe.get_modal=function(r,t){return $(`<div class="modal fade" style="overflow: auto;" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<div class="fill-width flex title-section">
						<span class="indicator hidden"></span>
						<h4 class="modal-title">${r}</h4>
					</div>
					<div class="modal-actions">
						<button class="btn btn-modal-minimize btn-link hide">
							${frappe.utils.icon("collapse")}
						</button>
						<button class="btn btn-modal-close btn-link" data-dismiss="modal">
							${frappe.utils.icon("close-alt","sm","close-alt")}
						</button>
					</div>
				</div>
				<div class="modal-body ui-front">${t}</div>
				<div class="modal-footer hide">
					<div class="custom-actions"></div>
					<div class="standard-actions">
						<button type="button" class="btn btn-secondary btn-sm hide btn-modal-secondary">
						</button>
						<button type="button" class="btn btn-primary btn-sm hide btn-modal-primary">
							${__("Confirm")}
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>`)};frappe.is_online=function(){return frappe.boot.developer_mode==1?!0:"onLine"in navigator?navigator.onLine:!0};frappe.create_shadow_element=function(r,t,e,i){let n="custom-block-"+frappe.utils.get_random(5).toLowerCase();class o extends HTMLElement{constructor(){var p,g,m,k;super();let a=document.createElement("div");a.innerHTML=frappe.dom.remove_script_and_style(t);let l=document.createElement("link");l.rel="stylesheet",l.href=frappe.assets.bundled_asset("desk.bundle.css");let u=document.createElement("style");u.textContent=e;let d=document.createElement("script");d.textContent=`
				(function() {
					let cname = ${JSON.stringify(n)};
					let root_element = document.querySelector(cname).shadowRoot;
					${i}
				})();
			`,this.attachShadow({mode:"open"}),(p=this.shadowRoot)==null||p.appendChild(l),(g=this.shadowRoot)==null||g.appendChild(a),(m=this.shadowRoot)==null||m.appendChild(u),(k=this.shadowRoot)==null||k.appendChild(d)}}customElements.get(n)||customElements.define(n,o),r.innerHTML=`<${n}></${n}>`};$(window).on("online",function(){document.hidden||frappe.show_alert({indicator:"green",message:__("You are connected to internet.")})});$(window).on("offline",function(){document.hidden||frappe.show_alert({indicator:"orange",message:__("Connection lost. Some features might not work.")})});var fi=class{constructor(t,e,i,n){this.layout=n,this.card_layout=i,this.parent=t,this.df=e||{},this.columns=[],this.fields_list=[],this.fields_dict={},this.make(),this.df.label&&this.df.collapsible&&localStorage.getItem(e.css_class+"-closed")&&this.collapse(),this.row={wrapper:this.wrapper},this.refresh()}make(){let t=this.card_layout;this.wrapper=$(`<div class="row
				${this.df.is_dashboard_section?"form-dashboard-section":"form-section"}
				${t?"card-section":""}" data-fieldname="${this.df.fieldname}">
			`).appendTo(this.parent),this.df&&(this.df.label&&this.make_head(),this.df.description&&(this.description_wrapper=$(`<div class="col-sm-12 form-section-description">
						${__(this.df.description)}
					</div>`),this.wrapper.append(this.description_wrapper)),this.df.css_class&&this.wrapper.addClass(this.df.css_class),this.df.hide_border&&this.wrapper.toggleClass("hide-border",!0)),this.body=$('<div class="section-body">').appendTo(this.wrapper),this.df.body_html&&this.body.append(this.df.body_html)}make_head(){this.head=$(`
			<div class="section-head">
				${__(this.df.label)}
				<span class="ml-2 collapse-indicator mb-1"></span>
			</div>
		`),this.head.appendTo(this.wrapper),this.indicator=this.head.find(".collapse-indicator"),this.indicator.hide(),this.df.collapsible&&(this.head.addClass("collapsible"),this.collapse_link=this.head.on("click",()=>{this.collapse()}),this.set_icon(),this.indicator.show())}replace_field(t,e){var i;if((i=this.fields_dict[t])!=null&&i.df){let n=this.fields_dict[t],o=this.fields_list.findIndex(s=>s==n);this.fields_list.splice(o,1,e),this.fields_dict[t]=e,e.section=this}}add_field(t){this.fields_list.push(t),this.fields_dict[t.df.fieldname]=t,t.section=this}refresh(t){!this.df||(t=t||this.df.hidden||this.df.hidden_due_to_dependency,this.wrapper.toggleClass("hide-control",!!t))}collapse(t){!(this.head&&this.body)||(t===void 0&&(t=!this.body.hasClass("hide")),this.body.toggleClass("hide",t),this.head&&this.head.toggleClass("collapsed",t),this.set_icon(t),this.fields_list.forEach(e=>e.on_section_collapse&&e.on_section_collapse(t)),this.df.css_class&&localStorage.setItem(this.df.css_class+"-closed",t?"1":""))}set_icon(t){let e=t?"es-line-down":"es-line-up";this.indicator&&this.indicator.html(frappe.utils.icon(e,"sm","mb-1"))}is_collapsed(){return this.body.hasClass("hide")}has_missing_mandatory(){let t=!1;for(let e=0,i=this.fields_list.length;e<i;e++){let n=this.fields_list[e].df;if(n.reqd&&this.layout.doc[n.fieldname]==null){t=!0;break}}return t}hide(){this.on_section_toggle(!1)}show(){this.on_section_toggle(!0)}on_section_toggle(t){this.wrapper.toggleClass("hide-control",!t)}};var pi=class{constructor(t,e,i,n,o){this.layout=t,this.df=e||{},this.frm=i,this.doctype=this.frm.doctype,this.label=this.df&&this.df.label,this.tab_link_container=n,this.tabs_content=o,this.make(),this.setup_listeners(),this.refresh()}make(){let t=`${frappe.scrub(this.doctype,"-")}-${this.df.fieldname}`;this.tab_link=$(`
			<li class="nav-item">
				<a class="nav-link ${this.df.active?"active":""}" id="${t}-tab"
					data-toggle="tab"
					data-fieldname="${this.df.fieldname}"
					href="#${t}"
					role="tab"
					aria-controls="${this.label}">
						${__(this.label)}
				</a>
			</li>
		`).appendTo(this.tab_link_container),this.wrapper=$(`<div class="tab-pane fade show ${this.df.active?"active":""}"
			id="${t}" role="tabpanel" aria-labelledby="${t}-tab">`).appendTo(this.tabs_content)}refresh(){if(!this.df)return;let t=this.df.hidden||this.df.hidden_due_to_dependency;!t&&this.frm&&!this.frm.get_perm(this.df.permlevel||0,"read")&&(t=!0),t||(t=!0,this.wrapper.find(".form-section:not(.hide-control, .empty-section), .form-dashboard-section:not(.hide-control, .empty-section)").length&&(t=!1)),this.toggle(!t)}toggle(t){this.tab_link.toggleClass("hide",!t),this.wrapper.toggleClass("hide",!t),this.tab_link.toggleClass("show",t),this.wrapper.toggleClass("show",t),this.hidden=!t}show(){this.tab_link.show()}hide(){this.tab_link.hide()}add_field(t){t.tab=this}replace_field(t){t.tab=this}set_active(){var t,e;this.tab_link.find(".nav-link").tab("show"),this.wrapper.addClass("show"),(e=(t=this.frm)==null?void 0:t.set_active_tab)==null||e.call(t,this)}is_active(){return this.wrapper.hasClass("active")}is_hidden(){return this.wrapper.hasClass("hide")&&this.tab_link.hasClass("hide")}setup_listeners(){this.tab_link.find(".nav-link").on("shown.bs.tab",()=>{var t,e;(e=this==null?void 0:(t=this.frm).set_active_tab)==null||e.call(t,this)})}};var hi=class{constructor(t,e){e||(e={}),this.df=e,this.section=t,this.section.columns.push(this),this.make(),this.resize_all_columns()}make(){this.wrapper=$(`
			<div class="form-column" data-fieldname="${this.df.fieldname}">
				<form>
				</form>
			</div>
		`).appendTo(this.section.body),this.form=this.wrapper.find("form").on("submit",()=>!1),this.df.description&&$(`
				<p class="col-sm-12 form-column-description">
					${__(this.df.description)}
				</p>
			`).prependTo(this.wrapper),this.df.label&&$(`
				<label class="column-label">
					${__(this.df.label)}
				</label>
			`).prependTo(this.wrapper)}resize_all_columns(){let t=this.section.wrapper.find(".form-column").length,e=cint(12/t);t==5&&(e=20),this.section.wrapper.find(".form-column").removeClass().addClass("form-column").addClass("col-sm-"+e)}add_field(){}refresh(){this.section.refresh()}};frappe.ui.form.Layout=class{constructor(t){this.views={},this.pages=[],this.tabs=[],this.sections=[],this.page_breaks=[],this.sections_dict={},this.fields_list=[],this.fields_dict={},this.section_count=0,this.column_count=0,$.extend(this,t)}make(){!this.parent&&this.body&&(this.parent=this.body),this.wrapper=$('<div class="form-layout">').appendTo(this.parent),this.message=$('<div class="form-message hidden"></div>').appendTo(this.wrapper),this.page=$('<div class="form-page"></div>').appendTo(this.wrapper),this.fields||(this.fields=this.get_doctype_fields()),this.is_tabbed_layout()&&this.setup_tabbed_layout(),this.setup_tab_events(),this.frm&&this.setup_tooltip_events(),this.render()}setup_tabbed_layout(){$(`
			<div class="form-tabs-list">
				<ul class="nav form-tabs" id="form-tabs" role="tablist"></ul>
			</div>
		`).appendTo(this.page),this.tab_link_container=this.page.find(".form-tabs"),this.tabs_content=$('<div class="form-tab-content tab-content"></div>').appendTo(this.page),this.setup_events()}get_doctype_fields(){let t=[this.get_new_name_field()];return this.doctype_layout?t=t.concat(this.get_fields_from_layout()):t=t.concat(frappe.meta.sort_docfields(frappe.meta.docfield_map[this.doctype])),t}get_new_name_field(){return{parent:this.frm.doctype,fieldtype:"Data",fieldname:"__newname",reqd:1,hidden:1,label:__("Name"),get_status:function(t){return t.frm&&t.frm.is_new()&&t.frm.meta.autoname&&["prompt","name"].includes(t.frm.meta.autoname.toLowerCase())?"Write":"None"}}}get_fields_from_layout(){let t=[];for(let e of this.doctype_layout.fields){let i=copy_dict(frappe.meta.docfield_map[this.doctype][e.fieldname]);i.label=e.label,t.push(i)}return t}show_message(t,e){this.message_color&&this.message.removeClass(this.message_color);let i=$(`<div class="close-message">${frappe.utils.icon("close")}</div>`);this.message_color=e&&["yellow","blue","red","green","orange"].includes(e)?e:"blue",t?(t.substr(0,1)!=="<"&&(t="<div>"+t+"</div>"),this.message.removeClass("hidden").addClass(this.message_color),$(t).appendTo(this.message),i.appendTo(this.message),i.on("click",()=>this.message.empty().addClass("hidden"))):this.message.empty().addClass("hidden")}render(t){let e=t||this.fields;if(this.section=null,this.column=null,this.no_opening_section()&&!this.is_tabbed_layout()&&this.fields.unshift({fieldtype:"Section Break"}),this.is_tabbed_layout()){let i={label:__("Details"),fieldtype:"Tab Break",fieldname:"__details"},n=this.fields.find(s=>s.hidden==!1);if(!((n==null?void 0:n.fieldtype)==="Tab Break"?n:null))this.fields.splice(0,0,i);else{let s=this.fields.find(a=>a.fieldname==="__newname");s&&s.get_status(this)==="Write"&&(this.fields.splice(0,1),this.fields.splice(1,0,s))}}e.forEach(i=>{switch(i.fieldtype){case"Fold":this.make_page(i);break;case"Page Break":this.make_page_break(),this.make_section(i);break;case"Section Break":this.make_section(i);break;case"Column Break":this.make_column(i);break;case"Tab Break":this.make_tab(i);break;default:this.make_field(i)}})}no_opening_section(){return this.fields[0]&&this.fields[0].fieldtype!="Section Break"||!this.fields.length}no_opening_tab(){return this.fields[1]&&this.fields[1].fieldtype!="Tab Break"||!this.fields.length}is_tabbed_layout(){return this.fields.find(t=>t.fieldtype==="Tab Break")}replace_field(t,e,i){var n;if(e.fieldname=t,this.fields_dict[t]&&this.fields_dict[t].df){let o=this.fields_dict[t],s=this.init_field(e,o.parent,i);o.$wrapper.replaceWith(s.$wrapper);let a=this.fields_list.findIndex(l=>l==o);this.fields_list.splice(a,1,s),this.fields_dict[t]=s,this.sections.forEach(l=>l.replace_field(t,s)),(n=o.tab)==null||n.replace_field(s),this.refresh_fields([e])}}make_field(t,e,i){!this.section&&this.make_section(),!this.column&&this.make_column();let n=this.column.form.get(0),o=this.init_field(t,n,i);this.fields_list.push(o),this.fields_dict[t.fieldname]=o,this.section.add_field(o),this.column.add_field(o),this.current_tab&&this.current_tab.add_field(o)}init_field(t,e,i=!1){let n=frappe.ui.form.make_control({df:t,doctype:this.doctype,parent:e,frm:this.frm,render_input:i,doc:this.doc,layout:this});return n.layout=this,n}make_page_break(){this.page=$('<div class="form-page page-break"></div>').appendTo(this.wrapper)}make_page(t){let e=this,i=$(`
			<div class="form-clickable-section text-center">
				<a class="btn-fold h6 text-muted">
					${__("Show more details")}
				</a>
			</div>
		`).appendTo(this.wrapper);this.page=$('<div class="form-page second-page hide"></div>').appendTo(this.wrapper),this.fold_btn=i.find(".btn-fold").on("click",function(){let n=$(this).parent().next();n.hasClass("hide")?($(this).removeClass("btn-fold").html(__("Hide details")),n.removeClass("hide"),frappe.utils.scroll_to($(this),!0,30),e.folded=!1):($(this).addClass("btn-fold").html(__("Show more details")),n.addClass("hide"),e.folded=!0)}),this.section=null,this.folded=!0}unfold(){this.fold_btn.trigger("click")}make_section(t={}){this.section_count++,t.fieldname||(t.fieldname=`__section_${this.section_count}`,t.fieldtype="Section Break"),this.section=new fi(this.current_tab?this.current_tab.wrapper:this.page,t,this.card_layout,this),this.sections.push(this.section),this.sections_dict[t.fieldname]=this.section,t&&(this.fields_dict[t.fieldname]=this.section,this.fields_list.push(this.section)),this.column=null}make_column(t={}){this.column_count++,t.fieldname||(t.fieldname=`__column_${this.section_count}`,t.fieldtype="Column Break"),this.column=new hi(this.section,t),t&&t.fieldname&&this.fields_list.push(this.column)}make_tab(t){this.section=null;let e=new pi(this,t,this.frm,this.tab_link_container,this.tabs_content);return this.current_tab=e,this.make_section({fieldtype:"Section Break"}),this.tabs.push(e),e}refresh(t){t&&(this.doc=t),this.frm&&this.wrapper.find(".empty-form-alert").remove(),this.attach_doc_and_docfields(!0),this.frm&&this.frm.wrapper&&$(this.frm.wrapper).trigger("refresh-fields"),this.refresh_dependency(),this.refresh_sections(),this.frm&&this.refresh_section_collapse(),document.activeElement&&document.activeElement.tagName=="INPUT"&&this.is_numeric_field_active()&&document.activeElement.select()}is_numeric_field_active(){let e=($(document.activeElement).closest(".frappe-control").data()||{}).fieldtype;return frappe.model.numeric_fieldtypes.includes(e)}refresh_sections(){this.wrapper.find(".form-section:not(.hide-control)").each(function(){let t=$(this).removeClass("empty-section visible-section");t.find(".frappe-control:not(.hide-control)").length?t.addClass("visible-section"):(t.parent().hasClass("tab-pane")||t.parent().hasClass("form-page"))&&t.addClass("empty-section")}),this.is_tabbed_layout()&&this.refresh_tabs()}refresh_tabs(){for(let e of this.tabs)e.refresh();let t=this.tabs.filter(e=>!e.hidden);t&&t.length==1&&t[0].tab_link.toggleClass("hide show"),this.set_tab_as_active()}select_tab(t){var e;for(let i of this.tabs)if(i.label.toLowerCase()===t.toLowerCase()||((e=i.df.fieldname)==null?void 0:e.toLowerCase())===t.toLowerCase()){i.set_active();return}}set_tab_as_active(){var e,i;let t=(i=this==null?void 0:(e=this.frm).get_active_tab)==null?void 0:i.call(e);if(t)t.set_active();else if(this.tabs.length){let n=this.tabs.find(o=>!o.is_hidden());n&&n.set_active()}}refresh_fields(t){let e=t.map(i=>{if(i.fieldname)return i.fieldname});this.fields_list.map(i=>{e.includes(i.df.fieldname)&&(i.refresh(),i.df.default&&i.set_input(i.df.default))})}add_fields(t){this.render(t),this.refresh_fields(t)}refresh_section_collapse(){if(!!(this.sections&&this.sections.length))for(let t=0;t<this.sections.length;t++){let e=this.sections[t],i=e.df;if(i&&i.collapsible){let n=!0;i.collapsible_depends_on&&(n=!this.evaluate_depends_on_value(i.collapsible_depends_on)),n&&e.has_missing_mandatory()&&(n=!1),e.collapse(n)}}}attach_doc_and_docfields(t){let e=this;for(let i=0,n=this.fields_list.length;i<n;i++){let o=this.fields_list[i];e.doc&&(o.doc=e.doc,o.doctype=e.doc.doctype,o.docname=e.doc.name,o.df=frappe.meta.get_docfield(e.doc.doctype,o.df.fieldname,e.doc.name)||o.df),t&&o.df&&o.refresh&&o.refresh()}}refresh_section_count(){this.wrapper.find(".section-count-label:visible").each(function(t){$(this).html(t+1)})}setup_events(){let t=0,e=$(".form-tabs-list"),i=this.tabs_content[0];!e.length||($(window).scroll(frappe.utils.throttle(()=>{let n=document.documentElement.scrollTop;n>0&&t<=n?(e.removeClass("form-tabs-sticky-down"),e.addClass("form-tabs-sticky-up")):(e.removeClass("form-tabs-sticky-up"),e.addClass("form-tabs-sticky-down")),t=n},500)),this.tab_link_container.off("click").on("click",".nav-link",n=>{n.preventDefault(),n.stopImmediatePropagation(),$(n.currentTarget).tab("show"),i.getBoundingClientRect().top<100&&(i.scrollIntoView(),setTimeout(()=>{$(".page-head").css("top","-15px"),$(".form-tabs-list").removeClass("form-tabs-sticky-down"),$(".form-tabs-list").addClass("form-tabs-sticky-up")},3))}))}setup_tab_events(){this.wrapper.on("keydown",t=>{if(t.which==9){let e=$(t.target),i=e.attr("data-doctype"),n=e.attr("data-fieldname");if(i)return this.handle_tab(i,n,t.shiftKey)}})}setup_tooltip_events(){$(document).on("keydown",t=>{t.altKey&&this.wrapper.addClass("show-tooltip")}),$(document).on("keyup",t=>{t.altKey||this.wrapper.removeClass("show-tooltip")}),this.frm.page&&frappe.ui.keys.add_shortcut({shortcut:"alt+hover",page:this.frm.page,description:__("Show Fieldname (click to copy on clipboard)")})}handle_tab(t,e,i){let n=null,o=null,s=this.fields_list,a=!1;if(t!=this.doctype){if(n=this.get_open_grid_row(),!n||!n.layout)return;s=n.layout.fields_list}for(let l=0,u=s.length;l<u;l++){if(s[l].df.fieldname==e){if(i){o?this.set_focus(o):$(this.primary_button).focus();break}if(l<u-1&&(a=this.focus_on_next_field(l,s)),a)break}this.is_visible(s[l])&&(o=s[l])}return a||(n?n.doc.idx==n.grid.grid_rows.length?n.toggle_view(!1,function(){n.grid.frm.layout.handle_tab(n.grid.df.parent,n.grid.df.fieldname)}):n.grid.grid_rows[n.doc.idx].toggle_view(!0):i||$(this.primary_button).focus()),!1}focus_on_next_field(t,e){for(let i=t+1,n=e.length;i<n;i++){let o=e[i];if(this.is_visible(o)){if(o.df.fieldtype==="Table")return o.grid.grid_rows&&o.grid.grid_rows.length||o.grid.add_new_row(),o.grid.grid_rows[0].show_form(),!0;if(!frappe.model.no_value_type.includes(o.df.fieldtype))return this.set_focus(o),!0}}}is_visible(t){return t.disp_status==="Write"&&t.df&&"hidden"in t.df&&!t.df.hidden}set_focus(t){t.tab&&t.tab.set_active(),t.df.fieldtype=="Table"?t.grid.grid_rows.length?t.grid.grid_rows[0].toggle_view(!0):t.grid.add_new_row(1):t.editor?t.editor.set_focus():t.$input&&t.$input.focus()}get_open_grid_row(){return $(".grid-row-open").data("grid_row")}refresh_dependency(){let t=!1,e=this.fields_list.concat(this.tabs);for(let i in e){let n=e[i];if(n.df.depends_on||n.df.mandatory_depends_on||n.df.read_only_depends_on){t=!0;break}}if(!!t){for(let i=e.length-1;i>=0;i--){let n=e[i];n.guardian_has_value=!0,n.df.depends_on&&(n.guardian_has_value=this.evaluate_depends_on_value(n.df.depends_on),n.guardian_has_value?n.df.hidden_due_to_dependency&&(n.df.hidden_due_to_dependency=!1,n.refresh()):n.df.hidden_due_to_dependency||(n.df.hidden_due_to_dependency=!0,n.refresh())),n.df.mandatory_depends_on&&this.set_dependant_property(n.df.mandatory_depends_on,n.df.fieldname,"reqd"),n.df.read_only_depends_on&&this.set_dependant_property(n.df.read_only_depends_on,n.df.fieldname,"read_only")}this.refresh_section_count()}}set_dependant_property(t,e,i){let o=this.evaluate_depends_on_value(t)?1:0,s;this.frm?s=this.frm:(this.is_dialog||this.doctype==="Web Form")&&(s=this),s&&(this.doc&&this.doc.parent&&this.doc.parentfield?(s.setting_dependency=!0,s.set_df_property(this.doc.parentfield,i,o,this.doc.parent,e,this.doc.name),s.setting_dependency=!1,this.fields_dict[e]&&this.fields_dict[e].refresh()):s.set_df_property(e,i,o))}evaluate_depends_on_value(t){let e=null,i=this.doc;if(!i&&this.get_values&&(i=this.get_values(!0)),!i)return;let n=this.frm?this.frm.doc:this.doc||null;if(typeof t=="boolean")e=t;else if(typeof t=="function")e=t(i);else if(t.substr(0,5)=="eval:")try{e=frappe.utils.eval(t.substr(5),{doc:i,parent:n}),n&&n.istable&&t.includes("is_submittable")&&(e=!0)}catch(s){frappe.throw(__('Invalid "depends_on" expression'))}else if(t.substr(0,3)=="fn:"&&this.frm)e=this.frm.script_manager.trigger(t.substr(3),this.doctype,this.docname);else{var o=i[t];$.isArray(o)?e=!!o.length:e=!!o}return e}};frappe.provide("frappe.ui");frappe.ui.FieldGroup=class extends frappe.ui.form.Layout{constructor(t){super(t),this.dirty=!1,$.each(this.fields||[],function(e,i){!i.fieldname&&i.label&&(i.fieldname=i.label.replace(/ /g,"_").toLowerCase())}),this.values&&this.set_values(this.values)}make(){let t=this;this.fields&&(super.make(),this.refresh(),$.each(this.fields_list,function(e,i){if(i.df.default){let n=i.df.default;n=="Today"&&i.df.fieldtype=="Date"&&(n=frappe.datetime.get_today()),i.set_input(n),t.refresh_dependency()}}),this.no_submit_on_enter||this.catch_enter_as_submit(),$(this.wrapper).find("input, select").on("change awesomplete-selectcomplete",()=>{this.dirty=!0,frappe.run_serially([()=>frappe.timeout(.1),()=>t.refresh_dependency()])}))}focus_on_first_input(){this.no_focus||$.each(this.fields_list,function(t,e){if(!["Date","Datetime","Time","Check"].includes(e.df.fieldtype)&&e.set_focus)return e.set_focus(),!1})}catch_enter_as_submit(){let t=this;$(this.body).find('input[type="text"], input[type="password"], select').keypress(function(e){e.which==13&&t.has_primary_action&&(e.preventDefault(),t.get_primary_btn().trigger("click"))})}get_input(t){let e=this.fields_dict[t];return e?$(e.txt?e.txt:e.input):""}get_field(t){return this.fields_dict[t]}get_values(t,e){let i={},n=[],o=[];for(let s in this.fields_dict){let a=this.fields_dict[s];if(a.get_value){let l=a.get_value();a.df.reqd&&is_null(typeof l=="string"?strip_html(l):l)&&n.push(__(a.df.label)),a.df.reqd&&a.df.fieldtype==="Text Editor"&&is_null(strip_html(cstr(l)))&&n.push(__(a.df.label)),is_null(l)||(i[a.df.fieldname]=l)}this.is_dialog&&a.df.reqd&&!a.value&&a.refresh_input(),a.df.invalid&&o.push(__(a.df.label))}return n.length&&!t?(frappe.msgprint({title:__("Missing Values Required"),message:__("Following fields have missing values:")+"<br><br><ul><li>"+n.join("<li>")+"</ul>",indicator:"orange"}),null):o.length&&e?(frappe.msgprint({title:__("Inavlid Values"),message:__("Following fields have invalid values:")+"<br><br><ul><li>"+o.join("<li>")+"</ul>",indicator:"orange"}),null):i}get_value(t){let e=this.fields_dict[t];return e&&(e.get_value?e.get_value():null)}set_value(t,e){return new Promise(i=>{let n=this.fields_dict[t];n?n.set_value(e).then(()=>{var o;(o=n.set_input)==null||o.call(n,e),this.refresh_dependency(),i()}):i()})}has_field(t){return!!this.fields_dict[t]}set_input(t,e){return this.set_value(t,e)}set_values(t){let e=[];for(let i in t)this.fields_dict[i]&&e.push(this.set_value(i,t[i]));return Promise.all(e)}clear(){for(let t in this.fields_dict){let e=this.fields_dict[t];e&&e.set_input&&e.set_input(e.df.default||"")}}set_df_property(t,e,i){if(!t)return;let n=this.get_field(t);n.df[e]=i,n.refresh()}};frappe.provide("frappe.ui");window.cur_dialog=null;frappe.ui.open_dialogs=[];frappe.ui.Dialog=class extends frappe.ui.FieldGroup{constructor(t){super(),this.display=!1,this.is_dialog=!0,$.extend(this,{animate:!0,size:null},t),this.make()}make(){this.$wrapper=frappe.get_modal("",""),this.static&&(this.$wrapper.modal({backdrop:"static",keyboard:!1}),this.get_close_btn().hide()),this.size||this.set_modal_size(),this.wrapper=this.$wrapper.find(".modal-dialog").get(0),this.size=="small"?$(this.wrapper).addClass("modal-sm"):this.size=="large"?$(this.wrapper).addClass("modal-lg"):this.size=="extra-large"&&$(this.wrapper).addClass("modal-xl"),this.make_head(),this.modal_body=this.$wrapper.find(".modal-body"),this.$body=$("<div></div>").appendTo(this.modal_body),this.body=this.$body.get(0),this.$message=$('<div class="hide modal-message"></div>').appendTo(this.modal_body),this.header=this.$wrapper.find(".modal-header"),this.footer=this.$wrapper.find(".modal-footer"),this.standard_actions=this.footer.find(".standard-actions"),this.custom_actions=this.footer.find(".custom-actions"),this.set_indicator(),super.make(),this.refresh_section_collapse(),this.action=this.action||{primary:{},secondary:{}},(this.primary_action||this.action.primary&&this.action.primary.onsubmit)&&this.set_primary_action(this.primary_action_label||this.action.primary.label||__("Submit",null,"Primary action in dialog"),this.primary_action||this.action.primary.onsubmit),this.secondary_action&&this.set_secondary_action(this.secondary_action),(this.secondary_action_label||this.action.secondary&&this.action.secondary.label)&&this.set_secondary_action_label(this.secondary_action_label||this.action.secondary.label),this.minimizable&&(this.header.find(".title-section").click(()=>this.is_minimized&&this.toggle_minimize()),this.get_minimize_btn().removeClass("hide").on("click",()=>this.toggle_minimize()));var t=this;this.$wrapper.on("hide.bs.modal",function(){var e,i,n;t.display=!1,t.is_minimized=!1,t.hide_scrollbar(!1),(n=(i=(e=frappe.ui.form).get_open_grid_form)==null?void 0:i.call(e))==null||n.hide_form(),frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1]===t&&(frappe.ui.open_dialogs.pop(),frappe.ui.open_dialogs.length?window.cur_dialog=frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1]:window.cur_dialog=null),t.onhide&&t.onhide(),t.on_hide&&t.on_hide()}).on("shown.bs.modal",function(){t.display=!0,window.cur_dialog=t,frappe.ui.open_dialogs.push(t),t.focus_on_first_input(),t.hide_scrollbar(!0),t.on_page_show&&t.on_page_show(),$(document).trigger("frappe.ui.Dialog:shown"),$(document).off("focusin.modal")}).on("scroll",function(){var e=$("input:focus");e.length&&["Date","Datetime","Time"].includes(e.attr("data-fieldtype"))&&e.blur()})}set_modal_size(){if(!this.fields){this.size="";return}let t=0,e=0;this.fields.forEach(i=>{i.fieldtype=="Column Break"?(e++,e>t&&(t=e)):i.fieldtype=="Section Break"&&(e=0)}),this.size=t>=4?"extra-large":t>=2?"large":""}get_primary_btn(){return this.standard_actions.find(".btn-primary")}get_minimize_btn(){return this.$wrapper.find(".modal-header .btn-modal-minimize")}set_message(t){this.$message.removeClass("hide"),this.$body.addClass("hide"),this.$message.text(t)}clear_message(){this.$message.addClass("hide"),this.$body.removeClass("hide")}clear(){super.clear(),this.clear_message()}set_primary_action(t,e){this.footer.removeClass("hide"),this.has_primary_action=!0;var i=this;let n=this.get_primary_btn().removeClass("hide").html(t);return typeof e=="function"&&n.off("click").on("click",function(){i.primary_action_fulfilled=!0;var o=i.get_values();!o||e&&e.apply(i,[o])}),n}set_secondary_action(t){return this.footer.removeClass("hide"),this.get_secondary_btn().removeClass("hide").off("click").on("click",t)}set_secondary_action_label(t){this.get_secondary_btn().removeClass("hide").html(t)}disable_primary_action(){this.get_primary_btn().addClass("disabled")}enable_primary_action(){this.get_primary_btn().removeClass("disabled")}make_head(){this.set_title(this.title)}set_title(t){this.$wrapper.find(".modal-title").html(t)}set_indicator(){this.indicator&&this.header.find(".indicator").removeClass().addClass("indicator "+this.indicator)}show(){return this.animate?this.$wrapper.addClass("fade"):this.$wrapper.removeClass("fade"),this.$wrapper.modal("show"),this.$wrapper.removeClass("modal-minimize"),this.minimizable&&this.is_minimized&&($(".modal-backdrop").toggle(),this.is_minimized=!1),this.clear_message(),this.primary_action_fulfilled=!1,this.is_visible=!0,this}hide(){this.$wrapper.modal("hide"),this.is_visible=!1}get_close_btn(){return this.$wrapper.find(".btn-modal-close")}get_secondary_btn(){return this.standard_actions.find(".btn-modal-secondary")}no_cancel(){this.get_close_btn().toggle(!1)}cancel(){this.get_close_btn().trigger("click")}toggle_minimize(){$(".modal-backdrop").toggle();let t=this.$wrapper.closest(".modal").toggleClass("modal-minimize");t.attr("tabindex")?t.removeAttr("tabindex"):t.attr("tabindex",-1),this.is_minimized=!this.is_minimized;let e=this.is_minimized?"expand":"collapse";this.get_minimize_btn().html(frappe.utils.icon(e)),this.on_minimize_toggle&&this.on_minimize_toggle(this.is_minimized),this.header.find(".modal-title").toggleClass("cursor-pointer"),this.hide_scrollbar(!this.is_minimized)}hide_scrollbar(t){$("body").css("overflow",t?"hidden":"auto")}add_custom_action(t,e,i=null){this.footer.removeClass("hide");let n=$(`
			<button class="btn btn-secondary btn-sm ${i||""}">
				${t}
			</button>
		`);this.custom_actions.append(n),e&&n.click(e)}};frappe.ui.hide_open_dialog=()=>{window.cur_dialog&&(cur_dialog.minimizable?cur_dialog.is_minimized||cur_dialog.toggle_minimize():cur_dialog.hide())};frappe.provide("frappe.messages");frappe.messages.waiting=function(r,t){return $(frappe.messages.get_waiting_message(t)).appendTo(r)};frappe.messages.get_waiting_message=function(r){return repl('<div class="msg-box" style="width: 63%; margin: 30px auto;">		<p class="text-center">%(msg)s</p></div>',{msg:r})};frappe.throw=function(r){throw typeof r=="string"&&(r={message:r,title:__("Error")}),r.indicator||(r.indicator="red"),frappe.msgprint(r),new Error(r.message)};frappe.confirm=function(r,t,e){var i=new frappe.ui.Dialog({title:__("Confirm",null,"Title of confirmation dialog"),primary_action_label:__("Yes",null,"Approve confirmation dialog"),primary_action:()=>{t&&t(),i.hide()},secondary_action_label:__("No",null,"Dismiss confirmation dialog"),secondary_action:()=>i.hide()});return i.$body.append(`<p class="frappe-confirm-message">${r}</p>`),i.show(),i.confirm_dialog=!0,e&&(i.onhide=()=>{i.primary_action_fulfilled||e()}),i};frappe.warn=function(r,t,e,i,n){let o=new frappe.ui.Dialog({title:r,indicator:"red",primary_action_label:i,primary_action:()=>{e&&e(),o.hide()},secondary_action_label:__("Cancel",null,"Secondary button in warning dialog"),secondary_action:()=>o.hide(),minimizable:n});return o.$body.append(`<div class="frappe-confirm-message">${t}</div>`),o.standard_actions.find(".btn-primary").removeClass("btn-primary").addClass("btn-danger"),o.show(),o};frappe.prompt=function(r,t,e,i){typeof r=="string"&&(r=[{label:r,fieldname:"value",fieldtype:"Data",reqd:1}]),$.isArray(r)||(r=[r]);var n=new frappe.ui.Dialog({fields:r,title:e||__("Enter Value",null,"Title of prompt dialog")});return n.set_primary_action(i||__("Submit",null,"Primary action of prompt dialog"),function(){var o=n.get_values();!o||(n.hide(),t(o))}),n.show(),n};frappe.msgprint=function(r,t,e){if(!r)return;let i;if($.isPlainObject(r)?i=r:typeof r=="string"&&r.substr(0,1)==="{"?i=JSON.parse(r):i={message:r,title:t},i.indicator||(i.indicator="blue"),i.as_list){let o=i.message.map(s=>`<li>${s}</li>`).join("");i.message=`<ul style="padding-left: 20px">${o}</ul>`}if(i.as_table){let o=i.message.map(s=>`<tr>${s.map(l=>`<td>${l}</td>`).join("")}</tr>`).join("");i.message=`<table class="table table-bordered" style="margin: 0;">${o}</table>`}if(i.message instanceof Array){let o=i.message,s=o.map(a=>typeof a=="string"?JSON.parse(a):a).filter(a=>a.raise_exception);s.length&&(o=s),o.forEach(function(a){frappe.msgprint(a)});return}if(i.alert||i.toast){frappe.show_alert(i);return}if(frappe.msg_dialog||(frappe.msg_dialog=new frappe.ui.Dialog({title:__("Message"),onhide:function(){frappe.msg_dialog.custom_onhide&&frappe.msg_dialog.custom_onhide(),frappe.msg_dialog.msg_area.empty()},minimizable:i.is_minimizable||e}),frappe.msg_dialog.msg_area=$('<div class="msgprint">').appendTo(frappe.msg_dialog.body),frappe.msg_dialog.clear=function(){frappe.msg_dialog.msg_area.empty()},frappe.msg_dialog.indicator=frappe.msg_dialog.header.find(".indicator")),i.primary_action){if(i.primary_action.server_action&&typeof i.primary_action.server_action=="string"&&(i.primary_action.action=()=>{frappe.call({method:i.primary_action.server_action,args:{args:i.primary_action.args},callback(){i.primary_action.hide_on_success&&frappe.hide_msgprint()}})}),i.primary_action.client_action&&typeof i.primary_action.client_action=="string"){let o=i.primary_action.client_action.split("."),s=window;for(let a of o)s=s[a];i.primary_action.action=()=>{typeof s=="function"&&s(i.primary_action.args)}}frappe.msg_dialog.set_primary_action(__(i.primary_action.label||i.primary_action_label||"Done"),i.primary_action.action)}else frappe.msg_dialog.has_primary_action&&(frappe.msg_dialog.get_primary_btn().addClass("hide"),frappe.msg_dialog.has_primary_action=!1);i.secondary_action&&(frappe.msg_dialog.set_secondary_action(i.secondary_action.action),frappe.msg_dialog.set_secondary_action_label(__(i.secondary_action.label||"Close"))),i.message==null&&(i.message=""),i.message.search(/<br>|<p>|<li>/)==-1&&(r=frappe.utils.replace_newlines(i.message));var n=!1;return i.clear?frappe.msg_dialog.msg_area.empty():n=frappe.msg_dialog.msg_area.html(),(i.title||!n)&&frappe.msg_dialog.set_title(i.title||__("Message",null,"Default title of the message dialog")),i.indicator?frappe.msg_dialog.indicator.removeClass().addClass("indicator "+i.indicator):frappe.msg_dialog.indicator.removeClass().addClass("hidden"),i.wide?frappe.msg_dialog.wrapper.classList.contains("msgprint-dialog")&&frappe.msg_dialog.wrapper.classList.remove("msgprint-dialog"):frappe.msg_dialog.wrapper.classList.add("msgprint-dialog"),n&&frappe.msg_dialog.msg_area.append("<hr>"),frappe.msg_dialog.msg_area.append(i.message),frappe.msg_dialog.$wrapper.css("z-index",2e3),frappe.msg_dialog.show(),frappe.msg_dialog};window.msgprint=frappe.msgprint;frappe.hide_msgprint=function(r){frappe.msg_dialog&&frappe.msg_dialog.msg_area&&frappe.msg_dialog.msg_area.empty(),frappe.msg_dialog&&frappe.msg_dialog.$wrapper.is(":visible")&&(r&&frappe.msg_dialog.$wrapper.removeClass("fade"),frappe.msg_dialog.hide(),r&&frappe.msg_dialog.$wrapper.addClass("fade"))};frappe.update_msgprint=function(r){!frappe.msg_dialog||frappe.msg_dialog&&!frappe.msg_dialog.$wrapper.is(":visible")?frappe.msgprint(r):frappe.msg_dialog.msg_area.html(r)};frappe.verify_password=function(r){frappe.prompt({fieldname:"password",label:__("Enter your password"),fieldtype:"Password",reqd:1},function(t){frappe.call({method:"frappe.core.doctype.user.user.verify_password",args:{password:t.password},callback:function(e){e.exc||r()}})},__("Verify Password"),__("Verify"))};frappe.show_progress=(r,t,e=100,i,n=!1)=>{let o;return frappe.cur_progress&&frappe.cur_progress.title===r&&frappe.cur_progress.is_visible?o=frappe.cur_progress:(o=new frappe.ui.Dialog({title:r}),o.progress=$(`<div>
			<div class="progress">
				<div class="progress-bar"></div>
			</div>
			<p class="description text-muted small"></p>
		</div`).appendTo(o.body),o.progress_bar=o.progress.css({"margin-top":"10px"}).find(".progress-bar"),o.$wrapper.removeClass("fade"),o.show(),frappe.cur_progress=o),i&&o.progress.find(".description").text(i),o.percent=cint(flt(t)*100/e),o.progress_bar.css({width:o.percent+"%"}),n&&o.percent===100&&setTimeout(frappe.hide_progress,500),frappe.cur_progress.$wrapper.css("z-index",2e3),o};frappe.hide_progress=function(){frappe.cur_progress&&(frappe.cur_progress.hide(),frappe.cur_progress=null)};frappe.show_alert=frappe.toast=function(r,t=7,e={}){let i={orange:"solid-warning",yellow:"solid-warning",blue:"solid-info",green:"solid-success",red:"solid-error"};typeof r=="string"&&(r={message:r}),$("#dialog-container").length||$('<div id="dialog-container"><div id="alert-container"></div></div>').appendTo("body");let n;r.indicator?n=i[r.indicator.toLowerCase()]||"solid-"+r.indicator:n="solid-info";let o=r.indicator||"blue",s=$(`
		<div class="alert desk-alert ${o}" role="alert">
			<div class="alert-message-container">
				<div class="alert-title-container">
					<div>${frappe.utils.icon(n,"lg")}</div>
					<div class="alert-message">${r.message}</div>
				</div>
				<div class="alert-subtitle">${r.subtitle||""}</div>
			</div>
			<div class="alert-body" style="display: none"></div>
			<a class="close">${frappe.utils.icon("close-alt")}</a>
		</div>
	`);return s.hide().appendTo("#alert-container").show(),r.body&&s.find(".alert-body").show().html(r.body),s.find(".close, button").click(function(){return s.addClass("out"),setTimeout(()=>s.remove(),800),!1}),Object.keys(e).map(a=>{s.find(`[data-action=${a}]`).on("click",e[a])}),t>2&&(t=t-.8),setTimeout(()=>(s.addClass("out"),setTimeout(()=>s.remove(),800),!1),t*1e3),s};frappe.provide("frappe.ui.keys");var vn=new WeakMap,Gs=[];frappe.ui.keys.shortcut_groups=vn;frappe.ui.keys.get_shortcut_group=r=>(vn.has(r)||vn.set(r,new frappe.ui.keys.AltShortcutGroup),vn.get(r));var Ys=!1,kt=null,fo=$(document.body);frappe.ui.keys.bind_shortcut_group_event=()=>{if(Ys)return;Ys=!0;function r(){kt?(kt.addClass("alt-pressed"),fo.removeClass("alt-pressed")):(fo.addClass("alt-pressed"),kt&&kt.removeClass("alt-pressed"))}function t(){kt&&kt.removeClass("alt-pressed"),fo.removeClass("alt-pressed")}$(document).on("keydown",e=>{let i=(frappe.ui.keys.key_map[e.which]||"").toLowerCase();if(i==="alt"&&r(),!(e.shiftKey||e.ctrlKey||e.metaKey)&&i&&e.altKey){let n=fp(i);n&&(e.preventDefault(),n.$target[0].click()),r()}}),$(document).on("keyup",e=>{e.key==="Alt"&&t()}),$(document).on("mousemove",()=>{t()})};function fp(r){let t=Gs.filter(i=>r in i.shortcuts_dict).map(i=>i.shortcuts_dict[r]).filter(i=>i.$target.is(":visible")),e=null;return kt&&kt.is(".open")&&(e=t.find(i=>$.contains(kt[0],i.$target[0]))),e||(e=t.find(i=>$.contains(window.cur_page.page.page.wrapper[0],i.$target[0])),e)}frappe.ui.keys.AltShortcutGroup=class{constructor(){this.shortcuts_dict={},kt=null,this.bind_events(),frappe.ui.keys.bind_shortcut_group_event(),Gs.push(this)}bind_events(){$(document).on("show.bs.dropdown",t=>{kt&&kt.removeClass("alt-pressed");let e=$(t.target);e.is(".dropdown, .btn-group")&&(kt=e)}),$(document).on("hide.bs.dropdown",()=>{kt&&kt.removeClass("alt-pressed"),kt=null})}add(t,e){e||(e=t);let i=e.text().trim(),o=i.split("").find(a=>{a=a.toLowerCase();let l=a>="a"&&a<="z";return!this.is_taken(a)&&l});if(!o){e.attr("data-label",encodeURIComponent(i));return}for(let a in this.shortcuts_dict){let l=this.shortcuts_dict[a];if(l.text===i){l.$target=t,l.$text_el=e,this.underline_text(l);return}}let s={$target:t,$text_el:e,letter:o,text:i};this.shortcuts_dict[o.toLowerCase()]=s,this.underline_text(s)}underline_text(t){t.$text_el.attr("data-label",encodeURIComponent(t.text));let e=!1,i=t.text.split("").map(o=>(o===t.letter&&!e&&(o=`<span class="alt-underline">${o}</span>`,e=!0),o)).join("");i=`<span>${i}</span>`,i=t.$text_el.html().replace(t.text.trim(),i.trim()),t.$text_el.html(i)}is_taken(t){let e=frappe.ui.keys.standard_shortcuts.filter(i=>!i.page).some(i=>i.shortcut===`alt+${t}`);return t in this.shortcuts_dict||e}};frappe.provide("frappe.ui.keys.handlers");frappe.ui.keys.setup=function(){$(window).on("keydown",function(r){var t=frappe.ui.keys.get_key(r);if(frappe.ui.keys.handlers[t]){for(var e=null,i=0,n=frappe.ui.keys.handlers[t].length;i<n;i++){var o=frappe.ui.keys.handlers[t][i],s=o.apply(this,[r]);s===!1&&(e=s)}return e}})};var Or=[];frappe.ui.keys.standard_shortcuts=Or;frappe.ui.keys.add_shortcut=({shortcut:r,action:t,description:e,page:i,target:n,condition:o,ignore_inputs:s=!1}={})=>{if(n instanceof jQuery){let d=n;t=()=>{d[0].click()}}o||(o=()=>!0);let a=d=>{if(!($(document.activeElement).is("input, select, textarea, [contenteditable=true]")&&!s)&&!!o()&&t&&(!i||i.wrapper.is(":visible"))){let m=t(d);(m||m===void 0)&&d.preventDefault()}};a.page=i,frappe.ui.keys.off(r,i),frappe.ui.keys.on(r,a);let l=Or.findIndex(d=>d.shortcut===r),u={shortcut:r,action:t,description:e,page:i,condition:o};l===-1?Or.push(u):Or[l]=u};frappe.ui.keys.show_keyboard_shortcut_dialog=()=>{if(frappe.ui.keys.is_dialog_shown)return;let r=Or.filter(l=>!l.page),t=Or.filter(l=>l.page&&l.page===window.cur_page.page.page),e=Or.filter(l=>l.page&&l.page===window.cur_page.page.frm);function i(l,u){if(!l.length)return"";let d=l.filter(p=>p.condition?p.condition():!0).filter(p=>!!p.description).map(p=>{let g=p.shortcut.split("+").map(frappe.utils.to_title_case).join("+");return frappe.utils.is_mac()&&(g=g.replace("Ctrl","\u2318")),`<tr>
					<td width="40%"><kbd>${g}</kbd></td>
					<td width="60%">${p.description||""}</td>
				</tr>`}).join("");return d?(d=`<h5 style="margin: 0;">${u}</h5>
			<table style="margin-top: 10px;" class="table table-bordered">
				${d}
			</table>`,d):""}let n=i(r,__("Global Shortcuts")),o=i(t,__("Page Shortcuts")),s=i(e,__("Grid Shortcuts")),a=new frappe.ui.Dialog({title:__("Keyboard Shortcuts"),on_hide(){frappe.ui.keys.is_dialog_shown=!1}});a.$body.append(n),a.$body.append(o),a.$body.append(s),a.$body.append(`
		<div class="text-muted">
			${__("Press Alt Key to trigger additional shortcuts in Menu and Sidebar")}
		</div>
	`),a.show(),frappe.ui.keys.is_dialog_shown=!0};frappe.ui.keys.get_key=function(r){var t=r.keyCode||r.which,e=frappe.ui.keys.key_map[t]||String.fromCharCode(t);return(r.ctrlKey||r.metaKey)&&(e="ctrl+"+e),r.shiftKey&&(e="shift+"+e),r.altKey&&(e="alt+"+e),r.altKey&&r.ctrlKey,e.toLowerCase()};frappe.ui.keys.on=function(r,t){frappe.ui.keys.handlers[r]||(frappe.ui.keys.handlers[r]=[]),frappe.ui.keys.handlers[r].push(t)};frappe.ui.keys.off=function(r,t){let e=frappe.ui.keys.handlers[r];!e||e.length===0||(frappe.ui.keys.handlers[r]=e.filter(i=>t?i.page!==t:!1))};frappe.ui.keys.add_shortcut({shortcut:"ctrl+s",action:function(r){return frappe.app.trigger_primary_action(),r.preventDefault(),!1},description:__("Trigger Primary Action"),ignore_inputs:!0});frappe.ui.keys.add_shortcut({shortcut:"ctrl+g",action:function(r){return $("#navbar-search").focus(),r.preventDefault(),!1},description:__("Open Awesomebar")});frappe.ui.keys.add_shortcut({shortcut:"ctrl+h",action:function(r){r.preventDefault(),$(".navbar-home img").click()},description:__("Navigate Home")});frappe.ui.keys.add_shortcut({shortcut:"alt+s",action:function(r){r.preventDefault(),$(".dropdown-navbar-user a").eq(0).click()},description:__("Open Settings")});frappe.ui.keys.add_shortcut({shortcut:"shift+/",action:function(){frappe.ui.keys.show_keyboard_shortcut_dialog()},description:__("Show Keyboard Shortcuts")});frappe.ui.keys.add_shortcut({shortcut:"alt+h",action:function(r){r.preventDefault(),$(".dropdown-help a").eq(0).click()},description:__("Open Help")});frappe.ui.keys.on("escape",function(r){Ks()});frappe.ui.keys.on("esc",function(r){Ks()});frappe.ui.keys.on("enter",function(r){window.cur_dialog&&cur_dialog.confirm_dialog&&cur_dialog.get_primary_btn().trigger("click")});frappe.ui.keys.on("ctrl+down",function(r){var t=frappe.ui.form.get_open_grid_form();t&&t.toggle_view(!1,function(){t.open_next()})});frappe.ui.keys.on("ctrl+up",function(r){var t=frappe.ui.form.get_open_grid_form();t&&t.toggle_view(!1,function(){t.open_prev()})});frappe.ui.keys.add_shortcut({shortcut:"shift+ctrl+r",action:function(){frappe.ui.toolbar.clear_cache()},description:__("Clear Cache and Reload")});frappe.ui.keys.key_map={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",91:"meta",18:"alt",27:"escape",37:"left",39:"right",38:"up",40:"down",32:"space",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",191:"/",188:"<",190:">"};"abcdefghijklmnopqrstuvwxyz".split("").forEach((r,t)=>{frappe.ui.keys.key_map[65+t]=r});frappe.ui.keyCode={ESCAPE:27,LEFT:37,RIGHT:39,UP:38,DOWN:40,ENTER:13,TAB:9,SPACE:32,BACKSPACE:8};function Ks(){var r;pp(),(r=document.activeElement)==null||r.blur()}function pp(){var r=$(".grid-row-open");if(r.length){var t=r.data("grid_row");return t.toggle_view(!1),!1}if(cur_dialog&&!cur_dialog.no_cancel_flag&&!cur_dialog.static)return cur_dialog.cancel(),!1}frappe.provide("frappe.ui");frappe.ui.color={get:function(r,t){return r&&t?this.get_color_shade(r,t):r?this.get_color_shade(r,"default"):frappe.ui.color_map},get_color:function(r){let t=Object.keys(frappe.ui.color_map);if(t.includes(r))return frappe.ui.color_map[r];console.warn(`'color_name' can be one of ${t} and not ${r}`)},get_color_map(){let r=["red","green","blue","dark-green","yellow","gray","purple","pink","orange"],t=["100","300","500","700"],e=getComputedStyle(document.body),i={};return r.forEach(n=>{i[n]=t.map(o=>e.getPropertyValue(`--${n}-${o}`).trim())}),i},get_color_shade:function(r,t){let e={default:2,light:1,"extra-light":0,dark:3};if(Object.keys(e).includes(t)){let i=this.get_color(r);return i?i[e[t]]:r}else console.warn(`'shade' can be one of ${Object.keys(e)} and not ${t}`)},all:function(){return Object.values(frappe.ui.color_map).reduce((r,t)=>r.concat(t),[])},names:function(){return Object.keys(frappe.ui.color_map)},is_standard:function(r){return r?r.startsWith("#")?this.all().includes(r):this.names().includes(r):!1},get_color_name:function(r){for(let t in frappe.ui.color_map)if(frappe.ui.color_map[t].includes(r))return t},get_contrast_color:function(r){if(!this.validate_hex(r))return;if(!this.is_standard(r))return this.brightness(r)<128?this.lighten(r,.5):this.lighten(r,-.5);let t=this.get_color_name(r);return this.get_color(t).indexOf(r)<=1?this.get(t,"dark"):this.get(t,"extra-light")},validate_hex:function(r){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(r)},lighten(r,t){var e=parseInt(r.slice(1),16),i=t<0?0:255,n=t<0?t*-1:t,o=e>>16,s=e>>8&255,a=e&255;return"#"+(16777216+(Math.round((i-o)*n)+o)*65536+(Math.round((i-s)*n)+s)*256+(Math.round((i-a)*n)+a)).toString(16).slice(1)},hex_to_rgb(r){r.startsWith("#")&&(r=r.substring(1));let t=parseInt(r.substring(0,2),16),e=parseInt(r.substring(2,4),16),i=parseInt(r.substring(4,6),16);return{r:t,g:e,b:i}},brightness(r){let t=this.hex_to_rgb(r);return(t.r*299+t.g*587+t.b*114)/1e3}};frappe.ui.color_map=frappe.ui.color.get_color_map();frappe.provide("frappe.ui");frappe.ui.Sidebar=class{constructor({wrapper:t,css_class:e}){this.wrapper=t,this.css_class=e,this.items={},this.make_dom()}make_dom(){this.wrapper.html(`
			<div class="${this.css_class} overlay-sidebar hidden-xs hidden-sm">
			</div>
		`),this.$sidebar=this.wrapper.find("."+this.css_class)}add_item(t,e,i=!1){let n,o;if(!e&&this.wrapper.find(".sidebar-menu").length===0?n=this.get_section():n=this.get_section(e),t instanceof jQuery)o=$("<li>"),t.appendTo(o);else{let a=`<li class=${i?"h6":""}>
				<a ${t.href?`href="${t.href}"`:""}>${t.label}</a>
			</li>`;o=$(a).click(()=>t.on_click&&t.on_click())}n.append(o),t.name&&(this.items[t.name]=o)}remove_item(t){this.items[t]&&this.items[t].remove()}get_section(t=""){let e=$(this.wrapper.find(`[data-section-heading="${t}"]`));if(e.length)return e;let i=t?`<li class="h6">${t}</li>`:"";return e=$(`
			<ul class="list-unstyled sidebar-menu" data-section-heading="${t||"default"}">
				${i}
			</ul>
		`),this.$sidebar.append(e),e}};frappe.ui.LinkPreview=class{constructor(){this.popovers_list=[],this.LINK_CLASSES='a[data-doctype], input[data-fieldtype="Link"], .popover',this.popover_timeout=null,this.setup_events()}setup_events(){$(document.body).on("mouseover",this.LINK_CLASSES,r=>{this.link_hovered=!0,this.element=$(r.currentTarget),this.is_link=this.element.get(0).tagName.toLowerCase()==="a",this.element.parents().find(".popover").length||(this.identify_doc(),this.popover=this.element.data("bs.popover"),this.name&&this.doctype&&this.setup_popover_control(r))}),this.handle_popover_hide()}identify_doc(){this.is_link?(this.doctype=this.element.attr("data-doctype"),this.name=frappe.utils.unescape_html(this.element.attr("data-name")),this.href=this.element.attr("href")):(this.href=this.element.parents(".control-input-wrapper").find(".control-value a").attr("href"),this.doctype=this.element.attr("data-target"),this.name=this.element.val())}setup_popover_control(r){!(frappe.boot.link_preview_doctypes||[]).includes(this.doctype)||(this.element.on("change",()=>{this.new_popover=!0}),!this.popover||this.new_popover?this.data_timeout=setTimeout(()=>{this.create_popover(r)},100):this.popover_timeout=setTimeout(()=>{this.element.is(":focus")||this.show_popover(r)},1e3))}create_popover(r){this.new_popover=!1,!this.element.is(":focus")&&this.get_preview_data().then(t=>{t&&(this.popover_timeout&&clearTimeout(this.popover_timeout),this.popover_timeout=setTimeout(()=>{if(this.popover&&this.popover.options){let e=this.get_popover_html(t);this.popover.options.content=e}else this.init_preview_popover(t);this.show_popover(r)},1e3))})}show_popover(r){if(this.default_timeout=setTimeout(()=>{this.clear_all_popovers()},1e4),this.is_link)this.element.popover("show");else{var t=r.pageX;this.element.popover("show");var e=$(".popover").width();$(".control-field-popover").css("left",t-e/2+"px")}}handle_popover_hide(){$(document).on("mouseout",this.LINK_CLASSES,()=>{$(".popover:hover").length||(this.link_hovered=!1),this.link_hovered||(this.data_timeout&&clearTimeout(this.data_timeout),this.popover_timeout&&clearTimeout(this.popover_timeout),this.default_timeout&&clearTimeout(this.default_timeout),this.clear_all_popovers())}),frappe.router.on("change",()=>{this.clear_all_popovers()})}clear_all_popovers(){this.popovers_list.forEach(r=>r.hide())}get_preview_data(){return frappe.xcall("frappe.desk.link_preview.get_preview_data",{doctype:this.doctype,docname:this.name})}init_preview_popover(r){let t=this.get_popover_html(r);this.element.popover({container:"body",template:`
				<div class="link-preview-popover popover">
					<div class="arrow"></div>
					<div class="popover-body popover-content">
					</div>
				</div>
			`,html:!0,sanitizeFn:i=>i,content:t,trigger:"manual",placement:"top"}),$(this.element.data("bs.popover").tip).toggleClass("control-field-popover",this.is_link),this.popovers_list.push(this.element.data("bs.popover"))}get_popover_html(r){this.href||(this.href=window.location.href),this.href&&this.href.includes(" ")&&(this.href=this.href.replace(new RegExp(" ","g"),"%20"));let t=document.createElement("div");t.innerHTML=`
			<div class="preview-popover-header">
				<div class="preview-header">
					${this.get_image_html(r)}
					<div class="preview-name">
						<a></a>
					</div>
					<div class="text-muted preview-title">${this.get_id_html(r)}</div>
				</div>
			</div>
			<hr>
			<div class="popover-body">
				${this.get_content_html(r)}
			</div>
		`;let e=t.querySelector(".preview-name > a");return e.href=this.href,e.innerText=__(r.preview_title),t.innerHTML}get_id_html(r){if(r.preview_title!==r.name){let t=document.createElement("a");return t.href=this.href,t.className="text-muted",t.innerText=r.name,t.outerHTML}return""}get_image_html(r){return`<div class="preview-image">
			${frappe.get_avatar("avatar-medium",r.preview_title,r.preview_image)}
		</div>`}get_content_html(r){let t="";return Object.keys(r).forEach(e=>{if(!["preview_image","preview_title","name"].includes(e)){let i=frappe.ellipsis(r[e],280),n=e;t+=`
					<div class="preview-field">
						<div class="preview-label text-muted">${__(n)}</div>
						<div class="preview-value">${i}</div>
					</div>
				`}}),`<div class="preview-table">${t}</div>`}};frappe.provide("frappe.request");frappe.provide("frappe.request.error_handlers");frappe.request.url="/";frappe.request.ajax_count=0;frappe.request.waiting_for_ajax=[];frappe.request.logs={};frappe.xcall=function(r,t){return new Promise((e,i)=>{frappe.call({method:r,args:t,callback:n=>{e(n.message)},error:n=>{i(n==null?void 0:n.message)}})})};frappe.call=function(r){if(!frappe.is_online())return frappe.show_alert({indicator:"orange",message:__("Connection Lost"),subtitle:__("You are not connected to Internet. Retry after sometime.")},3),r.always&&r.always(),$.ajax();typeof arguments[0]=="string"&&(r={method:arguments[0],args:arguments[1],callback:arguments[2],headers:arguments[3]}),r.quiet&&(r.no_spinner=!0);var t=$.extend({},r.args);t.freeze&&(r.freeze=r.freeze||t.freeze,r.freeze_message=r.freeze_message||t.freeze_message),r.module&&r.page?t.cmd=r.module+".page."+r.page+"."+r.page+"."+r.method:r.doc?$.extend(t,{cmd:"run_doc_method",docs:frappe.get_doc(r.doc.doctype,r.doc.name),method:r.method,args:r.args}):r.method&&(t.cmd=r.method);var e=function(n,o){if(n.task_id)frappe.realtime.subscribe(n.task_id,r),r.queued&&r.queued(n);else if(r.callback)return r.callback(n,o)};let i=r.url;if(!i){let n="/api/method/";if(r.api_version&&(n=`/api/${r.api_version}/method/`),i=n+t.cmd,window.cordova){let o=frappe.request.url;o=o.slice(0,o.length-1),i=o+i}delete t.cmd}return r.debounce&&frappe.request.is_fresh(t,r.debounce)?Promise.resolve():frappe.request.call({type:r.type||"POST",args:t,success:e,error:r.error,always:r.always,btn:r.btn,freeze:r.freeze,freeze_message:r.freeze_message,headers:r.headers||{},error_handlers:r.error_handlers||{},async:r.async,silent:r.silent,api_version:r.api_version,url:i})};frappe.request.call=function(r){frappe.request.prepare(r);var t={200:function(n,o){r.success_callback&&r.success_callback(n,o.responseText)},401:function(n){frappe.app.session_expired_dialog&&frappe.app.session_expired_dialog.display?frappe.app.redirect_to_login():frappe.app.handle_session_expired(),r.error_callback&&r.error_callback()},404:function(n){frappe.msgprint({title:__("Not found"),indicator:"red",message:__("The resource you are looking for is not available")}),r.error_callback&&r.error_callback()},403:function(n){if(frappe.session.user==="Guest"&&frappe.session.logged_in_user!=="Guest")frappe.app.handle_session_expired();else if(n.responseJSON&&n.responseJSON._error_message)frappe.msgprint({title:__("Not permitted"),indicator:"red",message:n.responseJSON._error_message}),n.responseJSON._server_messages=null;else if(n.responseJSON&&n.responseJSON._server_messages){var o=JSON.parse(n.responseJSON._server_messages);if(o.indexOf(__("Not permitted"))!==-1)return}else frappe.msgprint({title:__("Not permitted"),indicator:"red",message:__("You do not have enough permissions to access this resource. Please contact your manager to get access.")});r.error_callback&&r.error_callback()},508:function(n){frappe.utils.play_sound("error"),frappe.msgprint({title:__("Please try again"),indicator:"red",message:__("Another transaction is blocking this one. Please try again in a few seconds.")}),r.error_callback&&r.error_callback()},413:function(n,o){frappe.msgprint({indicator:"red",title:__("File too big"),message:__("File size exceeded the maximum allowed size of {0} MB",[(frappe.boot.max_file_size||5242880)/1048576])}),r.error_callback&&r.error_callback()},417:function(n){var o=n.responseJSON;if(!o)try{o=JSON.parse(n.responseText)}catch(s){o=n.responseText}r.error_callback&&r.error_callback(o)},501:function(n,o){typeof n=="string"&&(n=JSON.parse(n)),r.error_callback&&r.error_callback(n,o.responseText)},500:function(n){frappe.utils.play_sound("error");try{r.error_callback&&r.error_callback(),frappe.request.report_error(n,r)}catch(o){frappe.request.report_error(n,r)}},504:function(n){frappe.msgprint(__("Request Timed Out")),r.error_callback&&r.error_callback()},502:function(n){frappe.msgprint(__("Internal Server Error")),r.error_callback&&r.error_callback()}},e={QueryTimeoutError:function(){frappe.utils.play_sound("error"),frappe.msgprint({title:__("Request Timeout"),indicator:"red",message:__("Server was too busy to process this request. Please try again.")})},QueryDeadlockError:function(){frappe.utils.play_sound("error"),frappe.msgprint({title:__("Deadlock Occurred"),indicator:"red",message:__("Server was too busy to process this request. Please try again.")})}},i={url:r.url||frappe.request.url,data:r.args,type:r.type,dataType:r.dataType||"json",async:r.async,headers:Object.assign({"X-Frappe-CSRF-Token":frappe.csrf_token,Accept:"application/json","X-Frappe-CMD":r.args&&r.args.cmd||""||""},r.headers),cache:!1};return r.args&&r.args.doctype&&(i.headers["X-Frappe-Doctype"]=encodeURIComponent(r.args.doctype)),frappe.last_request=i.data,$.ajax(i).done(function(n,o,s){try{typeof n=="string"&&(n=JSON.parse(n)),(n.docs||n.docinfo)&&frappe.model.sync(n),n.__messages&&$.extend(frappe._messages,n.__messages),n._link_titles&&(frappe._link_titles||(frappe._link_titles={}),$.extend(frappe._link_titles,n._link_titles));var a=t[s.statusCode().status];a&&a(n,s)}catch(l){console.log("Unable to handle success response",n),console.error(l)}}).always(function(n,o,s){try{if(typeof n=="string"&&(n=JSON.parse(n)),n.responseText){var s=n;n=JSON.parse(n.responseText)}}catch(a){n=null}frappe.request.cleanup(r,n),r.always&&r.always(n)}).fail(function(n,o){try{if(n.getResponseHeader("content-type")=="application/json"&&n.responseText){var s;try{s=JSON.parse(n.responseText)}catch(d){console.log("Unable to parse reponse text"),console.log(n.responseText),console.log(d)}if(s&&s.exception){var a=s.exception.split(".").at(-1).split(":").at(0),l=e[a];if(l){l(s);return}}}var u=t[n.statusCode().status];if(u){u(n);return}r.error_callback&&r.error_callback(n)}catch(d){console.log("Unable to handle failed response"),console.error(d)}})};frappe.request.is_fresh=function(r,t){frappe.request.logs[r.cmd]||(frappe.request.logs[r.cmd]=[]);for(let e of frappe.request.logs[r.cmd])if(new Date-e.timestamp<t&&frappe.utils.deep_equal(r,e.args))return console.log("throttled"),!0;return frappe.request.logs[r.cmd].push({args:r,timestamp:new Date}),!1};frappe.request.prepare=function(r){$("body").attr("data-ajax-state","triggered"),r.btn&&$(r.btn).prop("disabled",!0),r.freeze&&frappe.dom.freeze(r.freeze_message);for(var t in r.args)r.args[t]&&($.isPlainObject(r.args[t])||$.isArray(r.args[t]))&&(r.args[t]=JSON.stringify(r.args[t]));if(!r.args.cmd&&!r.url)throw console.log(r),"Incomplete Request";r.success_callback=r.success,r.error_callback=r.error,delete r.success,delete r.error};frappe.request.cleanup=function(r,t){if(r.btn&&$(r.btn).prop("disabled",!1),$("body").attr("data-ajax-state","complete"),r.freeze&&frappe.dom.unfreeze(),t){if(t.session_expired||frappe.session.user==="Guest"&&frappe.session.logged_in_user!=="Guest"){frappe.app.handle_session_expired();return}let e=frappe.request.error_handlers[t.exc_type]||[],i=r.error_handlers?r.error_handlers[t.exc_type]:null,n=[].concat(e,i).filter(Boolean);t.exc_type&&n.forEach(s=>{s(t)});let o;r.api_version=="v2"?o=t.messages:t._server_messages&&(o=JSON.parse(t._server_messages)),o&&!r.silent&&n.length===0&&(frappe.hide_msgprint(),frappe.msgprint(o)),t.exc&&(t.exc=JSON.parse(t.exc),t.exc instanceof Array?t.exc.forEach(s=>{s&&console.error(s)}):console.error(t.exc)),t._debug_messages&&(r.args&&(console.log("======== arguments ========"),console.log(r.args),console.log("========")),$.each(JSON.parse(t._debug_messages),function(s,a){console.log(a)}),console.log("======== response ========"),delete t._debug_messages,console.log(t),console.log("========"))}frappe.last_response=t};frappe.after_server_call=()=>frappe.request.ajax_count?new Promise(r=>{frappe.request.waiting_for_ajax.push(()=>{r()})}):null;frappe.after_ajax=function(r){return new Promise(t=>{if(frappe.request.ajax_count)frappe.request.waiting_for_ajax.push(()=>{if(r)return t(r());t()});else{if(r)return t(r());t()}})};frappe.request.report_error=function(r,t){var e=JSON.parse(r.responseText),i;if(e.exc){try{i=(JSON.parse(e.exc)||[]).join(`
`)}catch(a){i=e.exc}delete e.exc}else i="";let n=()=>{let a=d=>"```\n"+d+"\n```",l=Object.assign({},t);l.request_id=r.getResponseHeader("X-Frappe-Request-Id");let u=["### App Versions",a(JSON.stringify(frappe.boot.versions,null,"	")),"### Route",a(frappe.get_route_str()),"### Traceback",a(i),"### Request Data",a(JSON.stringify(l,null,"	")),"### Response Data",a(JSON.stringify(e,null,"	"))].join(`
`);frappe.utils.copy_to_clipboard(u)};var o=function(){var a=["<h5>Please type some additional information that could help us reproduce this issue:</h5>",'<div style="min-height: 100px; border: 1px solid #bbb; 				border-radius: 5px; padding: 15px; margin-bottom: 15px;"></div>',"<hr>","<h5>App Versions</h5>","<pre>"+JSON.stringify(frappe.boot.versions,null,"	")+"</pre>","<h5>Route</h5>","<pre>"+frappe.get_route_str()+"</pre>","<hr>","<h5>Error Report</h5>","<pre>"+i+"</pre>","<hr>","<h5>Request Data</h5>","<pre>"+JSON.stringify(t,null,"	")+"</pre>","<hr>","<h5>Response JSON</h5>","<pre>"+JSON.stringify(e,null,"	")+"</pre>"].join(`
`),l=new frappe.views.CommunicationComposer({subject:"Error Report ["+frappe.datetime.nowdate()+"]",recipients:s,message:a,doc:{doctype:"User",name:frappe.session.user}});l.dialog.$wrapper.css("z-index",cint(frappe.msg_dialog.$wrapper.css("z-index"))+1)};if(i){var s=frappe.boot.error_report_email;t=frappe.request.cleanup_request_opts(t),frappe.error_dialog||(frappe.error_dialog=new frappe.ui.Dialog({title:__("Server Error")}),s?frappe.error_dialog.set_primary_action(__("Report"),()=>{o(),frappe.error_dialog.hide()}):frappe.error_dialog.set_primary_action(__("Copy error to clipboard"),()=>{n(),frappe.error_dialog.hide()}),frappe.error_dialog.wrapper.classList.add("msgprint-dialog"));let a=strip(i).split(`
`),l=a[a.length-1];e._exc_source&&(l+="<br>",l+=`Possible source of error: ${e._exc_source.bold()} `),frappe.error_dialog.$body.html(l),frappe.error_dialog.show()}};frappe.request.cleanup_request_opts=function(r){var t=(r.args||{}).doc;return t&&(t=JSON.parse(t),$.each(Object.keys(t),function(e,i){i.indexOf("password")!==-1&&t[i]&&(t[i]="*****")}),r.args.doc=JSON.stringify(t)),r};frappe.request.on_error=function(r,t){frappe.request.error_handlers[r]=frappe.request.error_handlers[r]||[],frappe.request.error_handlers[r].push(t)};$(document).ajaxSend(function(){frappe.request.ajax_count++});$(document).ajaxComplete(function(){frappe.request.ajax_count--,frappe.request.ajax_count||($.each(frappe.request.waiting_for_ajax||[],function(r,t){t()}),frappe.request.waiting_for_ajax=[])});var Kt=Object.create(null);Kt.open="0";Kt.close="1";Kt.ping="2";Kt.pong="3";Kt.message="4";Kt.upgrade="5";Kt.noop="6";var _i=Object.create(null);Object.keys(Kt).forEach(r=>{_i[Kt[r]]=r});var gi={type:"error",data:"parser error"};var Zs=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Qs=typeof ArrayBuffer=="function",ea=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,mi=({type:r,data:t},e,i)=>Zs&&t instanceof Blob?e?i(t):Xs(t,i):Qs&&(t instanceof ArrayBuffer||ea(t))?e?i(t):Xs(new Blob([t]),i):i(Kt[r]+(t||"")),Xs=(r,t)=>{let e=new FileReader;return e.onload=function(){let i=e.result.split(",")[1];t("b"+(i||""))},e.readAsDataURL(r)};function Js(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}var po;function ta(r,t){if(Zs&&r.data instanceof Blob)return r.data.arrayBuffer().then(Js).then(t);if(Qs&&(r.data instanceof ArrayBuffer||ea(r.data)))return t(Js(r.data));mi(r,!1,e=>{po||(po=new TextEncoder),t(po.encode(e))})}var ra="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vi=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let r=0;r<ra.length;r++)vi[ra.charCodeAt(r)]=r;var ia=r=>{let t=r.length*.75,e=r.length,i,n=0,o,s,a,l;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);let u=new ArrayBuffer(t),d=new Uint8Array(u);for(i=0;i<e;i+=4)o=vi[r.charCodeAt(i)],s=vi[r.charCodeAt(i+1)],a=vi[r.charCodeAt(i+2)],l=vi[r.charCodeAt(i+3)],d[n++]=o<<2|s>>4,d[n++]=(s&15)<<4|a>>2,d[n++]=(a&3)<<6|l&63;return u};var hp=typeof ArrayBuffer=="function",bi=(r,t)=>{if(typeof r!="string")return{type:"message",data:na(r,t)};let e=r.charAt(0);return e==="b"?{type:"message",data:_p(r.substring(1),t)}:_i[e]?r.length>1?{type:_i[e],data:r.substring(1)}:{type:_i[e]}:gi},_p=(r,t)=>{if(hp){let e=ia(r);return na(e,t)}else return{base64:!0,data:r}},na=(r,t)=>{switch(t){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}};var oa=String.fromCharCode(30),sa=(r,t)=>{let e=r.length,i=new Array(e),n=0;r.forEach((o,s)=>{mi(o,!1,a=>{i[s]=a,++n===e&&t(i.join(oa))})})},aa=(r,t)=>{let e=r.split(oa),i=[];for(let n=0;n<e.length;n++){let o=bi(e[n],t);if(i.push(o),o.type==="error")break}return i};function la(){return new TransformStream({transform(r,t){ta(r,e=>{let i=e.length,n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);let o=new DataView(n.buffer);o.setUint8(0,126),o.setUint16(1,i)}else{n=new Uint8Array(9);let o=new DataView(n.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(i))}r.data&&typeof r.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(e)})}})}var ho;function bn(r){return r.reduce((t,e)=>t+e.length,0)}function yn(r,t){if(r[0].length===t)return r.shift();let e=new Uint8Array(t),i=0;for(let n=0;n<t;n++)e[n]=r[0][i++],i===r[0].length&&(r.shift(),i=0);return r.length&&i<r[0].length&&(r[0]=r[0].slice(i)),e}function ca(r,t){ho||(ho=new TextDecoder);let e=[],i=0,n=-1,o=!1;return new TransformStream({transform(s,a){for(e.push(s);;){if(i===0){if(bn(e)<1)break;let l=yn(e,1);o=(l[0]&128)===128,n=l[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(bn(e)<2)break;let l=yn(e,2);n=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(i===2){if(bn(e)<8)break;let l=yn(e,8),u=new DataView(l.buffer,l.byteOffset,l.length),d=u.getUint32(0);if(d>Math.pow(2,53-32)-1){a.enqueue(gi);break}n=d*Math.pow(2,32)+u.getUint32(4),i=3}else{if(bn(e)<n)break;let l=yn(e,n);a.enqueue(bi(o?l:ho.decode(l),t)),i=0}if(n===0||n>r){a.enqueue(gi);break}}}})}var _o=4;function tt(r){if(r)return gp(r)}function gp(r){for(var t in tt.prototype)r[t]=tt.prototype[t];return r}tt.prototype.on=tt.prototype.addEventListener=function(r,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(t),this};tt.prototype.once=function(r,t){function e(){this.off(r,e),t.apply(this,arguments)}return e.fn=t,this.on(r,e),this};tt.prototype.off=tt.prototype.removeListener=tt.prototype.removeAllListeners=tt.prototype.removeEventListener=function(r,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+r];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var i,n=0;n<e.length;n++)if(i=e[n],i===t||i.fn===t){e.splice(n,1);break}return e.length===0&&delete this._callbacks["$"+r],this};tt.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+r],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(e){e=e.slice(0);for(var i=0,n=e.length;i<n;++i)e[i].apply(this,t)}return this};tt.prototype.emitReserved=tt.prototype.emit;tt.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};tt.prototype.hasListeners=function(r){return!!this.listeners(r).length};var xt=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function wn(r,...t){return t.reduce((e,i)=>(r.hasOwnProperty(i)&&(e[i]=r[i]),e),{})}var mp=xt.setTimeout,vp=xt.clearTimeout;function pr(r,t){t.useNativeTimers?(r.setTimeoutFn=mp.bind(xt),r.clearTimeoutFn=vp.bind(xt)):(r.setTimeoutFn=xt.setTimeout.bind(xt),r.clearTimeoutFn=xt.clearTimeout.bind(xt))}var bp=1.33;function ua(r){return typeof r=="string"?yp(r):Math.ceil((r.byteLength||r.size)*bp)}function yp(r){let t=0,e=0;for(let i=0,n=r.length;i<n;i++)t=r.charCodeAt(i),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(i++,e+=4);return e}function da(r){let t="";for(let e in r)r.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(r[e]));return t}function fa(r){let t={},e=r.split("&");for(let i=0,n=e.length;i<n;i++){let o=e[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}var kn=class extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}},hr=class extends tt{constructor(t){super(),this.writable=!1,pr(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,e,i){return super.emitReserved("error",new kn(t,e,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let e=bi(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){let t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){let e=da(t);return e.length?"?"+e:""}};var ga="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),go=64,wp={},pa=0,xn=0,ha;function _a(r){let t="";do t=ga[r%go]+t,r=Math.floor(r/go);while(r>0);return t}function Cn(){let r=_a(+new Date);return r!==ha?(pa=0,ha=r):r+"."+_a(pa++)}for(;xn<go;xn++)wp[ga[xn]]=xn;var ma=!1;try{ma=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch(r){}var va=ma;function mo(r){let t=r.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!t||va))return new XMLHttpRequest}catch(e){}if(!t)try{return new xt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}function kp(){}var xp=function(){return new mo({xdomain:!1}).responseType!=null}(),Sn=class extends hr{constructor(t){if(super(t),this.polling=!1,typeof location!="undefined"){let i=location.protocol==="https:",n=location.port;n||(n=i?"443":"80"),this.xd=typeof location!="undefined"&&t.hostname!==location.hostname||n!==t.port}let e=t&&t.forceBase64;this.supportsBinary=xp&&!e,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";let e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||e()})),this.writable||(i++,this.once("drain",function(){--i||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){let e=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};aa(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){let t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,sa(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Cn()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Vt(this.uri(),t)}doWrite(t,e){let i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(n,o)=>{this.onError("xhr post error",n,o)})}doPoll(){let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,i)=>{this.onError("xhr poll error",e,i)}),this.pollXhr=t}},Vt=class extends tt{constructor(t,e){super(),pr(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.data=e.data!==void 0?e.data:null,this.create()}create(){var t;let e=wn(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd;let i=this.xhr=new mo(e);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this.opts.extraHeaders[n])}}catch(n){}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(n){}try{i.setRequestHeader("Accept","*/*")}catch(n){}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this.opts.cookieJar)===null||n===void 0||n.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(n){this.setTimeoutFn(()=>{this.onError(n)},0);return}typeof document!="undefined"&&(this.index=Vt.requestsCount++,Vt.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=kp,t)try{this.xhr.abort()}catch(e){}typeof document!="undefined"&&delete Vt.requests[this.index],this.xhr=null}}onLoad(){let t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Vt.requestsCount=0;Vt.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",ba);else if(typeof addEventListener=="function"){let r="onpagehide"in xt?"pagehide":"unload";addEventListener(r,ba,!1)}}function ba(){for(let r in Vt.requests)Vt.requests.hasOwnProperty(r)&&Vt.requests[r].abort()}var Mr=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0))(),yi=xt.WebSocket||xt.MozWebSocket,Tn=!0,ya="arraybuffer";var wa=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",En=class extends hr{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let t=this.uri(),e=this.opts.protocols,i=wa?{}:wn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Tn&&!wa?e?new yi(t,e):new yi(t):new yi(t,e,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let i=t[e],n=e===t.length-1;mi(i,this.supportsBinary,o=>{let s={};Tn||(i.options&&(s.compress=i.options.compress),this.opts.perMessageDeflate&&(typeof o=="string"?Buffer.byteLength(o):o.length)<this.opts.perMessageDeflate.threshold&&(s.compress=!1));try{Tn?this.ws.send(o):this.ws.send(o,s)}catch(a){}n&&Mr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=Cn()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}check(){return!!yi}};var On=class extends hr{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{let e=ca(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(e).getReader(),n=la();n.readable.pipeTo(t.writable),this.writer=n.writable.getWriter();let o=()=>{i.read().then(({done:a,value:l})=>{a||(this.onPacket(l),o())}).catch(a=>{})};o();let s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this.writer.write(s).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let i=t[e],n=e===t.length-1;this.writer.write(i).then(()=>{n&&Mr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}};var vo={websocket:En,webtransport:On,polling:Sn};var Cp=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Sp=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Fr(r){if(r.length>2e3)throw"URI too long";let t=r,e=r.indexOf("["),i=r.indexOf("]");e!=-1&&i!=-1&&(r=r.substring(0,e)+r.substring(e,i).replace(/:/g,";")+r.substring(i,r.length));let n=Cp.exec(r||""),o={},s=14;for(;s--;)o[Sp[s]]=n[s]||"";return e!=-1&&i!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=Tp(o,o.path),o.queryKey=Ep(o,o.query),o}function Tp(r,t){let e=/\/{2,9}/g,i=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function Ep(r,t){let e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,o){n&&(e[n]=o)}),e}var jt=class extends tt{constructor(t,e={}){super(),this.binaryType=ya,this.writeBuffer=[],t&&typeof t=="object"&&(e=t,t=null),t?(t=Fr(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Fr(e.host).host),pr(this,e),this.secure=e.secure!=null?e.secure:typeof location!="undefined"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=e.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=fa(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){let e=Object.assign({},this.opts.query);e.EIO=_o,e.transport=t,this.id&&(e.sid=this.id);let i=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new vo[t](i)}open(){let t;if(this.opts.rememberUpgrade&&jt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch(e){this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",e=>this.onClose("transport close",e))}probe(t){let e=this.createTransport(t),i=!1;jt.priorWebsocketSuccess=!1;let n=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",p=>{if(!i)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;jt.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(d(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{let g=new Error("probe error");g.transport=e.name,this.emitReserved("upgradeError",g)}}))};function o(){i||(i=!0,d(),e.close(),e=null)}let s=p=>{let g=new Error("probe error: "+p);g.transport=e.name,o(),this.emitReserved("upgradeError",g)};function a(){s("transport closed")}function l(){s("socket closed")}function u(p){e&&p.name!==e.name&&o()}let d=()=>{e.removeListener("open",n),e.removeListener("error",s),e.removeListener("close",a),this.off("close",l),this.off("upgrading",u)};e.once("open",n),e.once("error",s),e.once("close",a),this.once("close",l),this.once("upgrading",u),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||e.open()},200):e.open()}onOpen(){if(this.readyState="open",jt.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0,e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let i=0;i<this.writeBuffer.length;i++){let n=this.writeBuffer[i].data;if(n&&(e+=ua(n)),i>0&&e>this.maxPayload)return this.writeBuffer.slice(0,i);e+=2}return this.writeBuffer}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,n){if(typeof e=="function"&&(n=e,e=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;let o={type:t,data:e,options:i};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}close(){let t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}onError(t){jt.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){let e=[],i=0,n=t.length;for(;i<n;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}};jt.protocol=_o;var J2=jt.protocol;function ka(r,t="",e){let i=r;e=e||typeof location!="undefined"&&location,r==null&&(r=e.protocol+"//"+e.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=e.protocol+r:r=e.host+r),/^(https?|wss?):\/\//.test(r)||(typeof e!="undefined"?r=e.protocol+"//"+r:r="https://"+r),i=Fr(r)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";let o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+t,i.href=i.protocol+"://"+o+(e&&e.port===i.port?"":":"+i.port),i}var xo={};lp(xo,{Decoder:()=>xi,Encoder:()=>wo,PacketType:()=>Fe,protocol:()=>Ea});var Op=typeof ArrayBuffer=="function",Mp=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,xa=Object.prototype.toString,$p=typeof Blob=="function"||typeof Blob!="undefined"&&xa.call(Blob)==="[object BlobConstructor]",Lp=typeof File=="function"||typeof File!="undefined"&&xa.call(File)==="[object FileConstructor]";function ki(r){return Op&&(r instanceof ArrayBuffer||Mp(r))||$p&&r instanceof Blob||Lp&&r instanceof File}function wi(r,t){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let e=0,i=r.length;e<i;e++)if(wi(r[e]))return!0;return!1}if(ki(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return wi(r.toJSON(),!0);for(let e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&wi(r[e]))return!0;return!1}function Ca(r){let t=[],e=r.data,i=r;return i.data=bo(e,t),i.attachments=t.length,{packet:i,buffers:t}}function bo(r,t){if(!r)return r;if(ki(r)){let e={_placeholder:!0,num:t.length};return t.push(r),e}else if(Array.isArray(r)){let e=new Array(r.length);for(let i=0;i<r.length;i++)e[i]=bo(r[i],t);return e}else if(typeof r=="object"&&!(r instanceof Date)){let e={};for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=bo(r[i],t));return e}return r}function Sa(r,t){return r.data=yo(r.data,t),delete r.attachments,r}function yo(r,t){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<t.length)return t[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let e=0;e<r.length;e++)r[e]=yo(r[e],t);else if(typeof r=="object")for(let e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e]=yo(r[e],t));return r}var Bp=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ea=5,Fe;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Fe||(Fe={}));var wo=class{constructor(t){this.replacer=t}encode(t){return(t.type===Fe.EVENT||t.type===Fe.ACK)&&wi(t)?this.encodeAsBinary({type:t.type===Fe.EVENT?Fe.BINARY_EVENT:Fe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===Fe.BINARY_EVENT||t.type===Fe.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){let e=Ca(t),i=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(i),n}};function Ta(r){return Object.prototype.toString.call(r)==="[object Object]"}var xi=class extends tt{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);let i=e.type===Fe.BINARY_EVENT;i||e.type===Fe.BINARY_ACK?(e.type=i?Fe.EVENT:Fe.ACK,this.reconstructor=new ko(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(ki(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0,i={type:Number(t.charAt(0))};if(Fe[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Fe.BINARY_EVENT||i.type===Fe.BINARY_ACK){let o=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);let s=t.substring(o,e);if(s!=Number(s)||t.charAt(e)!=="-")throw new Error("Illegal attachments");i.attachments=Number(s)}if(t.charAt(e+1)==="/"){let o=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););i.nsp=t.substring(o,e)}else i.nsp="/";let n=t.charAt(e+1);if(n!==""&&Number(n)==n){let o=e+1;for(;++e;){let s=t.charAt(e);if(s==null||Number(s)!=s){--e;break}if(e===t.length)break}i.id=Number(t.substring(o,e+1))}if(t.charAt(++e)){let o=this.tryParse(t.substr(e));if(xi.isPayloadValid(i.type,o))i.data=o;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(e){return!1}}static isPayloadValid(t,e){switch(t){case Fe.CONNECT:return Ta(e);case Fe.DISCONNECT:return e===void 0;case Fe.CONNECT_ERROR:return typeof e=="string"||Ta(e);case Fe.EVENT:case Fe.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&Bp.indexOf(e[0])===-1);case Fe.ACK:case Fe.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},ko=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){let e=Sa(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function Nt(r,t,e){return r.on(t,e),function(){r.off(t,e)}}var Ap=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),zr=class extends tt{constructor(t,e,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[Nt(t,"open",this.onopen.bind(this)),Nt(t,"packet",this.onpacket.bind(this)),Nt(t,"error",this.onerror.bind(this)),Nt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(Ap.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;let i={type:Fe.EVENT,data:e};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){let s=this.ids++,a=e.pop();this._registerAckCallback(s,a),i.id=s}let n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,e){var i;let n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[t]=e;return}let o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===t&&this.sendBuffer.splice(s,1);e.call(this,new Error("operation has timed out"))},n);this.acks[t]=(...s)=>{this.io.clearTimeoutFn(o),e.apply(this,[null,...s])}}emitWithAck(t,...e){let i=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((n,o)=>{e.push((s,a)=>i?s?o(s):n(a):n(s)),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());let i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...o)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(n)):(this._queue.shift(),e&&e(null,...o)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;let e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Fe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Fe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Fe.EVENT:case Fe.BINARY_EVENT:this.onevent(t);break;case Fe.ACK:case Fe.BINARY_ACK:this.onack(t);break;case Fe.DISCONNECT:this.ondisconnect();break;case Fe.CONNECT_ERROR:this.destroy();let i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){let e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){let e=this._anyListeners.slice();for(let i of e)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){let e=this,i=!1;return function(...n){i||(i=!0,e.packet({type:Fe.ACK,id:t,data:n}))}}onack(t){let e=this.acks[t.id];typeof e=="function"&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Fe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let e=this._anyOutgoingListeners.slice();for(let i of e)i.apply(this,t.data)}}};function $r(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}$r.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*r);r=(Math.floor(t*10)&1)==0?r-e:r+e}return Math.min(r,this.max)|0};$r.prototype.reset=function(){this.attempts=0};$r.prototype.setMin=function(r){this.ms=r};$r.prototype.setMax=function(r){this.max=r};$r.prototype.setJitter=function(r){this.jitter=r};var Hr=class extends tt{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,pr(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((i=e.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new $r({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;let n=e.parser||xo;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new jt(this.uri,this.opts);let e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;let n=Nt(e,"open",function(){i.onopen(),t&&t()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},s=Nt(e,"error",o);if(this._timeout!==!1){let a=this._timeout,l=this.setTimeoutFn(()=>{n(),o(new Error("timeout")),e.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(n),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(Nt(t,"ping",this.onping.bind(this)),Nt(t,"data",this.ondata.bind(this)),Nt(t,"error",this.onerror.bind(this)),Nt(t,"close",this.onclose.bind(this)),Nt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Mr(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new zr(this,t,e),this.nsps[t]=i),i}_destroy(t){let e=Object.keys(this.nsps);for(let i of e)if(this.nsps[i].active)return;this._close()}_packet(t){let e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();this._reconnecting=!0;let i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},e);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};var Ci={};function qr(r,t){typeof r=="object"&&(t=r,r=void 0),t=t||{};let e=ka(r,t.path||"/socket.io"),i=e.source,n=e.id,o=e.path,s=Ci[n]&&o in Ci[n].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||s,l;return a?l=new Hr(i,t):(Ci[n]||(Ci[n]=new Hr(i,t)),l=Ci[n]),e.query&&!t.query&&(t.query=e.queryKey),l.socket(e.path,t)}Object.assign(qr,{Manager:Hr,Socket:zr,io:qr,connect:qr});frappe.provide("frappe.realtime");var Co=class{constructor(){this.open_tasks={},this.open_docs=new Set}on(t,e){this.socket&&(this.connect(),this.socket.on(t,e))}off(t,e){this.socket&&this.socket.off(t,e)}connect(){this.lazy_connect&&(this.socket.connect(),this.lazy_connect=!1)}emit(t,...e){this.connect(),this.socket.emit(t,...e)}init(t=9e3,e=!1){if(frappe.boot.disable_async||this.socket)return;this.lazy_connect=e;let i=this;if(window.location.protocol=="https:"?this.socket=qr(this.get_host(t),{secure:!0,withCredentials:!0,reconnectionAttempts:3,autoConnect:!e}):window.location.protocol=="http:"&&(this.socket=qr(this.get_host(t),{withCredentials:!0,reconnectionAttempts:3,autoConnect:!e})),!this.socket){console.log("Unable to connect to "+this.get_host(t));return}this.socket.on("msgprint",function(n){frappe.msgprint(n)}),this.socket.on("progress",function(n){n.progress&&(n.percent=flt(n.progress[0])/n.progress[1]*100),n.percent&&frappe.show_progress(n.title||__("Progress"),n.percent,100,n.description,!0)}),this.setup_listeners(),$(document).on("form-load form-rename",function(n,o){!o.doc||o.is_new()||i.doc_subscribe(o.doctype,o.docname)}),$(document).on("form-refresh",function(n,o){!o.doc||o.is_new()||i.doc_open(o.doctype,o.docname)}),$(document).on("form-unload",function(n,o){!o.doc||o.is_new()||i.doc_close(o.doctype,o.docname)})}get_host(t=3e3){let e=window.location.origin;if(window.dev_server){let i=e.split(":");t=frappe.boot.socketio_port||t.toString()||"3000",i.length>2&&(e=i[0]+":"+i[1]),e=e+":"+t}return e+`/${frappe.boot.sitename}`}subscribe(t,e){this.emit("task_subscribe",t),this.emit("progress_subscribe",t),this.open_tasks[t]=e}task_subscribe(t){this.emit("task_subscribe",t)}task_unsubscribe(t){this.emit("task_unsubscribe",t)}doctype_subscribe(t){this.emit("doctype_subscribe",t)}doctype_unsubscribe(t){this.emit("doctype_unsubscribe",t)}doc_subscribe(t,e){if(frappe.flags.doc_subscribe){console.log("throttled");return}this.open_docs.has(`${t}:${e}`)||(frappe.flags.doc_subscribe=!0,setTimeout(function(){frappe.flags.doc_subscribe=!1},1e3),this.emit("doc_subscribe",t,e),this.open_docs.add(`${t}:${e}`))}doc_unsubscribe(t,e){return this.emit("doc_unsubscribe",t,e),this.open_docs.delete(`${t}:${e}`)}doc_open(t,e){this.emit("doc_open",t,e)}doc_close(t,e){this.emit("doc_close",t,e)}setup_listeners(){this.socket.on("task_status_change",function(t){this.process_response(t,t.status.toLowerCase())}),this.socket.on("task_progress",function(t){this.process_response(t,"progress")})}process_response(t,e){if(!t)return;let i=this.open_tasks[t.task_id];i[e]&&i[e](t),e==="success"&&i.callback&&i.callback(t),frappe.request.cleanup(i,t),i.always&&i.always(t),t.status_code&&t.status_code>400&&i.error&&i.error(t)}publish(t,e){this.socket&&this.emit(t,e)}};frappe.realtime=new Co;frappe.socketio=frappe.realtime;var Ld=Gt(La());var Mn={default:[{divisor:1e12,symbol:__("T",null,"Number system")},{divisor:1e9,symbol:__("B",null,"Number system")},{divisor:1e6,symbol:__("M",null,"Number system")},{divisor:1e3,symbol:__("K",null,"Number system")}],indian:[{divisor:1e7,symbol:__("Cr",null,"Number system")},{divisor:1e5,symbol:__("L",null,"Number system")},{divisor:1e3,symbol:__("K",null,"Number system")}],nepalese:[{divisor:1e11,symbol:__("Kh",null,"Number system")},{divisor:1e9,symbol:__("Ar",null,"Number system")},{divisor:1e7,symbol:__("Cr",null,"Number system")},{divisor:1e5,symbol:__("L",null,"Number system")},{divisor:1e3,symbol:__("K",null,"Number system")}]};var Bd=Gt($d());frappe.provide("frappe.utils");Array.prototype.uniqBy||(Object.defineProperty(Array.prototype,"uniqBy",{value:function(r){var t={};return this.filter(function(e){var i=r(e);return i in t?!1:t[i]=!0})}}),Object.defineProperty(Array.prototype,"move",{value:function(r,t){this.splice(t,0,this.splice(r,1)[0])}}));Object.defineProperty(Object.prototype,"setDefault",{value:function(r,t){return r in this||(this[r]=t),this[r]},writable:!0});String.prototype.plural=function(r){let t={"(quiz)$":"$1zes","^(ox)$":"$1en","([m|l])ouse$":"$1ice","(matr|vert|ind)ix|ex$":"$1ices","(x|ch|ss|sh)$":"$1es","([^aeiouy]|qu)y$":"$1ies","(hive)$":"$1s","(?:([^f])fe|([lr])f)$":"$1$2ves","(shea|lea|loa|thie)f$":"$1ves",sis$:"ses","([ti])um$":"$1a","(tomat|potat|ech|her|vet)o$":"$1oes","(bu)s$":"$1ses","(alias)$":"$1es","(octop)us$":"$1i","(ax|test)is$":"$1es","(us)$":"$1es","([^s]+)$":"$1s"},e={"(quiz)zes$":"$1","(matr)ices$":"$1ix","(vert|ind)ices$":"$1ex","^(ox)en$":"$1","(alias)es$":"$1","(octop|vir)i$":"$1us","(cris|ax|test)es$":"$1is","(shoe)s$":"$1","(o)es$":"$1","(bus)es$":"$1","([m|l])ice$":"$1ouse","(x|ch|ss|sh)es$":"$1","(m)ovies$":"$1ovie","(s)eries$":"$1eries","([^aeiouy]|qu)ies$":"$1y","([lr])ves$":"$1f","(tive)s$":"$1","(hive)s$":"$1","(li|wi|kni)ves$":"$1fe","(shea|loa|lea|thie)ves$":"$1f","(^analy)ses$":"$1sis","((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$":"$1$2sis","([ti])a$":"$1um","(n)ews$":"$1ews","(h|bl)ouses$":"$1ouse","(corpse)s$":"$1","(us)es$":"$1",s$:""},i={move:"moves",foot:"feet",goose:"geese",sex:"sexes",child:"children",man:"men",tooth:"teeth",person:"people"};if(["sheep","fish","deer","moose","series","species","money","rice","information","equipment"].indexOf(this.toLowerCase())>=0)return this;let o,s,a;for(o in i)if(r?(s=new RegExp(i[o]+"$","i"),a=o):(s=new RegExp(o+"$","i"),a=i[o]),s.test(this))return this.replace(s,a);let l;r?l=e:l=t;let u;for(u in l)if(s=new RegExp(u,"i"),s.test(this))return this.replace(s,l[u]);return this};Object.assign(frappe.utils,{get_random:function(r){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",i=0;i<r;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},get_file_link:function(r){return r=cstr(r),frappe.utils.is_url(r)?r:r.indexOf("/")===-1?"files/"+r:r},replace_newlines(r){return r?r.replace(/\n/g,"<br>"):""},is_html:function(r){return!(!r||r.indexOf("<br>")==-1&&r.indexOf("<p")==-1&&r.indexOf("<img")==-1&&r.indexOf("<div")==-1&&!r.includes("<span"))},is_mac:function(){return window.navigator.platform==="MacIntel"},is_xs:function(){return $(document).width()<768},is_sm:function(){return $(document).width()<991&&$(document).width()>=768},is_md:function(){return $(document).width()<1199&&$(document).width()>=991},is_json:function(r){try{JSON.parse(r)}catch(t){return!1}return!0},parse_json:function(r){let t="";try{t=JSON.parse(r)}catch(e){return r}return t},strip_whitespace:function(r){return(r||"").replace(/<p>\s*<\/p>/g,"").replace(/<br>(\s*<br>\s*)+/g,"<br><br>")},encode_tags:function(r){var t={"&":"&amp;","<":"&lt;",">":"&gt;"};function e(i){return t[i]||i}return r.replace(/[&<>]/g,e)},strip_original_content:function(r){var t=[],e=[],i=r.indexOf("<br>")===-1?`
`:"<br>";return $.each(r.split(i),function(n,o){var s=strip(o);s&&(s.substr(0,1)===">"||s.substr(0,4)==="&gt;")?e.push(o):(t=t.concat(e),t.push(o),e=[])}),t.join(i)},escape_html:function(r){if(!r)return"";let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#x60;","=":"&#x3D;"};return String(r).replace(/[&<>"'`=]/g,e=>t[e]||e)},unescape_html:function(r){let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x60;":"`","&#x3D;":"="};return String(r).replace(/&amp;|&lt;|&gt;|&quot;|&#39;|&#x60;|&#x3D;/g,e=>t[e]||e)},html2text:function(r){return new DOMParser().parseFromString(r,"text/html").body.textContent},is_url:function(r){return r.toLowerCase().substr(0,7)=="http://"||r.toLowerCase().substr(0,8)=="https://"},to_title_case:function(r,t=!1){let e=r.toLowerCase().replace(/(?:^|[\s-/])\w/g,function(n){return n.toUpperCase()}),i=t?" ":"";return e.replace(/-|_/g,i)},toggle_blockquote:function(r){if(!r)return r;var t=$("<div></div>").html(r);return t.find("blockquote").parent("blockquote").addClass("hidden").before('<p><a class="text-muted btn btn-default toggle-blockquote" style="padding: 2px 7px 0px; line-height: 1;"> 					\u2022 \u2022 \u2022 				</a></p>'),t.html()},scroll_to:function(r,t=!0,e,i,n,o=!1){if(frappe.flags.disable_auto_scroll)return;i=i||$("html, body");let s=0;r&&(s=typeof r=="number"?r-cint(e):this.get_scroll_position(r,e)),s<0&&(s=0);let a=()=>{o&&($(r).addClass("highlight"),document.addEventListener("click",function(){$(r).removeClass("highlight")},{once:!0}))};if(s==i.scrollTop())return a();t?i.animate({scrollTop:s}).promise().then(()=>{a(),n&&n()}):i.scrollTop(s)},get_scroll_position:function(r,t){let e=$(".navbar").height()+$(".page-head:visible").height()||$(".navbar").height();return $(r).offset().top-e-cint(t)},filter_dict:function(r,t){var e=[];return typeof t=="string"?[r[t]]:($.each(r,function(i,n){for(var o in t)if($.isArray(t[o])){if(t[o][0]=="in"){if(t[o][1].indexOf(n[o])==-1)return}else if(t[o][0]=="not in"){if(t[o][1].indexOf(n[o])!=-1)return}else if(t[o][0]=="<"){if(!(n[o]<t[o]))return}else if(t[o][0]=="<="){if(!(n[o]<=t[o]))return}else if(t[o][0]==">"){if(!(n[o]>t[o]))return}else if(t[o][0]==">="&&!(n[o]>=t[o]))return}else if(n[o]!=t[o])return;e.push(n)}),e)},comma_or:function(r){return frappe.utils.comma_sep(r," "+__("or")+" ")},comma_and:function(r){return frappe.utils.comma_sep(r," "+__("and")+" ")},comma_sep:function(r,t){return r instanceof Array?r.length==0?"":r.length==1?r[0]:r.slice(0,r.length-1).join(", ")+t+r.slice(-1)[0]:r},set_footnote:function(r,t,e){return r||(r=$('<div class="text-muted footnote-area level">').appendTo(t)),e?r.html(e):(r.remove(),r=null),r},get_args_dict_from_url:function(r){var t={};return $.each(decodeURIComponent(r).split("&"),function(e,i){i=i.split("="),t[i[0]]=i[1]}),t},get_url_from_dict:function(r){return $.map(r,function(t,e){return t!==null?encodeURIComponent(e)+"="+encodeURIComponent(t):null}).join("&")||""},validate_type:function(r,t){var e;switch(t){case"phone":e=/^([0-9 +_\-,.*#()]){1,20}$/;break;case"name":e=/^[\w][\w'-]*([ \w][\w'-]+)*$/;break;case"number":e=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":e=/^\d+$/;break;case"alphanum":e=/^\w+$/;break;case"email":e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;break;case"url":e=/^((([A-Za-z0-9.+-]+:(?:\/\/)?)(?:[-;:&=\+\,\w]@)?[A-Za-z0-9.-]+(:[0-9]+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/i;break;case"dateIso":e=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;default:return!1}return r!==""?e.test(r):!1},guess_style:function(r,t,e){var i=t||"default",n="gray";return r&&(r=cstr(r),has_words(["Pending","Review","Medium","Not Approved"],r)?(i="warning",n="orange"):has_words(["Open","Urgent","High","Failed","Rejected","Error"],r)?(i="danger",n="red"):has_words(["Closed","Finished","Converted","Completed","Complete","Confirmed","Approved","Yes","Active","Available","Paid","Success"],r)?(i="success",n="green"):has_words(["Submitted"],r)&&(i="info",n="blue")),e?n:i},guess_colour:function(r){return frappe.utils.guess_style(r,null,!0)},get_indicator_color:function(r){return frappe.db.get_list("Workflow State",{filters:{name:r},fields:["name","style"]}).then(t=>{let e=t[0];if(!e.style)return frappe.utils.guess_colour(e.name);let i=e.style;return{Success:"green",Warning:"orange",Danger:"red",Primary:"blue"}[i]})},sort:function(r,t,e,i){if(!r||r.length<2)return r||[];var n={string:function(o,s){return cstr(o[t]).localeCompare(cstr(s[t]))},number:function(o,s){return flt(o[t])-flt(s[t])}};return e||(e=typeof r[0][t]=="string"?"string":"number"),r.sort(n[e]),i&&r.reverse(),r},unique:function(r){for(var t={},e=[],i=0,n=r.length;i<n;i++)r[i]in t||(t[r[i]]=null,e.push(r[i]));return e},remove_nulls:function(r){for(var t=[],e=0,i=r.length;e<i;e++)is_null(r[e])||t.push(r[e]);return t},all:function(r){for(var t=0,e=r.length;t<e;t++)if(!r[t])return!1;return!0},dict:function(r,t){var e=[];return $.each(t,function(i,n){var o={};$.each(r,function(s,a){o[a]=n[s]}),e.push(o)}),e},sum:function(r){return r.reduce(function(t,e){return flt(t)+flt(e)},0)},arrays_equal:function(r,t){if(!r||!t||r.length!=t.length)return!1;for(var e=0;e<r.length;e++)if($.isArray(r[e])){if(!frappe.utils.arrays_equal(r[e],t[e]))return!1}else if(r[e]!==t[e])return!1;return!0},intersection:function(r,t){var e=0,i=0,n=new Array;for(r=[].concat(r).sort(),t=[].concat(t).sort();e<r.length&&i<t.length;)r[e]<t[i]?e++:(r[e]>t[i]||(n.push(r[e]),e++),i++);return n},resize_image:function(r,t,e,i){var n=new Image;e||(e=600),i||(i=400),n.src=r.result,n.onload=function(){var o=n.width,s=n.height;o>s?o>e&&(s*=e/o,o=e):s>i&&(o*=i/s,s=i);var a=document.createElement("canvas");a.width=o,a.height=s;var l=a.getContext("2d");l.drawImage(this,0,0,o,s);var u=a.toDataURL("image/jpeg");setTimeout(function(){t(u)},10)}},csv_to_array:function(r,t){t=t||",";for(var e=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),i=[[]],n=null;n=e.exec(r);){var o=n[1];o.length&&o!==t&&i.push([]);var s;n[2]?s=n[2].replace(new RegExp('""',"g"),'"'):s=n[3],i[i.length-1].push(s)}return i},warn_page_name_change:function(){frappe.msgprint(__("Note: Changing the Page Name will break previous URL to this page."))},set_title:function(r){frappe._original_title=r,frappe._title_prefix&&(r=frappe._title_prefix+" "+r.replace(/<[^>]*>/g,"")),document.title=r;let t=frappe.router.get_sub_path();frappe.route_titles[t]=r},set_title_prefix:function(r){frappe._title_prefix=r,frappe.utils.set_title(frappe._original_title)},is_image_file:function(r){return r?(r=r.split("?")[0],/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(r)):!1},is_video_file:function(r){return r?(r=r.split("?")[0],/\.(mov|mp4|mkv|webm)$/i.test(r)):!1},play_sound:function(r){try{if(frappe.boot.user.mute_sounds)return;var t=$("#sound-"+r)[0];t.volume=t.getAttribute("volume"),t.play()}catch(e){console.log("Cannot play sound",r,e)}},split_emails:function(r){var t=[];return r&&r.split(/[,\n](?=(?:[^"]|"[^"]*")*$)/g).forEach(function(e){e=e.trim(),e&&t.push(e)}),t},supportsES6:function(){try{return new Function("(a = 0) => a"),!0}catch(r){return!1}}(),throttle:function(r,t,e){var i,n,o,s=null,a=0;e||(e={});let l=function(){a=e.leading===!1?0:Date.now(),s=null,o=r.apply(i,n),s||(i=n=null)};return function(){var u=Date.now();!a&&e.leading===!1&&(a=u);let d=t-(u-a);return i=this,n=arguments,d<=0||d>t?(s&&(clearTimeout(s),s=null),a=u,o=r.apply(i,n),s||(i=n=null)):!s&&e.trailing!==!1&&(s=setTimeout(l,d)),o}},debounce:function(r,t,e){var i;return function(){var n=this,o=arguments,s=function(){i=null,e||r.apply(n,o)},a=e&&!i;clearTimeout(i),i=setTimeout(s,t),a&&r.apply(n,o)}},get_form_link:function(r,t,e=!1,i=null,n=null){i=i||t,t=encodeURIComponent(t);let o=`/app/${encodeURIComponent(r.toLowerCase().replace(/ /g,"-"))}/${t}`;return n&&(o+=frappe.utils.make_query_string(n)),e?`<a href="${o}">${i}</a>`:o},get_route_label(r){let t=r.split("/");return t[2]==="Report"||t[0]==="query-report"?__("{0} Report",[t[3]||t[1]]):t[0]==="List"?__("{0} List",[t[1]]):t[0]==="modules"?__("{0} Modules",[t[1]]):t[0]==="dashboard"?__("{0} Dashboard",[t[1]]):__(frappe.utils.to_title_case(t[0],!0))},report_column_total:function(r,t,e){return t.column.disable_total?"":r.length>0?t.column.fieldtype=="Percent"||e==="mean"?r.reduce((i,n)=>flt(i)+flt(n))/r.length:t.column.fieldtype=="Int"?r.reduce((i,n)=>cint(i)+cint(n)):frappe.model.is_numeric_field(t.column.fieldtype)?r.reduce((i,n)=>flt(i)+flt(n)):null:null},setup_search(r,t,e,i){let n=r.find('[data-element="search"]').show();n.focus().val("");let o=r.find(t).show();n.off("keyup").on("keyup",()=>{let s=n.val().toLowerCase();s=s.replace(/^\s+|\s+$/g,"");for(let a=0;a<o.length;a++){let l=o.eq(a).find(e),u=l.text().toLowerCase(),d="";i&&l.attr(i)&&(d=l.attr(i).toLowerCase()),u.includes(s)||d.includes(s)?o.eq(a).css("display",""):o.eq(a).css("display","none")}})},setup_timer(r,t,e){let i=t>r,n=r,o=setInterval(()=>{if(i?n++:n--,i?n>t:n<t){clearInterval(o);return}e.text(n)},1e3)},deep_equal(r,t){return(0,Ld.default)(r,t)},deep_clone(r,t){return(0,Bd.default)(r,t)},file_name_ellipsis(r,t){let e=t*2/3,i=t-e,n=r.split("."),o=n.pop(),s=n.join(""),a=s.slice(0,e),l=s.slice(-i);return s.length>t?`${a}...${l}.${o}`:r},get_decoded_string(r){let e=r.split(",")[1],i=atob(e);try{let n=escape(i);i=decodeURIComponent(n)}catch(n){}return i},copy_to_clipboard(r){let t=()=>{frappe.show_alert({indicator:"green",message:__("Copied to clipboard.")})};if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(r).then(t);else{let e=$("<textarea>");$("body").append(e),e.val(r).select(),document.execCommand("copy"),t(),e.remove()}},is_rtl(r=null){return["ar","he","fa","ps"].includes(r||frappe.boot.lang)},bind_actions_with_object(r,t){return $(r).off("click.class_actions"),$(r).on("click.class_actions","[data-action]",e=>{let i=$(e.currentTarget),n=i.data("action");t[n]&&t[n](e,i)}),r},eval(r,t={}){let e=Object.keys(t),i=Object.values(t);r=`let out = ${r}; return out`;try{return new Function(...e,r)(...i)}catch(n){throw console.log("Error evaluating the following expression:"),console.error(r),n}},get_browser(){let r=navigator.userAgent,t,e=r.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(e[1])?(t=/\brv[ :]+(\d+)/g.exec(r)||[],{name:"IE",version:t[1]||""}):e[1]==="Chrome"&&(t=r.match(/\bOPR|Edge\/(\d+)/),t!=null)?{name:"Opera",version:t[1]}:(e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=r.match(/version\/(\d+)/i))!=null&&e.splice(1,1,t[1]),{name:e[0],version:e[1]})},get_formatted_duration(r,t=null){let e="";if(t||(t={hide_days:0,hide_seconds:0}),r){let i=frappe.utils.seconds_to_duration(r,t);i.days&&(e+=i.days+__("d",null,"Days (Field: Duration)")),i.hours&&(e+=e.length?" ":"",e+=i.hours+__("h",null,"Hours (Field: Duration)")),i.minutes&&(e+=e.length?" ":"",e+=i.minutes+__("m",null,"Minutes (Field: Duration)")),i.seconds&&(e+=e.length?" ":"",e+=i.seconds+__("s",null,"Seconds (Field: Duration)"))}return e},seconds_to_duration(r,t){let e=r>0?Math.floor:Math.ceil,i={days:e(r/86400),hours:e(r%86400/3600),minutes:e(r%3600/60),seconds:e(r%60)};return t&&t.hide_days&&(i.hours=e(r/3600),i.days=0),i},duration_to_seconds(r=0,t=0,e=0,i=0){let n=0;return r&&(n+=r*24*60*60),t&&(n+=t*60*60),e&&(n+=e*60),i&&(n+=i),n},get_duration_options:function(r){return{hide_days:r.hide_days,hide_seconds:r.hide_seconds}},get_number_system:function(r){return["Bangladesh","India","Myanmar","Pakistan"].includes(r)?Mn.indian:r=="Nepal"?Mn.nepalese:Mn.default},map_defaults:{center:[19.08,72.8961],zoom:13,tiles:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'},image_path:"/assets/frappe/images/leaflet/"},icon(r,t="sm",e="",i="",n=""){let o="",s=r.startsWith("es-");return r=s?`${"#"+r}`:`${"#icon-"+r}`,typeof t=="object"?i+=` width: ${t.width}; height: ${t.height}`:o=`icon-${t}`,`<svg class="${s?r.startsWith("es-solid")?"es-icon es-solid":"es-icon es-line":"icon"} ${n} ${o}" style="${i}">
			<use class="${e}" href="${r}"></use>
		</svg>`},flag(r){return`<img
		src="https://flagcdn.com/${r}.svg"
		width="20" height="15">`},make_chart(r,t={}){let e={type:"bar",colors:["light-blue"],axisOptions:{xIsSeries:1,shortenYAxisNumbers:1,xAxisMode:"tick",numberFormatter:frappe.utils.format_chart_axis_number}};for(let i in t)typeof e[i]=="object"&&typeof t[i]=="object"?e[i]=Object.assign(e[i],t[i]):e[i]=t[i];return new frappe.Chart(r,e)},format_chart_axis_number(r,t){let e=frappe.sys_defaults.country;return frappe.utils.shorten_number(r,t||e,3)},generate_route(r){let t=r.type.toLowerCase();t==="doctype"&&(r.doctype=r.name);let e="";if(r.route)e=r.route;else if(r.link)e=strip(r.link,"#");else if(t==="doctype"){let i=frappe.router.slug(r.doctype);if(frappe.model.is_single(r.doctype))e=i;else switch(r.doc_view){case"List":r.filters&&(frappe.route_options=r.filters),e=`${i}/view/list`;break;case"Tree":e=`${i}/view/tree`;break;case"Report Builder":e=`${i}/view/report`;break;case"Dashboard":e=`${i}/view/dashboard`;break;case"New":e=`${i}/new`;break;case"Calendar":e=`${i}/view/calendar/default`;break;case"Kanban":e=`${i}/view/kanban`,r.kanban_board&&(e+=`/${r.kanban_board}`);break;default:e=i}}else t==="report"?r.is_query_report?e="query-report/"+r.name:r.doctype?e=frappe.router.slug(r.doctype)+"/view/report/"+r.name:e="/report/"+r.name:t==="page"?e=r.name:t==="dashboard"&&(e=`dashboard-view/${r.name}`);return r.route_options&&(e+="?"+$.map(r.route_options,function(i,n){return encodeURIComponent(n)+"="+encodeURIComponent(i)}).join("&")),`/app/${e}`},shorten_number:function(r,t,e=4,i=2){if(String(r).match(/\d/g).length<e)return r.toString();let o=this.get_number_system(t),s=Math.abs(Math.round(r));for(let a of o)if(s>=a.divisor){let l=r/a.divisor;return l=this.get_number_of_decimals(l)>i?l.toFixed(i):l,l+" "+a.symbol}return r.toFixed(i)},get_number_of_decimals:function(r){return Math.floor(r)===r?0:r.toString().split(".")[1].length||0},build_summary_item(r){if(r.type=="separator")return $(`<div class="summary-separator">
				<div class="summary-value ${r.color?r.color.toLowerCase():"text-muted"}">${r.value}</div>
			</div>`);let t={fieldtype:r.datatype},e=null;r.datatype=="Currency"&&(t.options="currency",e={currency:r.currency});let i=frappe.format(r.value,t,{only_value:!0},e),n=r.indicator?r.indicator.toLowerCase():r.color?r.color.toLowerCase():"";return $(`<div class="summary-item">
			<span class="summary-label">${__(r.label)}</span>
			<div class="summary-value ${n}">${i}</div>
		</div>`)},print(r,t,e,i,n){if(!window.open(frappe.urllib.get_full_url("/printview?doctype="+encodeURIComponent(r)+"&name="+encodeURIComponent(t)+"&trigger_print=1&format="+encodeURIComponent(e)+"&no_letterhead="+(i?"0":"1")+"&letterhead="+encodeURIComponent(i)+(n?"&_lang="+n:"")))){frappe.msgprint(__("Please enable pop-ups"));return}},get_clipboard_data(r){let t=r;return(t.clipboardData||window.clipboardData||t.originalEvent.clipboardData).getData("Text")},add_custom_button(r,t,e="",i="",n,o,s){n||(n="btn-secondary");let a=$(`<button class="btn ${n} btn-xs ${e}" title="${i}">${r}</button>`);a.click(l=>{l.stopPropagation(),t&&t(l)}),!s&&a.appendTo(o),s&&o.prepend(a)},add_select_group_button(r,t,e,i="",n){let o=t[0],s=$(`
			<div class="btn-group select-group-btn">
				<button type="button" class="btn ${e} btn-sm selected-button">
					<span class="left-icon">${i&&frappe.utils.icon(i,"xs")}</span>
					<span class="label">${o.label}</span>
				</button>

				<button type="button" class="btn ${e} btn-sm dropdown-toggle dropdown-toggle-split" data-toggle="dropdown">
					${frappe.utils.icon("down","xs")}
				</button>

				<ul class="dropdown-menu dropdown-menu-right" role="menu"></ul>
			</div>
		`);return t.forEach(a=>{$(`<li>
				<a class="dropdown-item flex">
					<div class="tick-icon mr-2">${frappe.utils.icon("check","xs")}</div>
					<div>
						<div class="item-label">${a.label}</div>
						<div class="item-description text-muted small">${a.description||""}</div>
					</div>
				</a>
			</li>`).appendTo(s.find(".dropdown-menu")).click(l=>{o=a,s.find(".selected-button .label").text(a.label),$(l.currentTarget).find(".tick-icon").addClass("selected"),$(l.currentTarget).siblings().find(".tick-icon").removeClass("selected")})}),s.find(".dropdown-menu li:first-child .tick-icon").addClass("selected"),s.find(".selected-button").click(a=>{a.stopPropagation(),o.action&&o.action(a)}),!n&&s.appendTo(r),n&&r.prepend(s),s},sleep(r){return new Promise(t=>setTimeout(t,r))},parse_array(r){if(r&&r.length!==0)return r},range(r,t){t||(t=r,r=0);let e=[];for(let i=r;i<t;i++)e.push(i);return e},get_link_title(r,t){if(!(!r||!t||!frappe._link_titles))return frappe._link_titles[r+"::"+t]},add_link_title(r,t,e){!r||!t||(frappe._link_titles||(frappe._link_titles={}),frappe._link_titles[r+"::"+t]=e)},fetch_link_title(r,t){if(!(!r||!t))try{return frappe.xcall("frappe.desk.search.get_link_title",{doctype:r,docname:t}).then(e=>(frappe.utils.add_link_title(r,t,e),e))}catch(e){return console.log("Error while fetching link title."),console.log(e),Promise.resolve(t)}},only_allow_num_decimal(r){r.on("input",t=>{let e=$(t.target);e.val(e.val().replace(/[^0-9.]/g,"")),(t.which!=46||e.val().indexOf(".")!=-1)&&(t.which<48||t.which>57)&&t.preventDefault()})},string_to_boolean(r){switch(r.toLowerCase().trim()){case"t":case"true":case"y":case"yes":case"1":return!0;case"f":case"false":case"n":case"no":case"0":case null:return!1;default:return r}},get_filter_as_json(r){let t=null;return r.length&&(t={},r.forEach(e=>{t[e[1]]=[e[2],e[3]]}),t=JSON.stringify(t)),t},process_filter_expression(r){return new Function(`return ${r}`)()},get_filter_from_json(r,t){if(r){if(!r.length)return[];let e=this.process_filter_expression(r);if(!t){if(Array.isArray(e)){let i={};return e.forEach(n=>{i[n[1]]=[n[2],n[3]]}),i||[]}return e||[]}return Array.isArray(e)?e:Object.keys(e).map(i=>{let n=e[i];return[t,i,n[0],n[1],!1]})}},load_video_player(){return frappe.require("video_player.bundle.js")},is_current_user(r){return r===frappe.session.user},debug:{watch_property(r,t,e=console.trace){if(!frappe.boot.developer_mode)return;console.warn("Adding property watcher, make sure to remove it after debugging.");let i="$_"+t+"_$";r[i]=r[t],Object.defineProperty(r,t,{get:function(){return r[i]},set:function(n){e(),r[i]=n}})}},generate_tracking_url(){frappe.prompt([{fieldname:"url",label:__("Web Page URL"),fieldtype:"Data",options:"URL",reqd:1,default:localStorage.getItem("tracker_url:url")},{fieldname:"source",label:__("Source"),fieldtype:"Data",default:localStorage.getItem("tracker_url:source")},{fieldname:"campaign",label:__("Campaign"),fieldtype:"Link",ignore_link_validation:1,options:"Marketing Campaign",default:localStorage.getItem("tracker_url:campaign")},{fieldname:"medium",label:__("Medium"),fieldtype:"Data",default:localStorage.getItem("tracker_url:medium")}],function(r){let t=r.url;localStorage.setItem("tracker_url:url",r.url),r.source&&(t+="?source="+r.source,localStorage.setItem("tracker_url:source",r.source)),r.campaign&&(t+="&campaign="+r.campaign,localStorage.setItem("tracker_url:campaign",r.campaign)),r.medium&&(t+="&medium="+r.medium.toLowerCase(),localStorage.setItem("tracker_url:medium",r.medium)),frappe.utils.copy_to_clipboard(t),frappe.msgprint(__("Tracking URL generated and copied to clipboard")+`: <br><a href="${t}">${t.bold()}</a>`,__("Here's your tracking URL"))},__("Generate Tracking URL"))}});frappe.provide("frappe.utils");var s0={init(){this.jq=jQuery({})},trigger(r,t){!this.jq&&this.init(),this.jq.trigger(r,t)},once(r,t){!this.jq&&this.init(),this.jq.one(r,(e,i)=>t(i))},on(r,t){!this.jq&&this.init(),this.jq.bind(r,(e,i)=>t(i))},off(r,t){!this.jq&&this.init(),this.jq.unbind(r,(e,i)=>t(i))}};frappe.utils.make_event_emitter=function(r){return Object.assign(r,s0),r};frappe.provide("frappe.views");frappe.re_route={"#login":""};frappe.route_titles={};frappe.route_flags={};frappe.route_history=[];frappe.view_factory={};frappe.view_factories=[];frappe.route_options=null;frappe.open_in_new_tab=!1;frappe.route_hooks={};$(window).on("hashchange",function(r){if(window.location.hash&&!frappe.router.is_app_route(r.currentTarget.pathname)){let t=frappe.router.get_sub_path(window.location.hash);return frappe.router.push_state(t),!1}});window.addEventListener("popstate",r=>(frappe.router.route(),r.preventDefault(),!1));$("body").on("click","a",function(r){let t=r.currentTarget,e=t.getAttribute("href"),i=t.hostname===window.location.hostname;if(t.getAttribute("target")==="_blank")return;let n=o=>(r.preventDefault(),frappe.set_route(o),!1);if(!(!i||t.getAttribute("onclick")||r.ctrlKey||r.metaKey||e==="#")){if(e&&e.startsWith("#"))return n(t.hash);if(frappe.router.is_app_route(t.pathname)){if(t.search){frappe.route_options={};let o=new URLSearchParams(t.search);for(let[s,a]of o)frappe.route_options[s]=a}return t.hash&&(frappe.route_hash=t.hash),n(t.pathname)}}});frappe.router={current_route:null,routes:{},factory_views:["form","list","report","tree","print","dashboard"],list_views:["list","kanban","report","calendar","tree","gantt","dashboard","image","inbox","map"],list_views_route:{list:"List",kanban:"Kanban",report:"Report",calendar:"Calendar",tree:"Tree",gantt:"Gantt",dashboard:"Dashboard",image:"Image",inbox:"Inbox",file:"Home",map:"Map"},layout_mapped:{},is_app_route(r){if(!!r&&(r.substr(0,1)==="/"&&(r=r.substr(1)),r=r.split("/"),r[0]))return r[0]==="app"},setup(){for(let r of frappe.boot.user.can_read)this.routes[this.slug(r)]={doctype:r};if(frappe.boot.doctype_layouts)for(let r of frappe.boot.doctype_layouts)this.routes[this.slug(r.name)]={doctype:r.document_type,doctype_layout:r.name}},async route(){if(!frappe.app)return;let r=this.get_sub_path();frappe.boot.setup_complete?!frappe.re_route["setup-wizard"]&&(frappe.re_route["setup-wizard"]="app"):r.startsWith("setup-wizard")||(frappe.re_route["setup-wizard"]&&delete frappe.re_route["setup-wizard"],frappe.set_route(["setup-wizard"])),!this.re_route(r)&&(this.current_sub_path=r,this.current_route=await this.parse(),this.set_history(r),this.render(),this.set_title(r),this.trigger("change"))},async parse(r){return r=this.get_sub_path_string(r).split("/"),r?(r=$.map(r,this.decode_component),this.set_route_options_from_url(),await this.convert_to_standard_route(r)):[]},async convert_to_standard_route(r){let t=r[1]&&`${r[1]}-${frappe.user.name.toLowerCase()}`;if(frappe.workspaces[r[0]])r=["Workspaces",frappe.workspaces[r[0]].title];else if(r[0]=="private"){if(!frappe.workspaces[t]&&localStorage.new_workspace){let e=JSON.parse(localStorage.new_workspace);frappe.router.slug(e.title)===r[1]&&(frappe.workspaces[t]=e)}if(!frappe.workspaces[t])return frappe.msgprint(__("Workspace <b>{0}</b> does not exist",[r[1]])),["Workspaces"];r=["Workspaces","private",frappe.workspaces[t].title]}else this.routes[r[0]]&&(r=await this.set_doctype_route(r));return r},doctype_route_exist(r){return r=this.get_sub_path_string(r).split("/"),this.routes[r[0]]},set_doctype_route(r){let t=this.routes[r[0]];return frappe.model.with_doctype(t.doctype).then(()=>{let e=frappe.get_meta(t.doctype);if(r[1]&&r[1]==="view"&&r[2])r=this.get_standard_route_for_list(r,t,e.force_re_route_to_default_view&&e.default_view?e.default_view:null);else if(r[1]&&r[1]!=="view"){let i=r[1];r.length>2&&(i=r.slice(1).join("/")),r=["Form",t.doctype,i]}else frappe.model.is_single(t.doctype)?r=["Form",t.doctype,t.doctype]:e.default_view?r=["List",t.doctype,this.list_views_route[e.default_view.toLowerCase()]]:r=["List",t.doctype,"List"];return this.doctype_layout=t.doctype_layout,r})},get_standard_route_for_list(r,t,e){let i,n=e||r[2]||"";if(n.toLowerCase()==="tree")i=["Tree",t.doctype];else{let o=this.list_views_route[n.toLowerCase()];r[2].toLowerCase()!==(o==null?void 0:o.toLowerCase())&&(frappe.route_flags.replace_route=!0,r[2]=n.toLowerCase(),this.set_route(r)),i=["List",t.doctype,this.list_views_route[n.toLowerCase()]],r[3]&&i.push(...r.slice(3,r.length))}return i},set_history(){frappe.route_history.push(this.current_route),frappe.ui.hide_open_dialog()},render(){this.current_route[0]?this.render_page():frappe.views.pageview.show("")},render_page(){let r=this.current_route,t=frappe.utils.to_title_case(r[0]);if(r[1]&&frappe.views[t+"Factory"])r[0]=t,frappe.view_factory[t]||(frappe.view_factory[t]=new frappe.views[t+"Factory"]),frappe.view_factory[t].show();else{let e=frappe.utils.xss_sanitise(r[0]);frappe.views.pageview&&frappe.views.pageview.show(e)}},re_route(r){if(frappe.re_route[r]!==void 0){let t=this.get_sub_path(frappe.re_route[r]);return t===this.current_sub_path?window.history.back():frappe.set_route(t),!0}},set_title(r){frappe.route_titles[r]&&frappe.utils.set_title(frappe.route_titles[r])},set_route(){let r=Array.from(arguments);return new Promise(t=>{r=this.get_route_from_arguments(r),r=this.convert_from_standard_route(r);let e=this.make_url(r);e+=frappe.route_hash||"",frappe.route_hash=null,frappe.open_in_new_tab?(localStorage.route_options=JSON.stringify(frappe.route_options),window.open(e,"_blank"),frappe.open_in_new_tab=!1):this.push_state(e),setTimeout(()=>{frappe.after_ajax&&frappe.after_ajax(()=>{t()})},100)}).finally(()=>frappe.route_flags={})},get_route_from_arguments(r){return r.length===1&&$.isArray(r[0])&&(r=r[0]),r.length===1&&r[0]&&r[0].includes("/")&&(r=$.map(r[0].split("/"),this.decode_component)),r&&r[0]==""&&r.shift(),r&&["desk","app"].includes(r[0])&&r.shift(),r},convert_from_standard_route(r){let t=r[0]?r[0].toLowerCase():"",e=r;return t==="list"?r[2]&&r[2]!=="list"&&!$.isPlainObject(r[2])?(e=[this.slug(r[1]),"view",r[2].toLowerCase()],r[3]&&e.push(...r.slice(3,r.length))):($.isPlainObject(r[2])&&(frappe.route_options=r[2]),e=[this.slug(r[1])]):t==="form"?(e=[this.slug(r[1])],r[2]&&e.push(r[2])):t==="tree"&&(e=[this.slug(r[1]),"view","tree"]),e},slug_parts(r){return r[0]&&this.factory_views.includes(r[0].toLowerCase())&&(r[0]=r[0].toLowerCase(),r[1]=this.slug(r[1])),r},make_url(r){let t=$.map(r,function(a){return $.isPlainObject(a)?(frappe.route_options=a,null):encodeURIComponent(String(a))}).join("/"),e=frappe.workspaces[`home-${frappe.user.name.toLowerCase()}`],i=e||frappe.workspaces.home?"home":"",n=!!e,o=Object.keys(frappe.workspaces)[0];!i&&o&&(i=frappe.workspaces[o].title,n=!frappe.workspaces[o].public);let s=(n?"private/":"")+frappe.router.slug(i);return"/app/"+(t||s)},push_state(r){if(window.location.pathname!==r){let t=frappe.route_flags.replace_route?"replaceState":"pushState";history[t](null,null,r),this.route()}},get_sub_path_string(r){return r||(r=window.location.pathname,r.includes("app#")&&(r=window.location.hash)),this.strip_prefix(r)},strip_prefix(r){return r.substr(0,1)=="/"&&(r=r.substr(1)),r.startsWith("app/")&&(r=r.substr(4)),r=="app"&&(r=r.substr(4)),r.substr(0,1)=="/"&&(r=r.substr(1)),r.substr(0,1)=="#"&&(r=r.substr(1)),r.substr(0,1)=="!"&&(r=r.substr(1)),r},get_sub_path(r){var t=this.get_sub_path_string(r);return r=$.map(t.split("/"),this.decode_component).join("/"),r},set_route_options_from_url(){let r=window.location.search;frappe.route_options||(frappe.route_options={}),localStorage.getItem("route_options")&&(frappe.route_options=JSON.parse(localStorage.getItem("route_options")),localStorage.removeItem("route_options"));let t=new URLSearchParams(r);for(let[e,i]of t)frappe.route_options[e]=i},decode_component(r){try{return decodeURIComponent(r)}catch(t){if(t instanceof URIError)return r;throw t}},slug(r){return r.toLowerCase().replace(/ /g,"-")}};frappe.get_route=()=>frappe.router.current_route;frappe.get_route_str=()=>frappe.router.current_route.join("/");frappe.set_route=function(){return frappe.router.set_route.apply(frappe.router,arguments)};frappe.get_prev_route=function(){return frappe.route_history&&frappe.route_history.length>1?frappe.route_history[frappe.route_history.length-2]:[]};frappe.set_re_route=function(){var r=frappe.router.get_sub_path();frappe.set_route.apply(null,arguments),frappe.re_route[r]=frappe.router.get_sub_path()};frappe.has_route_options=function(){return Boolean(Object.keys(frappe.route_options||{}).length)};frappe.utils.make_event_emitter(frappe.router);frappe.route_history_queue=[];var a0=["Form","social","setup-wizard","recorder"],l0=frappe.utils.debounce(()=>{if(frappe.session.user==="Guest")return;let r=frappe.route_history_queue;!r.length||(frappe.route_history_queue=[],frappe.xcall("frappe.desk.doctype.route_history.route_history.deferred_insert",{routes:r}).catch(()=>{frappe.route_history_queue.concat(r)}))},1e4);frappe.router.on("change",()=>{let r=frappe.get_route();c0(r)&&(frappe.route_history_queue.push({creation:frappe.datetime.now_datetime(),route:frappe.get_route_str()}),l0())});function c0(r){return r[1]?!(r[0]==="List"&&!r[2]||a0.includes(r[0])):!1}frappe.defaults={get_user_default:function(r){let t=frappe.boot.user.defaults,e=t[r];if(!e&&frappe.defaults.is_a_user_permission_key(r)){e=t[frappe.model.scrub(r)];let i=this.get_user_permission_default(r,t);i&&(e=i)}if($.isArray(e)&&(e=e[0]),!!frappe.defaults.in_user_permission(r,e))return e},get_user_permission_default:function(r,t){let e=this.get_user_permissions(),i=null;return e[r]&&(e[r].forEach(n=>{t[r]==n.doc&&(i=n.doc)}),e[r].forEach(n=>{n.is_default&&(i=n.doc)})),i},get_user_defaults:function(r){var t=frappe.boot.user.defaults,e=t[r];return frappe.defaults.is_a_user_permission_key(r)&&(e&&$.isArray(e)&&e.length===1?e=e[0]:e=t[r]||t[frappe.model.scrub(r)]),$.isArray(e)||(e=[e]),e.filter(i=>{if(frappe.defaults.in_user_permission(r,i))return i}),e},get_global_default:function(r){var t=frappe.sys_defaults[r];return $.isArray(t)&&(t=t[0]),t},get_global_defaults:function(r){var t=frappe.sys_defaults[r];return $.isArray(t)||(t=[t]),t},set_user_default_local:function(r,t){frappe.boot.user.defaults[r]=t},get_default:function(r){var t=frappe.boot.user.defaults,e=t[r];if(frappe.defaults.is_a_user_permission_key(r)&&(e&&$.isArray(e)&&e.length===1?e=e[0]:e=t[frappe.model.scrub(r)]),!!frappe.defaults.in_user_permission(r,e)&&e)try{return JSON.parse(e)}catch(i){return e}},is_a_user_permission_key:function(r){return r.indexOf(":")===-1&&r!==frappe.model.scrub(r)},in_user_permission:function(r,t){let e=this.get_user_permissions()[frappe.model.unscrub(r)];return e&&e.length?e.some(i=>i.doc===t):!0},get_user_permissions:function(){return this._user_permissions||{}},update_user_permissions:function(){let r="frappe.core.doctype.user_permission.user_permission.get_user_permissions";frappe.call(r).then(t=>{t.message&&(this._user_permissions=Object.assign({},t.message))})},load_user_permission_from_boot:function(){frappe.boot.user.user_permissions?this._user_permissions=Object.assign({},frappe.boot.user.user_permissions):frappe.defaults.update_user_permissions()}};frappe.RoleEditor=class{constructor(r,t,e){this.frm=t,this.wrapper=r,this.disable=e;let i=this.frm.doc.roles?this.frm.doc.roles.map(o=>o.role):[];this.multicheck=frappe.ui.form.make_control({parent:r,df:{fieldname:"roles",fieldtype:"MultiCheck",select_all:!0,columns:"15rem",get_data:()=>frappe.xcall("frappe.core.doctype.user.user.get_all_roles").then(o=>o.map(s=>({label:__(s),value:s,checked:i.includes(s)}))),on_change:()=>{this.set_roles_in_table(),this.frm.dirty()}},render_input:!0});let n=this.multicheck.make_checkboxes;this.multicheck.make_checkboxes=()=>{n.call(this.multicheck),this.multicheck.$wrapper.find(".label-area").click(o=>{let s=$(o.target).data("unit");s&&this.show_permissions(s),o.preventDefault()})}}set_enable_disable(){$(this.wrapper).find('input[type="checkbox"]').attr("disabled",!!this.disable)}show_permissions(r){return this.perm_dialog||this.make_perm_dialog(),$(this.perm_dialog.body).empty(),frappe.xcall("frappe.core.doctype.user.user.get_perm_info",{role:r}).then(t=>{let e=$(this.perm_dialog.body);t.length?(e.append(`
						<table class="user-perm">
							<thead>
								<tr>
									<th> ${__("Document Type")} </th>
									<th> ${__("Level")} </th>
									${frappe.perm.rights.map(i=>`<th> ${__(frappe.unscrub(i))}</th>`).join("")}
								</tr>
							</thead>
							<tbody></tbody>
						</table>
					`),t.forEach(i=>{e.find("tbody").append(`
							<tr>
								<td>${__(i.parent)}</td>
								<td>${i.permlevel}</td>
								${frappe.perm.rights.map(n=>`<td class="text-muted bold">${i[n]?frappe.utils.icon("check","xs"):"-"}</td>`).join("")}
							</tr>
						`)})):e.append(`<div class="text-muted text-center padding">
						${__("{0} role does not have permission on any doctype",[__(r)])}
					</div>`),this.perm_dialog.set_title(__(r)),this.perm_dialog.show()})}make_perm_dialog(){this.perm_dialog=new frappe.ui.Dialog({title:__("Role Permissions")}),this.perm_dialog.$wrapper.find(".modal-dialog").css("width","auto").css("max-width","1200px"),this.perm_dialog.$wrapper.find(".modal-body").css("overflow","overlay")}show(){this.reset(),this.set_enable_disable()}reset(){let r=(this.frm.doc.roles||[]).map(t=>t.role);this.multicheck.selected_options=r,this.multicheck.refresh_input()}set_roles_in_table(){let r=this.frm.doc.roles||[],t=this.multicheck.get_checked_options();r.map(e=>{t.includes(e.role)||frappe.model.clear_doc(e.doctype,e.name)}),t.map(e=>{if(!r.find(i=>i.role===e)){let i=frappe.model.add_child(this.frm.doc,"Has Role","roles");i.role=e}})}get_roles(){return{checked_roles:this.multicheck.get_checked_options(),unchecked_roles:this.multicheck.get_unchecked_options()}}};frappe.ModuleEditor=class{constructor(t,e){this.frm=t,this.wrapper=e;let i=this.frm.doc.block_modules.map(n=>n.module);this.multicheck=frappe.ui.form.make_control({parent:e,df:{fieldname:"block_modules",fieldtype:"MultiCheck",select_all:!0,columns:"15rem",get_data:()=>this.frm.doc.__onload.all_modules.map(n=>({label:__(n),value:n,checked:!i.includes(n)})),on_change:()=>{this.set_modules_in_table(),this.frm.dirty()}},render_input:!0})}show(){let t=this.frm.doc.block_modules.map(i=>i.module),e=this.frm.doc.__onload.all_modules;this.multicheck.selected_options=e.filter(i=>!t.includes(i)),this.multicheck.refresh_input()}set_modules_in_table(){let t=this.frm.doc.block_modules||[],e=this.multicheck.get_unchecked_options();t.map(i=>{e.includes(i.module)||frappe.model.clear_doc(i.doctype,i.name)}),e.map(i=>{if(!t.find(n=>n.module===i)){let n=frappe.model.add_child(this.frm.doc,"Block Module","block_modules");n.module=i}})}};frappe.template={compiled:{},debug:{}};frappe.template.compile=function(r,t){var e=t||r;if(!frappe.template.compiled[e]){let o=function(s,a,l,u,d){var p=frappe.utils.get_random(3),g=frappe.utils.get_random(3);return"{% for (var "+p+"=0, "+g+"="+l+".length; "+p+"<"+g+"; "+p+"++) { var "+a+" = "+l+"["+p+"]; "+a+"._index = "+p+"; %}"};var n=o;r.indexOf("'")!==-1&&r.replace(/'/g,"\\'"),r=r.replace(/{{/g,"{%=").replace(/}}/g,"%}"),r=r.replace(/{%\s?if\s?\s?not\s?([^\(][^%{]+)\s?%}/g,"{% if (! $1) { %}"),r=r.replace(/{%\s?if\s?([^\(][^%{]+)\s?%}/g,"{% if ($1) { %}"),r=r.replace(/{%\s?for\s([a-z._]+)\sin\s([a-z._]+)\s?%}/g,o),r=r.replace(/{%\s?endif\s?%}/g,"{% }; %}"),r=r.replace(/{%\s?else\s?%}/g,"{% } else { %}"),r=r.replace(/{%\s?endfor\s?%}/g,"{% }; %}");var i=`var _p=[],print=function(){_p.push.apply(_p,arguments)};with(obj){
_p.push('`+r.replace(/[\r\t\n]/g," ").split("{%").join("	").replace(/((^|%})[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%}/g,"',$1,'").split("	").join(`');
`).split("%}").join(`
_p.push('`).split("\r").join("\\'")+"');}return _p.join('');";frappe.template.debug[t]=i;try{frappe.template.compiled[e]=new Function("obj",i)}catch(s){console.log("Error in Template:"),console.log(i),s.lineNumber&&(console.log("Error in Line "+s.lineNumber+", Col "+s.columnNumber+":"),console.log(i.split(`
`)[s.lineNumber-1]))}}return frappe.template.compiled[e]};frappe.render=function(r,t,e){return frappe.template.compile(r,e)(t)};frappe.render_template=function(r,t){let e;return r.indexOf(" ")!==-1?e=r:e=frappe.templates[r],t===void 0&&(t={}),e||frappe.throw(`Template <b>${r}</b> not found.`),frappe.render(e,t,r)};frappe.render_grid=function(r){r.grid&&(r.columns=r.grid.getColumns(),r.data=r.grid.getData().getItems()),r.print_settings&&r.print_settings.orientation&&r.print_settings.orientation.toLowerCase()==="landscape"&&(r.landscape=!0),r.landscape==null&&(r.columns&&r.columns.length>10?r.landscape=!0:r.landscape=!1),r.content||(r.content=frappe.render_template(r.template||"print_grid",r)),r.base_url=frappe.urllib.get_base_url(),r.print_css=frappe.boot.print_css,r.lang=r.lang||frappe.boot.lang,r.layout_direction=r.layout_direction||frappe.utils.is_rtl()?"rtl":"ltr";var t=frappe.render_template("print_template",r),e=window.open();e||frappe.msgprint(__("Please enable pop-ups in your browser")),e.document.write(t),e.document.close()},frappe.render_tree=function(r){r.base_url=frappe.urllib.get_base_url(),r.landscape=!1,r.print_css=frappe.boot.print_css,r.print_format_css_path=frappe.assets.bundled_asset("print_format.bundle.css");var t=frappe.render_template("print_tree",r),e=window.open();e||frappe.msgprint(__("Please enable pop-ups in your browser")),e.document.write(t),e.document.close()};frappe.render_pdf=function(r,t={}){var e=new FormData;e.append("html",r),t.orientation&&e.append("orientation",t.orientation);var i=new Blob([],{type:"text/xml"});e.append("blob",i);var n=new XMLHttpRequest;n.open("POST","/api/method/frappe.utils.print_format.report_to_pdf"),n.setRequestHeader("X-Frappe-CSRF-Token",frappe.csrf_token),n.responseType="arraybuffer",n.onload=function(o){if(this.status===200){var s=new Blob([o.currentTarget.response],{type:"application/pdf"}),a=URL.createObjectURL(s);let l=document.createElement("a");document.body.appendChild(l),l.style="display: none",l.href=a,l.download=t.report_name||"report.pdf",l.click(),window.URL.revokeObjectURL(a)}},n.send(e)};frappe.templates.page=`<div class="page-head flex">
	<div class="container">
		<div class="row flex align-center page-head-content justify-between">
			<div class="col-md-4 col-sm-6 col-xs-7 page-title">
				<!-- <div class="title-image hide hidden-md hidden-lg"></div> -->
				<!-- title -->
				<span class="sidebar-toggle-btn">
					<svg class="es-icon icon-md sidebar-toggle-placeholder">
						<use href="#es-line-align-justify"></use>
					</svg>
					<span class="sidebar-toggle-icon">
						<svg class="es-icon icon-md">
							<use href="#es-line-sidebar-collapse">
							</use>
						</svg>
					</span>
				</span>
				<div class="flex fill-width title-area">
					<div>
						<div class="flex">
							<h3 class="ellipsis title-text"></h3>
							<span class="indicator-pill whitespace-nowrap"></span>
						</div>
						<div class="ellipsis sub-heading hide text-muted"></div>
					</div>
					<button class="btn btn-default more-button hide">
						<svg class="icon icon-sm">
							<use href="#icon-dot-horizontal">
							</use>
						</svg>
					</button>
				</div>
			</div>
			<div class="flex col page-actions justify-content-end">
				<!-- buttons -->
				<div class="custom-actions hide hidden-xs hidden-md"></div>
				<div class="standard-actions flex">
					<span class="page-icon-group hide hidden-xs hidden-sm"></span>
					<div class="menu-btn-group hide">
						<button type="button" class="btn btn-default icon-btn" data-toggle="dropdown" aria-expanded="false">
							<span>
								<span class="menu-btn-group-label">
									<svg class="icon icon-sm">
										<use href="#icon-dot-horizontal">
										</use>
									</svg>
								</span>
							</span>
						</button>
						<ul class="dropdown-menu dropdown-menu-right" role="menu"></ul>
					</div>
					<button class="btn btn-secondary btn-default btn-sm hide"></button>
					<div class="actions-btn-group hide">
						<button type="button" class="btn btn-primary btn-sm" data-toggle="dropdown" aria-expanded="false">
							<span>
								<span class="hidden-xs actions-btn-group-label">{%= __("Actions") %}</span>
								<svg class="icon icon-xs">
									<use href="#icon-select">
									</use>
								</svg>
							</span>
						</button>
						<ul class="dropdown-menu dropdown-menu-right" role="menu">
						</ul>
					</div>
					<button class="btn btn-primary btn-sm hide primary-action"></button>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="container page-body">
	<div class="page-toolbar hide">
		<div class="container">
		</div>
	</div>
	<div class="page-wrapper">
		<div class="page-content">
			<div class="workflow-button-area btn-group pull-right hide"></div>
			<div class="clearfix"></div>
		</div>
	</div>
</div>
`;frappe.ui.make_app_page=function(r){return r.parent.page=new frappe.ui.Page(r),r.parent.page};frappe.ui.pages={};frappe.ui.Page=class{constructor(t){$.extend(this,t),this.set_document_title=!0,this.buttons={},this.fields_dict={},this.views={},this.make(),frappe.ui.pages[frappe.get_route_str()]=this}make(){this.wrapper=$(this.parent),this.add_main_section(),this.setup_scroll_handler(),this.setup_sidebar_toggle()}setup_scroll_handler(){let t=0;$(window).scroll(frappe.utils.throttle(()=>{$(".page-head").toggleClass("drop-shadow",!!document.documentElement.scrollTop);let e=document.documentElement.scrollTop;e>0&&t<=e?$(".page-head").css("top","-15px"):$(".page-head").css("top","var(--navbar-height)"),t=e},500))}get_empty_state(t,e,i){return $(`<div class="page-card-container">
  			<div class="page-card">
  				<div class="page-card-head">
  					<span class="indicator blue">
  						${t}</span>
  				</div>
  				<p>${e}</p>
  				<div>
  					<button class="btn btn-primary btn-sm">${i}</button>
  				</div>
  			</div>
  		</div>`)}load_lib(t){frappe.require(this.required_libs,t)}add_main_section(){$(frappe.render_template("page",{})).appendTo(this.wrapper),this.single_column?this.add_view("main",'<div class="row layout-main">					<div class="col-md-12 layout-main-section-wrapper">						<div class="layout-main-section"></div>						<div class="layout-footer hide"></div>					</div>				</div>'):this.add_view("main",`
				<div class="row layout-main">
					<div class="col-lg-2 layout-side-section"></div>
					<div class="col layout-main-section-wrapper">
						<div class="layout-main-section"></div>
						<div class="layout-footer hide"></div>
					</div>
				</div>
			`),this.setup_page()}setup_page(){this.$title_area=this.wrapper.find(".title-area"),this.$sub_title_area=this.wrapper.find("h6"),this.title&&this.set_title(this.title),this.icon&&this.get_main_icon(this.icon),this.body=this.main=this.wrapper.find(".layout-main-section"),this.container=this.wrapper.find(".page-body"),this.sidebar=this.wrapper.find(".layout-side-section"),this.footer=this.wrapper.find(".layout-footer"),this.indicator=this.wrapper.find(".indicator-pill"),this.page_actions=this.wrapper.find(".page-actions"),this.btn_primary=this.page_actions.find(".primary-action"),this.btn_secondary=this.page_actions.find(".btn-secondary"),this.menu=this.page_actions.find(".menu-btn-group .dropdown-menu"),this.menu_btn_group=this.page_actions.find(".menu-btn-group"),this.actions=this.page_actions.find(".actions-btn-group .dropdown-menu"),this.actions_btn_group=this.page_actions.find(".actions-btn-group"),this.standard_actions=this.page_actions.find(".standard-actions"),this.custom_actions=this.page_actions.find(".custom-actions"),this.page_form=$('<div class="page-form row hide"></div>').prependTo(this.main),this.inner_toolbar=this.custom_actions,this.icon_group=this.page_actions.find(".page-icon-group"),this.make_page&&this.make_page(),this.card_layout&&this.main.addClass("frappe-card");let t=this.menu_btn_group.find("button");t.attr("title",__("Menu")).tooltip({delay:{show:600,hide:100}}),frappe.ui.keys.get_shortcut_group(this.page_actions[0]).add(t,t.find(".menu-btn-group-label"));let e=this.actions_btn_group.find("button");frappe.ui.keys.get_shortcut_group(this.page_actions[0]).add(e,e.find(".actions-btn-group-label"))}setup_sidebar_toggle(){let t=$(".page-head").find(".sidebar-toggle-btn"),e=this.wrapper.find(".layout-side-section");this.disable_sidebar_toggle||!e.length?t.last().remove():(t.attr("title",__("Toggle Sidebar")).tooltip({delay:{show:600,hide:100},trigger:"hover"}),t.click(()=>{frappe.utils.is_xs()||frappe.utils.is_sm()?this.setup_overlay_sidebar():e.toggle(),$(document.body).trigger("toggleSidebar"),this.update_sidebar_icon()}))}setup_overlay_sidebar(){this.sidebar.find(".close-sidebar").remove();let t=this.sidebar.find(".overlay-sidebar").addClass("opened");$('<div class="close-sidebar">').hide().appendTo(this.sidebar).fadeIn();let e=$("html").css("overflow-y","hidden");this.sidebar.find(".close-sidebar").on("click",i=>this.close_sidebar(i)),this.sidebar.on("click","button:not(.dropdown-toggle)",i=>this.close_sidebar(i)),this.close_sidebar=()=>{e.css("overflow-y",""),this.sidebar.find("div.close-sidebar").fadeOut(()=>{t.removeClass("opened").find(".dropdown-toggle").removeClass("text-muted")})}}update_sidebar_icon(){let e=$(".page-head").find(".sidebar-toggle-btn").find(".sidebar-toggle-icon"),i=this.wrapper.find(".layout-side-section"),n=$(i).is(":visible");e.html(frappe.utils.icon(n?"es-line-sidebar-collapse":"es-line-sidebar-expand","md"))}set_indicator(t,e){this.clear_indicator().removeClass("hide").html(`<span>${t}</span>`).addClass(e)}add_action_icon(t,e,i="",n){let o=$(`
			<button class="text-muted btn btn-default ${i} icon-btn">
				${frappe.utils.icon(t)}
			</button>
		`);return n||(t.startsWith("es-")&&(t=t.replace("es-line-",""),t=t.replace("es-solid-",""),t=t.replace("es-small-","")),n=frappe.unscrub(t)),o.appendTo(this.icon_group.removeClass("hide")),o.click(e),o.attr("title",__(n)).tooltip({delay:{show:600,hide:100},trigger:"hover"}),o}clear_indicator(){return this.indicator.removeClass().addClass("indicator-pill no-indicator-dot whitespace-nowrap hide")}get_icon_label(t,e){let i=t,n="xs";return typeof t=="object"&&(i=t.icon,n=t.size||"xs"),`${t?frappe.utils.icon(i,n):""} <span class="hidden-xs"> ${__(e)} </span>`}set_action(t,e){let i=this;e.icon&&(e.iconHTML=this.get_icon_label(e.icon,e.label)),this.clear_action_of(t),t.removeClass("hide").prop("disabled",!1).html(e.iconHTML||e.label).attr("data-label",e.label).on("click",function(){let o=e.click.apply(this,[t]);i.btn_disable_enable(t,o)}),e.working_label&&t.attr("data-working-label",e.working_label);let n=t.find("span");frappe.ui.keys.get_shortcut_group(this).add(t,n.length?n:t)}set_primary_action(t,e,i,n){return this.set_action(this.btn_primary,{label:t,click:e,icon:i,working_label:n}),this.btn_primary}set_secondary_action(t,e,i,n){return this.set_action(this.btn_secondary,{label:t,click:e,icon:i,working_label:n}),this.btn_secondary}clear_action_of(t){t.addClass("hide").unbind("click").removeAttr("data-working-label")}clear_primary_action(){this.clear_action_of(this.btn_primary)}clear_secondary_action(){this.clear_action_of(this.btn_secondary)}clear_actions(){this.clear_primary_action(),this.clear_secondary_action()}clear_custom_actions(){this.custom_actions.addClass("hide").empty()}clear_icons(){this.icon_group.addClass("hide").empty()}add_menu_item(t,e,i,n,o){return this.add_dropdown_item({label:t,click:e,standard:i,parent:this.menu,shortcut:n,show_parent:o})}add_custom_menu_item(t,e,i,n,o,s=null){return this.add_dropdown_item({label:e,click:i,standard:n,parent:t,shortcut:o,icon:s})}clear_menu(){this.clear_btn_group(this.menu)}show_menu(){this.menu_btn_group.removeClass("hide")}hide_menu(){this.menu_btn_group.addClass("hide")}show_icon_group(){this.icon_group.removeClass("hide")}hide_icon_group(){this.icon_group.addClass("hide")}show_actions_menu(){this.actions_btn_group.removeClass("hide")}hide_actions_menu(){this.actions_btn_group.addClass("hide")}add_action_item(t,e,i){return this.add_dropdown_item({label:t,click:e,standard:i,parent:this.actions})}add_actions_menu_item(t,e,i,n){return this.add_dropdown_item({label:t,click:e,standard:i,shortcut:n,parent:this.actions,show_parent:!1})}clear_actions_menu(){this.clear_btn_group(this.actions)}add_dropdown_item({label:t,click:e,standard:i,parent:n,shortcut:o,show_parent:s=!0,icon:a=null}){s&&n.parent().removeClass("hide hidden-xl");let l=this.is_in_group_button_dropdown(n,"li > a.grey-link > span",t);if(l)return l;let u,d="";if(a&&(d=`<span class="menu-item-icon">${frappe.utils.icon(a)}</span>`),o){let p=this.prepare_shortcut_obj(o,e,t);u=$(`
				<li>
					<a class="grey-link dropdown-item" href="#" onClick="return false;">
						${d}
						<span class="menu-item-label">${t}</span>
						<kbd class="pull-right">
							<span>${p.shortcut_label}</span>
						</kbd>
					</a>
				</li>
			`),frappe.ui.keys.add_shortcut(p)}else u=$(`
				<li>
					<a class="grey-link dropdown-item" href="#" onClick="return false;">
						${d}
						<span class="menu-item-label">${t}</span>
					</a>
				</li>
			`);return l=u.find("a").on("click",p=>((p.ctrlKey||p.metaKey)&&(frappe.open_in_new_tab=!0),e())),i?u.appendTo(n):(this.divider=n.find(".dropdown-divider"),this.divider.length||(this.divider=$('<li class="dropdown-divider user-action"></li>').prependTo(n)),u.addClass("user-action").insertBefore(this.divider)),frappe.ui.keys.get_shortcut_group(n.get(0)).add(l,l.find(".menu-item-label")),l}prepare_shortcut_obj(t,e,i){let n;return typeof t=="string"?n={shortcut:t}:n=t,frappe.utils.is_mac()?n.shortcut_label=n.shortcut.replace("Ctrl","\u2318"):n.shortcut_label=n.shortcut,n.shortcut=n.shortcut.toLowerCase(),n.action||(n.action=e),n.description||(n.description=i),n.page=this,n}is_in_group_button_dropdown(t,e,i){if(e||(e="li"),!i||!t)return!1;let n=`${e}[data-label="${encodeURIComponent(i)}"]`,o=$(t).find(n);return(o==null?void 0:o.length)>0&&o}clear_btn_group(t){t.empty(),t.parent().addClass("hide")}add_divider(){return $('<li class="dropdown-divider"></li>').appendTo(this.menu)}get_or_add_inner_group_button(t){var e=this.inner_toolbar.find(`.inner-group-button[data-label="${encodeURIComponent(t)}"]`);return e.length||(e=$(`<div class="inner-group-button" data-label="${encodeURIComponent(t)}">
					<button type="button" class="btn btn-default ellipsis" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						${t}
						${frappe.utils.icon("select","xs")}
					</button>
					<div role="menu" class="dropdown-menu"></div>
				</div>`).appendTo(this.inner_toolbar)),e}get_inner_group_button(t){return this.inner_toolbar.find(`.inner-group-button[data-label="${encodeURIComponent(t)}"]`)}set_inner_btn_group_as_primary(t){this.get_or_add_inner_group_button(t).find("button").removeClass("btn-default").addClass("btn-primary")}btn_disable_enable(t,e){e&&e.then?(t.prop("disabled",!0),e.then(()=>{t.prop("disabled",!1)})):e&&e.always&&(t.prop("disabled",!0),e.always(()=>{t.prop("disabled",!1)}))}add_inner_button(t,e,i,n="default"){var o=this;let s=function(){let d=$(this),p=e();o.btn_disable_enable(d,p)},a=i?`${i} > ${t}`:t;if(this.add_menu_item(a,s,!1,!1,!1).parent().addClass("hidden-xl"),this.menu_btn_group.hasClass("hide")&&this.menu_btn_group.removeClass("hide").addClass("hidden-xl"),i){var u=this.get_or_add_inner_group_button(i);if($(this.inner_toolbar).removeClass("hide"),!this.is_in_group_button_dropdown(u.find(".dropdown-menu"),"a",t))return $(`<a class="dropdown-item" href="#" onclick="return false;" data-label="${encodeURIComponent(t)}">${t}</a>`).on("click",s).appendTo(u.find(".dropdown-menu"))}else{let d=this.inner_toolbar.find(`button[data-label="${encodeURIComponent(t)}"]`);return d.length==0&&(d=$(`<button data-label="${encodeURIComponent(t)}" class="btn btn-${n} ellipsis">
					${__(t)}
				</button>`),d.on("click",s),d.appendTo(this.inner_toolbar.removeClass("hide"))),d}}remove_inner_button(t,e){if(typeof t=="string"&&(t=[t]),t=t.map(n=>__(n)),e){var i=this.get_inner_group_button(__(e));i.length&&i.find(`.dropdown-item[data-label="${encodeURIComponent(t)}"]`).remove(),i.find(".dropdown-item").length===0&&i.remove()}else this.inner_toolbar.find(`button[data-label="${encodeURIComponent(t)}"]`).remove()}change_inner_button_type(t,e,i){let n;if(e){var o=this.get_inner_group_button(__(e));o.length&&(n=o.find(`.dropdown-item[data-label="${encodeURIComponent(t)}"]`))}else n=this.inner_toolbar.find(`button[data-label="${encodeURIComponent(t)}"]`);n&&n.removeClass().addClass(`btn btn-${i} ellipsis`)}add_inner_message(t){let e=$(`<span class='inner-page-message text-muted small'>${t}</div>`);return this.inner_toolbar.find(".inner-page-message").remove(),this.inner_toolbar.removeClass("hide").prepend(e),e}clear_inner_toolbar(){this.inner_toolbar.empty().addClass("hide")}add_sidebar_item(t,e,i,n){var o=this.sidebar.find(".sidebar-menu.standard-actions"),s=$("<li>"),a=$("<a>").html(t).on("click",e).appendTo(s);return i?s.insertAfter(o.find(i)):n?s.prependTo(o):s.appendTo(o),a}clear_user_actions(){this.menu.find(".user-action").remove()}get_title_area(){return this.$title_area}set_title(t,e=null,i=!0,n=""){t||(t=""),i&&(t=strip_html(t)),this.title=t,frappe.utils.set_title(n||t),e&&(t=`${frappe.utils.icon(e)} ${t}`);let o=this.$title_area.find(".title-text");o.html(t),o.attr("title",this.title)}set_title_sub(t){this.$sub_title_area.html(t).toggleClass("hide",!t)}get_main_icon(t){return this.$title_area.find(".title-icon").html('<i class="'+t+' fa-fw"></i> ').toggle(!0)}add_help_button(t){}add_button(t,e,i){i||(i={});let n=$(`<button
			class="btn ${i.btn_class||"btn-default"} ${i.btn_size||"btn-sm"} ellipsis">
				${i.icon?frappe.utils.icon(i.icon):""}
				${t}
		</button>`);return this.add_menu_item(t,e,!1).parent().addClass("hidden-xl"),n.appendTo(this.custom_actions),n.on("click",e),this.custom_actions.removeClass("hide"),n}add_custom_button_group(t,e,i){let n=`<span class="hidden-xs">
			<span class="custom-btn-group-label">${__(t)}</span>
			${frappe.utils.icon("select","xs")}
		</span>`;e&&(n=`<span class="hidden-xs">
				${frappe.utils.icon(e)}
				<span class="custom-btn-group-label">${__(t)}</span>
				${frappe.utils.icon("select","xs")}
			</span>
			<span class="visible-xs">
				${frappe.utils.icon(e)}
			</span>`);let o=$(`
			<div class="custom-btn-group">
				<button type="button" class="btn btn-default btn-sm ellipsis" data-toggle="dropdown" aria-expanded="false">
					${n}
				</button>
				<ul class="dropdown-menu" role="menu"></ul>
			</div>
		`);return i||(i=this.custom_actions),i.removeClass("hide").append(o),o.find(".dropdown-menu")}add_dropdown_button(t,e,i,n){frappe.ui.toolbar.add_dropdown_button(t,e,i,n)}add_label(t){return this.show_form(),$("<label class='col-md-1 page-only-label'>"+t+" </label>").appendTo(this.page_form)}add_select(t,e){var i=this.add_field({label:t,fieldtype:"Select"});return i.$wrapper.find("select").empty().add_options(e)}add_data(t){var e=this.add_field({label:t,fieldtype:"Data"});return e.$wrapper.find("input").attr("placeholder",t)}add_date(t,e){var i=this.add_field({label:t,fieldtype:"Date",default:e});return i.$wrapper.find("input").attr("placeholder",t)}add_check(t){return $("<div class='checkbox'><label><input type='checkbox'>"+t+"</label></div>").appendTo(this.page_form).find("input")}add_break(){this.page_form.append('<div class="clearfix invisible-xs"></div>')}add_field(t,e){this.show_form(),t.placeholder||(t.placeholder=t.label),t.input_class="input-xs";var i=frappe.ui.form.make_control({df:t,parent:e||this.page_form,only_input:t.fieldtype!="Check"});if(i.refresh(),$(i.wrapper).addClass("col-md-2").attr("title",__(t.label)).tooltip({delay:{show:600,hide:100},trigger:"hover"}),t.fieldtype!="HTML")return i.$input||i.make_input(),i.$input.attr("placeholder",__(t.label)),t.fieldtype==="Check"&&$(i.wrapper).find(":first-child").removeClass("col-md-offset-4 col-md-8"),t.fieldtype=="Button"&&($(i.wrapper).find(".page-control-label").html("&nbsp;"),i.$input.addClass("btn-xs").css({width:"100%","margin-top":"-1px"})),t.default&&i.set_input(t.default),this.fields_dict[t.fieldname||t.label]=i,i}clear_fields(){this.page_form.empty()}show_form(){this.page_form.removeClass("hide")}hide_form(){this.page_form.addClass("hide")}get_form_values(){var t={};for(let e in this.fields_dict){let i=this.fields_dict[e];t[e]=i.get_value()}return t}add_view(t,e){let i=e;return typeof e=="string"&&(i=$(e)),this.views[t]=i.appendTo($(this.wrapper).find(".page-content")),this.current_view?this.views[t].toggle(!1):this.current_view=this.views[t],this.views[t]}set_view(t){this.current_view_name!==t&&(this.current_view&&this.current_view.toggle(!1),this.current_view=this.views[t],this.previous_view_name=this.current_view_name,this.current_view_name=t,this.views[t].toggle(!0),this.wrapper.trigger("view-change"))}};frappe.provide("frappe.ui");frappe.ui.Slide=class{constructor(t=null){$.extend(this,t),this.setup()}setup(){this.$wrapper=$('<div class="slide-wrapper hidden"></div>').attr({"data-slide-id":this.id,"data-slide-name":this.name}).appendTo(this.parent)}make(){this.before_load&&this.before_load(this),this.$body=$(`<div class="slide-body">
			<div class="content text-center">
				<h1 class="title slide-title">${__(this.title)}</h1>
			</div>
			<div class="form-wrapper">
				<div class="form"></div>
				<div class="add-more text-center" style="margin-top: 5px;">
					<button class="form-more-btn hide btn btn-default btn-xs">
						<span>Add More</span>
					</button>
				</div>
			</div>
		</div>`).appendTo(this.$wrapper),this.$content=this.$body.find(".content"),this.$form=this.$body.find(".form"),this.$primary_btn=this.slides_footer.find(".primary"),this.$form_wrapper=this.$body.find(".form-wrapper"),this.image_src&&this.$content.append($(`<img src="${this.image_src}" style="margin: 20px;">`)),this.help&&this.$content.append($(`<p class="slide-help">${__(this.help)}</p>`)),this.reqd_fields=[],this.refresh(),this.made=!0}refresh(){this.render_parent_dots(),this.done?this.setup_done_state():this.setup_form()}setup_form(){this.form=new frappe.ui.FieldGroup({fields:this.get_atomic_fields(),body:this.$form[0],no_submit_on_enter:!0}),this.form.make(),this.add_more&&this.bind_more_button(),this.set_reqd_fields(),this.onload&&this.onload(this),this.set_reqd_fields()}setup_done_state(){}get_atomic_fields(){var t=JSON.parse(JSON.stringify(this.fields));return this.add_more&&(this.count=1,t=t.map((e,i)=>(e.fieldname&&(e.fieldname+="_1"),i===1&&this.mandatory_entry&&(e.reqd=1),e.static||e.label&&e.label,e))),t}set_reqd_fields(){var t=this.form.fields_dict;this.reqd_fields=[],Object.keys(t).map(e=>{t[e].df.reqd&&this.reqd_fields.push(t[e])})}set_values(t){return this.values=this.form.get_values(t,!0),!(this.values===null||this.validate&&!this.validate())}bind_more_button(){this.$more=this.$body.find(".form-more-btn"),this.$more.removeClass("hide").on("click",()=>{this.count++;var t=JSON.parse(JSON.stringify(this.fields));this.form.add_fields(t.map(e=>(e.fieldname&&(e.fieldname+="_"+this.count),e.static||e.label&&e.label,e.reqd=0,e))),this.count===this.max_count&&this.$more.addClass("hide")})}resetup_primary_button(){this.unbind_primary_action(),this.bind_fields_to_action_btn(),this.reset_action_button_state(),this.bind_primary_action()}bind_fields_to_action_btn(){var t=this;this.reqd_fields.map(e=>{e.$wrapper.on("change input click",()=>{t.reset_action_button_state()}),e.$wrapper.on("keydown","input",i=>{i.key=="Enter"&&t.reset_action_button_state()})})}reset_action_button_state(){var t=this.reqd_fields.filter(e=>!e.get_value());t.length?this.slides_footer.find(".action").addClass("disabled"):this.slides_footer.find(".action").removeClass("disabled")}unbind_primary_action(){this.slides_footer.find(".primary").off()}bind_primary_action(){this.slides_footer.find(".primary").on("click.primary_action",()=>{this.primary_action()})}is_last_slide(){return this.id===this.parent[0].children.length-1}before_show(){}show_slide(){this.$wrapper.removeClass("hidden"),this.before_show(),this.resetup_primary_button(),this.done?this.$primary_btn.hide():(this.$body.find(".form-control").first().focus(),this.$primary_btn.show())}hide_slide(){this.$wrapper.addClass("hidden")}get_input(t){return this.form.get_input(t)}get_field(t){return this.form.get_field(t)}get_value(t){return this.form.get_value(t)}destroy(){this.$body.remove()}primary_action(){}};frappe.ui.Slides=class{constructor({parent:t=null,slides:e=[],slide_class:i=null,unidirectional:n=0,done_state:o=0,before_load:s=null,on_update:a=null}){this.parent=t,this.slides=e,this.slide_class=i,this.unidirectional=n,this.done_state=o,this.before_load=s,this.on_update=a,this.page_name="setup-wizard",this.slide_dict={},this.made_slide_ids=[],this.values={},this.make()}make(){this.$slide_progress=$("<div>").addClass("slides-progress text-center text-extra-muted").appendTo(this.parent),this.container=$("<div>").addClass("slides-wrapper").attr({tabindex:-1}).appendTo(this.parent),this.$body=$("<div>").addClass("slide-container").appendTo(this.container),this.$footer=$("<div>").addClass("slide-footer").appendTo(this.container),this.render_progress_dots(),this.make_prev_next_complete_buttons(),this.before_load&&this.before_load(this.$footer),this.setup(),this.show_slide(0)}setup(){this.slides.map((t,e)=>{this.slide_dict[e]?this.made_slide_ids.includes(e+"")&&(this.slide_dict[e].done=!1,this.slide_dict[e].destroy(),this.slide_dict[e].make()):(this.slide_dict[e]=new this.slide_class($.extend(this.slides[e],{parent:this.$body,slides_footer:this.$footer,render_parent_dots:this.render_progress_dots.bind(this),id:e})),this.unidirectional||this.slide_dict[e].make())})}refresh(t){this.render_progress_dots(),this.make_prev_next_complete_buttons(),this.show_hide_prev_next(t),this.$body.find(".form-control").first().focus()}render_progress_dots(){this.$slide_progress.empty(),!(this.slides.length<=1)&&(this.slides.map((t,e)=>{let i=$(`<div class="slide-step">
				<div class="slide-step-indicator"></div>
				<div class="slide-step-complete">${frappe.utils.icon("tick","xs")}</div>
			</div>`).attr({"data-step-id":e});this.done_state&&(this.slide_dict[e]&&this.slide_dict[e].done||t.done)&&i.addClass("step-success"),this.unidirectional&&e===this.current_id&&i.addClass("active"),this.$slide_progress.append(i)}),this.completed=0,this.slides.map((t,e)=>{this.slide_dict[e]?this.slide_dict[e].done&&this.completed++:t.done&&this.completed++}),this.on_update&&this.on_update(this.completed,this.slides.length),this.unidirectional||this.bind_progress_dots())}make_prev_next_complete_buttons(){this.$footer.empty(),$(`<div class="row">
			<div class="col-sm-4 text-left prev-div">
				<button class="prev-btn btn btn-secondary btn-sm" tabindex="0">${__("Previous",null,"Go to previous slide")}</button>
			</div>
			<div class="col-sm-8 text-right next-div">
				<button class="complete-btn btn btn-sm primary">${__("Complete Setup",null,"Finish the setup wizard")}</button>
				<button class="next-btn btn btn-default btn-sm" tabindex="0">${__("Next",null,"Go to next slide")}</button>
			</div>
		</div>`).appendTo(this.$footer),this.$prev_btn=this.$footer.find(".prev-btn").attr("tabIndex",0).on("click",()=>this.show_slide(this.current_id-1)),this.$next_btn=this.$footer.find(".next-btn").attr("tabIndex",0).on("click",()=>{this.done_state&&(this.slide&&(this.slide.done=!0),this.current_slide&&(this.current_slide.done=!0)),(!this.unidirectional||this.unidirectional&&this.current_slide.set_values())&&this.show_slide(this.current_id+1)}),this.$complete_btn=this.$footer.find(".complete-btn").attr("tabIndex",0)}bind_progress_dots(){var t=this;this.$slide_progress.find(".fa-circle").addClass("link").on("click",function(){let e=$(this).attr("data-step-id");t.show_slide(e)})}before_show_slide(){return!0}show_slide(t){t=cint(t),!(!this.before_show_slide()||this.current_slide&&this.current_id===t)&&(this.update_values(),this.current_slide&&this.current_slide.hide_slide(),this.unidirectional&&!this.slide_dict[t].made&&this.slide_dict[t].make(),this.current_id=t,this.current_slide=this.slide_dict[t],this.current_slide.show_slide(),this.refresh(t))}destroy_slide(t){this.slide_dict[t]&&this.slide_dict[t].destroy(),this.slide_dict[t]=null}on_update(t,e){}show_hide_prev_next(t){t===0?this.$prev_btn.hide():this.$prev_btn.show(),t+1===this.slides.length?this.$next_btn.hide():this.$next_btn.show()}get_values(){var t={};return $.each(this.slide_dict,function(e,i){i.values&&$.extend(t,i.values)}),t}update_values(){this.values=$.extend(this.values,this.get_values())}};frappe.find={page_primary_action:()=>$(".page-actions:visible .btn-primary"),field:(r,t)=>new Promise(e=>{let i=$(`[data-fieldname="${r}"] :input`);t?(i.val(t).trigger("change"),frappe.after_ajax(()=>{e(i)})):e(i)})};frappe.ui.IconBar=class{constructor(t,e){this.parent=t,this.buttons={},this.make(e)}make(t){this.$wrapper=$('<div class="iconbar-wrapper hide"></div>').appendTo(this.parent);for(var e=0;e<t;e++)this.get_group(e+1)}get_group(t){var e=this.$wrapper.find(".iconbar-"+t+" ul");return e.length||(e=$('<div class="iconbar iconbar-'+t+' hide"><ul></ul></div>').appendTo(this.$wrapper).find("ul")),e}add_btn(t,e,i,n){var o=this.get_group(t),s=$('<li><i class="'+e+'"></i></li>').appendTo(o).on("click",function(){return n.apply(this),!1});return s.find("i").attr("title",i).tooltip({delay:{show:600,hide:100},trigger:"hover"}),this.$wrapper.find(".iconbar-"+t).removeClass("hide"),this.show(),s}hide(t){t?(this.$wrapper.find(".iconbar-"+t).addClass("hide"),this.check_if_all_hidden()):this.$wrapper.addClass("hide").trigger("hidden")}show(t){t?(this.$wrapper.find(".iconbar-"+t).removeClass("hide"),this.show()):this.$wrapper.hasClass("hide")&&this.$wrapper.removeClass("hide").trigger("shown")}clear(t){var e=this;this.$wrapper.find(".iconbar-"+t).addClass("hide").find("ul").empty(),this.check_if_all_hidden()}check_if_all_hidden(){this.$wrapper.find(".iconbar:visible").length||this.hide()}};frappe.ui.form.LinkSelector=class{constructor(t){$.extend(this,t);var e=this;this.doctype!="[Select]"?frappe.model.with_doctype(this.doctype,function(i){e.make()}):this.make()}make(){var t=this;this.start=0,this.page_length=10,this.dialog=new frappe.ui.Dialog({title:__("Select {0}",[this.doctype=="[Select]"?__("value"):__(this.doctype)]),fields:[{fieldtype:"Data",fieldname:"txt",label:__("Beginning with"),description:__("You can use wildcard %")},{fieldtype:"HTML",fieldname:"results"},{fieldtype:"Button",fieldname:"more",label:__("More"),click:()=>{t.start+=t.page_length,t.search()}}],primary_action_label:__("Search"),primary_action:function(){t.start=0,t.search()}}),this.txt&&this.dialog.fields_dict.txt.set_input(this.txt),this.dialog.get_input("txt").on("keypress",function(e){e.which===13&&(t.start=0,t.search())}),this.dialog.show(),this.search()}search(){var t={txt:this.dialog.fields_dict.txt.get_value(),searchfield:"name",start:this.start,page_length:this.page_length},e=this;this.target.set_custom_query&&this.target.set_custom_query(t),this.target.is_grid&&this.target.fieldinfo[this.fieldname]&&this.target.fieldinfo[this.fieldname].get_query&&$.extend(t,this.target.fieldinfo[this.fieldname].get_query(cur_frm.doc)),frappe.link_search(this.doctype,t,function(i){var n=e.dialog.fields_dict.results.$wrapper;if(t.start===0&&n.empty(),i.length)for(let a of i){var o=$(repl('<div class="row link-select-row">						<div class="col-xs-4">							<b><a href="#">%(name)s</a></b></div>						<div class="col-xs-8">							<span class="text-muted">%(values)s</span></div>						</div>',{name:a[0],values:a.splice(1).join(", ")})).appendTo(n);o.find("a").attr("data-value",a[0]).click(function(){var l=$(this).attr("data-value");return e.target.is_grid?e.set_in_grid(l).then(()=>e.search()):(e.target.doctype?e.target.parse_validate_and_set_in_model(l):(e.target.set_input(l),e.target.$input.trigger("change")),e.dialog.hide()),!1})}else $('<p><br><span class="text-muted">'+__("No Results")+"</span>"+(frappe.model.can_create(e.doctype)?'<br><br><a class="new-doc btn btn-default btn-sm">'+__("Create a new {0}",[__(e.doctype)])+"</a>":"")+"</p>").appendTo(n).find(".new-doc").click(function(){frappe.new_doc(e.doctype)});var s=e.dialog.fields_dict.more.$wrapper;i.length<e.page_length?s.hide():s.show()},this.dialog.get_primary_btn())}set_in_grid(t){return new Promise(e=>{if(this.qty_fieldname)frappe.prompt({fieldname:"qty",fieldtype:"Float",label:"Qty",default:1,reqd:1},i=>{if(!(this.target.frm.doc[this.target.df.fieldname]||[]).some(o=>{if(o[this.fieldname]===t)return frappe.model.set_value(o.doctype,o.name,this.qty_fieldname,i.qty).then(()=>{frappe.show_alert(__("Added {0} ({1})",[t,o[this.qty_fieldname]])),e()}),!0})){let o=null;frappe.run_serially([()=>o=this.target.add_new_row(),()=>frappe.timeout(.1),()=>{let s={};return s[this.fieldname]=t,s[this.qty_fieldname]=i.qty,frappe.model.set_value(o.doctype,o.name,s)},()=>frappe.show_alert(__("Added {0} ({1})",[t,i.qty])),()=>e()])}},__("Set Quantity"),__("Set Quantity"));else if(this.dynamic_link_field){let i=this.target.add_new_row();frappe.model.set_value(i.doctype,i.name,this.dynamic_link_field,this.dynamic_link_reference),frappe.model.set_value(i.doctype,i.name,this.fieldname,t).then(()=>{frappe.show_alert(__("{0} {1} added",[this.dynamic_link_reference,t])),e()})}else{let i=this.target.add_new_row();frappe.model.set_value(i.doctype,i.name,this.fieldname,t).then(()=>{frappe.show_alert(__("{0} added",[t])),e()})}})}};frappe.link_search=function(r,t,e,i){t||(t={txt:""}),t.doctype=r,t.searchfield||(t.searchfield="name"),frappe.call({method:"frappe.desk.search.search_widget",type:"GET",args:t,callback:function(n){e&&e(n.message)},btn:i})};frappe.ui.form.MultiSelectDialog=class{constructor(t){Object.assign(this,t),this.for_select=this.doctype=="[Select]",this.for_select?this.init():frappe.model.with_doctype(this.doctype,()=>this.init())}init(){this.page_length=20,this.child_page_length=20,this.fields=this.get_fields(),this.make()}get_fields(){let t=this.get_primary_filters(),e=this.get_result_fields(),i=this.get_data_fields(),n=this.get_child_selection_fields();return[...t,...e,...i,...n]}get_result_fields(){let t=()=>{this.page_length+=20,this.get_results()};return[{fieldtype:"HTML",fieldname:"results_area"},{fieldtype:"Button",fieldname:"more_btn",label:__("More"),click:t.bind(this)}]}get_data_fields(){return this.data_fields&&this.data_fields.length?[{fieldtype:"Section Break"},...this.data_fields]:[]}get_child_selection_fields(){let t=[];if(this.allow_child_item_selection&&this.child_fieldname){let e=()=>{this.child_page_length+=20,this.show_child_results()};t.push({fieldtype:"HTML",fieldname:"child_selection_area"}),t.push({fieldtype:"Button",fieldname:"more_child_btn",hidden:1,label:__("More"),click:e.bind(this)})}return t}make(){let t=__(this.doctype).plural(),e=__("Select {0}",[this.for_select?__("value"):t]);this.dialog=new frappe.ui.Dialog({title:e,fields:this.fields,size:this.size,primary_action_label:this.primary_action_label||__("Get Items"),secondary_action_label:__("Make {0}",[__(this.doctype)]),primary_action:()=>{let i=this.get_custom_filters(),n=cur_dialog.get_values(),o=this.get_selected_child_names(),s=[...this.get_checked_values(),...this.get_parent_name_of_selected_children()];this.action(s,mt(Ue(Ue(Ue({},this.args),n),i),{filtered_children:o}))},secondary_action:this.make_new_document.bind(this)}),this.add_filters_group&&this.make_filter_area(),this.args={},this.setup_results(),this.bind_events(),this.get_results(),this.dialog.show()}make_new_document(t){t&&(this.set_route_options(),frappe.new_doc(this.doctype,!0))}set_route_options(){if(frappe.route_options={},Array.isArray(this.setters))for(let t of this.setters)frappe.route_options[t.fieldname]=this.dialog.fields_dict[t.fieldname].get_value()||void 0;else Object.keys(this.setters).forEach(t=>{frappe.route_options[t]=this.dialog.fields_dict[t].get_value()||void 0})}setup_results(){this.$parent=$(this.dialog.body),this.$wrapper=this.dialog.fields_dict.results_area.$wrapper.append(`<div class="results my-3"
			style="border: 1px solid #d1d8dd; border-radius: 3px; height: 300px; overflow: auto;"></div>`),this.$results=this.$wrapper.find(".results"),this.$results.append(this.make_list_row())}show_child_results(){this.get_child_result().then(t=>{this.child_results=t.message||[],this.render_child_datatable(),this.$wrapper.addClass("hidden"),this.$child_wrapper.removeClass("hidden"),this.dialog.fields_dict.more_btn.$wrapper.hide()})}is_child_selection_enabled(){var t;return(t=this.dialog.fields_dict.allow_child_item_selection)==null?void 0:t.get_value()}toggle_child_selection(){this.is_child_selection_enabled()?this.show_child_results():(this.child_results=[],this.get_results(),this.$wrapper.removeClass("hidden"),this.$child_wrapper.addClass("hidden"))}render_child_datatable(){this.child_datatable?setTimeout(()=>{this.child_datatable.rowmanager.checkMap=[],this.child_datatable.refresh(this.get_child_datatable_rows()),this.$child_wrapper.find(".dt-scrollable").css("height","300px"),this.$child_wrapper.find(".dt-scrollable").css("overflow-y","scroll")},500):this.setup_child_datatable()}get_child_datatable_columns(){return[this.doctype,...this.child_columns].map(e=>({name:frappe.unscrub(e),editable:!1}))}get_child_datatable_rows(){return this.child_results.length>this.child_page_length?this.dialog.fields_dict.more_child_btn.toggle(!0):this.dialog.fields_dict.more_child_btn.toggle(!1),this.child_results.slice(0,this.child_page_length).map(t=>Object.values(t).slice(1))}setup_child_datatable(){let t=this.get_child_datatable_columns(),e=this.get_child_datatable_rows();this.$child_wrapper=this.dialog.fields_dict.child_selection_area.$wrapper,this.$child_wrapper.addClass("my-3"),this.child_datatable=new frappe.DataTable(this.$child_wrapper.get(0),{columns:t,data:e,layout:"fluid",inlineFilters:!0,serialNoColumn:!1,checkboxColumn:!0,cellHeight:35,noDataMessage:__("No Data"),disableReorderColumn:!0}),this.$child_wrapper.find(".dt-scrollable").css("height","300px")}get_primary_filters(){let t=[],e=new Array(3);return e[0]=[{fieldtype:"Data",label:__("Name"),fieldname:"search_term"}],e[1]=[],e[2]=[],$.isArray(this.setters)?this.setters.forEach((i,n)=>{e[(n+1)%3].push(i)}):Object.keys(this.setters).forEach((i,n)=>{let o=frappe.meta.docfield_map[this.doctype][i];e[(n+1)%3].push({fieldtype:o.fieldtype,label:o.label,fieldname:i,options:o.options,default:this.setters[i]})}),Object.seal&&Object.seal(e),this.allow_child_item_selection&&(this.child_doctype=frappe.meta.get_docfield(this.doctype,this.child_fieldname).options,e[0].push({fieldtype:"Check",label:__("Select {0}",[__(this.child_doctype)]),fieldname:"allow_child_item_selection",onchange:this.toggle_child_selection.bind(this)})),t=[...e[0],{fieldtype:"Column Break"},...e[1],{fieldtype:"Column Break"},...e[2],{fieldtype:"Section Break",fieldname:"primary_filters_sb"}],this.add_filters_group&&t.push({fieldtype:"HTML",fieldname:"filter_area"}),t}make_filter_area(){this.filter_group=new frappe.ui.FilterGroup({parent:this.dialog.get_field("filter_area").$wrapper,doctype:this.doctype,on_change:()=>{this.is_child_selection_enabled()?this.show_child_results():this.get_results()}}),this.filter_group.wrapper.find(".apply-filters").hide()}get_custom_filters(){return this.add_filters_group&&this.filter_group?this.filter_group.get_filters().reduce((t,e)=>Object.assign(t,{[e[1]]:[e[2],e[3]]}),{}):{}}bind_events(){let t=this;this.$results.on("click",".list-item-container",function(e){!$(e.target).is(":checkbox")&&!$(e.target).is("a")&&$(this).find(":checkbox").trigger("click")}),this.$results.on("click",".list-item--head :checkbox",e=>{this.$results.find(".list-item-container .list-row-check").prop("checked",$(e.target).is(":checked"))}),this.$parent.find(".input-with-feedback").on("change",()=>{frappe.flags.auto_scroll=!1,this.is_child_selection_enabled()?this.show_child_results():this.get_results()}),this.$parent.find('[data-fieldtype="Data"]').on("input",()=>{var e=$(this);clearTimeout(e.data("timeout")),e.data("timeout",setTimeout(function(){frappe.flags.auto_scroll=!1,t.is_child_selection_enabled()?t.show_child_results():(t.empty_list(),t.get_results())},300))})}get_parent_name_of_selected_children(){return!this.child_datatable||!this.child_datatable.datamanager.rows.length?[]:this.child_datatable.rowmanager.checkMap.reduce((e,i,n)=>{if(i==1){let o=this.child_results[n].parent;e.includes(o)||e.push(o)}return e},[])}get_selected_child_names(){return!this.child_datatable||!this.child_datatable.datamanager.rows.length?[]:this.child_datatable.rowmanager.checkMap.reduce((e,i,n)=>{if(i==1){let o=this.child_results[n].name;e.push(o)}return e},[])}get_checked_values(){return this.$results.find(".list-item-container").map(function(){if($(this).find(".list-row-check:checkbox:checked").length>0)return $(this).attr("data-item-name")}).get()}get_checked_items(){let t=this.get_checked_values();return this.results.filter(e=>t.includes(e.name))}get_datatable_columns(){return this.get_query&&this.get_query().query&&this.columns?this.columns:Array.isArray(this.setters)?["name",...this.setters.map(t=>t.fieldname)]:["name",...Object.keys(this.setters)]}make_list_row(t={}){var e=this;let i=Object.keys(t).length===0,n="";this.get_datatable_columns().forEach(function(s){n+=`<div class="list-item__content ellipsis">
				${i?`<span class="ellipsis text-muted" title="${__(frappe.model.unscrub(s))}">${__(frappe.model.unscrub(s))}</span>`:s!=="name"?`<span class="ellipsis result-row" title="${__(t[s]||"")}">${__(t[s]||"")}</span>`:`<a href="${"/app/"+frappe.router.slug(e.doctype)+"/"+t[s]||""}" class="list-id ellipsis" title="${__(t[s]||"")}">
							${__(t[s]||"")}</a>`}
			</div>`});let o=$(`<div class="list-item">
			<div class="list-item__content" style="flex: 0 0 10px;">
				<input type="checkbox" class="list-row-check" data-item-name="${t.name}" ${t.checked?"checked":""}>
			</div>
			${n}
		</div>`);return i?o.addClass("list-item--head"):o=$(`<div class="list-item-container" data-item-name="${t.name}"></div>`).append(o),o}render_result_list(t,e=0,i=!0){var n=this,o=n.dialog.fields_dict.more_btn.$wrapper;if(!frappe.flags.auto_scroll&&i&&this.empty_list(),o.hide(),$(".modal-dialog .list-item--head").css("z-index",1),t.length===0)return;e&&o.show();let s=this.get_checked_values();t.filter(a=>!s.includes(a.name)).forEach(a=>{n.$results.append(n.make_list_row(a))}),this.$results.find(".list-item--head").css("z-index",1),frappe.flags.auto_scroll&&this.$results.animate({scrollTop:n.$results.prop("scrollHeight")},500)}empty_list(){let t=this.get_checked_items().map(e=>mt(Ue({},e),{checked:!0}));this.$results.find(".list-item-container").remove(),this.render_result_list(t,0,!1)}get_filters_from_setters(){let t=this,e=(this.get_query?this.get_query().filters:{})||{},i=[];if($.isArray(this.setters))for(let n of this.setters)e[n.fieldname]=t.dialog.fields_dict[n.fieldname].get_value()||void 0,t.args[n.fieldname]=e[n.fieldname],i.push(n.fieldname);else Object.keys(this.setters).forEach(function(n){var o=t.dialog.fields_dict[n].get_value();t.dialog.fields_dict[n].df.fieldtype=="Data"&&o?e[n]=["like","%"+o+"%"]:(e[n]=o||void 0,t.args[n]=e[n],i.push(n))});return[e,i]}get_args_for_search(){let[t,e]=this.get_filters_from_setters(),i=this.get_custom_filters();return Object.assign(t,i),{doctype:this.doctype,txt:this.dialog.fields_dict.search_term.get_value(),filters:t,filter_fields:e,page_length:this.page_length+5,query:this.get_query?this.get_query().query:"",as_dict:1}}async perform_search(t){let e=await frappe.call({type:"GET",method:"frappe.desk.search.search_widget",no_spinner:!0,args:t}),i=e.message.length&&e.message.length>this.page_length?1:0;return[e.message,i]}async get_results(){let t=this.get_args_for_search(),[e,i]=await this.perform_search(t);i&&(e=e.splice(0,this.page_length)),this.results=[],e.length&&e.forEach(n=>{n.checked=0,this.results.push(n)}),this.render_result_list(this.results,i)}async get_filtered_parents_for_child_search(){let t=this.get_args_for_search();t.filter_fields=["name"];let[e,i]=await this.perform_search(t),n=[];return e.length&&(n=e.map(o=>o.name)),n}async add_parent_filters(t){let e=await this.get_filtered_parents_for_child_search();e.length&&t.push(["parent","in",e])}add_custom_child_filters(t){this.add_filters_group&&this.filter_group&&this.filter_group.get_filters().forEach(e=>{e[0]==this.child_doctype&&t.push([e[1],e[2],e[3]])})}async get_child_result(){let t=[["parentfield","=",this.child_fieldname]];return await this.add_parent_filters(t),this.add_custom_child_filters(t),frappe.call({method:"frappe.client.get_list",args:{doctype:this.child_doctype,filters:t,fields:["name","parent",...this.child_columns],parent:this.doctype,limit_page_length:this.child_page_length+5,order_by:"parent"}})}};frappe._.get_data_uri=r=>{let t=r.videoWidth,e=r.videoHeight,i=$("<canvas/>");return i[0].width=t,i[0].height=e,i[0].getContext("2d").drawImage(r,0,0,t,e),i[0].toDataURL("image/png")};function u0(){let r=document.createElement("input");return r.setAttribute("type","file"),r.setAttribute("accept","image/*"),r.setAttribute("multiple",""),r}function d0(r){return new Promise((t,e)=>{let i=new FileReader;i.onload=()=>t(i.result),i.onerror=e,i.readAsDataURL(r)})}frappe.ui.Capture=class{constructor(r={}){this.options=frappe.ui.Capture.OPTIONS,this.set_options(r),this.facing_mode="environment",this.images=[]}set_options(r){return this.options=Ue(Ue({},frappe.ui.Capture.OPTIONS),r),this}show(){this.build_dialog(),cint(frappe.boot.sysdefaults.force_web_capture_mode_for_uploads)?this.show_for_desktop():frappe.is_mobile()?this.show_for_mobile():this.show_for_desktop()}build_dialog(){let r=this;r.dialog=new frappe.ui.Dialog({title:this.options.title,animate:this.options.animate,fields:[{fieldtype:"HTML",fieldname:"capture"},{fieldtype:"HTML",fieldname:"total_count"}],on_hide:()=>{this.stop_media_stream()}}),r.$template=$(frappe.ui.Capture.TEMPLATE);let t=r.dialog.get_field("capture");$(t.wrapper).html(r.$template),r.update_count(),r.dialog.get_close_btn().on("click",()=>{r.hide()})}show_for_mobile(){let r=this;r.input||(r.input=u0()),r.input.onchange=async()=>{for(let t of r.input.files){let e=await d0(t);r.images.push(e)}r.render_preview(),r.dialog.show()},r.input.click()}show_for_desktop(){let r=this;this.render_stream().then(()=>{r.dialog.show()}).catch(t=>{throw r.options.error&&frappe.show_alert(frappe.ui.Capture.ERR_MESSAGE,3),t})}render_stream(){let r=this,t={video:{facingMode:this.facing_mode}};return navigator.mediaDevices.getUserMedia(t).then(e=>{r.stream=e,r.dialog.custom_actions.empty(),r.dialog.get_primary_btn().off("click"),r.setup_take_photo_action(),r.setup_preview_action(),r.setup_toggle_camera(),r.$template.find(".fc-stream-container").show(),r.$template.find(".fc-preview-container").hide(),r.video=r.$template.find("video")[0],r.video.srcObject=r.stream,r.video.load(),r.video.play()})}render_preview(){this.stop_media_stream(),this.$template.find(".fc-stream-container").hide(),this.$template.find(".fc-preview-container").show(),this.dialog.get_primary_btn().off("click");let r="";this.images.forEach((t,e)=>{r+=`
				<div class="mt-1 p-1 rounded col-md-3 col-sm-4 col-xs-4" data-idx="${e}">
					<span class="capture-remove-btn" data-idx="${e}">
						${frappe.utils.icon("close","lg")}
					</span>
					<img class="rounded" src="${t}" data-idx="${e}">
				</div>
			`}),this.$template.find(".fc-preview-container").empty(),$(this.$template.find(".fc-preview-container")).html(`<div class="row">
				${r}
			</div>`),this.setup_capture_action(),this.setup_submit_action(),this.setup_remove_action(),this.update_count(),this.dialog.custom_actions.empty()}setup_take_photo_action(){let r=this;this.dialog.set_primary_action(__("Take Photo"),()=>{let t=frappe._.get_data_uri(r.video);r.images.push(t),r.setup_preview_action(),r.update_count()})}setup_preview_action(){let r=this;!this.images.length||(this.dialog.set_secondary_action_label(__("Preview")),this.dialog.set_secondary_action(()=>{r.dialog.get_primary_btn().off("click"),r.render_preview()}))}setup_remove_action(){let r=this;Array.from(this.$template[0].getElementsByClassName("capture-remove-btn")).forEach(e=>{e.onclick=()=>{let i=parseInt(e.getAttribute("data-idx"));r.images.splice(i,1),r.render_preview()}})}update_count(){let r=this.dialog.get_field("total_count"),t=`${__("Total Images")}: <b>${this.images.length}`;this.images.length===0&&(t=__("No Images")),$(r.wrapper).html(`
			<div class="row mt-2">
				<div class="offset-4 col-4 d-flex justify-content-center">${t}</b></div>
			</div>
		`)}setup_toggle_camera(){let r=this;this.dialog.add_custom_action(__("Switch Camera"),()=>{r.facing_mode=r.facing_mode=="environment"?"user":"environment",frappe.show_alert({message:__("Switching Camera")}),r.stop_media_stream(),r.render_stream()},"btn-switch")}setup_capture_action(){let r=this;this.dialog.set_secondary_action_label(__("Capture")),this.dialog.set_secondary_action(()=>{frappe.is_mobile()?r.show_for_mobile():r.render_stream()})}setup_submit_action(){let r=this;this.dialog.set_primary_action(__("Submit"),()=>{r.hide(),r.callback&&r.callback(r.images)})}hide(){this.dialog&&this.dialog.hide(),this.stop_media_stream()}stop_media_stream(){this.stream&&this.stream.getTracks().forEach(r=>{r.stop()})}submit(r){this.callback=r}};frappe.ui.Capture.OPTIONS={title:__("Camera"),animate:!1,error:!1};frappe.ui.Capture.ERR_MESSAGE=__("Unable to load camera.");frappe.ui.Capture.TEMPLATE=`
<div class="frappe-capture">
	<div class="embed-responsive embed-responsive-16by9 fc-stream-container">
		<video class="fc-stream embed-responsive-item">${frappe.ui.Capture.ERR_MESSAGE}</video>
	</div>
	<div class="fc-preview-container px-2" style="display: none;">

	</div>
</div>
`;frappe.provide("frappe.ui");frappe.ui.app_icon={get_html:function(r,t){var e=r.icon,i=r.color;e&&e.match(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g)&&(r.emoji=r.icon);var n="";return r.reverse&&(n="color: #36414C;"),i||(i="#4aa3df"),!e||r.emoji?e='<span class="inner" '+(r.reverse?'style="'+n+'"':"")+">"+(r.emoji||r._label[0].toUpperCase())+"</span>":e.split(".").slice(-1)[0]==="svg"?($.ajax({url:frappe.urllib.get_full_url(e),dataType:"text",async:!1,success:function(o){e=o}}),e='<object class="app-icon-svg">'+e+"</object>"):e='<i class="'+e+'" title="'+r._label+'" style="'+n+'"></i>','<div class="app-icon'+(t?" app-icon-small":"")+'" style="background-color: '+i+'" title="'+r._label+'">'+e+"</div>"}};frappe.provide("frappe.ui");frappe.ui.ThemeSwitcher=class{constructor(){this.setup_dialog(),this.refresh()}setup_dialog(){this.dialog=new frappe.ui.Dialog({title:__("Switch Theme")}),this.body=$('<div class="theme-grid"></div>').appendTo(this.dialog.$body),this.bind_events()}bind_events(){this.dialog.$wrapper.on("keydown",t=>{if(!this.themes)return;let e=frappe.ui.keys.get_key(t),i;if(e==="right")i=1;else if(e==="left")i=-1;else if(t.keyCode===13)this.hide();else return;let n=this.themes.findIndex(s=>s.name===this.current_theme),o=this.themes[n+i];if(!!o)return o.$html.click(),!1})}refresh(){this.current_theme=document.documentElement.getAttribute("data-theme-mode")||"light",this.fetch_themes().then(()=>{this.render()})}fetch_themes(){return new Promise(t=>{this.themes=[{name:"light",label:__("Frappe Light"),info:__("Light Theme")},{name:"dark",label:__("Timeless Night"),info:__("Dark Theme")},{name:"automatic",label:__("Automatic"),info:__("Uses system's theme to switch between light and dark mode")}],t(this.themes)})}render(){this.themes.forEach(t=>{let e=this.get_preview_html(t);e.appendTo(this.body),t.$html=e})}get_preview_html(t){let e=t.name==="automatic",i=$(`<div class="${this.current_theme==t.name?"selected":""}">
			<div data-theme=${e?"light":t.name}
				data-is-auto-theme="${e}" title="${t.info}">
				<div class="background">
					<div>
						<div class="preview-check" data-theme=${e?"dark":t.name}>
							${frappe.utils.icon("tick","xs")}
						</div>
					</div>
					<div class="navbar"></div>
					<div class="p-2">
						<div class="toolbar">
							<span class="text"></span>
							<span class="primary"></span>
						</div>
						<div class="foreground"></div>
						<div class="foreground"></div>
					</div>
				</div>
			</div>
			<div class="mt-3 text-center">
				<h5 class="theme-title">${t.label}</h5>
			</div>
		</div>`);return i.on("click",()=>{this.current_theme!==t.name&&(this.themes.forEach(n=>{n.$html.removeClass("selected")}),i.addClass("selected"),this.toggle_theme(t.name))}),i}toggle_theme(t){this.current_theme=t.toLowerCase(),document.documentElement.setAttribute("data-theme-mode",this.current_theme),frappe.show_alert(__("Theme Changed"),3),frappe.xcall("frappe.core.doctype.user.user.switch_theme",{theme:toTitle(t)})}show(){this.dialog.show()}hide(){this.dialog.hide()}};frappe.ui.add_system_theme_switch_listener=()=>{frappe.ui.dark_theme_media_query.addEventListener("change",()=>{frappe.ui.set_theme()})};frappe.ui.dark_theme_media_query=window.matchMedia("(prefers-color-scheme: dark)");frappe.ui.set_theme=r=>{let t=document.documentElement,e=t.getAttribute("data-theme-mode");r||e==="automatic"&&(r=frappe.ui.dark_theme_media_query.matches?"dark":"light"),t.setAttribute("data-theme",r||e)};frappe.provide("frappe.model");$.extend(frappe.model,{all_fieldtypes:["Autocomplete","Attach","Attach Image","Barcode","Button","Check","Code","Color","Currency","Data","Date","Datetime","Duration","Dynamic Link","Float","Geolocation","Heading","HTML","HTML Editor","Icon","Image","Int","JSON","Link","Long Text","Markdown Editor","Password","Percent","Phone","Read Only","Rating","Select","Signature","Small Text","Table","Table MultiSelect","Text","Text Editor","Time"],no_value_type:["Section Break","Column Break","Tab Break","HTML","Table","Table MultiSelect","Button","Image","Fold","Heading"],layout_fields:["Section Break","Column Break","Tab Break","Fold"],std_fields_list:["name","owner","creation","modified","modified_by","_user_tags","_comments","_assign","_liked_by","docstatus","idx"],child_table_field_list:["parent","parenttype","parentfield"],core_doctypes_list:["DocType","DocField","DocPerm","User","Role","Has Role","Page","Module Def","Print Format","Report","Customize Form","Customize Form Field","Property Setter","Custom Field","Client Script"],restricted_fields:["name","parent","creation","modified","modified_by","parentfield","parenttype","file_list","flags","docstatus"],std_fields:[{fieldname:"name",fieldtype:"Link",label:__("ID")},{fieldname:"owner",fieldtype:"Link",label:__("Created By"),options:"User"},{fieldname:"idx",fieldtype:"Int",label:__("Index")},{fieldname:"creation",fieldtype:"Datetime",label:__("Created On")},{fieldname:"modified",fieldtype:"Datetime",label:__("Last Updated On")},{fieldname:"modified_by",fieldtype:"Link",label:__("Last Updated By"),options:"User"},{fieldname:"_user_tags",fieldtype:"Data",label:__("Tags")},{fieldname:"_liked_by",fieldtype:"Data",label:__("Liked By")},{fieldname:"_comments",fieldtype:"Text",label:__("Comments")},{fieldname:"_assign",fieldtype:"Text",label:__("Assigned To")},{fieldname:"docstatus",fieldtype:"Int",label:__("Document Status")}],numeric_fieldtypes:["Int","Float","Currency","Percent","Duration"],std_fields_table:[{fieldname:"parent",fieldtype:"Data",label:__("Parent")}],table_fields:["Table","Table MultiSelect"],new_names:{},events:{},user_settings:{},init:function(){frappe.realtime.on("doc_update",function(r){var t=locals[r.doctype]&&locals[r.doctype][r.name];t&&(frappe.get_route()[0]==="Form"&&cur_frm.doc.doctype===t.doctype&&cur_frm.doc.name===t.name?r.modified!==cur_frm.doc.modified&&!frappe.ui.form.is_saving&&(cur_frm.is_dirty()?(t.__needs_refresh=!0,cur_frm.show_conflict_message()):cur_frm.debounced_reload_doc()):t.__unsaved?t.__needs_refresh=!0:frappe.model.remove_from_locals(t.doctype,t.name))})},is_value_type:function(r){return typeof r=="object"&&(r=r.fieldtype),frappe.model.no_value_type.indexOf(r)===-1},is_non_std_field:function(r){return![...frappe.model.std_fields_list,...frappe.model.child_table_field_list].includes(r)},get_std_field:function(r,t=!1){var e=$.map([].concat(frappe.model.std_fields).concat(frappe.model.std_fields_table),function(i){if(i.fieldname==r)return i});if(!e.length){if(t)return{fieldname:r};frappe.msgprint(__("Unknown Column: {0}",[r]))}return e[0]},get_from_localstorage:function(r){if(localStorage["_doctype:"+r])return JSON.parse(localStorage["_doctype:"+r])},set_in_localstorage:function(r,t){try{localStorage["_doctype:"+r]=JSON.stringify(t)}catch(e){console.warn("localStorage quota exceeded, clearing doctype cache"),frappe.model.clear_local_storage(),localStorage["_doctype:"+r]=JSON.stringify(t)}},clear_local_storage:function(){for(var r in localStorage)r.startsWith("_doctype:")&&localStorage.removeItem(r)},with_doctype:function(r,t,e){if(locals.DocType[r])return t&&t(),Promise.resolve();{let i=null,n=null,o=frappe.model.get_from_localstorage(r);return o&&(n=o.filter(s=>s.name===r)[0],n&&(i=n.modified)),frappe.call({method:"frappe.desk.form.load.getdoctype",type:"GET",args:{doctype:r,with_parent:1,cached_timestamp:i},async:e,callback:function(s){if(s.exc)throw frappe.msgprint(__("Unable to load: {0}",[__(r)])),"No doctype";s.message=="use_cache"?frappe.model.sync(n):frappe.model.set_in_localstorage(r,s.docs),frappe.model.init_doctype(r),s.user_settings&&(frappe.model.user_settings[r]=JSON.parse(s.user_settings),frappe.model.user_settings[r].updated_on=moment().toString()),t&&t(s)}})}},init_doctype:function(r){var t=locals.DocType[r];for(let e of["__list_js","__custom_list_js","__calendar_js","__map_js","__tree_js"])t[e]&&new Function(t[e])();t.__templates&&$.extend(frappe.templates,t.__templates)},with_doc:function(r,t,e){return new Promise(i=>{if(t||(t=r),locals[r]&&locals[r][t]&&frappe.model.get_docinfo(r,t))e&&e(t),i(frappe.get_doc(r,t));else return frappe.call({method:"frappe.desk.form.load.getdoc",type:"GET",args:{doctype:r,name:t},callback:function(n){e&&e(t,n),i(frappe.get_doc(r,t))}})})},get_docinfo:function(r,t){return frappe.model.docinfo[r]&&frappe.model.docinfo[r][t]||null},set_docinfo:function(r,t,e,i){frappe.model.docinfo[r]&&frappe.model.docinfo[r][t]&&(frappe.model.docinfo[r][t][e]=i)},get_shared:function(r,t){return frappe.model.get_docinfo(r,t).shared},get_server_module_name:function(r){var t=frappe.model.scrub(r),e=frappe.model.scrub(locals.DocType[r].module),i=frappe.boot.module_app[e];return i+"."+e+".doctype."+t+"."+t},scrub:function(r){return r.replace(/ /g,"_").toLowerCase()},unscrub:function(r){return(r||"").replace(/-|_/g," ").replace(/\w*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},can_create:function(r){return frappe.boot.user.can_create.indexOf(r)!==-1},can_select:function(r){if(frappe.boot.user)return frappe.boot.user.can_select.indexOf(r)!==-1},can_read:function(r){if(frappe.boot.user)return frappe.boot.user.can_read.indexOf(r)!==-1},can_write:function(r){return frappe.boot.user.can_write.indexOf(r)!==-1},can_get_report:function(r){return frappe.boot.user.can_get_report.indexOf(r)!==-1},can_delete:function(r){return r?frappe.boot.user.can_delete.indexOf(r)!==-1:!1},can_cancel:function(r){return r?frappe.boot.user.can_cancel.indexOf(r)!==-1:!1},has_workflow:function(r){return frappe.get_list("Workflow",{document_type:r,is_active:1}).length},is_submittable:function(r){return r?locals.DocType[r]&&locals.DocType[r].is_submittable:!1},is_table:function(r){return r?locals.DocType[r]&&locals.DocType[r].istable:!1},is_single:function(r){return r?frappe.boot.single_types.indexOf(r)!=-1:!1},is_tree:function(r){return r?locals.DocType[r]&&locals.DocType[r].is_tree:!1},is_fresh(r){return r&&r.__last_sync_on&&new Date-r.__last_sync_on<5e3},can_import:function(r,t,e=null){return e&&!e.allow_import?!1:frappe.user_roles.includes("System Manager")?!0:t?t.perm[0].import===1:frappe.boot.user.can_import.indexOf(r)!==-1},can_export:function(r,t){return frappe.user_roles.includes("System Manager")?!0:t?t.perm[0].export===1:frappe.boot.user.can_export.indexOf(r)!==-1},can_print:function(r,t){return t?t.perm[0].print===1:frappe.boot.user.can_print.indexOf(r)!==-1},can_email:function(r,t){return t?t.perm[0].email===1:frappe.boot.user.can_email.indexOf(r)!==-1},can_share:function(r,t){return cint(frappe.sys_defaults.disable_document_sharing)&&frappe.session.user!=="Administrator"?!1:t?t.perm[0].share===1:frappe.boot.user.can_share.indexOf(r)!==-1},has_value:function(r,t,e){var i=locals[r]&&locals[r][t]&&locals[r][t][e],n=frappe.meta.get_docfield(r,e,t);let o;return frappe.model.table_fields.includes(n.fieldtype)?(o=!1,$.each(locals[n.options]||{},function(s,a){if(a.parent==t&&a.parenttype==r&&a.parentfield==n.fieldname)return o=!0,!1})):o=!is_null(i),!!o},get_list:function(r,t){var e=locals[r]||locals[":"+r]||{};return $.isEmptyObject(e)?[]:frappe.utils.filter_dict(e,t)},get_value:function(r,t,e,i){if(i)frappe.call({method:"frappe.client.get_value",args:{doctype:r,fieldname:e,filters:t},callback:function(o){o.exc||i(o.message)}});else{if(["number","string"].includes(typeof t)&&locals[r]&&locals[r][t])return locals[r][t][e];var n=frappe.get_list(r,t);return n.length&&n[0]?n[0][e]:null}},set_value:function(r,t,e,i,n,o=!1){var s;$.isPlainObject(r)?(s=r,e=t,i=e):s=locals[r]&&locals[r][t];let a=e,l=[];return $.isPlainObject(a)||(a={},a[e]=i),$.each(a,(u,d)=>{s&&s[u]!==d?(s.__unedited&&!(!s[u]&&!d)&&(s.__unedited=!1),s[u]=d,l.push(()=>frappe.model.trigger(u,d,s,o))):["Link","Dynamic Link"].includes(n)&&s&&l.push(()=>frappe.model.trigger(u,d,s,o))}),frappe.run_serially(l)},on:function(r,t,e){frappe.provide("frappe.model.events."+r),frappe.model.events[r][t]||(frappe.model.events[r][t]=[]),frappe.model.events[r][t].push(e)},trigger:function(r,t,e,i=!1){let n=[];function o(s){if(!!s)for(let a of s)!a||n.push(()=>{let l=a(r,t,e,i);return l&&l.then?l:frappe.after_server_call()})}return frappe.model.events[e.doctype]&&(o(frappe.model.events[e.doctype][r]),o(frappe.model.events[e.doctype]["*"])),frappe.run_serially(n)},get_doc:function(r,t){if(t||(t=r),$.isPlainObject(t)){var e=frappe.get_list(r,t);return e&&e.length?e[0]:null}return locals[r]?locals[r][t]:null},get_children:function(r,t,e,i){let n;$.isPlainObject(r)?(n=r,i=e,e=t):n=frappe.get_doc(r,t);var o=n[e]||[];return i?frappe.utils.filter_dict(o,i):o},clear_table:function(r,t){for(let e of r[t]||[])delete locals[e.doctype][e.name];r[t]=[]},remove_from_locals:function(r,t){this.clear_doc(r,t),frappe.views.formview[r]&&delete frappe.views.formview[r].frm.opendocs[t]},clear_doc:function(r,t){var e=locals[r]&&locals[r][t];if(!!e){var i=null;if(e.parenttype){i=e.parent;var n=e.parenttype,o=e.parentfield}if(delete locals[r][t],i){var s=locals[n][i],a=[],l=1;$.each(s[o],function(u,d){d.name!=t&&(a.push(d),d.idx=l,l++),s[o]=a})}}},get_no_copy_list:function(r){for(var t=["name","amended_from","amendment_date","cancel_reason"],e=frappe.get_doc("DocType",r).fields||[],i=0,n=e.length;i<n;i++){var o=e[i];cint(o.no_copy)&&t.push(o.fieldname)}return t},delete_doc:function(r,t,e){let i=t,n=frappe.get_meta(r).title_field;if(frappe.get_meta(r).autoname=="hash"&&n){let o=frappe.model.get_value(r,t,n);o&&(i=`${o} (${t})`)}frappe.confirm(__("Permanently delete {0}?",[i.bold()]),function(){return frappe.call({method:"frappe.client.delete",args:{doctype:r,name:t},freeze:!0,freeze_message:__("Deleting {0}...",[i]),callback:function(o,s){o.exc||(frappe.utils.play_sound("delete"),frappe.model.clear_doc(r,t),e&&e(o,s))}})})},rename_doc:function(r,t,e){let i=__("Merge with existing"),n=__("This cannot be undone"),o=i+" <b>("+n+")</b>";var s=new frappe.ui.Dialog({title:__("Rename {0}",[__(t)]),fields:[{label:__("New Name"),fieldname:"new_name",fieldtype:"Data",reqd:1,default:t},{label:o,fieldtype:"Check",fieldname:"merge"}]});s.set_primary_action(__("Rename"),function(){s.hide();var a=s.get_values();if(!!a)return frappe.call({method:"frappe.rename_doc",freeze:!0,freeze_message:"Updating related fields...",args:{doctype:r,old:t,new:a.new_name,merge:a.merge},btn:s.get_primary_btn(),callback:function(l,u){l.exc||($(document).trigger("rename",[r,t,l.message||a.new_name]),locals[r]&&locals[r][t]&&delete locals[r][t],s.hide(),e&&e(l.message))}})}),s.show()},round_floats_in:function(r,t){t||(t=frappe.meta.get_fieldnames(r.doctype,r.parent,{fieldtype:["in",["Currency","Float"]]}));for(var e=0,i=t.length;e<i;e++){var n=t[e];r[n]=flt(r[n],precision(n,r))}},validate_missing:function(r,t){r[t]||frappe.throw(__("Please specify")+": "+__(frappe.meta.get_label(r.doctype,t,r.parent||r.name)))},get_all_docs:function(r){var t=[r];for(var e in r)if($.isArray(r[e])&&!e.startsWith("_"))for(var i=r[e],n=0,o=i.length;n<o;n++)t.push(i[n]);return t},get_full_column_name:function(r,t){return r.includes("`tab")?r:"`tab"+t+"`.`"+r+"`"},is_numeric_field:function(r){if(!!r)return typeof r=="object"&&(r=r.fieldtype),frappe.model.numeric_fieldtypes.includes(r)},set_default_views_for_doctype(r,t){frappe.model.with_doctype(r,()=>{var n,o,s;let e=frappe.get_meta(r),i=["List","Report","Dashboard","Kanban"];if(e.is_calendar_and_gantt&&frappe.views.calendar[r]){let a=["Calendar","Gantt"];i.push(...a)}e.is_tree&&i.push("Tree"),t.doc.image_field&&i.push("Image"),r==="Communication"&&frappe.boot.email_accounts.length&&i.push("Inbox"),(((n=t.doc.fields)==null?void 0:n.find(a=>a.fieldname==="latitude"))&&((o=t.doc.fields)==null?void 0:o.find(a=>a.fieldname==="longitude"))||((s=t.doc.fields)==null?void 0:s.find(a=>a.fieldname==="location"&&a.fieldtype=="Geolocation")))&&i.push("Map"),t.set_df_property("default_view","options",i)})}});frappe.get_doc=frappe.model.get_doc;frappe.get_children=frappe.model.get_children;frappe.get_list=frappe.model.get_list;frappe.db={get_list:function(r,t){return t||(t={}),t.doctype=r,t.fields||(t.fields=["name"]),"limit"in t||(t.limit=20),new Promise(e=>{frappe.call({method:"frappe.desk.reportview.get_list",args:t,type:"GET",callback:function(i){e(i.message)}})})},exists:function(r,t){return new Promise(e=>{frappe.db.get_value(r,{name:t},"name").then(i=>{i.message&&i.message.name?e(!0):e(!1)})})},get_value:function(r,t,e,i,n){return frappe.call({method:"frappe.client.get_value",type:"GET",args:{doctype:r,fieldname:e,filters:t,parent:n},callback:function(o){i&&i(o.message)}})},get_single_value:(r,t)=>new Promise(e=>{frappe.call({method:"frappe.client.get_single_value",args:{doctype:r,field:t},type:"GET"}).then(i=>e(i?i.message:null))}),set_value:function(r,t,e,i,n){return frappe.call({method:"frappe.client.set_value",args:{doctype:r,name:t,fieldname:e,value:i},callback:function(o){n&&n(o.message)}})},get_doc:function(r,t,e){return new Promise((i,n)=>{frappe.call({method:"frappe.client.get",type:"GET",args:{doctype:r,name:t,filters:e},callback:o=>{frappe.model.sync(o.message),i(o.message)}}).fail(n)})},insert:function(r){return frappe.xcall("frappe.client.insert",{doc:r})},delete_doc:function(r,t){return new Promise(e=>{frappe.call("frappe.client.delete",{doctype:r,name:t},i=>e(i.message))})},count:function(r,t={}){let e=t.filters||{},i=Array.isArray(e)&&e.some(o=>o[0]!==r),n=[];return frappe.xcall("frappe.desk.reportview.get_count",{doctype:r,filters:e,fields:n,distinct:i})},get_link_options(r,t="",e={}){return new Promise(i=>{frappe.call({type:"GET",method:"frappe.desk.search.search_link",args:{doctype:r,txt:t,filters:e},callback(n){i(n.message)}})})}};frappe.provide("frappe.meta.docfield_map");frappe.provide("frappe.meta.docfield_copy");frappe.provide("frappe.meta.docfield_list");frappe.provide("frappe.meta.doctypes");frappe.provide("frappe.meta.precision_map");frappe.get_meta=function(r){return locals.DocType?locals.DocType[r]:null};$.extend(frappe.meta,{sync:function(r){$.each(r.fields,function(t,e){frappe.meta.add_field(e)}),frappe.meta.sync_messages(r),r.__print_formats&&frappe.model.sync(r.__print_formats),r.__workflow_docs&&frappe.model.sync(r.__workflow_docs)},add_field:function(r){frappe.provide("frappe.meta.docfield_map."+r.parent),frappe.meta.docfield_map[r.parent][r.fieldname||r.label]=r,frappe.meta.docfield_list[r.parent]||(frappe.meta.docfield_list[r.parent]=[]);for(var t in frappe.meta.docfield_list[r.parent]){var e=frappe.meta.docfield_list[r.parent][t];if(r.fieldname==e.fieldname)return}frappe.meta.docfield_list[r.parent].push(r)},make_docfield_copy_for:function(r,t,e=null){var i=frappe.meta.docfield_copy;i[r]||(i[r]={}),i[r][t]||(i[r][t]={}),e=e||frappe.meta.docfield_list[r]||[];for(var n=0,o=e.length;n<o;n++){var s=e[n];i[r][t][s.fieldname||s.label]=copy_dict(s)}},get_field:function(r,t,e){var i=frappe.meta.get_docfield(r,t,e);return i||frappe.model.std_fields.every(function(n){return n.fieldname===t?(i=n,!1):!0}),i},get_docfield:function(r,t,e){var i=frappe.meta.get_docfield_copy(r,e);return i?i[t]:null},set_formatter:function(r,t,e,i){frappe.meta.get_docfield(r,t,e).formatter=i},set_indicator_formatter:function(r,t,e,i,n){frappe.meta.get_docfield(r,t,e).formatter=function(o,s,a,l){return repl('<span class="indicator %(color)s">%(name)s</span>',{color:n(),name:i()})}},get_docfields:function(r,t,e){var i=frappe.meta.get_docfield_copy(r,t),n=frappe.meta.sort_docfields(i);return e&&(n=frappe.utils.filter_dict(n,e)),n},get_linked_fields:function(r){return $.map(frappe.get_meta(r).fields,function(t){return t.fieldtype=="Link"?t.options:null})},get_fields_to_check_permissions:function(r){var t=$.map(frappe.meta.get_docfields(r,name),function(e){return e.fieldtype==="Link"&&e.ignore_user_permissions!==1?e:null});return t=t.concat({label:"ID",fieldname:name,options:r}),t},sort_docfields:function(r){return $.map(r,function(t){return t}).sort(function(t,e){return t.idx-e.idx})},get_docfield_copy:function(r,t){return t?(frappe.meta.docfield_copy[r]&&frappe.meta.docfield_copy[r][t]||frappe.meta.make_docfield_copy_for(r,t),frappe.meta.docfield_copy[r][t]):frappe.meta.docfield_map[r]},get_fieldnames:function(r,t,e){return $.map(frappe.utils.filter_dict(frappe.meta.docfield_map[r],e),function(i){return i.fieldname})},has_field:function(r,t){let e=frappe.meta.docfield_map[r];return e&&e[t]},get_table_fields:function(r){return $.map(frappe.meta.docfield_list[r],function(t){return frappe.model.table_fields.includes(t.fieldtype)?t:null})},get_doctype_for_field:function(r,t){var e=null;return frappe.model.std_fields_list.includes(t)||frappe.meta.has_field(r,t)?e=r:(frappe.meta.get_table_fields(r).every(function(i){return frappe.meta.has_field(i.options,t)||frappe.model.child_table_field_list.includes(t)?(e=i.options,!1):!0}),e||console.log(__("Warning: Unable to find {0} in any table related to {1}",[t,__(r)]))),e},get_parentfield:function(r,t){var e=(frappe.get_doc("DocType",r).fields||[]).filter(i=>frappe.model.table_fields.includes(i.fieldtype)&&i.options===t);if(!e.length)throw"parentfield not found for "+r+", "+t;return e[0].fieldname},get_label:function(r,t,e){var i={name:__("ID"),creation:__("Created On"),docstatus:__("Document Status"),idx:__("Index"),modified:__("Last Updated On"),modified_by:__("Last Updated By"),owner:__("Created By"),_user_tags:__("Tags"),_liked_by:__("Liked By"),_comments:__("Comments"),_assign:__("Assigned To")};if(i[t])return i[t];var n=this.get_docfield(r,t,e);return(n?n.label:"")||t},get_print_sizes:function(){return["A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","B10","C5E","Comm10E","DLE","Executive","Folio","Ledger","Legal","Letter","Tabloid","Custom"]},get_print_formats:function(r){var t=["Standard"],e=locals.DocType[r].default_print_format;let i=frappe.model.get_doc(":Print Settings","Print Settings").enable_raw_printing;var n=frappe.get_list("Print Format",{doc_type:r}).sort(function(s,a){return s>a?1:-1});if($.each(n,function(s,a){!t.includes(a.name)&&a.print_format_type!=="JS"&&(cint(i)||!a.raw_printing)&&t.push(a.name)}),e&&e!="Standard"){var o=t.indexOf(e);t.splice(o,1).sort(),t.unshift(e)}return t},sync_messages:function(r){r.__messages&&$.extend(frappe._messages,r.__messages)},get_field_currency:function(r,t){var e=frappe.boot.sysdefaults.currency;if(!t&&cur_frm&&(t=cur_frm.doc),r&&r.options)if(t&&r.options.indexOf(":")!=-1){var i=r.options.split(":");if(i.length==3){var n=t[i[1]];!n&&cur_frm&&(n=cur_frm.doc[i[1]]),e=frappe.model.get_value(i[0],n,i[2])||frappe.model.get_value(":"+i[0],n,i[2])||e}}else t&&t[r.options]?e=t[r.options]:cur_frm&&cur_frm.doc[r.options]&&(e=cur_frm.doc[r.options]);return e},get_field_precision:function(r,t){var e=null;if(r&&r.precision)e=cint(r.precision);else if(r&&r.fieldtype==="Currency"){if(e=cint(frappe.defaults.get_default("currency_precision")),!e){var i=get_number_format(),n=get_number_format_info(i);e=n.precision}}else e=cint(frappe.defaults.get_default("float_precision"))||3;return e}});Object.assign(frappe.model,{docinfo:{},sync:function(r){var t;if(!r.docs&&!r.docinfo&&(r={docs:r}),t=$.isPlainObject(r.docs),t&&(r.docs=[r.docs]),r.docs)for(var e=0,i=r.docs.length;e<i;e++){var n=r.docs[e];locals[n.doctype]&&locals[n.doctype][n.name]?frappe.model.update_in_locals(n):frappe.model.add_to_locals(n),n.__last_sync_on=new Date,n.doctype==="DocType"&&frappe.meta.sync(n),n.localname&&frappe.model.rename_after_save(n,e)}return frappe.model.sync_docinfo(r),r.docs},rename_after_save:(r,t)=>{frappe.model.new_names[r.localname]=r.name,$(document).trigger("rename",[r.doctype,r.localname,r.name]),delete locals[r.doctype][r.localname],t===0&&(frappe.model.docinfo[r.doctype][r.name]=frappe.model.docinfo[r.doctype][r.localname],frappe.model.docinfo[r.doctype][r.localname]=void 0)},sync_docinfo:r=>{if(r.docinfo){let{doctype:t,name:e}=r.docinfo;frappe.model.docinfo[t]||(frappe.model.docinfo[t]={}),frappe.model.docinfo[t][e]=r.docinfo,Object.assign(frappe.boot.user_info,r.docinfo.user_info)}return r.docs},add_to_locals:function(r){locals[r.doctype]||(locals[r.doctype]={}),!r.name&&r.__islocal&&(r.parentfield||frappe.model.clear_doc(r),r.name=frappe.model.get_new_name(r.doctype),r.parentfield||frappe.provide("frappe.model.docinfo."+r.doctype+"."+r.name)),locals[r.doctype][r.name]=r;let t=frappe.get_meta(r.doctype);if(!(t?t.istable:r.parentfield))for(var i in r){var n=r[i];if($.isArray(n))for(var o=0,s=n.length;o<s;o++){var a=n[o];typeof a=="object"&&!a.parent&&(a.parent=r.name),frappe.model.add_to_locals(a)}}},update_in_locals:function(r){let t=locals[r.doctype][r.name],e=function(i,n){Object.keys(n).map(o=>{i[o]==null&&delete n[o]})};for(let i in r){let n=frappe.meta.get_field(r.doctype,i);if(n&&frappe.model.table_fields.includes(n.fieldtype)){r[i]instanceof Array||(r[i]=[]),t[i]instanceof Array||(t[i]=[]);for(let o=0;o<r[i].length;o++){let s=r[i][o],a=t[i][o];a?(locals[s.doctype]||(locals[s.doctype]={}),s.name||(s.name=frappe.model.get_new_name(r.doctype)),locals[s.doctype][s.name]||(delete locals[s.doctype][a.name],locals[s.doctype][s.name]=a),Object.assign(a,s),e(s,a)):(t[i].push(s),s.parent||(s.parent=r.name),frappe.model.add_to_locals(s))}if(t[i].length>r[i].length){for(let o=r[i].length;o<t[i].length;o++){let s=t[i][o];locals[s.doctype]&&locals[s.doctype][s.name]&&delete locals[s.doctype][s.name]}t[i].length=r[i].length}}else t[i]=r[i]}e(r,t)}});frappe.provide("frappe.model");$.extend(frappe.model,{new_names:{},get_new_doc:function(r,t,e,i){frappe.provide("locals."+r);var n={docstatus:0,doctype:r,name:frappe.model.get_new_name(r),__islocal:1,__unsaved:1,owner:frappe.session.user};if(frappe.model.set_default_values(n,t),t?($.extend(n,{parent:t.name,parentfield:e,parenttype:t.doctype}),t[e]||(t[e]=[]),n.idx=t[e].length+1,t[e].push(n)):frappe.provide("frappe.model.docinfo."+r+"."+n.name),frappe.model.add_to_locals(n),i&&frappe.model.create_mandatory_children(n),t||(n.__run_link_triggers=1),frappe.route_options&&frappe.route_options.name_field){var o=frappe.get_meta(r);o.autoname&&o.autoname.indexOf("field:")!==-1?n[o.autoname.substr(6)]=frappe.route_options.name_field:o.autoname&&o.autoname==="prompt"?n.__newname=frappe.route_options.name_field:o.title_field&&(n[o.title_field]=frappe.route_options.name_field),delete frappe.route_options.name_field}return frappe.route_options&&!n.parent&&($.each(frappe.route_options,function(s,a){var l=frappe.meta.has_field(r,s);l&&["Link","Data","Select","Dynamic Link"].includes(l.fieldtype)&&!l.no_copy&&(n[s]=a)}),frappe.route_options=null),n},make_new_doc_and_get_name:function(r,t){return frappe.model.get_new_doc(r,null,null,t).name},get_new_name:function(r){return frappe.router.slug(`new-${r}-${frappe.utils.get_random(10)}`)},set_default_values:function(r,t){let e=r.doctype,i=frappe.meta.get_docfields(e),n=[],o=frappe.model.no_value_type.filter(s=>!frappe.model.table_fields.includes(s));return i.forEach(s=>{if(o.includes(s.fieldtype)||r[s.fieldname]!=null||s.no_default)return;let a=frappe.model.get_default_value(s,r,t);a?(["Int","Check"].includes(s.fieldtype)?a=cint(a):["Currency","Float"].includes(s.fieldtype)&&(a=flt(a)),r[s.fieldname]=a,n.push(s.fieldname)):s.fieldtype=="Select"&&s.options&&typeof s.options=="string"&&!["[Select]","Loading..."].includes(s.options)&&(r[s.fieldname]=s.options.split(`
`)[0])}),n},create_mandatory_children:function(r){var t=frappe.get_meta(r.doctype);t&&t.istable||frappe.meta.get_docfields(r.doctype).forEach(function(e){e.fieldtype==="Table"&&e.reqd&&frappe.model.add_child(r,e.fieldname)})},get_default_value:function(r,t,e){var i="",n=frappe.defaults.get_user_permissions();let o=[],s=null,a=null;n&&({allowed_records:o,default_doc:s}=frappe.perm.filter_allowed_docs_for_doctype(n[r.options],t.doctype));var l=frappe.get_meta(t.doctype),u=r.fieldtype==="Link"&&!$.isEmptyObject(n)&&r.ignore_user_permissions!=1&&o.length;if(frappe.model.table_fields.includes(r.fieldtype)&&(a=[]),r.fieldtype==="Link"&&r.options!=="User")if(u&&s)a=s;else{if(!r.ignore_user_permissions){var d=frappe.defaults.get_user_defaults(r.options);d&&d.length===1&&(i=d[0])}i||(i=frappe.defaults.get_user_default(r.fieldname)),!i&&r.remember_last_selected_value&&frappe.boot.user.last_selected_values&&(i=frappe.boot.user.last_selected_values[r.options]);var p=i&&(!u||o.includes(i));p&&(a=i)}if(!a||r.default){let y=String(r.default);if(y=="__user"||y.toLowerCase()=="user")a=frappe.session.user;else if(y=="user_fullname")a=frappe.session.user_fullname;else if(y=="Today")a=frappe.datetime.get_today();else if((y||"").toLowerCase()==="now")r.fieldtype=="Time"?a=frappe.datetime.now_time():a=frappe.datetime.system_datetime();else if(y[0]===":"){var g=frappe.model.get_default_from_boot_docs(r,t,e),m=!u||o.includes(g);m&&(a=g)}else if(r.fieldname===l.title_field)a="";else{var k=!u||o.includes(r.default);(r.fieldtype!=="Link"||r.options==="User"||k)&&(a=r.default)}}else r.fieldtype=="Time"&&(a=frappe.datetime.now_time());return r.__default_value=a,a},get_default_from_boot_docs:function(r,t,e){if(frappe.get_list(r.default).length>0){var i=r.default.slice(1).toLowerCase().replace(" ","_"),n=e?e[i]:frappe.defaults.get_user_default(i),o=n?frappe.get_doc(r.default,n):null;if(o&&o[r.fieldname])return o[r.fieldname]}},add_child:function(r,t,e,i){arguments.length===2&&(e=t,t=frappe.meta.get_field(r.doctype,e).options),i=i?i-.1:(r[e]||[]).length+1;var n=frappe.model.get_new_doc(t,r,e);if(n.idx=i,i!==cint(i))for(var o=r[e].sort(function(u,d){return u.idx-d.idx}),s=0,a=o.length;s<a;s++){var l=o[s];l.idx=s+1}return cur_frm&&cur_frm.doc==r&&cur_frm.dirty(),n},copy_doc:function(r,t,e,i){var n=["name","amended_from","amendment_date","cancel_reason"],o=frappe.model.get_new_doc(r.doctype,e,i);for(var s in r){var a=frappe.meta.get_docfield(r.doctype,s);if(a&&s.substr(0,2)!="__"&&!n.includes(s)&&!(a&&!t&&cint(a.no_copy)==1)){var l=r[s]||[];if(frappe.model.table_fields.includes(a.fieldtype))for(var u=0,d=l.length;u<d;u++){var p=l[u];frappe.model.copy_doc(p,t,o,a.fieldname)}else o[s]=r[s]}}var g=frappe.session.user;return o.__islocal=1,o.docstatus=0,o.owner=g,o.creation="",o.modified_by=g,o.modified="",o.lft=null,o.rgt=null,t&&e&&(o._amended_from=r.name),o},open_mapped_doc:function(r){return r.frm&&r.frm.doc.__unsaved?frappe.throw(__("You have unsaved changes in this form. Please save before you continue.")):!r.source_name&&r.frm?r.source_name=r.frm.doc.name:!r.frm&&!r.source_name&&(r.source_name=null),frappe.call({type:"POST",method:"frappe.model.mapper.make_mapped_doc",args:{method:r.method,source_name:r.source_name,args:r.args||null,selected_children:r.frm?r.frm.get_selected():null},freeze:!0,freeze_message:r.freeze_message||"",callback:function(t){t.exc||(frappe.model.sync(t.message),r.run_link_triggers&&(frappe.get_doc(t.message.doctype,t.message.name).__run_link_triggers=!0),frappe.set_route("Form",t.message.doctype,t.message.name))}})}});frappe.create_routes={};frappe.new_doc=function(r,t,e){if(r==="File"){new frappe.ui.FileUploader({folder:t?t.folder:"Home"});return}return new Promise(i=>{t&&$.isPlainObject(t)&&(frappe.route_options=t),frappe.model.with_doctype(r,function(){frappe.create_routes[r]?frappe.set_route(frappe.create_routes[r]).then(()=>i()):frappe.ui.form.make_quick_entry(r,null,e).then(()=>i())})})};frappe.provide("frappe.perm");Object.assign(window,{READ:"read",WRITE:"write",CREATE:"create",DELETE:"delete",SUBMIT:"submit",CANCEL:"cancel",AMEND:"amend"});$.extend(frappe.perm,{rights:["select","read","write","create","delete","submit","cancel","amend","report","import","export","print","email","share"],doctype_perm:{},has_perm:(r,t=0,e="read",i)=>{var o;let n=frappe.perm.get_perm(r,i);return!!((o=n==null?void 0:n[t])!=null&&o[e])},get_perm:(r,t)=>{var e,i;return t&&!t.__islocal?frappe.perm._get_perm(r,t):(i=(e=frappe.perm.doctype_perm)[r])!=null?i:e[r]=frappe.perm._get_perm(r)},_get_perm:(r,t)=>{let e=[{read:0,permlevel:0}],i=frappe.get_doc("DocType",r),n=frappe.session.user;if((n==="Administrator"||frappe.user_roles.includes("Administrator"))&&(e[0].read=1),!i)return e;e=frappe.perm.get_role_permissions(i);let o=e[0];if(t){let s=frappe.model.get_docinfo(r,t.name);if(s&&s.permissions&&Object.keys(s.permissions).forEach(a=>{o[a]=s.permissions[a]}),t.owner!==n)for(let a of frappe.perm.rights)o[a]&&!o.rights_without_if_owner.has(a)&&(o[a]=0);if(s&&s.shared){for(let a of s.shared)if(a.user===n){for(let l of["read","write","submit","share"])o[l]||(o[l]=a[l]);a.read&&(o.email=frappe.boot.user.can_email.indexOf(r)!==-1?1:0,o.print=frappe.boot.user.can_print.indexOf(r)!==-1?1:0)}}}return!o.read&&frappe.model.can_read(r)&&(o.read=1),e},get_role_permissions:r=>{let t=[{read:0,permlevel:0}];return(r.permissions||[]).forEach(e=>{var o,s;let i=cint(e.permlevel),n=(o=t[i])!=null?o:t[i]={permlevel:i};i===0&&((s=n.rights_without_if_owner)!=null||(n.rights_without_if_owner=new Set)),frappe.user_roles.includes(e.role)&&frappe.perm.rights.forEach(a=>{!e[a]||(n[a]=1,i===0&&!e.if_owner&&n.rights_without_if_owner.add(a))})}),t=t.map(e=>e||{}),t},get_match_rules:(r,t)=>{let e=[];t||(t="read");let i=frappe.perm.get_perm(r),n=frappe.defaults.get_user_permissions();if(n&&!$.isEmptyObject(n)){let s={},a=frappe.meta.get_fields_to_check_permissions(r);$.each(a,(l,u)=>{let d=n[u.options]||[],p=frappe.perm.get_allowed_docs_for_doctype(d,r);p.length&&(s[u.label]=p)}),$.isEmptyObject(s)||e.push(s)}let o=i[0];return o.read&&!o.rights_without_if_owner.has("read")&&e.push({Owner:frappe.session.user}),e},get_field_display_status:(r,t,e,i)=>{if(!e&&t&&(e=frappe.perm.get_perm(t.doctype,t)),!e){let a=r&&(cint(r.hidden)||cint(r.hidden_due_to_dependency)),l=r&&cint(r.read_only);return a?"None":l?"Read":"Write"}r.permlevel||(r.permlevel=0);let n=e[r.permlevel],o="None";if(n&&(n.write&&!r.disabled?o="Write":n.read&&(o="Read")),i&&console.log("By Permission:"+o),cint(r.hidden)&&(o="None"),i&&console.log("By Hidden:"+o),cint(r.hidden_due_to_dependency)&&(o="None"),i&&console.log("By Hidden Due To Dependency:"+o),!t)return o;o==="Write"&&cint(t.docstatus)>0&&(o="Read"),i&&console.log("By Submit:"+o);let s=cint(r.allow_on_submit);return o==="Read"&&s&&cint(t.docstatus)===1&&n.write&&(o="Write"),i&&console.log("By Allow on Submit:"+o),o==="Read"&&cur_frm&&cur_frm.state_fieldname&&(cint(cur_frm.read_only)||cur_frm.states.update_fields.includes(r.fieldname)||r.fieldname==cur_frm.state_fieldname)&&(o="Read"),i&&console.log("By Workflow:"+o),o==="Write"&&(cint(r.read_only)||r.fieldtype==="Read Only")&&(o="Read"),i&&console.log("By Read Only:"+o),o==="Write"&&r.set_only_once&&!t.__islocal&&(o="Read"),i&&console.log("By Set Only Once:"+o),o},is_visible:(r,t,e)=>(typeof r=="string"&&(r=frappe.meta.get_docfield(t.doctype,r,t.parent||t.name)),frappe.perm.get_field_display_status(r,t,e)!=="None"),get_allowed_docs_for_doctype:(r,t)=>frappe.perm.filter_allowed_docs_for_doctype(r,t,!1),filter_allowed_docs_for_doctype:(r,t,e=!0)=>{let i=(r||[]).filter(o=>o.applicable_for===t||!o.applicable_for),n=i.map(o=>o.doc);if(e){let o=i.filter(s=>s.is_default).map(s=>s.doc);return{allowed_records:n,default_doc:o[0]}}else return n}});frappe.provide("frappe.workflow");frappe.workflow={state_fields:{},workflows:{},avoid_status_override:{},setup:function(r){var t=frappe.get_list("Workflow",{document_type:r});t.length?(frappe.workflow.workflows[r]=t[0],frappe.workflow.state_fields[r]=t[0].workflow_state_field,frappe.workflow.avoid_status_override[r]=t[0].states.filter(e=>e.avoid_status_override).map(e=>e.state)):frappe.workflow.state_fields[r]=null},get_state_fieldname:function(r){return frappe.workflow.state_fields[r]===void 0&&frappe.workflow.setup(r),frappe.workflow.state_fields[r]},get_default_state:function(r,t){frappe.workflow.setup(r);var e=null;return $.each(frappe.workflow.workflows[r].states,function(i,n){if(cint(n.doc_status)===cint(t))return e=n.state,!1}),e},get_transitions:function(r){return frappe.workflow.setup(r.doctype),frappe.xcall("frappe.model.workflow.get_transitions",{doc:r})},get_document_state_roles:function(r,t){return frappe.workflow.setup(r),(frappe.get_children(frappe.workflow.workflows[r],"states",{state:t})||[]).map(i=>i.allow_edit)},is_self_approval_enabled:function(r){return frappe.workflow.workflows[r].allow_self_approval},is_read_only:function(r,t){var e=frappe.workflow.get_state_fieldname(r);if(e){var i=locals[r][t];if(!i||i.__islocal)return!1;var n=i[e]||frappe.workflow.get_default_state(r,i.docstatus);let o=n?frappe.workflow.get_document_state_roles(r,n):null;return!frappe.user_roles.some(a=>o.includes(a))}return!1},get_update_fields:function(r){var t=$.unique($.map(frappe.workflow.workflows[r].states||[],function(e){return e.update_field}));return t},get_state(r){let t=this.get_state_fieldname(r.doctype),e=r[t];return e||(e=this.get_default_state(r.doctype,r.docstatus)),e},get_all_transitions(r){return frappe.workflow.workflows[r].transitions||[]},get_all_transition_actions(r){return this.get_all_transitions(r).map(e=>e.action)}};frappe.provide("frappe.model.user_settings");$.extend(frappe.model.user_settings,{get:function(r){return frappe.call("frappe.model.utils.user_settings.get",{doctype:r}).then(t=>JSON.parse(t.message||"{}"))},save:function(r,t,e){if(frappe.session.user==="Guest")return Promise.resolve();let i=frappe.model.user_settings[r]||{},n=$.extend(!0,{},i);$.isPlainObject(e)?(n[t]=n[t]||{},$.extend(n[t],e)):n[t]=e;let o=JSON.stringify(i),s=JSON.stringify(n);return o!==s?this.update(r,n):Promise.resolve(n)},remove:function(r,t){var e=frappe.model.user_settings[r]||{};return delete e[t],this.update(r,e)},update:function(r,t){return frappe.session.user==="Guest"?Promise.resolve():frappe.call({method:"frappe.model.utils.user_settings.save",args:{doctype:r,user_settings:t},callback:function(e){frappe.model.user_settings[r]=e.message}})}});frappe.get_user_settings=function(r,t){var e=frappe.model.user_settings[r]||{};return t&&(e=e[t]||{}),e};frappe.user_info=function(r){r||(r=frappe.session.user);let t;return frappe.boot.user_info&&frappe.boot.user_info[r]?t=frappe.boot.user_info[r]:t={fullname:r||"Unknown"},t.abbr=frappe.get_abbr(t.fullname),t.color=frappe.get_palette(t.fullname),t};frappe.update_user_info=function(r){for(let t in r)frappe.boot.user_info[t]?Object.assign(frappe.boot.user_info[t],r[t]):frappe.boot.user_info[t]=r[t]};frappe.provide("frappe.user");$.extend(frappe.user,{name:"Guest",full_name:function(r){return r===frappe.session.user?__("You",null,"Name of the current user. For example: You edited this 5 hours ago."):frappe.user_info(r).fullname},image:function(r){return frappe.user_info(r).image},abbr:function(r){return frappe.user_info(r).abbr},has_role:function(r){typeof r=="string"&&(r=[r]);for(var t in r)if((frappe.boot?frappe.boot.user.roles:["Guest"]).indexOf(r[t])!=-1)return!0},get_desktop_items:function(){var r=$.map(frappe.boot.allowed_modules,function(t){var e=t.module_name,i=frappe.modules[e]&&frappe.modules[e].type;if(frappe.boot.user.allow_modules.indexOf(e)===-1)return null;var n=null;return i==="module"?(frappe.boot.user.allow_modules.indexOf(e)!=-1||frappe.modules[e].is_help)&&(n=e):i==="page"?frappe.boot.allowed_pages.indexOf(frappe.modules[e].link)!=-1&&(n=e):i==="list"?frappe.model.can_read(frappe.modules[e]._doctype)&&(n=e):i==="view"?n=e:i==="setup"?(frappe.user.has_role("System Manager")||frappe.user.has_role("Administrator"))&&(n=e):n=e,n});return r},is_report_manager:function(){return frappe.user.has_role(["Administrator","System Manager","Report Manager"])},get_formatted_email:function(r){var t=frappe.user.full_name(r);if(t){var e="";return t.search(/[\[\]\\()<>@,:;".]/)!==-1&&(e='"'),repl("%(quote)s%(fullname)s%(quote)s <%(email)s>",{fullname:t,email:r,quote:e})}else return r},get_emails:()=>Object.keys(frappe.boot.user_info).map(r=>frappe.boot.user_info[r].email),toString:function(){return this.name}});frappe.session_alive=!0;$(document).bind("mousemove",function(){frappe.session_alive===!1&&$(document).trigger("session_alive"),frappe.session_alive=!0,frappe.session_alive_timeout&&clearTimeout(frappe.session_alive_timeout),frappe.session_alive_timeout=setTimeout("frappe.session_alive=false;",3e4)});var Xo=Gt(Fd());frappe.avatar=function(r,t,e,i=null,n=!1,o=!1){let s;if(r)s=frappe.user_info(r);else{let l=e||frappe.get_cookie("full_name");s={image:i===null?frappe.get_cookie("user_image"):i,fullname:l,abbr:frappe.get_abbr(l),color:frappe.get_palette(l)}}e||(e=s.fullname);let a="";return o&&(t+=" filterable",a=`data-filter="_assign,like,%${r}%"`),frappe.get_avatar(t,e,i||s.image,n,a)};frappe.get_avatar=function(r,t,e=null,i,n){r||(r="avatar-small");let o=document.createElement("div");if(e)o.innerHTML=`
			<span class="avatar ${r}" ${n}>
				<span class="avatar-frame" style='background-image: url("${e}")'</span>
			</span>`;else{let s=frappe.get_abbr(t),a="";if(!i){let l=frappe.get_palette(t);a=`background-color: var(${l[0]}); color: var(${l[1]})`}(r==="avatar-small"||r=="avatar-xs")&&(s=s.substr(0,1)),o.innerHTML=`<span class="avatar ${r}" ${n}>
			<div class="avatar-frame standard-image"
				style="${a}">
					${s}
			</div>
		</span>`}return o.querySelector(".avatar").setAttribute("title",t),o.querySelector(".avatar-frame").setAttribute("title",t),o.innerHTML};frappe.avatar_group=function(r,t=4,e={}){let i="",n=r.slice(0,t),o=r.slice(t),s=e.css_class||"",a=n.map(u=>frappe.avatar(u,"avatar-small "+s,null,null,!1,e.filterable)).join("");o.length===1?a+=frappe.avatar(o[0],"avatar-small "+s,null,null,!1,e.filterable):o.length>1&&(a=`
			${a}
			<span class="avatar avatar-small ${s}">
				<div class="avatar-frame standard-image avatar-extra-count"
					title="${o.map(u=>frappe.user_info(u).fullname).join(", ")}">
					+${o.length}
				</div>
			</span>
		`),e.action_icon&&(i=`
			<span class="avatar avatar-small">
				<div class="avatar-frame avatar-action">
					${frappe.utils.icon(e.action_icon,"sm")}
				</div>
			</span>
		`);let l=$(`<div class="avatar-group ${e.align||"right"} ${e.overlap!=!1?"overlap":""}">
			${a}
			${i}
		</div>`);return l.find(".avatar-action").on("click",e.action),l};frappe.ui.scroll=function(r,t,e){var i=$(".navbar").height()+$(".page-head").height(),n=$(r).offset().top-i-cint(e);t?$("html, body").animate({scrollTop:n}):$(window).scrollTop(n)};frappe.palette=[["--orange-avatar-bg","--orange-avatar-color"],["--pink-avatar-bg","--pink-avatar-color"],["--blue-avatar-bg","--blue-avatar-color"],["--green-avatar-bg","--green-avatar-color"],["--dark-green-avatar-bg","--dark-green-avatar-color"],["--red-avatar-bg","--red-avatar-color"],["--yellow-avatar-bg","--yellow-avatar-color"],["--purple-avatar-bg","--purple-avatar-color"],["--gray-avatar-bg","--gray-avatar-color0"]];frappe.get_palette=function(r){if(!r)return frappe.palette[8];var t=cint((parseInt((0,Xo.default)(r).substr(4,2),16)+1)/5.33);return frappe.palette[t%8]};frappe.get_abbr=function(r,t){if(!r)return"";var e="";return $.each(r.split(" "),function(i,n){if(e.length>=(t||2))return!1;if(!n.trim().length)return!0;e+=n.trim()[0]}),e||"?"};frappe.gravatars={};frappe.get_gravatar=function(r,t=0){var e=t?"s="+t:"d=retro";return frappe.gravatars[r]||(frappe.gravatars[r]="https://secure.gravatar.com/avatar/"+(0,Xo.default)(r)+"?"+e),frappe.gravatars[r]};window.repl=function(t,e){if(t==null)return"";for(var i in e)t=t.split("%("+i+")s").join(e[i]);return t};window.replace_all=function(r,t,e){return r.split(t).join(e)};window.strip_html=function(r){return cstr(r).replace(/<[^>]*>/g,"")};window.strip=function(r,t){if(r)return r=lstrip(r,t),r=rstrip(r,t),r};window.lstrip=function(t,e){e||(e=[`
`,"	"," "]);let i=t.substr(0,1);for(;e.includes(i);)t=t.substr(1),i=t.substr(0,1);return t};window.rstrip=function(r,t){t||(t=[`
`,"	"," "]);let e=r.substr(r.length-1);for(;t.includes(e);)r=r.substr(0,r.length-1),e=r.substr(r.length-1);return r};frappe.get_cookie=function(t){return frappe.get_cookies()[t]};frappe.get_cookies=function(){var t=document.cookie,e=0,i={};return document.cookie.match(/^\s*\$Version=(?:"1"|1);\s*(.*)/)&&(t=RegExp.$1,e=1),e===0?t.split(/[,;]/).map(function(n){var o=n.split(/=/,2),s=decodeURIComponent(o[0].trimLeft()),a=o.length>1?decodeURIComponent(o[1].trimRight()):null;a&&a.charAt(0)==='"'&&(a=a.substr(1,a.length-2)),i[s]=a}):t.match(/(?:^|\s+)([!#$%&'*+\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\-.0-9A-Z^`a-z|~]*|"(?:[\x20-\x7E\x80\xFF]|\\[\x00-\x7F])*")(?=\s*[,;]|$)/g).map(function(n,o){var s=n,a=o.charAt(0)==='"'?o.substr(1,-1).replace(/\\(.)/g,"$1"):o;i[s]=a}),i};frappe.is_mobile=function(){return $(document).width()<768};frappe.is_large_screen=function(){return $(document).height()>1180};frappe.utils.xss_sanitise=function(r,t){let e=r,i={strategies:["html","js"]},n={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/confirm\(.*\)|alert\(.*\)|prompt\(.*\)/gi;if(t=Object.assign({},i,t),t.strategies.includes("js")&&(e=e.replace(o,""),e=e.replace(s,"")),t.strategies.includes("html"))for(let a in n){let l=n[a],u=new RegExp(a,"g");e=e.replace(u,l)}return e};frappe.utils.sanitise_redirect=r=>{let t=(()=>i=>{function n(s){let a=/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:/\n?]+)/gim.exec(s);return a==null?"":a[1]}function o(s){return/^(?:[a-z]+:)?\/\//i.test(s)}return o(i)?n(location.href)!==n(i):!1})(),e=i=>{let n=/\s*(&#x.{1,7})?/,o=new RegExp(Array.from("javascript").join(n.source),"gi");return i.replace(o,"")};return r=frappe.utils.strip_url(r),t(r)?"":e(frappe.utils.xss_sanitise(r,{strategies:["js"]}))};frappe.utils.strip_url=r=>r.replace(/^[^A-Za-z0-9(//)#]+/g,"");frappe.utils.new_auto_repeat_prompt=function(r){let t=[{fieldname:"frequency",fieldtype:"Select",label:__("Frequency"),reqd:1,options:[{label:__("Daily"),value:"Daily"},{label:__("Weekly"),value:"Weekly"},{label:__("Monthly"),value:"Monthly"},{label:__("Quarterly"),value:"Quarterly"},{label:__("Half-yearly"),value:"Half-yearly"},{label:__("Yearly"),value:"Yearly"}]},{fieldname:"start_date",fieldtype:"Date",label:__("Start Date"),reqd:1,default:frappe.datetime.nowdate()},{fieldname:"end_date",fieldtype:"Date",label:__("End Date")}];frappe.prompt(t,function(e){frappe.call({method:"frappe.automation.doctype.auto_repeat.auto_repeat.make_auto_repeat",args:{doctype:r.doc.doctype,docname:r.doc.name,frequency:e.frequency,start_date:e.start_date,end_date:e.end_date},callback:function(i){i.message&&(frappe.show_alert({message:__("Auto Repeat created for this document"),indicator:"green"}),r.reload_doc())}})},__("Auto Repeat"),__("Save"))};frappe.utils.get_page_view_count=function(r){return frappe.call("frappe.website.doctype.web_page_view.web_page_view.get_page_view_count",{path:r})};frappe.urllib={get_arg:function(r){r=r.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+r+"=([^&#]*)",e=new RegExp(t),i=e.exec(window.location.href);return i==null?"":decodeURIComponent(i[1])},get_dict:function(){var r={},t=window.location.href.split("?")[1];if(!t||(t.indexOf("#")!=-1&&(t=t.split("#")[0]),!t))return r;t=t.split("&");for(var e=0;e<t.length;e++){var i=t[e].split("=");r[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return r},get_base_url:function(){var r=frappe.base_url||window.location.origin;return r.substr(r.length-1,1)=="/"&&(r=r.substr(0,r.length-1)),r},get_full_url:function(r){return r.indexOf("http://")===0||r.indexOf("https://")===0?r:r.substr(0,1)==="/"?frappe.urllib.get_base_url()+r:frappe.urllib.get_base_url()+"/"+r}};window.open_url_post=function(t,e,i){if(window.cordova){let l=t+"api/method/"+e.cmd+frappe.utils.make_query_string(e,!1);window.location.href=l}else{var n=document.createElement("form");n.action=t,n.method="POST",n.style.display="none",i&&(n.target="_blank"),e.csrf_token=frappe.csrf_token;for(var o in e){var s=document.createElement("textarea");s.name=o;var a=e[o];typeof a!="string"&&(a=JSON.stringify(a)),s.value=a,n.appendChild(s)}return document.body.appendChild(n),n.submit(),n}};window.get_url_arg=frappe.urllib.get_arg;window.get_url_dict=frappe.urllib.get_dict;function Jo(r,t){if(!r)return"";typeof r=="string"&&(r=frappe.datetime.convert_to_user_tz(r),r=new Date((r||"").replace(/-/g,"/").replace(/[TZ]/g," ").replace(/\.[0-9]*/,"")));let e=(new Date(frappe.datetime.now_datetime().replace(/-/g,"/")).getTime()-r.getTime())/1e3,i=Math.floor(e/86400);if(isNaN(i)||i<0)return"";if(t)if(i==0){if(e<60)return __("now");if(e<3600)return __("{0} m",[Math.floor(e/60)]);if(e<86400)return __("{0} h",[Math.floor(e/3600)])}else return i<7?__("{0} d",[i]):i<31?__("{0} w",[Math.floor(i/7)]):i<365?__("{0} M",[Math.floor(i/30)]):__("{0} y",[Math.floor(i/365)]);else if(i==0){if(e<60)return __("just now");if(e<120)return __("1 minute ago");if(e<3600)return __("{0} minutes ago",[Math.floor(e/60)]);if(e<7200)return __("1 hour ago");if(e<86400)return __("{0} hours ago",[Math.floor(e/3600)])}else return i==1?__("yesterday"):i<7?__("{0} days ago",[i]):i<14?__("1 week ago"):i<31?__("{0} weeks ago",[Math.floor(i/7)]):i<62?__("1 month ago"):i<365?__("{0} months ago",[Math.floor(i/30)]):i<730?__("1 year ago"):__("{0} years ago",[Math.floor(i/365)])}frappe.provide("frappe.datetime");window.comment_when=function(r,t){var e=frappe.datetime.str_to_user?frappe.datetime.str_to_user(r):r;return'<span class="frappe-timestamp '+(t?" mini":"")+'" data-timestamp="'+r+'" title="'+e+'">'+Jo(r,t)+"</span>"};frappe.datetime.comment_when=comment_when;frappe.datetime.prettyDate=Jo;frappe.datetime.refresh_when=function(){jQuery&&$(".frappe-timestamp").each(function(){$(this).html(Jo($(this).attr("data-timestamp"),$(this).hasClass("mini")))})};setInterval(function(){frappe.datetime.refresh_when()},6e4);var qd=Gt(Hd());frappe.provide("frappe.tools");frappe.tools.downloadify=function(r,t,e){if(t&&t.length&&!has_common(t,t)){frappe.msgprint(__("Export not allowed. You need {0} role to export.",[frappe.utils.comma_or(t)]));return}var i=e+".csv",n=frappe.tools.to_csv(r),o=document.createElement("a");if("download"in o){var s=new Blob([n],{type:"text/csv;charset=UTF-8"});o.href=URL.createObjectURL(s),o.download=i}else o.href="data:attachment/csv,"+encodeURIComponent(n),o.download=i,o.target="_blank";document.body.appendChild(o),o.click(),document.body.removeChild(o)};frappe.markdown=function(r){for(frappe.md2html||(frappe.md2html=new qd.default.Converter);r.substr(0,1)===`
`;)r=r.substr(1);for(var t=0,e=r.split(`
`)[0];[`
`,"	"].indexOf(e.substr(0,1))!==-1;)t++,e=e.substr(1);if(t&&t!=e.length){var i=[];$.each(r.split(`
`),function(n,o){i.push(o.substr(t))}),r=i.join(`
`)}return frappe.md2html.makeHtml(r)};frappe.tools.to_csv=function(r){var t=[];return $.each(r,function(e,i){i=$.map(i,function(n){return n==null&&(n=""),typeof n=="string"?'"'+$("<i>").html(n.replace(/"/g,'""')).text()+'"':n}),t.push(i.join(","))}),t.join(`
`)};frappe.provide("frappe.datetime");frappe.defaultDateFormat="YYYY-MM-DD";frappe.defaultTimeFormat="HH:mm:ss";frappe.defaultDatetimeFormat=frappe.defaultDateFormat+" "+frappe.defaultTimeFormat;moment.defaultFormat=frappe.defaultDateFormat;frappe.provide("frappe.datetime");$.extend(frappe.datetime,{convert_to_user_tz:function(r,t){let e=null;return frappe.boot.time_zone&&frappe.boot.time_zone.system&&frappe.boot.time_zone.user?e=moment.tz(r,frappe.boot.time_zone.system).clone().tz(frappe.boot.time_zone.user):e=moment(r),t===!1?e:e.format(frappe.defaultDatetimeFormat)},convert_to_system_tz:function(r,t){let e=null;return frappe.boot.time_zone&&frappe.boot.time_zone.system&&frappe.boot.time_zone.user?e=moment.tz(r,frappe.boot.time_zone.user).clone().tz(frappe.boot.time_zone.system):e=moment(r),t===!1?e:e.format(frappe.defaultDatetimeFormat)},is_system_time_zone:function(){return frappe.boot.time_zone&&frappe.boot.time_zone.system&&frappe.boot.time_zone.user?moment().tz(frappe.boot.time_zone.system).utcOffset()===moment().tz(frappe.boot.time_zone.user).utcOffset():!0},is_timezone_same:function(){return frappe.datetime.is_system_time_zone()},str_to_obj:function(r){return moment(r,frappe.defaultDatetimeFormat)._d},obj_to_str:function(r){return moment(r).locale("en").format()},obj_to_user:function(r){return moment(r).format(frappe.datetime.get_user_date_fmt().toUpperCase())},get_diff:function(r,t){return moment(r).diff(t,"days")},get_hour_diff:function(r,t){return moment(r).diff(t,"hours")},get_minute_diff:function(r,t){return moment(r).diff(t,"minutes")},get_day_diff:function(r,t){return moment(r).diff(t,"days")},add_days:function(r,t){return moment(r).add(t,"days").format()},add_months:function(r,t){return moment(r).add(t,"months").format()},week_start:function(){return moment().startOf("week").format()},week_end:function(){return moment().endOf("week").format()},month_start:function(){return moment().startOf("month").format()},month_end:function(){return moment().endOf("month").format()},quarter_start:function(){return moment().startOf("quarter").format()},quarter_end:function(){return moment().endOf("quarter").format()},year_start:function(){return moment().startOf("year").format()},year_end:function(){return moment().endOf("year").format()},get_user_time_fmt:function(){return frappe.sys_defaults&&frappe.sys_defaults.time_format||"HH:mm:ss"},get_user_date_fmt:function(){return frappe.sys_defaults&&frappe.sys_defaults.date_format||"yyyy-mm-dd"},get_user_fmt:function(){return frappe.sys_defaults&&frappe.sys_defaults.date_format||"yyyy-mm-dd"},str_to_user:function(r,t=!1,e=!1){if(!r)return"";let i=frappe.datetime.get_user_date_fmt().toUpperCase(),n=frappe.datetime.get_user_time_fmt(),o=n;if(t)return moment(r,frappe.defaultTimeFormat).format(o);if(e)return moment(r,frappe.defaultDateFormat).format(i);{let s=moment.tz(r,frappe.boot.time_zone.system);return typeof r!="string"||r.indexOf(" ")===-1?o=i:o=i+" "+n,s.clone().tz(frappe.boot.time_zone.user).format(o)}},get_datetime_as_string:function(r){return moment(r).format("YYYY-MM-DD HH:mm:ss")},user_to_str:function(r,t=!1){var e=frappe.datetime.get_user_time_fmt();if(t)return moment(r,e).format(frappe.defaultTimeFormat);var i=frappe.datetime.get_user_date_fmt().toUpperCase(),n="YYYY-MM-DD";return r.indexOf(" ")!==-1&&(i+=" "+e,n+=" HH:mm:ss"),moment(r,[i.replace("YYYY","YY"),i]).locale("en").format(n)},user_to_obj:function(r){return frappe.datetime.str_to_obj(frappe.datetime.user_to_str(r))},global_date_format:function(r){var t=moment(r);return t._f&&t._f.indexOf("HH")!==-1?t.format("Do MMMM YYYY, hh:mm A"):t.format("Do MMMM YYYY")},now_date:function(r=!1){return frappe.datetime._date(frappe.defaultDateFormat,r)},now_time:function(r=!1){return frappe.datetime._date(frappe.defaultTimeFormat,r)},now_datetime:function(r=!1){return frappe.datetime._date(frappe.defaultDatetimeFormat,r)},system_datetime:function(r=!1){return frappe.datetime._date(frappe.defaultDatetimeFormat,r,!0)},_date:function(r,t=!1,e=!1){var o,s;let i=((o=frappe.boot.time_zone)==null?void 0:o.system)||frappe.sys_defaults.time_zone;e||(i=((s=frappe.boot.time_zone)==null?void 0:s.user)||i);let n=moment.tz(i);return t?frappe.datetime.moment_to_date_obj(n):n.format(r)},moment_to_date_obj:function(r){let t=new Date,e=r.toArray();return t.setFullYear(e[0]),t.setMonth(e[1]),t.setDate(e[2]),t.setHours(e[3]),t.setMinutes(e[4]),t.setSeconds(e[5]),t.setMilliseconds(e[6]),t},nowdate:function(){return frappe.datetime.now_date()},get_today:function(){return frappe.datetime.now_date()},get_time:r=>moment(r).format("hh:mm A"),validate:function(r){return moment(r,[frappe.defaultDateFormat,frappe.defaultDatetimeFormat,frappe.defaultTimeFormat],!0).isValid()},get_first_day_of_the_week_index(){let r=frappe.sys_defaults.first_day_of_the_week||"Sunday";return moment.weekdays().indexOf(r)}});window.cstr=function(r){return r==null?"":r+""};window.cint=function(r,t){return r===!0?1:r===!1?0:(r=r+"",r!=="0"&&(r=lstrip(r,["0"])),r=parseInt(r),isNaN(r)&&(r=t===void 0?0:t),r)};window.toTitle=function(r){var t=r.split(" "),e=[];for(var i in t)e[i]=t[i].charAt(0).toUpperCase()+t[i].slice(1);return e.join(" ")};window.is_null=function(r){if(r==null||cstr(r).trim()==="")return!0};window.copy_dict=function(r){var t={};for(var e in r)t[e]=r[e];return t};window.validate_email=function(r){return frappe.utils.validate_type(r,"email")};window.validate_phone=function(r){return frappe.utils.validate_type(r,"phone")};window.validate_name=function(r){return frappe.utils.validate_type(r,"name")};window.validate_url=function(r){return frappe.utils.validate_type(r,"url")};window.nth=function(r){r=cint(r);var t="th";return(r+"").substr(-1)=="1"&&(t="st"),(r+"").substr(-1)=="2"&&(t="nd"),(r+"").substr(-1)=="3"&&(t="rd"),r+t};window.has_words=function(r,t){if(!t)return!0;if(!r)return!1;for(var e=0,i=r.length;e<i;e++)if(t.indexOf(r[e])!=-1)return!0;return!1};window.has_common=function(r,t){if(!r||!t)return!1;for(var e=0,i=r.length;e<i;e++)if(t.includes(r[e]))return!0;return!1};window.frappe||(window.frappe={});function qn(r,t,e,i){if(r==null||r=="")return 0;if(typeof r!="number"){if(r=r+"",r.indexOf(" ")!=-1){var n=r.split(" ");r=isNaN(parseFloat(n[0]))?n.slice(n.length-1).join(" "):r}r=Zo(r,e),r=parseFloat(r),isNaN(r)&&(r=0)}return t!=null?Wn(r,t,i):r}function Zo(r,t){t||(t=ji());var e=Ri(t),i=new RegExp(e.group_sep==="."?"\\.":e.group_sep,"g");if(r=r.replace(i,""),e.decimal_str!=="."&&e.decimal_str!==""){var n=new RegExp(e.decimal_str,"g");r=r.replace(n,".")}return r}function p0(r,t,e){e||(e=ji());let i=Ri(e);t||(t="#,###.##");let n=Ri(t);if(t===e)return r;if(i.decimal_str=="")return Zo(r);let o=r.split(n.decimal_str),s=o[0],a=o[1]||"",l=new RegExp(n.group_sep==="."?"\\.":n.group_sep,"g");return s=s.replace(l,i.group_sep),r=s+i.decimal_str+a,r}frappe.number_format_info={"#,###.##":{decimal_str:".",group_sep:","},"#.###,##":{decimal_str:",",group_sep:"."},"# ###.##":{decimal_str:".",group_sep:" "},"# ###,##":{decimal_str:",",group_sep:" "},"#'###.##":{decimal_str:".",group_sep:"'"},"#, ###.##":{decimal_str:".",group_sep:", "},"#,##,###.##":{decimal_str:".",group_sep:","},"#,###.###":{decimal_str:".",group_sep:","},"#.###":{decimal_str:"",group_sep:"."},"#,###":{decimal_str:"",group_sep:","}};window.format_number=function(r,t,e){t||(t=ji(),e==null&&(e=cint(frappe.defaults.get_default("float_precision"))||3));var i=Ri(t);e==null&&(e=i.precision),r=qn(r,e,t);let n=!1;r<0&&(n=!0),r=Math.abs(r),r=r.toFixed(e);var o=r.split("."),s=i.group_sep?3:0;if(s){for(var a=o[0],l="",u=a.length%s,d=a.length;d>=0;d--){var p=replace_all(l,i.group_sep,"").length;t=="#,##,###.##"&&l.indexOf(",")!=-1&&(s=2,p+=1),l+=a.charAt(d),p&&!((p+1)%s)&&d!=0&&(l+=i.group_sep)}o[0]=l.split("").reverse().join("")}return o[0]+""==""&&(o[0]="0"),o[1]=o[1]&&i.decimal_str?i.decimal_str+o[1]:"",(n?"-":"")+o[0]+o[1]};function Wd(r,t,e){var s;let i=ji(t),n=Ud(t),o=(s=frappe.model.get_value(":Currency",t,"symbol_on_right"))!=null?s:!1;return e===void 0&&(e=frappe.boot.sysdefaults.currency_precision||null),n?o?format_number(r,i,e)+" "+__(n):__(n)+" "+format_number(r,i,e):format_number(r,i,e)}function Ud(r){return frappe.boot?frappe.boot.sysdefaults&&frappe.boot.sysdefaults.hide_currency_symbol=="Yes"?null:(r||(r=frappe.boot.sysdefaults.currency),frappe.model.get_value(":Currency",r,"symbol")||r):frappe.currency_symbols[r]}function ji(r){return frappe.boot&&frappe.boot.sysdefaults&&frappe.boot.sysdefaults.number_format||"#,###.##"}function Ri(r){var t=frappe.number_format_info[r];return t||(t={decimal_str:".",group_sep:","}),t.precision=r.split(t.decimal_str).slice(1)[0].length,t}function Wn(r,t,e){e=e||frappe.boot.sysdefaults.rounding_method||"Banker's Rounding (legacy)";let i=r<0;if(e=="Banker's Rounding (legacy)"){var n=cint(t),o=Math.pow(10,n),s=+(n?Math.abs(r)*o:Math.abs(r)).toFixed(8),a=Math.floor(s),l=s-a,u=!t&&l==.5?a%2==0?a:a+1:Math.round(s);return u=n?u/o:u,i?-u:u}else if(e=="Banker's Rounding"){if(r==0)return 0;t=cint(t);let d=Math.pow(10,t);r=Math.abs(r)*d;let p=Math.floor(r),g=r-p,m=2**(Math.log2(Math.abs(r))-52);return Math.abs(g-.5)<m?r=p%2==0?p:p+1:r=Math.round(r),r=r/d,i?-r:r}else if(e=="Commercial Rounding"){if(r==0)return 0;let d=cint(t),p=Math.pow(10,d);r=r*p;let g=2**(Math.log2(Math.abs(r))-52);return i&&(g=-1*g),r=Math.round(r+g),r/p}else throw new Error(`Unknown rounding method ${e}`)}function h0(r,t){return Wn(r,t)}function _0(r,t){if(cur_frm){t||(t=cur_frm.doc);var e=frappe.meta.get_docfield(t.doctype,r,t.parent||t.name);return e||console.log(r+": could not find docfield in method precision()"),frappe.meta.get_field_precision(e,t)}else return frappe.boot.sysdefaults.float_precision}function g0(r,t){return r.includes(t)}function Vd(r,t,e){e=cint(e);var i=Math.pow(10,e);let n;return e?n=r*i%(t*i)/i:n=r%t,qn(n,e)}function m0(r,t,e){var i=qn(frappe.model.get_value(":Currency",t,"smallest_currency_fraction_value"));if(i){var n=Vd(r,i,e);n>i/2?r+=i-n:r-=n}else r=Wn(r);return r}function v0(r,t){return Wd(r,t)}Object.assign(window,{flt:qn,cint,strip_number_groups:Zo,convert_old_to_new_number_format:p0,format_currency:Wd,fmt_money:v0,get_currency_symbol:Ud,get_number_format:ji,get_number_format_info:Ri,_round:Wn,roundNumber:h0,precision:_0,remainder:Vd,round_based_on_smallest_currency_fraction:m0,in_list:g0});frappe.provide("frappe.help");frappe.help.youtube_id={};frappe.help.has_help=function(r){return frappe.help.youtube_id[r]};frappe.help.show=function(r){frappe.help.youtube_id[r]&&frappe.help.show_video(frappe.help.youtube_id[r])};frappe.help.show_video=function(r,t){if(frappe.utils.is_url(r)){let o='(?:youtube.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu.be/)([^"&?\\s]{11})';r=r.match(o)[1]}let e=new frappe.ui.Dialog({title:t||__("Help"),size:"large"}),i=$(`<div class="video-player" data-plyr-provider="youtube" data-plyr-embed-id="${r}"></div>`);i.appendTo(e.body),e.show(),e.$wrapper.addClass("video-modal");let n;frappe.utils.load_video_player().then(()=>{n=new frappe.Plyr(i[0],{hideControls:!0,resetOnEnd:!0})}),e.onhide=()=>{n==null||n.destroy()}};$("body").on("click","a.help-link",function(){var r=$(this).attr("data-doctype");r&&frappe.help.show(r)});frappe.provide("frappe.help.help_links");frappe.help.help_links["data-import-tool"]=[{label:"Importing and Exporting Data",url:"https://docs.erpnext.com/docs/user/manual/en/data"}];frappe.help.help_links["modules/Setup"]=[{label:"Users and Permissions",url:"https://frappeframework.com/docs/user/en/basics/users-and-permissions"},{label:"System Settings",url:"https://docs.erpnext.com/docs/user/manual/en/system-settings"},{label:"Data Management",url:"https://docs.erpnext.com/docs/user/manual/en/data"},{label:"Email",url:"https://docs.erpnext.com/docs/user/manual/en/email"},{label:"Printing and Branding",url:"https://docs.erpnext.com/docs/user/manual/en/print"}];frappe.help.help_links["List/User"]=[{label:"Adding Users",url:"https://docs.erpnext.com/docs/user/manual/en/adding-users"},{label:"Rename User",url:"https://docs.erpnext.com/docs/user/manual/en/renaming-documents"}];frappe.help.help_links["permission-manager"]=[{label:"Role Permissions Manager",url:"https://frappeframework.com/docs/user/en/basics/users-and-permissions#role-permissions-manager"}];frappe.help.help_links["user-permissions"]=[{label:"User Permissions",url:"https://frappeframework.com/docs/user/en/basics/users-and-permissions#user-permissions"}];frappe.help.help_links["Form/System Settings"]=[{label:"System Settings",url:"https://docs.erpnext.com/docs/user/manual/en/system-settings"}];frappe.help.help_links["List/Email Account"]=[{label:"Email Account",url:"https://docs.erpnext.com/docs/user/manual/en/email-account"}];frappe.help.help_links["List/Notification"]=[{label:"Notification",url:"https://docs.erpnext.com/docs/user/manual/en/notifications"}];frappe.help.help_links["Form/Print Settings"]=[{label:"Print Settings",url:"https://docs.erpnext.com/docs/user/manual/en/print-settings"}];frappe.help.help_links["print-format-builder"]=[{label:"Print Format Builder",url:"https://docs.erpnext.com/docs/user/manual/en/print-format-builder"}];frappe.provide("frappe.contacts");$.extend(frappe.contacts,{clear_address_and_contact:function(r){$(r.fields_dict.address_html.wrapper).html(""),r.fields_dict.contact_html&&$(r.fields_dict.contact_html.wrapper).html("")},render_address_and_contact:function(r){r.fields_dict.address_html&&"addr_list"in r.doc.__onload&&$(r.fields_dict.address_html.wrapper).html(frappe.render_template("address_list",r.doc.__onload)).find(".btn-address").on("click",()=>Yd("Address",r.doc)),r.fields_dict.contact_html&&"contact_list"in r.doc.__onload&&$(r.fields_dict.contact_html.wrapper).html(frappe.render_template("contact_list",r.doc.__onload)).find(".btn-contact").on("click",()=>Yd("Contact",r.doc))},get_last_doc:function(r){let e=frappe.route_history.slice().reverse().find(o=>o[0]==="Form"&&o[1]!==r.doctype),i=e&&e[1],n=e&&e[2];return e&&e.length>3&&(n=e.slice(2).join("/")),{doctype:i,docname:n}},get_address_display:function(r,t,e){if(r.updating_party_details)return;let i=t||"address",n=e||"address_display";if(!r.doc[i]){r.set_value(n,"");return}frappe.xcall("frappe.contacts.doctype.address.address.get_address_display",{address_dict:r.doc[i]}).then(o=>r.set_value(n,o))}});function Yd(r,t){return frappe.dynamic_link={doctype:t.doctype,doc:t,fieldname:"name"},frappe.new_doc(r)}frappe.preview_email=function(r,t,e,i=!1,n=!1){return frappe.call({method:"frappe.email.email_body.get_email_html",args:{subject:"Test",template:r,args:t,header:e,with_container:i}}).then(o=>{var s=o.message;if(s=s.replace(/embed=/,"src="),n)return s;var a=frappe.msgprint({message:'<iframe width="100%" height="600px" style="border: none;"></iframe>',wide:!0});setTimeout(()=>{a.$wrapper.find("iframe").contents().find("html").html(s),a.$wrapper.find(".modal-dialog").css("width","70%")},1e3)})};frappe.provide("frappe.file_manager");frappe.file_manager=function(){let r=[],t=null,e=null;function i(s,a){r=s,t=a}function n(s){return new Promise((a,l)=>{if(r.length===0||!t){o(),a();return}e=s,frappe.call({method:"frappe.core.api.file.move_file",args:{file_list:r,new_parent:e,old_parent:t},callback:u=>{o(),a(u)}}).fail(l)})}function o(){r=[],t=null,e=null}return{cut:i,paste:n,get can_paste(){return Boolean(r.length>0&&t)},get old_folder(){return t},get files_to_move(){return r}}}();frappe.provide("frappe.ui");frappe.ui.DiffView=class{constructor(t,e,i){this.dialog=null,this.handler=null,this.doctype=t,this.fieldname=e,this.docname=i,this.dialog=this.make_dialog(),this.set_empty_state(),this.dialog.show()}make_dialog(){let t=()=>({query:"frappe.utils.diff.version_query",filters:{docname:this.docname,ref_doctype:this.doctype,fieldname:this.fieldname}}),e=()=>this.compute_diff();return new frappe.ui.Dialog({title:__("Compare Versions"),fields:[{label:__("From version"),fieldtype:"Link",fieldname:"from_version",options:"Version",reqd:1,get_query:t,onchange:e},{fieldtype:"Column Break",fieldname:"cb"},{label:__("To version"),fieldtype:"Link",fieldname:"to_version",options:"Version",reqd:1,get_query:t,onchange:e},{fieldtype:"Section Break",fieldname:"sb"},{label:__("Diff"),fieldtype:"HTML",fieldname:"diff"}],size:"extra-large"})}compute_diff(){let t=this.dialog.get_value("from_version"),e=this.dialog.get_value("to_version"),i=this.fieldname;t&&e?frappe.xcall("frappe.utils.diff.get_version_diff",{from_version:t,to_version:e,fieldname:i}).then(n=>{this.dialog.set_value("diff",this.prettify_diff(n))}):this.set_empty_state()}prettify_diff(t){let e="";return t.forEach(i=>{let n="";i.startsWith("+")?n="insert":i.startsWith("-")&&(n="delete"),e+=`<div class="${n} text-wrap">${i}</div>`}),`<div class='diffview'>${e}</div>`}set_empty_state(){this.dialog.set_value("diff",__("Select two versions to view the diff."))}};frappe.provide("frappe.utils.datatable");frappe.utils.datatable.get_translations=function(){let r={};return r[frappe.boot.lang]={"Sort Ascending":__("Sort Ascending"),"Sort Descending":__("Sort Descending"),"Reset sorting":__("Reset sorting"),"Remove column":__("Remove column"),"No Data":__("No Data"),"{count} cells copied":{1:__("{count} cell copied"),default:__("{count} cells copied")},"{count} rows selected":{1:__("{count} row selected"),default:__("{count} rows selected")}},r};frappe.require?frappe.require("file_uploader.bundle.js"):frappe.ready(function(){frappe.require("file_uploader.bundle.js")});frappe.provide("frappe.ui");frappe.ui.Tree=class{constructor({parent:r,label:t,root_value:e,icon_set:i,toolbar:n,expandable:o,with_skeleton:s=1,args:a,method:l,get_label:u,on_render:d,on_click:p}){$.extend(this,arguments[0]),e==null&&(this.root_value=t),this.setup_treenode_class(),this.nodes={},this.wrapper=$('<div class="tree">').appendTo(this.parent),s&&this.wrapper.addClass("with-skeleton"),i||(this.icon_set={open:frappe.utils.icon("folder-open","md"),closed:frappe.utils.icon("folder-normal","md"),leaf:frappe.utils.icon("primitive-dot","xs")}),this.setup_root_node()}get_nodes(r,t){var e=Object.assign({},this.args);return e.parent=r,e.is_root=t,new Promise(i=>{frappe.call({method:this.method,args:e,callback:n=>{this.on_get_node&&this.on_get_node(n.message),i(n.message)}})})}get_all_nodes(r,t,e){var i=Object.assign({},this.args);return i.label=e||r,i.parent=r,i.is_root=t,i.tree_method=this.method,new Promise(n=>{frappe.call({method:"frappe.desk.treeview.get_all_nodes",args:i,callback:o=>{this.on_get_node&&this.on_get_node(o.message,!0),n(o.message)}})})}setup_treenode_class(){let r=this;this.TreeNode=class{constructor({parent:t,label:e,parent_label:i,expandable:n,is_root:o,data:s}){$.extend(this,arguments[0]),this.loaded=0,this.expanded=0,this.parent_label&&(this.parent_node=r.nodes[this.parent_label]),r.nodes[this.label]=this,r.make_node_element(this),r.on_render&&r.on_render(this)}}}setup_root_node(){this.root_node=new this.TreeNode({parent:this.wrapper,label:this.label,parent_label:null,expandable:!0,is_root:!0,data:{value:this.root_value}}),this.expand_node(this.root_node,!1)}refresh(){this.selected_node.parent_node&&this.load_children(this.selected_node.parent_node,!0)}make_node_element(r){r.$tree_link=$('<span class="tree-link">').attr("data-label",r.label).data("node",r).appendTo(r.parent),r.$ul=$('<ul class="tree-children">').hide().appendTo(r.parent),this.make_icon_and_label(r),this.toolbar&&(r.$toolbar=this.get_toolbar(r).insertAfter(r.$tree_link))}add_node(r,t){var e=$('<li class="tree-node">');return new this.TreeNode({parent:e.appendTo(r.$ul),parent_label:r.label,label:t.value,title:t.title,expandable:t.expandable,data:t})}reload_node(r){return this.load_children(r)}toggle(){this.get_selected_node().toggle()}get_selected_node(){return this.selected_node}set_selected_node(r){this.selected_node=r}load_children(r,t=!1){let e=r.data.value,i=r.is_root;return t?frappe.run_serially([()=>this.get_all_nodes(e,i,r.label),n=>this.render_children_of_all_nodes(n),()=>this.set_selected_node(r)]):frappe.run_serially([()=>this.get_nodes(e,i),n=>this.render_node_children(r,n),()=>this.set_selected_node(r)])}render_children_of_all_nodes(r){r.map(t=>this.render_node_children(this.nodes[t.parent],t.data))}render_node_children(r,t){r.$ul.empty(),t&&$.each(t,(e,i)=>{var n=this.add_node(r,i);n.$tree_link.data("node-data",i).data("node",n)}),r.expanded=!1,r.loaded=!0,this.expand_node(r)}on_node_click(r){this.expand_node(r),frappe.dom.activate(this.wrapper,r.$tree_link,"tree-link"),r.$toolbar&&this.show_toolbar(r)}expand_node(r,t=!0){this.set_selected_node(r),t&&this.on_click&&this.on_click(r),r.expandable&&this.toggle_node(r),this.select_link(r),r.expanded=!r.expanded,r.parent.toggleClass("opened",r.expanded)}toggle_node(r){if(r.expandable&&this.get_nodes&&!r.loaded)return this.load_children(r);r.$ul&&(r.$ul.children().length&&r.$ul.toggle(!r.expanded),this.icon_set&&(r.expanded?r.$tree_link.find(".icon").parent().addClass("node-parent").html(this.icon_set.closed):r.$tree_link.find(".icon").parent().html(this.icon_set.open)))}select_link(r){this.wrapper.find(".selected").removeClass("selected"),r.$tree_link.toggleClass("selected")}show_toolbar(r){this.cur_toolbar&&$(this.cur_toolbar).hide(),this.cur_toolbar=r.$toolbar,r.$toolbar.show()}get_node_label(r){return this.get_label?this.get_label(r):r.title&&r.title!=r.label?__(r.title)+` <span class='text-muted'>(${r.label})</span>`:__(r.title||r.label)}make_icon_and_label(r){let t="";this.icon_set&&(r.expandable?t=`<span class="node-parent">${this.icon_set.closed}</span>`:t=`<span>${this.icon_set.leaf}</span>`),$(t).appendTo(r.$tree_link),$(`<a class="tree-label"> ${this.get_node_label(r)}</a>`).appendTo(r.$tree_link),r.$tree_link.on("click",()=>{setTimeout(()=>{this.on_node_click(r)},100)}),r.$tree_link.hover(function(){$(this).parent().addClass("hover-active")},function(){$(this).parent().removeClass("hover-active")})}get_toolbar(r){let t=$('<span class="tree-node-toolbar btn-group"></span>').hide();return Object.keys(this.toolbar).map(e=>{let i=this.toolbar[e];if(!!i.label&&!(i.condition&&!i.condition(r))){var n=i.get_label?i.get_label():i.label,o=$("<button class='btn btn-default btn-xs'></button>").html(n).addClass("tree-toolbar-button "+(i.btnClass||"")).appendTo(t);o.on("click",()=>{i.click(r)})}}),t}};frappe.provide("frappe.pages");frappe.provide("frappe.views");window.cur_page=null;frappe.views.Container=class{constructor(){this.container=$("#body").get(0),this.page=null,this.pagewidth=$(this.container).width(),this.pagemargin=50;var t=this;$(document).on("page-change",function(){var e=frappe.get_route_str();$("body").attr("data-route",e),$("body").attr("data-sidebar",t.has_sidebar()?1:0)}),$(document).bind("rename",function(e,i,n,o){frappe.breadcrumbs.rename(i,n,o)})}add_page(t){var e=$('<div class="content page-container"></div>').attr("id","page-"+t).attr("data-page-route",t).hide().appendTo(this.container).get(0);return e.label=t,frappe.pages[t]=e,e}change_to(t){cur_page=this;let e;if(t.tagName?e=t:e=frappe.pages[t],!e){console.log(__("Page not found")+": "+t);return}return window.cur_dialog&&cur_dialog.display&&!cur_dialog.keep_open&&(cur_dialog.minimizable?cur_dialog.is_minimized||cur_dialog.toggle_minimize():cur_dialog.hide()),this.page&&this.page!=e&&($(this.page).hide(),$(this.page).trigger("hide")),(!this.page||this.page!=e)&&(this.page=e,$(this.page).show()),$(document).trigger("page-change"),this.page._route=frappe.router.get_sub_path(),$(this.page).trigger("show"),!this.page.disable_scroll_to_top&&frappe.utils.scroll_to(0),frappe.breadcrumbs.update(),this.page}has_sidebar(){var t=0,e=frappe.get_route_str();if(t=frappe.ui.pages[e]&&!frappe.ui.pages[e].single_column,!t){var i=e.split("/").slice(0,2).join("/");t=$(`.page-container[data-page-route="${i}"] .layout-side-section`).length?1:0}return t}};frappe.breadcrumbs={all:{},preferred:{File:"",Dashboard:"Customization","Dashboard Chart":"Customization","Dashboard Chart Source":"Customization"},module_map:{Core:"Settings",Email:"Settings",Custom:"Settings",Workflow:"Settings",Printing:"Settings",Setup:"Settings",Automation:"Tools"},set_doctype_module(r,t){localStorage["preferred_breadcrumbs:"+r]=t},get_doctype_module(r){return localStorage["preferred_breadcrumbs:"+r]},add(r,t,e){let i;typeof r=="object"?i=r:i={module:r,doctype:t,type:e},this.all[frappe.breadcrumbs.current_page()]=i,this.update()},current_page(){return frappe.get_route_str()},update(){var r=this.all[frappe.breadcrumbs.current_page()];if(this.clear(),!r)return this.toggle(!1);if(r.type==="Custom")this.set_custom_breadcrumbs(r);else{this.set_workspace_breadcrumb(r);let t=frappe.get_route()[0];t=t?t.toLowerCase():null,r.doctype&&["print","form"].includes(t)?(this.set_list_breadcrumb(r),this.set_form_breadcrumb(r,t)):r.doctype&&t==="list"?this.set_list_breadcrumb(r):r.doctype&&t=="dashboard-view"&&(this.set_list_breadcrumb(r),this.set_dashboard_breadcrumb(r))}this.toggle(!0)},set_custom_breadcrumbs(r){this.append_breadcrumb_element(r.route,r.label)},append_breadcrumb_element(r,t){let e=document.createElement("li"),i=document.createElement("a");i.href=r,i.innerText=t,e.appendChild(i),this.$breadcrumbs.append(e)},get last_route(){return frappe.route_history.slice(-2)[0]},set_workspace_breadcrumb(r){r.workspace||this.set_workspace(r),r.workspace&&(r.module_info&&(r.module_info.blocked||!frappe.visible_modules.includes(r.module_info.module))||this.append_breadcrumb_element(`/app/${frappe.router.slug(r.workspace)}`,__(r.workspace)))},set_workspace(r){var e,i;this.setup_modules();var t=this.get_doctype_module(r.doctype);if(t?r.module=t:this.preferred[r.doctype]!==void 0&&(r.module=this.preferred[r.doctype]),((e=this.last_route)==null?void 0:e[0])=="Workspaces"){let n=this.last_route[1];if(r.module&&((i=frappe.boot.module_wise_workspaces[r.module])==null?void 0:i.includes(n))){r.workspace=n;return}}r.module&&(this.module_map[r.module]&&(r.module=this.module_map[r.module]),r.module_info=frappe.get_module(r.module),r.module_info&&frappe.boot.module_wise_workspaces[r.module]&&(r.workspace=frappe.boot.module_wise_workspaces[r.module][0]))},set_list_breadcrumb(r){let t=r.doctype,e=frappe.get_doc("DocType",t);if(!(t==="User"&&!frappe.user.has_role("System Manager")||(e==null?void 0:e.issingle))){let i,n=frappe.router.slug(frappe.router.doctype_layout||t);if(e!=null&&e.is_tree){let o=frappe.model.user_settings[t].last_view||"Tree";i=`${n}/view/${o}`}else i=n;this.append_breadcrumb_element(`/app/${i}`,__(t))}},set_form_breadcrumb(r,t){let e=r.doctype,i=frappe.get_route().slice(2).join("/"),n=i;i.startsWith("new-"+e.toLowerCase().replace(/ /g,"-"))&&(n=n.slice(0,-10).replace(/-/g," ").replace(/\b\w/g,s=>s.toUpperCase()));let o=`/app/${frappe.router.slug(e)}/${n}`;if(this.append_breadcrumb_element(o,__(n)),t==="form"){let s=this.$breadcrumbs.find("li").last();s.addClass("disabled"),s.css("cursor","copy"),s.click(a=>{a.stopImmediatePropagation(),frappe.utils.copy_to_clipboard(s.text())})}},set_dashboard_breadcrumb(r){let t=r.doctype,e=frappe.get_route()[1],i=`/app/${frappe.router.slug(t)}/${e}`;$(`<li><a href="${i}">${__(e)}</a></li>`).appendTo(this.$breadcrumbs)},setup_modules(){frappe.visible_modules||(frappe.visible_modules=$.map(frappe.boot.allowed_workspaces,r=>r.module))},rename(r,t,e){var i=["Form",r,t].join("/"),n=["Form",r,e].join("/");this.all[n]=this.all[i],delete frappe.breadcrumbs.all[i],this.update()},clear(){this.$breadcrumbs=$("#navbar-breadcrumbs").empty()},toggle(r){r?$("body").addClass("no-breadcrumbs"):$("body").removeClass("no-breadcrumbs")}};frappe.provide("frappe.pages");frappe.provide("frappe.views");frappe.views.Factory=class{constructor(t){$.extend(this,t)}show(){this.route=frappe.get_route(),this.page_name=frappe.get_route_str(),!(this.before_show&&this.before_show()===!1)&&(frappe.pages[this.page_name]?(frappe.container.change_to(this.page_name),this.on_show&&this.on_show()):this.route[1]?this.make(this.route):frappe.show_not_found(this.route))}make_page(t,e){return frappe.make_page(t,e)}};frappe.make_page=function(r,t){t||(t=frappe.get_route_str());let e=frappe.container.add_page(t);return frappe.ui.make_app_page({parent:e,single_column:!r}),frappe.container.change_to(t),e};frappe.provide("frappe.views.pageview");frappe.provide("frappe.standard_pages");frappe.views.pageview={with_page:function(r,t){if(frappe.standard_pages[r]){frappe.pages[r]||frappe.standard_pages[r](),t();return}if(locals.Page&&locals.Page[r]&&locals.Page[r].script||r==window.page_name)t();else if(localStorage["_page:"+r]&&frappe.boot.developer_mode!=1)frappe.model.sync(JSON.parse(localStorage["_page:"+r])),t();else if(r)return frappe.call({method:"frappe.desk.desk_page.getpage",args:{name:r},callback:function(e){e.docs._dynamic_page||(localStorage["_page:"+r]=JSON.stringify(e.docs)),t()},freeze:!0})},show:function(r){r||(r=frappe.boot?frappe.boot.home_page:window.page_name),frappe.model.with_doctype("Page",function(){frappe.views.pageview.with_page(r,function(t){t&&t.exc?t[403]||frappe.show_not_found(r):frappe.pages[r]||new frappe.views.Page(r),frappe.container.change_to(r)})})}};frappe.views.Page=class{constructor(t){this.name=t;var e=this;if(t==window.page_name)this.wrapper=document.getElementById("page-"+t),this.wrapper.label=document.title||window.page_name,this.wrapper.page_name=window.page_name,frappe.pages[window.page_name]=this.wrapper;else{if(this.pagedoc=locals.Page[this.name],!this.pagedoc){frappe.show_not_found(t);return}this.wrapper=frappe.container.add_page(this.name),this.wrapper.page_name=this.pagedoc.name,this.pagedoc.content&&(this.wrapper.innerHTML=this.pagedoc.content),frappe.dom.eval(this.pagedoc.__script||this.pagedoc.script||""),frappe.dom.set_style(this.pagedoc.style||""),frappe.breadcrumbs.add(this.pagedoc.module||null)}this.trigger_page_event("on_page_load"),$(this.wrapper).on("show",function(){window.cur_frm=null,e.trigger_page_event("on_page_show"),e.trigger_page_event("refresh")})}trigger_page_event(t){var e=this;e.wrapper[t]&&e.wrapper[t](e.wrapper)}};frappe.show_not_found=function(r){frappe.show_message_page({page_name:r,message:__("Sorry! I could not find what you were looking for."),img:"/assets/frappe/images/ui/bubble-tea-sorry.svg"})};frappe.show_not_permitted=function(r){frappe.show_message_page({page_name:r,message:__("Sorry! You are not permitted to view this page."),img:"/assets/frappe/images/ui/bubble-tea-sorry.svg"})};frappe.show_message_page=function(r){r.page_name||(r.page_name=frappe.get_route_str()),r.icon?r.img=repl('<span class="%(icon)s message-page-icon"></span> ',r):r.img&&(r.img=repl('<img src="%(img)s" class="message-page-image">',r));var t=frappe.pages[r.page_name]||frappe.container.add_page(r.page_name);$(t).html(repl('<div class="page message-page">			<div class="text-center message-page-content">				%(img)s				<p class="lead">%(message)s</p>				<a class="btn btn-default btn-sm btn-home" href="/app">%(home)s</a>			</div>		</div>',{img:r.img||"",message:r.message||"",home:__("Home")})),frappe.container.change_to(r.page_name)};var jE=Gt(Gd());frappe.provide("frappe.search");frappe.ui.Notifications=class{constructor(){this.tabs={},this.notification_settings=frappe.boot.notification_settings,this.make()}make(){this.dropdown=$(".navbar").find(".dropdown-notifications").removeClass("hidden"),this.dropdown_list=this.dropdown.find(".notifications-list"),this.header_items=this.dropdown_list.find(".header-items"),this.header_actions=this.dropdown_list.find(".header-actions"),this.body=this.dropdown_list.find(".notification-list-body"),this.panel_events=this.dropdown_list.find(".panel-events"),this.panel_notifications=this.dropdown_list.find(".panel-notifications"),this.user=frappe.session.user,this.setup_headers(),this.setup_dropdown_events()}setup_headers(){$(`<span class="notification-settings pull-right" data-action="go_to_settings">
			${frappe.utils.icon("setting-gear")}
		</span>`).on("click",i=>{i.stopImmediatePropagation(),this.dropdown.dropdown("hide"),frappe.set_route("Form","Notification Settings",frappe.session.user)}).appendTo(this.header_actions).attr("title",__("Notification Settings")).tooltip({delay:{show:600,hide:100},trigger:"hover"}),$(`<span class="mark-all-read pull-right" data-action="mark_all_as_read">
			${frappe.utils.icon("mark-as-read")}
		</span>`).on("click",i=>this.mark_all_as_read(i)).appendTo(this.header_actions).attr("title",__("Mark all as read")).tooltip({delay:{show:600,hide:100},trigger:"hover"}),this.categories=[{label:__("Notifications"),id:"notifications",view:Qo,el:this.panel_notifications},{label:__("Today's Events"),id:"todays_events",view:es,el:this.panel_events}];let t=i=>`<li class="notifications-category ${i.id=="notifications"?"active":""}"
   					id="${i.id}"
   					data-toggle="collapse"
   				>${i.label}</li>`,e=$('<ul class="notification-item-tabs nav nav-tabs" role="tablist"></ul>');this.categories=this.categories.map(i=>(i.$tab=$(t(i)),i.$tab.on("click",n=>{n.stopImmediatePropagation(),this.switch_tab(i)}),e.append(i.$tab),i)),e.appendTo(this.header_items),this.categories.forEach(i=>{this.make_tab_view(i)}),this.switch_tab(this.categories[0])}switch_tab(t){this.categories.forEach(e=>{e.$tab.removeClass("active")}),t.$tab.addClass("active"),Object.keys(this.tabs).forEach(e=>this.tabs[e].hide()),this.tabs[t.id].show()}make_tab_view(t){let e=new t.view(t.el,this.dropdown,this.notification_settings);this.tabs[t.id]=e}mark_all_as_read(t){t.stopImmediatePropagation(),this.dropdown_list.find(".unread").removeClass("unread"),frappe.call("frappe.desk.doctype.notification_log.notification_log.mark_all_as_read")}setup_dropdown_events(){this.dropdown.on("hide.bs.dropdown",t=>{let e=$(t.currentTarget).data("closable");return $(t.currentTarget).data("closable",!0),e}),this.dropdown.on("click",t=>{$(t.currentTarget).data("closable",!0)})}};frappe.ui.notifications={get_notification_config(){return frappe.xcall("frappe.desk.notifications.get_notification_info").then(r=>(frappe.ui.notifications.config=r,r))},show_open_count_list(r){frappe.ui.notifications.config?this.route_to_list_with_filters(r):this.get_notification_config().then(()=>{this.route_to_list_with_filters(r)})},route_to_list_with_filters(r){let t=frappe.ui.notifications.config.conditions[r];t&&$.isPlainObject(t)&&(frappe.route_options||(frappe.route_options={}),$.extend(frappe.route_options,t)),frappe.set_route("List",r)}};var Un=class{constructor(t,e,i){this.wrapper=t,this.parent=e,this.settings=i,this.max_length=20,this.container=$("<div></div>").appendTo(this.wrapper),this.make()}show(){this.container.show()}hide(){this.container.hide()}},Qo=class extends Un{make(){this.notifications_icon=this.parent.find(".notifications-icon"),this.notifications_icon.attr("title",__("Notifications")).tooltip({delay:{show:600,hide:100},trigger:"hover"}),this.setup_notification_listeners(),this.get_notifications_list(this.max_length).then(t=>{!t.message||(this.dropdown_items=t.message.notification_logs,frappe.update_user_info(t.message.user_info),this.render_notifications_dropdown(),this.settings.seen==0&&this.dropdown_items.length>0&&this.toggle_notification_icon(!1))})}update_dropdown(){this.get_notifications_list(1).then(t=>{if(!t.message)return;let e=t.message.notification_logs[0];frappe.update_user_info(t.message.user_info),this.dropdown_items.unshift(e),this.dropdown_items.length>this.max_length&&(this.container.find(".recent-notification").last().remove(),this.dropdown_items.pop()),this.insert_into_dropdown()})}change_activity_status(){this.container.find(".activity-status")&&this.container.find(".activity-status").replaceWith(`<a class="recent-item text-center text-muted"
					href="/app/List/Notification Log">
					<div class="full-log-btn">${__("View Full Log")}</div>
				</a>`)}mark_as_read(t,e){frappe.call("frappe.desk.doctype.notification_log.notification_log.mark_as_read",{docname:t}).then(()=>{e.removeClass("unread")})}insert_into_dropdown(){let t=this.dropdown_items[0],e=this.get_dropdown_item_html(t);$(e).prependTo(this.container),this.change_activity_status()}get_dropdown_item_html(t){let e=this.get_item_link(t),i=t.read?"":"unread",n=t.subject,o=n.match(/<b class="subject-title">(.*?)<\/b>/);n=o?n.replace(o[1],frappe.ellipsis(strip_html(o[1]),100)):n;let s=frappe.datetime.comment_when(t.creation),a=`<div class="message">
			<div>${n}</div>
			<div class="notification-timestamp text-muted">
				${s}
			</div>
		</div>`,l=t.from_user,u=frappe.avatar(l,"avatar-medium user-avatar"),d=$(`<a class="recent-item notification-item ${i}"
				href="${e}"
				data-name="${t.name}"
			>
				<div class="notification-body">
					${u}
					${a}
				</div>
				<div class="mark-as-read" title="${__("Mark as Read")}">
				</div>
			</a>`);if(!t.read){let p=d.find(".mark-as-read");p.tooltip({delay:{show:600,hide:100},trigger:"hover"}),p.on("click",g=>{g.preventDefault(),g.stopImmediatePropagation(),this.mark_as_read(t.name,d)})}return d.on("click",()=>{!t.read&&this.mark_as_read(t.name,d),this.notifications_icon.trigger("click")}),d}render_notifications_dropdown(){this.settings&&!this.settings.enabled?this.container.html(`<li class="recent-item notification-item">
				<span class="text-muted">
					${__("Notifications Disabled")}
				</span></li>`):this.dropdown_items.length?(this.container.empty(),this.dropdown_items.forEach(t=>{this.container.append(this.get_dropdown_item_html(t))}),this.container.append(`<a class="list-footer"
					href="/app/List/Notification Log">
						<div class="full-log-btn">${__("See all Activity")}</div>
					</a>`)):this.container.append($(`<div class="notification-null-state">
					<div class="text-center">
						<img src="/assets/frappe/images/ui-states/notification-empty-state.svg" alt="Generic Empty State" class="null-state">
						<div class="title">${__("No New notifications")}</div>
						<div class="subtitle">
							${__("Looks like you haven\u2019t received any notifications.")}
					</div></div></div>`))}get_notifications_list(t){return frappe.call("frappe.desk.doctype.notification_log.notification_log.get_notification_logs",{limit:t})}get_item_link(t){if(t.link)return t.link;let e=t.document_type?t.document_type:"Notification Log",i=t.document_name?t.document_name:t.name;return frappe.utils.get_form_link(e,i)}toggle_notification_icon(t){this.notifications_icon.find(".notifications-seen").toggle(t),this.notifications_icon.find(".notifications-unseen").toggle(!t)}toggle_seen(t){frappe.call("frappe.desk.doctype.notification_settings.notification_settings.set_seen_value",{value:cint(t),user:frappe.session.user})}setup_notification_listeners(){frappe.realtime.on("notification",()=>{this.toggle_notification_icon(!1),this.update_dropdown()}),frappe.realtime.on("indicator_hide",()=>{this.toggle_notification_icon(!0)}),this.parent.on("show.bs.dropdown",()=>{this.toggle_seen(!0),this.notifications_icon.find(".notifications-unseen").is(":visible")&&(this.toggle_notification_icon(!0),frappe.call("frappe.desk.doctype.notification_log.notification_log.trigger_indicator_hide"))})}},es=class extends Un{make(){let t=frappe.datetime.get_today();frappe.xcall("frappe.desk.doctype.event.event.get_events",{start:t,end:t}).then(e=>{this.render_events_html(e)})}render_events_html(t){let e="";if(t.length){let i=n=>{let o=__("All Day");if(!n.all_day){let l=frappe.datetime.get_time(n.starts_on),u=frappe.datetime.get_day_diff(n.ends_on,n.starts_on),d=frappe.datetime.get_time(n.ends_on);u>1&&(d=__("Rest of the day")),o=`${l} - ${d}`}let s="";n.particpants&&(s=frappe.avatar_group(n.particpants,3));let a="";return n.location&&(a=`, ${n.location}`),`<a class="recent-item event" href="/app/event/${n.name}">
					<div class="event-border" style="border-color: ${n.color}"></div>
					<div class="event-item">
						<div class="event-subject">${n.subject}</div>
						<div class="event-time">${o}${a}</div>
						${s}
					</div>
				</a>`};e=t.map(i).join("")}else e=`
				<div class="notification-null-state">
					<div class="text-center">
					<img src="/assets/frappe/images/ui-states/event-empty-state.svg" alt="Generic Empty State" class="null-state">
					<div class="title">${__("No Upcoming Events")}</div>
					<div class="subtitle">
						${__("There are no upcoming events for you.")}
				</div></div></div>
			`;this.container.html(e)}};frappe.provide("frappe.search");frappe.search.SearchDialog=class{constructor(r){$.extend(this,r),this.make()}make(){this.search_dialog=new frappe.ui.Dialog({minimizable:!0,size:"large"}),this.set_header(),this.$wrapper=$(this.search_dialog.$wrapper).addClass("search-dialog"),this.$body=$(this.search_dialog.body),this.$input=this.$wrapper.find(".search-input"),this.setup()}set_header(){this.search_dialog.header.addClass("search-header").find(".title-section").html(`<div class="input-group text-muted">
					<input type="text" class="form-control search-input">
				</div>
				<span class="search-icon">
					${frappe.utils.icon("search")}
				</span>`)}setup(){this.modal_state=0,this.current_keyword="",this.more_count=20,this.full_lists={},this.nav_lists={},this.init_search_objects(),this.bind_input(),this.bind_events()}init_search_objects(){this.searches={global_search:{input_placeholder:__("Search"),empty_state_text:__("Search for anything"),no_results_status:()=>__("No Results found"),get_results:(r,t)=>{let e=0,i=100,n=frappe.search.utils.get_nav_results(r);frappe.search.utils.get_global_results(r,e,i).then(o=>{n=n.concat(o),t(n,r)},o=>{console.error(o)})}},tags:{input_placeholder:__("Search"),empty_state_text:__("Search for anything"),no_results_status:r=>"<div>"+__("No documents found tagged with {0}",[r])+"</div>",get_results:(r,t)=>{var e=frappe.search.utils.get_nav_results(r);frappe.tags.utils.get_tag_results(r).then(i=>{e=e.concat(i),t(e,r)},i=>{console.error(i)})}}}}update(r){this.$wrapper.find(".loading-state").addClass("hide"),this.$body.append(r),this.$body.find(".search-results").length>1?(this.$body.find(".search-results").first().addClass("hide"),r.removeClass("hide"),this.$body.find(".search-results").first().remove()):r.removeClass("hide")}put_placeholder(r){var t=$(`<div class="row search-results hide">
			<div class="empty-state">
				<div class="text-center">
					<img src="/assets/frappe/images/ui-states/search-empty-state.svg"
						alt="Generic Empty State"
						class="null-state"
					>
					<div class="empty-state-text">${r}</div>
				</div>
			</div>
		</div>`);this.update(t)}bind_input(){this.$input.on("input",r=>{let t=$(r.currentTarget);clearTimeout(t.data("timeout")),t.data("timeout",setTimeout(()=>{if(this.$input.val()===this.current_keyword)return;let e=this.$input.val();e.length>1?this.get_results(e):(this.current_keyword="",this.put_placeholder(this.search.empty_state_text))},300))})}bind_events(){this.$body.on("click",".list-link",r=>{let t=$(r.currentTarget);this.$body.find(".search-sidebar").find(".list-link").removeClass("active selected"),t.addClass("active selected");let e=t.attr("data-category");this.$body.find(".results-area").empty().html(this.full_lists[e]),this.$body.find(".module-section-link").first().focus()}),this.$body.on("click",".section-more",r=>{let e=$(r.currentTarget).attr("data-category");this.$body.find(".search-sidebar").find('*[data-category="'+e+'"]').trigger("click")}),this.$body.on("click",".all-results-link",()=>{this.$body.find(".search-sidebar").find('*[data-category="All Results"]').trigger("click")}),this.$body.on("click",".list-more",r=>{let t=$(r.currentTarget),e=t.attr("data-category"),i=t.attr("data-search");var n=this.$body.find(".result").length;if(i==="Global")frappe.search.utils.get_global_results(this.current_keyword,n,this.more_count,e).then(o=>{o.length&&this.add_more_results(o)},o=>{console.error(o)});else{let o=this.nav_lists[e].slice(0,this.more_count);this.nav_lists[e].splice(0,this.more_count),this.add_more_results([{title:e,results:o}])}}),this.$body.on("click",".switch-to-global-search",()=>{this.search=this.searches.global_search,this.$input.attr("placeholder",this.search.input_placeholder),this.put_placeholder(this.search.empty_state_text),this.get_results(this.current_keyword)})}init_search(r,t){this.search=this.searches[t],this.$input.attr("placeholder",this.search.input_placeholder),this.put_placeholder(this.search.empty_state_text),this.get_results(r),this.search_dialog.show(),this.$input.val(r),setTimeout(()=>this.$input.select(),500)}get_results(r){this.current_keyword=r,this.$body.find(".empty-state").length>0?this.put_placeholder(__("Searching ...")):this.$wrapper.find(".loading-state").removeClass("hide"),this.current_keyword.charAt(0)==="#"?this.search=this.searches.tags:this.search=this.searches.global_search,this.search.get_results(r,this.parse_results.bind(this))}parse_results(r,t){r=r.filter(function(e){return e.results.length>0}),r.length>0?this.render_data(r):this.put_placeholder(this.search.no_results_status(t))}render_data(r){let t=$(frappe.render_template("search")).addClass("hide"),e=t.find(".search-sidebar").empty(),i='<li class="search-sidebar-item standard-sidebar-item list-link" data-category="{0}"><a><span class="ellipsis">{1}</span></a></li>';this.modal_state=0,this.full_lists={"All Results":$('<div class="results-summary"></div>')},this.nav_lists={},r.forEach(n=>{e.append($(__(i,[n.title,__(n.title)]))),this.add_section_to_summary(n.title,n.results),this.full_lists[n.title]=this.render_full_list(n.title,n.results,n.fetch_type)}),r.length>1&&e.prepend($(__(i,["All Results",__("All Results")]))),this.update(t.clone()),this.$body.find(".list-link").first().trigger("click")}render_full_list(r,t,e){let i=20,n=$(`<div class="results-summary">
			<div class="result-section full-list ${r}-section col-sm-12">
				<div class="result-title"> ${__(r)}</div>
				<div class="result-body">
				</div>
			</div>
		</div>`);return t.slice(0,i).forEach(o=>{n.find(".result-body").append(this.render_result(r,o))}),t.length>0&&(e==="Nav"&&(this.nav_lists[r]=t),t.length>i&&$(`<a class="list-more" data-search="${e}"
					data-category="${r}" data-count="${i}">
						${__("More")}
				</a>`).appendTo(n.find(".result-body"))),n}add_section_to_summary(r,t){let e=4,i="",n=s=>this.render_result(r,s);t.length>e&&(i=`<div>
				<a class="section-more" data-category="${r}">${__("More")}</a>
			</div>`),$(`<div class="col-sm-12 result-section" data-type="${r}">
			<div class="result-title">${__(r)}</div>
			<div class="result-body">
				${i}
			</div>
		</div>`).appendTo(this.full_lists["All Results"]).find(".result-body").prepend(t.slice(0,e).map(n))}get_link(r){let t="";return r.route?t=`href="${frappe.router.make_url(r.route)}"`:r.data_path&&(t=`data-path=${r.data_path}"`),t}render_result(r,t){let e="";if(t.image!==void 0){let a=frappe.get_avatar("avatar-medium",t.label,t.image);e=`<a ${this.get_link(t)}>
				<div class="result-image">
					${a}
				</div>
			</a>`}let i=`<a ${this.get_link(t)} class="result-section-link">${t.label}</a>`,o=`<div class="result-text">
			${t.description?`<b>${i}</b><div class="description"> ${t.description} </div>`:i}
		</div>`,s=$(`<div class="result ${r}-result">
			${e}
			${o}
			${t.subtypes||""}
		</div>`);return t.description||this.handle_result_click(t,s),s}handle_result_click(r,t){r.route_options&&(frappe.route_options=r.route_options),t.on("click",()=>{if(r.onclick)r.onclick(r.match);else{var e=window.location.hash;frappe.set_route(r.route),window.location.hash==e&&frappe.router.route()}})}add_more_results(r){let t=$('<div class="more-results last"></div>');if(r[0].results&&r[0].results.forEach(e=>{t.append(this.render_result(r[0].title,e))}),this.$body.find(".list-more").before(t),r[0].results.length<this.more_count){this.$body.find(".list-more").hide();let e=this.$body.find(".result").length,i=$('<div class="results-status">'+e+" results found</div>");this.$body.find(".more-results:last").append(i)}this.$body.find(".more-results.last").slideDown(200,function(){})}};frappe.provide("frappe.tags");frappe.tags.utils={get_tags:function(r){r=r.slice(1);let t=[];if(!frappe.tags.tags)return frappe.tags.utils.fetch_tags(),[];for(let e in frappe.tags.tags){let i=frappe.tags.tags[e],n=frappe.search.utils.fuzzy_search(r,i);n&&t.push({type:"Tag",label:__("#{0}",[frappe.search.utils.bolden_match_part(__(i),r)]),value:__("#{0}",[__(i)]),index:1+n,match:i,onclick(){frappe.searchdialog.search.init_search("#".concat(i),"tags")}})}return t},fetch_tags(){frappe.call({method:"frappe.desk.doctype.tag.tag.get_tags_list_for_awesomebar",callback:function(r){r&&r.message&&(frappe.tags.tags=$.extend([],r.message))}})},get_tag_results:function(r){function t(e){var i=[],n,o;function s(l){return i.find(function(u){return u.title===l})}function a(l){var u=110,d=null;if(l.length>u)d=l.slice(0,u)+"...";else{var p=l.length;d=l.slice(0,p)+"..."}return d}return e.forEach(function(l){var u="";l.content&&(u=a(l.content)),n={label:l.name,value:l.name,description:u,route:["Form",l.doctype,l.name]},o=s(l.doctype),o?o.results.push(n):(o={title:l.doctype,results:[n],fetch_type:"Global"},i.push(o))}),i}return new Promise(function(e){frappe.call({method:"frappe.desk.doctype.tag.tag.get_documents_for_tag",args:{tag:r},callback:function(i){i.message?e(t(i.message)):e([])}})})}};frappe.templates.search=`<div class="search-results flex">
	<div class="col-md-3 col-sm-3 hidden-xs layout-side-section">
		<ul class="overlay-sidebar list-unstyled search-sidebar"></ul>
	</div>
	<div class="col-md-9 col-sm-9 layout-main-section results-area">

	</div>
</div>
`;function ts(r,t){return Kd(r,t,0,0,null,[],256,0,0,10)}function Kd(r,t,e,i,n,o,s,a,l,u){let d=0;if(++l>=u)return[!1,d,o];if(e===r.length||i===t.length)return[!1,d,o];let p=!1,g=[],m=0,k=!0;for(;e<r.length&&i<t.length;){if(r[e].toLowerCase()===t[i].toLowerCase()){if(a>=s)return[!1,d,o];k&&n&&(o=[...n],k=!1);let[v,x,C]=Kd(r,t,e,i+1,o,[],s,a,l,u);v&&((!p||x>m)&&(g=[...C],m=x),p=!0),o[a++]=i,++e}++i}let y=e===r.length;if(y){d=100;let v=-5*o[0];v=v<-15?-15:v,d+=v;let x=t.length-a;d+=-1*x;for(let C=0;C<a;C++){let c=o[C];if(C>0){let _=o[C-1];c==_+1&&(d+=25)}if(c>0){let _=t[c-1],h=t[c];_!==_.toUpperCase()&&h!==h.toLowerCase()&&(d+=30),(_=="_"||_==" ")&&(d+=30)}else d+=15}return p&&(!y||m>d)?(o=[...g],d=m,[!0,d,o]):y?[!0,d,o]:[!1,d,o]}return[!1,d,o]}frappe.provide("frappe.search");frappe.search.utils={setup_recent:function(){this.recent=JSON.parse(frappe.boot.user.recent||"[]")||[]},get_recent_pages:function(r){r===null&&(r="");var t=this,e=[],i=[];function n(o,s,a){o.forEach(function(l,u){var d=$.isArray(l)?l[0]:l;if(d=__(d||"").toLowerCase().replace(/-/g," "),s===d||d.indexOf(s)!==-1){var p=a(l);p&&($.isPlainObject(p)&&(p=[p]),p.forEach(function(g){g.match=l,g.recent=!0}),i=p.concat(i))}})}return t.recent.forEach(function(o,s){e.push([o[1],["Form",o[0],o[1]]])}),e=e.reverse(),frappe.route_history.forEach(function(o,s){o[0]==="Form"?e.push([o[2],o]):["List","Tree","Workspaces","query-report"].includes(o[0])||o[2]==="Report"?o[1]&&e.push([o[1],o]):o[0]&&e.push([frappe.route_titles[o.join("/")]||o[0],o])}),n(e,r,function(o){let s=o[1],a={route:s};if(s[0]==="Form"){let l=s[1];if(s.length>2&&l!==s[2]){let u=s[2];a.label=__(l)+" "+u.bold(),a.value=__(l)+" "+u}else a.label=__(l).bold(),a.value=__(l)}else if(["List","Tree","Workspaces","query-report"].includes(s[0])&&s.length>1){let l=s[0],u=s[1];switch(l){case"List":a.label=__("{0} List",[__(u).bold()]),a.value=__("{0} List",[__(u)]);break;case"Tree":a.label=__("{0} Tree",[__(u).bold()]),a.value=__("{0} Tree",[__(u)]);break;case"Workspaces":a.label=__("{0} Workspace",[__(u).bold()]),a.value=__("{0} Workspace",[__(u)]);break;case"query-report":a.label=__("{0} Report",[__(u).bold()]),a.value=__("{0} Report",[__(u)]);break}}else o[0]?(a.label=o[0].bold(),a.value=o[0]):console.log("Illegal match",o);return a.index=80,a}),i},get_frequent_links(){let r=[];return frappe.boot.frequently_visited_links.forEach(t=>{let e=frappe.utils.get_route_label(t.route);r.push({route:t.route,label:e,value:e,index:t.count})}),r.length?r:this.get_recent_pages("")},get_search_in_list:function(r){var t=this,e=[];if(r.split(" ").includes("in")&&r.slice(-2)!=="in"){var i=r.split(" in ");frappe.boot.user.can_read.forEach(function(n){if(frappe.boot.user.can_search.includes(n)){let o=t.fuzzy_search(i[1],n,!0);o.score&&e.push({type:"In List",label:__("Find {0} in {1}",[__(i[0]),o.marked_string]),value:__("Find {0} in {1}",[__(i[0]),__(n)]),route_options:{name:["like","%"+i[0]+"%"]},index:1+o.score,route:["List",n]})}})}return e},get_creatables:function(r){var t=this,e=[],i=r.split(" ")[0];return i.toLowerCase()===__("new")&&frappe.boot.user.can_create.forEach(function(n){let o=t.fuzzy_search(r.substr(4),n,!0);var s=o.score;s&&e.push({type:"New",label:__("New {0}",[o.marked_string||__(n)]),value:__("New {0}",[__(n)]),index:1+s,match:n,onclick:function(){frappe.new_doc(n,!0)}})}),e},get_doctypes:function(r){var t=this,e=[],i,n,o,s=function(a,l,u){let d=a==="List"&&o.endsWith("List");if(d)var p=n||__(o);else p=__(`{0} ${d?"":a}`,[n||__(o)]);return{type:a,label:p,value:__(`{0} ${a}`,[o]),index:i+u,match:o,route:l}};return frappe.boot.user.can_read.forEach(function(a){let l=t.fuzzy_search(r,a,!0);if({score:i,marked_string:n}=l,i){if(o=a,frappe.boot.single_types.includes(a))e.push(s("",["Form",a,a],.05));else if(frappe.boot.user.can_search.includes(a)){if(frappe.boot.user.can_create.includes(a)){var u=a;e.push({type:"New",label:__("New {0}",[l.marked_string||__(a)]),value:__("New {0}",[__(a)]),index:i+.015,match:a,onclick:function(){frappe.new_doc(u,!0)}})}e.push(s("List",["List",a],.05)),frappe.model.can_get_report(a)&&e.push(s("Report",["List",a,"Report"],.04))}}}),e},get_reports:function(r){var t=this,e=[],i;return Object.keys(frappe.boot.user.all_reports).forEach(function(n){let o=t.fuzzy_search(r,n,!0);var s=o.score;if(s>0){var a=frappe.boot.user.all_reports[n];a.report_type=="Report Builder"?i=["List",a.ref_doctype,"Report",n]:i=["query-report",n],e.push({type:"Report",label:__("Report {0}",[o.marked_string||__(n)]),value:__("Report {0}",[__(n)]),index:s,route:i})}}),e},get_pages:function(r){var t=this,e=[];this.pages={},$.each(frappe.boot.page_info,function(n,o){t.pages[o.title]=o,o.name=n}),Object.keys(this.pages).forEach(function(n){if(n=="Hub"||n=="hub")return;let o=t.fuzzy_search(r,n,!0);var s=o.score;if(s){var a=t.pages[n];e.push({type:"Page",label:__("Open {0}",[o.marked_string||__(n)]),value:__("Open {0}",[__(n)]),match:n,index:s,route:[a.route||a.name]})}});var i="Calendar";return __("calendar").indexOf(r.toLowerCase())===0&&e.push({type:"Calendar",value:__("Open {0}",[__(i)]),index:t.fuzzy_search(r,"Calendar"),match:i,route:["List","Event",i]}),i="Hub",__("hub").indexOf(r.toLowerCase())===0&&e.push({type:"Hub",value:__("Open {0}",[__(i)]),index:t.fuzzy_search(r,"Hub"),match:i,route:[i,"Item"]}),__("email inbox").indexOf(r.toLowerCase())===0&&e.push({type:"Inbox",value:__("Open {0}",[__("Email Inbox")]),index:t.fuzzy_search(r,"email inbox"),match:i,route:["List","Communication","Inbox"]}),e},get_workspaces:function(r){var t=this,e=[];return frappe.boot.allowed_workspaces.forEach(function(i){let n=t.fuzzy_search(r,i.name,!0);var o=n.score;if(o>0){var s={type:"Workspace",label:__("Open {0}",[n.marked_string||__(i.name)]),value:__("Open {0}",[__(i.name)]),index:o,route:[frappe.router.slug(i.name)]};e.push(s)}}),e},get_dashboards:function(r){var t=this,e=[];return frappe.boot.dashboards.forEach(function(i){let n=t.fuzzy_search(r,i.name,!0);var o=n.score;if(o>0){var s={type:"Dashboard",label:__("{0} Dashboard",[n.marked_string||__(i.name)]),value:__("{0} Dashboard",[__(i.name)]),index:o,route:["dashboard-view",i.name]};e.push(s)}}),e},get_global_results:function(r,t,e,i=""){var n=this;function o(s){var a=[],l,u;function d(g){return a.find(function(m){return m.title===g})}function p(g,m){for(var k=g.split(" ||| "),y=300,v=120,x=[],C=0,c="",_=0;_<k.length;_++){var h=k[_];if(h.toLowerCase().indexOf(r)!==-1){let S,O;if(h.indexOf(" &&& ")!==-1?(S=h.indexOf(" &&& "),O=h.slice(S+5)):(S=h.indexOf(" : "),O=h.slice(S+3)),O.length>v){var b="",M=O.indexOf(r);b+=M<v/2?O.slice(0,M):"..."+O.slice(M-v/2,M),b+=O.slice(M,M+v/2),b+=M+v/2<O.length?"...":"",O=b}var E=h.slice(0,S),w=y-C;C+=E.length+O.length+2;let B=n.fuzzy_search(r,E,!0),A=n.fuzzy_search(r,O,!0);if(C<y)c='<span class="field-name text-muted">'+B.marked_string+": </span> "+A.marked_string,x.indexOf(c)===-1&&m!==O&&x.push(c);else{E.length<w?(w-=E.length,c='<span class="field-name text-muted">'+B.marked_string+": </span> ",O=O.slice(0,w),O=O.slice(0,O.lastIndexOf(" "))+" ...",c+=A.marked_string,x.push(c)):x.push("...");break}}}return x.join(", ")}return s.forEach(function(g){l={label:g.name,value:g.name,description:p(g.content,g.name),route:["Form",g.doctype,g.name]},(g.image||g.image===null)&&(l.image=g.image),u=d(g.doctype),u?u.results.push(l):(u={title:g.doctype,results:[l],fetch_type:"Global"},a.push(u))}),a}return new Promise(function(s,a){frappe.call({method:"frappe.utils.global_search.search",args:{text:r,start:t,limit:e,doctype:i},callback:function(l){l.message?s(o(l.message)):s([])}})})},get_nav_results:function(r){function t(s){var a=[],l=[];return s.forEach(function(u){if(u.route){u.route[0]==="List"&&u.route[2]&&u.route.splice(2);var d=u.route.join("/");if(a.indexOf(d)===-1)a.push(d),l.push(u);else{var p=a.indexOf(d);l[p].index>u.index&&(l[p]=u)}}else l.push(u)}),l.sort(function(u,d){return d.index-u.index})}var e=[],i=[],n=t(this.get_doctypes(r));n.forEach(function(s){s.type===""?i.push(s):e.push(s)});var o=r.split(" in ")[0];return[{title:__("Recents"),fetch_type:"Nav",results:t(this.get_recent_pages(r))},{title:__("Create a new ..."),fetch_type:"Nav",results:t(this.get_creatables(r))},{title:__("Lists"),fetch_type:"Nav",results:e},{title:__("Reports"),fetch_type:"Nav",results:t(this.get_reports(r))},{title:__("Administration"),fetch_type:"Nav",results:t(this.get_pages(r))},{title:__("Workspace"),fetch_type:"Nav",results:t(this.get_workspaces(r))},{title:__("Dashboard"),fetch_type:"Nav",results:t(this.get_dashboards(r))},{title:__("Setup"),fetch_type:"Nav",results:i},{title:__("Find '{0}' in ...",[o]),fetch_type:"Nav",results:t(this.get_search_in_list(r))}]},fuzzy_search:function(r="",t="",e=!1){let i=__(t),[,n,o]=ts(r,i,e);if(!e)return n;if(n==0)return{score:n,item:i};let s=Array(i.length).fill(0);o.forEach(d=>s[d]=1);let a="",l="",u=()=>{if(!l)return"";let d=`<mark>${l}</mark>`;return l="",d};return s.forEach((d,p)=>{d?l+=i[p]:(a+=u(),a+=i[p])}),a+=u(),{score:n,marked_string:a}},bolden_match_part:function(r,t){if(ts(t,r)[0]===!1)return r;if(r.indexOf(t)==0){var e=r.split(t)[1];return"<mark>"+t+"</mark>"+e}var i="",n=r,o=r.length;r=r.toLowerCase(),t=t.toLowerCase();e:for(var s=0,a=0;s<t.length;s++){for(var l=t.charCodeAt(s);a<o;){if(r.charCodeAt(a)===l){var u=n.charAt(a);u===u.toLowerCase()?i+="<mark>"+t.charAt(s)+"</mark>":i+="<mark>"+t.charAt(s).toUpperCase()+"</mark>",a++;continue e}i+=n.charAt(a),a++}return n}return i+=n.slice(a),i},get_executables(r){let t=[];return this.searchable_functions.forEach(e=>{let i=e.label.toLowerCase(),n=r.toLowerCase();if(n===i||i.indexOf(n)===0){let o=this.fuzzy_search(n,e.label,!0);t.push({type:"Executable",value:o.marked_string,index:o.score,match:e.label,onclick:()=>e.action.apply(this,e.args)})}}),t},make_function_searchable(r,t=null,e=null){if(typeof r!="function")throw new Error("First argument should be a function");this.searchable_functions.push({label:t||r.name,action:r,args:e})},get_marketplace_apps:function(r){var t=this,e=[];return frappe.boot.marketplace_apps.forEach(function(i){let n=t.fuzzy_search(r,i.title,!0);if(n.score>0){var o={label:__("Install {0} from Marketplace",[n.marked_string]),value:__("Install {0} from Marketplace",[__(i.title)]),index:n.score*.8,route:[`https://frappecloud.com/${i.route}?utm_source=awesomebar`,i.name]};e.push(o)}}),e},searchable_functions:[]};frappe.provide("frappe.ui.misc");frappe.ui.misc.about=function(){if(!frappe.ui.misc.about_dialog){var r=new frappe.ui.Dialog({title:__("Frappe Framework")});$(r.body).html(repl(`<div>
					<p>${__("Open Source Applications for the Web")}</p>
					<p><i class='fa fa-globe fa-fw'></i>
						${__("Website")}:
						<a href='https://frappeframework.com' target='_blank'>https://frappeframework.com</a></p>
					<p><i class='fa fa-github fa-fw'></i>
						${__("Source")}:
						<a href='https://github.com/frappe' target='_blank'>https://github.com/frappe</a></p>
					<p><i class='fa fa-linkedin fa-fw'></i>
						Linkedin: <a href='https://linkedin.com/company/frappe-tech' target='_blank'>https://linkedin.com/company/frappe-tech</a></p>
					<p><i class='fa fa-facebook fa-fw'></i>
						Facebook: <a href='https://facebook.com/erpnext' target='_blank'>https://facebook.com/erpnext</a></p>
					<p><i class='fa fa-twitter fa-fw'></i>
						Twitter: <a href='https://twitter.com/frappetech' target='_blank'>https://twitter.com/frappetech</a></p>
					<p><i class='fa fa-youtube fa-fw'></i>
						YouTube: <a href='https://www.youtube.com/@frappetech' target='_blank'>https://www.youtube.com/@frappetech</a></p>
					<hr>
					<h4>${__("Installed Apps")}</h4>
					<div id='about-app-versions'>${__("Loading versions...")}</div>
					<hr>
					<p class='text-muted'>${__("&copy; Frappe Technologies Pvt. Ltd. and contributors")} </p>
					</div>`,frappe.app)),frappe.ui.misc.about_dialog=r,frappe.ui.misc.about_dialog.on_page_show=function(){frappe.versions?t(frappe.versions):frappe.call({method:"frappe.utils.change_log.get_versions",callback:function(e){t(e.message)}})};var t=function(e){var i=$("#about-app-versions").empty();$.each(Object.keys(e).sort(),function(n,o){var s=e[o];let a;s.branch?a=$.format("<p><b>{0}:</b> v{1} ({2})<br></p>",[s.title,s.branch_version||s.version,s.branch]):a=$.format("<p><b>{0}:</b> v{1}<br></p>",[s.title,s.version]),$(a).appendTo(i)}),frappe.versions=e}}frappe.ui.misc.about_dialog.show()};frappe.templates.navbar=`<header class="navbar navbar-expand sticky-top" role="navigation">
	<div class="container">
		<a class="navbar-brand navbar-home" href="/app">
			<img class="app-logo" style="width: {{ navbar_settings.logo_width || 28 }}px" src="{{ frappe.boot.app_logo_url }}">
		</a>
		<ul class="nav navbar-nav d-none d-sm-flex" id="navbar-breadcrumbs"></ul>
		<div class="collapse navbar-collapse justify-content-end">
			<form class="form-inline fill-width justify-content-end" role="search" onsubmit="return false;">
				{% if (frappe.boot.read_only) { %}
					<span class="indicator-pill yellow no-indicator-dot" title="{%= __("Your site is undergoing maintenance or being updated.") %}">
						{%= __("Read Only Mode") %}
					</span>
				{% } %}
				<div class="input-group search-bar text-muted hidden">
					<input
						id="navbar-search"
						type="text"
						class="form-control"
						placeholder="{%= __("Search or type a command (Ctrl + G)") %}"
						aria-haspopup="true"
					>
					<span class="search-icon">
						<svg class="icon icon-sm"><use href="#icon-search"></use></svg>
					</span>
				</div>
			</form>
			<ul class="navbar-nav">
				<li class="nav-item dropdown dropdown-notifications dropdown-mobile hidden">
					<a
						class="nav-link notifications-icon text-muted"
						data-toggle="dropdown"
						aria-haspopup="true"
						aria-expanded="true"
						href="#"
						onclick="return false;">
						<span class="notifications-seen">
							<svg class="es-icon icon-sm" style="stroke:none;"><use href="#es-line-notifications"></use></svg>
						</span>
						<span class="notifications-unseen">
							<svg class="es-icon icon-sm"><use href="#es-line-notifications-unseen"></use></svg>
						</span>
					</a>
					<div class="dropdown-menu notifications-list dropdown-menu-right" role="menu">
						<div class="notification-list-header">
							<div class="header-items"></div>
							<div class="header-actions"></div>
						</div>
						<div class="notification-list-body">
							<div class="panel-notifications"></div>
							<div class="panel-events"></div>
						</div>
					</div>
				</li>
				<li class="nav-item dropdown dropdown-message dropdown-mobile hidden">
					<a
						class="nav-link notifications-icon text-muted"
						data-toggle="dropdown"
						aria-haspopup="true"
						aria-expanded="true"
						href="#"
						onclick="return false;">
						<span>
							<svg class="es-icon icon-sm"><use href="#es-line-chat-alt"></use></svg>
						</span>
					</a>
				</li>
				<li class="vertical-bar d-none d-sm-block"></li>
				<li class="nav-item dropdown dropdown-help dropdown-mobile d-none d-lg-block">
					<a class="nav-link" data-toggle="dropdown" href="#" onclick="return false;">
						{{ __("Help") }}
						<span>
							<svg class="es-icon icon-xs"><use href="#es-line-down"></use></svg>
						</span>
					</a>
					<div class="dropdown-menu dropdown-menu-right" id="toolbar-help" role="menu">
						<div id="help-links"></div>
						<div class="dropdown-divider documentation-links"></div>
						{% for item in navbar_settings.help_dropdown %}
							{% if (!item.hidden) { %}
								{% if (item.route) { %}
									<a class="dropdown-item" href="{{ item.route }}">
										{%= __(item.item_label) %}
									</a>
								{% } else if (item.action) { %}
									<a class="dropdown-item" onclick="return {{ item.action }}">
										{%= __(item.item_label) %}
									</a>
								{% } else { %}
									<div class="dropdown-divider"></div>
								{% } %}
							{% } %}
						{% endfor %}
					</div>
				</li>
				<li class="nav-item dropdown dropdown-navbar-user dropdown-mobile">
					<a class="nav-link" data-toggle="dropdown" href="#" onclick="return false;">
						{{ avatar }}
					</a>
					<div class="dropdown-menu dropdown-menu-right" id="toolbar-user" role="menu">
						{% for item in navbar_settings.settings_dropdown %}
							{% if (!item.hidden) { %}
								{% if (item.route) { %}
									<a class="dropdown-item" href="{{ item.route }}">
										{%= __(item.item_label) %}
									</a>
								{% } else if (item.action) { %}
									<a class="dropdown-item" onclick="return {{ item.action }}">
										{%= __(item.item_label) %}
									</a>
								{% } else { %}
									<div class="dropdown-divider"></div>
								{% } %}
							{% } %}
						{% endfor %}
					</div>
				</li>
			</ul>
		</div>
	</div>
</header>
`;frappe.provide("frappe.ui.toolbar");frappe.provide("frappe.search");frappe.ui.toolbar.Toolbar=class{constructor(){$("header").replaceWith(frappe.render_template("navbar",{avatar:frappe.avatar(frappe.session.user,"avatar-medium"),navbar_settings:frappe.boot.navbar_settings})),$(".dropdown-toggle").dropdown(),$("#toolbar-user a[href]").click(function(){$(this).closest(".dropdown-menu").prev().dropdown("toggle")}),this.setup_awesomebar(),this.setup_notifications(),this.setup_help(),this.make()}make(){this.bind_events(),$(document).trigger("toolbar_setup")}bind_events(){$(document).on("page-change",function(){$("header .navbar .custom-menu").remove()}),$("#search-modal").on("shown.bs.modal",function(){var r=$(this);setTimeout(function(){r.find("#modal-search").focus()},300)}),$(".navbar-toggle-full-width").click(()=>{frappe.ui.toolbar.toggle_full_width()})}setup_help(){if(!frappe.boot.desk_settings.notifications){$(".navbar .vertical-bar").removeClass("d-sm-block"),$(".dropdown-help").removeClass("d-lg-block");return}frappe.provide("frappe.help"),frappe.help.show_results=t,this.search=new frappe.search.SearchDialog,frappe.provide("frappe.searchdialog"),frappe.searchdialog.search=this.search,$(".dropdown-help .dropdown-toggle").on("click",function(){$(".dropdown-help input").focus()}),$(".dropdown-help .dropdown-menu").on("click","input, button",function(e){e.stopPropagation()}),$("#input-help").on("keydown",function(e){e.which==13&&$(this).val("")}),$(document).on("page-change",function(){var e=$(".dropdown-help #help-links");e.html("");var i=frappe.get_route_str(),n=i.split("/"),o=[];for(let p=0;p<n.length;p++){var s=i.split("/",p+1),a=s.join("/"),l=frappe.help.help_links[a]||[];o=$.merge(o,l)}o.length===0?e.next().hide():e.next().show();for(let p=0;p<o.length;p++){var u=o[p],d=u.url;$("<a>",{href:d,class:"dropdown-item",text:__(u.label),target:"_blank"}).appendTo(e)}$(".dropdown-help .dropdown-menu").on("click","a",t)});var r=frappe.get_modal("","");r.addClass("help-modal"),$(document).on("click",".help-modal a",t);function t(e){var i=e.target.href;i.indexOf("blob")>0&&window.open(i,"_blank");var n=$(e.target).attr("data-path");n&&e.preventDefault()}}setup_awesomebar(){frappe.boot.desk_settings.search_bar&&(new frappe.search.AwesomeBar().setup("#navbar-search"),frappe.search.utils.make_function_searchable(frappe.utils.generate_tracking_url,__("Generate Tracking URL")),frappe.model.can_read("RQ Job")&&frappe.search.utils.make_function_searchable(function(){frappe.set_route("List","RQ Job")},__("Background Jobs")))}setup_notifications(){frappe.boot.desk_settings.notifications&&frappe.session.user!=="Guest"&&(this.notifications=new frappe.ui.Notifications)}};$.extend(frappe.ui.toolbar,{add_dropdown_button:function(r,t,e,i){var n=frappe.ui.toolbar.get_menu(r);return n.find("li:not(.custom-menu)").length&&!n.find(".divider").length&&frappe.ui.toolbar.add_menu_divider(n),$('<li class="custom-menu"><a><i class="fa-fw '+i+'"></i> '+t+"</a></li>").insertBefore(n.find(".divider")).find("a").click(function(){e.apply(this)})},get_menu:function(r){return $("#navbar-"+r.toLowerCase())},add_menu_divider:function(r){r=typeof r=="string"?frappe.ui.toolbar.get_menu(r):r,$('<li class="divider custom-menu"></li>').prependTo(r)},add_icon_link(r,t,e,i){let n=$(".navbar-right").get(0),o=$(`<li class="${i}">
			<a class="btn" href="${r}" title="${frappe.utils.to_title_case(i,!0)}" aria-haspopup="true" aria-expanded="true">
				<div>
					<i class="octicon ${t}"></i>
				</div>
			</a>
		</li>`).get(0);n.insertBefore(o,n.children[e])},toggle_full_width(){let r=JSON.parse(localStorage.container_fullwidth||"false");r=!r,localStorage.container_fullwidth=r,frappe.ui.toolbar.set_fullwidth_if_enabled(),$(document.body).trigger("toggleFullWidth")},set_fullwidth_if_enabled(){let r=JSON.parse(localStorage.container_fullwidth||"false");$(document.body).toggleClass("full-width",r)},show_shortcuts(r){return r.preventDefault(),frappe.ui.keys.show_keyboard_shortcut_dialog(),!1}});frappe.ui.toolbar.clear_cache=frappe.utils.throttle(function(){frappe.assets.clear_local_storage(),frappe.xcall("frappe.sessions.clear").then(r=>{frappe.show_alert({message:r,indicator:"info"}),location.reload(!0)})},1e4);frappe.ui.toolbar.show_about=function(){try{frappe.ui.misc.about()}catch(r){console.log(r)}return!1};frappe.ui.toolbar.route_to_user=function(){frappe.set_route("Form","User",frappe.session.user)};frappe.ui.toolbar.view_website=function(){let r=window.open();r.opener=null,r.location="/index"};frappe.ui.toolbar.setup_session_defaults=function(){let r=[];frappe.call({method:"frappe.core.doctype.session_default_settings.session_default_settings.get_session_default_values",callback:function(t){r=JSON.parse(t.message);let e=frappe.perm.get_perm("Session Default Settings");(frappe.user_roles.includes("System Manager")||e[0].read==1)&&(r[r.length]={fieldname:"settings",fieldtype:"Button",label:__("Settings"),click:()=>{frappe.set_route("Form","Session Default Settings","Session Default Settings")}}),frappe.prompt(r,function(i){r.forEach(function(n){i[n.fieldname]||(i[n.fieldname]="")}),frappe.call({method:"frappe.core.doctype.session_default_settings.session_default_settings.set_session_default_values",args:{default_values:i},callback:function(n){n.message=="success"?(frappe.show_alert({message:__("Session Defaults Saved"),indicator:"green"}),frappe.ui.toolbar.clear_cache()):frappe.show_alert({message:__("An error occurred while setting Session Defaults"),indicator:"red"})}})},__("Session Defaults"),__("Save"))}})};var Vn=Gt(Jd());frappe.last_edited_communication={};var Zd="<div>---</div>";frappe.views.CommunicationComposer=class{constructor(r){$.extend(this,r),this.doc||(this.doc=this.frm&&this.frm.doc||{}),this.make()}make(){let r=this;this.dialog=new frappe.ui.Dialog({title:this.title||this.subject||__("New Email"),no_submit_on_enter:!0,fields:this.get_fields(),primary_action_label:__("Send"),primary_action(){r.send_action()},secondary_action_label:__("Discard"),secondary_action(){r.dialog.hide(),r.clear_cache()},size:"large",minimizable:!0}),$(this.dialog.$wrapper.find(".form-section").get(0)).addClass("to_section"),this.prepare(),this.dialog.show(),this.frm&&$(document).trigger("form-typing",[this.frm])}get_fields(){let r=[{label:__("To"),fieldtype:"MultiSelect",reqd:0,fieldname:"recipients"},{fieldtype:"Button",label:frappe.utils.icon("down","xs"),fieldname:"option_toggle_button",click:()=>{this.toggle_more_options()}},{fieldtype:"Section Break",hidden:1,fieldname:"more_options"},{label:__("CC"),fieldtype:"MultiSelect",fieldname:"cc"},{label:__("BCC"),fieldtype:"MultiSelect",fieldname:"bcc"},{label:__("Schedule Send At"),fieldtype:"Datetime",fieldname:"send_after"},{fieldtype:"Section Break",fieldname:"email_template_section_break",hidden:1},{label:__("Email Template"),fieldtype:"Link",options:"Email Template",fieldname:"email_template"},{fieldtype:"HTML",label:__("Clear & Add template"),fieldname:"clear_and_add_template"},{fieldtype:"Section Break"},{label:__("Subject"),fieldtype:"Data",reqd:1,fieldname:"subject",length:524288},{label:__("Message"),fieldtype:"Text Editor",fieldname:"content",onchange:frappe.utils.debounce(this.save_as_draft.bind(this),300)},{fieldtype:"Button",label:__("Add Signature"),fieldname:"add_signature",hidden:1,click:async()=>{let e=this.dialog.get_value("sender")||"";this.content_set=!1,await this.set_content(e)}},{fieldtype:"Section Break"},{label:__("Send me a copy"),fieldtype:"Check",fieldname:"send_me_a_copy",default:frappe.boot.user.send_me_a_copy},{label:__("Send Read Receipt"),fieldtype:"Check",fieldname:"send_read_receipt"},{label:__("Attach Document Print"),fieldtype:"Check",fieldname:"attach_document_print"},{label:__("Select Print Format"),fieldtype:"Select",fieldname:"select_print_format"},{fieldtype:"Column Break"},{label:__("Select Attachments"),fieldtype:"HTML",fieldname:"select_attachments"}],t=frappe.boot.email_accounts.filter(e=>!["All Accounts","Sent","Spam","Trash"].includes(e.email_account)&&e.enable_outgoing);return t.length&&(this.user_email_accounts=t.map(function(e){return e.email_id}),r.unshift({label:__("From"),fieldtype:"Select",reqd:1,fieldname:"sender",options:this.user_email_accounts,onchange:()=>{this.setup_recipients_if_reply()}}),this.user_email_accounts.length==1?this.sender=this.user_email_accounts:this.user_email_accounts.includes(frappe.session.user_email)&&(this.sender=frappe.session.user_email)),r}toggle_more_options(r){r=r||this.dialog.fields_dict.more_options.df.hidden,this.dialog.set_df_property("more_options","hidden",!r),this.dialog.set_df_property("email_template_section_break","hidden",!r);let t=frappe.utils.icon(r?"up-line":"down","xs");this.dialog.get_field("option_toggle_button").set_label(t)}prepare(){this.setup_multiselect_queries(),this.setup_subject_and_recipients(),this.setup_print(),this.setup_attach(),this.setup_email(),this.setup_email_template(),this.setup_last_edited_communication(),this.setup_add_signature_button(),this.set_values()}setup_add_signature_button(){let r=this.dialog.has_field("sender");this.dialog.set_df_property("add_signature","hidden",!r)}setup_multiselect_queries(){["recipients","cc","bcc"].forEach(r=>{this.dialog.fields_dict[r].get_data=()=>{let e=this.dialog.fields_dict[r].get_value().match(/[^,\s*]*$/)[0]||"";frappe.call({method:"frappe.email.get_contact_list",args:{txt:e},callback:i=>{this.dialog.fields_dict[r].set_data(i.message)}})}})}setup_recipients_if_reply(){if(!this.is_a_reply||!this.last_email)return;let r=this.dialog.get_value("sender");if(!r)return;let t={recipients:this.dialog.fields_dict.recipients,cc:this.dialog.fields_dict.cc,bcc:this.dialog.fields_dict.bcc};if(this.last_email.sender==r)t.recipients.set_value(this.last_email.recipients),this.reply_all&&(t.cc.set_value(this.last_email.cc),t.bcc.set_value(this.last_email.bcc));else if(t.recipients.set_value(this.last_email.sender),this.reply_all){let e=this.last_email.recipients.split(",").map(n=>n.trim());this.cc||(this.cc="");let i=this.cc.split(",").map(n=>n.trim());this.cc&&!this.cc.endsWith(", ")&&(this.cc+=", "),this.cc+=e.filter(n=>!i.includes(n)&&n!=r).join(", "),this.cc=this.cc.replace(r+", ",""),t.cc.set_value(this.cc)}}setup_subject_and_recipients(){if(this.subject=this.subject||"",!this.forward&&!this.recipients&&this.last_email&&(this.recipients=this.last_email.sender,this.last_email.sender==this.sender&&(this.recipients=this.last_email.recipients),this.cc=this.last_email.cc,this.bcc=this.last_email.bcc),!this.forward&&!this.recipients&&(this.recipients=this.frm&&this.frm.timeline.get_recipient()),!this.subject&&this.frm){let r=this.frm.timeline.get_last_email();r&&(this.subject=r.subject,this.recipients||(this.recipients=r.sender),strip(this.subject.toLowerCase().split(":")[0])!="re"&&(this.subject=__("Re: {0}",[this.subject]))),this.subject||(this.subject=this.frm.doc.name,this.frm.meta.subject_field&&this.frm.doc[this.frm.meta.subject_field]?this.subject=this.frm.doc[this.frm.meta.subject_field]:this.frm.meta.title_field&&this.frm.doc[this.frm.meta.title_field]&&(this.subject=this.frm.doc[this.frm.meta.title_field]));let t=`#${this.frm.doc.name}`;cstr(this.subject).includes(t)||(this.subject=`${this.subject} (${t})`)}this.frm&&!this.recipients&&(this.recipients=this.frm.doc[this.frm.email_field])}setup_email_template(){let r=this,t=this.dialog.fields_dict,e=$(t.clear_and_add_template.wrapper);function i(){let o=r.dialog.fields_dict.email_template.get_value();if(!o)return;function s(a){let l=r.dialog.fields_dict.content,u=r.dialog.fields_dict.subject,d=l.get_value()||"";l.set_value(`${a.message}<br>${d}`),u.set_value(a.subject)}frappe.call({method:"frappe.email.doctype.email_template.email_template.get_email_template",args:{template_name:o,doc:r.doc},callback(a){s(a.message)}})}let n=[{label:__("Add Template"),description:__("Prepend the template to the email message"),action:()=>i()},{label:__("Clear & Add Template"),description:__("Clear the email message and add the template"),action:()=>{r.dialog.fields_dict.content.set_value(""),i()}}];frappe.utils.add_select_group_button(e,n)}setup_last_edited_communication(){this.frm?(this.doctype=this.frm.doctype,this.key=this.frm.docname):this.doctype=this.key="Inbox",this.last_email&&(this.key=this.key+":"+this.last_email.name),this.subject&&(this.key=this.key+":"+this.subject),this.dialog.on_hide=()=>{$.extend(this.get_last_edited_communication(!0),this.dialog.get_values(!0)),this.frm&&$(document).trigger("form-stopped-typing",[this.frm])}}get_last_edited_communication(r){return frappe.last_edited_communication[this.doctype]||(frappe.last_edited_communication[this.doctype]={}),(r||!frappe.last_edited_communication[this.doctype][this.key])&&(frappe.last_edited_communication[this.doctype][this.key]={}),frappe.last_edited_communication[this.doctype][this.key]}async set_values(){for(let t of["recipients","cc","bcc","sender"])await this.dialog.set_value(t,this[t]||"");let r=this.subject?frappe.utils.html2text(this.subject):"";if(await this.dialog.set_value("subject",r),await this.set_values_from_last_edited_communication(),await this.set_content(),this.frm&&!this.is_a_reply&&!this.content_set){let t=this.frm.meta.default_email_template||"";await this.dialog.set_value("email_template",t)}for(let t of["email_template","cc","bcc"])if(this.dialog.get_value(t)){this.toggle_more_options(!0);break}}async set_values_from_last_edited_communication(){if(this.message)return;let r=this.get_last_edited_communication();!r.content||(r.email_template&&(await this.dialog.fields_dict.email_template.set_model_value(r.email_template),delete r.email_template),await this.dialog.set_values(r),this.content_set=!0)}selected_format(){return this.dialog.fields_dict.select_print_format.input.value||this.frm&&this.frm.meta.default_print_format||"Standard"}get_print_format(r){return r||(r=this.selected_format()),locals["Print Format"]&&locals["Print Format"][r]?locals["Print Format"][r]:{}}setup_print(){let r=this.dialog.fields_dict;if($(r.attach_document_print.input).click(function(){$(r.select_print_format.wrapper).toggle($(this).prop("checked"))}),$(r.select_print_format.wrapper).toggle(!1),this.frm){let t=frappe.meta.get_print_formats(this.frm.meta.name);$(r.select_print_format.input).empty().add_options(t).val(t[0])}else $(r.attach_document_print.wrapper).toggle(!1)}setup_attach(){let r=this.dialog.fields_dict,t=$(r.select_attachments.wrapper);this.attachments||(this.attachments=[]);let e={folder:"Home/Attachments",on_success:i=>{this.attachments.push(i),this.render_attachment_rows(i)}};this.frm&&(e={doctype:this.frm.doctype,docname:this.frm.docname,folder:"Home/Attachments",on_success:i=>{this.frm.attachments.attachment_uploaded(i),this.render_attachment_rows(i)}}),$(`
			<label class="control-label">
				${__("Select Attachments")}
			</label>
			<div class='attach-list'></div>
			<p class='add-more-attachments'>
				<button class='btn btn-xs btn-default'>
					${frappe.utils.icon("small-add","xs")}&nbsp;
					${__("Add Attachment")}
				</button>
			</p>
		`).appendTo(t.empty()),t.find(".add-more-attachments button").on("click",()=>new frappe.ui.FileUploader(e)),this.render_attachment_rows()}render_attachment_rows(r){let t=this.dialog.fields_dict.select_attachments,e=$(t.wrapper).find(".attach-list");if(r)e.append(this.get_attachment_row(r,!0));else{let i=[];this.attachments&&this.attachments.length&&(i=i.concat(this.attachments)),this.frm&&(i=i.concat(this.frm.get_files())),i.length&&$.each(i,(n,o)=>{!o.file_name||e.find(`[data-file-name="${o.name}"]`).length||(o.file_url=frappe.urllib.get_full_url(o.file_url),e.append(this.get_attachment_row(o)))})}}get_attachment_row(r,t){return $(`<p class="checkbox flex">
			<label class="ellipsis" title="${r.file_name}">
				<input
					type="checkbox"
					data-file-name="${r.name}"
					${t?"checked":""}>
				</input>
				<span class="ellipsis">${r.file_name}</span>
			</label>
			&nbsp;
			<a href="${r.file_url}" target="_blank" class="btn-linkF">
				${frappe.utils.icon("link-url")}
			</a>
		</p>`)}setup_email(){let r=this.dialog.fields_dict;this.attach_document_print&&($(r.attach_document_print.input).click(),$(r.select_print_format.wrapper).toggle(!0)),$(r.send_me_a_copy.input).on("click",()=>{let t=r.send_me_a_copy.get_value();frappe.db.set_value("User",frappe.session.user,"send_me_a_copy",t),frappe.boot.user.send_me_a_copy=t})}send_action(){let r=this,t=r.dialog.get_primary_btn(),e=this.get_values();if(!e)return;let i=$.map($(r.dialog.wrapper).find("[data-file-name]:checked"),function(n){return $(n).attr("data-file-name")});e.attach_document_print?r.send_email(t,e,i,null,e.select_print_format||""):r.send_email(t,e,i)}get_values(){let r=this.dialog.get_values();for(let t=0,e=this.dialog.fields.length;t<e;t++){let i=this.dialog.fields[t];i.is_cc_checkbox&&(r[i.fieldname]&&(r.cc=(r.cc?r.cc+", ":"")+i.fieldname,r.bcc=(r.bcc?r.bcc+", ":"")+i.fieldname),delete r[i.fieldname])}return r}save_as_draft(){if(this.dialog&&this.frm){let r=this.dialog.get_value("content");r=r.split(Zd)[0],Vn.default.setItem(this.frm.doctype+this.frm.docname,r).catch(t=>{t&&(console.log(t),console.warn("[Communication] IndexedDB is full. Cannot save message as draft"))})}}clear_cache(){this.delete_saved_draft(),this.get_last_edited_communication(!0)}delete_saved_draft(){this.dialog&&this.frm&&Vn.default.removeItem(this.frm.doctype+this.frm.docname).catch(r=>{r&&(console.log(r),console.warn("[Communication] IndexedDB is full. Cannot save message as draft"))})}send_email(r,t,e,i,n){let o=this;if(this.dialog.hide(),!t.recipients){frappe.msgprint(__("Enter Email Recipient(s)"));return}if(t.attach_document_print||(i=null,n=null),this.frm&&!frappe.model.can_email(this.doc.doctype,this.frm)){frappe.msgprint(__("You are not allowed to send emails related to this document"));return}return frappe.call({method:"frappe.core.doctype.communication.email.make",args:{recipients:t.recipients,cc:t.cc,bcc:t.bcc,subject:t.subject,content:t.content,doctype:o.doc.doctype,name:o.doc.name,send_email:1,print_html:i,send_me_a_copy:t.send_me_a_copy,print_format:n,sender:t.sender,sender_full_name:t.sender?frappe.user.full_name():void 0,email_template:t.email_template,attachments:e,read_receipt:t.send_read_receipt,print_letterhead:o.is_print_letterhead_checked(),send_after:t.send_after?t.send_after:null},btn:r,callback(s){if(s.exc){if(frappe.msgprint(__("There were errors while sending email. Please try again.")),o.error)try{o.error(s)}catch(a){console.log(a)}}else if(frappe.utils.play_sound("email"),s.message.emails_not_sent_to&&frappe.msgprint(__("Email not sent to {0} (unsubscribed / disabled)",[frappe.utils.escape_html(s.message.emails_not_sent_to)])),o.clear_cache(),o.frm&&o.frm.reload_doc(),o.success)try{o.success(s)}catch(a){console.log(a)}}})}is_print_letterhead_checked(){return this.frm&&$(this.frm.wrapper).find(".form-print-wrapper").is(":visible")?$(this.frm.wrapper).find(".print-letterhead").prop("checked")?1:0:(frappe.model.get_doc(":Print Settings","Print Settings")||{with_letterhead:1}).with_letterhead?1:0}async set_content(r){if(this.content_set)return;let t=this.message||"";if(!t&&this.frm){let{doctype:i,docname:n}=this.frm;t=await Vn.default.getItem(i+n)||""}t&&(this.content_set=!0);let e=await this.get_signature(r||"");(!this.content_set||!strip_html(t).includes(strip_html(e)))&&(t+=e),this.is_a_reply&&!this.reply_set&&(t+=this.get_earlier_reply()),await this.dialog.set_value("content",t)}async get_signature(r){let t=frappe.boot.user.email_signature;if(!t){let e={add_signature:1};r?e.email_id=r:e.default_outgoing=1;let i=await frappe.db.get_list("Email Account",{filters:e,fields:["signature","email_id"],limit:1}),n=null;i.length&&(t=i[0].signature,n=i[0].email_id),!r&&n&&this.user_email_accounts&&this.user_email_accounts.includes(n)&&this.dialog.set_value("sender",n)}return t?(frappe.utils.is_html(t)||(t=t.replace(/\n/g,"<br>")),"<br>"+t):""}get_earlier_reply(){this.reply_set=!1;let r=this.last_email||this.frm&&this.frm.timeline.get_last_email(!0);if(!r)return"";let t=r.original_comment||r.content;t=this.html2text(t).replace(/\n/g,"<br>"),t.length>20*1024&&(t+="<div>"+__("Message clipped")+"</div>"+t,t=t.slice(0,20*1024));let e=frappe.datetime.global_date_format(r.communication_date||r.creation);return this.reply_set=!0,`
			<div><br></div>
			${Zd||""}
			<p>
			${__("On {0}, {1} wrote:",[e,r.sender])}
			</p>
			<blockquote>
			${t}
			</blockquote>
		`}html2text(r){return r=r.replace(/<\/div>/g,"<br></div>").replace(/<\/p>/g,"<br></p>").replace(/<br>/g,`
`),frappe.utils.html2text(r).replace(/\n{3,}/g,`

`)}};frappe.views.TranslationManager=class{constructor(t){Object.assign(this,t),this.make()}make(){this.data=[],this.dialog=new frappe.ui.Dialog({fields:this.get_fields(),title:__("Translate {0}",[this.df.label]),no_submit_on_enter:!0,primary_action_label:__("Update Translations"),primary_action:t=>this.update_translations(t).then(()=>{this.dialog.hide(),this.data=[],frappe.msgprint({title:__("Success"),message:__("Successfully updated translations"),indicator:"green"})})}),this.get_translations_data().then(t=>{this.data.push(...t||[]),this.dialog.refresh(),this.dialog.show()})}get_fields(){var t=[{label:__("Source Text"),fieldname:"source",fieldtype:"Data",read_only:1,bold:1,default:this.source_text},{label:__("Translations"),fieldname:"translation_data",fieldtype:"Table",fields:[{label:"Language",fieldname:"language",fieldtype:"Link",options:"Language",in_list_view:1,columns:3},{label:"Translation",fieldname:"translation",fieldtype:"Text",in_list_view:1,columns:7}],data:this.data,get_data:()=>this.data}];return t}get_translations_data(){return frappe.db.get_list("Translation",{fields:["name","language","translated_text as translation"],filters:{source_text:strip_html(this.source_text)}})}update_translations({source:t,translation_data:e=[]}){let i={};return e.map(n=>{i[n.language]=n.translation}),frappe.call({method:"frappe.translate.update_translations_for_source",btn:this.dialog.get_primary_btn(),args:{source:t,translation_dict:i}}).fail(()=>{frappe.msgprint({title:__("Something went wrong"),message:__("Please try again"),indicator:"red"})})}};var tf=Gt(Qd()),rf=Gt(ef());frappe.standard_pages.Workspaces=function(){var r=frappe.container.add_page("Workspaces");frappe.ui.make_app_page({parent:r,name:"Workspaces",title:__("Workspace")}),frappe.workspace=new frappe.views.Workspace(r),$(r).bind("show",function(){frappe.workspace.show()})};frappe.views.Workspace=class{constructor(t){this.wrapper=$(t),this.page=t.page,this.blocks=frappe.workspace_block.blocks,this.is_read_only=!0,this.pages={},this.sorted_public_items=[],this.sorted_private_items=[],this.current_page={},this.sidebar_items={public:{},private:{}},this.sidebar_categories=["My Workspaces","Public"],this.indicator_colors=["green","cyan","blue","orange","yellow","gray","grey","red","pink","darkgrey","purple","light-blue"],this.prepare_container(),this.setup_pages(),this.register_awesomebar_shortcut()}prepare_container(){let t=$(`
			<div class="list-sidebar overlay-sidebar hidden-xs hidden-sm">
				<div class="desk-sidebar list-unstyled sidebar-menu"></div>
			</div>
		`).appendTo(this.wrapper.find(".layout-side-section"));this.sidebar=t.find(".desk-sidebar"),this.body=this.wrapper.find(".layout-main-section")}async setup_pages(t){if(!this.discard&&this.create_page_skeleton(),!this.discard&&this.create_sidebar_skeleton(),this.sidebar_pages=this.discard?this.sidebar_pages:await this.get_pages(),this.cached_pages=$.extend(!0,{},this.sidebar_pages),this.all_pages=this.sidebar_pages.pages,this.has_access=this.sidebar_pages.has_access,this.all_pages.forEach(e=>{e.is_editable=!e.public||this.has_access}),this.public_pages=this.all_pages.filter(e=>e.public),this.private_pages=this.all_pages.filter(e=>!e.public),this.all_pages){frappe.workspaces={};for(let e of this.all_pages)frappe.workspaces[frappe.router.slug(e.name)]={title:e.title,public:e.public};this.make_sidebar(),t&&this.show()}}get_pages(){return frappe.xcall("frappe.desk.desktop.get_workspace_sidebar_items")}sidebar_item_container(t){return t.indicator_color=t.indicator_color||this.indicator_colors[Math.floor(Math.random()*12)],$(`
			<div
				class="sidebar-item-container ${t.is_editable?"is-draggable":""}"
				item-parent="${t.parent_page}"
				item-name="${t.title}"
				item-public="${t.public||0}"
				item-is-hidden="${t.is_hidden||0}"
			>
				<div class="desk-sidebar-item standard-sidebar-item ${t.selected?"selected":""}">
					<a
						href="/app/${t.public?frappe.router.slug(t.title):"private/"+frappe.router.slug(t.title)}"
						class="item-anchor ${t.is_editable?"":"block-click"}" title="${__(t.title)}"
					>
						<span class="sidebar-item-icon" item-icon=${t.icon||"folder-normal"}>
							${t.public?frappe.utils.icon(t.icon||"folder-normal","md"):`<span class="indicator ${t.indicator_color}"></span>`}
						</span>
						<span class="sidebar-item-label">${__(t.title)}<span>
					</a>
					<div class="sidebar-item-control"></div>
				</div>
				<div class="sidebar-child-item nested-container"></div>
			</div>
		`)}make_sidebar(){this.sidebar.find(".standard-sidebar-section")[0]&&this.sidebar.find(".standard-sidebar-section").remove(),this.sidebar_categories.forEach(t=>{let e=this.public_pages.filter(i=>i.parent_page==""||i.parent_page==null);t!="Public"&&(e=this.private_pages.filter(i=>i.parent_page==""||i.parent_page==null)),e=e.uniqBy(i=>i.title),this.build_sidebar_section(t,e)}),this.sidebar.find(".selected").length&&!frappe.dom.is_element_in_viewport(this.sidebar.find(".selected"))&&this.sidebar.find(".selected")[0].scrollIntoView(),this.remove_sidebar_skeleton()}build_sidebar_section(t,e){let i=$(`<div class="standard-sidebar-section nested-container" data-title="${t}"></div>`),n=$(`<div class="standard-sidebar-label">
			<span>${frappe.utils.icon("es-line-down","xs")}</span>
			<span class="section-title">${__(t)}<span>
		</div>`).appendTo(i);this.prepare_sidebar(e,i,this.sidebar),n.on("click",o=>{let s=$(o.target).find("span use").attr("href")==="#es-line-down"?"#es-line-right-chevron":"#es-line-down";$(o.target).find("span use").attr("href",s),$(o.target).parent().find(".sidebar-item-container").toggleClass("hidden")}),Object.keys(e).length===0&&i.addClass("hidden"),$(".item-anchor").on("click",()=>{$(".list-sidebar.hidden-xs.hidden-sm").removeClass("opened"),$(".close-sidebar").css("display","none"),$("body").css("overflow","auto")}),i.find(".sidebar-item-container").length&&i.find("> [item-is-hidden='0']").length==0&&i.addClass("hidden show-in-edit-mode")}prepare_sidebar(t,e,i){t.forEach(n=>this.append_item(n,e)),e.appendTo(i)}append_item(t,e){let i=frappe.router.slug(t.title)==frappe.router.slug(this.get_page_to_show().name)&&t.public==this.get_page_to_show().public;t.selected=i,i&&(this.current_page={name:t.title,public:t.public});let n=this.sidebar_item_container(t),o=n.find(".sidebar-item-control");this.add_sidebar_actions(t,o);let a=(t.public?this.public_pages:this.private_pages).filter(l=>l.parent_page==t.title);if(a.length>0){let l=n.find(".sidebar-child-item");l.addClass("hidden"),this.prepare_sidebar(a,l,n)}n.appendTo(e),this.sidebar_items[t.public?"public":"private"][t.title]=n,n.parent().hasClass("hidden")&&i&&n.parent().toggleClass("hidden"),this.add_drop_icon(t,o,n),a.length>0&&n.find(".drop-icon").first().addClass("show-in-edit-mode")}add_drop_icon(t,e,i){let n="es-line-down";i.find(`[item-name="${this.current_page.name}"]`).length&&(n="small-up");let o=i.find(".sidebar-child-item"),s=$(`<span class="drop-icon hidden">${frappe.utils.icon(n,"sm")}</span>`).appendTo(e);(t.public?this.public_pages:this.private_pages).some(l=>l.parent_page==t.title&&(l.is_hidden==0||!this.is_read_only))&&s.removeClass("hidden"),s.on("click",()=>{let l=s.find("use").attr("href")==="#es-line-down"?"#es-line-up":"#es-line-down";s.find("use").attr("href",l),o.toggleClass("hidden")})}show(){if(!this.all_pages){setTimeout(()=>this.show(),100);return}let t=this.get_page_to_show();if(!frappe.router.current_route[0]){frappe.route_flags.replace_route=!0,frappe.set_route(frappe.router.slug(t.public?t.name:"private/"+t.name));return}this.page.set_title(__(t.name)),this.update_selected_sidebar(this.current_page,!1),this.update_selected_sidebar(t,!0),this.show_page(t)}update_selected_sidebar(t,e){let i=t.public?"public":"private";if(this.sidebar&&this.sidebar_items[i]&&this.sidebar_items[i][t.name]){let n=this.sidebar_items[i][t.name],s=(t.public?this.public_pages:this.private_pages).find(a=>a.title==t.name);e?(n[0].firstElementChild.classList.add("selected"),s&&(s.selected=!0),n.parent().hasClass("sidebar-child-item")&&n.parent().hasClass("hidden")&&n.parent().removeClass("hidden"),this.current_page={name:t.name,public:t.public},localStorage.current_page=t.name,localStorage.is_current_page_public=t.public):(n[0].firstElementChild.classList.remove("selected"),s&&(s.selected=!1))}}get_data(t){return frappe.call("frappe.desk.desktop.get_desktop_page",{page:t}).then(e=>{if(this.page_data=e.message,this.pages[t.name]&&delete this.pages[t.name],this.pages[t.name]=e.message,!(!this.page_data||Object.keys(this.page_data).length===0)&&!(this.page_data.charts&&this.page_data.charts.items.length===0))return frappe.dashboard_utils.get_dashboard_settings().then(i=>{if(i){let n=i.chart_config?JSON.parse(i.chart_config):{};this.page_data.charts.items.map(o=>{o.chart_settings=n[o.chart_name]||{}}),this.pages[t.name]=this.page_data}})})}get_page_to_show(){let t;localStorage.current_page&&this.all_pages.filter(o=>o.title==localStorage.current_page).length!=0?t={name:localStorage.current_page,public:localStorage.is_current_page_public!="false"}:Object.keys(this.all_pages).length!==0?t={name:this.all_pages[0].title,public:this.all_pages[0].public}:t={name:"Build",public:!0};let e=frappe.get_route(),i=(e[1]=="private"?e[2]:e[1])||t.name,n=e[1]?e[1]!="private":t.public;return{name:i,public:n}}async show_page(t){if(this.body.find("#editorjs")[0]||(this.$page=$(`
				<div id="editorjs" class="desk-page page-main-content"></div>
			`).appendTo(this.body)),this.all_pages.length){this.create_page_skeleton();let i=(t.public&&this.public_pages.length?this.public_pages:this.private_pages).filter(n=>n.title==t.name)[0];this.content=i&&JSON.parse(i.content),this.content&&this.add_custom_cards_in_content(),$(".item-anchor").addClass("disable-click"),this.pages&&this.pages[i.name]?this.page_data=this.pages[i.name]:await frappe.after_ajax(()=>this.get_data(i)),this.setup_actions(t),this.prepare_editorjs(),$(".item-anchor").removeClass("disable-click"),this.remove_page_skeleton()}}add_custom_cards_in_content(){let t=-1;this.content.find((e,i)=>{e.type=="card"&&(t=i)}),t!==-1&&(this.content.splice(t+1,0,{type:"card",data:{card_name:"Custom Documents",col:4}}),this.content.splice(t+2,0,{type:"card",data:{card_name:"Custom Reports",col:4}}))}prepare_editorjs(){this.editor?this.editor.isReady.then(()=>{this.editor.configuration.tools.chart.config.page_data=this.page_data,this.editor.configuration.tools.shortcut.config.page_data=this.page_data,this.editor.configuration.tools.card.config.page_data=this.page_data,this.editor.configuration.tools.onboarding.config.page_data=this.page_data,this.editor.configuration.tools.quick_list.config.page_data=this.page_data,this.editor.configuration.tools.number_card.config.page_data=this.page_data,this.editor.configuration.tools.custom_block.config.page_data=this.page_data,this.editor.render({blocks:this.content||[]})}):this.initialize_editorjs(this.content)}setup_actions(t){let i=(t.public?this.public_pages:this.private_pages).filter(n=>n.title==t.name)[0];if(!this.is_read_only){this.setup_customization_buttons(i);return}this.clear_page_actions(),this.page.set_secondary_action(__("Edit"),async()=>{!this.editor||!this.editor.readOnly||(this.is_read_only=!1,this.toggle_hidden_workspaces(!0),await this.editor.readOnly.toggle(),this.editor.isReady.then(()=>{this.body.addClass("edit-mode"),this.initialize_editorjs_undo(),this.setup_customization_buttons(i),this.show_sidebar_actions(),this.make_blocks_sortable()}))},"es-line-edit"),this.page.add_inner_button(__("Create Workspace"),()=>{this.initialize_new_page()})}initialize_editorjs_undo(){this.undo=new rf.default({editor:this.editor}),this.undo.initialize({blocks:this.content||[]}),this.undo.readOnly=!1}clear_page_actions(){this.page.clear_primary_action(),this.page.clear_secondary_action(),this.page.clear_inner_toolbar()}setup_customization_buttons(t){this.clear_page_actions(),t.is_editable&&this.page.set_primary_action(__("Save"),()=>{this.clear_page_actions(),this.body.removeClass("edit-mode"),this.save_page(t).then(e=>{!e||(this.undo.readOnly=!0,this.editor.readOnly.toggle(),this.is_read_only=!0)})},null,__("Saving")),this.page.set_secondary_action(__("Discard"),async()=>{this.body.removeClass("edit-mode"),this.discard=!0,this.clear_page_actions(),this.toggle_hidden_workspaces(!1),await this.editor.readOnly.toggle(),this.is_read_only=!0,this.sidebar_pages=this.cached_pages,this.reload(),frappe.show_alert({message:__("Customizations Discarded"),indicator:"info"})}),t.name&&this.has_access&&this.page.add_inner_button(__("Settings"),()=>{frappe.set_route(`workspace/${t.name}`)})}toggle_hidden_workspaces(t){$(".desk-sidebar").toggleClass("show-hidden-workspaces",t)}show_sidebar_actions(){this.sidebar.find(".standard-sidebar-section").addClass("show-control"),this.make_sidebar_sortable()}add_sidebar_actions(t,e,i){t.is_editable?t.is_hidden?frappe.utils.add_custom_button(frappe.utils.icon("es-line-preview","sm"),n=>this.unhide_workspace(t,n),"unhide-workspace-btn",__("Unhide Workspace"),null,e):(frappe.utils.add_custom_button(frappe.utils.icon("es-line-drag","xs"),null,"drag-handle",__("Drag"),null,e),!i&&this.add_settings_button(t,e)):(e.parent().click(()=>{!this.is_read_only&&frappe.show_alert({message:__("Only Workspace Manager can sort or edit this page"),indicator:"info"},5)}),frappe.utils.add_custom_button(frappe.utils.icon("es-line-duplicate","sm"),()=>this.duplicate_page(t),"duplicate-page",__("Duplicate Workspace"),null,e))}get_parent_pages(t){if(this.public_parent_pages=["",...this.public_pages.filter(e=>!e.parent_page).map(e=>e.title)],this.private_parent_pages=["",...this.private_pages.filter(e=>!e.parent_page).map(e=>e.title)],t)return t.public?this.public_parent_pages:this.private_parent_pages}edit_page(t){var e=this;let i=t,n=this.get_parent_pages(t),o=n.findIndex(a=>a==t.title);o!==-1&&n.splice(o,1);let s=new frappe.ui.Dialog({title:__("Update Details"),fields:[{label:__("Title"),fieldtype:"Data",fieldname:"title",reqd:1,default:t.title},{label:__("Parent"),fieldtype:"Select",fieldname:"parent",options:n,default:t.parent_page},{label:__("Public"),fieldtype:"Check",fieldname:"is_public",depends_on:`eval:${this.has_access}`,default:t.public,onchange:function(){s.set_df_property("parent","options",this.get_value()?e.public_parent_pages:e.private_parent_pages),s.set_df_property("icon","hidden",this.get_value()?0:1),s.set_df_property("indicator_color","hidden",this.get_value()?1:0)}},{fieldtype:"Column Break"},{label:__("Icon"),fieldtype:"Icon",fieldname:"icon",default:t.public&&t.icon,hidden:!t.public},{label:__("Indicator color"),fieldtype:"Select",fieldname:"indicator_color",options:this.indicator_colors,default:!t.public&&t.indicator_color,hidden:t.public}],primary_action_label:__("Update"),primary_action:a=>{a.title=strip_html(a.title);let l=a.title!=i.title,u=Boolean(a.is_public)!=Boolean(i.public);if(!((l||u)&&!this.validate_page(a,i))){if(s.hide(),frappe.call({method:"frappe.desk.doctype.workspace.workspace.update_page",args:{name:i.name,title:a.title,icon:a.icon||"",indicator_color:a.indicator_color||"",parent:a.parent||"",public:a.is_public||0},callback:function(d){if(d.message){let p=__("Workspace {0} Edited Successfully",[i.title.bold()]);frappe.show_alert({message:p,indicator:"green"})}}}),this.update_sidebar(i,a),this.make_page_selected){let p=(a.is_public?"":"private/")+frappe.router.slug(a.title);frappe.set_route(p),this.make_page_selected=!1}this.make_sidebar(),this.show_sidebar_actions()}}});s.show()}update_sidebar(t,e){let i=t.public!=(e.is_public||0),n=t.title!=e.title,o=Ue({},t),a=(t.public?this.public_pages:this.private_pages).filter(l=>l.parent_page==t.title);if(this.make_page_selected=t.selected,o.title=e.title,o.icon=e.icon,o.indicator_color=e.indicator_color,o.parent_page=e.parent||"",o.public=e.is_public,n||i)if(e.is_public)o.name=e.title,o.label=e.title,o.for_user="";else{let l=frappe.session.user;o.name=`${e.title}-${l}`,o.label=`${e.title}-${l}`,o.for_user=l}this.update_cached_values(t,o),a.length&&a.forEach(l=>{l.parent_page=e.title,i&&this.update_child_sidebar(l,e)})}update_child_sidebar(t,e){let i=Ue({},t);if(this.make_page_selected=t.selected,t.public=e.is_public,e.is_public)t.name=t.title,t.label=t.title,t.for_user="";else{let n=frappe.session.user;t.name=`${t.title}-${n}`,t.label=`${t.title}-${n}`,t.for_user=n}this.update_cached_values(i,t)}update_cached_values(t,e,i,n){let[o,s]=t.public?[this.public_pages,this.private_pages]:[this.private_pages,this.public_pages],a=o.findIndex(l=>l.title==t.title);i&&a++,(frappe.workspaces[frappe.router.slug(t.name)]||n)&&(!i&&delete frappe.workspaces[frappe.router.slug(t.name)],e&&(frappe.workspaces[frappe.router.slug(e.name)]={title:e.title})),(this.pages&&this.pages[t.name]||n)&&(e&&(this.pages[e.name]=this.pages[t.name]||{}),!i&&delete this.pages[t.name]),e?t.public!=(e.is_public||e.public||0)?(!i&&o.splice(a,1),s.push(e)):n?o.push(e):o.splice(a,i?0:1,e):o.splice(a,1),this.sidebar_pages.pages=[...this.public_pages,...this.private_pages],this.cached_pages=this.sidebar_pages}add_settings_button(t,e){this.dropdown_list=[{label:__("Edit"),title:__("Edit Workspace"),icon:frappe.utils.icon("es-line-edit","sm"),action:()=>this.edit_page(t)},{label:__("Duplicate"),title:__("Duplicate Workspace"),icon:frappe.utils.icon("es-line-duplicate","sm"),action:()=>this.duplicate_page(t)},{label:__("Hide"),title:__("Hide Workspace"),icon:frappe.utils.icon("es-line-hide","sm"),action:o=>this.hide_workspace(t,o)}],this.is_item_deletable(t)&&this.dropdown_list.push({label:__("Delete"),title:__("Delete Workspace"),icon:frappe.utils.icon("delete-active","sm"),action:()=>this.delete_page(t)});let i=$(`
			<div class="btn btn-xs setting-btn dropdown-btn" title="${__("Setting")}">
				${frappe.utils.icon("es-line-dot-horizontal","xs")}
			</div>
			<div class="dropdown-list hidden"></div>
		`),n=function(o,s,a,l){let u=$(`
				<div class="dropdown-item" title="${s}">
					<span class="dropdown-item-icon">${a}</span>
					<span class="dropdown-item-label">${o}</span>
				</div>
			`);return u.click(d=>{d.stopPropagation(),l&&l(d)}),u};i.filter(".dropdown-btn").click(o=>{o.stopPropagation(),i.filter(".dropdown-list.hidden").length&&$(".dropdown-list:not(.hidden)").addClass("hidden"),i.filter(".dropdown-list").toggleClass("hidden")}),e.append(i),this.dropdown_list.forEach(o=>{i.filter(".dropdown-list").append(n(o.label,o.title,o.icon,o.action))})}is_item_deletable(t){return!!(!t.public||t.public&&(!t.module||t.module&&frappe.boot.developer_mode))}delete_page(t){frappe.confirm(__("Are you sure you want to delete page {0}?",[t.title.bold()]),()=>{frappe.call({method:"frappe.desk.doctype.workspace.workspace.delete_page",args:{page:t},callback:function(e){if(e.message){let i=e.message,n=__("Workspace {0} Deleted Successfully",[i.title.bold()]);frappe.show_alert({message:n,indicator:"green"})}}}),this.page.clear_primary_action(),this.update_cached_values(t),this.current_page.name==t.title&&this.current_page.public==t.public&&frappe.set_route("/"),this.make_sidebar(),this.show_sidebar_actions()})}duplicate_page(t){var e=this;let i=Ue({},t);!this.has_access&&i.public&&(i.public=0);let n=this.get_parent_pages({public:i.public}),o=new frappe.ui.Dialog({title:__("Create Duplicate"),fields:[{label:__("Title"),fieldtype:"Data",fieldname:"title",reqd:1},{label:__("Parent"),fieldtype:"Select",fieldname:"parent",options:n,default:i.parent_page},{label:__("Public"),fieldtype:"Check",fieldname:"is_public",depends_on:`eval:${this.has_access}`,default:i.public,onchange:function(){o.set_df_property("parent","options",this.get_value()?e.public_parent_pages:e.private_parent_pages),o.set_df_property("icon","hidden",this.get_value()?0:1),o.set_df_property("indicator_color","hidden",this.get_value()?1:0)}},{fieldtype:"Column Break"},{label:__("Icon"),fieldtype:"Icon",fieldname:"icon",default:i.public&&i.icon,hidden:!i.public},{label:__("Indicator color"),fieldtype:"Select",fieldname:"indicator_color",options:this.indicator_colors,hidden:i.public,default:!i.public&&i.indicator_color}],primary_action_label:__("Duplicate"),primary_action:s=>{if(!this.validate_page(s))return;o.hide(),frappe.call({method:"frappe.desk.doctype.workspace.workspace.duplicate_page",args:{page_name:t.name,new_page:s},callback:function(u){if(u.message){let d=u.message,p=__("Duplicate of {0} named as {1} is created successfully",[t.title.bold(),d.title.bold()]);frappe.show_alert({message:p,indicator:"green"})}}}),i.title=s.title,i.public=s.is_public||0,i.name=s.title+(i.public?"":"-"+frappe.session.user),i.label=i.name,i.icon=s.icon,i.indicator_color=s.indicator_color,i.parent_page=s.parent||"",i.for_user=i.public?"":frappe.session.user,i.is_editable=!i.public,i.selected=!0,this.update_cached_values(t,i,!0);let l=(s.is_public?"":"private/")+frappe.router.slug(s.title);frappe.set_route(l),e.make_sidebar(),e.show_sidebar_actions()}});o.show()}hide_unhide_workspace(t,e,i){t.is_hidden=i;let n=e.target.closest(".sidebar-item-control"),o=n.closest(".sidebar-item-container");$(o).attr("item-is-hidden",i),$(n).empty(),this.add_sidebar_actions(t,$(n)),this.add_drop_icon(t,$(n),$(o));let s=this.cached_pages.pages.findIndex(l=>l.name===t.name);s!==-1&&(this.cached_pages.pages[s].is_hidden=i);let a=i?"hide_page":"unhide_page";frappe.call({method:"frappe.desk.doctype.workspace.workspace."+a,args:{page_name:t.name},callback:l=>{if(!l.message)return;let u=i?"{0} is hidden successfully":"{0} is unhidden successfully";u=__(u,[t.title.bold()]),frappe.show_alert({message:u,indicator:"green"})}})}hide_workspace(t,e){this.hide_unhide_workspace(t,e,1)}unhide_workspace(t,e){this.hide_unhide_workspace(t,e,0)}make_sidebar_sortable(){let t=this;$(".nested-container").each(function(){new Sortable(this,{handle:".drag-handle",draggable:".sidebar-item-container.is-draggable",group:"nested",animation:150,fallbackOnBody:!0,swapThreshold:.65,onEnd:function(e){let i=$(e.item).attr("item-public")=="1";t.prepare_sorted_sidebar(i),t.update_sorted_sidebar()}})})}prepare_sorted_sidebar(t){let e=t?this.public_pages:this.private_pages;t?this.sorted_public_items=this.sort_sidebar(this.sidebar.find(".standard-sidebar-section").last(),e):this.sorted_private_items=this.sort_sidebar(this.sidebar.find(".standard-sidebar-section").first(),e),this.sidebar_pages.pages=[...this.public_pages,...this.private_pages],this.cached_pages=this.sidebar_pages}sort_sidebar(t,e){let i=[];return Array.from(t.find(".sidebar-item-container")).forEach((n,o)=>{let s="";n.closest(".nested-container").classList.contains("sidebar-child-item")&&(s=n.parentElement.parentElement.attributes["item-name"].value),i.push({title:n.attributes["item-name"].value,parent_page:s,public:n.attributes["item-public"].value});let a=$(n).find(".sidebar-item-control .drop-icon").first();$(n).find(".sidebar-child-item > *").length!=0?a.removeClass("hidden"):a.addClass("hidden");let l=e.findIndex(d=>d.title==n.attributes["item-name"].value),u=e[l];u.parent_page=s,l!=o&&(e.splice(l,1),e.splice(o,0,u))}),i}update_sorted_sidebar(){(this.sorted_public_items||this.sorted_private_items)&&frappe.call({method:"frappe.desk.doctype.workspace.workspace.sort_pages",args:{sb_public_items:this.sorted_public_items,sb_private_items:this.sorted_private_items},callback:function(t){if(t.message){let e="Sidebar Updated Successfully";frappe.show_alert({message:__(e),indicator:"green"})}}})}make_blocks_sortable(){let t=this;this.page_sortable=Sortable.create(this.page.main.find(".codex-editor__redactor").get(0),{handle:".drag-handle",draggable:".ce-block",animation:150,onEnd:function(e){t.editor.blocks.move(e.newIndex,e.oldIndex)},setData:function(){}})}initialize_new_page(){var t=this;this.get_parent_pages();let e=new frappe.ui.Dialog({title:__("New Workspace"),fields:[{label:__("Title"),fieldtype:"Data",fieldname:"title",reqd:1},{label:__("Parent"),fieldtype:"Select",fieldname:"parent",options:this.private_parent_pages},{label:__("Public"),fieldtype:"Check",fieldname:"is_public",depends_on:`eval:${this.has_access}`,onchange:function(){e.set_df_property("parent","options",this.get_value()?t.public_parent_pages:t.private_parent_pages),e.set_df_property("icon","hidden",this.get_value()?0:1),e.set_df_property("indicator_color","hidden",this.get_value()?1:0)}},{fieldtype:"Column Break"},{label:__("Icon"),fieldtype:"Icon",fieldname:"icon",hidden:1},{label:__("Indicator color"),fieldtype:"Select",fieldname:"indicator_color",options:this.indicator_colors}],primary_action_label:__("Create"),primary_action:i=>{if(i.title=strip_html(i.title),!this.validate_page(i))return;e.hide(),this.initialize_editorjs_undo(),this.setup_customization_buttons({is_editable:!0});let n=i.title+(i.is_public?"":"-"+frappe.session.user),o=[{type:"header",data:{text:i.title}}],s={content:JSON.stringify(o),name:n,label:n,title:i.title,public:i.is_public||0,for_user:i.is_public?"":frappe.session.user,icon:i.icon,indicator_color:i.indicator_color,parent_page:i.parent||"",is_editable:!0,selected:!0};this.editor.render({blocks:o}).then(async()=>{this.editor.configuration.readOnly&&(this.is_read_only=!1,await this.editor.readOnly.toggle()),frappe.call({method:"frappe.desk.doctype.workspace.workspace.new_page",args:{new_page:s},callback:function(u){if(u.message){let d=__("Workspace {0} Created Successfully",[s.title.bold()]);frappe.show_alert({message:d,indicator:"green"})}}}),this.update_cached_values(s,s,!0,!0);let l=(s.public?"":"private/")+frappe.router.slug(s.title);frappe.set_route(l),this.make_sidebar(),this.show_sidebar_actions(),localStorage.setItem("new_workspace",JSON.stringify(s))})}});e.show()}validate_page(t,e){let i="",[n,o]=t.is_public?[this.private_pages,this.public_pages]:[this.public_pages,this.private_pages],s=this.sidebar_categories[t.is_public];o&&o.filter(l=>l.title==t.title)[0]&&(i=__("Page with title {0} already exist.",[t.title.bold()])),frappe.router.doctype_route_exist(frappe.router.slug(t.title))&&(i=__("Doctype with same route already exist. Please choose different title."));let a=e&&n.filter(l=>l.parent_page==e.title);return a&&a.every(l=>o&&o.find(u=>u.title==l.title)?(i=__("One of the child page with name {0} already exist in {1} Section. Please update the name of the child page first before moving",[l.title.bold(),s.bold()]),cur_dialog.hide(),!1):!0),i?(frappe.throw(__(i)),!1):!0}add_page_to_sidebar(t){let e=$(".standard-sidebar-section"),i=Ue({},t);i.selected=!0,i.is_editable=!0;let n=this.sidebar_item_container(i);this.add_sidebar_actions(i,n.find(".sidebar-item-control"),!0),n.find(".sidebar-item-control .drag-handle").css("margin-right","8px");let o=i.is_public?e[1]:e[0];if(!i.parent)!i.is_public&&e.first().removeClass("hidden"),n.appendTo(o);else{let a=$(o).find(`[item-name="${i.parent}"]`),l=a.find(".sidebar-child-item"),u=a.find(".drop-icon");l[0]||(l=$('<div class="sidebar-child-item hidden nested-container"></div>').appendTo(a),u.toggleClass("hidden")),n.appendTo(l),l.removeClass("hidden"),a.find(".drop-icon.hidden").removeClass("hidden"),a.find(".drop-icon use").attr("href","#es-line-up")}let s=i.is_public?"public":"private";this.sidebar_items&&this.sidebar_items[s]&&!this.sidebar_items[s][i.title]&&(this.sidebar_items[s][i.title]=n)}initialize_editorjs(t){this.tools={header:{class:this.blocks.header,inlineToolbar:["HeaderSize","bold","italic","link"],config:{default_size:4}},paragraph:{class:this.blocks.paragraph,inlineToolbar:["HeaderSize","bold","italic","link"],config:{placeholder:__("Choose a block or continue typing")}},chart:{class:this.blocks.chart,config:{page_data:this.page_data||[]}},card:{class:this.blocks.card,config:{page_data:this.page_data||[]}},shortcut:{class:this.blocks.shortcut,config:{page_data:this.page_data||[]}},onboarding:{class:this.blocks.onboarding,config:{page_data:this.page_data||[]}},quick_list:{class:this.blocks.quick_list,config:{page_data:this.page_data||[]}},number_card:{class:this.blocks.number_card,config:{page_data:this.page_data||[]}},custom_block:{class:this.blocks.custom_block,config:{page_data:this.page_data||[]}},spacer:this.blocks.spacer,HeaderSize:frappe.workspace_block.tunes.header_size},this.editor=new tf.default({data:{blocks:t||[]},tools:this.tools,autofocus:!1,readOnly:!0,logLevel:"ERROR"})}save_page(t){let e=this;return this.current_page={name:t.title,public:t.public},this.editor.save().then(i=>{let n={};i.blocks.forEach(s=>{s.data.new&&(n[s.type]||(n[s.type]=[]),n[s.type].push(s.data.new),delete s.data.new)});let o=i.blocks.filter(s=>s.type!="card"||s.data.card_name!=="Custom Documents"&&s.data.card_name!=="Custom Reports");return t.content==JSON.stringify(o)&&Object.keys(n).length===0?(this.setup_customization_buttons(t),frappe.show_alert({message:__("No changes made on the page"),indicator:"warning"}),!1):(this.create_page_skeleton(),t.content=JSON.stringify(o),frappe.call({method:"frappe.desk.doctype.workspace.workspace.save_page",args:{title:t.title,public:t.public||0,new_widgets:n,blocks:JSON.stringify(o)},callback:function(s){s.message&&(e.discard=!0,e.update_cached_values(t,t),e.reload(),frappe.show_alert({message:__("Page Saved Successfully"),indicator:"green"}))}}),!0)}).catch(i=>{})}reload(){this.sorted_public_items=[],this.sorted_private_items=[],this.setup_pages(!0),this.discard=!1,this.undo.readOnly=!0}create_page_skeleton(){this.body.find(".workspace-skeleton").length||(this.body.prepend(frappe.render_template("workspace_loading_skeleton")),this.body.find(".codex-editor").addClass("hidden"))}remove_page_skeleton(){this.body.find(".codex-editor").removeClass("hidden"),this.body.find(".workspace-skeleton").remove()}create_sidebar_skeleton(){$(".workspace-sidebar-skeleton").length||($(frappe.render_template("workspace_sidebar_loading_skeleton")).insertBefore(this.sidebar),this.sidebar.addClass("hidden"))}remove_sidebar_skeleton(){this.sidebar.removeClass("hidden"),$(".workspace-sidebar-skeleton").remove()}register_awesomebar_shortcut(){"abcdefghijklmnopqrstuvwxyz".split("").forEach(t=>{let e={action:i=>($("#navbar-search").focus(),!1),page:this.page};frappe.ui.keys.add_shortcut(Ue({shortcut:t},e)),frappe.ui.keys.add_shortcut(Ue({shortcut:`shift+${t}`},e))})}};var rr=class{constructor(t){Object.assign(this,t),this.editing=Boolean(this.values&&Object.keys(this.values).length)}make(){this.make_dialog(),this.setup_dialog_events(),this.dialog.show(),window.cur_dialog=this.dialog,this.editing&&this.set_default_values()}make_dialog(){this.dialog=new frappe.ui.Dialog({title:this.get_title(),fields:this.get_fields(),primary_action:t=>{t=this.process_data(t),!this.editing&&!t.name&&(t.name=`${this.type}-${this.label}-${frappe.utils.get_random(20)}`),this.dialog.hide(),this.primary_action(t)},primary_action_label:this.primary_action_label||__("Add")})}get_title(){let t=this.editing?"Edit":"Add",e=t=t+" "+frappe.model.unscrub(this.type);return __(e)}get_fields(){}set_default_values(){return this.dialog.set_values(this.values)}process_data(t){return t}setup_dialog_events(){}hide_field(t){this.dialog.set_df_property(t,"hidden",!0)}show_field(t){this.dialog.set_df_property(t,"hidden",!1)}setup_filter(t){this.filter_group&&(this.filter_group.wrapper.empty(),delete this.filter_group);let e=this.dialog.get_field("filter_area_loading").$wrapper;$(`<span class="text-muted">${__("Loading Filters...")}</span>`).appendTo(e),this.filters=[],this.generate_filter_from_json&&this.generate_filter_from_json(),this.filter_group=new frappe.ui.FilterGroup({parent:this.dialog.get_field("filter_area").$wrapper,doctype:t,on_change:()=>{}}),frappe.model.with_doctype(t,()=>{this.filter_group.add_filters_to_filter_group(this.filters),this.hide_field("filter_area_loading"),this.show_field("filter_area")})}},os=class extends rr{constructor(t){super(t)}get_fields(){return[{fieldtype:"Link",fieldname:"chart_name",label:"Chart Name",options:"Dashboard Chart",reqd:1},{fieldtype:"Data",fieldname:"label",label:"Label"}]}process_data(t){return t.label=t.label?t.label:t.chart_name,t}},ss=class extends rr{constructor(t){super(t)}get_fields(){return[{fieldtype:"Link",fieldname:"document_type",label:"DocType",options:"DocType",reqd:1,onchange:()=>{this.document_type=this.dialog.get_value("document_type"),this.document_type&&this.setup_filter(this.document_type)},get_query:()=>({filters:{issingle:0,istable:0}})},{fieldtype:"Column Break",fieldname:"column_break_4"},{fieldtype:"Data",fieldname:"label",label:"Label"},{fieldtype:"Section Break",fieldname:"filter_section",label:__("Add Filters"),depends_on:"eval: doc.document_type"},{fieldtype:"HTML",fieldname:"filter_area_loading"},{fieldtype:"HTML",fieldname:"filter_area"}]}generate_filter_from_json(){this.values&&this.values.quick_list_filter&&(this.filters=frappe.utils.get_filter_from_json(this.values.quick_list_filter,this.values.document_type))}process_data(t){if(this.filter_group){let e=this.filter_group.get_filters();t.quick_list_filter=JSON.stringify(e)}return t.label=t.label?t.label:t.document_type,t}},as=class extends rr{constructor(t){super(t)}get_fields(){return[{fieldtype:"Link",fieldname:"onboarding_name",label:"Onboarding Name",options:"Module Onboarding",reqd:1}]}},ls=class extends rr{constructor(t){super(t)}get_fields(){let t=this;return[{fieldtype:"Data",fieldname:"label",label:__("Label")},{fieldtype:"HTML Editor",fieldname:"description",label:__("Description"),max_height:"7rem"},{fieldname:"links",fieldtype:"Table",label:__("Card Links"),editable_grid:1,data:t.values?JSON.parse(t.values.links):[],get_data:()=>t.values?JSON.parse(t.values.links):[],fields:[{fieldname:"link_type",fieldtype:"Select",in_list_view:1,label:"Link Type",reqd:1,options:["DocType","Page","Report"]},{fieldname:"link_to",fieldtype:"Dynamic Link",in_list_view:1,label:"Link To",reqd:1,get_options:e=>e.doc.link_type,get_query:function(e){if(e.link_type=="DocType")return{filters:{istable:0}}}},{fieldname:"label",fieldtype:"Data",in_list_view:1,label:"Label"},{fieldname:"icon",fieldtype:"Icon",label:"Icon"},{fieldname:"column_break_7",fieldtype:"Column Break"},{fieldname:"dependencies",fieldtype:"Data",label:"Dependencies"},{fieldname:"only_for",fieldtype:"Link",label:"Only for",options:"Country"},{default:"0",fieldname:"onboard",fieldtype:"Check",label:"Onboard"},{default:"0",fieldname:"is_query_report",fieldtype:"Check",label:"Is Query Report"}]}]}process_data(t){let e="";return t.links?t.links.map((i,n)=>{let o=n+1;i.link_type||(e=__("Following fields have missing values")+": <br><br><ul>",e+=`<li>${__("Link Type in Row")} ${o}</li>`),i.link_to||(e+=`<li>${__("Link To in Row")} ${o}</li>`),i.label=i.label?i.label:i.link_to}):e=__("You must add atleast one link."),e&&(e+="</ul>",frappe.throw({message:__(e),title:__("Missing Values Required"),indicator:"orange"})),t.label=t.label?t.label:t.chart_name,t}},cs=class extends rr{constructor(t){super(t)}hide_filters(){this.hide_field("count_section_break"),this.hide_field("filters_section_break")}show_filters(){this.show_field("count_section_break"),this.show_field("filters_section_break")}get_fields(){return[{fieldtype:"Select",fieldname:"type",label:"Type",reqd:1,options:`DocType
Report
Page
Dashboard
URL`,onchange:()=>{this.dialog.get_value("type")=="DocType"?this.dialog.fields_dict.link_to.get_query=()=>({query:"frappe.core.report.permitted_documents_for_user.permitted_documents_for_user.query_doctypes",filters:{user:frappe.session.user,include_single_doctypes:!0}}):this.dialog.fields_dict.link_to.get_query=null}},{fieldtype:"Data",fieldname:"label",label:"Label"},{fieldtype:"Column Break",fieldname:"column_break_4"},{fieldtype:"Dynamic Link",fieldname:"link_to",label:"Link To",options:"type",onchange:()=>{let t=this.dialog.get_value("link_to");t&&this.dialog.get_value("type")=="DocType"?frappe.model.with_doctype(t,async()=>{var o;let e=frappe.get_meta(t);t&&frappe.boot.single_types.includes(t)?this.hide_filters():t&&(this.setup_filter(t),this.show_filters());let i=["List","Report Builder","Dashboard","New"];e.is_tree===1&&i.push("Tree"),frappe.boot.calendars.includes(t)&&i.push("Calendar");let n=await frappe.db.get_value("Kanban Board",{reference_doctype:t},"name");(o=n==null?void 0:n.message)!=null&&o.name&&i.push("Kanban"),this.dialog.set_df_property("doc_view","options",i.join(`
`))}):this.hide_filters()},depends_on:t=>t.type!="URL",mandatory_depends_on:t=>t.type!="URL"},{fieldtype:"Data",fieldname:"url",label:"URL",default:"",depends_on:t=>t.type=="URL",mandatory_depends_on:t=>t.type=="URL"},{fieldtype:"Select",fieldname:"doc_view",label:"DocType View",options:`List
Report Builder
Dashboard
Tree
New
Calendar
Kanban`,description:__("Which view of the associated DocType should this shortcut take you to?"),default:"List",depends_on:t=>{if(this.dialog){let e=this.dialog.get_value("link_to"),i=frappe.boot.single_types.includes(e);return e&&t.type=="DocType"&&!i}return!1},onchange:()=>{this.dialog.get_value("doc_view")=="Kanban"?this.dialog.fields_dict.kanban_board.get_query=()=>({filters:{reference_doctype:this.dialog.get_value("link_to")}}):this.dialog.fields_dict.link_to.get_query=null}},{fieldtype:"Link",fieldname:"kanban_board",label:"Kanban Board",options:"Kanban Board",depends_on:()=>{var e;return((e=this.dialog)==null?void 0:e.get_value("doc_view"))=="Kanban"},mandatory_depends_on:()=>{var e;return((e=this.dialog)==null?void 0:e.get_value("doc_view"))=="Kanban"}},{fieldtype:"Section Break",fieldname:"filters_section_break",label:__("Count Filter"),hidden:1},{fieldtype:"HTML",fieldname:"filter_area_loading"},{fieldtype:"HTML",fieldname:"filter_area",hidden:1},{fieldtype:"Section Break",fieldname:"count_section_break",label:__("Count Customizations"),hidden:1},{fieldtype:"Select",fieldname:"color",label:__("Color"),options:["Grey","Green","Red","Orange","Pink","Yellow","Blue","Cyan"],default:"Grey",input_class:"color-select",onchange:()=>{let t=this.dialog.fields_dict.color.value.toLowerCase(),e=this.dialog.fields_dict.color.$input;e.parent().find(".color-box").get(0)||$('<div class="color-box"></div>').insertBefore(e.get(0)),e.parent().find(".color-box").get(0).style.backgroundColor=`var(--text-on-${t})`}},{fieldtype:"Column Break",fieldname:"column_break_3"},{fieldtype:"Data",fieldname:"format",label:__("Format"),description:__("For Example: {} Open")}]}set_default_values(){super.set_default_values().then(()=>{this.dialog.fields_dict.link_to.df.onchange()})}generate_filter_from_json(){this.values&&this.values.stats_filter&&(this.filters=frappe.utils.get_filter_from_json(this.values.stats_filter,this.values.link_to))}process_data(t){if(this.dialog.get_value("type")=="DocType"&&this.filter_group){let e=this.filter_group.get_filters();t.stats_filter=JSON.stringify(e)}if(t.label=t.label?t.label:frappe.model.unscrub(t.link_to),t.url){let e=t.url;t.url.startsWith("/")&&(e=frappe.urllib.get_base_url()+t.url),!validate_url(e)&&frappe.throw({message:__("<b>{0}</b> is not a valid URL",[t.url]),title:__("Invalid URL"),indicator:"red"}),t.label||(t.label="No Label (URL)")}return t}},us=class extends rr{constructor(t){super(t)}get_fields(){let t;return this.for_workspace?[{fieldtype:"Link",fieldname:"number_card_name",label:__("Number Card"),options:"Number Card",reqd:1,get_query:()=>({query:"frappe.desk.doctype.number_card.number_card.get_cards_for_user",filters:{document_type:this.document_type}})},{fieldtype:"Data",fieldname:"label",label:__("Label")}]:(t=[{fieldtype:"Select",label:__("Choose Existing Card or create New Card"),fieldname:"new_or_existing",options:["New Card","Existing Card"]},{fieldtype:"Link",fieldname:"card",label:__("Number Cards"),options:"Number Card",get_query:()=>({query:"frappe.desk.doctype.number_card.number_card.get_cards_for_user",filters:{document_type:this.document_type}}),depends_on:'eval: doc.new_or_existing == "Existing Card"'},{fieldtype:"Section Break",fieldname:"sb_1",depends_on:'eval: doc.new_or_existing == "New Card"'},{label:__("Label"),fieldname:"label",fieldtype:"Data",mandatory_depends_on:'eval: doc.new_or_existing == "New Card"'},{label:__("Doctype"),fieldname:"document_type",fieldtype:"Link",options:"DocType",onchange:()=>{this.document_type=this.dialog.get_value("document_type"),this.set_aggregate_function_fields(this.dialog.get_values()),this.setup_filter(this.document_type)},hidden:1},{label:__("Color"),fieldname:"color",fieldtype:"Color"},{fieldtype:"Column Break",fieldname:"cb_1"},{label:__("Function"),fieldname:"function",fieldtype:"Select",options:["Count","Sum","Average","Minimum","Maximum"],mandatory_depends_on:'eval: doc.new_or_existing == "New Card"'},{label:__("Function Based On"),fieldname:"aggregate_function_based_on",fieldtype:"Select",depends_on:"eval: doc.function !== 'Count'",mandatory_depends_on:'eval: doc.function !== "Count" && doc.new_or_existing == "New Card"'},{fieldtype:"Section Break",fieldname:"sb_1",label:__("Add Filters"),depends_on:'eval: doc.new_or_existing == "New Card"'},{fieldtype:"HTML",fieldname:"filter_area_loading"},{fieldtype:"HTML",fieldname:"filter_area",hidden:1},{fieldtype:"Section Break",fieldname:"sb_1"}],t)}setup_dialog_events(){!this.document_type&&!this.for_workspace&&(this.default_values&&this.default_values.doctype?(this.document_type=this.default_values.doctype,this.setup_filter(this.default_values.doctype),this.set_aggregate_function_fields()):this.show_field("document_type"))}set_aggregate_function_fields(){let t=[];this.document_type&&frappe.get_meta(this.document_type)&&frappe.get_meta(this.document_type).fields.map(e=>{if(frappe.model.numeric_fieldtypes.includes(e.fieldtype)){if(e.fieldtype=="Currency"&&(!e.options||e.options!=="Company:company:default_currency"))return;t.push({label:e.label,value:e.fieldname})}}),this.dialog.set_df_property("aggregate_function_based_on","options",t)}process_data(t){return this.for_workspace?(t.label=t.label?t.label:t.number_card_name,t):(t.new_or_existing=="Existing Card"&&(t.name=t.card),t.stats_filter=this.filter_group&&JSON.stringify(this.filter_group.get_filters()),t.document_type=this.document_type,t)}},ds=class extends rr{constructor(t){super(t)}get_fields(){return[{fieldtype:"Link",fieldname:"custom_block_name",label:"Custom Block Name",options:"Custom HTML Block",reqd:1,get_query:()=>({query:"frappe.desk.doctype.custom_html_block.custom_html_block.get_custom_blocks_for_user"})}]}};function _r(r){return{chart:os,shortcut:cs,links:ls,onboarding:as,quick_list:ss,number_card:us,custom_block:ds}[r]||rr}var lt=class{constructor(t){Object.assign(this,t)}make(t,e,i=t){let n=this.config.page_data[t+"s"].items.find(o=>frappe.utils.unescape_html(o.label)==frappe.utils.unescape_html(__(e)));return n?(this.wrapper.innerHTML="",n.in_customize_mode=!this.readOnly,this.block_widget=new frappe.widget.SingleWidgetGroup({container:this.wrapper,type:i,class_name:t=="chart"?"widget-charts":"",options:this.options,widgets:n,api:this.api,block:this.block}),this.wrapper.setAttribute(t+"_name",e),this.readOnly||this.block_widget.customize(),!0):!1}rendered(t){t&&(this.wrapper=t),!this.readOnly&&this.resizer();let e=this.wrapper.closest(".ce-block");this.set_col_class(e,this.get_col())}resizer(){this.wrapper.className=this.wrapper.className+" resizable";var t=document.createElement("div");t.className="resizer",this.wrapper.parentElement.appendChild(t),t.addEventListener("mousedown",o,!1);let e=this;var i,n;function o(u){i=u.clientX,n=this.parentElement.offsetWidth,document.documentElement.addEventListener("mousemove",s,!1),document.documentElement.addEventListener("mouseup",l,!1)}function s(u){$(this).css("cursor","col-resize"),$(".widget").css("pointer-events","none"),$(e.wrapper.parentElement).find(".resizer").css("border-right","3px solid var(--gray-400)"),a(),n+u.clientX-i-n>60?(i=u.clientX,e.increase_width()):n+u.clientX-i-n<-60&&(i=u.clientX,e.decrease_width())}function a(){document.selection?document.selection.empty():window.getSelection().removeAllRanges()}function l(){$(this).css("cursor","default"),$(".widget").css("pointer-events","auto"),$(e.wrapper.parentElement).find(".resizer").css("border-right","0px solid transparent"),document.documentElement.removeEventListener("mousemove",s,!1),document.documentElement.removeEventListener("mouseup",l,!1)}}new(t,e=t){let i=this,n=_r(e),o=t+"_name";this.dialog=new n({for_workspace:!0,label:this.label,type:e,primary_action:s=>{s.in_customize_mode=1,this.block_widget=frappe.widget.make_widget(mt(Ue({},s),{widget_type:e,container:this.wrapper,options:mt(Ue({},this.options),{on_delete:()=>this.api.blocks.delete(),on_edit:()=>this.on_edit(this.block_widget)})})),this.block_widget.customize(this.options),this.wrapper.setAttribute(o,this.block_widget.label),$(this.wrapper).find(".widget").addClass(`${e}`),this.new_block_widget=this.block_widget.get_config(),this.add_settings_button()}}),!this.readOnly&&this.data&&!this.data[o]&&(this.dialog.make(),this.dialog.dialog.get_close_btn().click(()=>{i.wrapper.closest(".ce-block").remove()}))}on_edit(t){let e=t.edit_dialog.type+"_name";t.edit_dialog.type=="links"&&(e="card_name");let i=t.get_config();this.block_widget.widgets=i,this.wrapper.setAttribute(e,i.label),this.new_block_widget=t.get_config()}add_new_block_button(){let t=$(`
			<div class="new-block-button">${frappe.utils.icon("add-round","lg")}</div>
		`);t.appendTo(this.wrapper),t.click(e=>{e.stopPropagation();let i=this.api.blocks.getCurrentBlockIndex()+1;this.api.blocks.insert("paragraph",{},{},i),this.api.caret.setToBlock(i)})}add_settings_button(){let t=this;this.dropdown_list=[{label:"Delete",title:"Delete Block",icon:frappe.utils.icon("delete-active","sm"),action:()=>this.api.blocks.delete()},{label:"Expand",title:"Expand Block",icon:frappe.utils.icon("expand-alt","sm"),action:()=>this.increase_width()},{label:"Shrink",title:"Shrink Block",icon:frappe.utils.icon("shrink","sm"),action:()=>this.decrease_width()},{label:"Move Up",title:"Move Up",icon:frappe.utils.icon("up-arrow","sm"),action:()=>this.move_block("up")},{label:"Move Down",title:"Move Down",icon:frappe.utils.icon("down-arrow","sm"),action:()=>this.move_block("down")}];let e=$(this.wrapper).find(".widget-control"),i=$(`
			<div class="dropdown-btn">
				<button class="btn btn-secondary btn-xs setting-btn" title="${__("Setting")}">
					${frappe.utils.icon("dot-horizontal","xs")}
				</button>
				<div class="dropdown-list hidden"></div>
			</div>
		`),n=function(o,s,a,l){let u=$(`
				<div class="dropdown-item" title="${__(s)}">
					<span class="dropdown-item-icon">${a}</span>
					<span class="dropdown-item-label">${__(o)}</span>
				</div>
			`);return u.click(d=>{d.stopPropagation(),l&&l()}),u};i.click(o=>{o.stopPropagation(),i.find(".dropdown-list").toggleClass("hidden")}),e.prepend(i),this.dropdown_list.forEach(o=>{(o.label=="Expand"||o.label=="Shrink")&&t.options&&!t.options.allow_resize||i.find(".dropdown-list").append(n(o.label,o.title,o.icon,o.action))})}get_col(){let t=this.col||12,e="col-xs-12",i=this.wrapper.closest(".ce-block"),n=new RegExp(/\bcol-.+?\b/,"g");if(i&&i.className.match(n)){i.classList.forEach(function(s){s.match(n)&&(e=s)});let o=e.split("-");t=parseInt(o[2])}return t}decrease_width(){this.update_width("decrease")}increase_width(){this.update_width("increase")}update_width(t){let e=this.options&&this.options.min_width||3,i=this.api.blocks.getCurrentBlockIndex();if(i<0)return;let n=this.api.blocks.getBlockByIndex(i);if(!n)return;let o=n.holder,s="col-xs-12",a=new RegExp(/\bcol-.+?\b/,"g");if(o.className.match(a)){o.classList.forEach(p=>{p.match(a)&&(s=p)});let l=s.split("-"),u=parseInt(l[2]),d=!0;t=="increase"?(d=u<=11,u=u+1):t=="decrease"&&(d=u>e,u=u-1),d&&this.set_col_class(o,u)}}set_col_class(t,e){let i=$.grep(t.classList,function(o){return o.indexOf("col-")!==0});t.classList="",i.forEach(o=>{t.classList.add(o)});let n="col-xs-12";e<=12&&e>=7?n="col-xs-"+e:e==6||e==5?(t.classList.add("col-xs-12"),n="col-sm-"+e):e==4?(t.classList.add("col-xs-12"),t.classList.add("col-sm-6"),n="col-md-"+e):(e==3||e==2)&&(t.classList.add("col-xs-12"),t.classList.add("col-sm-6"),t.classList.add("col-md-4"),n="col-lg-"+e),t.classList.add(n)}move_block(t){let e=this.api.blocks.getCurrentBlockIndex(),i=e+(t=="down"?1:-1);this.api.blocks.move(i,e)}};var Ni=class extends lt{constructor({data:t,config:e,api:i,readOnly:n}){super({config:e,api:i,readOnly:n}),this._settings=this.config,this._data=this.normalizeData(t),this._element=this.getTag(),this.data=t,this.col=this.data.col?this.data.col:"12"}normalizeData(t){let e={};return typeof t!="object"&&(t={}),e.text=t.text||"",e.col=parseInt(t.col)||12,e}render(){if(this.wrapper=document.createElement("div"),!this.readOnly){let t=$('<div class="widget-head"></div>'),e=$('<div class="widget-control"></div>');return t[0].appendChild(this._element),e.appendTo(t),t.appendTo(this.wrapper),this.wrapper.classList.add("widget","header","edit-mode"),this.add_settings_button(),this.add_new_block_button(),frappe.utils.add_custom_button(frappe.utils.icon("drag","xs"),null,"drag-handle",__("Drag"),null,e),this.wrapper}return this._element}merge(t){let e={text:this.data.text+t.text};this.data=e}validate(t){return t.text.trim()!==""}save(){return this.wrapper=this._element,{text:this.wrapper.innerHTML.replace(/&nbsp;/gi,""),col:this.get_col()}}rendered(){super.rendered(this._element)}static get sanitize(){return{level:!1,text:{br:!0,b:!0,i:!0,a:!0,span:!0}}}static get isReadOnlySupported(){return!0}get data(){return this._data.text=this._element.innerHTML,this._data}set data(t){if(this._data=this.normalizeData(t),t.text!==void 0){let e=this._data.text||"",i=/<[a-z][\s\S]*>/i.test(e);this._element.innerHTML=i?e:`<span class="h${this._settings.default_size}">${e}</span>`}!this.readOnly&&this.wrapper&&this.wrapper.classList.add("widget","header")}getTag(){let t=document.createElement("DIV"),e=this._data.text||"&nbsp";return t.innerHTML=`<span class="h${this._settings.default_size}"><b>${e}</b></span>`,t.classList.add("ce-header"),this.readOnly||(t.contentEditable=!0),t.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),t}static get toolbox(){return{title:"Heading",icon:frappe.utils.icon("header","sm")}}};var Br=class extends lt{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:t,config:e,api:i,readOnly:n}){super({config:e,api:i,readOnly:n}),this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=this.config.placeholder?this.config.placeholder:Br.DEFAULT_PLACEHOLDER,this._data={},this._element=this.drawView(),this._preserveBlank=this.config.preserveBlank!==void 0?this.config.preserveBlank:!1,this.data=t,this.col=this.data.col?this.data.col:"12"}onKeyUp(t){if(!this.wrapper||(this.show_hide_block_list(!0),t.code!=="Backspace"&&t.code!=="Delete"))return;let{textContent:e}=this._element;e===""&&(this.show_hide_block_list(),this._element.innerHTML="")}show_hide_block_list(t){let i=($(this.wrapper).hasClass("ce-paragraph")?$(this.wrapper.parentElement):$(this.wrapper)).find(".block-list-container.dropdown-list");i.removeClass("hidden"),t&&i.addClass("hidden")}drawView(){let t=document.createElement("DIV");return t.classList.add(this._CSS.wrapper,this._CSS.block,"widget"),t.contentEditable=!1,this.readOnly||(t.contentEditable=!0,t.addEventListener("focus",()=>{let{textContent:e}=this._element;e===""&&this.show_hide_block_list()}),t.addEventListener("blur",()=>{!this.over_block_list_item&&this.show_hide_block_list(!0)}),t.dataset.placeholder=this.api.i18n.t(this._placeholder),t.addEventListener("keyup",this.onKeyUp)),t}open_block_list(){let t=__("Templates"),e=$(`
			<div class="block-list-container dropdown-list">
				<div class="dropdown-title">${t.toUpperCase()}</div>
			</div>
		`),i=frappe.workspace_block.blocks;Object.keys(i).forEach(n=>{let o=$(`
				<div class="block-list-item dropdown-item">
					<span class="dropdown-item-icon">${i[n].toolbox.icon}</span>
					<span class="dropdown-item-label">${__(i[n].toolbox.title)}</span>
				</div>
			`);o.click(s=>{s.stopPropagation();let a=this.api.blocks.getCurrentBlockIndex();this.api.blocks.delete(),this.api.blocks.insert(n,{},{},a),this.api.caret.setToBlock(a)}),o.mouseenter(()=>{this.over_block_list_item=!0}).mouseleave(()=>{this.over_block_list_item=!1}),e.append(o)}),e.addClass("hidden"),e.appendTo(this.wrapper)}render(){if(this.wrapper=document.createElement("div"),!this.readOnly){let t=$('<div class="widget-control paragraph-control"></div>');return this.wrapper.appendChild(this._element),this._element.classList.remove("widget"),t.appendTo(this.wrapper),this.wrapper.classList.add("widget","paragraph","edit-mode"),this.open_block_list(),this.add_new_block_button(),this.add_settings_button(),frappe.utils.add_custom_button(frappe.utils.icon("drag","xs"),null,"drag-handle",__("Drag"),null,t),this.wrapper}return this._element}merge(t){let e={text:this.data.text+t.text};this.data=e}validate(t){return!(t.text.trim()===""&&!this._preserveBlank)}save(){return this.wrapper=this._element,{text:this.wrapper.innerHTML,col:this.get_col()}}rendered(){super.rendered(this._element)}onPaste(t){let e={text:t.detail.data.innerHTML};this.data=e}static get sanitize(){return{text:{br:!0,b:!0,i:!0,a:!0,span:!0}}}static get isReadOnlySupported(){return!0}get data(){let t=this._element.innerHTML;return this._data.text=t,this._data}set data(t){this._data=t||{},this._element.innerHTML=__(this._data.text)||""}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{title:"Text",icon:frappe.utils.icon("text","sm")}}};var Di=class extends lt{static get toolbox(){return{title:"Card",icon:frappe.utils.icon("card","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n,block:o}){super({data:t,api:e,config:i,readOnly:n,block:o}),this.sections={},this.col=this.data.col?this.data.col:"4",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0}}render(){if(this.wrapper=document.createElement("div"),this.new("card","links"),!(this.data&&this.data.card_name&&!this.make("card",this.data.card_name,"links")))return this.readOnly||($(this.wrapper).find(".widget").addClass("links edit-mode"),this.add_settings_button(),this.add_new_block_button()),this.wrapper}validate(t){return!!t.card_name}save(){return{card_name:this.wrapper.getAttribute("card_name"),col:this.get_col(),new:this.new_block_widget}}};var Fi=class extends lt{static get toolbox(){return{title:"Chart",icon:frappe.utils.icon("chart","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n,block:o}){super({data:t,api:e,config:i,readOnly:n,block:o}),this.col=this.data.col?this.data.col:"12",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0,min_width:6,max_widget_count:2}}render(){if(this.wrapper=document.createElement("div"),this.new("chart"),!(this.data&&this.data.chart_name&&!this.make("chart",this.data.chart_name)))return this.readOnly||($(this.wrapper).find(".widget").addClass("chart edit-mode"),this.add_settings_button(),this.add_new_block_button()),this.wrapper}validate(t){return!!t.chart_name}save(){return{chart_name:this.wrapper.getAttribute("chart_name"),col:this.get_col(),new:this.new_block_widget}}};var zi=class extends lt{static get toolbox(){return{title:"Shortcut",icon:frappe.utils.icon("shortcut","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n,block:o}){super({data:t,api:e,config:i,readOnly:n,block:o}),this.col=this.data.col?this.data.col:"3",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0}}rendered(){super.rendered(),this.remove_last_divider(),$(window).resize(()=>{this.remove_last_divider()})}remove_last_divider(){let t=this.wrapper.closest(".ce-block"),e=$(".layout-main-section")[0].offsetWidth,i=t.offsetLeft+t.offsetWidth;e-i<=110?$(t).find(".divider").addClass("hidden"):$(t).find(".divider").removeClass("hidden")}render(){if(this.wrapper=document.createElement("div"),this.new("shortcut"),!(this.data&&this.data.shortcut_name&&!this.make("shortcut",this.data.shortcut_name)))return this.readOnly||($(this.wrapper).find(".widget").addClass("shortcut edit-mode"),this.add_settings_button(),this.add_new_block_button()),this.wrapper}validate(t){return!!t.shortcut_name}save(){return{shortcut_name:this.wrapper.getAttribute("shortcut_name"),col:this.get_col(),new:this.new_block_widget}}};var Hi=class extends lt{static get toolbox(){return{title:"Spacer",icon:frappe.utils.icon("spacer","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n}){super({data:t,api:e,config:i,readOnly:n}),this.col=this.data.col?this.data.col:"12"}render(){if(this.wrapper=document.createElement("div"),this.wrapper.classList.add("widget","spacer"),!this.readOnly){let t=$(`
				<div class="widget-head">
					<div class="spacer-left"></div>
					<div>${__("Spacer")}</div>
					<div class="widget-control"></div>
				</div>
			`);t.appendTo(this.wrapper),this.wrapper.classList.add("edit-mode"),this.wrapper.style.minHeight=40+"px";let e=t.find(".widget-control");this.add_settings_button(),this.add_new_block_button(),frappe.utils.add_custom_button(frappe.utils.icon("drag","xs"),null,"drag-handle",__("Drag"),null,e)}return this.wrapper}save(){return{col:this.get_col()}}};var qi=class extends lt{static get toolbox(){return{title:"Onboarding",icon:frappe.utils.icon("onboarding","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n,block:o}){super({data:t,api:e,config:i,readOnly:n,block:o}),this.col=this.data.col?this.data.col:"12",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!1}}rendered(){let t=this.wrapper.closest(".ce-block");this.readOnly&&!$(this.wrapper).find(".onboarding-widget-box").is(":visible")&&$(t).hide(),this.set_col_class(t,this.get_col())}new(t,e=t){let i=this,n=_r(e),o=t+"_name";this.dialog=new n({label:this.label,type:e,primary_action:s=>{s.in_customize_mode=1,this.block_widget=frappe.widget.make_widget(mt(Ue({},s),{widget_type:e,container:this.wrapper,options:mt(Ue({},this.options),{on_delete:()=>this.api.blocks.delete(),on_edit:()=>this.on_edit(this.block_widget)}),new:!0})),this.block_widget.customize(this.options),this.wrapper.setAttribute(o,this.block_widget.label||this.block_widget.onboarding_name),$(this.wrapper).find(".widget").addClass(`${e} edit-mode`),this.new_block_widget=this.block_widget.get_config(),this.add_settings_button()}}),!this.readOnly&&this.data&&!this.data[o]&&(this.dialog.make(),this.dialog.dialog.get_close_btn().click(()=>{i.wrapper.closest(".ce-block").remove()}))}make(t,e){let i=this.config.page_data.onboardings.items.find(n=>n.label==__(e));return i?(this.wrapper.innerHTML="",i.in_customize_mode=!this.readOnly,this.block_widget=frappe.widget.make_widget({container:this.wrapper,widget_type:"onboarding",in_customize_mode:i.in_customize_mode,options:mt(Ue({},this.options),{on_delete:()=>this.api.blocks.delete(),on_edit:()=>this.on_edit(this.block_widget)}),label:i.label,title:i.title||__("Let's Get Started"),subtitle:i.subtitle,steps:i.items,success:i.success,docs_url:i.docs_url,user_can_dismiss:i.user_can_dismiss}),this.wrapper.setAttribute(t+"_name",e),this.readOnly||this.block_widget.customize(this.options),!0):!1}render(){if(!frappe.is_mobile()&&(this.wrapper=document.createElement("div"),this.new("onboarding"),!(this.data&&this.data.onboarding_name&&!this.make("onboarding",this.data.onboarding_name))))return this.readOnly||($(this.wrapper).find(".widget").addClass("onboarding edit-mode"),this.add_settings_button(),this.add_new_block_button()),$(this.wrapper).css("padding-bottom","20px"),this.wrapper}validate(t){return!!t.onboarding_name}save(){return{onboarding_name:this.wrapper.getAttribute("onboarding_name"),col:this.get_col(),new:this.new_block_widget}}};var Wi=class extends lt{static get toolbox(){return{title:"Quick List",icon:frappe.utils.icon("list","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n,block:o}){super({data:t,api:e,config:i,readOnly:n,block:o}),this.col=this.data.col?this.data.col:"4",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0,min_width:4,max_widget_count:2}}render(){if(this.wrapper=document.createElement("div"),this.new("quick_list"),!(this.data&&this.data.quick_list_name&&!this.make("quick_list",this.data.quick_list_name)))return this.readOnly||($(this.wrapper).find(".widget").addClass("quick_list edit-mode"),this.add_settings_button(),this.add_new_block_button()),this.wrapper}validate(t){return!!t.quick_list_name}save(){return{quick_list_name:this.wrapper.getAttribute("quick_list_name"),col:this.get_col(),new:this.new_block_widget}}};var Ui=class extends lt{static get toolbox(){return{title:"Number Card",icon:frappe.utils.icon("number-card","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n,block:o}){super({data:t,api:e,config:i,readOnly:n,block:o}),this.sections={},this.col=this.data.col?this.data.col:"4",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0,for_workspace:!0}}render(){if(this.wrapper=document.createElement("div"),this.new("number_card"),!(this.data&&this.data.number_card_name&&!this.make("number_card",this.data.number_card_name)))return this.readOnly||($(this.wrapper).find(".widget").addClass("number_card edit-mode"),this.add_settings_button(),this.add_new_block_button()),this.wrapper}validate(t){return!!t.number_card_name}save(){return{number_card_name:this.wrapper.getAttribute("number_card_name"),col:this.get_col(),new:this.new_block_widget}}};var Vi=class extends lt{static get toolbox(){return{title:"Custom Block",icon:frappe.utils.icon("edit","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n,block:o}){super({data:t,api:e,config:i,readOnly:n,block:o}),this.col=this.data.col?this.data.col:"12",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0,min_width:2}}render(){if(this.wrapper=document.createElement("div"),this.new("custom_block"),!(this.data&&this.data.custom_block_name&&!this.make("custom_block",this.data.custom_block_name)))return this.readOnly||($(this.wrapper).find(".widget").addClass("custom_block edit-mode"),this.add_settings_button(),this.add_new_block_button()),this.wrapper}validate(t){return!!t.custom_block_name}save(){return{custom_block_name:this.wrapper.getAttribute("custom_block_name"),col:this.get_col(),new:this.new_block_widget}}};var Yi=class{static get isInline(){return!0}get state(){return this._state}set state(t){this._state=t}get title(){return"Header Size"}constructor({api:t}){this.api=t,this.button=null,this._state=!0,this.selectedText=null,this.range=null,this.headerLevels=[]}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML=`${frappe.utils.icon("header","sm")}${frappe.utils.icon("small-down","xs")}`,this.button.classList="header-inline-tool",this.button}checkState(t){let e=this.api.selection.findParentTag("SPAN");for(let n of["h1","h2","h3","h4","h5","h6"])if(e&&e.classList.contains(n)){let o=n.match(/\d+/)[0];$(".header-inline-tool svg:first-child").replaceWith(frappe.utils.icon(`header-${o}`,"md"))}t.anchorNode}change_size(t,e){if(!t)return;let i=document.createElement("SPAN");i.classList.add(`h${e}`),i.innerText=t.toString(),this.remove_parent_tag(t,t.commonAncestorContainer,i),t.extractContents(),t.insertNode(i),this.api.inlineToolbar.close()}remove_parent_tag(t,e,i){let n=t.startContainer.data,o=i.innerText,s=e.parentElement;n!==o&&(s=e),s.innerText==o&&!s.classList.contains("ce-header")&&!s.classList.contains("ce-paragraph")&&(this.remove_parent_tag(t,e.parentElement,i),s.remove())}surround(t){this.selectedText=t.cloneContents(),this.actions.hidden=!this.actions.hidden,this.range=this.actions.hidden?null:t,this.state=!this.actions.hidden}renderActions(){this.actions=document.createElement("div"),this.actions.classList="header-level-select",this.headerLevels=new Array(6).fill().map((t,e)=>{let i=document.createElement("div");return i.classList.add(`h${e+1}`,"header-level"),i.innerText=`Header ${e+1}`,i});for(let[t,e]of this.headerLevels.entries())this.actions.appendChild(e),this.api.listeners.on(e,"click",()=>{this.change_size(this.range,t+1)});return this.actions.hidden=!0,this.actions}destroy(){for(let t of this.headerLevels)this.api.listeners.off(t,"click")}};frappe.provide("frappe.workspace_block");frappe.workspace_block.blocks={header:Ni,paragraph:Br,card:Di,chart:Fi,shortcut:zi,spacer:Hi,onboarding:qi,quick_list:Wi,number_card:Ui,custom_block:Vi};frappe.workspace_block.tunes={header_size:Yi};var pt=class{constructor(t){Object.assign(this,t),this.make()}refresh(){this.set_title(),this.set_actions(),this.set_body(),this.setup_events(),this.set_footer()}get_config(){return{name:this.name,label:this.label}}customize(t){if(this.in_customize_mode=!0,this.action_area.empty(),t.allow_sorting&&frappe.utils.add_custom_button(frappe.utils.icon("es-line-drag","xs"),null,"drag-handle",__("Drag"),null,this.action_area),t.allow_hiding){this.hidden&&(this.widget.removeClass("hidden"),this.body.css("opacity",.5),this.title_field.css("opacity",.5),this.footer.css("opacity",.5));let e=this.hidden?"fa fa-eye":"fa fa-eye-slash",i=this.hidden?__("Show"):__("Hide");frappe.utils.add_custom_button(`<i class="${e}" aria-hidden="true"></i>`,()=>this.hide_or_show(),"show-or-hide-button",i,null,this.action_area),this.show_or_hide_button=this.action_area.find(".show-or-hide-button")}t.allow_edit&&frappe.utils.add_custom_button(frappe.utils.icon("es-line-edit-alt","xs"),()=>this.edit(),"edit-button",__("Edit"),null,this.action_area)}make(){this.make_widget(),this.widget.appendTo(this.container)}make_widget(){this.widget=$(`<div class="widget" data-widget-name="${this.name?this.name:""}">
			<div class="widget-head">
				<div class="widget-label">
					<div class="widget-title"></div>
					<div class="widget-subtitle"></div>
				</div>
				<div class="widget-control"></div>
			</div>
			<div class="widget-body"></div>
			<div class="widget-footer"></div>
		</div>`),this.title_field=this.widget.find(".widget-title"),this.subtitle_field=this.widget.find(".widget-subtitle"),this.body=this.widget.find(".widget-body"),this.action_area=this.widget.find(".widget-control"),this.head=this.widget.find(".widget-head"),this.footer=this.widget.find(".widget-footer"),this.refresh()}set_title(t){let e=this.title||this.label||this.name,i=t?frappe.ellipsis(e,t):e;this.title_field[0].innerHTML=`<span class="ellipsis" title="${i}">${i}</span>`,t&&this.title_field[0].setAttribute("title",this.title||this.label),this.subtitle&&this.subtitle_field.html(this.subtitle)}delete(t=!0,e=!1){let i=n=>{this.widget.remove(),!e&&this.options.on_delete&&this.options.on_delete(this.name,n)};t?(this.widget.addClass("zoom-out"),setTimeout(()=>{i(!0)},300)):i(!1)}edit(){var e;let t=_r(this.widget_type);this.edit_dialog=new t({for_workspace:(e=this.options)==null?void 0:e.for_workspace,label:this.label,type:this.widget_type,values:this.get_config(),primary_action:i=>{Object.assign(this,i),i.name=this.name,this.new=!0,this.refresh(),this.options.on_edit&&this.options.on_edit(i)},primary_action_label:__("Save")}),this.edit_dialog.make()}toggle_width(){this.width=="Full"?(this.widget.removeClass("full-width"),this.width=null,this.refresh()):(this.widget.addClass("full-width"),this.width="Full",this.refresh());let t=this.width=="Full"?__("Collapse"):__("Expand");this.resize_button.attr("title",t)}hide_or_show(){this.hidden?(this.body.css("opacity",1),this.title_field.css("opacity",1),this.footer.css("opacity",1),this.hidden=!1):(this.body.css("opacity",.5),this.title_field.css("opacity",.5),this.footer.css("opacity",.5),this.hidden=!0),this.show_or_hide_button.empty();let t=this.hidden?"fa fa-eye":"fa fa-eye-slash",e=this.hidden?__("Show"):__("Hide");$(`<i class="${t}" aria-hidden="true" title="${e}"></i>`).appendTo(this.show_or_hide_button)}setup_events(){}set_actions(){}set_body(){}set_footer(){}};frappe.provide("frappe.widget.utils");frappe.provide("frappe.dashboards");frappe.provide("frappe.dashboards.chart_sources");var Gi=class extends pt{constructor(t){t.shadow=!0,super(t),this.height=this.height||240}get_config(){return{name:this.name,chart_name:this.chart_name,label:this.label,hidden:this.hidden,width:this.width}}refresh(){delete this.dashboard_chart,this.set_body(),this.make_chart()}set_chart_title(){let t=this.widget.width()<600?40:60;this.set_title(t)}set_body(){this.widget.addClass("dashboard-widget-box"),this.width=="Full"&&this.widget.addClass("full-width")}setup_container(){this.body.empty(),this.chart_doc.type=="Heatmap"&&this.setup_heatmap_container(),this.loading=$(`<div class="chart-loading-state text-muted" style="height: ${this.height}px;">${__("Loading...")}</div>`),this.loading.appendTo(this.body),this.empty=$(`<div class="chart-loading-state text-muted" style="height: ${this.height}px;">${__("No Data")}</div>`),this.empty.hide().appendTo(this.body),this.chart_wrapper=$("<div></div>"),this.chart_wrapper.appendTo(this.body),this.$heatmap_legend=null,this.set_chart_title()}setup_heatmap_container(){this.widget.addClass("heatmap-chart"),this.widget.removeClass("full-width").addClass("full-width"),this.width="Full"}set_summary(){this.$summary?this.$summary.empty():(this.$summary=$('<div class="report-summary"></div>').hide(),this.head.after(this.$summary)),this.summary.forEach(t=>{frappe.utils.build_summary_item(t).appendTo(this.$summary)}),this.summary.length&&this.$summary.show()}make_chart(){this.get_settings().then(()=>{if(!this.settings){this.deleted=!0,this.widget.remove();return}this.chart_settings||(this.chart_settings={}),this.setup_container(),this.in_customize_mode||(this.action_area.empty(),this.prepare_chart_actions(),this.chart_doc.timeseries&&this.render_time_series_filters()),frappe.run_serially([()=>this.prepare_chart_object(),()=>this.setup_filter_button(),()=>this.fetch_and_update_chart()])})}render_time_series_filters(){let t=this.get_time_series_filters();frappe.dashboard_utils.render_chart_filters(t,"chart-actions",this.action_area,0)}get_time_series_filters(){let t;return this.chart_doc.type=="Heatmap"?t=[{label:this.chart_settings.heatmap_year||this.chart_doc.heatmap_year,options:frappe.dashboard_utils.get_years_since_creation(frappe.boot.user.creation),action:e=>{this.selected_heatmap_year=e,this.save_chart_config_for_user({heatmap_year:this.selected_heatmap_year}),this.fetch_and_update_chart()}}]:t=[{label:this.chart_settings.time_interval||this.chart_doc.time_interval,options:["Yearly","Quarterly","Monthly","Weekly","Daily"],icon:"calendar",class:"time-interval-filter",action:e=>{this.selected_time_interval=e,this.save_chart_config_for_user({time_interval:this.selected_time_interval}),this.fetch_and_update_chart()}},{label:this.chart_settings.timespan||this.chart_doc.timespan,options:["Select Date Range","Last Year","Last Quarter","Last Month","Last Week"],class:"timespan-filter",action:e=>{this.selected_timespan=e,this.selected_timespan==="Select Date Range"?this.render_date_range_field():(this.selected_from_date=null,this.selected_to_date=null,this.date_field_wrapper&&(this.date_field_wrapper.hide(),this.title_field.show(),this.subtitle_field.show(),this.head.css("flex-direction","row")),this.save_chart_config_for_user({timespan:this.selected_timespan,from_date:null,to_date:null}),this.fetch_and_update_chart())}}],t}fetch_and_update_chart(){this.args={timespan:this.selected_timespan||this.chart_settings.timespan,time_interval:this.selected_time_interval||this.chart_settings.time_interval,from_date:this.selected_from_date||this.chart_settings.from_date,to_date:this.selected_to_date||this.chart_settings.to_date,heatmap_year:this.selected_heatmap_year||this.chart_settings.heatmap_year},this.fetch(this.filters,!0,this.args).then(t=>{this.chart_doc.chart_type=="Report"&&(this.report_result=t,this.summary=t.report_summary,t=this.get_report_chart_data(t)),this.update_chart_object(),this.data=t,this.render()})}render_date_range_field(){(!this.date_field_wrapper||!this.date_field_wrapper.is(":visible"))&&(this.date_field_wrapper=$('<div class="dashboard-date-field pull-right"></div>').insertAfter(this.action_area.find(".timespan-filter")),this.width!=="Full"&&this.widget.width()<700&&(this.title_field.hide(),this.subtitle_field.hide(),this.head.css("flex-direction","row-reverse")),this.date_range_field=frappe.ui.form.make_control({df:{fieldtype:"DateRange",fieldname:"from_date",placeholder:"Date Range",input_class:"input-xs",default:[this.chart_settings.from_date,this.chart_settings.to_date],value:[this.chart_settings.from_date,this.chart_settings.to_date],reqd:1,change:()=>{let t=this.date_range_field.get_value();this.selected_from_date=t[0],this.selected_to_date=t[1],t&&t.length==2&&(this.save_chart_config_for_user({timespan:this.selected_timespan,from_date:this.selected_from_date,to_date:this.selected_to_date}),this.fetch_and_update_chart())}},parent:this.date_field_wrapper,render_input:1}),this.date_range_field.$input.focus())}get_report_chart_data(t){if(t.chart&&this.chart_doc.use_report_chart)return t.chart.data;{let e=[];this.chart_doc.y_axis.map(o=>{e.push(o.y_field)});let i={y_fields:e,x_field:this.chart_doc.x_field,chart_type:this.chart_doc.type,color:this.chart_doc.color},n=t.columns.map(o=>frappe.report_utils.prepare_field_from_column(o));return frappe.report_utils.make_chart_options(n,t,i).data}}prepare_chart_actions(){let t=[{label:__("Refresh"),action:"action-refresh",handler:()=>{delete this.dashboard_chart,this.make_chart()}},{label:__("Edit"),action:"action-edit",handler:()=>{frappe.set_route("Form","Dashboard Chart",this.chart_doc.name)}},{label:__("Reset Chart"),action:"action-reset",handler:()=>{this.reset_chart(),delete this.dashboard_chart,this.make_chart()}}];this.chart_doc.document_type?t.push({label:__("{0} List",[this.chart_doc.document_type]),action:"action-list",handler:()=>{frappe.set_route("List",this.chart_doc.document_type)}}):this.chart_doc.chart_type==="Report"&&t.push({label:__("{0} Report",[this.chart_doc.report_name]),action:"action-list",handler:()=>{frappe.set_route("query-report",this.chart_doc.report_name,this.filters)}}),this.set_chart_actions(t)}setup_filter_button(){this.in_customize_mode||(this.is_document_type=this.chart_doc.chart_type!=="Report"&&this.chart_doc.chart_type!=="Custom",this.filter_button=$(`<div class="filter-chart btn btn-xs pull-right">
				${frappe.utils.icon("filter","sm")}
			</div>`),this.filter_button.appendTo(this.action_area),this.is_document_type?(this.filter_group&&(this.filters=this.filter_group.get_filters()),this.create_filter_group_and_add_filters()):this.filter_button.on("click",()=>{let t;frappe.dashboard_utils.get_filters_for_chart_type(this.chart_doc).then(e=>{this.is_document_type?t=[{fieldtype:"HTML",fieldname:"filter_area"}]:e?t=e.filter(i=>i.fieldname).map(i=>(Object.assign(i,i.dashboard_config||{}),i)):t=[{fieldtype:"HTML",options:__("No Filters Set")}],this.setup_filter_dialog(t)})}))}setup_filter_dialog(t){let e=this,i=new frappe.ui.Dialog({title:__("Set Filters for {0}",[this.chart_doc.chart_name]),fields:t,primary_action:function(){let n=this.get_values();n&&(this.hide(),e.filters=n,e.save_chart_config_for_user({filters:e.filters}),e.fetch_and_update_chart())},primary_action_label:"Set"});i.show(),this.chart_doc.chart_type=="Report"&&(frappe.query_report=new frappe.views.QueryReport({filters:i.fields_list}),frappe.query_reports[this.chart_doc.report_name].onload&&frappe.query_reports[this.chart_doc.report_name].onload(frappe.query_report)),i.set_values(this.filters)}reset_chart(){this.save_chart_config_for_user(null,1),this.chart_settings={},this.filters=null,this.selected_time_interval=null,this.selected_timespan=null,this.selected_heatmap_year=null}save_chart_config_for_user(t,e=0){Object.assign(this.chart_settings,t),frappe.xcall("frappe.desk.doctype.dashboard_settings.dashboard_settings.save_chart_config",{reset:e,config:this.chart_settings,chart_name:this.chart_doc.chart_name})}create_filter_group_and_add_filters(){this.filter_group=new frappe.ui.FilterGroup({doctype:this.chart_doc.document_type,parent_doctype:this.chart_doc.parent_document_type,filter_button:this.filter_button,on_change:()=>{this.filters=this.filter_group.get_filters(),this.save_chart_config_for_user({filters:this.filters}),this.fetch_and_update_chart()}}),this.filters&&frappe.model.with_doctype(this.chart_doc.document_type,()=>{this.filter_group.add_filters_to_filter_group(this.filters)})}set_chart_actions(t){this.chart_actions=$(`<div class="chart-actions dropdown pull-right">
			<button data-toggle="dropdown"
				aria-haspopup="true"aria-expanded="false"
				class="btn btn-xs btn-secondary chart-menu"
			>
				<svg class="icon icon-sm">
					<use href="#icon-dot-horizontal">
					</use>
				</svg>
			</button>
			<ul class="dropdown-menu dropdown-menu-right">
				${t.map(e=>`<li><a class="dropdown-item" data-action="${e.action}">${e.label}</a></li>`).join("")}
			</ul>
		</div>
		`),this.chart_actions.find("a[data-action]").each((e,i)=>{let n=i.dataset.action;$(i).click(t.find(o=>o.action===n))}),this.chart_actions.appendTo(this.action_area)}fetch(t,e=!1,i){let n=this.settings.method;return this.chart_doc.chart_type=="Report"?i={report_name:this.chart_doc.report_name,filters:t,ignore_prepared_report:1}:i={chart_name:this.chart_doc.name,filters:t,refresh:e?1:0,time_interval:i&&i.time_interval?i.time_interval:null,timespan:i&&i.timespan?i.timespan:null,from_date:i&&i.from_date?i.from_date:null,to_date:i&&i.to_date?i.to_date:null,heatmap_year:i&&i.heatmap_year?i.heatmap_year:null},frappe.xcall(n,i)}async get_source_doctype(){if(this.chart_doc.document_type)return this.chart_doc.document_type;if(this.chart_doc.chart_type=="Report"&&this.chart_doc.report_name)return await frappe.db.get_value("Report",this.chart_doc.report_name,"ref_doctype").then(t=>t.message.ref_doctype)}async render(){let t=()=>{let e=this.get_chart_args();this.dashboard_chart?this.dashboard_chart.update(this.data):this.dashboard_chart=frappe.utils.make_chart(this.chart_wrapper[0],e)};!this.data||!this.data.labels||!Object.keys(this.data).length?(this.chart_wrapper.hide(),this.loading.hide(),this.$summary&&this.$summary.hide(),this.empty.show()):(this.loading.hide(),this.empty.hide(),this.chart_wrapper.show(),this.chart_doc.document_type=await this.get_source_doctype(),this.chart_doc.document_type?frappe.model.with_doctype(this.chart_doc.document_type,t):t(),this.width=="Full"&&this.summary&&this.set_summary(),this.chart_doc.type=="Heatmap"&&this.render_heatmap_legend())}get_chart_args(){var l,u;let t=this.get_chart_colors(),e,i,n={Line:"line",Bar:"bar",Percentage:"percentage",Pie:"pie",Donut:"donut",Heatmap:"heatmap"},o=["Pie","Donut"].includes(this.chart_doc.type)?6:9,s={data:this.data,type:n[this.chart_doc.type],colors:t,height:this.height,maxSlices:this.chart_doc.number_of_groups||o,axisOptions:{xIsSeries:this.chart_doc.timeseries,shortenYAxisNumbers:1}};if(this.chart_doc.document_type){let p=frappe.get_meta(this.chart_doc.document_type).fields.find(g=>g.fieldname==this.chart_doc.value_based_on);e=p==null?void 0:p.fieldtype,i=p==null?void 0:p.options}if(this.chart_doc.chart_type=="Report"&&((u=(l=this.report_result)==null?void 0:l.chart)==null?void 0:u.fieldtype)&&(e=this.report_result.chart.fieldtype,i=this.report_result.chart.options),s.tooltipOptions={formatTooltipY:d=>frappe.format(d,{fieldtype:e,options:i},{always_show_decimals:!0,inline:!0})},this.chart_doc.type=="Heatmap"){let d=parseInt(this.selected_heatmap_year||this.chart_settings.heatmap_year||this.chart_doc.heatmap_year);s.data.start=new Date(`${d}-01-01`),s.data.end=new Date(`${d+1}-01-01`)}let a=d=>{let p=JSON.parse(d);for(let g in p)typeof s[g]=="object"&&typeof p[g]=="object"?s[g]=Object.assign(s[g],p[g]):s[g]=p[g]};return this.custom_options&&a(this.custom_options),this.chart_doc.custom_options&&a(this.chart_doc.custom_options),s}get_chart_colors(){let t=[];return this.chart_doc.y_axis.length?this.chart_doc.y_axis.map(e=>{t.push(e.color)}):["Line","Bar"].includes(this.chart_doc.type)?t=[this.chart_doc.color||[]]:this.chart_doc.type=="Heatmap"&&(t=[]),t}render_heatmap_legend(){let t,e=i=>{t=JSON.parse(i).colors};this.custom_options&&e(this.custom_options),this.chart_doc.custom_options&&e(this.chart_doc.custom_options),!this.$heatmap_legend&&this.widget.width()>991&&(this.$heatmap_legend=$(`
				<div class="heatmap-legend">
					<ul class="legend-colors">
						<li style="background-color: ${t[0]||"#ebedf0"}"></li>
						<li style="background-color: ${t[1]||"#c6e48b"}"></li>
						<li style="background-color: ${t[2]||"#7bc96f"}"></li>
						<li style="background-color: ${t[3]||"#239a3b"}"></li>
						<li style="background-color: ${t[4]||"#196127"}"></li>
					</ul>
					<div class="legend-label">
						<div style="margin-bottom: 45px">${__("Less")}</div>
						<div>${__("More")}</div>
					</div>
				</div>
				`),this.body.append(this.$heatmap_legend))}update_last_synced(){if(!this.chart_doc.last_synced_on)return;let t=__("Last synced {0}",[comment_when(this.chart_doc.last_synced_on)]);this.subtitle_field.html(t)}update_chart_object(){frappe.db.get_doc("Dashboard Chart",this.chart_doc.name).then(t=>{this.chart_doc=t,this.update_last_synced()})}prepare_chart_object(){return this.chart_doc.type=="Heatmap"&&!this.chart_doc.heatmap_year&&(this.chart_doc.heatmap_year=frappe.dashboard_utils.get_year(frappe.datetime.now_date())),this.set_chart_filters()}set_chart_filters(){let t=this.chart_settings.filters||null,e=frappe.dashboard_utils.get_all_filters(this.chart_doc);return this.chart_doc.chart_type=="Report"?frappe.dashboard_utils.get_filters_for_chart_type(this.chart_doc).then(i=>{e=this.update_default_date_filters(i,e),this.filters=frappe.utils.parse_array(t)||frappe.utils.parse_array(this.filters)||frappe.utils.parse_array(e)}):(this.filters=frappe.utils.parse_array(t)||frappe.utils.parse_array(this.filters)||frappe.utils.parse_array(e),Promise.resolve())}update_default_date_filters(t,e){return t&&t.map(i=>{["Date","DateRange"].includes(i.fieldtype)&&i.default&&(i.reqd||e[i.fieldname])&&(e[i.fieldname]=i.default)}),e}get_settings(){return frappe.model.with_doc("Dashboard Chart",this.chart_name).then(t=>{if(t)if(this.chart_doc=t,this.chart_doc.chart_type=="Custom"){if(frappe.dashboards.chart_sources[this.chart_doc.source])return this.settings=frappe.dashboards.chart_sources[this.chart_doc.source],Promise.resolve();{let e="frappe.desk.doctype.dashboard_chart_source.dashboard_chart_source.get_config";return frappe.xcall(e,{name:this.chart_doc.source}).then(i=>{frappe.dom.eval(i),this.settings=frappe.dashboards.chart_sources[this.chart_doc.source]})}}else return this.chart_doc.chart_type=="Report"?(this.settings={method:"frappe.desk.query_report.run"},Promise.resolve()):(this.settings={method:"frappe.desk.doctype.dashboard_chart.dashboard_chart.get"},Promise.resolve())})}};frappe.provide("frappe.utils");var Ki=class extends pt{constructor(t){t.shadow=!0,super(t)}get_config(){return{name:this.name,icon:this.icon,label:this.label,format:this.format,link_to:this.link_to,doc_view:this.doc_view,color:this.color,restrict_to_domain:this.restrict_to_domain,stats_filter:this.stats_filter,type:this.type,url:this.url,kanban_board:this.kanban_board}}setup_events(){this.widget.click(t=>{if(this.in_customize_mode)return;let e=frappe.utils.generate_route({route:this.route,name:this.link_to,type:this.type,is_query_report:this.is_query_report,doctype:this.ref_doctype,doc_view:this.doc_view,kanban_board:this.kanban_board}),i=frappe.utils.get_filter_from_json(this.stats_filter);if(this.type=="DocType"&&i&&(frappe.route_options=i),(t.ctrlKey||t.metaKey)&&(frappe.open_in_new_tab=!0),this.type=="URL"){frappe.open_in_new_tab?(window.open(this.url,"_blank"),frappe.open_in_new_tab=!1):window.location.href=this.url;return}frappe.set_route(e)})}set_actions(){if(this.in_customize_mode)return;$(frappe.utils.icon("es-line-arrow-up-right","xs","","","ml-2")).appendTo(this.action_area),this.widget.addClass("shortcut-widget-box");let t=frappe.utils.process_filter_expression(this.stats_filter);this.type=="DocType"&&t&&frappe.db.count(this.link_to,{filters:t}).then(e=>this.set_count(e))}set_count(t){let e=()=>this.format?__(this.format).replace(/{}/g,t):t;this.action_area.empty();let i=e(),n=this.color&&t?this.color.toLowerCase():"gray";$(`<div class="indicator-pill no-indicator-dot ellipsis ${n}">${i}</div>`).appendTo(this.action_area),$(frappe.utils.icon("es-line-arrow-up-right","xs","","","ml-2")).appendTo(this.action_area)}};frappe.provide("frappe.utils");var Xi=class extends pt{constructor(t){t.icon=t.icon||"es-line-filetype",super(t)}get_config(){return{name:this.name,links:JSON.stringify(this.links),link_count:this.links.length,label:this.label,hidden:this.hidden,description:this.description}}set_body(){this.options||(this.options={},this.options.links=this.links),this.widget.addClass("links-widget-box"),this.description&&$(`
				<button class="btn-reset card-description-btn ml-2">
					${frappe.utils.icon("help","sm")}
				</button>
			`).appendTo(this.widget.find(".widget-title")).popover({trigger:"hover",placement:"top",content:()=>`<div class="card-description small">${__(this.description)}</div>`,html:!0});let t=o=>o.dependencies&&o.incomplete_dependencies,e=o=>t(o)?"disabled-link":"",i=o=>o.open_count?"red":o.onboard?o.count?"blue":"yellow":"gray",n=o=>t(o)?`<span class="link-content ellipsis disabled-link">${o.label?o.label:o.name}</span>
					<div class="module-link-popover popover fade top in" role="tooltip" style="display: none;">
						<div class="arrow"></div>
						<h3 class="popover-title" style="display: none;"></h3>
						<div class="popover-content" style="padding: 12px;">
							<div class="small text-muted">${__("You need to create these first: ")}</div>
							<div class="small">${o.incomplete_dependencies.join(", ")}</div>
						</div>
					</div>`:o.youtube_id?`<span class="link-content help-video-link ellipsis" data-youtubeid="${o.youtube_id}">
						${o.label?o.label:o.name}</span>`:`<span class="link-content ellipsis">${o.label?o.label:o.name} ${frappe.utils.icon("es-line-arrow-up-right","xs","","","ml-2")} </span>`;this.link_list=this.links.map(o=>{let s={name:o.link_to,type:o.link_type,doctype:o.doctype,is_query_report:o.is_query_report};o.link_type.toLowerCase()=="report"&&!o.is_query_report&&(s.doctype=o.dependencies);let a=frappe.utils.generate_route(s);return $(`<a href="${a}" class="link-item ellipsis ${o.onboard?"onboard-spotlight":""} ${e(o)}" type="${o.type}" title="${o.label?o.label:o.name}">
					${n(o)}
			</a>`)}),this.in_customize_mode&&this.body.empty(),this.link_list.forEach(o=>o.appendTo(this.body))}setup_events(){this.link_list.forEach(t=>{let e=t.find(".link-content");if(t.hasClass("disabled-link")){let i=t.find(".module-link-popover");e.mouseover(()=>{this.in_customize_mode||i.show()}),e.mouseout(()=>i.hide())}else e.click(i=>{if(!this.in_customize_mode&&e.hasClass("help-video-link")){let n=i.currentTarget.dataset.youtubeid;frappe.help.show_video(n)}})})}};frappe.provide("frappe.utils");var Ji=class extends pt{async refresh(){frappe.utils.load_video_player(),this.new&&await this.get_onboarding_data(),this.set_title(),this.set_actions(),this.set_body(),this.setup_events()}get_config(){return{label:this.onboarding_name}}make_body(){this.body.empty(),this.steps_wrapper=$('<div class="onboarding-steps-wrapper"></div>').appendTo(this.body),this.step_preview=$(`<div class="onboarding-step-preview">
			<div class="onboarding-step-body"></div>
			<div class="onboarding-step-footer"></div>
		</div>`).appendTo(this.body),this.step_body=this.step_preview.find(".onboarding-step-body"),this.step_footer=this.step_preview.find(".onboarding-step-footer"),this.steps.forEach((e,i)=>{this.add_step(e,i)});let t=this.steps.findIndex(e=>!e.is_skipped&&!e.is_complete);t==-1&&(t=0),this.show_step(this.steps[t])}add_step(t,e){let i="pending";t.is_skipped&&(i="skipped"),t.is_complete&&(i="complete");let n=$(`<a class="onboarding-step ${i}">
				<div class="step-title">
					<div class="step-index step-pending">${frappe.utils.icon("es-line-success","md","","","step-icon")}</div>
					<div class="step-index step-skipped">${frappe.utils.icon("es-line-close-circle","md","","--icon-stroke: var(--gray-600);","step-icon")}</div>
					<div class="step-index step-complete">${frappe.utils.icon("es-solid-success","md","","","step-icon")}</div>
					<div class="step-text">${__(t.title)}</div>
				</div>
			</a>`);if(t.$step=n,!t.is_complete&&!t.is_skipped){let o=$(`<div class="step-skip">${__("Skip")}</div>`);o.appendTo(n),o.on("click",()=>{this.skip_step(t),event.stopPropagation()})}return n.on("click",()=>this.show_step(t)),n.appendTo(this.steps_wrapper),n}show_step(t){this.active_step&&this.active_step.$step.removeClass("active"),t.$step.addClass("active"),this.active_step=t;let e={"Watch Video":s=>this.show_video(s),"Create Entry":s=>{s.is_complete?frappe.set_route(`/app/List/${s.reference_document}`):s.show_full_form?this.create_entry(s):this.show_quick_entry(s)},"Show Form Tour":s=>this.show_form_tour(s),"Update Settings":s=>this.update_settings(s),"View Report":s=>this.open_report(s),"Go to Page":s=>this.go_to_page(s)},i=()=>{this.step_body.empty(),this.step_footer.empty(),n(),t.intro_video_url?$(`<button class="btn btn-default btn-sm">${__("Watch Tutorial")}</button>`).appendTo(this.step_footer).on("click",o):$(`<button class="btn btn-default btn-sm">${__(t.action_label||t.action)}</button>`).appendTo(this.step_footer).on("click",()=>e[t.action](t))},n=()=>{let s=t.description?frappe.markdown(t.description):`<h1>${__(t.title)}</h1>`;t.action==="Create Entry"&&(s+=`<p>
					<a href='/app/${frappe.router.slug(t.reference_document)}'>
						${__("Show {0} List",[__(t.reference_document)])}</a>
				</p>`),this.step_body.html(s)},o=()=>{this.step_body.empty(),this.step_footer.empty();let s=$(`<div class="video-player" data-plyr-provider="youtube" data-plyr-embed-id="${t.intro_video_url}"></div>`);s.appendTo(this.step_body);let a=new frappe.Plyr(s[0],{hideControls:!0,resetOnEnd:!0});$(`<button class="btn btn-primary btn-sm">${__(t.action_label||t.action)}</button>`).appendTo(this.step_footer).on("click",()=>{a.pause(),e[t.action](t)}),$(window).one("hashchange",()=>{a.pause()}),$(`<button class="btn btn-secondary ml-2 btn-sm">${__("Back")}</button>`).appendTo(this.step_footer).on("click",i)};i()}go_to_page(t){this.mark_complete(t),frappe.set_route(t.path).then(()=>{let e=t.callback_message||__("You can continue with the onboarding after exploring this page"),i=t.callback_title||__("Awesome Work"),n=frappe.msgprint({message:e,title:i,primary_action:{action:()=>{n.hide()},label:()=>__("Continue")},wide:!0})})}open_report(t){let e=frappe.utils.generate_route({name:t.reference_report,type:"report",is_query_report:t.report_type!=="Report Builder",doctype:t.report_reference_doctype}),i=frappe.get_route();frappe.set_route(e).then(()=>{let n=frappe.msgprint({message:__(t.report_description),title:__(t.reference_report),primary_action:{action:()=>{frappe.set_route(i).then(()=>{this.mark_complete(t)}),n.hide()},label:()=>__("Continue")},secondary_action:{action:()=>{n.hide(),frappe.set_route(i).then(()=>{this.mark_complete(t)})},label:__("Go Back")}});frappe.msg_dialog.custom_onhide=()=>this.mark_complete(t)})}show_form_tour(t){let e;t.is_single?e=frappe.router.slug(t.reference_document):e=`${frappe.router.slug(t.reference_document)}/new`;let i=frappe.get_route();frappe.route_hooks={},frappe.route_hooks.after_load=n=>{let o=()=>{let a=frappe.msgprint({message:__("Let's take you back to onboarding"),title:__("Onboarding complete"),primary_action:{action:()=>{frappe.set_route(i).then(()=>{this.mark_complete(t)}),a.hide()},label:()=>__("Continue")}})},s=t.form_tour;n.tour.init({tour_name:s,on_finish:o}).then(()=>n.tour.start())},frappe.set_route(e)}update_settings(t){let e=frappe.get_route();frappe.route_hooks={},frappe.route_hooks.after_load=i=>{i.scroll_to_field(t.field),i.doc.__unsaved=!0},frappe.route_hooks.after_save=i=>{let n=!1,o={},s=i.doc[t.field],a=null;s&&t.value_to_validate=="%"&&(n=!0),s==t.value_to_validate&&(n=!0),cstr(s)==cstr(t.value_to_validate)&&(n=!0),n?(o.message=__("Let's take you back to onboarding"),o.title=__("Action Complete"),o.primary_action={action:()=>{frappe.set_route(e).then(()=>{this.mark_complete(t)})},label:__("Continue")},a=()=>o.primary_action.action()):(o.message=__("Looks like you didn't change the value"),o.title=__("Try Again"),o.secondary_action={action:()=>frappe.set_route(e),label:__("Go Back")},o.primary_action={action:()=>{frappe.set_route(e).then(()=>{setTimeout(()=>{this.skip_step(t)},300)})},label:__("Skip Step")},a=()=>o.secondary_action.action()),frappe.msgprint(o),frappe.msg_dialog.custom_onhide=()=>a()},frappe.set_route("Form",t.reference_document)}async create_entry(t){let e=frappe.get_route(),i=await this.get_first_document(t.reference_document);frappe.route_hooks={},frappe.route_hooks.after_load=o=>{let s=()=>{frappe.msgprint({message:__("Awesome, now try making an entry yourself"),title:__("Document Saved"),primary_action:{action:()=>{frappe.set_route(e).then(()=>{this.mark_complete(t)})},label:__("Continue")}}),frappe.msg_dialog.custom_onhide=()=>{this.mark_complete(t)}},a=t.form_tour;o.tour.init({tour_name:a,on_finish:s}).then(()=>o.tour.start())};let n=()=>{frappe.msgprint({message:__("Let's take you back to onboarding"),title:__("Action Complete"),primary_action:{action:()=>{frappe.set_route(e).then(()=>{this.mark_complete(t)})},label:__("Continue")}}),frappe.msg_dialog.custom_onhide=()=>{this.mark_complete(t)}};t.is_submittable?(frappe.route_hooks.after_save=()=>{frappe.msgprint({message:__("Submit this document to complete this step."),title:__("Document Saved")})},frappe.route_hooks.after_submit=n):frappe.route_hooks.after_save=n,frappe.set_route("Form",t.reference_document,i)}show_quick_entry(t){let e=frappe.get_route_str();frappe.ui.form.make_quick_entry(t.reference_document,()=>{if(frappe.get_route_str()!=e){let i=frappe.msgprint({message:__("Let's take you back to onboarding"),title:__("Document Saved"),primary_action:{action:()=>{i.hide(),frappe.set_route(e).then(()=>{this.mark_complete(t)})},label:__("Continue")}});frappe.msg_dialog.custom_onhide=()=>{frappe.set_route(e).then(()=>{this.mark_complete(t)})}}else frappe.show_alert(__("Document Saved")+"<br>"+__("Let us continue with the onboarding")),this.mark_complete(t)},null,null,!0)}show_video(t){frappe.help.show_video(t.video_url,t.title),this.mark_complete(t)}mark_complete(t){let e=t.$step,i=()=>{t.is_complete=!0,e.removeClass("skipped"),e.addClass("complete")};this.update_step_status(t,"is_complete",1,i),this.activate_next_step(t)}skip_step(t){let e=t.$step,i=()=>{t.is_skipped=!0,e.removeClass("complete"),e.removeClass("pending"),e.addClass("skipped")};this.update_step_status(t,"is_skipped",1,i),this.activate_next_step(t)}activate_next_step(t){let e=this.steps.findIndex(n=>n==t),i=this.steps[e+1];!i||this.show_step(i)}update_step_status(t,e,i,n){let o={is_complete:"complete",is_skipped:"skipped"};frappe.route_hooks={},frappe.call("frappe.desk.desktop.update_onboarding_step",{name:t.name,field:e,value:i}).then(()=>{n(),t.$step.removeClass("pending").removeClass("complete").removeClass("skipped").addClass(o[e]),this.steps.filter(a=>!(a.is_complete||a.is_skipped)).length==0&&this.show_success()})}show_success(){let t=this.success||__("You seem good to go!"),e=this.success_state_image||"/assets/frappe/images/ui-states/success-color.png",i="";this.docs_url&&(i=__('Congratulations on completing the module setup. If you want to learn more you can refer to the documentation <a target="_blank" href="{0}">here</a>.',[this.docs_url]));let n=$(`<div class="text-center onboarding-success">
					<img src="${e}" alt="Success State" class="zoom-in success-state">
					<h3>${t}</h3>
					<div class="text-muted">${i}</div>
					<button class="btn btn-primary btn-sm">${__("Continue")}</button>
			</div>
		`);n.find(".btn").on("click",()=>this.delete()),this.step_preview.empty(),n.appendTo(this.step_preview)}set_body(){this.widget.addClass("onboarding-widget-box"),this.is_dismissed()?this.widget.hide():this.make_body()}is_dismissed(){if(this.in_customize_mode)return!1;let t=JSON.parse(localStorage.getItem("dismissed-onboarding")||"{}");if(Object.keys(t).includes(this.title)){let e=new Date(t[this.title]),i=new Date;return frappe.datetime.get_hour_diff(i,e)<24}return!1}set_actions(){if(this.in_customize_mode)return;this.action_area.empty();let t=$(`<div class="btn btn-sm btn-secondary small" style="cursor:pointer;">${__("Dismiss",null,"Stop showing the onboarding widget.")}</div>`);t.on("click",()=>{let e=JSON.parse(localStorage.getItem("dismissed-onboarding")||"{}");e[this.title]=frappe.datetime.now_datetime(),localStorage.setItem("dismissed-onboarding",JSON.stringify(e)),this.delete(!0,!0),this.widget.closest(".ce-block").hide(),frappe.telemetry.capture("dismissed_"+frappe.scrub(this.title),"frappe_onboarding")}),t.appendTo(this.action_area)}get_onboarding_data(){return frappe.model.with_doc("Module Onboarding",this.onboarding_name).then(t=>{if(t){this.onboarding_doc=t,this.label=t.label,this.title=t.title||__("Let's Get Started"),this.subtitle=t.subtitle,this.success=t.success,this.docs_url=t.docs_url,this.user_can_dismiss=t.user_can_dismiss;let e="frappe.desk.doctype.onboarding_step.onboarding_step.get_onboarding_steps";return frappe.xcall(e,{ob_steps:t.steps}).then(i=>{this.steps=i})}})}async get_first_document(t){let{message:e}=await frappe.db.get_value("Form Tour",{reference_doctype:t},["first_document"]),i;return e.first_document&&await frappe.db.get_list(t,{order_by:"creation"}).then(n=>{Array.isArray(n)&&n.length&&(i=n[0].name)}),i||"new"}};var Zi=class{constructor(t){Object.assign(this,t),this.make()}customize(){}make(){this.make_widget(),this.widget.appendTo(this.container),this.setup_events()}get_title(){let t=`New ${frappe.model.unscrub(this.type)}`;return __(t)}make_widget(){let t=`new-${frappe.scrub(frappe.model.unscrub(this.type),"-")}-widget`;this.widget=$(`<div class="widget new-widget ${t}">
				+ ${this.get_title()}
			</div>`),this.body=this.widget}setup_events(){this.widget.on("click",()=>{this.custom_dialog?this.custom_dialog():this.open_dialog()})}open_dialog(){let t=_r(this.type);this.dialog=new t({label:this.label,type:this.type,values:!1,default_values:this.default_values,primary_action:this.on_create}),this.dialog.make()}delete(){this.widget.remove()}};frappe.provide("frappe.utils");var Qi=class extends pt{constructor(t){t.shadow=!0,super(t)}get_config(){return{name:this.name,number_card_name:this.number_card_name,label:this.label,color:this.color,hidden:this.hidden}}refresh(){this.set_body()}set_body(){this.widget.addClass("number-widget-box"),this.make_card()}make_card(){frappe.model.with_doc("Number Card",this.number_card_name||this.name).then(t=>{if(t)this.card_doc=t,this.render_card();else if(this.document_type)frappe.run_serially([()=>this.create_number_card(),()=>this.render_card()]);else{this.delete(!1);return}this.set_events()})}create_number_card(){return this.set_doc_args(),frappe.xcall("frappe.desk.doctype.number_card.number_card.create_number_card",{args:this.card_doc}).then(t=>{this.name=t.name,this.card_doc=t,this.widget.attr("data-widget-name",this.name)})}set_events(){$(this.body).click(()=>{this.in_customize_mode||this.set_route()})}set_route(){if(this.card_doc.type==="Custom"){this.set_route_for_custom_card();return}let t=this.card_doc.type!=="Report",e=t?this.card_doc.document_type:this.card_doc.report_name,i=frappe.utils.generate_route({name:e,type:t?"doctype":"report",is_query_report:!t});if(t){let n=JSON.parse(this.card_doc.filters_json);frappe.route_options=n.reduce((o,s)=>Object.assign(o,{[`${s[0]}.${s[1]}`]:[s[2],s[3]]}),{})}frappe.set_route(i)}set_route_for_custom_card(){var t;!((t=this.data)!=null&&t.route)||(this.data.route_options&&(frappe.route_options=this.data.route_options),frappe.set_route(this.data.route))}set_doc_args(){this.card_doc=Object.assign({},{document_type:this.document_type,label:this.label,function:this.function,aggregate_function_based_on:this.aggregate_function_based_on,color:this.color,filters_json:this.stats_filter})}get_settings(t){return this.filters=this.get_filters(),{Custom:{method:this.card_doc.method,args:{filters:this.filters},get_number:i=>this.get_number_for_custom_card(i)},Report:{method:"frappe.desk.query_report.run",args:{report_name:this.card_doc.report_name,filters:this.filters,ignore_prepared_report:1},get_number:i=>this.get_number_for_report_card(i)},"Document Type":{method:"frappe.desk.doctype.number_card.number_card.get_result",args:{doc:this.card_doc,filters:this.filters},get_number:i=>this.get_number_for_doctype_card(i)}}[t]}get_filters(){return frappe.dashboard_utils.get_all_filters(this.card_doc)}async render_card(){this.prepare_actions(),this.set_title(),this.set_loading_state(),this.card_doc.type||(this.card_doc.type="Document Type"),this.settings=this.get_settings(this.card_doc.type),await this.get_data(),this.render_number(),this.render_stats()}set_loading_state(){$(this.body).html(`<div class="number-card-loading text-muted">
			${__("Loading...")}
		</div>`)}async get_data(){return this.data=await frappe.xcall(this.settings.method,this.settings.args),this.settings.get_number(this.data)}get_number_for_custom_card(t){typeof t=="object"?(this.number=t.value,this.set_formatted_number(t)):this.formatted_number=t}get_number_for_doctype_card(t){if(this.number=t,this.card_doc.function!=="Count")return frappe.model.with_doctype(this.card_doc.document_type,()=>{let e=frappe.meta.get_docfield(this.card_doc.document_type,this.card_doc.aggregate_function_based_on);this.set_formatted_number(e)});this.formatted_number=t}get_number_for_report_card(t){let e=this.card_doc.report_field,i=t.result.reduce((o,s)=>(s[e]&&o.push(s[e]),o),[]),n=t.columns.find(o=>o.fieldname==e);this.number=frappe.report_utils.get_result_of_fn(this.card_doc.report_function,i),this.set_formatted_number(n)}set_formatted_number(t){let e=frappe.sys_defaults.country,n=frappe.utils.shorten_number(this.number,e,5).split(" "),o=n[1]||"";n[0]=window.convert_old_to_new_number_format(n[0]);let s=$(frappe.format(n[0],t)).text();this.formatted_number=s+" "+__(o)}render_number(){let t=this.card_doc.color?`style="color: ${this.card_doc.color};"`:"";$(this.body).html(`<div class="widget-content">
			<div class="number" ${t}>${this.formatted_number}</div>
			</div>`)}render_stats(){if(this.card_doc.type!=="Document Type"||!this.card_doc.show_percentage_stats)return;let t="",e="";return this.get_percentage_stats().then(()=>{this.percentage_stat==0||this.percentage_stat==null?e="grey-stat":this.percentage_stat>0?(t=`<span class="indicator-pill-round green">
						${frappe.utils.icon("es-line-arrow-up-right","xs")}
					</span>`,e="green-stat"):(t=`<span class="indicator-pill-round red">
						${frappe.utils.icon("arrow-down-right","xs")}
					</span>`,e="red-stat");let n={Daily:__("since yesterday"),Weekly:__("since last week"),Monthly:__("since last month"),Yearly:__("since last year")}[this.card_doc.stats_time_interval],o=(()=>{if(this.percentage_stat==null)return NaN;let s=this.percentage_stat.split(" "),a=s[1]||"";return Math.abs(s[0])+" "+a})();isNaN(o)||$(this.body).find(".widget-content").append(`<div class="card-stats ${e}">
				<span class="percentage-stat-area">
					${t} ${o} % ${n}
				</span>
			</div>`)})}get_percentage_stats(){return frappe.xcall("frappe.desk.doctype.number_card.number_card.get_percentage_difference",{doc:this.card_doc,filters:this.filters,result:this.number}).then(t=>{t!==void 0&&(this.percentage_stat=frappe.utils.shorten_number(t))})}prepare_actions(){if(this.in_customize_mode)return;let t=[{label:__("Refresh"),action:"action-refresh",handler:()=>{this.render_card()}},{label:__("Edit"),action:"action-edit",handler:()=>{let e=this.number_card_name||this.name;frappe.set_route("Form","Number Card",e)}}];this.set_card_actions(t)}set_card_actions(t){this.card_actions=$(`<div class="card-actions dropdown pull-right">
				<a data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				...
				</a>
				<ul class="dropdown-menu" style="max-height: 300px; overflow-y: auto;">
					${t.map(e=>`<li class="dropdown-item">
									<a data-action="${e.action}">${e.label}</a>
								</li>`).join("")}
				</ul>
			</div>`),this.card_actions.find("a[data-action]").each((e,i)=>{let n=i.dataset.action;$(i).click(t.find(o=>o.action===n))}),this.action_area.html(this.card_actions)}};frappe.provide("frappe.utils");var en=class extends pt{constructor(t){t.shadow=!0,super(t)}get_config(){return{document_type:this.document_type,label:this.label,quick_list_filter:this.quick_list_filter}}set_actions(){this.in_customize_mode||(this.setup_add_new_button(),this.setup_refresh_list_button(),this.setup_filter_list_button())}setup_add_new_button(){this.add_new_button=$(`<div class="add-new btn btn-xs pull-right"
			title="${__("Add New")}  ${__(this.document_type)}
			">
				${frappe.utils.icon("add","sm")}
			</div>`),this.add_new_button.appendTo(this.action_area),this.add_new_button.on("click",()=>{frappe.set_route(frappe.utils.generate_route({type:"doctype",name:this.document_type,doc_view:"New"}))})}setup_refresh_list_button(){this.refresh_list=$(`<div class="refresh-list btn btn-xs pull-right" title="${__("Refresh List")}">
				${frappe.utils.icon("es-line-reload","sm")}
			</div>`),this.refresh_list.appendTo(this.action_area),this.refresh_list.on("click",()=>{this.body.empty(),this.set_body()})}setup_filter_list_button(){this.filter_list=$(`<div class="filter-list btn btn-xs pull-right" title="${__("Add/Update Filter")}">
				${frappe.utils.icon("filter","sm")}
			</div>`),this.filter_list.appendTo(this.action_area),this.filter_list.on("click",()=>this.setup_filter_dialog())}setup_filter(t){this.filter_group&&(this.filter_group.wrapper.empty(),delete this.filter_group),this.filters=frappe.utils.process_filter_expression(this.quick_list_filter),this.filter_group=new frappe.ui.FilterGroup({parent:this.dialog.get_field("filter_area").$wrapper,doctype:t,on_change:()=>{}}),frappe.model.with_doctype(t,()=>{this.filter_group.add_filters_to_filter_group(this.filters),this.dialog.set_df_property("filter_area","hidden",!1)})}setup_filter_dialog(){let t=[{fieldtype:"HTML",fieldname:"filter_area"}],e=this;this.dialog=new frappe.ui.Dialog({title:__("Set Filters for {0}",[__(this.document_type)]),fields:t,primary_action:function(){let i=e.quick_list_filter,n=e.filter_group.get_filters();e.quick_list_filter=JSON.stringify(n),this.hide(),i!=e.quick_list_filter&&(e.body.empty(),e.set_footer(),e.set_body())},primary_action_label:__("Save")}),this.dialog.show(),this.setup_filter(this.document_type)}render_loading_state(){this.body.empty(),this.loading=$(`<div class="list-loading-state text-muted">${__("Loading...")}</div>`),this.loading.appendTo(this.body)}render_no_data_state(){this.loading=$(`<div class="list-no-data-state text-muted">${__("No Data...")}</div>`),this.loading.appendTo(this.body)}setup_quick_list_item(t){let e=frappe.get_indicator(t,this.document_type),i=$(`
			<div class="quick-list-item">
				<div class="ellipsis left">
					<div class="ellipsis title"
						title="${strip_html(t[this.title_field_name])}">
						${strip_html(t[this.title_field_name])}
					</div>
					<div class="timestamp text-muted">
						${frappe.datetime.prettyDate(t.modified)}
					</div>
				</div>
			</div>
		`);return e&&$(`
				<div class="status indicator-pill ${e[1]} ellipsis">
					${__(e[0])}
				</div>
			`).appendTo(i),$(`<div class="right-arrow">${frappe.utils.icon("right","xs")}</div>`).appendTo(i),i.click(n=>{(n.ctrlKey||n.metaKey)&&(frappe.open_in_new_tab=!0),frappe.set_route(`${frappe.utils.get_form_link(this.document_type,t.name)}`)}),i}set_body(){this.widget.addClass("quick-list-widget-box"),this.render_loading_state(),frappe.model.with_doctype(this.document_type,()=>{let t=["name"];if(!this.title_field_name){let n=frappe.get_meta(this.document_type);this.title_field_name=n&&n.title_field||"name"}if(this.title_field_name&&this.title_field_name!="name"&&t.push(this.title_field_name),this.has_status_field=frappe.meta.has_field(this.document_type,"status"),this.has_status_field){t.push("status"),t.push("docstatus");let n=frappe.workflow.get_state_fieldname(this.document_type);n&&t.push(n)}t.push("modified");let e=frappe.utils.process_filter_expression(this.quick_list_filter),i={method:"frappe.desk.reportview.get",args:{doctype:this.document_type,fields:t,filters:e,order_by:"modified desc",start:0,page_length:4}};frappe.call(i).then(n=>{if(!n.message)return;let o=n.message;if(this.body.empty(),o=Array.isArray(o)?o:frappe.utils.dict(o.keys,o.values),!o.length){this.render_no_data_state();return}this.quick_list=o.map(s=>this.setup_quick_list_item(s)),this.quick_list.forEach(s=>s.appendTo(this.body))})})}set_footer(){this.footer.empty();let t=frappe.utils.get_filter_from_json(this.quick_list_filter),e=frappe.utils.generate_route({type:"doctype",name:this.document_type});this.see_all_button=$(`
			<div class="see-all btn btn-xs">${__("View List")}</div>
		`).appendTo(this.footer),this.see_all_button.click(i=>{(i.ctrlKey||i.metaKey)&&(frappe.open_in_new_tab=!0),t&&(frappe.route_options=t),frappe.set_route(e)})}};var tn=class extends pt{constructor(t){t.shadow=!0,super(t)}get_config(){return{custom_block_name:this.custom_block_name,label:this.custom_block_name}}refresh(){this.set_body(),this.make_custom_block()}set_body(){this.widget.addClass("custom-block-widget-box"),this.widget.addClass("full-width")}async make_custom_block(){await this.get_custom_block_data(),this.body.empty(),frappe.create_shadow_element(this.body[0],this.custom_block_doc.html,this.custom_block_doc.style,this.custom_block_doc.script)}async get_custom_block_data(){this.label=this.custom_block_name;let t=await frappe.model.with_doc("Custom HTML Block",this.custom_block_name);this.custom_block_doc=t||""}};frappe.provide("frappe.widget");frappe.widget.widget_factory={chart:Gi,base:pt,shortcut:Ki,links:Xi,onboarding:Ji,number_card:Qi,quick_list:en,custom_block:tn};frappe.widget.make_widget=r=>{let t=frappe.widget.widget_factory[r.widget_type];if(t)return new t(r);console.warn("Invalid Widget Name: "+r.widget_type)};var Kn=class{constructor(t){Object.assign(this,t),this.widgets_list=[],this.widgets_dict={},this.widget_order=[],this.make()}make(){this.make_container(),this.title?this.set_title():this.title_area.remove(),this.widgets&&this.make_widgets()}make_container(){let t=$(`<div class="widget-group ${this.class_name||""}">
				<div class="widget-group-head">
					<div class="widget-group-title"></div>
					<div class="widget-group-control"></div>
				</div>
				<div class="widget-group-body grid-col-${this.columns}">
				</div>
			</div>`);this.widget_area=t,this.hidden&&this.widget_area.hide(),this.title_area=t.find(".widget-group-title"),this.control_area=t.find(".widget-group-control"),this.body=t.find(".widget-group-body"),!this.widgets.length&&this.widget_area.hide(),t.appendTo(this.container)}set_title(){this.title_area[0].innerText=this.title}make_widgets(){this.body.empty(),this.widgets.forEach(t=>{this.add_widget(t)})}add_widget(t){let e=frappe.widget.make_widget(mt(Ue({},t),{widget_type:this.type,container:this.body,height:this.height||null,options:mt(Ue({},this.options),{on_delete:i=>this.on_delete(i)})}));return this.widgets_list.push(e),this.widgets_dict[t.name]=e,e}remove_widget(t){t.widget.remove(),this.widgets_list.filter(e=>{if(e.name==t.name)return!1}),delete this.widgets_dict[t.name]}customize(){this.hidden||this.widget_area.show(),this.widgets_list.forEach(t=>{t.customize(this.options)}),this.options.allow_create&&this.setup_new_widget(),this.options.allow_sorting&&this.setup_sortable()}setup_new_widget(){let t=this.options&&this.options.max_widget_count||Number.POSITIVE_INFINITY;this.widgets_list.length<t&&(this.new_widget=new Zi({container:this.body,type:this.type,custom_dialog:this.custom_dialog,default_values:this.default_values,on_create:e=>{this.new_widget.delete(),delete this.new_widget,e.in_customize_mode=1,this.add_widget(e).customize(this.options),this.widgets_list.length<t&&this.setup_new_widget()}}))}on_delete(t,e){this.widgets_list=this.widgets_list.filter(i=>t!=i.name),delete this.widgets_dict[t],this.update_widget_order(),!this.new_widget&&e&&this.setup_new_widget()}update_widget_order(){this.widget_order=[],this.body.children().each((t,e)=>{let i=e.dataset.widgetName;i&&this.widget_order.push(i)})}setup_sortable(){let t=this.body[0];this.sortable=new Sortable(t,{animation:150,handle:".drag-handle",onEnd:()=>this.update_widget_order()})}get_widget_config(){this.update_widget_order();let t={};return this.widgets_list.forEach(e=>{let i=e.get_config(),n=i.docname?i.docname:i.name;t[n]=i}),{order:this.widget_order,widgets:t}}},fs=class{constructor(t){Object.assign(this,t),this.widgets_list=[],this.widgets_dict={},this.make()}make(){this.add_widget(this.widgets)}add_widget(t){let e=frappe.widget.make_widget(mt(Ue({},t),{widget_type:this.type,container:this.container,height:this.height||null,options:mt(Ue({},this.options),{on_delete:()=>this.on_delete(),on_edit:()=>this.on_edit(e)})}));return this.widgets_list.push(e),this.widgets_dict[t.name]=e,e}on_delete(){this.api.blocks.delete()}on_edit(t){this.block.call("on_edit",t)}customize(){this.widgets_list.forEach(t=>{t.customize(this.options)})}};frappe.widget.WidgetGroup=Kn;frappe.widget.SingleWidgetGroup=fs;frappe.templates.sort_selector=`<div class="sort-selector">
	<div class="btn-group">
		<button class="btn btn-default btn-sm btn-order"
			data-value="{{ sort_order }}"
			title="{{ sort_order==="desc" ? __("descending") : __("ascending") }}">
			<span class="sort-order">
				<svg class="icon icon-sm">
					<use href="#icon-{{ sort_order==="desc" ? "sort-descending" : "sort-ascending" }}"></use>
				</svg>
			</span>
		</button>
		<button type="button" class="btn btn-default btn-sm sort-selector-button" data-toggle="dropdown">
			<span class="dropdown-text">{{ __(sort_by_label) }}</span>
			<ul class="dropdown-menu dropdown-menu-right">
				{% for value in options %}
				<li>
					<a class="dropdown-item option" data-value="{{ value.fieldname }}">
						{{ __(value.label) }}
					</a>
				</li>
				{% endfor %}
			</ul>
		</button>
	</div>
</div>
`;frappe.ui.SortSelector=class{constructor(t){$.extend(this,t),this.labels={},this.make()}make(){this.prepare_args(),this.parent.find(".sort-selector").remove(),this.wrapper=$(frappe.render_template("sort_selector",this.args)).appendTo(this.parent),this.bind_events()}bind_events(){var t=this;this.wrapper.find(".btn-order").on("click",function(){let e=$(this).attr("data-value")==="desc"?"asc":"desc";t.set_value(t.sort_by,e),(t.onchange||t.change)(t.sort_by,t.sort_order)}),this.wrapper.find(".dropdown-menu a.option").on("click",function(){t.set_value($(this).attr("data-value"),t.sort_order),(t.onchange||t.change)(t.sort_by,t.sort_order)})}set_value(t,e){let i=this.wrapper.find(".btn-order"),n=i.find(".sort-order"),o=this.wrapper.find(".dropdown-text");if(this.sort_by!==t&&(this.sort_by=t,o.html(__(this.get_label(t)))),this.sort_order!==e){this.sort_order=e;let s=e==="desc"?__("ascending"):__("descending"),a=e==="asc"?"sort-ascending":"sort-descending";i.attr("data-value",e),i.attr("title",s),n.html(frappe.utils.icon(a,"sm"))}}prepare_args(){var t=this;if(this.args||(this.args={}),this.args&&typeof this.args=="string"){var e=this.args;this.args={},e.includes("`.`")&&(e=e.split(".")[1]);var i=e.split(" ");if(i.length===2){var n=strip(i[0],"`");this.args.sort_by=n,this.args.sort_order=i[1]}}this.args.options&&this.args.options.forEach(function(o){t.labels[o.fieldname]=o.label}),this.setup_from_doctype(),this.args.sort_by&&!this.args.sort_by_label&&this.args.options.every(function(o){return o.fieldname===t.args.sort_by?(t.args.sort_by_label=o.label,!1):!0})}setup_from_doctype(){var t=this,e=frappe.get_meta(this.doctype);if(!!e){var{meta_sort_field:i,meta_sort_order:n}=this.get_meta_sort_field();if(this.args.sort_by||(i?(this.args.sort_by=i,this.args.sort_order=n):(this.args.sort_by="modified",this.args.sort_order="desc")),this.args.sort_by_label||(this.args.sort_by_label=this.get_label(this.args.sort_by)),!this.args.options){var o=[{fieldname:"modified"},{fieldname:"name"},{fieldname:"creation"},{fieldname:"idx"}];e.title_field&&o.splice(1,0,{fieldname:e.title_field}),i&&o.splice(1,0,{fieldname:i}),e.fields.forEach(function(s){(s.mandatory||s.bold||s.in_list_view||s.reqd)&&frappe.model.is_value_type(s.fieldtype)&&frappe.perm.has_perm(t.doctype,s.permlevel,"read")&&o.push({fieldname:s.fieldname,label:s.label})}),o.forEach(s=>{s.label||(s.label=t.get_label(s.fieldname))}),this.args.options=o.uniqBy(s=>s.fieldname)}this.sort_by=this.args.sort_by,this.sort_order=this.args.sort_order}}get_meta_sort_field(){var t=frappe.get_meta(this.doctype);if(!t)return{meta_sort_field:null,meta_sort_order:null};if(t.sort_field&&t.sort_field.includes(",")){var e=t.sort_field.split(",")[0].split(" ");return{meta_sort_field:e[0],meta_sort_order:e[1]}}else return{meta_sort_field:t.sort_field||"modified",meta_sort_order:t.sort_order?t.sort_order.toLowerCase():""}}get_label(t){return t==="idx"?__("Most Used"):this.labels[t]||frappe.meta.get_label(this.doctype,t)}get_sql_string(){return"`tab"+this.doctype+"`.`"+this.sort_by+"` "+this.sort_order}};frappe.templates.change_log=`{% for (var i=0, l=change_log.length; i < l; i++) {
    var app_info = change_log[i]; %}
	{% if (i > 0) { %} <hr> {% } %}
	<div class="text-left app-change-log">
		<h2 style="margin-top: 10px;">
            {{ app_info.title }}
			<small>{{ __("updated to {0}", [app_info.version]) }}</small>
		</h2>
		<div class="app-change-log-body">
		{% for (var x=0, y=app_info.change_log.length; x < y; x++) {
            var version_info = app_info.change_log[x];
            if(version_info) { %}
    			<p>{{ frappe.markdown(version_info[1]) }}</p>
		    {% }
        } %}
    	</div>
	</div>
{% } %}
`;frappe.templates.workspace_loading_skeleton=`<div class="workspace-skeleton">
	<div class="widget-group">
		<div class="widget-group-head skeleton-header">
			<div class="widget-group-title skeleton-card"></div>
		</div>
		<div class="widget-group-body grid-col-3">
			<div class="widget shortcut-widget-box skeleton-card"></div>
			<div class="widget shortcut-widget-box skeleton-card"></div>
			<div class="widget shortcut-widget-box skeleton-card"></div>
		</div>
	</div>
	<div class="widget-group skeleton-body">
		<div class="widget-group-head skeleton-header">
			<div class="widget-group-title skeleton-card"></div>
		</div>
		<div class="widget-group-body grid-col-3">
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
		</div>
	</div>
</div>
`;frappe.templates.workspace_sidebar_loading_skeleton=`<div class="workspace-sidebar-skeleton">
	<div class="widget-group-body">
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
	</div>
	<div class="widget-group-body">
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
	</div>
</div>`;frappe.start_app=function(){!frappe.Application||(frappe.assets.check(),frappe.provide("frappe.app"),frappe.provide("frappe.desk"),frappe.app=new frappe.Application)};$(document).ready(function(){frappe.utils.supportsES6||frappe.msgprint({indicator:"red",title:__("Browser not supported"),message:__("Some of the features might not work in your browser. Please update your browser to the latest version.")}),frappe.start_app()});frappe.Application=class{constructor(){this.startup()}startup(){frappe.realtime.init(),frappe.model.init(),this.load_bootinfo(),this.load_user_permissions(),this.make_nav_bar(),this.set_favicon(),this.set_fullwidth_if_enabled(),this.add_browser_class(),this.setup_energy_point_listeners(),this.setup_copy_doc_listener(),frappe.ui.keys.setup(),frappe.ui.keys.add_shortcut({shortcut:"shift+ctrl+g",description:__("Switch Theme"),action:()=>{frappe.theme_switcher&&frappe.theme_switcher.dialog.is_visible?frappe.theme_switcher.hide():(frappe.theme_switcher=new frappe.ui.ThemeSwitcher,frappe.theme_switcher.show())}}),frappe.ui.add_system_theme_switch_listener();let t=document.documentElement;if(new MutationObserver(()=>{frappe.ui.set_theme()}).observe(t,{attributes:!0,attributeFilter:["data-theme-mode"]}),frappe.ui.set_theme(),this.make_page_container(),!window.Cypress&&frappe.boot.onboarding_tours&&frappe.boot.user.onboarding_status!=null&&!frappe.boot.onboarding_tours.every(s=>{var a;return(a=frappe.boot.user.onboarding_status[s[0]])==null?void 0:a.is_complete})&&frappe.boot.onboarding_tours.length>0&&frappe.require("onboarding_tours.bundle.js",()=>{frappe.utils.sleep(1e3).then(()=>{frappe.ui.init_onboarding_tour()})}),this.set_route(),$(document).trigger("startup"),$(document).trigger("app_ready"),frappe.boot.messages&&frappe.msgprint(frappe.boot.messages),frappe.user_roles.includes("System Manager")&&setTimeout(()=>{this.show_change_log(),this.show_update_available()},1e3),!frappe.boot.developer_mode){let o=__("Using this console may allow attackers to impersonate you and steal your information. Do not enter or paste code that you do not understand.");console.log(`%c${o}`,"font-size: large")}if(this.show_notes(),frappe.ui.startup_setup_dialog&&!frappe.boot.setup_complete&&(frappe.ui.startup_setup_dialog.pre_show(),frappe.ui.startup_setup_dialog.show()),frappe.realtime.on("version-update",function(){var o=frappe.msgprint({message:__("The application has been updated to a new version, please refresh this page"),indicator:"green",title:__("Version Updated")});o.set_primary_action(__("Refresh"),function(){location.reload(!0)}),o.get_close_btn().toggle(!1)}),this.setup_build_events(),frappe.sys_defaults.email_user_password){var i=frappe.sys_defaults.email_user_password.split(",");for(var n in i)i[n]===frappe.user.name&&this.set_password(i[n])}this.link_preview=new frappe.ui.LinkPreview}set_route(){frappe.boot&&localStorage.getItem("session_last_route")?(frappe.set_route(localStorage.getItem("session_last_route")),localStorage.removeItem("session_last_route")):frappe.router.route(),frappe.router.on("change",()=>{$(".tooltip").hide()})}set_password(t){var e=this;frappe.call({method:"frappe.core.doctype.user.user.get_email_awaiting",args:{user:t},callback:function(i){if(i=i.message,i){var n=0;n<i.length&&e.email_password_prompt(i,t,n)}}})}email_password_prompt(t,e,i){var n=this;let o=t[i].email_id,s=new frappe.ui.Dialog({title:__("Password missing in Email Account"),fields:[{fieldname:"password",fieldtype:"Password",label:__("Please enter the password for: <b>{0}</b>",[o],"Email Account"),reqd:1},{fieldname:"submit",fieldtype:"Button",label:__("Submit",null,"Submit password for Email Account")}]});s.get_input("submit").on("click",function(){s.hide();var a=new frappe.ui.Dialog({title:__("Checking one moment"),fields:[{fieldtype:"HTML",fieldname:"checking"}]});a.fields_dict.checking.$wrapper.html('<i class="fa fa-spinner fa-spin fa-4x"></i>'),a.show(),frappe.call({method:"frappe.email.doctype.email_account.email_account.set_email_password",args:{email_account:t[i].email_account,password:s.get_value("password")},callback:function(l){a.hide(),s.hide(),l.message?i+1<t.length&&(i=i+1,n.email_password_prompt(t,e,i)):(frappe.show_alert({message:__("Login Failed please try again"),indicator:"error"},5),n.email_password_prompt(t,e,i))}})}),s.show()}load_bootinfo(){frappe.boot?(this.setup_workspaces(),frappe.model.sync(frappe.boot.docs),this.check_metadata_cache_status(),this.set_globals(),this.sync_pages(),frappe.router.setup(),this.setup_moment(),frappe.boot.print_css&&frappe.dom.set_style(frappe.boot.print_css,"print-style"),frappe.user.name=frappe.boot.user.name,frappe.router.setup()):this.set_as_guest()}setup_workspaces(){frappe.modules={},frappe.workspaces={};for(let t of frappe.boot.allowed_workspaces||[])frappe.modules[t.module]=t,frappe.workspaces[frappe.router.slug(t.name)]=t}load_user_permissions(){frappe.defaults.load_user_permission_from_boot(),frappe.realtime.on("update_user_permissions",frappe.utils.debounce(()=>{frappe.defaults.update_user_permissions()},500))}check_metadata_cache_status(){frappe.boot.metadata_version!=localStorage.metadata_version&&(frappe.assets.clear_local_storage(),frappe.assets.init_local_storage())}set_globals(){frappe.session.user=frappe.boot.user.name,frappe.session.logged_in_user=frappe.boot.user.name,frappe.session.user_email=frappe.boot.user.email,frappe.session.user_fullname=frappe.user_info().fullname,frappe.user_defaults=frappe.boot.user.defaults,frappe.user_roles=frappe.boot.user.roles,frappe.sys_defaults=frappe.boot.sysdefaults,frappe.ui.py_date_format=frappe.boot.sysdefaults.date_format.replace("dd","%d").replace("mm","%m").replace("yyyy","%Y"),frappe.boot.user.last_selected_values={}}sync_pages(){if(localStorage.page_info){frappe.boot.allowed_pages=[];var t=JSON.parse(localStorage.page_info);$.each(frappe.boot.page_info,function(e,i){(!t[e]||t[e].modified!=i.modified)&&delete localStorage["_page:"+e],frappe.boot.allowed_pages.push(e)})}else frappe.boot.allowed_pages=Object.keys(frappe.boot.page_info);localStorage.page_info=JSON.stringify(frappe.boot.page_info)}set_as_guest(){frappe.session.user="Guest",frappe.session.user_email="",frappe.session.user_fullname="Guest",frappe.user_defaults={},frappe.user_roles=["Guest"],frappe.sys_defaults={}}make_page_container(){$("#body").length&&($(".splash").remove(),frappe.temp_container=$("<div id='temp-container' style='display: none;'>").appendTo("body"),frappe.container=new frappe.views.Container)}make_nav_bar(){frappe.boot&&frappe.boot.home_page!=="setup-wizard"&&(frappe.frappe_toolbar=new frappe.ui.toolbar.Toolbar)}logout(){var t=this;return t.logged_out=!0,frappe.call({method:"logout",callback:function(e){e.exc||t.redirect_to_login()}})}handle_session_expired(){frappe.app.redirect_to_login()}redirect_to_login(){window.location.href=`/login?redirect-to=${encodeURIComponent(window.location.pathname+window.location.search)}`}set_favicon(){var t=$('link[type="image/x-icon"]').remove().attr("href");$('<link rel="shortcut icon" href="'+t+'" type="image/x-icon">').appendTo("head"),$('<link rel="icon" href="'+t+'" type="image/x-icon">').appendTo("head")}trigger_primary_action(){$(document.activeElement).blur(),setTimeout(()=>{window.cur_dialog&&cur_dialog.display?cur_dialog.get_primary_btn().trigger("click"):cur_frm&&cur_frm.page.btn_primary.is(":visible")?cur_frm.page.btn_primary.trigger("click"):frappe.container.page.save_action&&frappe.container.page.save_action()},100)}show_change_log(){var t=this;let e=frappe.boot.change_log;if(!(!Array.isArray(e)||!e.length||window.Cypress||cint(frappe.boot.sysdefaults.disable_change_log_notification))){var i=frappe.msgprint({message:frappe.render_template("change_log",{change_log:e}),title:__("Updated To A New Version \u{1F389}"),wide:!0});i.keep_open=!0,i.custom_onhide=function(){frappe.call({method:"frappe.utils.change_log.update_last_known_versions"}),t.show_notes()}}}show_update_available(){frappe.boot.sysdefaults.disable_system_update_notification||frappe.call({method:"frappe.utils.change_log.show_update_popup"})}add_browser_class(){$("html").addClass(frappe.utils.get_browser().name.toLowerCase())}set_fullwidth_if_enabled(){frappe.ui.toolbar.set_fullwidth_if_enabled()}show_notes(){var t=this;frappe.boot.notes.length&&frappe.boot.notes.forEach(function(e){if(!e.seen||e.notify_on_every_login){var i=frappe.msgprint({message:e.content,title:e.title});i.keep_open=!0,i.custom_onhide=function(){e.seen=!0,e.notify_on_every_login||frappe.call({method:"frappe.desk.doctype.note.note.mark_as_seen",args:{note:e.name}}),t.show_notes()}}})}setup_build_events(){frappe.boot.developer_mode&&frappe.require("build_events.bundle.js")}setup_energy_point_listeners(){frappe.realtime.on("energy_point_alert",t=>{frappe.show_alert(t)})}setup_copy_doc_listener(){$("body").on("paste",t=>{try{let e=frappe.utils.get_clipboard_data(t),i=JSON.parse(e);if(i.doctype){t.preventDefault();let n=frappe.utils.sleep;frappe.dom.freeze(__("Creating {0}",[i.doctype])+"..."),n(500).then(()=>{let o=frappe.model.with_doctype(i.doctype,()=>{let s=frappe.model.copy_doc(i);s.__newname=i.name,delete i.name,s.idx=null,s.__run_link_triggers=!1,frappe.set_route("Form",s.doctype,s.name),frappe.dom.unfreeze()});o&&o.fail(frappe.dom.unfreeze)})}}catch(e){}})}setup_moment(){moment.updateLocale("en",{week:{dow:frappe.datetime.get_first_day_of_the_week_index()}}),moment.locale("en"),moment.user_utc_offset=moment().utcOffset(),frappe.boot.timezone_info&&moment.tz.add(frappe.boot.timezone_info)}};frappe.get_module=function(r,t){var e=frappe.modules[r]||t;if(!!e)return e._setup||(e.label||(e.label=r),e._label||(e._label=__(e.label)),e._setup=!0),e};frappe.provide("frappe.utils");function b0(r){return nf()[r]||""}function y0(r){return r.includes("?")?r.slice(r.indexOf("?")+1):""}function nf(r){var t={};r||(r=location.search.substring(1));for(var e=r.split("&"),i=0,n=e.length;i<n;i++){var o=e[i].split(/=(.+)/),s=o[0];if(!!s){var a=o[1];if(typeof a=="string"){a=a.replace(/\+/g,"%20");try{a=decodeURIComponent(a)}catch(l){}}s in t?(typeof t[s]=="undefined"?t[s]=[]:typeof t[s]=="string"&&(t[s]=[t[s]]),t[s].push(a)):t[s]=a}}return t}function w0(r,t=!0){let e=[];for(let i in r){let n=r[i];n===void 0||n===""||n===null||(typeof n=="object"&&(n=JSON.stringify(n)),t&&(i=encodeURIComponent(i),n=encodeURIComponent(n)),e.push(`${i}=${n}`))}return"?"+e.join("&")}Object.assign(frappe.utils,{get_url_arg:b0,get_query_string:y0,get_query_params:nf,make_query_string:w0});frappe.provide("frappe.energy_points");Object.assign(frappe.energy_points,{get_points(r){return`<span class="bold" style="color: ${r>=0?"#45A163":"#e42121"}">
			${r>0?"+":""}${r}
		</span>`},format_form_log(r){let t="<span>&nbsp;-&nbsp;</span>";return`<span>
  			<!--${this.get_points(r.points)}&nbsp;-->
  			<a href="/app/energy-point-log/${r.name}">${this.get_form_log_message(r)}</a>
  			${r.reason?t+r.reason:""}
  		</span>`},format_history_log(r){let t="<span>&nbsp;-&nbsp;</span>",e=frappe.utils.get_form_link(r.reference_doctype,r.reference_name);return`<div class="flex">
  			<span class="${r.points>=0?"green":"red"} mr-2">
  				${this.get_points(r.points)}
  			</span>
  			<a href="${e}" class="text-muted">${this.get_history_log_message(r)}</a>
  			${r.reason?t+r.reason:""}
  			${t+frappe.datetime.comment_when(r.creation)}
  		</div>`},get_history_log_message(r){let t=frappe.user.full_name(r.owner).bold(),e=r.reference_name;return r.type==="Appreciation"?__("{0} appreciated on {1}",[t,e]):r.type==="Criticism"?__("{0} criticized on {1}",[t,e]):r.type==="Revert"?__("{0} reverted {1}",[t,r.revert_of]):__("via automatic rule {0} on {1}",[r.rule.bold(),e])},get_form_log_message(r){let t=frappe.user.full_name(r.owner).bold(),e=frappe.user.full_name(r.user).bold();return r.type==="Appreciation"?__("{0} appreciated {1}",[t,e]):r.type==="Criticism"?__("{0} criticized {1}",[t,e]):r.type==="Revert"?__("{0} reverted {1}",[t,r.revert_of]):__("gained by {0} via automatic rule {1}",[e,r.rule.bold()])}});var o5=Gt(of());function eo(r){return(eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function ir(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function sf(r,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function gr(r,t,e){return t&&sf(r.prototype,t),e&&sf(r,e),r}function ri(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&kf(r,t)}function At(r){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(r)}function kf(r,t){return(kf=Object.setPrototypeOf||function(e,i){return e.__proto__=i,e})(r,t)}function k0(r,t){return!t||typeof t!="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r):t}function ii(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,i=At(r);if(t){var n=At(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return k0(this,e)}}function Jt(r,t,e){return(Jt=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(i,n,o){var s=function(l,u){for(;!Object.prototype.hasOwnProperty.call(l,u)&&(l=At(l))!==null;);return l}(i,n);if(s){var a=Object.getOwnPropertyDescriptor(s,n);return a.get?a.get.call(o):a.value}})(r,t,e||r)}function vt(r,t){return function(e){if(Array.isArray(e))return e}(r)||function(e,i){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(e)))){var n=[],o=!0,s=!1,a=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done)&&(n.push(l.value),!i||n.length!==i);o=!0);}catch(d){s=!0,a=d}finally{try{o||u.return==null||u.return()}finally{if(s)throw a}}return n}}(r,t)||xf(r,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zt(r){return function(t){if(Array.isArray(t))return ms(t)}(r)||function(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}(r)||xf(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function xf(r,t){if(r){if(typeof r=="string")return ms(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ms(r,t):void 0}}function ms(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=r[e];return i}function Cr(r,t){return typeof r=="string"?(t||document).querySelector(r):r||null}function Zn(r){var t=r.getBoundingClientRect();return{top:t.top+(document.documentElement.scrollTop||document.body.scrollTop),left:t.left+(document.documentElement.scrollLeft||document.body.scrollLeft)}}function x0(r){return r.offsetParent===null}function C0(r){var t=r.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}(function(r,t){t===void 0&&(t={});var e=t.insertAt;if(r&&typeof document!="undefined"){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r))}})(`:root {
  --charts-label-color: #313b44;
  --charts-axis-line-color: #f4f5f6;
  --charts-tooltip-title: var(--charts-label-color);
  --charts-tooltip-label: var(--charts-label-color);
  --charts-tooltip-value: #192734;
  --charts-tooltip-bg: #ffffff;
  --charts-stroke-width: 2px;
  --charts-dataset-circle-stroke: #ffffff;
  --charts-dataset-circle-stroke-width: var(--charts-stroke-width);
  --charts-legend-label: var(--charts-label-color);
  --charts-legend-value: var(--charts-label-color); }

.chart-container {
  position: relative;
  /* for absolutely positioned tooltip */
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif; }
  .chart-container .axis,
  .chart-container .chart-label {
    fill: var(--charts-label-color); }
    .chart-container .axis line,
    .chart-container .chart-label line {
      stroke: var(--charts-axis-line-color); }
  .chart-container .dataset-units circle {
    stroke: var(--charts-dataset-circle-stroke);
    stroke-width: var(--charts-dataset-circle-stroke-width); }
  .chart-container .dataset-units path {
    fill: none;
    stroke-opacity: 1;
    stroke-width: var(--charts-stroke-width); }
  .chart-container .dataset-path {
    stroke-width: var(--charts-stroke-width); }
  .chart-container .path-group path {
    fill: none;
    stroke-opacity: 1;
    stroke-width: var(--charts-stroke-width); }
  .chart-container line.dashed {
    stroke-dasharray: 5, 3; }
  .chart-container .axis-line .specific-value {
    text-anchor: start; }
  .chart-container .axis-line .y-line {
    text-anchor: end; }
  .chart-container .axis-line .x-line {
    text-anchor: middle; }
  .chart-container .legend-dataset-label {
    fill: var(--charts-legend-label);
    font-weight: 600; }
  .chart-container .legend-dataset-value {
    fill: var(--charts-legend-value); }

.graph-svg-tip {
  position: absolute;
  z-index: 99999;
  padding: 10px;
  font-size: 12px;
  text-align: center;
  background: var(--charts-tooltip-bg);
  box-shadow: 0px 1px 4px rgba(17, 43, 66, 0.1), 0px 2px 6px rgba(17, 43, 66, 0.08), 0px 40px 30px -30px rgba(17, 43, 66, 0.1);
  border-radius: 6px; }
  .graph-svg-tip ul {
    padding-left: 0;
    display: flex; }
  .graph-svg-tip ol {
    padding-left: 0;
    display: flex; }
  .graph-svg-tip ul.data-point-list li {
    min-width: 90px;
    font-weight: 600; }
  .graph-svg-tip .svg-pointer {
    position: absolute;
    height: 12px;
    width: 12px;
    border-radius: 2px;
    background: var(--charts-tooltip-bg);
    transform: rotate(45deg);
    margin-top: -7px;
    margin-left: -6px; }
  .graph-svg-tip.comparison {
    text-align: left;
    padding: 0px;
    pointer-events: none; }
    .graph-svg-tip.comparison .title {
      display: block;
      padding: 16px;
      margin: 0;
      color: var(--charts-tooltip-title);
      font-weight: 600;
      line-height: 1;
      pointer-events: none;
      text-transform: uppercase; }
      .graph-svg-tip.comparison .title strong {
        color: var(--charts-tooltip-value); }
    .graph-svg-tip.comparison ul {
      margin: 0;
      white-space: nowrap;
      list-style: none; }
      .graph-svg-tip.comparison ul.tooltip-grid {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 5px; }
    .graph-svg-tip.comparison li {
      display: inline-block;
      display: flex;
      flex-direction: row;
      font-weight: 600;
      line-height: 1;
      padding: 5px 15px 15px 15px; }
      .graph-svg-tip.comparison li .tooltip-legend {
        height: 12px;
        width: 12px;
        margin-right: 8px;
        border-radius: 2px; }
      .graph-svg-tip.comparison li .tooltip-label {
        margin-top: 4px;
        font-size: 11px;
        line-height: 1.25;
        max-width: 150px;
        white-space: normal;
        color: var(--charts-tooltip-label); }
      .graph-svg-tip.comparison li .tooltip-value {
        color: var(--charts-tooltip-value); }
`),Cr.create=function(r,t){var e=document.createElement(r);for(var i in t){var n=t[i];if(i==="inside")Cr(n).appendChild(e);else if(i==="around"){var o=Cr(n);o.parentNode.insertBefore(e,o),e.appendChild(o)}else i==="styles"?eo(n)==="object"&&Object.keys(n).map(function(s){e.style[s]=n[s]}):i in e?e[i]=n:e.setAttribute(i,n)}return e};var S0={margins:{top:10,bottom:10,left:20,right:20},paddings:{top:20,bottom:40,left:30,right:10},baseHeight:240,titleHeight:20,legendHeight:30,titleFontSize:12};function Qn(r){return r.titleHeight+r.margins.top+r.paddings.top}function Jn(r){return r.margins.left+r.paddings.left}function Cs(r){return r.margins.top+r.margins.bottom+r.paddings.top+r.paddings.bottom+r.titleHeight+r.legendHeight}function vs(r){return r.margins.left+r.margins.right+r.paddings.left+r.paddings.right}var rn=["pink","blue","green","grey","red","yellow","purple","teal","cyan","orange"],T0={bar:rn,line:rn,pie:rn,percentage:rn,heatmap:["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],donut:rn},af=Math.PI/180,E0=function(){function r(t){var e=t.parent,i=e===void 0?null:e,n=t.colors,o=n===void 0?[]:n;ir(this,r),this.parent=i,this.colors=o,this.titleName="",this.titleValue="",this.listValues=[],this.titleValueFirst=0,this.x=0,this.y=0,this.top=0,this.left=0,this.setup()}return gr(r,[{key:"setup",value:function(){this.makeTooltip()}},{key:"refresh",value:function(){this.fill(),this.calcPosition()}},{key:"makeTooltip",value:function(){var t=this;this.container=Cr.create("div",{inside:this.parent,className:"graph-svg-tip comparison",innerHTML:`<span class="title"></span>
				<ul class="data-point-list"></ul>
				<div class="svg-pointer"></div>`}),this.hideTip(),this.title=this.container.querySelector(".title"),this.list=this.container.querySelector(".data-point-list"),this.dataPointList=this.container.querySelector(".data-point-list"),this.parent.addEventListener("mouseleave",function(){t.hideTip()})}},{key:"fill",value:function(){var t,e=this;this.index&&this.container.setAttribute("data-point-index",this.index),t=this.titleValueFirst?"<strong>".concat(this.titleValue,"</strong>").concat(this.titleName):"".concat(this.titleName,"<strong>").concat(this.titleValue,"</strong>"),this.listValues.length>4?this.list.classList.add("tooltip-grid"):this.list.classList.remove("tooltip-grid"),this.title.innerHTML=t,this.dataPointList.innerHTML="",this.listValues.map(function(i,n){var o=e.colors[n]||"black",s=i.formatted===0||i.formatted?i.formatted:i.value,a=Cr.create("li",{innerHTML:'<div class="tooltip-legend" style="background: '.concat(o,`;"></div>
					<div>
						<div class="tooltip-value">`).concat(s===0||s?s:"",`</div>
						<div class="tooltip-label">`).concat(i.title?i.title:"",`</div>
					</div>`)});e.dataPointList.appendChild(a)})}},{key:"calcPosition",value:function(){var t=this.container.offsetWidth;this.top=this.y-this.container.offsetHeight-7.48,this.left=this.x-t/2;var e=this.parent.offsetWidth-t,i=this.container.querySelector(".svg-pointer");if(this.left<0)i.style.left="calc(50% - ".concat(-1*this.left,"px)"),this.left=0;else if(this.left>e){var n=this.left-e,o="calc(50% + ".concat(n,"px)");i.style.left=o,this.left=e}else i.style.left="50%"}},{key:"setValues",value:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;this.titleName=i.name,this.titleValue=i.value,this.listValues=n,this.x=t,this.y=e,this.titleValueFirst=i.valueFirst||0,this.index=o,this.refresh()}},{key:"hideTip",value:function(){this.container.style.top="0px",this.container.style.left="0px",this.container.style.opacity="0"}},{key:"showTip",value:function(){this.container.style.top=this.top+"px",this.container.style.left=this.left+"px",this.container.style.opacity="1"}}]),r}();function Cf(r){return parseFloat(r.toFixed(2))}function bs(r,t,e){var i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];e||(e=i?r[0]:r[r.length-1]);var n=new Array(Math.abs(t)).fill(e);return r=i?n.concat(r):r.concat(n)}function lf(r,t){return(r+"").length*t}function ps(r,t){return{x:Math.sin(r*af)*t,y:Math.cos(r*af)*t}}function Ar(r){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return!Number.isNaN(r)&&r!==void 0&&!!Number.isFinite(r)&&!(t&&r<0)}function Sf(r){return Number(Math.round(r+"e4")+"e-4")}function ys(r){var t,e,i;if(r instanceof Date)return new Date(r.getTime());if(eo(r)!=="object"||r===null)return r;for(i in t=Array.isArray(r)?[]:{},r)e=r[i],t[i]=ys(e);return t}function cf(r,t){var e,i;return r<=t?(e=t-r,i=r):(e=r-t,i=t),[e,i]}function Dt(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length-r.length;return e>0?r=bs(r,e):t=bs(t,e),[r,t]}function O0(r,t){if(r)return r.length>t?r.slice(0,t-3)+"...":r}function M0(r){var t;if(typeof r=="number")t=r;else if(typeof r=="string"&&(t=Number(r),Number.isNaN(t)))return r;var e=Math.floor(Math.log10(Math.abs(t)));if(e<=2)return t;var i=Math.floor(e/3),n=Math.pow(10,e-3*i)*+(t/Math.pow(10,e)).toFixed(1);return Math.round(100*n)/100+["","K","M","B","T"][i]}function uf(r,t){for(var e=[],i=(Math.min(r.length,t.length),0);i<r.length;i++)e.push([r[i],t[i]]);var n=function(o,s,a,l){var u,d,p,g,m=(u=s||o,p=(d=a||o)[0]-u[0],g=d[1]-u[1],{length:Math.sqrt(Math.pow(p,2)+Math.pow(g,2)),angle:Math.atan2(g,p)}),k=m.angle+(l?Math.PI:0),y=.2*m.length;return[o[0]+Math.cos(k)*y,o[1]+Math.sin(k)*y]};return function(o,s){return o.reduce(function(a,l,u,d){return u===0?"".concat(l[0],",").concat(l[1]):"".concat(a," ").concat(s(l,u,d))},"")}(e,function(o,s,a){var l=n(a[s-1],a[s-2],o),u=n(o,a[s-1],a[s+1],!0);return"C ".concat(l[0],",").concat(l[1]," ").concat(u[0],",").concat(u[1]," ").concat(o[0],",").concat(o[1])})}function df(r,t){return typeof r=="string"?(t||document).querySelector(r):r||null}function Ge(r,t){var e=document.createElementNS("http://www.w3.org/2000/svg",r);for(var i in t){var n=t[i];if(i==="inside")df(n).appendChild(e);else if(i==="around"){var o=df(n);o.parentNode.insertBefore(e,o),e.appendChild(o)}else i==="styles"?eo(n)==="object"&&Object.keys(n).map(function(s){e.style[s]=n[s]}):(i==="className"&&(i="class"),i==="innerHTML"?e.textContent=n:e.setAttribute(i,n))}return e}function $0(r,t){return Ge("linearGradient",{inside:r,id:t,x1:0,x2:0,y1:0,y2:1})}function hs(r,t,e,i){return Ge("stop",{inside:r,style:"stop-color: ".concat(e),offset:t,"stop-opacity":i})}function ws(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,i={className:r,transform:t};return e&&(i.inside=e),Ge("g",i)}function ei(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:2;return Ge("path",{className:t,d:r,styles:{stroke:e,fill:i,"stroke-width":n}})}function L0(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=e.x+r.x,a=e.y+r.y,l=e.x+t.x,u=e.y+t.y;return"M".concat(e.x," ").concat(e.y,`
		L`).concat(s," ").concat(a,`
		A `).concat(i," ").concat(i," 0 ").concat(o," ").concat(n?1:0,`
		`).concat(l," ").concat(u," z")}function B0(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=e.x+r.x,a=e.y+r.y,l=e.x+t.x,u=2*e.y,d=e.y+t.y;return"M".concat(e.x," ").concat(e.y,`
		L`).concat(s," ").concat(a,`
		A `).concat(i," ").concat(i," 0 ").concat(o," ").concat(n?1:0,`
		`).concat(l," ").concat(u,` z
		L`).concat(s," ").concat(u,`
		A `).concat(i," ").concat(i," 0 ").concat(o," ").concat(n?1:0,`
		`).concat(l," ").concat(d," z")}function A0(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=e.x+r.x,a=e.y+r.y,l=e.x+t.x,u=e.y+t.y;return"M".concat(s," ").concat(a,`
		A `).concat(i," ").concat(i," 0 ").concat(o," ").concat(n?1:0,`
		`).concat(l," ").concat(u)}function I0(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=e.x+r.x,a=e.y+r.y,l=e.x+t.x,u=2*i+a,d=e.y+r.y;return"M".concat(s," ").concat(a,`
		A `).concat(i," ").concat(i," 0 ").concat(o," ").concat(n?1:0,`
		`).concat(l," ").concat(u,`
		M`).concat(s," ").concat(u,`
		A `).concat(i," ").concat(i," 0 ").concat(o," ").concat(n?1:0,`
		`).concat(l," ").concat(d)}function ff(r,t){var e=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i="path-fill-gradient-"+t+"-"+(e?"lighter":"default"),n=$0(r,i),o=[1,.6,.2];return e&&(o=[.15,.05,0]),hs(n,"0%",t,o[0]),hs(n,"50%",t,o[1]),hs(n,"100%",t,o[2]),i}function P0(r,t,e){var i=e/2,n=t-i;return"M".concat(r,",0 h").concat(n," q").concat(i,",0 ").concat(i,",").concat(i," q0,").concat(i," -").concat(i,",").concat(i," h-").concat(n," v").concat(e,"z")}function R0(r,t,e){var i=e/2,n=t-i;return"M".concat(r+i,",0 h").concat(n," v").concat(e," h-").concat(n," q-").concat(i,", 0 -").concat(i,",-").concat(i," q0,-").concat(i," ").concat(i,",-").concat(i,"z")}function Tf(r,t,e,i,n){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},a={className:r,x:t,y:e,width:i,height:i,rx:n,fill:o};return Object.keys(s).map(function(l){a[l]=s[l]}),Ge("rect",a)}function Ef(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"none",o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,l=arguments.length>8&&arguments[8]!==void 0&&arguments[8];a||(a=10);var u={className:"legend-dot",x:0,y:4-e,height:e,width:e,rx:i,fill:n},d=Ge("text",{className:"legend-dataset-label",x:e,y:0,dx:a+"px",dy:a/3+"px","font-size":1.6*a+"px","text-anchor":"start",innerHTML:o=l?O0(o,18):o}),p=null;s&&(p=Ge("text",{className:"legend-dataset-value",x:e,y:20,dx:"10px",dy:10/3+"px","font-size":"12px","text-anchor":"start",innerHTML:s}));var g=Ge("g",{transform:"translate(".concat(r,", ").concat(t,")")});return g.appendChild(Ge("rect",u)),g.appendChild(d),s&&p&&g.appendChild(p),g}function an(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},o=n.fontSize||10,s=n.dy!==void 0?n.dy:o/2,a=n.fill||"var(--charts-label-color)",l=n.textAnchor||"start";return Ge("text",{className:r,x:t,y:e,dy:s+"px","font-size":o+"px",fill:a,"text-anchor":l,innerHTML:i})}function j0(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},o=Ge("line",{className:"line-vertical "+n.className,x1:0,x2:0,y1:e,y2:i,styles:{stroke:n.stroke}}),s=Ge("text",{x:0,y:e>i?e+4:e-4-10,dy:"10px","font-size":"10px","text-anchor":"middle",innerHTML:t+""}),a=Ge("g",{transform:"translate(".concat(r,", 0)")});return a.appendChild(o),a.appendChild(s),a}function pf(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};n.lineType||(n.lineType=""),n.shortenNumbers&&(t=n.numberFormatter?n.numberFormatter(t):M0(t));var o="line-horizontal "+n.className+(n.lineType==="dashed"?"dashed":""),s=Ge("line",{className:o,x1:e,x2:i,y1:0,y2:0,styles:{stroke:n.stroke}}),a=Ge("text",{x:e<i?e-4:e+4,y:0,dy:"3px","font-size":"10px","text-anchor":e<i?"end":"start",innerHTML:t+""}),l=Ge("g",{transform:"translate(0, ".concat(r,")"),"stroke-opacity":1});return a!==0&&a!=="0"||(l.style.stroke="rgba(27, 31, 35, 0.6)"),l.appendChild(s),l.appendChild(a),l}function hf(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=arguments.length>6&&arguments[6]!==void 0&&arguments[6],a=Ge("circle",{style:"fill: ".concat(i,"; ").concat(s?"stroke: ".concat(i):""),"data-point-index":o,cx:r,cy:t,r:e});if((n+="")||n.length){a.setAttribute("cy",0),a.setAttribute("cx",0);var l=Ge("text",{className:"data-point-value",x:0,y:0,dy:-5-e+"px","font-size":"10px","text-anchor":"middle",innerHTML:n}),u=Ge("g",{"data-point-index":o,transform:"translate(".concat(r,", ").concat(t,")")});return u.appendChild(a),u.appendChild(l),u}return a}var N0={bar:function(r){var t;r.nodeName!=="rect"&&(t=r.getAttribute("transform"),r=r.childNodes[0]);var e=r.cloneNode();return e.style.fill="#000000",e.style.opacity="0.4",t&&e.setAttribute("transform",t),e},dot:function(r){var t;r.nodeName!=="circle"&&(t=r.getAttribute("transform"),r=r.childNodes[0]);var e=r.cloneNode(),i=r.getAttribute("r"),n=r.getAttribute("fill");return e.setAttribute("r",parseInt(i)+4),e.setAttribute("fill",n),e.style.opacity="0.6",t&&e.setAttribute("transform",t),e},heat_square:function(r){var t;r.nodeName!=="circle"&&(t=r.getAttribute("transform"),r=r.childNodes[0]);var e=r.cloneNode(),i=r.getAttribute("r"),n=r.getAttribute("fill");return e.setAttribute("r",parseInt(i)+4),e.setAttribute("fill",n),e.style.opacity="0.6",t&&e.setAttribute("transform",t),e}},D0={bar:function(r,t){var e;r.nodeName!=="rect"&&(e=r.getAttribute("transform"),r=r.childNodes[0]);var i=["x","y","width","height"];Object.values(r.attributes).filter(function(n){return i.includes(n.name)&&n.specified}).map(function(n){t.setAttribute(n.name,n.nodeValue)}),e&&t.setAttribute("transform",e)},dot:function(r,t){var e;r.nodeName!=="circle"&&(e=r.getAttribute("transform"),r=r.childNodes[0]);var i=["cx","cy"];Object.values(r.attributes).filter(function(n){return i.includes(n.name)&&n.specified}).map(function(n){t.setAttribute(n.name,n.nodeValue)}),e&&t.setAttribute("transform",e)},heat_square:function(r,t){var e;r.nodeName!=="circle"&&(e=r.getAttribute("transform"),r=r.childNodes[0]);var i=["cx","cy"];Object.values(r.attributes).filter(function(n){return i.includes(n.name)&&n.specified}).map(function(n){t.setAttribute(n.name,n.nodeValue)}),e&&t.setAttribute("transform",e)}},F0={pink:"#F683AE",blue:"#318AD8",green:"#48BB74",grey:"#A6B1B9",red:"#F56B6B",yellow:"#FACF7A",purple:"#44427B",teal:"#5FD8C4",cyan:"#15CCEF",orange:"#F8814F","light-pink":"#FED7E5","light-blue":"#BFDDF7","light-green":"#48BB74","light-grey":"#F4F5F6","light-red":"#F6DFDF","light-yellow":"#FEE9BF","light-purple":"#E8E8F7","light-teal":"#D3FDF6","light-cyan":"#DDF8FD","light-orange":"#FECDB8"};function on(r,t,e,i){var n=typeof t=="string"?t:t.join(", ");return[r,{transform:e.join(", ")},i,"easein","translate",{transform:n}]}function _f(r,t,e){return on(r,[0,e],[0,t],350)}function gf(r,t){return[r,{d:t},350,"easein"]}var z0={ease:"0.25 0.1 0.25 1",linear:"0 0 1 1",easein:"0.1 0.8 0.2 1",easeout:"0 0 0.58 1",easeinout:"0.42 0 0.58 1"};function H0(r,t,e){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"linear",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=r.cloneNode(!0),a=r.cloneNode(!0);for(var l in t){var u=void 0;u=l==="transform"?document.createElementNS("http://www.w3.org/2000/svg","animateTransform"):document.createElementNS("http://www.w3.org/2000/svg","animate");var d=o[l]||r.getAttribute(l),p=t[l],g={attributeName:l,from:d,to:p,begin:"0s",dur:e/1e3+"s",values:d+";"+p,keySplines:z0[i],keyTimes:"0;1",calcMode:"spline",fill:"freeze"};for(var m in n&&(g.type=n),g)u.setAttribute(m,g[m]);s.appendChild(u),n?a.setAttribute(l,"translate(".concat(p,")")):a.setAttribute(l,p)}return[s,a]}function ks(r,t){r.style.transform=t,r.style.webkitTransform=t,r.style.msTransform=t,r.style.mozTransform=t,r.style.oTransform=t}function q0(r,t){var e=[],i=[];t.map(function(o){var s,a,l=o[0],u=l.parentNode;o[0]=l;var d=vt(H0.apply(void 0,Zt(o)),2);s=d[0],a=d[1],e.push(a),i.push([s,u]),u.replaceChild(s,l)});var n=r.cloneNode(!0);return i.map(function(o,s){o[1].replaceChild(e[s],o[0]),t[s][0]=e[s]}),n}function W0(r,t,e){if(e.length!==0){var i=q0(t,e);t.parentNode==r&&(r.removeChild(t),r.appendChild(i)),setTimeout(function(){i.parentNode==r&&(r.removeChild(i),r.appendChild(t))},250)}}var Ss=function(){function r(t,e){if(ir(this,r),e=ys(e),this.parent=typeof t=="string"?document.querySelector(t):t,!(this.parent instanceof HTMLElement))throw new Error("No `parent` element to render on was provided.");this.rawChartArgs=e,this.title=e.title||"",this.type=e.type||"",this.realData=this.prepareData(e.data),this.data=this.prepareFirstData(this.realData),this.colors=this.validateColors(e.colors,this.type),this.config={showTooltip:1,showLegend:e.showLegend!==void 0?e.showLegend:1,isNavigable:e.isNavigable||0,animate:e.animate!==void 0?e.animate:1,disableEntryAnimation:e.disableEntryAnimation||0,truncateLegends:e.truncateLegends||1},this.measures=JSON.parse(JSON.stringify(S0));var i=this.measures;this.setMeasures(e),this.title.length||(i.titleHeight=0),this.config.showLegend||(i.legendHeight=0),this.argHeight=e.height||i.baseHeight,this.state={},this.options={},this.initTimeout=700,this.config.isNavigable&&(this.overlays=[]),this.configure(e)}return gr(r,[{key:"prepareData",value:function(t){return t}},{key:"prepareFirstData",value:function(t){return t}},{key:"validateColors",value:function(t,e){var i=[];return(t=(t||[]).concat(T0[e])).forEach(function(n){var o=function(s){return/rgb[a]{0,1}\([\d, ]+\)/gim.test(s)?/\D+(\d*)\D+(\d*)\D+(\d*)/gim.exec(s).map(function(a,l){return l!==0?Number(a).toString(16):"#"}).reduce(function(a,l){return"".concat(a).concat(l)}):F0[s]||s}(n);(function(s){return/(^\s*)(#)((?:[A-Fa-f0-9]{3}){1,2})$/i.test(s)||/(^\s*)(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/i.test(s)})(o)?i.push(o):console.warn('"'+n+'" is not a valid color.')}),i}},{key:"setMeasures",value:function(){}},{key:"configure",value:function(){var t=this,e=this.argHeight;this.baseHeight=e,this.height=e-Cs(this.measures),this.boundDrawFn=function(){return t.draw(!0)},ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.boundDrawFn),this.resizeObserver.observe(this.parent)),window.addEventListener("resize",this.boundDrawFn),window.addEventListener("orientationchange",this.boundDrawFn)}},{key:"destroy",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),window.removeEventListener("resize",this.boundDrawFn),window.removeEventListener("orientationchange",this.boundDrawFn)}},{key:"setup",value:function(){this.makeContainer(),this.updateWidth(),this.makeTooltip(),this.draw(!1,!0)}},{key:"makeContainer",value:function(){this.parent.innerHTML="";var t={inside:this.parent,className:"chart-container"};this.independentWidth&&(t.styles={width:this.independentWidth+"px"}),this.container=Cr.create("div",t)}},{key:"makeTooltip",value:function(){this.tip=new E0({parent:this.container,colors:this.colors}),this.bindTooltip()}},{key:"bindTooltip",value:function(){}},{key:"draw",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];e&&x0(this.parent)||(this.updateWidth(),this.calc(e),this.makeChartArea(),this.setupComponents(),this.components.forEach(function(n){return n.setup(t.drawArea)}),this.render(this.components,!1),i&&(this.data=this.realData,setTimeout(function(){t.update(t.data,!0)},this.initTimeout)),this.config.showLegend&&this.renderLegend(),this.setupNavigation(i))}},{key:"calc",value:function(){}},{key:"updateWidth",value:function(){var t,e,i;this.baseWidth=(t=this.parent,e=window.getComputedStyle(t),i=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),t.clientWidth-i),this.width=this.baseWidth-vs(this.measures)}},{key:"makeChartArea",value:function(){this.svg&&this.container.removeChild(this.svg);var t,e,i,n,o=this.measures;this.svg=(t=this.container,e="frappe-chart chart",i=this.baseWidth,n=this.baseHeight,Ge("svg",{className:e,inside:t,width:i,height:n})),this.svgDefs=Ge("defs",{inside:this.svg}),this.title.length&&(this.titleEL=an("title",o.margins.left,o.margins.top,this.title,{fontSize:o.titleFontSize,fill:"#666666",dy:o.titleFontSize}));var s=Qn(o);this.drawArea=ws(this.type+"-chart chart-draw-area","translate(".concat(Jn(o),", ").concat(s,")")),this.config.showLegend&&(s+=this.height+o.paddings.bottom,this.legendArea=ws("chart-legend","translate(".concat(Jn(o),", ").concat(s,")"))),this.title.length&&this.svg.appendChild(this.titleEL),this.svg.appendChild(this.drawArea),this.config.showLegend&&this.svg.appendChild(this.legendArea),this.updateTipOffset(Jn(o),Qn(o))}},{key:"updateTipOffset",value:function(t,e){this.tip.offset={x:t,y:e}}},{key:"setupComponents",value:function(){this.components=new Map}},{key:"update",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];t||console.error("No data to update."),e||(t=ys(t));var i=e?!this.config.disableEntryAnimation:this.config.animate;this.data=this.prepareData(t),this.calc(),this.render(this.components,i)}},{key:"render",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.components,i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.config.isNavigable&&this.overlays.map(function(o){return o.parentNode.removeChild(o)});var n=[];e.forEach(function(o){n=n.concat(o.update(i))}),n.length>0?(W0(this.container,this.svg,n),setTimeout(function(){e.forEach(function(o){return o.make()}),t.updateNav()},400)):(e.forEach(function(o){return o.make()}),this.updateNav())}},{key:"updateNav",value:function(){this.config.isNavigable&&(this.makeOverlay(),this.bindUnits())}},{key:"renderLegend",value:function(t){var e=this;this.legendArea.textContent="";var i=0,n=0;t.map(function(o,s){var a=Math.floor(e.width/150);i>a&&(i=0,n+=e.config.legendRowHeight);var l=150*i,u=e.makeLegend(o,s,l,n);e.legendArea.appendChild(u),i++})}},{key:"makeLegend",value:function(){}},{key:"setupNavigation",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.config.isNavigable&&e&&(this.bindOverlay(),this.keyActions={13:this.onEnterKey.bind(this),37:this.onLeftArrow.bind(this),38:this.onUpArrow.bind(this),39:this.onRightArrow.bind(this),40:this.onDownArrow.bind(this)},document.addEventListener("keydown",function(i){C0(t.container)&&(i=i||window.event,t.keyActions[i.keyCode]&&t.keyActions[i.keyCode]())}))}},{key:"makeOverlay",value:function(){}},{key:"updateOverlay",value:function(){}},{key:"bindOverlay",value:function(){}},{key:"bindUnits",value:function(){}},{key:"onLeftArrow",value:function(){}},{key:"onRightArrow",value:function(){}},{key:"onUpArrow",value:function(){}},{key:"onDownArrow",value:function(){}},{key:"onEnterKey",value:function(){}},{key:"addDataPoint",value:function(){}},{key:"removeDataPoint",value:function(){}},{key:"getDataPoint",value:function(){}},{key:"setCurrentDataPoint",value:function(){}},{key:"updateDataset",value:function(){}},{key:"export",value:function(){var t=function(e){var i=e.cloneNode(!0);i.classList.add("chart-container"),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");var n=Cr.create("style",{innerHTML:".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}"});i.insertBefore(n,i.firstChild);var o=Cr.create("div");return o.appendChild(i),o.innerHTML}(this.svg);(function(e,i){var n=document.createElement("a");n.style="display: none";var o=new Blob(i,{type:"image/svg+xml; charset=utf-8"}),s=window.URL.createObjectURL(o);n.href=s,n.download=e,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(s)},300)})(this.title||"Chart",[t])}}]),r}(),Of=function(r){ri(e,Ss);var t=ii(e);function e(i,n){return ir(this,e),t.call(this,i,n)}return gr(e,[{key:"configure",value:function(i){Jt(At(e.prototype),"configure",this).call(this,i),this.config.formatTooltipY=(i.tooltipOptions||{}).formatTooltipY,this.config.maxSlices=i.maxSlices||20,this.config.maxLegendPoints=i.maxLegendPoints||20,this.config.legendRowHeight=60}},{key:"calc",value:function(){var i=this,n=this.state,o=this.config.maxSlices;n.sliceTotals=[];var s=this.data.labels.map(function(d,p){var g=0;return i.data.datasets.map(function(m){g+=m.values[p]}),[g,d]}).filter(function(d){return d[0]>=0}),a=s;if(s.length>o){s.sort(function(d,p){return p[0]-d[0]}),a=s.slice(0,o-1);var l=s.slice(o-1),u=0;l.map(function(d){u+=d[0]}),a.push([u,"Rest"]),this.colors[o-1]="grey"}n.labels=[],a.map(function(d){n.sliceTotals.push(Sf(d[0])),n.labels.push(d[1])}),n.grandTotal=n.sliceTotals.reduce(function(d,p){return d+p},0),this.center={x:this.width/2,y:this.height/2}}},{key:"renderLegend",value:function(){var i=this.state;this.legendArea.textContent="",this.legendTotals=i.sliceTotals.slice(0,this.config.maxLegendPoints),Jt(At(e.prototype),"renderLegend",this).call(this,this.legendTotals)}},{key:"makeLegend",value:function(i,n,o,s){var a=this.config.formatTooltipY?this.config.formatTooltipY(i):i;return Ef(o,s,12,3,this.colors[n],this.state.labels[n],a,null,this.config.truncateLegends)}}]),e}(),U0=["January","February","March","April","May","June","July","August","September","October","November","December"],V0=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function mf(r){var t=new Date(r);return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t}function _s(r){var t=r.getDate(),e=r.getMonth()+1;return[r.getFullYear(),(e>9?"":"0")+e,(t>9?"":"0")+t].join("-")}function Ir(r){return new Date(r.getTime())}function gs(r,t){var e=$f(r);return Math.ceil(function(i,n){return(mf(n)-mf(i))/864e5}(e,t)/7)}function Y0(r,t){return r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()}function Mf(r){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],e=U0[r];return t?e.slice(0,3):e}function vf(r,t){return new Date(t,r+1,0)}function $f(r){var t=Ir(r),e=t.getDay();return e!==0&&ti(t,-1*e),t}function ti(r,t){r.setDate(r.getDate()+t)}var G0=function(){function r(t){var e=t.layerClass,i=e===void 0?"":e,n=t.layerTransform,o=n===void 0?"":n,s=t.constants,a=t.getData,l=t.makeElements,u=t.animateElements;ir(this,r),this.layerTransform=o,this.constants=s,this.makeElements=l,this.getData=a,this.animateElements=u,this.store=[],this.labels=[],this.layerClass=i,this.layerClass=typeof this.layerClass=="function"?this.layerClass():this.layerClass,this.refresh()}return gr(r,[{key:"refresh",value:function(t){this.data=t||this.getData()}},{key:"setup",value:function(t){this.layer=ws(this.layerClass,this.layerTransform,t)}},{key:"make",value:function(){this.render(this.data),this.oldData=this.data}},{key:"render",value:function(t){var e=this;this.store=this.makeElements(t),this.layer.textContent="",this.store.forEach(function(i){e.layer.appendChild(i)}),this.labels.forEach(function(i){e.layer.appendChild(i)})}},{key:"update",value:function(){var t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.refresh();var e=[];return t&&(e=this.animateElements(this.data)||[]),e}}]),r}(),bf={donutSlices:{layerClass:"donut-slices",makeElements:function(r){return r.sliceStrings.map(function(t,e){var i=ei(t,"donut-path",r.colors[e],"none",r.strokeWidth);return i.style.transition="transform .3s;",i})},animateElements:function(r){return this.store.map(function(t,e){return gf(t,r.sliceStrings[e])})}},pieSlices:{layerClass:"pie-slices",makeElements:function(r){return r.sliceStrings.map(function(t,e){var i=ei(t,"pie-path","none",r.colors[e]);return i.style.transition="transform .3s;",i})},animateElements:function(r){return this.store.map(function(t,e){return gf(t,r.sliceStrings[e])})}},percentageBars:{layerClass:"percentage-bars",makeElements:function(r){var t=this,e=r.xPositions.length;return r.xPositions.map(function(i,n){var o=n==e-1,s=n==0;return function(a,l,u,d,p,g){var m=arguments.length>6&&arguments[6]!==void 0?arguments[6]:"none";if(g){var k=P0(a,u,d);return ei(k,"percentage-bar",null,m)}if(p){var y=R0(a,u,d);return ei(y,"percentage-bar",null,m)}var v={className:"percentage-bar",x:a,y:l,width:u,height:d,fill:m};return Ge("rect",v)}(i,0,r.widths[n],t.constants.barHeight,s,o,r.colors[n])})},animateElements:function(r){if(r)return[]}},yAxis:{layerClass:"y axis",makeElements:function(r){var t=this;return r.positions.map(function(e,i){return function(n,o,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Ar(n)||(n=0),a.pos||(a.pos="left"),a.offset||(a.offset=0),a.mode||(a.mode="span"),a.stroke||(a.stroke="#E2E6E9"),a.className||(a.className="");var l=-6,u=a.mode==="span"?s+6:0;return a.mode==="tick"&&a.pos==="right"&&(l=s+6,u=s),l+=a.offset,u+=a.offset,typeof o=="number"&&(o=Sf(o)),pf(n,o,l,u,{className:a.className,lineType:a.lineType,shortenNumbers:a.shortenNumbers,numberFormatter:a.numberFormatter})}(e,r.labels[i],t.constants.width,{mode:t.constants.mode,pos:t.constants.pos,shortenNumbers:t.constants.shortenNumbers,numberFormatter:t.constants.numberFormatter})})},animateElements:function(r){var t=r.positions,e=r.labels,i=this.oldData.positions,n=this.oldData.labels,o=vt(Dt(i,t),2);i=o[0],t=o[1];var s=vt(Dt(n,e),2);return n=s[0],e=s[1],this.render({positions:i,labels:e}),this.store.map(function(a,l){return _f(a,t[l],i[l])})}},xAxis:{layerClass:"x axis",makeElements:function(r){var t=this;return r.positions.map(function(e,i){return function(n,o,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Ar(n)||(n=0),a.pos||(a.pos="bottom"),a.offset||(a.offset=0),a.mode||(a.mode="span"),a.className||(a.className="");var l=s+6,u=a.mode==="span"?-6:s;return a.mode==="tick"&&a.pos==="top"&&(l=-6,u=0),j0(n,o,l,u,{className:a.className,lineType:a.lineType})}(e,r.calcLabels[i],t.constants.height,{mode:t.constants.mode,pos:t.constants.pos})})},animateElements:function(r){var t=r.positions,e=r.calcLabels,i=this.oldData.positions,n=this.oldData.calcLabels,o=vt(Dt(i,t),2);i=o[0],t=o[1];var s=vt(Dt(n,e),2);return n=s[0],e=s[1],this.render({positions:i,calcLabels:e}),this.store.map(function(a,l){return function(u,d,p){return on(u,[p,0],[d,0],350)}(a,t[l],i[l])})}},yMarkers:{layerClass:"y-markers",makeElements:function(r){var t=this;return r.map(function(e){return function(i,n,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Ar(i)||(i=0),s.labelPos||(s.labelPos="right"),s.lineType||(s.lineType="dashed");var a=s.labelPos==="left"?4:o-lf(n,5)-4,l=Ge("text",{className:"chart-label",x:a,y:0,dy:"-5px","font-size":"10px","text-anchor":"start",innerHTML:n+""}),u=pf(i,"",0,o,{stroke:s.stroke||"#E2E6E9",className:s.className||"",lineType:s.lineType});return u.appendChild(l),u}(e.position,e.label,t.constants.width,{labelPos:e.options.labelPos,stroke:e.options.stroke,mode:"span",lineType:e.options.lineType})})},animateElements:function(r){var t=vt(Dt(this.oldData,r),2);this.oldData=t[0];var e=(r=t[1]).map(function(s){return s.position}),i=r.map(function(s){return s.label}),n=r.map(function(s){return s.options}),o=this.oldData.map(function(s){return s.position});return this.render(o.map(function(s,a){return{position:o[a],label:i[a],options:n[a]}})),this.store.map(function(s,a){return _f(s,e[a],o[a])})}},yRegions:{layerClass:"y-regions",makeElements:function(r){var t=this;return r.map(function(e){return function(i,n,o,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},l=i-n,u=Ge("rect",{className:"bar mini",styles:{fill:a.fill||"rgba(228, 234, 239, 0.49)",stroke:a.stroke||"#E2E6E9","stroke-dasharray":"".concat(o,", ").concat(l)},x:0,y:0,width:o,height:l});a.labelPos||(a.labelPos="right");var d=a.labelPos==="left"?4:o-lf(s+"",4.5)-4,p=Ge("text",{className:"chart-label",x:d,y:0,dy:"-5px","font-size":"10px","text-anchor":"start",innerHTML:s+""}),g=Ge("g",{transform:"translate(0, ".concat(n,")")});return g.appendChild(u),g.appendChild(p),g}(e.startPos,e.endPos,t.constants.width,e.label,{labelPos:e.options.labelPos,stroke:e.options.stroke,fill:e.options.fill})})},animateElements:function(r){var t=vt(Dt(this.oldData,r),2);this.oldData=t[0];var e=(r=t[1]).map(function(u){return u.endPos}),i=r.map(function(u){return u.label}),n=r.map(function(u){return u.startPos}),o=r.map(function(u){return u.options}),s=this.oldData.map(function(u){return u.endPos}),a=this.oldData.map(function(u){return u.startPos});this.render(s.map(function(u,d){return{startPos:a[d],endPos:s[d],label:i[d],options:o[d]}}));var l=[];return this.store.map(function(u,d){l=l.concat(function(p,g,m,k){var y=g-m,v=p.childNodes[0],x=v.getAttribute("width");return[[v,{height:y,"stroke-dasharray":"".concat(x,", ").concat(y)},350,"easein"],on(p,[0,k],[0,m],350)]}(u,n[d],e[d],s[d]))}),l}},heatDomain:{layerClass:function(){return"heat-domain domain-"+this.constants.index},makeElements:function(r){var t=this,e=this.constants,i=e.index,n=e.colWidth,o=e.rowHeight,s=e.squareSize,a=e.radius,l=e.xTranslate,u=l,d=0;return this.serializedSubDomains=[],r.cols.map(function(p,g){g===1&&t.labels.push(an("domain-name",u,-12,Mf(i,!0).toUpperCase(),{fontSize:9})),p.map(function(m,k){if(m.fill){var y={"data-date":m.yyyyMmDd,"data-value":m.dataValue,"data-day":k},v=Tf("day",u,d,s,a,m.fill,y);t.serializedSubDomains.push(v)}d+=o}),d=0,u+=n}),this.serializedSubDomains},animateElements:function(r){if(r)return[]}},barGraph:{layerClass:function(){return"dataset-units dataset-bars dataset-"+this.constants.index},makeElements:function(r){var t=this.constants;return this.unitType="bar",this.units=r.yPositions.map(function(e,i){return function(n,o,s,a){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,p=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},g=cf(o,p.zeroLine),m=vt(g,2),k=m[0],y=m[1];y-=d,k===0&&(k=p.minHeight,y-=p.minHeight),Ar(n)||(n=0),Ar(y)||(y=0),Ar(k,!0)||(k=0),Ar(s,!0)||(s=0);var v=Ge("rect",{className:"bar mini",style:"fill: ".concat(a),"data-point-index":u,x:n,y,width:s,height:k});if((l+="")||l.length){v.setAttribute("y",0),v.setAttribute("x",0);var x=Ge("text",{className:"data-point-value",x:s/2,y:0,dy:"-5px","font-size":"10px","text-anchor":"middle",innerHTML:l}),C=Ge("g",{"data-point-index":u,transform:"translate(".concat(n,", ").concat(y,")")});return C.appendChild(v),C.appendChild(x),C}return v}(r.xPositions[i],e,r.barWidth,t.color,r.labels[i],i,r.offsets[i],{zeroLine:r.zeroLine,barsWidth:r.barsWidth,minHeight:t.minHeight})}),this.units},animateElements:function(r){var t=r.xPositions,e=r.yPositions,i=r.offsets,n=r.labels,o=this.oldData.xPositions,s=this.oldData.yPositions,a=this.oldData.offsets,l=this.oldData.labels,u=vt(Dt(o,t),2);o=u[0],t=u[1];var d=vt(Dt(s,e),2);s=d[0],e=d[1];var p=vt(Dt(a,i),2);a=p[0],i=p[1];var g=vt(Dt(l,n),2);l=g[0],n=g[1],this.render({xPositions:o,yPositions:s,offsets:a,labels:n,zeroLine:this.oldData.zeroLine,barsWidth:this.oldData.barsWidth,barWidth:this.oldData.barWidth});var m=[];return this.store.map(function(k,y){m=m.concat(function(v,x,C,c){var _=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},b=cf(C,h.zeroLine),M=vt(b,2),E=M[0],w=M[1];if(w-=_,v.nodeName!=="rect"){var S=v.childNodes[0],O=[S,{width:c,height:E},350,"easein"],B=v.getAttribute("transform").split("(")[1].slice(0,-1),A=on(v,B,[x,w],350);return[O,A]}return[[v,{width:c,height:E,x,y:w},350,"easein"]]}(k,t[y],e[y],r.barWidth,i[y],{zeroLine:r.zeroLine}))}),m}},lineGraph:{layerClass:function(){return"dataset-units dataset-line dataset-"+this.constants.index},makeElements:function(r){var t=this.constants;if(this.unitType="dot",this.paths={},t.hideLine||(this.paths=function(n,o,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},u=o.map(function(v,x){return n[x]+","+v}),d=u.join("L");a.spline&&(d=uf(n,o));var p=ei("M"+d,"line-graph-path",s);if(a.heatline){var g=ff(l.svgDefs,s);p.style.stroke="url(#".concat(g,")")}var m={path:p};if(a.regionFill){var k=ff(l.svgDefs,s,!0),y="M"+"".concat(n[0],",").concat(l.zeroLine,"L")+d+"L".concat(n.slice(-1)[0],",").concat(l.zeroLine);m.region=ei(y,"region-fill","none","url(#".concat(k,")"))}return m}(r.xPositions,r.yPositions,t.color,{heatline:t.heatline,regionFill:t.regionFill,spline:t.spline},{svgDefs:t.svgDefs,zeroLine:r.zeroLine})),this.units=[],t.showDots&&(this.units=r.yPositions.map(function(n,o){return hf(r.xPositions[o],n,r.radius,t.color,t.valuesOverPoints?r.values[o]:"",o,t.hideDotBorder)})),t.trailingDot&&!t.showDots){var e=r.yPositions.length-1,i=hf(r.xPositions[e],r.yPositions[e],r.radius,t.color,t.valuesOverPoints?r.values[e]:"",e,t.hideDotBorder);this.units.push(i)}return Object.values(this.paths).concat(this.units)},animateElements:function(r){var t=r.xPositions,e=r.yPositions,i=r.values,n=this.oldData.xPositions,o=this.oldData.yPositions,s=this.oldData.values,a=vt(Dt(n,t),2);n=a[0],t=a[1];var l=vt(Dt(o,e),2);o=l[0],e=l[1];var u=vt(Dt(s,i),2);s=u[0],i=u[1],this.render({xPositions:n,yPositions:o,values:i,zeroLine:this.oldData.zeroLine,radius:this.oldData.radius});var d=[];return Object.keys(this.paths).length&&(d=d.concat(function(p,g,m,k,y){var v=[],x=m.map(function(b,M){return g[M]+","+b}).join("L");y&&(x=uf(g,m));var C=[p.path,{d:"M"+x},350,"easein"];if(v.push(C),p.region){var c="".concat(g[0],",").concat(k,"L"),_="L".concat(g.slice(-1)[0],", ").concat(k),h=[p.region,{d:"M"+c+x+_},350,"easein"];v.push(h)}return v}(this.paths,t,e,r.zeroLine,this.constants.spline))),this.units.length&&this.units.map(function(p,g){d=d.concat(function(m,k,y){if(m.nodeName!=="circle"){var v=m.getAttribute("transform").split("(")[1].slice(0,-1);return[on(m,v,[k,y],350)]}return[[m,{cx:k,cy:y},350,"easein"]]}(p,t[g],e[g]))}),d}}};function ln(r,t,e){var i=Object.keys(bf).filter(function(o){return r.includes(o)}),n=bf[i[0]];return Object.assign(n,{constants:t,getData:e}),new G0(n)}var K0=function(r){ri(e,Of);var t=ii(e);function e(i,n){var o;return ir(this,e),(o=t.call(this,i,n)).type="percentage",o.setup(),o}return gr(e,[{key:"setMeasures",value:function(i){var n=this.measures;this.barOptions=i.barOptions||{};var o=this.barOptions;o.height=o.height||16,n.paddings.right=30,n.paddings.top=60,n.paddings.bottom=0,n.legendHeight=80,n.baseHeight=8*o.height+Cs(n)}},{key:"setupComponents",value:function(){var i=this.state,n=[["percentageBars",{barHeight:this.barOptions.height},function(){return{xPositions:i.xPositions,widths:i.widths,colors:this.colors}}.bind(this)]];this.components=new Map(n.map(function(o){var s=ln.apply(void 0,Zt(o));return[o[0],s]}))}},{key:"calc",value:function(){var i=this;Jt(At(e.prototype),"calc",this).call(this);var n=this.state;n.xPositions=[],n.widths=[];var o=0;n.sliceTotals.map(function(s){var a=i.width*s/n.grandTotal;n.widths.push(a),n.xPositions.push(o),o+=a})}},{key:"makeDataByIndex",value:function(){}},{key:"bindTooltip",value:function(){var i=this,n=this.state;this.container.addEventListener("mousemove",function(o){var s=i.components.get("percentageBars").store,a=o.target;if(s.includes(a)){var l=s.indexOf(a),u=Zn(i.container),d=Zn(a),p=a.getAttribute("width")||a.getBoundingClientRect().width,g=d.left-u.left+parseInt(p)/2,m=d.top-u.top,k=(i.formattedLabels&&i.formattedLabels.length>0?i.formattedLabels[l]:i.state.labels[l])+": ",y=n.sliceTotals[l]/n.grandTotal;i.tip.setValues(g,m,{name:k,value:(100*y).toFixed(1)+"%"}),i.tip.showTip()}})}}]),e}(),yf=function(r){ri(e,Of);var t=ii(e);function e(i,n){var o;return ir(this,e),(o=t.call(this,i,n)).initTimeout=0,o.init=1,o.setup(),o}return gr(e,[{key:"configure",value:function(i){Jt(At(e.prototype),"configure",this).call(this,i),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=i.hoverRadio||.1,this.config.startAngle=i.startAngle||0,this.type="pie",this.sliceName="pieSlices",this.arcFunc=L0,this.shapeFunc=B0,this.clockWise=i.clockWise||!1}},{key:"getRadius",value:function(){return this.height>this.width?this.center.x:this.center.y}},{key:"calc",value:function(){var i=this;Jt(At(e.prototype),"calc",this).call(this);var n=this.state;this.radius=this.getRadius();var o=this.radius,s=this.clockWise,a=n.slicesProperties||[];n.sliceStrings=[],n.slicesProperties=[];var l=180-this.config.startAngle;n.sliceTotals.map(function(u,d){var p,g,m=l,k=u/n.grandTotal*360,y=k>180?1:0,v=s?-k:k,x=l+=v,C=ps(m,o),c=ps(x,o),_=i.init&&a[d];i.init?(p=_?_.startPosition:C,g=_?_.endPosition:C):(p=C,g=c);var h=k===360?i.shapeFunc(p,g,i.center,i.radius,s,y):i.arcFunc(p,g,i.center,i.radius,s,y);n.sliceStrings.push(h),n.slicesProperties.push({startPosition:C,endPosition:c,value:u,total:n.grandTotal,startAngle:m,endAngle:x,angle:v})}),this.init=0}},{key:"setupComponents",value:function(){var i=this.state,n=[["pieSlices",{},function(){return{sliceStrings:i.sliceStrings,colors:this.colors}}.bind(this)]];this.components=new Map(n.map(function(o){var s=ln.apply(void 0,Zt(o));return[o[0],s]}))}},{key:"calTranslateByAngle",value:function(i){var n=this.radius,o=this.hoverRadio,s=ps(i.startAngle+i.angle/2,n);return"translate3d(".concat(s.x*o,"px,").concat(s.y*o,"px,0)")}},{key:"hoverSlice",value:function(i,n,o,s){if(i){var a=this.colors[n];if(o){ks(i,this.calTranslateByAngle(this.state.slicesProperties[n]));var l=Zn(this.svg),u=s.pageX-l.left+10,d=s.pageY-l.top-10,p=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[n]:this.state.labels[n])+": ",g=(100*this.state.sliceTotals[n]/this.state.grandTotal).toFixed(1);this.tip.setValues(u,d,{name:p,value:g+"%"}),this.tip.showTip()}else this.resetHover(i,a)}}},{key:"resetHover",value:function(i,n){ks(i,"translate3d(0,0,0)"),this.tip.hideTip(),i.style.fill=n}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(i){var n=i.target,o=this.components.get(this.sliceName).store,s=this.curActiveSliceIndex,a=this.curActiveSlice;if(o.includes(n)){var l=o.indexOf(n);this.hoverSlice(a,s,!1),this.curActiveSlice=n,this.curActiveSliceIndex=l,this.hoverSlice(n,l,!0,i)}else this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}]),e}();function sn(r){if(r===0)return[0,0];if(isNaN(r))return{mantissa:-6755399441055744,exponent:972};var t=r>0?1:-1;if(!isFinite(r))return{mantissa:4503599627370496*t,exponent:972};r=Math.abs(r);var e=Math.floor(Math.log10(r));return[t*(r/Math.pow(10,e)),e]}function X0(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=Math.ceil(r),i=Math.floor(t),n=e-i,o=n,s=1;n>5&&(n%2!=0&&(n=++e-i),o=n/2,s=2),n<=2&&(s=n/(o=4)),n===0&&(o=5,s=1);for(var a=[],l=0;l<=o;l++)a.push(i+s*l);return a}function nn(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=sn(r),i=vt(e,2),n=i[0],o=i[1],s=t?t/Math.pow(10,o):0,a=X0(n=n.toFixed(6),s);return a=a.map(function(l){return l*Math.pow(10,o)})}function J0(r){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=Math.max.apply(Math,Zt(r)),n=Math.min.apply(Math,Zt(r));e.max!==void 0&&(i=i>e.max?i:e.max),e.min!==void 0&&(n=n<e.min?n:e.min);var o=[];function s(p,g){for(var m=nn(p),k=m[1]-m[0],y=0,v=1;y<g;v++)y+=k,m.unshift(-1*y);return m}if(i>=0&&n>=0)sn(i)[1],o=t?nn(i,n):nn(i);else if(i>0&&n<0){var a=Math.abs(n);if(i>=a)sn(i)[1],o=s(i,a);else{sn(a)[1];var l=s(a,i);o=l.reverse().map(function(p){return-1*p})}}else if(i<=0&&n<=0){var u=Math.abs(n),d=Math.abs(i);sn(u)[1],o=(o=t?nn(u,d):nn(u)).reverse().map(function(p){return-1*p})}return o}function Z0(r){var t,e=Lf(r);return r.indexOf(0)>=0?t=r.indexOf(0):r[0]>0?t=-1*r[0]/e:t=-1*r[r.length-1]/e+(r.length-1),t}function Lf(r){return r[1]-r[0]}function Q0(r){return r[r.length-1]-r[0]}function Xn(r,t){return Cf(t.zeroLine-r*t.scaleMultiplier)}var ew=function(r){ri(e,Ss);var t=ii(e);function e(i,n){var o;ir(this,e),(o=t.call(this,i,n)).type="heatmap",o.countLabel=n.countLabel||"";var s=["Sunday","Monday"],a=s.includes(n.startSubDomain)?n.startSubDomain:"Sunday";return o.startSubDomainIndex=s.indexOf(a),o.setup(),o}return gr(e,[{key:"setMeasures",value:function(i){var n=this.measures;this.discreteDomains=i.discreteDomains===0?0:1,n.paddings.top=36,n.paddings.bottom=0,n.legendHeight=24,n.baseHeight=84+Cs(n);var o=this.data,s=this.discreteDomains?12:0;this.independentWidth=12*(gs(o.start,o.end)+s)+vs(n)}},{key:"updateWidth",value:function(){var i=this.discreteDomains?12:0,n=this.state.noOfWeeks?this.state.noOfWeeks:52;this.baseWidth=12*(n+i)+vs(this.measures)}},{key:"prepareData",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data;if(i.start&&i.end&&i.start>i.end)throw new Error("Start date cannot be greater than end date.");if(i.start||(i.start=new Date,i.start.setFullYear(i.start.getFullYear()-1)),i.end||(i.end=new Date),i.dataPoints=i.dataPoints||{},parseInt(Object.keys(i.dataPoints)[0])>1e5){var n={};Object.keys(i.dataPoints).forEach(function(o){var s=new Date(1e3*o);n[_s(s)]=i.dataPoints[o]}),i.dataPoints=n}return i}},{key:"calc",value:function(){var i=this.state;i.start=Ir(this.data.start),i.end=Ir(this.data.end),i.firstWeekStart=Ir(i.start),i.noOfWeeks=gs(i.start,i.end),i.distribution=function(n,o){for(var s=Math.max.apply(Math,Zt(n)),a=1/(o-1),l=[],u=0;u<o;u++){var d=s*(a*u);l.push(d)}return l}(Object.values(this.data.dataPoints),5),i.domainConfigs=this.getDomains()}},{key:"setupComponents",value:function(){var i=this,n=this.state,o=this.discreteDomains?0:1,s=n.domainConfigs.map(function(l,u){return["heatDomain",{index:l.index,colWidth:12,rowHeight:12,squareSize:10,radius:i.rawChartArgs.radius||0,xTranslate:12*n.domainConfigs.filter(function(d,p){return p<u}).map(function(d){return d.cols.length-o}).reduce(function(d,p){return d+p},0)},function(){return n.domainConfigs[u]}.bind(i)]});this.components=new Map(s.map(function(l,u){var d=ln.apply(void 0,Zt(l));return[l[0]+"-"+u,d]}));var a=0;V0.forEach(function(l,u){if([1,3,5].includes(u)){var d=an("subdomain-name",-6,a,l,{fontSize:10,dy:8,textAnchor:"end"});i.drawArea.appendChild(d)}a+=12})}},{key:"update",value:function(i){i||console.error("No data to update."),this.data=this.prepareData(i),this.draw(),this.bindTooltip()}},{key:"bindTooltip",value:function(){var i=this;this.container.addEventListener("mousemove",function(n){i.components.forEach(function(o){var s=o.store,a=n.target;if(s.includes(a)){var l=a.getAttribute("data-value"),u=a.getAttribute("data-date").split("-"),d=Mf(parseInt(u[1])-1,!0),p=i.container.getBoundingClientRect(),g=a.getBoundingClientRect(),m=parseInt(n.target.getAttribute("width")),k=g.left-p.left+m/2,y=g.top-p.top,v=l+" "+i.countLabel,x=" on "+d+" "+u[0]+", "+u[2];i.tip.setValues(k,y,{name:x,value:v,valueFirst:1},[]),i.tip.showTip()}})})}},{key:"renderLegend",value:function(){var i=this;this.legendArea.textContent="";var n=0,o=this.rawChartArgs.radius||0,s=an("subdomain-name",n,12,"Less",{fontSize:11,dy:9});n=30,this.legendArea.appendChild(s),this.colors.slice(0,5).map(function(l,u){var d=Tf("heatmap-legend-unit",n+15*u,12,10,o,l);i.legendArea.appendChild(d)});var a=an("subdomain-name",n+75+3,12,"More",{fontSize:11,dy:9});this.legendArea.appendChild(a)}},{key:"getDomains",value:function(){for(var i=this.state,n=[i.start.getMonth(),i.start.getFullYear()],o=n[0],s=n[1],a=[i.end.getMonth(),i.end.getFullYear()],l=a[0]-o+1+12*(a[1]-s),u=[],d=Ir(i.start),p=0;p<l;p++){var g=i.end;if(!Y0(d,i.end)){var m=[d.getMonth(),d.getFullYear()];g=vf(m[0],m[1])}u.push(this.getDomainConfig(d,g)),ti(g,1),d=g}return u}},{key:"getDomainConfig",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=[i.getMonth(),i.getFullYear()],s=o[0],a=o[1],l=$f(i),u={index:s,cols:[]};ti(n=Ir(n)||vf(s,a),1);for(var d,p=gs(l,n),g=[],m=0;m<p;m++)d=this.getCol(l,s),g.push(d),ti(l=new Date(d[6].yyyyMmDd),1);return d[6].dataValue!==void 0&&(ti(l,1),g.push(this.getCol(l,s,!0))),u.cols=g,u}},{key:"getCol",value:function(i,n){for(var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],s=this.state,a=Ir(i),l=[],u=0;u<7;u++,ti(a,1)){var d={},p=a>=s.start&&a<=s.end;o||a.getMonth()!==n||!p?d.yyyyMmDd=_s(a):d=this.getSubDomainConfig(a),l.push(d)}return l}},{key:"getSubDomainConfig",value:function(i){var n,o,s=_s(i),a=this.data.dataPoints[s];return{yyyyMmDd:s,dataValue:a||0,fill:this.colors[n=a,o=this.state.distribution,o.filter(function(l){return l<n}).length]}}}]),e}();function tw(r,t){r.labels=r.labels||[];var e=r.labels.length,i=r.datasets,n=new Array(e).fill(0);return i||(i=[{values:n}]),i.map(function(o){if(o.values){var s=o.values;s=(s=s.map(function(a){return isNaN(a)?0:a})).length>e?s.slice(0,e):bs(s,e-s.length,0),o.values=s}else o.values=n;o.chartType||(o.chartType=t)}),r.yRegions&&r.yRegions.map(function(o){if(o.end<o.start){var s=[o.end,o.start];o.start=s[0],o.end=s[1]}}),r}function rw(r){var t=r.labels.length,e=new Array(t).fill(0),i={labels:r.labels.slice(0,-1),datasets:r.datasets.map(function(n){return{name:"",values:e.slice(0,-1),chartType:n.chartType}})};return r.yMarkers&&(i.yMarkers=[{value:0,label:""}]),r.yRegions&&(i.yRegions=[{start:0,end:0,label:""}]),i}var xs=function(r){ri(e,Ss);var t=ii(e);function e(i,n){var o;return ir(this,e),(o=t.call(this,i,n)).barOptions=n.barOptions||{},o.lineOptions=n.lineOptions||{},o.type=n.type||"line",o.init=1,o.setup(),o}return gr(e,[{key:"setMeasures",value:function(){this.data.datasets.length<=1&&(this.config.showLegend=0,this.measures.paddings.bottom=30)}},{key:"configure",value:function(i){Jt(At(e.prototype),"configure",this).call(this,i),i.axisOptions=i.axisOptions||{},i.tooltipOptions=i.tooltipOptions||{},this.config.xAxisMode=i.axisOptions.xAxisMode||"span",this.config.yAxisMode=i.axisOptions.yAxisMode||"span",this.config.xIsSeries=i.axisOptions.xIsSeries||0,this.config.shortenYAxisNumbers=i.axisOptions.shortenYAxisNumbers||0,this.config.numberFormatter=i.axisOptions.numberFormatter,this.config.yAxisRange=i.axisOptions.yAxisRange||{},this.config.formatTooltipX=i.tooltipOptions.formatTooltipX,this.config.formatTooltipY=i.tooltipOptions.formatTooltipY,this.config.valuesOverPoints=i.valuesOverPoints,this.config.legendRowHeight=30}},{key:"prepareData",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data;return tw(i,this.type)}},{key:"prepareFirstData",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data;return rw(i)}},{key:"calc",value:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.calcXPositions(),i||this.calcYAxisParameters(this.getAllYValues(),this.type==="line"),this.makeDataByIndex()}},{key:"calcXPositions",value:function(){var i=this.state,n=this.data.labels;i.datasetLength=n.length,i.unitWidth=this.width/i.datasetLength,i.xOffset=i.unitWidth/2,i.xAxis={labels:n,positions:n.map(function(o,s){return Cf(i.xOffset+s*i.unitWidth)})}}},{key:"calcYAxisParameters",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"false",o=J0(i,n,this.config.yAxisRange),s=this.height/Q0(o),a=Lf(o)*s,l=this.height-Z0(o)*a;this.state.yAxis={labels:o,positions:o.map(function(u){return l-u*s}),scaleMultiplier:s,zeroLine:l},this.calcDatasetPoints(),this.calcYExtremes(),this.calcYRegions()}},{key:"calcDatasetPoints",value:function(){var i=this.state,n=function(o){return o.map(function(s){return Xn(s,i.yAxis)})};i.datasets=this.data.datasets.map(function(o,s){var a=o.values,l=o.cumulativeYs||[];return{name:o.name&&o.name.replace(/<|>|&/g,function(u){return u=="&"?"&amp;":u=="<"?"&lt;":"&gt;"}),index:s,chartType:o.chartType,values:a,yPositions:n(a),cumulativeYs:l,cumulativeYPos:n(l)}})}},{key:"calcYExtremes",value:function(){var i=this.state;this.barOptions.stacked?i.yExtremes=i.datasets[i.datasets.length-1].cumulativeYPos:(i.yExtremes=new Array(i.datasetLength).fill(9999),i.datasets.map(function(n){n.yPositions.map(function(o,s){o<i.yExtremes[s]&&(i.yExtremes[s]=o)})}))}},{key:"calcYRegions",value:function(){var i=this.state;this.data.yMarkers&&(this.state.yMarkers=this.data.yMarkers.map(function(n){return n.position=Xn(n.value,i.yAxis),n.options||(n.options={}),n})),this.data.yRegions&&(this.state.yRegions=this.data.yRegions.map(function(n){return n.startPos=Xn(n.start,i.yAxis),n.endPos=Xn(n.end,i.yAxis),n.options||(n.options={}),n}))}},{key:"getAllYValues",value:function(){var i,n=this,o="values";if(this.barOptions.stacked){o="cumulativeYs";var s=new Array(this.state.datasetLength).fill(0);this.data.datasets.map(function(l,u){var d=n.data.datasets[u].values;l[o]=s=s.map(function(p,g){return p+d[g]})})}var a=this.data.datasets.map(function(l){return l[o]});return this.data.yMarkers&&a.push(this.data.yMarkers.map(function(l){return l.value})),this.data.yRegions&&this.data.yRegions.map(function(l){a.push([l.end,l.start])}),(i=[]).concat.apply(i,Zt(a))}},{key:"setupComponents",value:function(){var i=this,n=[["yAxis",{mode:this.config.yAxisMode,width:this.width,shortenNumbers:this.config.shortenYAxisNumbers,numberFormatter:this.config.numberFormatter},function(){return this.state.yAxis}.bind(this)],["xAxis",{mode:this.config.xAxisMode,height:this.height},function(){var p=this.state;return p.xAxis.calcLabels=function(g){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],k=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=g/m.length*.6;y<=0&&(y=1);var v,x=y/7;if(k){var C=Math.max.apply(Math,Zt(m.map(function(_){return _.length})));v=Math.ceil(C/x)}var c=m.map(function(_,h){return(_+="").length>x&&(k?h%v!=0?h!==m.length-1&&(_=""):h>m.length-v/2&&(_=""):_=x-3>0?_.slice(0,x-3)+" ...":_.slice(0,x)+".."),_});return c}(this.width,p.xAxis.labels,this.config.xIsSeries),p.xAxis}.bind(this)],["yRegions",{width:this.width,pos:"right"},function(){return this.state.yRegions}.bind(this)]],o=this.state.datasets.filter(function(p){return p.chartType==="bar"}),s=this.state.datasets.filter(function(p){return p.chartType==="line"}),a=o.map(function(p){var g=p.index;return["barGraph-"+p.index,{index:g,color:i.colors[g],stacked:i.barOptions.stacked,valuesOverPoints:i.config.valuesOverPoints,minHeight:0*i.height},function(){var m=this.state,k=m.datasets[g],y=this.barOptions.stacked,v=this.barOptions.spaceRatio||.5,x=m.unitWidth*(1-v),C=x/(y?1:o.length),c=m.xAxis.positions.map(function(b){return b-x/2});y||(c=c.map(function(b){return b+C*g}));var _=new Array(m.datasetLength).fill("");this.config.valuesOverPoints&&(_=y&&k.index===m.datasets.length-1?k.cumulativeYs:k.values);var h=new Array(m.datasetLength).fill(0);return y&&(h=k.yPositions.map(function(b,M){return b-k.cumulativeYPos[M]})),{xPositions:c,yPositions:k.yPositions,offsets:h,labels:_,zeroLine:m.yAxis.zeroLine,barsWidth:x,barWidth:C}}.bind(i)]}),l=s.map(function(p){var g=p.index;return["lineGraph-"+p.index,{index:g,color:i.colors[g],svgDefs:i.svgDefs,heatline:i.lineOptions.heatline,regionFill:i.lineOptions.regionFill,spline:i.lineOptions.spline,showDots:i.lineOptions.showDots,trailingDot:i.lineOptions.trailingDot,hideDotBorder:i.lineOptions.hideDotBorder,hideLine:i.lineOptions.hideLine,valuesOverPoints:i.config.valuesOverPoints},function(){var m=this.state,k=m.datasets[g],y=m.yAxis.positions[0]<m.yAxis.zeroLine?m.yAxis.positions[0]:m.yAxis.zeroLine;return{xPositions:m.xAxis.positions,yPositions:k.yPositions,values:k.values,zeroLine:y,radius:this.lineOptions.dotSize||4}}.bind(i)]}),u=[["yMarkers",{width:this.width,pos:"right"},function(){return this.state.yMarkers}.bind(this)]];n=n.concat(a,l,u);var d=["yMarkers","yRegions"];this.dataUnitComponents=[],this.components=new Map(n.filter(function(p){return!d.includes(p[0])||i.state[p[0]]}).map(function(p){var g=ln.apply(void 0,Zt(p));return(p[0].includes("lineGraph")||p[0].includes("barGraph"))&&i.dataUnitComponents.push(g),[p[0],g]}))}},{key:"makeDataByIndex",value:function(){var i=this;this.dataByIndex={};var n=this.state,o=this.config.formatTooltipX,s=this.config.formatTooltipY;n.xAxis.labels.map(function(a,l){var u=i.state.datasets.map(function(d,p){var g=d.values[l];return{title:d.name,value:g,yPos:d.yPositions[l],color:i.colors[p],formatted:s?s(g):g}});i.dataByIndex[l]={label:a,formattedLabel:o?o(a):a,xPos:n.xAxis.positions[l],values:u,yExtreme:n.yExtremes[l]}})}},{key:"bindTooltip",value:function(){var i=this;this.container.addEventListener("mousemove",function(n){var o=i.measures,s=Zn(i.container),a=n.pageX-s.left-Jn(o),l=n.pageY-s.top;l<i.height+Qn(o)&&l>Qn(o)?i.mapTooltipXPosition(a):i.tip.hideTip()})}},{key:"mapTooltipXPosition",value:function(i){var n=this.state;if(n.yExtremes){var o=function(a,l){var u=arguments.length>2&&arguments[2]!==void 0&&arguments[2],d=l.reduce(function(p,g){return Math.abs(g-a)<Math.abs(p-a)?g:p},[]);return u?l.indexOf(d):d}(i,n.xAxis.positions,!0);if(o>=0){var s=this.dataByIndex[o];this.tip.setValues(s.xPos+this.tip.offset.x,s.yExtreme+this.tip.offset.y,{name:s.formattedLabel,value:""},s.values,o),this.tip.showTip()}}}},{key:"renderLegend",value:function(){var i=this.data;i.datasets.length>1&&Jt(At(e.prototype),"renderLegend",this).call(this,i.datasets)}},{key:"makeLegend",value:function(i,n,o,s){return Ef(o,s+5,12,3,this.colors[n],i.name,null,8.75,this.config.truncateLegends)}},{key:"makeOverlay",value:function(){var i=this;this.init?this.init=0:(this.overlayGuides&&this.overlayGuides.forEach(function(n){var o=n.overlay;o.parentNode.removeChild(o)}),this.overlayGuides=this.dataUnitComponents.map(function(n){return{type:n.unitType,overlay:void 0,units:n.units}}),this.state.currentIndex===void 0&&(this.state.currentIndex=this.state.datasetLength-1),this.overlayGuides.map(function(n){var o=n.units[i.state.currentIndex];n.overlay=N0[n.type](o),i.drawArea.appendChild(n.overlay)}))}},{key:"updateOverlayGuides",value:function(){this.overlayGuides&&this.overlayGuides.forEach(function(i){var n=i.overlay;n.parentNode.removeChild(n)})}},{key:"bindOverlay",value:function(){var i=this;this.parent.addEventListener("data-select",function(){i.updateOverlay()})}},{key:"bindUnits",value:function(){var i=this;this.dataUnitComponents.map(function(n){n.units.map(function(o){o.addEventListener("click",function(){var s=o.getAttribute("data-point-index");i.setCurrentDataPoint(s)})})}),this.tip.container.addEventListener("click",function(){var n=i.tip.container.getAttribute("data-point-index");i.setCurrentDataPoint(n)})}},{key:"updateOverlay",value:function(){var i=this;this.overlayGuides.map(function(n){var o=n.units[i.state.currentIndex];D0[n.type](o,n.overlay)})}},{key:"onLeftArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex-1)}},{key:"onRightArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex+1)}},{key:"getDataPoint",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.currentIndex,n=this.state,o={index:i,label:n.xAxis.labels[i],values:n.datasets.map(function(s){return s.values[i]})};return o}},{key:"setCurrentDataPoint",value:function(i){var n=this.state;(i=parseInt(i))<0&&(i=0),i>=n.xAxis.labels.length&&(i=n.xAxis.labels.length-1),i!==n.currentIndex&&(n.currentIndex=i,function(o,s,a){var l=document.createEvent("HTMLEvents");for(var u in l.initEvent(s,!0,!0),a)l[u]=a[u];o.dispatchEvent(l)}(this.parent,"data-select",this.getDataPoint()))}},{key:"addDataPoint",value:function(i,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.state.datasetLength;Jt(At(e.prototype),"addDataPoint",this).call(this,i,n,o),this.data.labels.splice(o,0,i),this.data.datasets.map(function(s,a){s.values.splice(o,0,n[a])}),this.update(this.data)}},{key:"removeDataPoint",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.datasetLength-1;this.data.labels.length<=1||(Jt(At(e.prototype),"removeDataPoint",this).call(this,i),this.data.labels.splice(i,1),this.data.datasets.map(function(n){n.values.splice(i,1)}),this.update(this.data))}},{key:"updateDataset",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.data.datasets[n].values=i,this.update(this.data)}},{key:"updateDatasets",value:function(i){this.data.datasets.map(function(n,o){i[o]&&(n.values=i[o])}),this.update(this.data)}}]),e}(),wf={bar:xs,line:xs,percentage:K0,heatmap:ew,pie:yf,donut:function(r){ri(e,yf);var t=ii(e);function e(i,n){return ir(this,e),t.call(this,i,n)}return gr(e,[{key:"configure",value:function(i){Jt(At(e.prototype),"configure",this).call(this,i),this.type="donut",this.sliceName="donutSlices",this.arcFunc=A0,this.shapeFunc=I0,this.strokeWidth=i.strokeWidth||30}},{key:"getRadius",value:function(){return this.height>this.width?this.center.x-this.strokeWidth/2:this.center.y-this.strokeWidth/2}},{key:"resetHover",value:function(i,n){ks(i,"translate3d(0,0,0)"),this.tip.hideTip(),i.style.stroke=n}},{key:"setupComponents",value:function(){var i=this.state,n=[[this.sliceName,{},function(){return{sliceStrings:i.sliceStrings,colors:this.colors,strokeWidth:this.strokeWidth}}.bind(this)]];this.components=new Map(n.map(function(o){var s=ln.apply(void 0,Zt(o));return[o[0],s]}))}}]),e}()},Bf=function r(t,e){return ir(this,r),function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"line",n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return i==="axis-mixed"?(o.type="line",new xs(n,o)):wf[i]?new wf[i](n,o):void console.error("Undefined chart type: "+i)}(e.type,t,e)};frappe.provide("frappe.ui");frappe.Chart=Bf;frappe.ui.RealtimeChart=class extends frappe.Chart{constructor(t,e,i=8,n){super(t,n),n.data.datasets[0].values.length>i&&frappe.throw(__("Length of passed data array is greater than value of maximum allowed label points!")),this.currentSize=n.data.datasets[0].values.length,this.socketEvent=e,this.maxLabelPoints=i,this.start_updating=function(){frappe.realtime.on(this.socketEvent,o=>{this.update_chart(o.label,o.points)})},this.stop_updating=function(){frappe.realtime.off(this.socketEvent)},this.update_chart=function(o,s){this.currentSize>=this.maxLabelPoints?this.removeDataPoint(0):this.currentSize++,this.addDataPoint(o,s)}}};var Xf=Gt(Kf());frappe.DataTable=Xf.default;var Zf=Gt(Jf());frappe.Driver=Zf.default;frappe.provide("frappe.ui");frappe.ui.Scanner=class{constructor(t){this.dialog=null,this.handler=null,this.options=t,this.is_alive=!1,"multiple"in this.options||(this.options.multiple=!1),t.container&&(this.$scan_area=$(t.container),this.scan_area_id=frappe.dom.set_unique_id(this.$scan_area)),t.dialog&&(this.dialog=this.make_dialog(),this.dialog.show())}scan(){this.load_lib().then(()=>this.start_scan())}start_scan(){this.handler||(this.handler=new Html5Qrcode(this.scan_area_id)),this.handler.start({facingMode:"environment"},{fps:10,qrbox:250},(t,e)=>{if(this.options.on_scan)try{this.options.on_scan(e)}catch(i){console.error(i)}this.options.multiple||(this.stop_scan(),this.hide_dialog())},t=>{}).catch(t=>{this.is_alive=!1,this.hide_dialog(),console.error(t)}),this.is_alive=!0}stop_scan(){this.handler&&this.is_alive&&this.handler.stop().then(()=>{this.is_alive=!1,this.$scan_area.empty(),this.hide_dialog()})}make_dialog(){let t=new frappe.ui.Dialog({title:__("Scan QRCode"),fields:[{fieldtype:"HTML",fieldname:"scan_area"}],on_page_show:()=>{this.$scan_area=t.get_field("scan_area").$wrapper,this.$scan_area.addClass("barcode-scanner"),this.scan_area_id=frappe.dom.set_unique_id(this.$scan_area),this.scan()},on_hide:()=>{this.stop_scan()}});return t}hide_dialog(){this.dialog&&this.dialog.hide()}load_lib(){return frappe.require("/assets/frappe/node_modules/html5-qrcode/html5-qrcode.min.js")}};})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! For license information please see editor.js.LICENSE.txt */
/*! Sortable 1.15.0 - MIT | git://github.com/SortableJS/Sortable.git */
/*! showdown v 2.1.0 - 21-04-2022 */
//# sourceMappingURL=desk.bundle.IN43ZBTB.js.map
